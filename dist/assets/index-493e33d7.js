function EW(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function bR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var jR={exports:{}},V1={},wR={exports:{}},ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg=Symbol.for("react.element"),PW=Symbol.for("react.portal"),TW=Symbol.for("react.fragment"),_W=Symbol.for("react.strict_mode"),IW=Symbol.for("react.profiler"),kW=Symbol.for("react.provider"),DW=Symbol.for("react.context"),OW=Symbol.for("react.forward_ref"),LW=Symbol.for("react.suspense"),RW=Symbol.for("react.memo"),$W=Symbol.for("react.lazy"),tT=Symbol.iterator;function FW(e){return e===null||typeof e!="object"?null:(e=tT&&e[tT]||e["@@iterator"],typeof e=="function"?e:null)}var NR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SR=Object.assign,CR={};function vm(e,t,r){this.props=e,this.context=t,this.refs=CR,this.updater=r||NR}vm.prototype.isReactComponent={};vm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function AR(){}AR.prototype=vm.prototype;function i4(e,t,r){this.props=e,this.context=t,this.refs=CR,this.updater=r||NR}var o4=i4.prototype=new AR;o4.constructor=i4;SR(o4,vm.prototype);o4.isPureReactComponent=!0;var rT=Array.isArray,ER=Object.prototype.hasOwnProperty,l4={current:null},PR={key:!0,ref:!0,__self:!0,__source:!0};function TR(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)ER.call(t,s)&&!PR.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Kg,type:e,key:i,ref:o,props:a,_owner:l4.current}}function MW(e,t){return{$$typeof:Kg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c4(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kg}function BW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nT=/\/+/g;function T2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BW(""+e.key):t.toString(36)}function Ny(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Kg:case PW:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+T2(o,0):s,rT(a)?(r="",e!=null&&(r=e.replace(nT,"$&/")+"/"),Ny(a,t,r,"",function(d){return d})):a!=null&&(c4(a)&&(a=MW(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(nT,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",rT(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+T2(i,l);o+=Ny(i,t,r,c,a)}else if(c=FW(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+T2(i,l++),o+=Ny(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function x0(e,t,r){if(e==null)return e;var s=[],a=0;return Ny(e,s,"","",function(i){return t.call(r,i,a++)}),s}function zW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var na={current:null},Sy={transition:null},UW={ReactCurrentDispatcher:na,ReactCurrentBatchConfig:Sy,ReactCurrentOwner:l4};function _R(){throw Error("act(...) is not supported in production builds of React.")}ar.Children={map:x0,forEach:function(e,t,r){x0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return x0(e,function(){t++}),t},toArray:function(e){return x0(e,function(t){return t})||[]},only:function(e){if(!c4(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ar.Component=vm;ar.Fragment=TW;ar.Profiler=IW;ar.PureComponent=i4;ar.StrictMode=_W;ar.Suspense=LW;ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UW;ar.act=_R;ar.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=SR({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=l4.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ER.call(t,c)&&!PR.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Kg,type:e.type,key:a,ref:i,props:s,_owner:o}};ar.createContext=function(e){return e={$$typeof:DW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kW,_context:e},e.Consumer=e};ar.createElement=TR;ar.createFactory=function(e){var t=TR.bind(null,e);return t.type=e,t};ar.createRef=function(){return{current:null}};ar.forwardRef=function(e){return{$$typeof:OW,render:e}};ar.isValidElement=c4;ar.lazy=function(e){return{$$typeof:$W,_payload:{_status:-1,_result:e},_init:zW}};ar.memo=function(e,t){return{$$typeof:RW,type:e,compare:t===void 0?null:t}};ar.startTransition=function(e){var t=Sy.transition;Sy.transition={};try{e()}finally{Sy.transition=t}};ar.unstable_act=_R;ar.useCallback=function(e,t){return na.current.useCallback(e,t)};ar.useContext=function(e){return na.current.useContext(e)};ar.useDebugValue=function(){};ar.useDeferredValue=function(e){return na.current.useDeferredValue(e)};ar.useEffect=function(e,t){return na.current.useEffect(e,t)};ar.useId=function(){return na.current.useId()};ar.useImperativeHandle=function(e,t,r){return na.current.useImperativeHandle(e,t,r)};ar.useInsertionEffect=function(e,t){return na.current.useInsertionEffect(e,t)};ar.useLayoutEffect=function(e,t){return na.current.useLayoutEffect(e,t)};ar.useMemo=function(e,t){return na.current.useMemo(e,t)};ar.useReducer=function(e,t,r){return na.current.useReducer(e,t,r)};ar.useRef=function(e){return na.current.useRef(e)};ar.useState=function(e){return na.current.useState(e)};ar.useSyncExternalStore=function(e,t,r){return na.current.useSyncExternalStore(e,t,r)};ar.useTransition=function(){return na.current.useTransition()};ar.version="18.3.1";wR.exports=ar;var w=wR.exports;const ce=Cr(w),Zo=EW({__proto__:null,default:ce},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VW=w,qW=Symbol.for("react.element"),WW=Symbol.for("react.fragment"),HW=Object.prototype.hasOwnProperty,GW=VW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KW={key:!0,ref:!0,__self:!0,__source:!0};function IR(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)HW.call(t,s)&&!KW.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:qW,type:e,key:i,ref:o,props:a,_owner:GW.current}}V1.Fragment=WW;V1.jsx=IR;V1.jsxs=IR;jR.exports=V1;var n=jR.exports,_5={},kR={exports:{}},Ka={},DR={exports:{}},OR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,U){var W=B.length;B.push(U);e:for(;0<W;){var q=W-1>>>1,L=B[q];if(0<a(L,U))B[q]=U,B[W]=L,W=q;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var U=B[0],W=B.pop();if(W!==U){B[0]=W;e:for(var q=0,L=B.length,V=L>>>1;q<V;){var G=2*(q+1)-1,Z=B[G],te=G+1,he=B[te];if(0>a(Z,W))te<L&&0>a(he,Z)?(B[q]=he,B[te]=W,q=te):(B[q]=Z,B[G]=W,q=G);else if(te<L&&0>a(he,W))B[q]=he,B[te]=W,q=te;else break e}}return U}function a(B,U){var W=B.sortIndex-U.sortIndex;return W!==0?W:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,u=null,h=3,m=!1,v=!1,g=!1,p=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(B){for(var U=r(d);U!==null;){if(U.callback===null)s(d);else if(U.startTime<=B)s(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(d)}}function j(B){if(g=!1,y(B),!v)if(r(c)!==null)v=!0,M(E);else{var U=r(d);U!==null&&R(j,U.startTime-B)}}function E(B,U){v=!1,g&&(g=!1,x(N),N=-1),m=!0;var W=h;try{for(y(U),u=r(c);u!==null&&(!(u.expirationTime>U)||B&&!T());){var q=u.callback;if(typeof q=="function"){u.callback=null,h=u.priorityLevel;var L=q(u.expirationTime<=U);U=e.unstable_now(),typeof L=="function"?u.callback=L:u===r(c)&&s(c),y(U)}else s(c);u=r(c)}if(u!==null)var V=!0;else{var G=r(d);G!==null&&R(j,G.startTime-U),V=!1}return V}finally{u=null,h=W,m=!1}}var C=!1,S=null,N=-1,_=5,I=-1;function T(){return!(e.unstable_now()-I<_)}function A(){if(S!==null){var B=e.unstable_now();I=B;var U=!0;try{U=S(!0,B)}finally{U?O():(C=!1,S=null)}}else C=!1}var O;if(typeof b=="function")O=function(){b(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,$=D.port2;D.port1.onmessage=A,O=function(){$.postMessage(null)}}else O=function(){p(A,0)};function M(B){S=B,C||(C=!0,O())}function R(B,U){N=p(function(){B(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,M(E))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(B){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var W=h;h=U;try{return B()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var W=h;h=B;try{return U()}finally{h=W}},e.unstable_scheduleCallback=function(B,U,W){var q=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,B){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,B={id:f++,callback:U,priorityLevel:B,startTime:W,expirationTime:L,sortIndex:-1},W>q?(B.sortIndex=W,t(d,B),r(c)===null&&B===r(d)&&(g?(x(N),N=-1):g=!0,R(j,W-q))):(B.sortIndex=L,t(c,B),v||m||(v=!0,M(E))),B},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(B){var U=h;return function(){var W=h;h=U;try{return B.apply(this,arguments)}finally{h=W}}}})(OR);DR.exports=OR;var YW=DR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XW=w,Ga=YW;function at(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LR=new Set,Ov={};function zu(e,t){Ph(e,t),Ph(e+"Capture",t)}function Ph(e,t){for(Ov[e]=t,e=0;e<t.length;e++)LR.add(t[e])}var Bl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I5=Object.prototype.hasOwnProperty,QW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sT={},aT={};function JW(e){return I5.call(aT,e)?!0:I5.call(sT,e)?!1:QW.test(e)?aT[e]=!0:(sT[e]=!0,!1)}function ZW(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eH(e,t,r,s){if(t===null||typeof t>"u"||ZW(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function sa(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ps={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ps[e]=new sa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ps[t]=new sa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ps[e]=new sa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ps[e]=new sa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ps[e]=new sa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ps[e]=new sa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ps[e]=new sa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ps[e]=new sa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ps[e]=new sa(e,5,!1,e.toLowerCase(),null,!1,!1)});var d4=/[\-:]([a-z])/g;function u4(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d4,u4);Ps[t]=new sa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d4,u4);Ps[t]=new sa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d4,u4);Ps[t]=new sa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ps[e]=new sa(e,1,!1,e.toLowerCase(),null,!1,!1)});Ps.xlinkHref=new sa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ps[e]=new sa(e,1,!1,e.toLowerCase(),null,!0,!0)});function f4(e,t,r,s){var a=Ps.hasOwnProperty(t)?Ps[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eH(t,r,a,s)&&(r=null),s||a===null?JW(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Zl=XW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y0=Symbol.for("react.element"),Jf=Symbol.for("react.portal"),Zf=Symbol.for("react.fragment"),h4=Symbol.for("react.strict_mode"),k5=Symbol.for("react.profiler"),RR=Symbol.for("react.provider"),$R=Symbol.for("react.context"),m4=Symbol.for("react.forward_ref"),D5=Symbol.for("react.suspense"),O5=Symbol.for("react.suspense_list"),p4=Symbol.for("react.memo"),Ec=Symbol.for("react.lazy"),FR=Symbol.for("react.offscreen"),iT=Symbol.iterator;function Cp(e){return e===null||typeof e!="object"?null:(e=iT&&e[iT]||e["@@iterator"],typeof e=="function"?e:null)}var gn=Object.assign,_2;function ev(e){if(_2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_2=t&&t[1]||""}return`
`+_2+e}var I2=!1;function k2(e,t){if(!e||I2)return"";I2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{I2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ev(e):""}function tH(e){switch(e.tag){case 5:return ev(e.type);case 16:return ev("Lazy");case 13:return ev("Suspense");case 19:return ev("SuspenseList");case 0:case 2:case 15:return e=k2(e.type,!1),e;case 11:return e=k2(e.type.render,!1),e;case 1:return e=k2(e.type,!0),e;default:return""}}function L5(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zf:return"Fragment";case Jf:return"Portal";case k5:return"Profiler";case h4:return"StrictMode";case D5:return"Suspense";case O5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $R:return(e.displayName||"Context")+".Consumer";case RR:return(e._context.displayName||"Context")+".Provider";case m4:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case p4:return t=e.displayName||null,t!==null?t:L5(e.type)||"Memo";case Ec:t=e._payload,e=e._init;try{return L5(e(t))}catch{}}return null}function rH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L5(t);case 8:return t===h4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function id(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function MR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nH(e){var t=MR(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function b0(e){e._valueTracker||(e._valueTracker=nH(e))}function BR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=MR(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Wy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function R5(e,t){var r=t.checked;return gn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function oT(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=id(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zR(e,t){t=t.checked,t!=null&&f4(e,"checked",t,!1)}function $5(e,t){zR(e,t);var r=id(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?F5(e,t.type,r):t.hasOwnProperty("defaultValue")&&F5(e,t.type,id(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lT(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function F5(e,t,r){(t!=="number"||Wy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var tv=Array.isArray;function hh(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+id(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function M5(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(at(91));return gn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cT(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(at(92));if(tv(r)){if(1<r.length)throw Error(at(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:id(r)}}function UR(e,t){var r=id(t.value),s=id(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function dT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function VR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B5(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?VR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var j0,qR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(j0=j0||document.createElement("div"),j0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=j0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lv(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ov={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sH=["Webkit","ms","Moz","O"];Object.keys(ov).forEach(function(e){sH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ov[t]=ov[e]})});function WR(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ov.hasOwnProperty(e)&&ov[e]?(""+t).trim():t+"px"}function HR(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=WR(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var aH=gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z5(e,t){if(t){if(aH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(at(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(at(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(at(61))}if(t.style!=null&&typeof t.style!="object")throw Error(at(62))}}function U5(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V5=null;function v4(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var q5=null,mh=null,ph=null;function uT(e){if(e=Qg(e)){if(typeof q5!="function")throw Error(at(280));var t=e.stateNode;t&&(t=K1(t),q5(e.stateNode,e.type,t))}}function GR(e){mh?ph?ph.push(e):ph=[e]:mh=e}function KR(){if(mh){var e=mh,t=ph;if(ph=mh=null,uT(e),t)for(e=0;e<t.length;e++)uT(t[e])}}function YR(e,t){return e(t)}function XR(){}var D2=!1;function QR(e,t,r){if(D2)return e(t,r);D2=!0;try{return YR(e,t,r)}finally{D2=!1,(mh!==null||ph!==null)&&(XR(),KR())}}function Rv(e,t){var r=e.stateNode;if(r===null)return null;var s=K1(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(at(231,t,typeof r));return r}var W5=!1;if(Bl)try{var Ap={};Object.defineProperty(Ap,"passive",{get:function(){W5=!0}}),window.addEventListener("test",Ap,Ap),window.removeEventListener("test",Ap,Ap)}catch{W5=!1}function iH(e,t,r,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(f){this.onError(f)}}var lv=!1,Hy=null,Gy=!1,H5=null,oH={onError:function(e){lv=!0,Hy=e}};function lH(e,t,r,s,a,i,o,l,c){lv=!1,Hy=null,iH.apply(oH,arguments)}function cH(e,t,r,s,a,i,o,l,c){if(lH.apply(this,arguments),lv){if(lv){var d=Hy;lv=!1,Hy=null}else throw Error(at(198));Gy||(Gy=!0,H5=d)}}function Uu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function JR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fT(e){if(Uu(e)!==e)throw Error(at(188))}function dH(e){var t=e.alternate;if(!t){if(t=Uu(e),t===null)throw Error(at(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return fT(a),e;if(i===s)return fT(a),t;i=i.sibling}throw Error(at(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(at(189))}}if(r.alternate!==s)throw Error(at(190))}if(r.tag!==3)throw Error(at(188));return r.stateNode.current===r?e:t}function ZR(e){return e=dH(e),e!==null?e$(e):null}function e$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=e$(e);if(t!==null)return t;e=e.sibling}return null}var t$=Ga.unstable_scheduleCallback,hT=Ga.unstable_cancelCallback,uH=Ga.unstable_shouldYield,fH=Ga.unstable_requestPaint,_n=Ga.unstable_now,hH=Ga.unstable_getCurrentPriorityLevel,g4=Ga.unstable_ImmediatePriority,r$=Ga.unstable_UserBlockingPriority,Ky=Ga.unstable_NormalPriority,mH=Ga.unstable_LowPriority,n$=Ga.unstable_IdlePriority,q1=null,Vo=null;function pH(e){if(Vo&&typeof Vo.onCommitFiberRoot=="function")try{Vo.onCommitFiberRoot(q1,e,void 0,(e.current.flags&128)===128)}catch{}}var ao=Math.clz32?Math.clz32:xH,vH=Math.log,gH=Math.LN2;function xH(e){return e>>>=0,e===0?32:31-(vH(e)/gH|0)|0}var w0=64,N0=4194304;function rv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yy(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=rv(l):(i&=o,i!==0&&(s=rv(i)))}else o=r&~a,o!==0?s=rv(o):i!==0&&(s=rv(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ao(t),a=1<<r,s|=e[r],t&=~a;return s}function yH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bH(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ao(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=yH(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function G5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function s$(){var e=w0;return w0<<=1,!(w0&4194240)&&(w0=64),e}function O2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Yg(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ao(t),e[t]=r}function jH(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ao(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function x4(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ao(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Tr=0;function a$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var i$,y4,o$,l$,c$,K5=!1,S0=[],Wc=null,Hc=null,Gc=null,$v=new Map,Fv=new Map,Ic=[],wH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mT(e,t){switch(e){case"focusin":case"focusout":Wc=null;break;case"dragenter":case"dragleave":Hc=null;break;case"mouseover":case"mouseout":Gc=null;break;case"pointerover":case"pointerout":$v.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fv.delete(t.pointerId)}}function Ep(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Qg(t),t!==null&&y4(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function NH(e,t,r,s,a){switch(t){case"focusin":return Wc=Ep(Wc,e,t,r,s,a),!0;case"dragenter":return Hc=Ep(Hc,e,t,r,s,a),!0;case"mouseover":return Gc=Ep(Gc,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return $v.set(i,Ep($v.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Fv.set(i,Ep(Fv.get(i)||null,e,t,r,s,a)),!0}return!1}function d$(e){var t=nu(e.target);if(t!==null){var r=Uu(t);if(r!==null){if(t=r.tag,t===13){if(t=JR(r),t!==null){e.blockedOn=t,c$(e.priority,function(){o$(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Y5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);V5=s,r.target.dispatchEvent(s),V5=null}else return t=Qg(r),t!==null&&y4(t),e.blockedOn=r,!1;t.shift()}return!0}function pT(e,t,r){Cy(e)&&r.delete(t)}function SH(){K5=!1,Wc!==null&&Cy(Wc)&&(Wc=null),Hc!==null&&Cy(Hc)&&(Hc=null),Gc!==null&&Cy(Gc)&&(Gc=null),$v.forEach(pT),Fv.forEach(pT)}function Pp(e,t){e.blockedOn===t&&(e.blockedOn=null,K5||(K5=!0,Ga.unstable_scheduleCallback(Ga.unstable_NormalPriority,SH)))}function Mv(e){function t(a){return Pp(a,e)}if(0<S0.length){Pp(S0[0],e);for(var r=1;r<S0.length;r++){var s=S0[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Wc!==null&&Pp(Wc,e),Hc!==null&&Pp(Hc,e),Gc!==null&&Pp(Gc,e),$v.forEach(t),Fv.forEach(t),r=0;r<Ic.length;r++)s=Ic[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ic.length&&(r=Ic[0],r.blockedOn===null);)d$(r),r.blockedOn===null&&Ic.shift()}var vh=Zl.ReactCurrentBatchConfig,Xy=!0;function CH(e,t,r,s){var a=Tr,i=vh.transition;vh.transition=null;try{Tr=1,b4(e,t,r,s)}finally{Tr=a,vh.transition=i}}function AH(e,t,r,s){var a=Tr,i=vh.transition;vh.transition=null;try{Tr=4,b4(e,t,r,s)}finally{Tr=a,vh.transition=i}}function b4(e,t,r,s){if(Xy){var a=Y5(e,t,r,s);if(a===null)q2(e,t,s,Qy,r),mT(e,s);else if(NH(a,e,t,r,s))s.stopPropagation();else if(mT(e,s),t&4&&-1<wH.indexOf(e)){for(;a!==null;){var i=Qg(a);if(i!==null&&i$(i),i=Y5(e,t,r,s),i===null&&q2(e,t,s,Qy,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else q2(e,t,s,null,r)}}var Qy=null;function Y5(e,t,r,s){if(Qy=null,e=v4(s),e=nu(e),e!==null)if(t=Uu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=JR(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qy=e,null}function u$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hH()){case g4:return 1;case r$:return 4;case Ky:case mH:return 16;case n$:return 536870912;default:return 16}default:return 16}}var $c=null,j4=null,Ay=null;function f$(){if(Ay)return Ay;var e,t=j4,r=t.length,s,a="value"in $c?$c.value:$c.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return Ay=a.slice(e,1<s?1-s:void 0)}function Ey(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function C0(){return!0}function vT(){return!1}function Ya(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?C0:vT,this.isPropagationStopped=vT,this}return gn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=C0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=C0)},persist:function(){},isPersistent:C0}),t}var gm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w4=Ya(gm),Xg=gn({},gm,{view:0,detail:0}),EH=Ya(Xg),L2,R2,Tp,W1=gn({},Xg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N4,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tp&&(Tp&&e.type==="mousemove"?(L2=e.screenX-Tp.screenX,R2=e.screenY-Tp.screenY):R2=L2=0,Tp=e),L2)},movementY:function(e){return"movementY"in e?e.movementY:R2}}),gT=Ya(W1),PH=gn({},W1,{dataTransfer:0}),TH=Ya(PH),_H=gn({},Xg,{relatedTarget:0}),$2=Ya(_H),IH=gn({},gm,{animationName:0,elapsedTime:0,pseudoElement:0}),kH=Ya(IH),DH=gn({},gm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OH=Ya(DH),LH=gn({},gm,{data:0}),xT=Ya(LH),RH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=FH[e])?!!t[e]:!1}function N4(){return MH}var BH=gn({},Xg,{key:function(e){if(e.key){var t=RH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ey(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$H[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N4,charCode:function(e){return e.type==="keypress"?Ey(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ey(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zH=Ya(BH),UH=gn({},W1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yT=Ya(UH),VH=gn({},Xg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N4}),qH=Ya(VH),WH=gn({},gm,{propertyName:0,elapsedTime:0,pseudoElement:0}),HH=Ya(WH),GH=gn({},W1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KH=Ya(GH),YH=[9,13,27,32],S4=Bl&&"CompositionEvent"in window,cv=null;Bl&&"documentMode"in document&&(cv=document.documentMode);var XH=Bl&&"TextEvent"in window&&!cv,h$=Bl&&(!S4||cv&&8<cv&&11>=cv),bT=String.fromCharCode(32),jT=!1;function m$(e,t){switch(e){case"keyup":return YH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var eh=!1;function QH(e,t){switch(e){case"compositionend":return p$(t);case"keypress":return t.which!==32?null:(jT=!0,bT);case"textInput":return e=t.data,e===bT&&jT?null:e;default:return null}}function JH(e,t){if(eh)return e==="compositionend"||!S4&&m$(e,t)?(e=f$(),Ay=j4=$c=null,eh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return h$&&t.locale!=="ko"?null:t.data;default:return null}}var ZH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZH[e.type]:t==="textarea"}function v$(e,t,r,s){GR(s),t=Jy(t,"onChange"),0<t.length&&(r=new w4("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var dv=null,Bv=null;function eG(e){E$(e,0)}function H1(e){var t=nh(e);if(BR(t))return e}function tG(e,t){if(e==="change")return t}var g$=!1;if(Bl){var F2;if(Bl){var M2="oninput"in document;if(!M2){var NT=document.createElement("div");NT.setAttribute("oninput","return;"),M2=typeof NT.oninput=="function"}F2=M2}else F2=!1;g$=F2&&(!document.documentMode||9<document.documentMode)}function ST(){dv&&(dv.detachEvent("onpropertychange",x$),Bv=dv=null)}function x$(e){if(e.propertyName==="value"&&H1(Bv)){var t=[];v$(t,Bv,e,v4(e)),QR(eG,t)}}function rG(e,t,r){e==="focusin"?(ST(),dv=t,Bv=r,dv.attachEvent("onpropertychange",x$)):e==="focusout"&&ST()}function nG(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return H1(Bv)}function sG(e,t){if(e==="click")return H1(t)}function aG(e,t){if(e==="input"||e==="change")return H1(t)}function iG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lo=typeof Object.is=="function"?Object.is:iG;function zv(e,t){if(lo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!I5.call(t,a)||!lo(e[a],t[a]))return!1}return!0}function CT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function AT(e,t){var r=CT(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=CT(r)}}function y$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?y$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function b$(){for(var e=window,t=Wy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wy(e.document)}return t}function C4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oG(e){var t=b$(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&y$(r.ownerDocument.documentElement,r)){if(s!==null&&C4(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=AT(r,i);var o=AT(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lG=Bl&&"documentMode"in document&&11>=document.documentMode,th=null,X5=null,uv=null,Q5=!1;function ET(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Q5||th==null||th!==Wy(s)||(s=th,"selectionStart"in s&&C4(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),uv&&zv(uv,s)||(uv=s,s=Jy(X5,"onSelect"),0<s.length&&(t=new w4("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=th)))}function A0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var rh={animationend:A0("Animation","AnimationEnd"),animationiteration:A0("Animation","AnimationIteration"),animationstart:A0("Animation","AnimationStart"),transitionend:A0("Transition","TransitionEnd")},B2={},j$={};Bl&&(j$=document.createElement("div").style,"AnimationEvent"in window||(delete rh.animationend.animation,delete rh.animationiteration.animation,delete rh.animationstart.animation),"TransitionEvent"in window||delete rh.transitionend.transition);function G1(e){if(B2[e])return B2[e];if(!rh[e])return e;var t=rh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in j$)return B2[e]=t[r];return e}var w$=G1("animationend"),N$=G1("animationiteration"),S$=G1("animationstart"),C$=G1("transitionend"),A$=new Map,PT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gd(e,t){A$.set(e,t),zu(t,[e])}for(var z2=0;z2<PT.length;z2++){var U2=PT[z2],cG=U2.toLowerCase(),dG=U2[0].toUpperCase()+U2.slice(1);gd(cG,"on"+dG)}gd(w$,"onAnimationEnd");gd(N$,"onAnimationIteration");gd(S$,"onAnimationStart");gd("dblclick","onDoubleClick");gd("focusin","onFocus");gd("focusout","onBlur");gd(C$,"onTransitionEnd");Ph("onMouseEnter",["mouseout","mouseover"]);Ph("onMouseLeave",["mouseout","mouseover"]);Ph("onPointerEnter",["pointerout","pointerover"]);Ph("onPointerLeave",["pointerout","pointerover"]);zu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zu("onBeforeInput",["compositionend","keypress","textInput","paste"]);zu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uG=new Set("cancel close invalid load scroll toggle".split(" ").concat(nv));function TT(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,cH(s,t,void 0,e),e.currentTarget=null}function E$(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;TT(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;TT(a,l,d),i=c}}}if(Gy)throw e=H5,Gy=!1,H5=null,e}function Zr(e,t){var r=t[rS];r===void 0&&(r=t[rS]=new Set);var s=e+"__bubble";r.has(s)||(P$(t,e,2,!1),r.add(s))}function V2(e,t,r){var s=0;t&&(s|=4),P$(r,e,s,t)}var E0="_reactListening"+Math.random().toString(36).slice(2);function Uv(e){if(!e[E0]){e[E0]=!0,LR.forEach(function(r){r!=="selectionchange"&&(uG.has(r)||V2(r,!1,e),V2(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[E0]||(t[E0]=!0,V2("selectionchange",!1,t))}}function P$(e,t,r,s){switch(u$(t)){case 1:var a=CH;break;case 4:a=AH;break;default:a=b4}r=a.bind(null,t,r,e),a=void 0,!W5||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function q2(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=nu(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}QR(function(){var d=i,f=v4(r),u=[];e:{var h=A$.get(e);if(h!==void 0){var m=w4,v=e;switch(e){case"keypress":if(Ey(r)===0)break e;case"keydown":case"keyup":m=zH;break;case"focusin":v="focus",m=$2;break;case"focusout":v="blur",m=$2;break;case"beforeblur":case"afterblur":m=$2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=gT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=TH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=qH;break;case w$:case N$:case S$:m=kH;break;case C$:m=HH;break;case"scroll":m=EH;break;case"wheel":m=KH;break;case"copy":case"cut":case"paste":m=OH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=yT}var g=(t&4)!==0,p=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var b=d,y;b!==null;){y=b;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,x!==null&&(j=Rv(b,x),j!=null&&g.push(Vv(b,j,y)))),p)break;b=b.return}0<g.length&&(h=new m(h,v,null,r,f),u.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==V5&&(v=r.relatedTarget||r.fromElement)&&(nu(v)||v[zl]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=d,v=v?nu(v):null,v!==null&&(p=Uu(v),v!==p||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(g=gT,j="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=yT,j="onPointerLeave",x="onPointerEnter",b="pointer"),p=m==null?h:nh(m),y=v==null?h:nh(v),h=new g(j,b+"leave",m,r,f),h.target=p,h.relatedTarget=y,j=null,nu(f)===d&&(g=new g(x,b+"enter",v,r,f),g.target=y,g.relatedTarget=p,j=g),p=j,m&&v)t:{for(g=m,x=v,b=0,y=g;y;y=Df(y))b++;for(y=0,j=x;j;j=Df(j))y++;for(;0<b-y;)g=Df(g),b--;for(;0<y-b;)x=Df(x),y--;for(;b--;){if(g===x||x!==null&&g===x.alternate)break t;g=Df(g),x=Df(x)}g=null}else g=null;m!==null&&_T(u,h,m,g,!1),v!==null&&p!==null&&_T(u,p,v,g,!0)}}e:{if(h=d?nh(d):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var E=tG;else if(wT(h))if(g$)E=aG;else{E=nG;var C=rG}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=sG);if(E&&(E=E(e,d))){v$(u,E,r,f);break e}C&&C(e,h,d),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&F5(h,"number",h.value)}switch(C=d?nh(d):window,e){case"focusin":(wT(C)||C.contentEditable==="true")&&(th=C,X5=d,uv=null);break;case"focusout":uv=X5=th=null;break;case"mousedown":Q5=!0;break;case"contextmenu":case"mouseup":case"dragend":Q5=!1,ET(u,r,f);break;case"selectionchange":if(lG)break;case"keydown":case"keyup":ET(u,r,f)}var S;if(S4)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else eh?m$(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(h$&&r.locale!=="ko"&&(eh||N!=="onCompositionStart"?N==="onCompositionEnd"&&eh&&(S=f$()):($c=f,j4="value"in $c?$c.value:$c.textContent,eh=!0)),C=Jy(d,N),0<C.length&&(N=new xT(N,e,null,r,f),u.push({event:N,listeners:C}),S?N.data=S:(S=p$(r),S!==null&&(N.data=S)))),(S=XH?QH(e,r):JH(e,r))&&(d=Jy(d,"onBeforeInput"),0<d.length&&(f=new xT("onBeforeInput","beforeinput",null,r,f),u.push({event:f,listeners:d}),f.data=S))}E$(u,t)})}function Vv(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Jy(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Rv(e,r),i!=null&&s.unshift(Vv(e,i,a)),i=Rv(e,t),i!=null&&s.push(Vv(e,i,a))),e=e.return}return s}function Df(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _T(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=Rv(r,i),c!=null&&o.unshift(Vv(r,c,l))):a||(c=Rv(r,i),c!=null&&o.push(Vv(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var fG=/\r\n?/g,hG=/\u0000|\uFFFD/g;function IT(e){return(typeof e=="string"?e:""+e).replace(fG,`
`).replace(hG,"")}function P0(e,t,r){if(t=IT(t),IT(e)!==t&&r)throw Error(at(425))}function Zy(){}var J5=null,Z5=null;function eS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tS=typeof setTimeout=="function"?setTimeout:void 0,mG=typeof clearTimeout=="function"?clearTimeout:void 0,kT=typeof Promise=="function"?Promise:void 0,pG=typeof queueMicrotask=="function"?queueMicrotask:typeof kT<"u"?function(e){return kT.resolve(null).then(e).catch(vG)}:tS;function vG(e){setTimeout(function(){throw e})}function W2(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Mv(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Mv(t)}function Kc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DT(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var xm=Math.random().toString(36).slice(2),Ro="__reactFiber$"+xm,qv="__reactProps$"+xm,zl="__reactContainer$"+xm,rS="__reactEvents$"+xm,gG="__reactListeners$"+xm,xG="__reactHandles$"+xm;function nu(e){var t=e[Ro];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zl]||r[Ro]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=DT(e);e!==null;){if(r=e[Ro])return r;e=DT(e)}return t}e=r,r=e.parentNode}return null}function Qg(e){return e=e[Ro]||e[zl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(at(33))}function K1(e){return e[qv]||null}var nS=[],sh=-1;function xd(e){return{current:e}}function sn(e){0>sh||(e.current=nS[sh],nS[sh]=null,sh--)}function Kr(e,t){sh++,nS[sh]=e.current,e.current=t}var od={},Hs=xd(od),ba=xd(!1),Eu=od;function Th(e,t){var r=e.type.contextTypes;if(!r)return od;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ja(e){return e=e.childContextTypes,e!=null}function eb(){sn(ba),sn(Hs)}function OT(e,t,r){if(Hs.current!==od)throw Error(at(168));Kr(Hs,t),Kr(ba,r)}function T$(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(at(108,rH(e)||"Unknown",a));return gn({},r,s)}function tb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||od,Eu=Hs.current,Kr(Hs,e),Kr(ba,ba.current),!0}function LT(e,t,r){var s=e.stateNode;if(!s)throw Error(at(169));r?(e=T$(e,t,Eu),s.__reactInternalMemoizedMergedChildContext=e,sn(ba),sn(Hs),Kr(Hs,e)):sn(ba),Kr(ba,r)}var Cl=null,Y1=!1,H2=!1;function _$(e){Cl===null?Cl=[e]:Cl.push(e)}function yG(e){Y1=!0,_$(e)}function yd(){if(!H2&&Cl!==null){H2=!0;var e=0,t=Tr;try{var r=Cl;for(Tr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Cl=null,Y1=!1}catch(a){throw Cl!==null&&(Cl=Cl.slice(e+1)),t$(g4,yd),a}finally{Tr=t,H2=!1}}return null}var ah=[],ih=0,rb=null,nb=0,fi=[],hi=0,Pu=null,El=1,Pl="";function Hd(e,t){ah[ih++]=nb,ah[ih++]=rb,rb=e,nb=t}function I$(e,t,r){fi[hi++]=El,fi[hi++]=Pl,fi[hi++]=Pu,Pu=e;var s=El;e=Pl;var a=32-ao(s)-1;s&=~(1<<a),r+=1;var i=32-ao(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,El=1<<32-ao(t)+a|r<<a|s,Pl=i+e}else El=1<<i|r<<a|s,Pl=e}function A4(e){e.return!==null&&(Hd(e,1),I$(e,1,0))}function E4(e){for(;e===rb;)rb=ah[--ih],ah[ih]=null,nb=ah[--ih],ah[ih]=null;for(;e===Pu;)Pu=fi[--hi],fi[hi]=null,Pl=fi[--hi],fi[hi]=null,El=fi[--hi],fi[hi]=null}var Va=null,Ba=null,an=!1,Zi=null;function k$(e,t){var r=mi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function RT(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Va=e,Ba=Kc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Va=e,Ba=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pu!==null?{id:El,overflow:Pl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=mi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Va=e,Ba=null,!0):!1;default:return!1}}function sS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function aS(e){if(an){var t=Ba;if(t){var r=t;if(!RT(e,t)){if(sS(e))throw Error(at(418));t=Kc(r.nextSibling);var s=Va;t&&RT(e,t)?k$(s,r):(e.flags=e.flags&-4097|2,an=!1,Va=e)}}else{if(sS(e))throw Error(at(418));e.flags=e.flags&-4097|2,an=!1,Va=e}}}function $T(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Va=e}function T0(e){if(e!==Va)return!1;if(!an)return $T(e),an=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eS(e.type,e.memoizedProps)),t&&(t=Ba)){if(sS(e))throw D$(),Error(at(418));for(;t;)k$(e,t),t=Kc(t.nextSibling)}if($T(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(at(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ba=Kc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ba=null}}else Ba=Va?Kc(e.stateNode.nextSibling):null;return!0}function D$(){for(var e=Ba;e;)e=Kc(e.nextSibling)}function _h(){Ba=Va=null,an=!1}function P4(e){Zi===null?Zi=[e]:Zi.push(e)}var bG=Zl.ReactCurrentBatchConfig;function _p(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(at(309));var s=r.stateNode}if(!s)throw Error(at(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(at(284));if(!r._owner)throw Error(at(290,e))}return e}function _0(e,t){throw e=Object.prototype.toString.call(t),Error(at(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function FT(e){var t=e._init;return t(e._payload)}function O$(e){function t(x,b){if(e){var y=x.deletions;y===null?(x.deletions=[b],x.flags|=16):y.push(b)}}function r(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function s(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function a(x,b){return x=Jc(x,b),x.index=0,x.sibling=null,x}function i(x,b,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<b?(x.flags|=2,b):y):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,b,y,j){return b===null||b.tag!==6?(b=Z2(y,x.mode,j),b.return=x,b):(b=a(b,y),b.return=x,b)}function c(x,b,y,j){var E=y.type;return E===Zf?f(x,b,y.props.children,j,y.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ec&&FT(E)===b.type)?(j=a(b,y.props),j.ref=_p(x,b,y),j.return=x,j):(j=Oy(y.type,y.key,y.props,null,x.mode,j),j.ref=_p(x,b,y),j.return=x,j)}function d(x,b,y,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=eN(y,x.mode,j),b.return=x,b):(b=a(b,y.children||[]),b.return=x,b)}function f(x,b,y,j,E){return b===null||b.tag!==7?(b=xu(y,x.mode,j,E),b.return=x,b):(b=a(b,y),b.return=x,b)}function u(x,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Z2(""+b,x.mode,y),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case y0:return y=Oy(b.type,b.key,b.props,null,x.mode,y),y.ref=_p(x,null,b),y.return=x,y;case Jf:return b=eN(b,x.mode,y),b.return=x,b;case Ec:var j=b._init;return u(x,j(b._payload),y)}if(tv(b)||Cp(b))return b=xu(b,x.mode,y,null),b.return=x,b;_0(x,b)}return null}function h(x,b,y,j){var E=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(x,b,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case y0:return y.key===E?c(x,b,y,j):null;case Jf:return y.key===E?d(x,b,y,j):null;case Ec:return E=y._init,h(x,b,E(y._payload),j)}if(tv(y)||Cp(y))return E!==null?null:f(x,b,y,j,null);_0(x,y)}return null}function m(x,b,y,j,E){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(y)||null,l(b,x,""+j,E);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case y0:return x=x.get(j.key===null?y:j.key)||null,c(b,x,j,E);case Jf:return x=x.get(j.key===null?y:j.key)||null,d(b,x,j,E);case Ec:var C=j._init;return m(x,b,y,C(j._payload),E)}if(tv(j)||Cp(j))return x=x.get(y)||null,f(b,x,j,E,null);_0(b,j)}return null}function v(x,b,y,j){for(var E=null,C=null,S=b,N=b=0,_=null;S!==null&&N<y.length;N++){S.index>N?(_=S,S=null):_=S.sibling;var I=h(x,S,y[N],j);if(I===null){S===null&&(S=_);break}e&&S&&I.alternate===null&&t(x,S),b=i(I,b,N),C===null?E=I:C.sibling=I,C=I,S=_}if(N===y.length)return r(x,S),an&&Hd(x,N),E;if(S===null){for(;N<y.length;N++)S=u(x,y[N],j),S!==null&&(b=i(S,b,N),C===null?E=S:C.sibling=S,C=S);return an&&Hd(x,N),E}for(S=s(x,S);N<y.length;N++)_=m(S,x,N,y[N],j),_!==null&&(e&&_.alternate!==null&&S.delete(_.key===null?N:_.key),b=i(_,b,N),C===null?E=_:C.sibling=_,C=_);return e&&S.forEach(function(T){return t(x,T)}),an&&Hd(x,N),E}function g(x,b,y,j){var E=Cp(y);if(typeof E!="function")throw Error(at(150));if(y=E.call(y),y==null)throw Error(at(151));for(var C=E=null,S=b,N=b=0,_=null,I=y.next();S!==null&&!I.done;N++,I=y.next()){S.index>N?(_=S,S=null):_=S.sibling;var T=h(x,S,I.value,j);if(T===null){S===null&&(S=_);break}e&&S&&T.alternate===null&&t(x,S),b=i(T,b,N),C===null?E=T:C.sibling=T,C=T,S=_}if(I.done)return r(x,S),an&&Hd(x,N),E;if(S===null){for(;!I.done;N++,I=y.next())I=u(x,I.value,j),I!==null&&(b=i(I,b,N),C===null?E=I:C.sibling=I,C=I);return an&&Hd(x,N),E}for(S=s(x,S);!I.done;N++,I=y.next())I=m(S,x,N,I.value,j),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?N:I.key),b=i(I,b,N),C===null?E=I:C.sibling=I,C=I);return e&&S.forEach(function(A){return t(x,A)}),an&&Hd(x,N),E}function p(x,b,y,j){if(typeof y=="object"&&y!==null&&y.type===Zf&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case y0:e:{for(var E=y.key,C=b;C!==null;){if(C.key===E){if(E=y.type,E===Zf){if(C.tag===7){r(x,C.sibling),b=a(C,y.props.children),b.return=x,x=b;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ec&&FT(E)===C.type){r(x,C.sibling),b=a(C,y.props),b.ref=_p(x,C,y),b.return=x,x=b;break e}r(x,C);break}else t(x,C);C=C.sibling}y.type===Zf?(b=xu(y.props.children,x.mode,j,y.key),b.return=x,x=b):(j=Oy(y.type,y.key,y.props,null,x.mode,j),j.ref=_p(x,b,y),j.return=x,x=j)}return o(x);case Jf:e:{for(C=y.key;b!==null;){if(b.key===C)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){r(x,b.sibling),b=a(b,y.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else t(x,b);b=b.sibling}b=eN(y,x.mode,j),b.return=x,x=b}return o(x);case Ec:return C=y._init,p(x,b,C(y._payload),j)}if(tv(y))return v(x,b,y,j);if(Cp(y))return g(x,b,y,j);_0(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(r(x,b.sibling),b=a(b,y),b.return=x,x=b):(r(x,b),b=Z2(y,x.mode,j),b.return=x,x=b),o(x)):r(x,b)}return p}var Ih=O$(!0),L$=O$(!1),sb=xd(null),ab=null,oh=null,T4=null;function _4(){T4=oh=ab=null}function I4(e){var t=sb.current;sn(sb),e._currentValue=t}function iS(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function gh(e,t){ab=e,T4=oh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xa=!0),e.firstContext=null)}function wi(e){var t=e._currentValue;if(T4!==e)if(e={context:e,memoizedValue:t,next:null},oh===null){if(ab===null)throw Error(at(308));oh=e,ab.dependencies={lanes:0,firstContext:e}}else oh=oh.next=e;return t}var su=null;function k4(e){su===null?su=[e]:su.push(e)}function R$(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,k4(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ul(e,s)}function Ul(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Pc=!1;function D4(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yc(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,gr&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Ul(e,r)}return a=s.interleaved,a===null?(t.next=t,k4(s)):(t.next=a.next,a.next=t),s.interleaved=t,Ul(e,r)}function Py(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,x4(e,r)}}function MT(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ib(e,t,r,s){var a=e.updateQueue;Pc=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var u=a.baseState;o=0,f=d=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((s&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,g=l;switch(h=t,m=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){u=v.call(m,u,h);break e}u=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,h=typeof v=="function"?v.call(m,u,h):v,h==null)break e;u=gn({},u,h);break e;case 2:Pc=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,c=u):f=f.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(f===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);_u|=o,e.lanes=o,e.memoizedState=u}}function BT(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(at(191,a));a.call(s)}}}var Jg={},qo=xd(Jg),Wv=xd(Jg),Hv=xd(Jg);function au(e){if(e===Jg)throw Error(at(174));return e}function O4(e,t){switch(Kr(Hv,t),Kr(Wv,e),Kr(qo,Jg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:B5(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=B5(t,e)}sn(qo),Kr(qo,t)}function kh(){sn(qo),sn(Wv),sn(Hv)}function F$(e){au(Hv.current);var t=au(qo.current),r=B5(t,e.type);t!==r&&(Kr(Wv,e),Kr(qo,r))}function L4(e){Wv.current===e&&(sn(qo),sn(Wv))}var mn=xd(0);function ob(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var G2=[];function R4(){for(var e=0;e<G2.length;e++)G2[e]._workInProgressVersionPrimary=null;G2.length=0}var Ty=Zl.ReactCurrentDispatcher,K2=Zl.ReactCurrentBatchConfig,Tu=0,vn=null,Qn=null,ls=null,lb=!1,fv=!1,Gv=0,jG=0;function ks(){throw Error(at(321))}function $4(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lo(e[r],t[r]))return!1;return!0}function F4(e,t,r,s,a,i){if(Tu=i,vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ty.current=e===null||e.memoizedState===null?CG:AG,e=r(s,a),fv){i=0;do{if(fv=!1,Gv=0,25<=i)throw Error(at(301));i+=1,ls=Qn=null,t.updateQueue=null,Ty.current=EG,e=r(s,a)}while(fv)}if(Ty.current=cb,t=Qn!==null&&Qn.next!==null,Tu=0,ls=Qn=vn=null,lb=!1,t)throw Error(at(300));return e}function M4(){var e=Gv!==0;return Gv=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?vn.memoizedState=ls=e:ls=ls.next=e,ls}function Ni(){if(Qn===null){var e=vn.alternate;e=e!==null?e.memoizedState:null}else e=Qn.next;var t=ls===null?vn.memoizedState:ls.next;if(t!==null)ls=t,Qn=e;else{if(e===null)throw Error(at(310));Qn=e,e={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},ls===null?vn.memoizedState=ls=e:ls=ls.next=e}return ls}function Kv(e,t){return typeof t=="function"?t(e):t}function Y2(e){var t=Ni(),r=t.queue;if(r===null)throw Error(at(311));r.lastRenderedReducer=e;var s=Qn,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((Tu&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var u={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,o=s):c=c.next=u,vn.lanes|=f,_u|=f}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,lo(s,t.memoizedState)||(xa=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,vn.lanes|=i,_u|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function X2(e){var t=Ni(),r=t.queue;if(r===null)throw Error(at(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);lo(i,t.memoizedState)||(xa=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function M$(){}function B$(e,t){var r=vn,s=Ni(),a=t(),i=!lo(s.memoizedState,a);if(i&&(s.memoizedState=a,xa=!0),s=s.queue,B4(V$.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||ls!==null&&ls.memoizedState.tag&1){if(r.flags|=2048,Yv(9,U$.bind(null,r,s,a,t),void 0,null),ds===null)throw Error(at(349));Tu&30||z$(r,t,a)}return a}function z$(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=vn.updateQueue,t===null?(t={lastEffect:null,stores:null},vn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function U$(e,t,r,s){t.value=r,t.getSnapshot=s,q$(t)&&W$(e)}function V$(e,t,r){return r(function(){q$(t)&&W$(e)})}function q$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lo(e,r)}catch{return!0}}function W$(e){var t=Ul(e,1);t!==null&&io(t,e,1,-1)}function zT(e){var t=Io();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kv,lastRenderedState:e},t.queue=e,e=e.dispatch=SG.bind(null,vn,e),[t.memoizedState,e]}function Yv(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=vn.updateQueue,t===null?(t={lastEffect:null,stores:null},vn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function H$(){return Ni().memoizedState}function _y(e,t,r,s){var a=Io();vn.flags|=e,a.memoizedState=Yv(1|t,r,void 0,s===void 0?null:s)}function X1(e,t,r,s){var a=Ni();s=s===void 0?null:s;var i=void 0;if(Qn!==null){var o=Qn.memoizedState;if(i=o.destroy,s!==null&&$4(s,o.deps)){a.memoizedState=Yv(t,r,i,s);return}}vn.flags|=e,a.memoizedState=Yv(1|t,r,i,s)}function UT(e,t){return _y(8390656,8,e,t)}function B4(e,t){return X1(2048,8,e,t)}function G$(e,t){return X1(4,2,e,t)}function K$(e,t){return X1(4,4,e,t)}function Y$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function X$(e,t,r){return r=r!=null?r.concat([e]):null,X1(4,4,Y$.bind(null,t,e),r)}function z4(){}function Q$(e,t){var r=Ni();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&$4(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function J$(e,t){var r=Ni();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&$4(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Z$(e,t,r){return Tu&21?(lo(r,t)||(r=s$(),vn.lanes|=r,_u|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=r)}function wG(e,t){var r=Tr;Tr=r!==0&&4>r?r:4,e(!0);var s=K2.transition;K2.transition={};try{e(!1),t()}finally{Tr=r,K2.transition=s}}function eF(){return Ni().memoizedState}function NG(e,t,r){var s=Qc(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},tF(e))rF(t,r);else if(r=R$(e,t,r,s),r!==null){var a=ta();io(r,e,s,a),nF(r,t,s)}}function SG(e,t,r){var s=Qc(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(tF(e))rF(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,lo(l,o)){var c=t.interleaved;c===null?(a.next=a,k4(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=R$(e,t,a,s),r!==null&&(a=ta(),io(r,e,s,a),nF(r,t,s))}}function tF(e){var t=e.alternate;return e===vn||t!==null&&t===vn}function rF(e,t){fv=lb=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function nF(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,x4(e,r)}}var cb={readContext:wi,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},CG={readContext:wi,useCallback:function(e,t){return Io().memoizedState=[e,t===void 0?null:t],e},useContext:wi,useEffect:UT,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,_y(4194308,4,Y$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _y(4194308,4,e,t)},useInsertionEffect:function(e,t){return _y(4,2,e,t)},useMemo:function(e,t){var r=Io();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Io();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=NG.bind(null,vn,e),[s.memoizedState,e]},useRef:function(e){var t=Io();return e={current:e},t.memoizedState=e},useState:zT,useDebugValue:z4,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=zT(!1),t=e[0];return e=wG.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=vn,a=Io();if(an){if(r===void 0)throw Error(at(407));r=r()}else{if(r=t(),ds===null)throw Error(at(349));Tu&30||z$(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,UT(V$.bind(null,s,i,e),[e]),s.flags|=2048,Yv(9,U$.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=Io(),t=ds.identifierPrefix;if(an){var r=Pl,s=El;r=(s&~(1<<32-ao(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Gv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=jG++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},AG={readContext:wi,useCallback:Q$,useContext:wi,useEffect:B4,useImperativeHandle:X$,useInsertionEffect:G$,useLayoutEffect:K$,useMemo:J$,useReducer:Y2,useRef:H$,useState:function(){return Y2(Kv)},useDebugValue:z4,useDeferredValue:function(e){var t=Ni();return Z$(t,Qn.memoizedState,e)},useTransition:function(){var e=Y2(Kv)[0],t=Ni().memoizedState;return[e,t]},useMutableSource:M$,useSyncExternalStore:B$,useId:eF,unstable_isNewReconciler:!1},EG={readContext:wi,useCallback:Q$,useContext:wi,useEffect:B4,useImperativeHandle:X$,useInsertionEffect:G$,useLayoutEffect:K$,useMemo:J$,useReducer:X2,useRef:H$,useState:function(){return X2(Kv)},useDebugValue:z4,useDeferredValue:function(e){var t=Ni();return Qn===null?t.memoizedState=e:Z$(t,Qn.memoizedState,e)},useTransition:function(){var e=X2(Kv)[0],t=Ni().memoizedState;return[e,t]},useMutableSource:M$,useSyncExternalStore:B$,useId:eF,unstable_isNewReconciler:!1};function Hi(e,t){if(e&&e.defaultProps){t=gn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function oS(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:gn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Q1={isMounted:function(e){return(e=e._reactInternals)?Uu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ta(),a=Qc(e),i=Dl(s,a);i.payload=t,r!=null&&(i.callback=r),t=Yc(e,i,a),t!==null&&(io(t,e,a,s),Py(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ta(),a=Qc(e),i=Dl(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Yc(e,i,a),t!==null&&(io(t,e,a,s),Py(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ta(),s=Qc(e),a=Dl(r,s);a.tag=2,t!=null&&(a.callback=t),t=Yc(e,a,s),t!==null&&(io(t,e,s,r),Py(t,e,s))}};function VT(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!zv(r,s)||!zv(a,i):!0}function sF(e,t,r){var s=!1,a=od,i=t.contextType;return typeof i=="object"&&i!==null?i=wi(i):(a=ja(t)?Eu:Hs.current,s=t.contextTypes,i=(s=s!=null)?Th(e,a):od),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Q1,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function qT(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Q1.enqueueReplaceState(t,t.state,null)}function lS(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},D4(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=wi(i):(i=ja(t)?Eu:Hs.current,a.context=Th(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(oS(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Q1.enqueueReplaceState(a,a.state,null),ib(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Dh(e,t){try{var r="",s=t;do r+=tH(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Q2(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function cS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var PG=typeof WeakMap=="function"?WeakMap:Map;function aF(e,t,r){r=Dl(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ub||(ub=!0,yS=s),cS(e,t)},r}function iF(e,t,r){r=Dl(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){cS(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){cS(e,t),typeof s!="function"&&(Xc===null?Xc=new Set([this]):Xc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function WT(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new PG;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=UG.bind(null,e,t,r),t.then(e,e))}function HT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function GT(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Dl(-1,1),t.tag=2,Yc(r,t,1))),r.lanes|=1),e)}var TG=Zl.ReactCurrentOwner,xa=!1;function Qs(e,t,r,s){t.child=e===null?L$(t,null,r,s):Ih(t,e.child,r,s)}function KT(e,t,r,s,a){r=r.render;var i=t.ref;return gh(t,a),s=F4(e,t,r,s,i,a),r=M4(),e!==null&&!xa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vl(e,t,a)):(an&&r&&A4(t),t.flags|=1,Qs(e,t,s,a),t.child)}function YT(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!Y4(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,oF(e,t,i,s,a)):(e=Oy(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:zv,r(o,s)&&e.ref===t.ref)return Vl(e,t,a)}return t.flags|=1,e=Jc(i,s),e.ref=t.ref,e.return=t,t.child=e}function oF(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(zv(i,s)&&e.ref===t.ref)if(xa=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(xa=!0);else return t.lanes=e.lanes,Vl(e,t,a)}return dS(e,t,r,s,a)}function lF(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kr(ch,La),La|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Kr(ch,La),La|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Kr(ch,La),La|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,Kr(ch,La),La|=s;return Qs(e,t,a,r),t.child}function cF(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dS(e,t,r,s,a){var i=ja(r)?Eu:Hs.current;return i=Th(t,i),gh(t,a),r=F4(e,t,r,s,i,a),s=M4(),e!==null&&!xa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vl(e,t,a)):(an&&s&&A4(t),t.flags|=1,Qs(e,t,r,a),t.child)}function XT(e,t,r,s,a){if(ja(r)){var i=!0;tb(t)}else i=!1;if(gh(t,a),t.stateNode===null)Iy(e,t),sF(t,r,s),lS(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=wi(d):(d=ja(r)?Eu:Hs.current,d=Th(t,d));var f=r.getDerivedStateFromProps,u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&qT(t,o,s,d),Pc=!1;var h=t.memoizedState;o.state=h,ib(t,s,o,a),c=t.memoizedState,l!==s||h!==c||ba.current||Pc?(typeof f=="function"&&(oS(t,r,f,s),c=t.memoizedState),(l=Pc||VT(t,r,l,s,h,c,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,$$(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Hi(t.type,l),o.props=d,u=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=wi(c):(c=ja(r)?Eu:Hs.current,c=Th(t,c));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||h!==c)&&qT(t,o,s,c),Pc=!1,h=t.memoizedState,o.state=h,ib(t,s,o,a);var v=t.memoizedState;l!==u||h!==v||ba.current||Pc?(typeof m=="function"&&(oS(t,r,m,s),v=t.memoizedState),(d=Pc||VT(t,r,d,s,h,v,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),o.props=s,o.state=v,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return uS(e,t,r,s,i,a)}function uS(e,t,r,s,a,i){cF(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&LT(t,r,!1),Vl(e,t,i);s=t.stateNode,TG.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Ih(t,e.child,null,i),t.child=Ih(t,null,l,i)):Qs(e,t,l,i),t.memoizedState=s.state,a&&LT(t,r,!0),t.child}function dF(e){var t=e.stateNode;t.pendingContext?OT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&OT(e,t.context,!1),O4(e,t.containerInfo)}function QT(e,t,r,s,a){return _h(),P4(a),t.flags|=256,Qs(e,t,r,s),t.child}var fS={dehydrated:null,treeContext:null,retryLane:0};function hS(e){return{baseLanes:e,cachePool:null,transitions:null}}function uF(e,t,r){var s=t.pendingProps,a=mn.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Kr(mn,a&1),e===null)return aS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ej(o,s,0,null),e=xu(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=hS(r),t.memoizedState=fS,e):U4(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return _G(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Jc(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Jc(l,i):(i=xu(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?hS(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=fS,s}return i=e.child,e=i.sibling,s=Jc(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function U4(e,t){return t=ej({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function I0(e,t,r,s){return s!==null&&P4(s),Ih(t,e.child,null,r),e=U4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _G(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=Q2(Error(at(422))),I0(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=ej({mode:"visible",children:s.children},a,0,null),i=xu(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Ih(t,e.child,null,o),t.child.memoizedState=hS(o),t.memoizedState=fS,i);if(!(t.mode&1))return I0(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(at(419)),s=Q2(i,s,void 0),I0(e,t,o,s)}if(l=(o&e.childLanes)!==0,xa||l){if(s=ds,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ul(e,a),io(s,e,a,-1))}return K4(),s=Q2(Error(at(421))),I0(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=VG.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ba=Kc(a.nextSibling),Va=t,an=!0,Zi=null,e!==null&&(fi[hi++]=El,fi[hi++]=Pl,fi[hi++]=Pu,El=e.id,Pl=e.overflow,Pu=t),t=U4(t,s.children),t.flags|=4096,t)}function JT(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),iS(e.return,t,r)}function J2(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function fF(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(Qs(e,t,s.children,r),s=mn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&JT(e,r,t);else if(e.tag===19)JT(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Kr(mn,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&ob(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),J2(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ob(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}J2(t,!0,r,null,i);break;case"together":J2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Iy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),_u|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(at(153));if(t.child!==null){for(e=t.child,r=Jc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Jc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function IG(e,t,r){switch(t.tag){case 3:dF(t),_h();break;case 5:F$(t);break;case 1:ja(t.type)&&tb(t);break;case 4:O4(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Kr(sb,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Kr(mn,mn.current&1),t.flags|=128,null):r&t.child.childLanes?uF(e,t,r):(Kr(mn,mn.current&1),e=Vl(e,t,r),e!==null?e.sibling:null);Kr(mn,mn.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return fF(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Kr(mn,mn.current),s)break;return null;case 22:case 23:return t.lanes=0,lF(e,t,r)}return Vl(e,t,r)}var hF,mS,mF,pF;hF=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mS=function(){};mF=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,au(qo.current);var i=null;switch(r){case"input":a=R5(e,a),s=R5(e,s),i=[];break;case"select":a=gn({},a,{value:void 0}),s=gn({},s,{value:void 0}),i=[];break;case"textarea":a=M5(e,a),s=M5(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Zy)}z5(r,s);var o;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ov.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ov.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Zr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};pF=function(e,t,r,s){r!==s&&(t.flags|=4)};function Ip(e,t){if(!an)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ds(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function kG(e,t,r){var s=t.pendingProps;switch(E4(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ds(t),null;case 1:return ja(t.type)&&eb(),Ds(t),null;case 3:return s=t.stateNode,kh(),sn(ba),sn(Hs),R4(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(T0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zi!==null&&(wS(Zi),Zi=null))),mS(e,t),Ds(t),null;case 5:L4(t);var a=au(Hv.current);if(r=t.type,e!==null&&t.stateNode!=null)mF(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(at(166));return Ds(t),null}if(e=au(qo.current),T0(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[Ro]=t,s[qv]=i,e=(t.mode&1)!==0,r){case"dialog":Zr("cancel",s),Zr("close",s);break;case"iframe":case"object":case"embed":Zr("load",s);break;case"video":case"audio":for(a=0;a<nv.length;a++)Zr(nv[a],s);break;case"source":Zr("error",s);break;case"img":case"image":case"link":Zr("error",s),Zr("load",s);break;case"details":Zr("toggle",s);break;case"input":oT(s,i),Zr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Zr("invalid",s);break;case"textarea":cT(s,i),Zr("invalid",s)}z5(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&P0(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&P0(s.textContent,l,e),a=["children",""+l]):Ov.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Zr("scroll",s)}switch(r){case"input":b0(s),lT(s,i,!0);break;case"textarea":b0(s),dT(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Zy)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=VR(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[Ro]=t,e[qv]=s,hF(e,t,!1,!1),t.stateNode=e;e:{switch(o=U5(r,s),r){case"dialog":Zr("cancel",e),Zr("close",e),a=s;break;case"iframe":case"object":case"embed":Zr("load",e),a=s;break;case"video":case"audio":for(a=0;a<nv.length;a++)Zr(nv[a],e);a=s;break;case"source":Zr("error",e),a=s;break;case"img":case"image":case"link":Zr("error",e),Zr("load",e),a=s;break;case"details":Zr("toggle",e),a=s;break;case"input":oT(e,s),a=R5(e,s),Zr("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=gn({},s,{value:void 0}),Zr("invalid",e);break;case"textarea":cT(e,s),a=M5(e,s),Zr("invalid",e);break;default:a=s}z5(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?HR(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qR(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Lv(e,c):typeof c=="number"&&Lv(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ov.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Zr("scroll",e):c!=null&&f4(e,i,c,o))}switch(r){case"input":b0(e),lT(e,s,!1);break;case"textarea":b0(e),dT(e);break;case"option":s.value!=null&&e.setAttribute("value",""+id(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?hh(e,!!s.multiple,i,!1):s.defaultValue!=null&&hh(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Zy)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ds(t),null;case 6:if(e&&t.stateNode!=null)pF(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(at(166));if(r=au(Hv.current),au(qo.current),T0(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ro]=t,(i=s.nodeValue!==r)&&(e=Va,e!==null))switch(e.tag){case 3:P0(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&P0(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ro]=t,t.stateNode=s}return Ds(t),null;case 13:if(sn(mn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(an&&Ba!==null&&t.mode&1&&!(t.flags&128))D$(),_h(),t.flags|=98560,i=!1;else if(i=T0(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(at(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(at(317));i[Ro]=t}else _h(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ds(t),i=!1}else Zi!==null&&(wS(Zi),Zi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||mn.current&1?Zn===0&&(Zn=3):K4())),t.updateQueue!==null&&(t.flags|=4),Ds(t),null);case 4:return kh(),mS(e,t),e===null&&Uv(t.stateNode.containerInfo),Ds(t),null;case 10:return I4(t.type._context),Ds(t),null;case 17:return ja(t.type)&&eb(),Ds(t),null;case 19:if(sn(mn),i=t.memoizedState,i===null)return Ds(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Ip(i,!1);else{if(Zn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ob(e),o!==null){for(t.flags|=128,Ip(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Kr(mn,mn.current&1|2),t.child}e=e.sibling}i.tail!==null&&_n()>Oh&&(t.flags|=128,s=!0,Ip(i,!1),t.lanes=4194304)}else{if(!s)if(e=ob(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ip(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!an)return Ds(t),null}else 2*_n()-i.renderingStartTime>Oh&&r!==1073741824&&(t.flags|=128,s=!0,Ip(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=_n(),t.sibling=null,r=mn.current,Kr(mn,s?r&1|2:r&1),t):(Ds(t),null);case 22:case 23:return G4(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?La&1073741824&&(Ds(t),t.subtreeFlags&6&&(t.flags|=8192)):Ds(t),null;case 24:return null;case 25:return null}throw Error(at(156,t.tag))}function DG(e,t){switch(E4(t),t.tag){case 1:return ja(t.type)&&eb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kh(),sn(ba),sn(Hs),R4(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return L4(t),null;case 13:if(sn(mn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(at(340));_h()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return sn(mn),null;case 4:return kh(),null;case 10:return I4(t.type._context),null;case 22:case 23:return G4(),null;case 24:return null;default:return null}}var k0=!1,Bs=!1,OG=typeof WeakSet=="function"?WeakSet:Set,bt=null;function lh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Nn(e,t,s)}else r.current=null}function pS(e,t,r){try{r()}catch(s){Nn(e,t,s)}}var ZT=!1;function LG(e,t){if(J5=Xy,e=b$(),C4(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,f=0,u=e,h=null;t:for(;;){for(var m;u!==r||a!==0&&u.nodeType!==3||(l=o+a),u!==i||s!==0&&u.nodeType!==3||(c=o+s),u.nodeType===3&&(o+=u.nodeValue.length),(m=u.firstChild)!==null;)h=u,u=m;for(;;){if(u===e)break t;if(h===r&&++d===a&&(l=o),h===i&&++f===s&&(c=o),(m=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Z5={focusedElem:e,selectionRange:r},Xy=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){t=bt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,p=v.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Hi(t.type,g),p);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(at(163))}}catch(j){Nn(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}return v=ZT,ZT=!1,v}function hv(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&pS(t,r,i)}a=a.next}while(a!==s)}}function J1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function vS(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function vF(e){var t=e.alternate;t!==null&&(e.alternate=null,vF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ro],delete t[qv],delete t[rS],delete t[gG],delete t[xG])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gF(e){return e.tag===5||e.tag===3||e.tag===4}function e_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gS(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zy));else if(s!==4&&(e=e.child,e!==null))for(gS(e,t,r),e=e.sibling;e!==null;)gS(e,t,r),e=e.sibling}function xS(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(xS(e,t,r),e=e.sibling;e!==null;)xS(e,t,r),e=e.sibling}var ws=null,Yi=!1;function xc(e,t,r){for(r=r.child;r!==null;)xF(e,t,r),r=r.sibling}function xF(e,t,r){if(Vo&&typeof Vo.onCommitFiberUnmount=="function")try{Vo.onCommitFiberUnmount(q1,r)}catch{}switch(r.tag){case 5:Bs||lh(r,t);case 6:var s=ws,a=Yi;ws=null,xc(e,t,r),ws=s,Yi=a,ws!==null&&(Yi?(e=ws,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ws.removeChild(r.stateNode));break;case 18:ws!==null&&(Yi?(e=ws,r=r.stateNode,e.nodeType===8?W2(e.parentNode,r):e.nodeType===1&&W2(e,r),Mv(e)):W2(ws,r.stateNode));break;case 4:s=ws,a=Yi,ws=r.stateNode.containerInfo,Yi=!0,xc(e,t,r),ws=s,Yi=a;break;case 0:case 11:case 14:case 15:if(!Bs&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pS(r,t,o),a=a.next}while(a!==s)}xc(e,t,r);break;case 1:if(!Bs&&(lh(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Nn(r,t,l)}xc(e,t,r);break;case 21:xc(e,t,r);break;case 22:r.mode&1?(Bs=(s=Bs)||r.memoizedState!==null,xc(e,t,r),Bs=s):xc(e,t,r);break;default:xc(e,t,r)}}function t_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new OG),t.forEach(function(s){var a=qG.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Bi(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ws=l.stateNode,Yi=!1;break e;case 3:ws=l.stateNode.containerInfo,Yi=!0;break e;case 4:ws=l.stateNode.containerInfo,Yi=!0;break e}l=l.return}if(ws===null)throw Error(at(160));xF(i,o,a),ws=null,Yi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Nn(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yF(t,e),t=t.sibling}function yF(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bi(t,e),Po(e),s&4){try{hv(3,e,e.return),J1(3,e)}catch(g){Nn(e,e.return,g)}try{hv(5,e,e.return)}catch(g){Nn(e,e.return,g)}}break;case 1:Bi(t,e),Po(e),s&512&&r!==null&&lh(r,r.return);break;case 5:if(Bi(t,e),Po(e),s&512&&r!==null&&lh(r,r.return),e.flags&32){var a=e.stateNode;try{Lv(a,"")}catch(g){Nn(e,e.return,g)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&zR(a,i),U5(l,o);var d=U5(l,i);for(o=0;o<c.length;o+=2){var f=c[o],u=c[o+1];f==="style"?HR(a,u):f==="dangerouslySetInnerHTML"?qR(a,u):f==="children"?Lv(a,u):f4(a,f,u,d)}switch(l){case"input":$5(a,i);break;case"textarea":UR(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?hh(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?hh(a,!!i.multiple,i.defaultValue,!0):hh(a,!!i.multiple,i.multiple?[]:"",!1))}a[qv]=i}catch(g){Nn(e,e.return,g)}}break;case 6:if(Bi(t,e),Po(e),s&4){if(e.stateNode===null)throw Error(at(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Nn(e,e.return,g)}}break;case 3:if(Bi(t,e),Po(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Mv(t.containerInfo)}catch(g){Nn(e,e.return,g)}break;case 4:Bi(t,e),Po(e);break;case 13:Bi(t,e),Po(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(W4=_n())),s&4&&t_(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Bs=(d=Bs)||f,Bi(t,e),Bs=d):Bi(t,e),Po(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(bt=e,f=e.child;f!==null;){for(u=bt=f;bt!==null;){switch(h=bt,m=h.child,h.tag){case 0:case 11:case 14:case 15:hv(4,h,h.return);break;case 1:lh(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){s=h,r=h.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Nn(s,r,g)}}break;case 5:lh(h,h.return);break;case 22:if(h.memoizedState!==null){n_(u);continue}}m!==null?(m.return=h,bt=m):n_(u)}f=f.sibling}e:for(f=null,u=e;;){if(u.tag===5){if(f===null){f=u;try{a=u.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=WR("display",o))}catch(g){Nn(e,e.return,g)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(g){Nn(e,e.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Bi(t,e),Po(e),s&4&&t_(e);break;case 21:break;default:Bi(t,e),Po(e)}}function Po(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(gF(r)){var s=r;break e}r=r.return}throw Error(at(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Lv(a,""),s.flags&=-33);var i=e_(e);xS(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=e_(e);gS(e,l,o);break;default:throw Error(at(161))}}catch(c){Nn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RG(e,t,r){bt=e,bF(e)}function bF(e,t,r){for(var s=(e.mode&1)!==0;bt!==null;){var a=bt,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||k0;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Bs;l=k0;var d=Bs;if(k0=o,(Bs=c)&&!d)for(bt=a;bt!==null;)o=bt,c=o.child,o.tag===22&&o.memoizedState!==null?s_(a):c!==null?(c.return=o,bt=c):s_(a);for(;i!==null;)bt=i,bF(i),i=i.sibling;bt=a,k0=l,Bs=d}r_(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,bt=i):r_(e)}}function r_(e){for(;bt!==null;){var t=bt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bs||J1(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Bs)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Hi(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&BT(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}BT(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&Mv(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(at(163))}Bs||t.flags&512&&vS(t)}catch(h){Nn(t,t.return,h)}}if(t===e){bt=null;break}if(r=t.sibling,r!==null){r.return=t.return,bt=r;break}bt=t.return}}function n_(e){for(;bt!==null;){var t=bt;if(t===e){bt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,bt=r;break}bt=t.return}}function s_(e){for(;bt!==null;){var t=bt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{J1(4,t)}catch(c){Nn(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Nn(t,a,c)}}var i=t.return;try{vS(t)}catch(c){Nn(t,i,c)}break;case 5:var o=t.return;try{vS(t)}catch(c){Nn(t,o,c)}}}catch(c){Nn(t,t.return,c)}if(t===e){bt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,bt=l;break}bt=t.return}}var $G=Math.ceil,db=Zl.ReactCurrentDispatcher,V4=Zl.ReactCurrentOwner,gi=Zl.ReactCurrentBatchConfig,gr=0,ds=null,Un=null,Es=0,La=0,ch=xd(0),Zn=0,Xv=null,_u=0,Z1=0,q4=0,mv=null,pa=null,W4=0,Oh=1/0,wl=null,ub=!1,yS=null,Xc=null,D0=!1,Fc=null,fb=0,pv=0,bS=null,ky=-1,Dy=0;function ta(){return gr&6?_n():ky!==-1?ky:ky=_n()}function Qc(e){return e.mode&1?gr&2&&Es!==0?Es&-Es:bG.transition!==null?(Dy===0&&(Dy=s$()),Dy):(e=Tr,e!==0||(e=window.event,e=e===void 0?16:u$(e.type)),e):1}function io(e,t,r,s){if(50<pv)throw pv=0,bS=null,Error(at(185));Yg(e,r,s),(!(gr&2)||e!==ds)&&(e===ds&&(!(gr&2)&&(Z1|=r),Zn===4&&kc(e,Es)),wa(e,s),r===1&&gr===0&&!(t.mode&1)&&(Oh=_n()+500,Y1&&yd()))}function wa(e,t){var r=e.callbackNode;bH(e,t);var s=Yy(e,e===ds?Es:0);if(s===0)r!==null&&hT(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&hT(r),t===1)e.tag===0?yG(a_.bind(null,e)):_$(a_.bind(null,e)),pG(function(){!(gr&6)&&yd()}),r=null;else{switch(a$(s)){case 1:r=g4;break;case 4:r=r$;break;case 16:r=Ky;break;case 536870912:r=n$;break;default:r=Ky}r=PF(r,jF.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function jF(e,t){if(ky=-1,Dy=0,gr&6)throw Error(at(327));var r=e.callbackNode;if(xh()&&e.callbackNode!==r)return null;var s=Yy(e,e===ds?Es:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=hb(e,s);else{t=s;var a=gr;gr|=2;var i=NF();(ds!==e||Es!==t)&&(wl=null,Oh=_n()+500,gu(e,t));do try{BG();break}catch(l){wF(e,l)}while(1);_4(),db.current=i,gr=a,Un!==null?t=0:(ds=null,Es=0,t=Zn)}if(t!==0){if(t===2&&(a=G5(e),a!==0&&(s=a,t=jS(e,a))),t===1)throw r=Xv,gu(e,0),kc(e,s),wa(e,_n()),r;if(t===6)kc(e,s);else{if(a=e.current.alternate,!(s&30)&&!FG(a)&&(t=hb(e,s),t===2&&(i=G5(e),i!==0&&(s=i,t=jS(e,i))),t===1))throw r=Xv,gu(e,0),kc(e,s),wa(e,_n()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(at(345));case 2:Gd(e,pa,wl);break;case 3:if(kc(e,s),(s&130023424)===s&&(t=W4+500-_n(),10<t)){if(Yy(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){ta(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=tS(Gd.bind(null,e,pa,wl),t);break}Gd(e,pa,wl);break;case 4:if(kc(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-ao(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=_n()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*$G(s/1960))-s,10<s){e.timeoutHandle=tS(Gd.bind(null,e,pa,wl),s);break}Gd(e,pa,wl);break;case 5:Gd(e,pa,wl);break;default:throw Error(at(329))}}}return wa(e,_n()),e.callbackNode===r?jF.bind(null,e):null}function jS(e,t){var r=mv;return e.current.memoizedState.isDehydrated&&(gu(e,t).flags|=256),e=hb(e,t),e!==2&&(t=pa,pa=r,t!==null&&wS(t)),e}function wS(e){pa===null?pa=e:pa.push.apply(pa,e)}function FG(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!lo(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kc(e,t){for(t&=~q4,t&=~Z1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ao(t),s=1<<r;e[r]=-1,t&=~s}}function a_(e){if(gr&6)throw Error(at(327));xh();var t=Yy(e,0);if(!(t&1))return wa(e,_n()),null;var r=hb(e,t);if(e.tag!==0&&r===2){var s=G5(e);s!==0&&(t=s,r=jS(e,s))}if(r===1)throw r=Xv,gu(e,0),kc(e,t),wa(e,_n()),r;if(r===6)throw Error(at(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gd(e,pa,wl),wa(e,_n()),null}function H4(e,t){var r=gr;gr|=1;try{return e(t)}finally{gr=r,gr===0&&(Oh=_n()+500,Y1&&yd())}}function Iu(e){Fc!==null&&Fc.tag===0&&!(gr&6)&&xh();var t=gr;gr|=1;var r=gi.transition,s=Tr;try{if(gi.transition=null,Tr=1,e)return e()}finally{Tr=s,gi.transition=r,gr=t,!(gr&6)&&yd()}}function G4(){La=ch.current,sn(ch)}function gu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,mG(r)),Un!==null)for(r=Un.return;r!==null;){var s=r;switch(E4(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&eb();break;case 3:kh(),sn(ba),sn(Hs),R4();break;case 5:L4(s);break;case 4:kh();break;case 13:sn(mn);break;case 19:sn(mn);break;case 10:I4(s.type._context);break;case 22:case 23:G4()}r=r.return}if(ds=e,Un=e=Jc(e.current,null),Es=La=t,Zn=0,Xv=null,q4=Z1=_u=0,pa=mv=null,su!==null){for(t=0;t<su.length;t++)if(r=su[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}su=null}return e}function wF(e,t){do{var r=Un;try{if(_4(),Ty.current=cb,lb){for(var s=vn.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}lb=!1}if(Tu=0,ls=Qn=vn=null,fv=!1,Gv=0,V4.current=null,r===null||r.return===null){Zn=1,Xv=t,Un=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Es,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=HT(o);if(m!==null){m.flags&=-257,GT(m,o,l,i,t),m.mode&1&&WT(i,d,t),t=m,c=d;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){WT(i,d,t),K4();break e}c=Error(at(426))}}else if(an&&l.mode&1){var p=HT(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),GT(p,o,l,i,t),P4(Dh(c,l));break e}}i=c=Dh(c,l),Zn!==4&&(Zn=2),mv===null?mv=[i]:mv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=aF(i,c,t);MT(i,x);break e;case 1:l=c;var b=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Xc===null||!Xc.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=iF(i,l,t);MT(i,j);break e}}i=i.return}while(i!==null)}CF(r)}catch(E){t=E,Un===r&&r!==null&&(Un=r=r.return);continue}break}while(1)}function NF(){var e=db.current;return db.current=cb,e===null?cb:e}function K4(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),ds===null||!(_u&268435455)&&!(Z1&268435455)||kc(ds,Es)}function hb(e,t){var r=gr;gr|=2;var s=NF();(ds!==e||Es!==t)&&(wl=null,gu(e,t));do try{MG();break}catch(a){wF(e,a)}while(1);if(_4(),gr=r,db.current=s,Un!==null)throw Error(at(261));return ds=null,Es=0,Zn}function MG(){for(;Un!==null;)SF(Un)}function BG(){for(;Un!==null&&!uH();)SF(Un)}function SF(e){var t=EF(e.alternate,e,La);e.memoizedProps=e.pendingProps,t===null?CF(e):Un=t,V4.current=null}function CF(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=DG(r,t),r!==null){r.flags&=32767,Un=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Zn=6,Un=null;return}}else if(r=kG(r,t,La),r!==null){Un=r;return}if(t=t.sibling,t!==null){Un=t;return}Un=t=e}while(t!==null);Zn===0&&(Zn=5)}function Gd(e,t,r){var s=Tr,a=gi.transition;try{gi.transition=null,Tr=1,zG(e,t,r,s)}finally{gi.transition=a,Tr=s}return null}function zG(e,t,r,s){do xh();while(Fc!==null);if(gr&6)throw Error(at(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(at(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(jH(e,i),e===ds&&(Un=ds=null,Es=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||D0||(D0=!0,PF(Ky,function(){return xh(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=gi.transition,gi.transition=null;var o=Tr;Tr=1;var l=gr;gr|=4,V4.current=null,LG(e,r),yF(r,e),oG(Z5),Xy=!!J5,Z5=J5=null,e.current=r,RG(r),fH(),gr=l,Tr=o,gi.transition=i}else e.current=r;if(D0&&(D0=!1,Fc=e,fb=a),i=e.pendingLanes,i===0&&(Xc=null),pH(r.stateNode),wa(e,_n()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ub)throw ub=!1,e=yS,yS=null,e;return fb&1&&e.tag!==0&&xh(),i=e.pendingLanes,i&1?e===bS?pv++:(pv=0,bS=e):pv=0,yd(),null}function xh(){if(Fc!==null){var e=a$(fb),t=gi.transition,r=Tr;try{if(gi.transition=null,Tr=16>e?16:e,Fc===null)var s=!1;else{if(e=Fc,Fc=null,fb=0,gr&6)throw Error(at(331));var a=gr;for(gr|=4,bt=e.current;bt!==null;){var i=bt,o=i.child;if(bt.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(bt=d;bt!==null;){var f=bt;switch(f.tag){case 0:case 11:case 15:hv(8,f,i)}var u=f.child;if(u!==null)u.return=f,bt=u;else for(;bt!==null;){f=bt;var h=f.sibling,m=f.return;if(vF(f),f===d){bt=null;break}if(h!==null){h.return=m,bt=h;break}bt=m}}}var v=i.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var p=g.sibling;g.sibling=null,g=p}while(g!==null)}}bt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,bt=o;else e:for(;bt!==null;){if(i=bt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hv(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,bt=x;break e}bt=i.return}}var b=e.current;for(bt=b;bt!==null;){o=bt;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,bt=y;else e:for(o=b;bt!==null;){if(l=bt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:J1(9,l)}}catch(E){Nn(l,l.return,E)}if(l===o){bt=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,bt=j;break e}bt=l.return}}if(gr=a,yd(),Vo&&typeof Vo.onPostCommitFiberRoot=="function")try{Vo.onPostCommitFiberRoot(q1,e)}catch{}s=!0}return s}finally{Tr=r,gi.transition=t}}return!1}function i_(e,t,r){t=Dh(r,t),t=aF(e,t,1),e=Yc(e,t,1),t=ta(),e!==null&&(Yg(e,1,t),wa(e,t))}function Nn(e,t,r){if(e.tag===3)i_(e,e,r);else for(;t!==null;){if(t.tag===3){i_(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Xc===null||!Xc.has(s))){e=Dh(r,e),e=iF(t,e,1),t=Yc(t,e,1),e=ta(),t!==null&&(Yg(t,1,e),wa(t,e));break}}t=t.return}}function UG(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ta(),e.pingedLanes|=e.suspendedLanes&r,ds===e&&(Es&r)===r&&(Zn===4||Zn===3&&(Es&130023424)===Es&&500>_n()-W4?gu(e,0):q4|=r),wa(e,t)}function AF(e,t){t===0&&(e.mode&1?(t=N0,N0<<=1,!(N0&130023424)&&(N0=4194304)):t=1);var r=ta();e=Ul(e,t),e!==null&&(Yg(e,t,r),wa(e,r))}function VG(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),AF(e,r)}function qG(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(at(314))}s!==null&&s.delete(t),AF(e,r)}var EF;EF=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ba.current)xa=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return xa=!1,IG(e,t,r);xa=!!(e.flags&131072)}else xa=!1,an&&t.flags&1048576&&I$(t,nb,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Iy(e,t),e=t.pendingProps;var a=Th(t,Hs.current);gh(t,r),a=F4(null,t,s,e,a,r);var i=M4();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ja(s)?(i=!0,tb(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,D4(t),a.updater=Q1,t.stateNode=a,a._reactInternals=t,lS(t,s,e,r),t=uS(null,t,s,!0,i,r)):(t.tag=0,an&&i&&A4(t),Qs(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Iy(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=HG(s),e=Hi(s,e),a){case 0:t=dS(null,t,s,e,r);break e;case 1:t=XT(null,t,s,e,r);break e;case 11:t=KT(null,t,s,e,r);break e;case 14:t=YT(null,t,s,Hi(s.type,e),r);break e}throw Error(at(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Hi(s,a),dS(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Hi(s,a),XT(e,t,s,a,r);case 3:e:{if(dF(t),e===null)throw Error(at(387));s=t.pendingProps,i=t.memoizedState,a=i.element,$$(e,t),ib(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Dh(Error(at(423)),t),t=QT(e,t,s,r,a);break e}else if(s!==a){a=Dh(Error(at(424)),t),t=QT(e,t,s,r,a);break e}else for(Ba=Kc(t.stateNode.containerInfo.firstChild),Va=t,an=!0,Zi=null,r=L$(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_h(),s===a){t=Vl(e,t,r);break e}Qs(e,t,s,r)}t=t.child}return t;case 5:return F$(t),e===null&&aS(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,eS(s,a)?o=null:i!==null&&eS(s,i)&&(t.flags|=32),cF(e,t),Qs(e,t,o,r),t.child;case 6:return e===null&&aS(t),null;case 13:return uF(e,t,r);case 4:return O4(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ih(t,null,s,r):Qs(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Hi(s,a),KT(e,t,s,a,r);case 7:return Qs(e,t,t.pendingProps,r),t.child;case 8:return Qs(e,t,t.pendingProps.children,r),t.child;case 12:return Qs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Kr(sb,s._currentValue),s._currentValue=o,i!==null)if(lo(i.value,o)){if(i.children===a.children&&!ba.current){t=Vl(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Dl(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),iS(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(at(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),iS(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Qs(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,gh(t,r),a=wi(a),s=s(a),t.flags|=1,Qs(e,t,s,r),t.child;case 14:return s=t.type,a=Hi(s,t.pendingProps),a=Hi(s.type,a),YT(e,t,s,a,r);case 15:return oF(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Hi(s,a),Iy(e,t),t.tag=1,ja(s)?(e=!0,tb(t)):e=!1,gh(t,r),sF(t,s,a),lS(t,s,a,r),uS(null,t,s,!0,e,r);case 19:return fF(e,t,r);case 22:return lF(e,t,r)}throw Error(at(156,t.tag))};function PF(e,t){return t$(e,t)}function WG(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(e,t,r,s){return new WG(e,t,r,s)}function Y4(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HG(e){if(typeof e=="function")return Y4(e)?1:0;if(e!=null){if(e=e.$$typeof,e===m4)return 11;if(e===p4)return 14}return 2}function Jc(e,t){var r=e.alternate;return r===null?(r=mi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Oy(e,t,r,s,a,i){var o=2;if(s=e,typeof e=="function")Y4(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zf:return xu(r.children,a,i,t);case h4:o=8,a|=8;break;case k5:return e=mi(12,r,t,a|2),e.elementType=k5,e.lanes=i,e;case D5:return e=mi(13,r,t,a),e.elementType=D5,e.lanes=i,e;case O5:return e=mi(19,r,t,a),e.elementType=O5,e.lanes=i,e;case FR:return ej(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case RR:o=10;break e;case $R:o=9;break e;case m4:o=11;break e;case p4:o=14;break e;case Ec:o=16,s=null;break e}throw Error(at(130,e==null?e:typeof e,""))}return t=mi(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function xu(e,t,r,s){return e=mi(7,e,s,t),e.lanes=r,e}function ej(e,t,r,s){return e=mi(22,e,s,t),e.elementType=FR,e.lanes=r,e.stateNode={isHidden:!1},e}function Z2(e,t,r){return e=mi(6,e,null,t),e.lanes=r,e}function eN(e,t,r){return t=mi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function GG(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=O2(0),this.expirationTimes=O2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O2(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function X4(e,t,r,s,a,i,o,l,c){return e=new GG(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=mi(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},D4(i),e}function KG(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jf,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function TF(e){if(!e)return od;e=e._reactInternals;e:{if(Uu(e)!==e||e.tag!==1)throw Error(at(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ja(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(at(171))}if(e.tag===1){var r=e.type;if(ja(r))return T$(e,r,t)}return t}function _F(e,t,r,s,a,i,o,l,c){return e=X4(r,s,!0,e,a,i,o,l,c),e.context=TF(null),r=e.current,s=ta(),a=Qc(r),i=Dl(s,a),i.callback=t??null,Yc(r,i,a),e.current.lanes=a,Yg(e,a,s),wa(e,s),e}function tj(e,t,r,s){var a=t.current,i=ta(),o=Qc(a);return r=TF(r),t.context===null?t.context=r:t.pendingContext=r,t=Dl(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Yc(a,t,o),e!==null&&(io(e,a,o,i),Py(e,a,o)),o}function mb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function o_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Q4(e,t){o_(e,t),(e=e.alternate)&&o_(e,t)}function YG(){return null}var IF=typeof reportError=="function"?reportError:function(e){console.error(e)};function J4(e){this._internalRoot=e}rj.prototype.render=J4.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(at(409));tj(e,t,null,null)};rj.prototype.unmount=J4.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Iu(function(){tj(null,e,null,null)}),t[zl]=null}};function rj(e){this._internalRoot=e}rj.prototype.unstable_scheduleHydration=function(e){if(e){var t=l$();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ic.length&&t!==0&&t<Ic[r].priority;r++);Ic.splice(r,0,e),r===0&&d$(e)}};function Z4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function nj(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function l_(){}function XG(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=mb(o);i.call(d)}}var o=_F(t,s,e,0,null,!1,!1,"",l_);return e._reactRootContainer=o,e[zl]=o.current,Uv(e.nodeType===8?e.parentNode:e),Iu(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=mb(c);l.call(d)}}var c=X4(e,0,!1,null,null,!1,!1,"",l_);return e._reactRootContainer=c,e[zl]=c.current,Uv(e.nodeType===8?e.parentNode:e),Iu(function(){tj(t,c,r,s)}),c}function sj(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=mb(o);l.call(c)}}tj(t,o,e,a)}else o=XG(r,t,e,a,s);return mb(o)}i$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=rv(t.pendingLanes);r!==0&&(x4(t,r|1),wa(t,_n()),!(gr&6)&&(Oh=_n()+500,yd()))}break;case 13:Iu(function(){var s=Ul(e,1);if(s!==null){var a=ta();io(s,e,1,a)}}),Q4(e,1)}};y4=function(e){if(e.tag===13){var t=Ul(e,134217728);if(t!==null){var r=ta();io(t,e,134217728,r)}Q4(e,134217728)}};o$=function(e){if(e.tag===13){var t=Qc(e),r=Ul(e,t);if(r!==null){var s=ta();io(r,e,t,s)}Q4(e,t)}};l$=function(){return Tr};c$=function(e,t){var r=Tr;try{return Tr=e,t()}finally{Tr=r}};q5=function(e,t,r){switch(t){case"input":if($5(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=K1(s);if(!a)throw Error(at(90));BR(s),$5(s,a)}}}break;case"textarea":UR(e,r);break;case"select":t=r.value,t!=null&&hh(e,!!r.multiple,t,!1)}};YR=H4;XR=Iu;var QG={usingClientEntryPoint:!1,Events:[Qg,nh,K1,GR,KR,H4]},kp={findFiberByHostInstance:nu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JG={bundleType:kp.bundleType,version:kp.version,rendererPackageName:kp.rendererPackageName,rendererConfig:kp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ZR(e),e===null?null:e.stateNode},findFiberByHostInstance:kp.findFiberByHostInstance||YG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var O0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!O0.isDisabled&&O0.supportsFiber)try{q1=O0.inject(JG),Vo=O0}catch{}}Ka.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QG;Ka.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Z4(t))throw Error(at(200));return KG(e,t,null,r)};Ka.createRoot=function(e,t){if(!Z4(e))throw Error(at(299));var r=!1,s="",a=IF;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=X4(e,1,!1,null,null,r,!1,s,a),e[zl]=t.current,Uv(e.nodeType===8?e.parentNode:e),new J4(t)};Ka.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(at(188)):(e=Object.keys(e).join(","),Error(at(268,e)));return e=ZR(t),e=e===null?null:e.stateNode,e};Ka.flushSync=function(e){return Iu(e)};Ka.hydrate=function(e,t,r){if(!nj(t))throw Error(at(200));return sj(null,e,t,!0,r)};Ka.hydrateRoot=function(e,t,r){if(!Z4(e))throw Error(at(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=IF;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=_F(t,null,e,1,r??null,a,!1,i,o),e[zl]=t.current,Uv(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new rj(t)};Ka.render=function(e,t,r){if(!nj(t))throw Error(at(200));return sj(null,e,t,!1,r)};Ka.unmountComponentAtNode=function(e){if(!nj(e))throw Error(at(40));return e._reactRootContainer?(Iu(function(){sj(null,null,e,!1,function(){e._reactRootContainer=null,e[zl]=null})}),!0):!1};Ka.unstable_batchedUpdates=H4;Ka.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!nj(r))throw Error(at(200));if(e==null||e._reactInternals===void 0)throw Error(at(38));return sj(e,t,r,!1,s)};Ka.version="18.3.1-next-f1338f8080-20240426";function kF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kF)}catch(e){console.error(e)}}kF(),kR.exports=Ka;var rl=kR.exports;const eE=Cr(rl);var c_=rl;_5.createRoot=c_.createRoot,_5.hydrateRoot=c_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qv.apply(this,arguments)}var Mc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mc||(Mc={}));const d_="popstate";function ZG(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return NS("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:pb(a)}return tK(t,r,null,e)}function On(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function DF(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function eK(){return Math.random().toString(36).substr(2,8)}function u_(e,t){return{usr:e.state,key:e.key,idx:t}}function NS(e,t,r,s){return r===void 0&&(r=null),Qv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ym(t):t,{state:r,key:t&&t.key||s||eK()})}function pb(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ym(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function tK(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=Mc.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Qv({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function u(){l=Mc.Pop;let p=f(),x=p==null?null:p-d;d=p,c&&c({action:l,location:g.location,delta:x})}function h(p,x){l=Mc.Push;let b=NS(g.location,p,x);r&&r(b,p),d=f()+1;let y=u_(b,d),j=g.createHref(b);try{o.pushState(y,"",j)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(j)}i&&c&&c({action:l,location:g.location,delta:1})}function m(p,x){l=Mc.Replace;let b=NS(g.location,p,x);r&&r(b,p),d=f();let y=u_(b,d),j=g.createHref(b);o.replaceState(y,"",j),i&&c&&c({action:l,location:g.location,delta:0})}function v(p){let x=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof p=="string"?p:pb(p);return b=b.replace(/ $/,"%20"),On(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let g={get action(){return l},get location(){return e(a,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(d_,u),c=p,()=>{a.removeEventListener(d_,u),c=null}},createHref(p){return t(a,p)},createURL:v,encodeLocation(p){let x=v(p);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(p){return o.go(p)}};return g}var f_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(f_||(f_={}));function rK(e,t,r){return r===void 0&&(r="/"),nK(e,t,r,!1)}function nK(e,t,r,s){let a=typeof t=="string"?ym(t):t,i=tE(a.pathname||"/",r);if(i==null)return null;let o=OF(e);sK(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=pK(i);l=hK(o[c],d,s)}return l}function OF(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(On(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Zc([s,c.relativePath]),f=r.concat(c);i.children&&i.children.length>0&&(On(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),OF(i.children,t,f,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:uK(d,i.index),routesMeta:f})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of LF(i.path))a(i,o,c)}),t}function LF(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=LF(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function sK(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fK(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const aK=/^:[\w-]+$/,iK=3,oK=2,lK=1,cK=10,dK=-2,h_=e=>e==="*";function uK(e,t){let r=e.split("/"),s=r.length;return r.some(h_)&&(s+=dK),t&&(s+=oK),r.filter(a=>!h_(a)).reduce((a,i)=>a+(aK.test(i)?iK:i===""?lK:cK),s)}function fK(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function hK(e,t,r){r===void 0&&(r=!1);let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,f=i==="/"?t:t.slice(i.length)||"/",u=m_({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),h=c.route;if(!u&&d&&r&&!s[s.length-1].route.index&&(u=m_({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:Zc([i,u.pathname]),pathnameBase:yK(Zc([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=Zc([i,u.pathnameBase]))}return o}function m_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=mK(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,f,u)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let g=l[u]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[u];return m&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function mK(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),DF(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function pK(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return DF(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function tE(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function vK(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?ym(e):e;return{pathname:r?r.startsWith("/")?r:gK(r,t):t,search:bK(s),hash:jK(a)}}function gK(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function tN(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xK(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function rE(e,t){let r=xK(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function nE(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=ym(e):(a=Qv({},e),On(!a.pathname||!a.pathname.includes("?"),tN("?","pathname","search",a)),On(!a.pathname||!a.pathname.includes("#"),tN("#","pathname","hash",a)),On(!a.search||!a.search.includes("#"),tN("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let u=t.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;a.pathname=h.join("/")}l=u>=0?t[u]:"/"}let c=vK(a,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Zc=e=>e.join("/").replace(/\/\/+/g,"/"),yK=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bK=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jK=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wK(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const RF=["post","put","patch","delete"];new Set(RF);const NK=["get",...RF];new Set(NK);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Jv.apply(this,arguments)}const sE=w.createContext(null),SK=w.createContext(null),bd=w.createContext(null),aj=w.createContext(null),jd=w.createContext({outlet:null,matches:[],isDataRoute:!1}),$F=w.createContext(null);function CK(e,t){let{relative:r}=t===void 0?{}:t;bm()||On(!1);let{basename:s,navigator:a}=w.useContext(bd),{hash:i,pathname:o,search:l}=MF(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:Zc([s,o])),a.createHref({pathname:c,search:l,hash:i})}function bm(){return w.useContext(aj)!=null}function jm(){return bm()||On(!1),w.useContext(aj).location}function FF(e){w.useContext(bd).static||w.useLayoutEffect(e)}function aE(){let{isDataRoute:e}=w.useContext(jd);return e?FK():AK()}function AK(){bm()||On(!1);let e=w.useContext(sE),{basename:t,future:r,navigator:s}=w.useContext(bd),{matches:a}=w.useContext(jd),{pathname:i}=jm(),o=JSON.stringify(rE(a,r.v7_relativeSplatPath)),l=w.useRef(!1);return FF(()=>{l.current=!0}),w.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let u=nE(d,JSON.parse(o),i,f.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Zc([t,u.pathname])),(f.replace?s.replace:s.push)(u,f.state,f)},[t,s,o,i,e])}function MF(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=w.useContext(bd),{matches:a}=w.useContext(jd),{pathname:i}=jm(),o=JSON.stringify(rE(a,s.v7_relativeSplatPath));return w.useMemo(()=>nE(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function EK(e,t){return PK(e,t)}function PK(e,t,r,s){bm()||On(!1);let{navigator:a}=w.useContext(bd),{matches:i}=w.useContext(jd),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=jm(),f;if(t){var u;let p=typeof t=="string"?ym(t):t;c==="/"||(u=p.pathname)!=null&&u.startsWith(c)||On(!1),f=p}else f=d;let h=f.pathname||"/",m=h;if(c!=="/"){let p=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(p.length).join("/")}let v=rK(e,{pathname:m}),g=DK(v&&v.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:Zc([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:Zc([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r,s);return t&&g?w.createElement(aj.Provider,{value:{location:Jv({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Mc.Pop}},g):g}function TK(){let e=$K(),t=wK(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:a},r):null,i)}const _K=w.createElement(TK,null);class IK extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(jd.Provider,{value:this.props.routeContext},w.createElement($F.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kK(e){let{routeContext:t,match:r,children:s}=e,a=w.useContext(sE);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(jd.Provider,{value:t},s)}function DK(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let f=o.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);f>=0||On(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let u=o[f];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=f),u.route.id){let{loaderData:h,errors:m}=r,v=u.route.loader&&h[u.route.id]===void 0&&(!m||m[u.route.id]===void 0);if(u.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,u,h)=>{let m,v=!1,g=null,p=null;r&&(m=l&&u.route.id?l[u.route.id]:void 0,g=u.route.errorElement||_K,c&&(d<0&&h===0?(MK("route-fallback",!1),v=!0,p=null):d===h&&(v=!0,p=u.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),b=()=>{let y;return m?y=g:v?y=p:u.route.Component?y=w.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=f,w.createElement(kK,{match:u,routeContext:{outlet:f,matches:x,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?w.createElement(IK,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var BF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(BF||{}),vb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vb||{});function OK(e){let t=w.useContext(sE);return t||On(!1),t}function LK(e){let t=w.useContext(SK);return t||On(!1),t}function RK(e){let t=w.useContext(jd);return t||On(!1),t}function zF(e){let t=RK(),r=t.matches[t.matches.length-1];return r.route.id||On(!1),r.route.id}function $K(){var e;let t=w.useContext($F),r=LK(vb.UseRouteError),s=zF(vb.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function FK(){let{router:e}=OK(BF.UseNavigateStable),t=zF(vb.UseNavigateStable),r=w.useRef(!1);return FF(()=>{r.current=!0}),w.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Jv({fromRouteId:t},i)))},[e,t])}const p_={};function MK(e,t,r){!t&&!p_[e]&&(p_[e]=!0)}function BK(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function zK(e){let{to:t,replace:r,state:s,relative:a}=e;bm()||On(!1);let{future:i,static:o}=w.useContext(bd),{matches:l}=w.useContext(jd),{pathname:c}=jm(),d=aE(),f=nE(t,rE(l,i.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(f);return w.useEffect(()=>d(JSON.parse(u),{replace:r,state:s,relative:a}),[d,u,a,r,s]),null}function $t(e){On(!1)}function UK(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Mc.Pop,navigator:i,static:o=!1,future:l}=e;bm()&&On(!1);let c=t.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Jv({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=ym(s));let{pathname:f="/",search:u="",hash:h="",state:m=null,key:v="default"}=s,g=w.useMemo(()=>{let p=tE(f,c);return p==null?null:{location:{pathname:p,search:u,hash:h,state:m,key:v},navigationType:a}},[c,f,u,h,m,v,a]);return g==null?null:w.createElement(bd.Provider,{value:d},w.createElement(aj.Provider,{children:r,value:g}))}function Ts(e){let{children:t,location:r}=e;return EK(SS(t),r)}new Promise(()=>{});function SS(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(s,a)=>{if(!w.isValidElement(s))return;let i=[...t,a];if(s.type===w.Fragment){r.push.apply(r,SS(s.props.children,i));return}s.type!==$t&&On(!1),!s.props.index||!s.props.children||On(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=SS(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function CS(){return CS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},CS.apply(this,arguments)}function VK(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function qK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function WK(e,t){return e.button===0&&(!t||t==="_self")&&!qK(e)}const HK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GK="6";try{window.__reactRouterVersion=GK}catch{}const KK="startTransition",v_=Zo[KK];function YK(e){let{basename:t,children:r,future:s,window:a}=e,i=w.useRef();i.current==null&&(i.current=ZG({window:a,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},f=w.useCallback(u=>{d&&v_?v_(()=>c(u)):c(u)},[c,d]);return w.useLayoutEffect(()=>o.listen(f),[o,f]),w.useEffect(()=>BK(s),[s]),w.createElement(UK,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const XK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g_=w.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:u}=t,h=VK(t,HK),{basename:m}=w.useContext(bd),v,g=!1;if(typeof d=="string"&&QK.test(d)&&(v=d,XK))try{let y=new URL(window.location.href),j=d.startsWith("//")?new URL(y.protocol+d):new URL(d),E=tE(j.pathname,m);j.origin===y.origin&&E!=null?d=E+j.search+j.hash:g=!0}catch{}let p=CK(d,{relative:a}),x=JK(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:u});function b(y){s&&s(y),y.defaultPrevented||x(y)}return w.createElement("a",CS({},h,{href:v||p,onClick:g||i?s:b,ref:r,target:c}))});var x_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(x_||(x_={}));var y_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(y_||(y_={}));function JK(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=aE(),d=jm(),f=MF(e,{relative:o});return w.useCallback(u=>{if(WK(u,r)){u.preventDefault();let h=s!==void 0?s:pb(d)===pb(f);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,s,a,r,e,i,o,l])}function on(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function b_(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function UF(...e){return t=>{let r=!1;const s=e.map(a=>{const i=b_(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():b_(e[a],null)}}}}function Si(...e){return w.useCallback(UF(...e),e)}function Vu(e,t=[]){let r=[];function s(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];const d=u=>{var x;const{scope:h,children:m,...v}=u,g=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,p=w.useMemo(()=>v,Object.values(v));return n.jsx(g.Provider,{value:p,children:m})};d.displayName=i+"Provider";function f(u,h){var g;const m=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,v=w.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[d,f]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,ZK(a,...t)]}function ZK(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Lh(e){const t=tY(e),r=w.forwardRef((s,a)=>{const{children:i,...o}=s,l=w.Children.toArray(i),c=l.find(nY);if(c){const d=c.props.children,f=l.map(u=>u===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:u);return n.jsx(t,{...o,ref:a,children:w.isValidElement(d)?w.cloneElement(d,void 0,f):null})}return n.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var eY=Lh("Slot");function tY(e){const t=w.forwardRef((r,s)=>{const{children:a,...i}=r;if(w.isValidElement(a)){const o=aY(a),l=sY(i,a.props);return a.type!==w.Fragment&&(l.ref=s?UF(s,o):o),w.cloneElement(a,l)}return w.Children.count(a)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var rY=Symbol("radix.slottable");function nY(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===rY}function sY(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function aY(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function iY(e){const t=e+"CollectionProvider",[r,s]=Vu(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:x}=g,b=ce.useRef(null),y=ce.useRef(new Map).current;return n.jsx(a,{scope:p,itemMap:y,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Lh(l),d=ce.forwardRef((g,p)=>{const{scope:x,children:b}=g,y=i(l,x),j=Si(p,y.collectionRef);return n.jsx(c,{ref:j,children:b})});d.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",h=Lh(f),m=ce.forwardRef((g,p)=>{const{scope:x,children:b,...y}=g,j=ce.useRef(null),E=Si(p,j),C=i(f,x);return ce.useEffect(()=>(C.itemMap.set(j,{ref:j,...y}),()=>void C.itemMap.delete(j))),n.jsx(h,{[u]:"",ref:E,children:b})});m.displayName=f;function v(g){const p=i(e+"CollectionConsumer",g);return ce.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((C,S)=>y.indexOf(C.ref.current)-y.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},v,s]}var oY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],An=oY.reduce((e,t)=>{const r=Lh(`Primitive.${t}`),s=w.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function VF(e,t){e&&rl.flushSync(()=>e.dispatchEvent(t))}function ku(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function lY(e,t=globalThis==null?void 0:globalThis.document){const r=ku(e);w.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var cY="DismissableLayer",AS="dismissableLayer.update",dY="dismissableLayer.pointerDownOutside",uY="dismissableLayer.focusOutside",j_,qF=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),WF=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=w.useContext(qF),[f,u]=w.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=w.useState({}),v=Si(t,S=>u(S)),g=Array.from(d.layers),[p]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(p),b=f?g.indexOf(f):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,j=b>=x,E=hY(S=>{const N=S.target,_=[...d.branches].some(I=>I.contains(N));!j||_||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),C=mY(S=>{const N=S.target;[...d.branches].some(I=>I.contains(N))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return lY(S=>{b===d.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),w.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(j_=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),w_(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=j_)}},[f,h,r,d]),w.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),w_())},[f,d]),w.useEffect(()=>{const S=()=>m({});return document.addEventListener(AS,S),()=>document.removeEventListener(AS,S)},[]),n.jsx(An.div,{...c,ref:v,style:{pointerEvents:y?j?"auto":"none":void 0,...e.style},onFocusCapture:on(e.onFocusCapture,C.onFocusCapture),onBlurCapture:on(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:on(e.onPointerDownCapture,E.onPointerDownCapture)})});WF.displayName=cY;var fY="DismissableLayerBranch",HF=w.forwardRef((e,t)=>{const r=w.useContext(qF),s=w.useRef(null),a=Si(t,s);return w.useEffect(()=>{const i=s.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(An.div,{...e,ref:a})});HF.displayName=fY;function hY(e,t=globalThis==null?void 0:globalThis.document){const r=ku(e),s=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){GF(dY,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function mY(e,t=globalThis==null?void 0:globalThis.document){const r=ku(e),s=w.useRef(!1);return w.useEffect(()=>{const a=i=>{i.target&&!s.current&&GF(uY,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function w_(){const e=new CustomEvent(AS);document.dispatchEvent(e)}function GF(e,t,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?VF(a,i):a.dispatchEvent(i)}var pY=WF,vY=HF,ld=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},gY="Portal",KF=w.forwardRef((e,t)=>{var l;const{container:r,...s}=e,[a,i]=w.useState(!1);ld(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?eE.createPortal(n.jsx(An.div,{...s,ref:t}),o):null});KF.displayName=gY;function xY(e,t){return w.useReducer((r,s)=>t[r][s]??r,e)}var ij=e=>{const{present:t,children:r}=e,s=yY(t),a=typeof r=="function"?r({present:s.isPresent}):w.Children.only(r),i=Si(s.ref,bY(a));return typeof r=="function"||s.isPresent?w.cloneElement(a,{ref:i}):null};ij.displayName="Presence";function yY(e){const[t,r]=w.useState(),s=w.useRef(null),a=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[l,c]=xY(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=L0(s.current);i.current=l==="mounted"?d:"none"},[l]),ld(()=>{const d=s.current,f=a.current;if(f!==e){const h=i.current,m=L0(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),ld(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,u=m=>{const g=L0(s.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!a.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},h=m=>{m.target===t&&(i.current=L0(s.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{s.current=d?getComputedStyle(d):null,r(d)},[])}}function L0(e){return(e==null?void 0:e.animationName)||"none"}function bY(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var jY=Zo[" useInsertionEffect ".trim().toString()]||ld;function oj({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,i,o]=wY({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const f=w.useRef(e!==void 0);w.useEffect(()=>{const u=f.current;u!==l&&console.warn(`${s} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const d=w.useCallback(f=>{var u;if(l){const h=NY(f)?f(e):f;h!==e&&((u=o.current)==null||u.call(o,h))}else i(f)},[l,e,i,o]);return[c,d]}function wY({defaultProp:e,onChange:t}){const[r,s]=w.useState(e),a=w.useRef(r),i=w.useRef(t);return jY(()=>{i.current=t},[t]),w.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,s,i]}function NY(e){return typeof e=="function"}var SY=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),CY="VisuallyHidden",iE=w.forwardRef((e,t)=>n.jsx(An.span,{...e,ref:t,style:{...SY,...e.style}}));iE.displayName=CY;var oE="ToastProvider",[lE,AY,EY]=iY("Toast"),[YF,IRe]=Vu("Toast",[EY]),[PY,lj]=YF(oE),XF=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=w.useState(null),[d,f]=w.useState(0),u=w.useRef(!1),h=w.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${oE}\`. Expected non-empty \`string\`.`),n.jsx(lE.Provider,{scope:t,children:n.jsx(PY,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:w.useCallback(()=>f(m=>m+1),[]),onToastRemove:w.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:o})})};XF.displayName=oE;var QF="ToastViewport",TY=["F8"],ES="toast.viewportPause",PS="toast.viewportResume",JF=w.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=TY,label:a="Notifications ({hotkey})",...i}=e,o=lj(QF,r),l=AY(r),c=w.useRef(null),d=w.useRef(null),f=w.useRef(null),u=w.useRef(null),h=Si(t,u,o.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;w.useEffect(()=>{const p=x=>{var y;s.length!==0&&s.every(j=>x[j]||x.code===j)&&((y=u.current)==null||y.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[s]),w.useEffect(()=>{const p=c.current,x=u.current;if(v&&p&&x){const b=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(ES);x.dispatchEvent(C),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(PS);x.dispatchEvent(C),o.isClosePausedRef.current=!1}},j=C=>{!p.contains(C.relatedTarget)&&y()},E=()=>{p.contains(document.activeElement)||y()};return p.addEventListener("focusin",b),p.addEventListener("focusout",j),p.addEventListener("pointermove",b),p.addEventListener("pointerleave",E),window.addEventListener("blur",b),window.addEventListener("focus",y),()=>{p.removeEventListener("focusin",b),p.removeEventListener("focusout",j),p.removeEventListener("pointermove",b),p.removeEventListener("pointerleave",E),window.removeEventListener("blur",b),window.removeEventListener("focus",y)}}},[v,o.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:p})=>{const b=l().map(y=>{const j=y.ref.current,E=[j,...UY(j)];return p==="forwards"?E:E.reverse()});return(p==="forwards"?b.reverse():b).flat()},[l]);return w.useEffect(()=>{const p=u.current;if(p){const x=b=>{var E,C,S;const y=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!y){const N=document.activeElement,_=b.shiftKey;if(b.target===p&&_){(E=d.current)==null||E.focus();return}const A=g({tabbingDirection:_?"backwards":"forwards"}),O=A.findIndex(D=>D===N);rN(A.slice(O+1))?b.preventDefault():_?(C=d.current)==null||C.focus():(S=f.current)==null||S.focus()}};return p.addEventListener("keydown",x),()=>p.removeEventListener("keydown",x)}},[l,g]),n.jsxs(vY,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&n.jsx(TS,{ref:d,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"forwards"});rN(p)}}),n.jsx(lE.Slot,{scope:r,children:n.jsx(An.ol,{tabIndex:-1,...i,ref:h})}),v&&n.jsx(TS,{ref:f,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"backwards"});rN(p)}})]})});JF.displayName=QF;var ZF="ToastFocusProxy",TS=w.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,i=lj(ZF,r);return n.jsx(iE,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&s()}})});TS.displayName=ZF;var Zg="Toast",_Y="toast.swipeStart",IY="toast.swipeMove",kY="toast.swipeCancel",DY="toast.swipeEnd",eM=w.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=oj({prop:s,defaultProp:a??!0,onChange:i,caller:Zg});return n.jsx(ij,{present:r||l,children:n.jsx(RY,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:ku(e.onPause),onResume:ku(e.onResume),onSwipeStart:on(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:on(e.onSwipeMove,d=>{const{x:f,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:on(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:on(e.onSwipeEnd,d=>{const{x:f,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),c(!1)})})})});eM.displayName=Zg;var[OY,LY]=YF(Zg,{onClose(){}}),RY=w.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:m,...v}=e,g=lj(Zg,r),[p,x]=w.useState(null),b=Si(t,D=>x(D)),y=w.useRef(null),j=w.useRef(null),E=a||g.duration,C=w.useRef(0),S=w.useRef(E),N=w.useRef(0),{onToastAdd:_,onToastRemove:I}=g,T=ku(()=>{var $;(p==null?void 0:p.contains(document.activeElement))&&(($=g.viewport)==null||$.focus()),o()}),A=w.useCallback(D=>{!D||D===1/0||(window.clearTimeout(N.current),C.current=new Date().getTime(),N.current=window.setTimeout(T,D))},[T]);w.useEffect(()=>{const D=g.viewport;if(D){const $=()=>{A(S.current),d==null||d()},M=()=>{const R=new Date().getTime()-C.current;S.current=S.current-R,window.clearTimeout(N.current),c==null||c()};return D.addEventListener(ES,M),D.addEventListener(PS,$),()=>{D.removeEventListener(ES,M),D.removeEventListener(PS,$)}}},[g.viewport,E,c,d,A]),w.useEffect(()=>{i&&!g.isClosePausedRef.current&&A(E)},[i,E,g.isClosePausedRef,A]),w.useEffect(()=>(_(),()=>I()),[_,I]);const O=w.useMemo(()=>p?oM(p):null,[p]);return g.viewport?n.jsxs(n.Fragment,{children:[O&&n.jsx($Y,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),n.jsx(OY,{scope:r,onClose:T,children:rl.createPortal(n.jsx(lE.ItemSlot,{scope:r,children:n.jsx(pY,{asChild:!0,onEscapeKeyDown:on(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(An.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:on(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:on(e.onPointerDown,D=>{D.button===0&&(y.current={x:D.clientX,y:D.clientY})}),onPointerMove:on(e.onPointerMove,D=>{if(!y.current)return;const $=D.clientX-y.current.x,M=D.clientY-y.current.y,R=!!j.current,B=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,W=B?U(0,$):0,q=B?0:U(0,M),L=D.pointerType==="touch"?10:2,V={x:W,y:q},G={originalEvent:D,delta:V};R?(j.current=V,R0(IY,u,G,{discrete:!1})):N_(V,g.swipeDirection,L)?(j.current=V,R0(_Y,f,G,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs($)>L||Math.abs(M)>L)&&(y.current=null)}),onPointerUp:on(e.onPointerUp,D=>{const $=j.current,M=D.target;if(M.hasPointerCapture(D.pointerId)&&M.releasePointerCapture(D.pointerId),j.current=null,y.current=null,$){const R=D.currentTarget,B={originalEvent:D,delta:$};N_($,g.swipeDirection,g.swipeThreshold)?R0(DY,m,B,{discrete:!0}):R0(kY,h,B,{discrete:!0}),R.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),$Y=e=>{const{__scopeToast:t,children:r,...s}=e,a=lj(Zg,t),[i,o]=w.useState(!1),[l,c]=w.useState(!1);return BY(()=>o(!0)),w.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(KF,{asChild:!0,children:n.jsx(iE,{...s,children:i&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},FY="ToastTitle",tM=w.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(An.div,{...s,ref:t})});tM.displayName=FY;var MY="ToastDescription",rM=w.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(An.div,{...s,ref:t})});rM.displayName=MY;var nM="ToastAction",sM=w.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(iM,{altText:r,asChild:!0,children:n.jsx(cE,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${nM}\`. Expected non-empty \`string\`.`),null)});sM.displayName=nM;var aM="ToastClose",cE=w.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=LY(aM,r);return n.jsx(iM,{asChild:!0,children:n.jsx(An.button,{type:"button",...s,ref:t,onClick:on(e.onClick,a.onClose)})})});cE.displayName=aM;var iM=w.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(An.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function oM(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),zY(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...oM(s))}}),t}function R0(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?VF(a,i):a.dispatchEvent(i)}var N_=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>r:!i&&a>r};function BY(e=()=>{}){const t=ku(e);ld(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function zY(e){return e.nodeType===e.ELEMENT_NODE}function UY(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function rN(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var VY=XF,lM=JF,cM=eM,dM=tM,uM=rM,fM=sM,hM=cE;function mM(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=mM(e[t]))&&(s&&(s+=" "),s+=r);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function pM(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=mM(e))&&(s&&(s+=" "),s+=t);return s}const S_=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,C_=pM,cj=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return C_(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const f=r==null?void 0:r[d],u=i==null?void 0:i[d];if(f===null)return null;const h=S_(f)||S_(u);return a[d][h]}),l=r&&Object.entries(r).reduce((d,f)=>{let[u,h]=f;return h===void 0||(d[u]=h),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:u,className:h,...m}=f;return Object.entries(m).every(v=>{let[g,p]=v;return Array.isArray(p)?p.includes({...i,...l}[g]):{...i,...l}[g]===p})?[...d,u,h]:d},[]);return C_(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};var qY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const WY=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HY=(e,t)=>{const r=w.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>w.createElement("svg",{ref:d,...qY,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${WY(e)}`,...c},[...t.map(([f,u])=>w.createElement(f,u)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r};var dt=HY;const ko=dt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),yh=dt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ro=dt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Do=dt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),GY=dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Oo=dt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),zn=dt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),vM=dt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Lo=dt("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Zv=dt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ql=dt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Lr=dt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Tl=dt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Xr=dt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),dE=dt("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),dj=dt("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),gM=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),KY=dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Du=dt("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),_S=dt("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),sr=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),uE=dt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),xi=dt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),xM=dt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),It=dt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Sa=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),YY=dt("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Wl=dt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ly=dt("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),cs=dt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ca=dt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ex=dt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),XY=dt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),nN=dt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),QY=dt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Rh=dt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),JY=dt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),ZY=dt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),eX=dt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),tX=dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Qr=dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Hl=dt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),rX=dt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ln=dt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Ws=dt("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),yM=dt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),nX=dt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),zr=dt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),$0=dt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),eg=dt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),wm=dt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),sN=dt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Nt=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qu=dt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),bM=dt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),Js=dt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),$h=dt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Rr=dt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),A_=dt("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),ts=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Wo=dt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),tg=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),uj=dt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),fE=dt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Na=dt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),sX=dt("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),aX=dt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),Cn=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),bh=dt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),_t=dt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),va=dt("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),hE=dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),fs=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ln=dt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),gb=dt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),E_=dt("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),iu=dt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),oo=dt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Bt=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iX=dt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function oX(){for(var e=0,t,r,s="";e<arguments.length;)(t=arguments[e++])&&(r=jM(t))&&(s&&(s+=" "),s+=r);return s}function jM(e){if(typeof e=="string")return e;for(var t,r="",s=0;s<e.length;s++)e[s]&&(t=jM(e[s]))&&(r&&(r+=" "),r+=t);return r}var mE="-";function lX(e){var t=dX(e),r=e.conflictingClassGroups,s=e.conflictingClassGroupModifiers,a=s===void 0?{}:s;function i(l){var c=l.split(mE);return c[0]===""&&c.length!==1&&c.shift(),wM(c,t)||cX(l)}function o(l,c){var d=r[l]||[];return c&&a[l]?[].concat(d,a[l]):d}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function wM(e,t){var o;if(e.length===0)return t.classGroupId;var r=e[0],s=t.nextPart.get(r),a=s?wM(e.slice(1),s):void 0;if(a)return a;if(t.validators.length!==0){var i=e.join(mE);return(o=t.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:o.classGroupId}}var P_=/^\[(.+)\]$/;function cX(e){if(P_.test(e)){var t=P_.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function dX(e){var t=e.theme,r=e.prefix,s={nextPart:new Map,validators:[]},a=fX(Object.entries(e.classGroups),r);return a.forEach(function(i){var o=i[0],l=i[1];IS(l,s,o,t)}),s}function IS(e,t,r,s){e.forEach(function(a){if(typeof a=="string"){var i=a===""?t:T_(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(uX(a)){IS(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(o){var l=o[0],c=o[1];IS(c,T_(t,l),r,s)})})}function T_(e,t){var r=e;return t.split(mE).forEach(function(s){r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r}function uX(e){return e.isThemeGetter}function fX(e,t){return t?e.map(function(r){var s=r[0],a=r[1],i=a.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[t+c,d]})):o});return[s,i]}):e}function hX(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,s=new Map;function a(i,o){r.set(i,o),t++,t>e&&(t=0,s=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=s.get(o))!==void 0)return a(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):a(o,l)}}}var NM="!";function mX(e){var t=e.separator||":",r=t.length===1,s=t[0],a=t.length;return function(o){for(var l=[],c=0,d=0,f,u=0;u<o.length;u++){var h=o[u];if(c===0){if(h===s&&(r||o.slice(u,u+a)===t)){l.push(o.slice(d,u)),d=u+a;continue}if(h==="/"){f=u;continue}}h==="["?c++:h==="]"&&c--}var m=l.length===0?o:o.substring(d),v=m.startsWith(NM),g=v?m.substring(1):m,p=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:p}}}function pX(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(s){var a=s[0]==="[";a?(t.push.apply(t,r.sort().concat([s])),r=[]):r.push(s)}),t.push.apply(t,r.sort()),t}function vX(e){return{cache:hX(e.cacheSize),splitModifiers:mX(e),...lX(e)}}var gX=/\s+/;function xX(e,t){var r=t.splitModifiers,s=t.getClassGroupId,a=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(gX).map(function(o){var l=r(o),c=l.modifiers,d=l.hasImportantModifier,f=l.baseClassName,u=l.maybePostfixModifierPosition,h=s(u?f.substring(0,u):f),m=!!u;if(!h){if(!u)return{isTailwindClass:!1,originalClassName:o};if(h=s(f),!h)return{isTailwindClass:!1,originalClassName:o};m=!1}var v=pX(c).join(":"),g=d?v+NM:v;return{isTailwindClass:!0,modifierId:g,classGroupId:h,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,f=l+c;return i.has(f)?!1:(i.add(f),a(c,d).forEach(function(u){return i.add(l+u)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function yX(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var s,a,i,o=l;function l(d){var f=t[0],u=t.slice(1),h=u.reduce(function(m,v){return v(m)},f());return s=vX(h),a=s.cache.get,i=s.cache.set,o=c,c(d)}function c(d){var f=a(d);if(f)return f;var u=xX(d,s);return i(d,u),u}return function(){return o(oX.apply(null,arguments))}}function Jr(e){var t=function(s){return s[e]||[]};return t.isThemeGetter=!0,t}var SM=/^\[(?:([a-z-]+):)?(.+)\]$/i,bX=/^\d+\/\d+$/,jX=new Set(["px","full","screen"]),wX=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NX=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SX=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function zi(e){return ou(e)||jX.has(e)||bX.test(e)||kS(e)}function kS(e){return Wu(e,"length",_X)}function CX(e){return Wu(e,"size",CM)}function AX(e){return Wu(e,"position",CM)}function EX(e){return Wu(e,"url",IX)}function F0(e){return Wu(e,"number",ou)}function ou(e){return!Number.isNaN(Number(e))}function PX(e){return e.endsWith("%")&&ou(e.slice(0,-1))}function Dp(e){return __(e)||Wu(e,"number",__)}function or(e){return SM.test(e)}function Op(){return!0}function yc(e){return wX.test(e)}function TX(e){return Wu(e,"",kX)}function Wu(e,t,r){var s=SM.exec(e);return s?s[1]?s[1]===t:r(s[2]):!1}function _X(e){return NX.test(e)}function CM(){return!1}function IX(e){return e.startsWith("url(")}function __(e){return Number.isInteger(Number(e))}function kX(e){return SX.test(e)}function DX(){var e=Jr("colors"),t=Jr("spacing"),r=Jr("blur"),s=Jr("brightness"),a=Jr("borderColor"),i=Jr("borderRadius"),o=Jr("borderSpacing"),l=Jr("borderWidth"),c=Jr("contrast"),d=Jr("grayscale"),f=Jr("hueRotate"),u=Jr("invert"),h=Jr("gap"),m=Jr("gradientColorStops"),v=Jr("gradientColorStopPositions"),g=Jr("inset"),p=Jr("margin"),x=Jr("opacity"),b=Jr("padding"),y=Jr("saturate"),j=Jr("scale"),E=Jr("sepia"),C=Jr("skew"),S=Jr("space"),N=Jr("translate"),_=function(){return["auto","contain","none"]},I=function(){return["auto","hidden","clip","visible","scroll"]},T=function(){return["auto",or,t]},A=function(){return[or,t]},O=function(){return["",zi]},D=function(){return["auto",ou,or]},$=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},M=function(){return["solid","dashed","dotted","double","none"]},R=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},B=function(){return["start","end","center","between","around","evenly","stretch"]},U=function(){return["","0",or]},W=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},q=function(){return[ou,F0]},L=function(){return[ou,or]};return{cacheSize:500,theme:{colors:[Op],spacing:[zi],blur:["none","",yc,or],brightness:q(),borderColor:[e],borderRadius:["none","","full",yc,or],borderSpacing:A(),borderWidth:O(),contrast:q(),grayscale:U(),hueRotate:L(),invert:U(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[PX,kS],inset:T(),margin:T(),opacity:q(),padding:A(),saturate:q(),scale:q(),sepia:U(),skew:L(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",or]}],container:["container"],columns:[{columns:[yc]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat($(),[or])}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dp]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",or]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Dp]}],"grid-cols":[{"grid-cols":[Op]}],"col-start-end":[{col:["auto",{span:["full",Dp]},or]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Op]}],"row-start-end":[{row:["auto",{span:[Dp]},or]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",or]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",or]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(B())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(B(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(B(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",or,t]}],"min-w":[{"min-w":["min","max","fit",or,zi]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[yc]},yc,or]}],h:[{h:[or,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",or,zi]}],"max-h":[{"max-h":[or,t,"min","max","fit"]}],"font-size":[{text:["base",yc,kS]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",F0]}],"font-family":[{font:[Op]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",or]}],"line-clamp":[{"line-clamp":["none",ou,F0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",or,zi]}],"list-image":[{"list-image":["none",or]}],"list-style-type":[{list:["none","disc","decimal",or]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(M(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",zi]}],"underline-offset":[{"underline-offset":["auto",or,zi]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",or]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",or]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat($(),[AX])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",CX]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},EX]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(M(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(M())}],"outline-offset":[{"outline-offset":[or,zi]}],"outline-w":[{outline:[zi]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[zi]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",yc,TX]}],"shadow-color":[{shadow:[Op]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":R()}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",yc,or]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",or]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",or]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",or]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Dp,or]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",or]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",or]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",or]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[zi,F0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var OX=yX(DX);function He(...e){return OX(pM(e))}function _e(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function ct(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e))}function Gr(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.error("Failed to save to localStorage:",r)}}function pn(e,t){try{const r=localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.error("Failed to load from localStorage:",r),t}}function LX(e){try{localStorage.removeItem(e)}catch(t){console.error("Failed to remove from localStorage:",t)}}const RX=VY,AM=w.forwardRef(({className:e,...t},r)=>n.jsx(lM,{ref:r,className:He("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));AM.displayName=lM.displayName;const $X=cj("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),EM=w.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(cM,{ref:s,className:He($X({variant:t}),e),...r}));EM.displayName=cM.displayName;const FX=w.forwardRef(({className:e,...t},r)=>n.jsx(fM,{ref:r,className:He("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));FX.displayName=fM.displayName;const PM=w.forwardRef(({className:e,...t},r)=>n.jsx(hM,{ref:r,className:He("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Bt,{className:"h-4 w-4"})}));PM.displayName=hM.displayName;const TM=w.forwardRef(({className:e,...t},r)=>n.jsx(dM,{ref:r,className:He("text-sm font-semibold",e),...t}));TM.displayName=dM.displayName;const _M=w.forwardRef(({className:e,...t},r)=>n.jsx(uM,{ref:r,className:He("text-sm opacity-90",e),...t}));_M.displayName=uM.displayName;const MX=1,BX=1e6;let aN=0;function zX(){return aN=(aN+1)%Number.MAX_SAFE_INTEGER,aN.toString()}const iN=new Map,I_=e=>{if(iN.has(e))return;const t=setTimeout(()=>{iN.delete(e),vv({type:"REMOVE_TOAST",toastId:e})},BX);iN.set(e,t)},UX=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,MX)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?I_(r):e.toasts.forEach(s=>{I_(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Ry=[];let $y={toasts:[]};function vv(e){$y=UX($y,e),Ry.forEach(t=>{t($y)})}function VX({...e}){const t=zX(),r=a=>vv({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>vv({type:"DISMISS_TOAST",toastId:t});return vv({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function At(){const[e,t]=w.useState($y);return w.useEffect(()=>(Ry.push(t),()=>{const r=Ry.indexOf(t);r>-1&&Ry.splice(r,1)}),[e]),{...e,toast:VX,dismiss:r=>vv({type:"DISMISS_TOAST",toastId:r})}}function qX(){const{toasts:e}=At();return n.jsxs(RX,{children:[e.map(function({id:t,title:r,description:s,action:a,...i}){return n.jsxs(EM,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(TM,{children:r}),s&&n.jsx(_M,{children:s})]}),a,n.jsx(PM,{})]},t)}),n.jsx(AM,{})]})}var eo=(e=>(e.ADMIN="admin",e.MANAGER="manager",e.SALES="sales",e.SERVICE="service",e.USER="user",e))(eo||{}),di=(e=>(e.TEXT="text",e.NUMBER="number",e.DATE="date",e.BOOLEAN="boolean",e.SELECT="select",e.MULTISELECT="multiselect",e))(di||{}),bs=(e=>(e.NEW="new",e.CONTACTED="contacted",e.QUALIFIED="qualified",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(bs||{}),vt=(e=>(e.RV="rv",e.MOTORHOME="motorhome",e.TRAVEL_TRAILER="travel_trailer",e.FIFTH_WHEEL="fifth_wheel",e.TOY_HAULER="toy_hauler",e.SINGLE_WIDE="single_wide",e.DOUBLE_WIDE="double_wide",e.TRIPLE_WIDE="triple_wide",e.PARK_MODEL="park_model",e.MODULAR_HOME="modular_home",e))(vt||{}),Yt=(e=>(e.AVAILABLE="available",e.RESERVED="reserved",e.SOLD="sold",e.SERVICE="service",e.DELIVERED="delivered",e))(Yt||{}),ui=(e=>(e.DRAFT="draft",e.SENT="sent",e.VIEWED="viewed",e.ACCEPTED="accepted",e.REJECTED="rejected",e.EXPIRED="expired",e))(ui||{}),lu=(e=>(e.PURCHASE="purchase",e.LEASE="lease",e.SERVICE="service",e.WARRANTY="warranty",e))(lu||{}),Gi=(e=>(e.DRAFT="draft",e.PENDING="pending",e.SIGNED="signed",e.ACTIVE="active",e.EXPIRED="expired",e.CANCELLED="cancelled",e))(Gi||{}),rn=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.URGENT="urgent",e))(rn||{}),lr=(e=>(e.OPEN="open",e.IN_PROGRESS="in_progress",e.WAITING_PARTS="waiting_parts",e.COMPLETED="completed",e.CANCELLED="cancelled",e))(lr||{}),Ut=(e=>(e.SCHEDULED="scheduled",e.IN_TRANSIT="in_transit",e.DELIVERED="delivered",e.CANCELLED="cancelled",e))(Ut||{}),pr=(e=>(e.FLAT="flat",e.PERCENTAGE="percentage",e.TIERED="tiered",e))(pr||{}),Rt=(e=>(e.PENDING="pending",e.APPROVED="approved",e.PAID="paid",e.CANCELLED="cancelled",e))(Rt||{}),Mt=(e=>(e.DRAFT="draft",e.SENT="sent",e.VIEWED="viewed",e.PAID="paid",e.OVERDUE="overdue",e.CANCELLED="cancelled",e))(Mt||{}),Al=(e=>(e.CASH="cash",e.CHECK="check",e.CREDIT_CARD="credit_card",e.BANK_TRANSFER="bank_transfer",e.FINANCING="financing",e))(Al||{}),Bc=(e=>(e.PENDING="pending",e.PROCESSING="processing",e.COMPLETED="completed",e.FAILED="failed",e.REFUNDED="refunded",e))(Bc||{}),Mr=(e=>(e.SALES="sales",e.INVENTORY="inventory",e.SERVICE="service",e.FINANCIAL="financial",e.CUSTOM="custom",e))(Mr||{});const IM=w.createContext(void 0);function Nm(){const e=w.useContext(IM);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function WX({children:e}){const[t,r]=w.useState(null),[s,a]=w.useState(!0);w.useEffect(()=>{pn("auth_token",null)&&r({id:"1",email:"admin@renterinsight.com",name:"Admin User",role:eo.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date}),a(!1)},[]);const d={user:t,login:async(f,u)=>{a(!0);try{const h={id:"1",email:f,name:"Admin User",role:eo.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date};r(h),Gr("auth_token","mock-token"),a(!1)}catch{throw new Error("Login failed")}finally{}},logout:()=>{r(null),LX("auth_token")},isLoading:s,hasPermission:(f,u)=>t?t.permissions.some(h=>(h.resource==="*"||h.resource===f)&&(h.action==="*"||h.action===u)):!1,hasRole:f=>t?t.role===f||t.role===eo.ADMIN:!1};return n.jsx(IM.Provider,{value:d,children:e})}const kM=w.createContext(void 0);function Sm(){const e=w.useContext(kM);if(e===void 0)throw new Error("useTenant must be used within a TenantProvider");return e}function HX({children:e}){const[t,r]=w.useState(null),[s,a]=w.useState([]);w.useEffect(()=>{const u={id:"tenant-1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",businessHours:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"09:00",close:"17:00",closed:!1},sunday:{open:"12:00",close:"17:00",closed:!1}},features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},customFields:[],branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},createdAt:new Date,updatedAt:new Date};r(u),a(u.customFields)},[]);const f={tenant:t,customFields:s,getCustomFields:(u,h)=>s.filter(m=>m.module===u&&(h?m.section===h:!0)),updateTenantSettings:async u=>{if(!t)return;const h={...t,settings:{...t.settings,...u},updatedAt:new Date};r(h)},addCustomField:async u=>{const h={...u,id:Math.random().toString(36).substr(2,9)};a(m=>[...m,h])},updateCustomField:async(u,h)=>{a(m=>m.map(v=>v.id===u?{...v,...h}:v))},deleteCustomField:async u=>{a(h=>h.filter(m=>m.id!==u))}};return n.jsx(kM.Provider,{value:f,children:e})}const GX={theme:"system",setTheme:()=>null},KX=w.createContext(GX);function YX({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...s}){const[a,i]=w.useState(()=>localStorage.getItem(r)||t);w.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(a)},[a]);const o={theme:a,setTheme:l=>{localStorage.setItem(r,l),i(l)}};return n.jsx(KX.Provider,{...s,value:o,children:e})}var XX=Object.defineProperty,QX=(e,t,r)=>t in e?XX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oN=(e,t,r)=>(QX(e,typeof t!="symbol"?t+"":t,r),r);let JX=class{constructor(){oN(this,"current",this.detect()),oN(this,"handoffState","pending"),oN(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ol=new JX,Ci=(e,t)=>{Ol.isServer?w.useEffect(e,t):w.useLayoutEffect(e,t)};function Ll(e){let t=w.useRef(e);return Ci(()=>{t.current=e},[e]),t}let cn=function(e){let t=Ll(e);return ce.useCallback((...r)=>t.current(...r),[t])};function fj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Hu(){let e=[],t={addEventListener(r,s,a,i){return r.addEventListener(s,a,i),t.add(()=>r.removeEventListener(s,a,i))},requestAnimationFrame(...r){let s=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let s=setTimeout(...r);return t.add(()=>clearTimeout(s))},microTask(...r){let s={current:!0};return fj(()=>{s.current&&r[0]()}),t.add(()=>{s.current=!1})},style(r,s,a){let i=r.style.getPropertyValue(s);return Object.assign(r.style,{[s]:a}),this.add(()=>{Object.assign(r.style,{[s]:i})})},group(r){let s=Hu();return r(s),this.add(()=>s.dispose())},add(r){return e.push(r),()=>{let s=e.indexOf(r);if(s>=0)for(let a of e.splice(s,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function pE(){let[e]=w.useState(Hu);return w.useEffect(()=>()=>e.dispose(),[e]),e}function ZX(){let e=typeof document>"u";return"useSyncExternalStore"in Zo?(t=>t.useSyncExternalStore)(Zo)(()=>()=>{},()=>!1,()=>!e):!1}function Cm(){let e=ZX(),[t,r]=w.useState(Ol.isHandoffComplete);return t&&Ol.isHandoffComplete===!1&&r(!1),w.useEffect(()=>{t!==!0&&r(!0)},[t]),w.useEffect(()=>Ol.handoff(),[]),e?!1:t}var k_;let Am=(k_=ce.useId)!=null?k_:function(){let e=Cm(),[t,r]=ce.useState(e?()=>Ol.nextId():null);return Ci(()=>{t===null&&r(Ol.nextId())},[t]),t!=null?""+t:void 0};function qs(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,qs),s}function DM(e){return Ol.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let DS=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var eu=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(eu||{}),OM=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(OM||{}),eQ=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(eQ||{});function tQ(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(DS)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var LM=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(LM||{});function rQ(e,t=0){var r;return e===((r=DM(e))==null?void 0:r.body)?!1:qs(t,{0(){return e.matches(DS)},1(){let s=e;for(;s!==null;){if(s.matches(DS))return!0;s=s.parentElement}return!1}})}var nQ=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(nQ||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function yu(e){e==null||e.focus({preventScroll:!0})}let sQ=["textarea","input"].join(",");function aQ(e){var t,r;return(r=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,sQ))!=null?r:!1}function iQ(e,t=r=>r){return e.slice().sort((r,s)=>{let a=t(r),i=t(s);if(a===null||i===null)return 0;let o=a.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Fy(e,t,{sorted:r=!0,relativeTo:s=null,skipElements:a=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?r?iQ(e):e:tQ(e);a.length>0&&o.length>1&&(o=o.filter(m=>!a.includes(m))),s=s??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},f=0,u=o.length,h;do{if(f>=u||f+u<=0)return 0;let m=c+f;if(t&16)m=(m+u)%u;else{if(m<0)return 3;if(m>=u)return 1}h=o[m],h==null||h.focus(d),f+=l}while(h!==i.activeElement);return t&6&&aQ(h)&&h.select(),2}function RM(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function oQ(){return/Android/gi.test(window.navigator.userAgent)}function lQ(){return RM()||oQ()}function M0(e,t,r){let s=Ll(t);w.useEffect(()=>{function a(i){s.current(i)}return document.addEventListener(e,a,r),()=>document.removeEventListener(e,a,r)},[e,r])}function $M(e,t,r){let s=Ll(t);w.useEffect(()=>{function a(i){s.current(i)}return window.addEventListener(e,a,r),()=>window.removeEventListener(e,a,r)},[e,r])}function cQ(e,t,r=!0){let s=w.useRef(!1);w.useEffect(()=>{requestAnimationFrame(()=>{s.current=r})},[r]);function a(o,l){if(!s.current||o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let d=function f(u){return typeof u=="function"?f(u()):Array.isArray(u)||u instanceof Set?u:[u]}(e);for(let f of d){if(f===null)continue;let u=f instanceof HTMLElement?f:f.current;if(u!=null&&u.contains(c)||o.composed&&o.composedPath().includes(u))return}return!rQ(c,LM.Loose)&&c.tabIndex!==-1&&o.preventDefault(),t(o,c)}let i=w.useRef(null);M0("pointerdown",o=>{var l,c;s.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),M0("mousedown",o=>{var l,c;s.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),M0("click",o=>{lQ()||i.current&&(a(o,()=>i.current),i.current=null)},!0),M0("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),$M("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function tx(...e){return w.useMemo(()=>DM(...e),[...e])}let FM=Symbol();function dQ(e,t=!0){return Object.assign(e,{[FM]:t})}function fo(...e){let t=w.useRef(e);w.useEffect(()=>{t.current=e},[e]);let r=cn(s=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(s):a.current=s)});return e.every(s=>s==null||(s==null?void 0:s[FM]))?void 0:r}function vE(e,t){let r=w.useRef([]),s=cn(e);w.useEffect(()=>{let a=[...r.current];for(let[i,o]of t.entries())if(r.current[i]!==o){let l=s(t,a);return r.current=t,l}},[s,...t])}function xb(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var yb=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(yb||{}),zc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(zc||{});function Ei({ourProps:e,theirProps:t,slot:r,defaultTag:s,features:a,visible:i=!0,name:o,mergeRefs:l}){l=l??uQ;let c=MM(t,e);if(i)return B0(c,r,s,o,l);let d=a??0;if(d&2){let{static:f=!1,...u}=c;if(f)return B0(u,r,s,o,l)}if(d&1){let{unmount:f=!0,...u}=c;return qs(f?0:1,{0(){return null},1(){return B0({...u,hidden:!0,style:{display:"none"}},r,s,o,l)}})}return B0(c,r,s,o,l)}function B0(e,t={},r,s,a){let{as:i=r,children:o,refName:l="ref",...c}=lN(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},f=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let u={};if(t){let h=!1,m=[];for(let[v,g]of Object.entries(t))typeof g=="boolean"&&(h=!0),g===!0&&m.push(v);h&&(u["data-headlessui-state"]=m.join(" "))}if(i===w.Fragment&&Object.keys(D_(c)).length>0){if(!w.isValidElement(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let h=f.props,m=typeof(h==null?void 0:h.className)=="function"?(...g)=>xb(h==null?void 0:h.className(...g),c.className):xb(h==null?void 0:h.className,c.className),v=m?{className:m}:{};return w.cloneElement(f,Object.assign({},MM(f.props,D_(lN(c,["ref"]))),u,d,{ref:a(f.ref,d.ref)},v))}return w.createElement(i,Object.assign({},lN(c,["ref"]),i!==w.Fragment&&d,i!==w.Fragment&&u),f)}function uQ(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function MM(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let s of e)for(let a in s)a.startsWith("on")&&typeof s[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(s[a])):t[a]=s[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(r).map(s=>[s,void 0])));for(let s in r)Object.assign(t,{[s](a,...i){let o=r[s];for(let l of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;l(a,...i)}}});return t}function Xa(e){var t;return Object.assign(w.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function D_(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function lN(e,t=[]){let r=Object.assign({},e);for(let s of t)s in r&&delete r[s];return r}let fQ="div";var bb=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(bb||{});function hQ(e,t){var r;let{features:s=1,...a}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Ei({ourProps:i,theirProps:a,slot:{},defaultTag:fQ,name:"Hidden"})}let OS=Xa(hQ),gE=w.createContext(null);gE.displayName="OpenClosedContext";var $a=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))($a||{});function xE(){return w.useContext(gE)}function mQ({value:e,children:t}){return ce.createElement(gE.Provider,{value:e},t)}function pQ(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Dc=[];pQ(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Dc[0]!==t.target&&(Dc.unshift(t.target),Dc=Dc.filter(r=>r!=null&&r.isConnected),Dc.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function vQ(e){let t=e.parentElement,r=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(r=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&gQ(r)?!1:s}function gQ(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var BM=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(BM||{});function zM(e,t,r,s){let a=Ll(r);w.useEffect(()=>{e=e??window;function i(o){a.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function rx(){let e=w.useRef(!1);return Ci(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function UM(e){let t=cn(e),r=w.useRef(!1);w.useEffect(()=>(r.current=!1,()=>{r.current=!0,fj(()=>{r.current&&t()})}),[t])}var sv=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(sv||{});function xQ(){let e=w.useRef(0);return $M("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function VM(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)r.current instanceof HTMLElement&&t.add(r.current);return t}let yQ="div";var qM=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(qM||{});function bQ(e,t){let r=w.useRef(null),s=fo(r,t),{initialFocus:a,containers:i,features:o=30,...l}=e;Cm()||(o=1);let c=tx(r);NQ({ownerDocument:c},!!(o&16));let d=SQ({ownerDocument:c,container:r,initialFocus:a},!!(o&2));CQ({ownerDocument:c,container:r,containers:i,previousActiveElement:d},!!(o&8));let f=xQ(),u=cn(g=>{let p=r.current;p&&(x=>x())(()=>{qs(f.current,{[sv.Forwards]:()=>{Fy(p,eu.First,{skipElements:[g.relatedTarget]})},[sv.Backwards]:()=>{Fy(p,eu.Last,{skipElements:[g.relatedTarget]})}})})}),h=pE(),m=w.useRef(!1),v={ref:s,onKeyDown(g){g.key=="Tab"&&(m.current=!0,h.requestAnimationFrame(()=>{m.current=!1}))},onBlur(g){let p=VM(i);r.current instanceof HTMLElement&&p.add(r.current);let x=g.relatedTarget;x instanceof HTMLElement&&x.dataset.headlessuiFocusGuard!=="true"&&(WM(p,x)||(m.current?Fy(r.current,qs(f.current,{[sv.Forwards]:()=>eu.Next,[sv.Backwards]:()=>eu.Previous})|eu.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&yu(g.target)))}};return ce.createElement(ce.Fragment,null,!!(o&4)&&ce.createElement(OS,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:bb.Focusable}),Ei({ourProps:v,theirProps:l,defaultTag:yQ,name:"FocusTrap"}),!!(o&4)&&ce.createElement(OS,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:bb.Focusable}))}let jQ=Xa(bQ),Lp=Object.assign(jQ,{features:qM});function wQ(e=!0){let t=w.useRef(Dc.slice());return vE(([r],[s])=>{s===!0&&r===!1&&fj(()=>{t.current.splice(0)}),s===!1&&r===!0&&(t.current=Dc.slice())},[e,Dc,t]),cn(()=>{var r;return(r=t.current.find(s=>s!=null&&s.isConnected))!=null?r:null})}function NQ({ownerDocument:e},t){let r=wQ(t);vE(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&yu(r())},[t]),UM(()=>{t&&yu(r())})}function SQ({ownerDocument:e,container:t,initialFocus:r},s){let a=w.useRef(null),i=rx();return vE(()=>{if(!s)return;let o=t.current;o&&fj(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===l){a.current=l;return}}else if(o.contains(l)){a.current=l;return}r!=null&&r.current?yu(r.current):Fy(o,eu.First)===OM.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[s]),a}function CQ({ownerDocument:e,container:t,containers:r,previousActiveElement:s},a){let i=rx();zM(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!i.current)return;let l=VM(r);t.current instanceof HTMLElement&&l.add(t.current);let c=s.current;if(!c)return;let d=o.target;d&&d instanceof HTMLElement?WM(l,d)?(s.current=d,yu(d)):(o.preventDefault(),o.stopPropagation(),yu(c)):yu(s.current)},!0)}function WM(e,t){for(let r of e)if(r.contains(t))return!0;return!1}let HM=w.createContext(!1);function AQ(){return w.useContext(HM)}function LS(e){return ce.createElement(HM.Provider,{value:e.force},e.children)}function EQ(e){let t=AQ(),r=w.useContext(GM),s=tx(e),[a,i]=w.useState(()=>{if(!t&&r!==null||Ol.isServer)return null;let o=s==null?void 0:s.getElementById("headlessui-portal-root");if(o)return o;if(s===null)return null;let l=s.createElement("div");return l.setAttribute("id","headlessui-portal-root"),s.body.appendChild(l)});return w.useEffect(()=>{a!==null&&(s!=null&&s.body.contains(a)||s==null||s.body.appendChild(a))},[a,s]),w.useEffect(()=>{t||r!==null&&i(r.current)},[r,i,t]),a}let PQ=w.Fragment;function TQ(e,t){let r=e,s=w.useRef(null),a=fo(dQ(f=>{s.current=f}),t),i=tx(s),o=EQ(s),[l]=w.useState(()=>{var f;return Ol.isServer?null:(f=i==null?void 0:i.createElement("div"))!=null?f:null}),c=w.useContext(RS),d=Cm();return Ci(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),Ci(()=>{if(l&&c)return c.register(l)},[c,l]),UM(()=>{var f;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((f=o.parentElement)==null||f.removeChild(o)))}),d?!o||!l?null:rl.createPortal(Ei({ourProps:{ref:a},theirProps:r,defaultTag:PQ,name:"Portal"}),l):null}let _Q=w.Fragment,GM=w.createContext(null);function IQ(e,t){let{target:r,...s}=e,a={ref:fo(t)};return ce.createElement(GM.Provider,{value:r},Ei({ourProps:a,theirProps:s,defaultTag:_Q,name:"Popover.Group"}))}let RS=w.createContext(null);function kQ(){let e=w.useContext(RS),t=w.useRef([]),r=cn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=cn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),a=w.useMemo(()=>({register:r,unregister:s,portals:t}),[r,s,t]);return[t,w.useMemo(()=>function({children:i}){return ce.createElement(RS.Provider,{value:a},i)},[a])]}let DQ=Xa(TQ),OQ=Xa(IQ),$S=Object.assign(DQ,{Group:OQ});function LQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const RQ=typeof Object.is=="function"?Object.is:LQ,{useState:$Q,useEffect:FQ,useLayoutEffect:MQ,useDebugValue:BQ}=Zo;function zQ(e,t,r){const s=t(),[{inst:a},i]=$Q({inst:{value:s,getSnapshot:t}});return MQ(()=>{a.value=s,a.getSnapshot=t,cN(a)&&i({inst:a})},[e,s,t]),FQ(()=>(cN(a)&&i({inst:a}),e(()=>{cN(a)&&i({inst:a})})),[e]),BQ(s),s}function cN(e){const t=e.getSnapshot,r=e.value;try{const s=t();return!RQ(r,s)}catch{return!0}}function UQ(e,t,r){return t()}const VQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qQ=!VQ,WQ=qQ?UQ:zQ,HQ="useSyncExternalStore"in Zo?(e=>e.useSyncExternalStore)(Zo):WQ;function GQ(e){return HQ(e.subscribe,e.getSnapshot,e.getSnapshot)}function KQ(e,t){let r=e(),s=new Set;return{getSnapshot(){return r},subscribe(a){return s.add(a),()=>s.delete(a)},dispatch(a,...i){let o=t[a].call(r,...i);o&&(r=o,s.forEach(l=>l()))}}}function YQ(){let e;return{before({doc:t}){var r;let s=t.documentElement;e=((r=t.defaultView)!=null?r:window).innerWidth-s.clientWidth},after({doc:t,d:r}){let s=t.documentElement,a=s.clientWidth-s.offsetWidth,i=e-a;r.style(s,"paddingRight",`${i}px`)}}}function XQ(){return RM()?{before({doc:e,d:t,meta:r}){function s(a){return r.containers.flatMap(i=>i()).some(i=>i.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Hu();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),f=e.querySelector(d);f&&!s(f)&&(o=f)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function QQ(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function JQ(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let cu=KQ(()=>new Map,{PUSH(e,t){var r;let s=(r=this.get(e))!=null?r:{doc:e,count:0,d:Hu(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let s={doc:e,d:t,meta:JQ(r)},a=[XQ(),YQ(),QQ()];a.forEach(({before:i})=>i==null?void 0:i(s)),a.forEach(({after:i})=>i==null?void 0:i(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});cu.subscribe(()=>{let e=cu.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let s=t.get(r.doc)==="hidden",a=r.count!==0;(a&&!s||!a&&s)&&cu.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&cu.dispatch("TEARDOWN",r)}});function ZQ(e,t,r){let s=GQ(cu),a=e?s.get(e):void 0,i=a?a.count>0:!1;return Ci(()=>{if(!(!e||!t))return cu.dispatch("PUSH",e,r),()=>cu.dispatch("POP",e,r)},[t,e]),i}let dN=new Map,Rp=new Map;function O_(e,t=!0){Ci(()=>{var r;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function a(){var o;if(!s)return;let l=(o=Rp.get(s))!=null?o:1;if(l===1?Rp.delete(s):Rp.set(s,l-1),l!==1)return;let c=dN.get(s);c&&(c["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",c["aria-hidden"]),s.inert=c.inert,dN.delete(s))}let i=(r=Rp.get(s))!=null?r:0;return Rp.set(s,i+1),i!==0||(dN.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),a},[e,t])}function eJ({defaultContainers:e=[],portals:t,mainTreeNodeRef:r}={}){var s;let a=w.useRef((s=r==null?void 0:r.current)!=null?s:null),i=tx(a),o=cn(()=>{var l,c,d;let f=[];for(let u of e)u!==null&&(u instanceof HTMLElement?f.push(u):"current"in u&&u.current instanceof HTMLElement&&f.push(u.current));if(t!=null&&t.current)for(let u of t.current)f.push(u);for(let u of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(u.contains(a.current)||u.contains((d=(c=a.current)==null?void 0:c.getRootNode())==null?void 0:d.host)||f.some(h=>u.contains(h))||f.push(u));return f});return{resolveContainers:o,contains:cn(l=>o().some(c=>c.contains(l))),mainTreeNodeRef:a,MainTreeNode:w.useMemo(()=>function(){return r!=null?null:ce.createElement(OS,{features:bb.Hidden,ref:a})},[a,r])}}let yE=w.createContext(()=>{});yE.displayName="StackContext";var FS=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(FS||{});function tJ(){return w.useContext(yE)}function rJ({children:e,onUpdate:t,type:r,element:s,enabled:a}){let i=tJ(),o=cn((...l)=>{t==null||t(...l),i(...l)});return Ci(()=>{let l=a===void 0||a===!0;return l&&o(0,r,s),()=>{l&&o(1,r,s)}},[o,r,s,a]),ce.createElement(yE.Provider,{value:o},e)}let KM=w.createContext(null);function YM(){let e=w.useContext(KM);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,YM),t}return e}function nJ(){let[e,t]=w.useState([]);return[e.length>0?e.join(" "):void 0,w.useMemo(()=>function(r){let s=cn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),a=w.useMemo(()=>({register:s,slot:r.slot,name:r.name,props:r.props}),[s,r.slot,r.name,r.props]);return ce.createElement(KM.Provider,{value:a},r.children)},[t])]}let sJ="p";function aJ(e,t){let r=Am(),{id:s=`headlessui-description-${r}`,...a}=e,i=YM(),o=fo(t);Ci(()=>i.register(s),[s,i.register]);let l={ref:o,...i.props,id:s};return Ei({ourProps:l,theirProps:a,slot:i.slot||{},defaultTag:sJ,name:i.name||"Description"})}let iJ=Xa(aJ),oJ=Object.assign(iJ,{});var lJ=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(lJ||{}),cJ=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(cJ||{});let dJ={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},jb=w.createContext(null);jb.displayName="DialogContext";function nx(e){let t=w.useContext(jb);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,nx),r}return t}function uJ(e,t,r=()=>[document.body]){ZQ(e,t,s=>{var a;return{containers:[...(a=s.containers)!=null?a:[],r]}})}function fJ(e,t){return qs(t.type,dJ,e,t)}let hJ="div",mJ=yb.RenderStrategy|yb.Static;function pJ(e,t){let r=Am(),{id:s=`headlessui-dialog-${r}`,open:a,onClose:i,initialFocus:o,role:l="dialog",__demoMode:c=!1,...d}=e,[f,u]=w.useState(0),h=w.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(h.current||(h.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=xE();a===void 0&&m!==null&&(a=(m&$a.Open)===$a.Open);let v=w.useRef(null),g=fo(v,t),p=tx(v),x=e.hasOwnProperty("open")||m!==null,b=e.hasOwnProperty("onClose");if(!x&&!b)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!x)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!b)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let y=a?0:1,[j,E]=w.useReducer(fJ,{titleId:null,descriptionId:null,panelRef:w.createRef()}),C=cn(()=>i(!1)),S=cn(ve=>E({type:0,id:ve})),N=Cm()?c?!1:y===0:!1,_=f>1,I=w.useContext(jb)!==null,[T,A]=kQ(),O={get current(){var ve;return(ve=j.panelRef.current)!=null?ve:v.current}},{resolveContainers:D,mainTreeNodeRef:$,MainTreeNode:M}=eJ({portals:T,defaultContainers:[O]}),R=_?"parent":"leaf",B=m!==null?(m&$a.Closing)===$a.Closing:!1,U=(()=>I||B?!1:N)(),W=w.useCallback(()=>{var ve,ge;return(ge=Array.from((ve=p==null?void 0:p.querySelectorAll("body > *"))!=null?ve:[]).find(De=>De.id==="headlessui-portal-root"?!1:De.contains($.current)&&De instanceof HTMLElement))!=null?ge:null},[$]);O_(W,U);let q=(()=>_?!0:N)(),L=w.useCallback(()=>{var ve,ge;return(ge=Array.from((ve=p==null?void 0:p.querySelectorAll("[data-headlessui-portal]"))!=null?ve:[]).find(De=>De.contains($.current)&&De instanceof HTMLElement))!=null?ge:null},[$]);O_(L,q);let V=(()=>!(!N||_))();cQ(D,ve=>{ve.preventDefault(),C()},V);let G=(()=>!(_||y!==0))();zM(p==null?void 0:p.defaultView,"keydown",ve=>{G&&(ve.defaultPrevented||ve.key===BM.Escape&&(ve.preventDefault(),ve.stopPropagation(),C()))});let Z=(()=>!(B||y!==0||I))();uJ(p,Z,D),w.useEffect(()=>{if(y!==0||!v.current)return;let ve=new ResizeObserver(ge=>{for(let De of ge){let xe=De.target.getBoundingClientRect();xe.x===0&&xe.y===0&&xe.width===0&&xe.height===0&&C()}});return ve.observe(v.current),()=>ve.disconnect()},[y,v,C]);let[te,he]=nJ(),me=w.useMemo(()=>[{dialogState:y,close:C,setTitleId:S},j],[y,j,C,S]),oe=w.useMemo(()=>({open:y===0}),[y]),we={ref:g,id:s,role:l,"aria-modal":y===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":te};return ce.createElement(rJ,{type:"Dialog",enabled:y===0,element:v,onUpdate:cn((ve,ge)=>{ge==="Dialog"&&qs(ve,{[FS.Add]:()=>u(De=>De+1),[FS.Remove]:()=>u(De=>De-1)})})},ce.createElement(LS,{force:!0},ce.createElement($S,null,ce.createElement(jb.Provider,{value:me},ce.createElement($S.Group,{target:v},ce.createElement(LS,{force:!1},ce.createElement(he,{slot:oe,name:"Dialog.Description"},ce.createElement(Lp,{initialFocus:o,containers:D,features:N?qs(R,{parent:Lp.features.RestoreFocus,leaf:Lp.features.All&~Lp.features.FocusLock}):Lp.features.None},ce.createElement(A,null,Ei({ourProps:we,theirProps:d,slot:oe,defaultTag:hJ,features:mJ,visible:y===0,name:"Dialog"}))))))))),ce.createElement(M,null))}let vJ="div";function gJ(e,t){let r=Am(),{id:s=`headlessui-dialog-overlay-${r}`,...a}=e,[{dialogState:i,close:o}]=nx("Dialog.Overlay"),l=fo(t),c=cn(f=>{if(f.target===f.currentTarget){if(vQ(f.currentTarget))return f.preventDefault();f.preventDefault(),f.stopPropagation(),o()}}),d=w.useMemo(()=>({open:i===0}),[i]);return Ei({ourProps:{ref:l,id:s,"aria-hidden":!0,onClick:c},theirProps:a,slot:d,defaultTag:vJ,name:"Dialog.Overlay"})}let xJ="div";function yJ(e,t){let r=Am(),{id:s=`headlessui-dialog-backdrop-${r}`,...a}=e,[{dialogState:i},o]=nx("Dialog.Backdrop"),l=fo(t);w.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let c=w.useMemo(()=>({open:i===0}),[i]);return ce.createElement(LS,{force:!0},ce.createElement($S,null,Ei({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:a,slot:c,defaultTag:xJ,name:"Dialog.Backdrop"})))}let bJ="div";function jJ(e,t){let r=Am(),{id:s=`headlessui-dialog-panel-${r}`,...a}=e,[{dialogState:i},o]=nx("Dialog.Panel"),l=fo(t,o.panelRef),c=w.useMemo(()=>({open:i===0}),[i]),d=cn(f=>{f.stopPropagation()});return Ei({ourProps:{ref:l,id:s,onClick:d},theirProps:a,slot:c,defaultTag:bJ,name:"Dialog.Panel"})}let wJ="h2";function NJ(e,t){let r=Am(),{id:s=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:i,setTitleId:o}]=nx("Dialog.Title"),l=fo(t);w.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=w.useMemo(()=>({open:i===0}),[i]);return Ei({ourProps:{ref:l,id:s},theirProps:a,slot:c,defaultTag:wJ,name:"Dialog.Title"})}let SJ=Xa(pJ),CJ=Xa(yJ),AJ=Xa(jJ),EJ=Xa(gJ),PJ=Xa(NJ),L_=Object.assign(SJ,{Backdrop:CJ,Panel:AJ,Overlay:EJ,Title:PJ,Description:oJ});function TJ(e=0){let[t,r]=w.useState(e),s=rx(),a=w.useCallback(c=>{s.current&&r(d=>d|c)},[t,s]),i=w.useCallback(c=>!!(t&c),[t]),o=w.useCallback(c=>{s.current&&r(d=>d&~c)},[r,s]),l=w.useCallback(c=>{s.current&&r(d=>d^c)},[r]);return{flags:t,addFlag:a,hasFlag:i,removeFlag:o,toggleFlag:l}}function _J(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function uN(e,...t){e&&t.length>0&&e.classList.add(...t)}function fN(e,...t){e&&t.length>0&&e.classList.remove(...t)}function IJ(e,t){let r=Hu();if(!e)return r.dispose;let{transitionDuration:s,transitionDelay:a}=getComputedStyle(e),[i,o]=[s,a].map(c=>{let[d=0]=c.split(",").filter(Boolean).map(f=>f.includes("ms")?parseFloat(f):parseFloat(f)*1e3).sort((f,u)=>u-f);return d}),l=i+o;if(l!==0){r.group(d=>{d.setTimeout(()=>{t(),d.dispose()},l),d.addEventListener(e,"transitionrun",f=>{f.target===f.currentTarget&&d.dispose()})});let c=r.addEventListener(e,"transitionend",d=>{d.target===d.currentTarget&&(t(),c())})}else t();return r.add(()=>t()),r.dispose}function kJ(e,t,r,s){let a=r?"enter":"leave",i=Hu(),o=s!==void 0?_J(s):()=>{};a==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=qs(a,{enter:()=>t.enter,leave:()=>t.leave}),c=qs(a,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),d=qs(a,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return fN(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),uN(e,...t.base,...l,...d),i.nextFrame(()=>{fN(e,...t.base,...l,...d),uN(e,...t.base,...l,...c),IJ(e,()=>(fN(e,...t.base,...l),uN(e,...t.base,...t.entered),o()))}),i.dispose}function DJ({immediate:e,container:t,direction:r,classes:s,onStart:a,onStop:i}){let o=rx(),l=pE(),c=Ll(r);Ci(()=>{e&&(c.current="enter")},[e]),Ci(()=>{let d=Hu();l.add(d.dispose);let f=t.current;if(f&&c.current!=="idle"&&o.current)return d.dispose(),a.current(c.current),d.add(kJ(f,s.current,c.current==="enter",()=>{d.dispose(),i.current(c.current)})),d.dispose},[r])}function bc(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let hj=w.createContext(null);hj.displayName="TransitionContext";var OJ=(e=>(e.Visible="visible",e.Hidden="hidden",e))(OJ||{});function LJ(){let e=w.useContext(hj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function RJ(){let e=w.useContext(mj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let mj=w.createContext(null);mj.displayName="NestingContext";function pj(e){return"children"in e?pj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function XM(e,t){let r=Ll(e),s=w.useRef([]),a=rx(),i=pE(),o=cn((m,v=zc.Hidden)=>{let g=s.current.findIndex(({el:p})=>p===m);g!==-1&&(qs(v,{[zc.Unmount](){s.current.splice(g,1)},[zc.Hidden](){s.current[g].state="hidden"}}),i.microTask(()=>{var p;!pj(s)&&a.current&&((p=r.current)==null||p.call(r))}))}),l=cn(m=>{let v=s.current.find(({el:g})=>g===m);return v?v.state!=="visible"&&(v.state="visible"):s.current.push({el:m,state:"visible"}),()=>o(m,zc.Unmount)}),c=w.useRef([]),d=w.useRef(Promise.resolve()),f=w.useRef({enter:[],leave:[],idle:[]}),u=cn((m,v,g)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([p])=>p!==m)),t==null||t.chains.current[v].push([m,new Promise(p=>{c.current.push(p)})]),t==null||t.chains.current[v].push([m,new Promise(p=>{Promise.all(f.current[v].map(([x,b])=>b)).then(()=>p())})]),v==="enter"?d.current=d.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(v)):g(v)}),h=cn((m,v,g)=>{Promise.all(f.current[v].splice(0).map(([p,x])=>x)).then(()=>{var p;(p=c.current.shift())==null||p()}).then(()=>g(v))});return w.useMemo(()=>({children:s,register:l,unregister:o,onStart:u,onStop:h,wait:d,chains:f}),[l,o,s,u,h,f,d])}function $J(){}let FJ=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function R_(e){var t;let r={};for(let s of FJ)r[s]=(t=e[s])!=null?t:$J;return r}function MJ(e){let t=w.useRef(R_(e));return w.useEffect(()=>{t.current=R_(e)},[e]),t}let BJ="div",QM=yb.RenderStrategy;function zJ(e,t){var r,s;let{beforeEnter:a,afterEnter:i,beforeLeave:o,afterLeave:l,enter:c,enterFrom:d,enterTo:f,entered:u,leave:h,leaveFrom:m,leaveTo:v,...g}=e,p=w.useRef(null),x=fo(p,t),b=(r=g.unmount)==null||r?zc.Unmount:zc.Hidden,{show:y,appear:j,initial:E}=LJ(),[C,S]=w.useState(y?"visible":"hidden"),N=RJ(),{register:_,unregister:I}=N;w.useEffect(()=>_(p),[_,p]),w.useEffect(()=>{if(b===zc.Hidden&&p.current){if(y&&C!=="visible"){S("visible");return}return qs(C,{hidden:()=>I(p),visible:()=>_(p)})}},[C,p,_,I,y,b]);let T=Ll({base:bc(g.className),enter:bc(c),enterFrom:bc(d),enterTo:bc(f),entered:bc(u),leave:bc(h),leaveFrom:bc(m),leaveTo:bc(v)}),A=MJ({beforeEnter:a,afterEnter:i,beforeLeave:o,afterLeave:l}),O=Cm();w.useEffect(()=>{if(O&&C==="visible"&&p.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[p,C,O]);let D=E&&!j,$=j&&y&&E,M=(()=>!O||D?"idle":y?"enter":"leave")(),R=TJ(0),B=cn(G=>qs(G,{enter:()=>{R.addFlag($a.Opening),A.current.beforeEnter()},leave:()=>{R.addFlag($a.Closing),A.current.beforeLeave()},idle:()=>{}})),U=cn(G=>qs(G,{enter:()=>{R.removeFlag($a.Opening),A.current.afterEnter()},leave:()=>{R.removeFlag($a.Closing),A.current.afterLeave()},idle:()=>{}})),W=XM(()=>{S("hidden"),I(p)},N),q=w.useRef(!1);DJ({immediate:$,container:p,classes:T,direction:M,onStart:Ll(G=>{q.current=!0,W.onStart(p,G,B)}),onStop:Ll(G=>{q.current=!1,W.onStop(p,G,U),G==="leave"&&!pj(W)&&(S("hidden"),I(p))})});let L=g,V={ref:x};return $?L={...L,className:xb(g.className,...T.current.enter,...T.current.enterFrom)}:q.current&&(L.className=xb(g.className,(s=p.current)==null?void 0:s.className),L.className===""&&delete L.className),ce.createElement(mj.Provider,{value:W},ce.createElement(mQ,{value:qs(C,{visible:$a.Open,hidden:$a.Closed})|R.flags},Ei({ourProps:V,theirProps:L,defaultTag:BJ,features:QM,visible:C==="visible",name:"Transition.Child"})))}function UJ(e,t){let{show:r,appear:s=!1,unmount:a=!0,...i}=e,o=w.useRef(null),l=fo(o,t);Cm();let c=xE();if(r===void 0&&c!==null&&(r=(c&$a.Open)===$a.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,f]=w.useState(r?"visible":"hidden"),u=XM(()=>{f("hidden")}),[h,m]=w.useState(!0),v=w.useRef([r]);Ci(()=>{h!==!1&&v.current[v.current.length-1]!==r&&(v.current.push(r),m(!1))},[v,r]);let g=w.useMemo(()=>({show:r,appear:s,initial:h}),[r,s,h]);w.useEffect(()=>{if(r)f("visible");else if(!pj(u))f("hidden");else{let y=o.current;if(!y)return;let j=y.getBoundingClientRect();j.x===0&&j.y===0&&j.width===0&&j.height===0&&f("hidden")}},[r,u]);let p={unmount:a},x=cn(()=>{var y;h&&m(!1),(y=e.beforeEnter)==null||y.call(e)}),b=cn(()=>{var y;h&&m(!1),(y=e.beforeLeave)==null||y.call(e)});return ce.createElement(mj.Provider,{value:u},ce.createElement(hj.Provider,{value:g},Ei({ourProps:{...p,as:w.Fragment,children:ce.createElement(JM,{ref:l,...p,...i,beforeEnter:x,beforeLeave:b})},theirProps:{},defaultTag:w.Fragment,features:QM,visible:d==="visible",name:"Transition"})))}function VJ(e,t){let r=w.useContext(hj)!==null,s=xE()!==null;return ce.createElement(ce.Fragment,null,!r&&s?ce.createElement(MS,{ref:t,...e}):ce.createElement(JM,{ref:t,...e}))}let MS=Xa(UJ),JM=Xa(zJ),qJ=Xa(VJ),z0=Object.assign(MS,{Child:qJ,Root:MS});const $_=[{name:"Dashboard",href:"/",icon:QY},{name:"CRM & Prospecting",href:"/crm",icon:Ln},{name:"Inventory Management",href:"/inventory",icon:Ws},{name:"Sales Deals",href:"/deals",icon:Na},{name:"Finance",href:"/finance",icon:It},{name:"Quote Builder",href:"/quotes",icon:cs},{name:"Agreement Vault",href:"/agreements",icon:Ly},{name:"PDI Checklist",href:"/pdi",icon:Du},{name:"Service Operations",href:"/service",icon:iu},{name:"Delivery Tracker",href:"/delivery",icon:va},{name:"Commission Engine",href:"/commissions",icon:It},{name:"Client Portal",href:"/portal",icon:ex},{name:"Invoice & Payments",href:"/invoices",icon:Js},{name:"Company Settings",href:"/settings",icon:tg},{name:"Platform Admin",href:"/admin",icon:uj},{name:"Reporting Suite",href:"/reports",icon:zn}];function WJ({sidebarOpen:e,setSidebarOpen:t}){const r=jm();return n.jsxs(n.Fragment,{children:[n.jsx(z0.Root,{show:e,as:w.Fragment,children:n.jsxs(L_,{as:"div",className:"relative z-50 lg:hidden",onClose:t,children:[n.jsx(z0.Child,{as:w.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/80"})}),n.jsx("div",{className:"fixed inset-0 flex",children:n.jsx(z0.Child,{as:w.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:n.jsxs(L_.Panel,{className:"relative mr-16 flex w-full max-w-xs flex-1",children:[n.jsx(z0.Child,{as:w.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"absolute left-full top-0 flex w-16 justify-center pt-5",children:n.jsxs("button",{type:"button",className:"-m-2.5 p-2.5",onClick:()=>t(!1),children:[n.jsx("span",{className:"sr-only",children:"Close sidebar"}),n.jsx(Bt,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),n.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-border bg-card px-6 pb-4",children:[n.jsx("div",{className:"flex h-16 shrink-0 items-center",children:n.jsx("h1",{className:"text-xl font-bold text-primary",children:"Renter Insight"})}),n.jsx("nav",{className:"flex flex-1 flex-col",children:n.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:n.jsx("li",{children:n.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:$_.map(s=>{const a=r.pathname===s.href||s.href!=="/"&&r.pathname.startsWith(s.href);return n.jsx("li",{children:n.jsxs(g_,{to:s.href,className:He("group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),onClick:()=>t(!1),children:[n.jsx(s.icon,{className:He("h-6 w-6 shrink-0",a?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"),"aria-hidden":"true"}),s.name]})},s.name)})})})})})]})]})})})]})}),n.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-64 lg:flex-col",children:n.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-border bg-card px-6 pb-4",children:[n.jsx("div",{className:"flex h-16 shrink-0 items-center",children:n.jsx("h1",{className:"text-xl font-bold text-primary",children:"Renter Insight"})}),n.jsx("nav",{className:"flex flex-1 flex-col",children:n.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:n.jsx("li",{children:n.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:$_.map(s=>{const a=r.pathname===s.href||s.href!=="/"&&r.pathname.startsWith(s.href);return n.jsx("li",{children:n.jsxs(g_,{to:s.href,className:He("group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[n.jsx(s.icon,{className:He("h-6 w-6 shrink-0",a?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"),"aria-hidden":"true"}),s.name]})},s.name)})})})})})]})})]})}const HJ=cj("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=w.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},i)=>{const o=s?eY:"button";return n.jsx(o,{className:He(HJ({variant:t,size:r,className:e})),ref:i,...a})});J.displayName="Button";function GJ({onMenuButtonClick:e}){const{user:t,logout:r}=Nm(),{tenant:s}=Sm();return n.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-border bg-background px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[n.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-muted-foreground lg:hidden",onClick:e,children:[n.jsx("span",{className:"sr-only",children:"Open sidebar"}),n.jsx(rX,{className:"h-6 w-6","aria-hidden":"true"})]}),n.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[n.jsx("div",{className:"flex flex-1 items-center",children:n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:(s==null?void 0:s.name)||"Renter Insight CRM/DMS"})}),n.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[n.jsxs("div",{className:"flex items-center gap-x-2",children:[n.jsx(fs,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:t==null?void 0:t.name})]}),n.jsxs(J,{variant:"ghost",size:"sm",onClick:r,className:"flex items-center gap-x-2",children:[n.jsx(tX,{className:"h-4 w-4"}),"Logout"]})]})]})]})}function KJ({children:e}){const[t,r]=w.useState(!1);return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(WJ,{sidebarOpen:t,setSidebarOpen:r}),n.jsxs("div",{className:"lg:pl-64",children:[n.jsx(GJ,{onMenuButtonClick:()=>r(!0)}),n.jsx("main",{className:"py-6",children:n.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e})})]})]})}const ue=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:He("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ue.displayName="Card";const be=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:He("flex flex-col space-y-1.5 p-6",e),...t}));be.displayName="CardHeader";const je=w.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:He("text-2xl font-semibold leading-none tracking-tight",e),...t}));je.displayName="CardTitle";const Fe=w.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:He("text-sm text-muted-foreground",e),...t}));Fe.displayName="CardDescription";const fe=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:He("p-6 pt-0",e),...t}));fe.displayName="CardContent";const YJ=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:He("flex items-center p-6 pt-0",e),...t}));YJ.displayName="CardFooter";const Pe=w.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:He("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));Pe.displayName="Input";const tr=w.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:He("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));tr.displayName="Textarea";function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},st.apply(null,arguments)}function F_(e,[t,r]){return Math.min(r,Math.max(t,e))}function Zs(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function XJ(e,t=[]){let r=[];function s(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];function d(u){const{scope:h,children:m,...v}=u,g=(h==null?void 0:h[e][c])||l,p=w.useMemo(()=>v,Object.values(v));return w.createElement(g.Provider,{value:p},m)}function f(u,h){const m=(h==null?void 0:h[e][c])||l,v=w.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,QJ(a,...t)]}function QJ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function JJ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ZM(...e){return t=>e.forEach(r=>JJ(r,t))}function M_(...e){return w.useCallback(ZM(...e),e)}const BS=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(eZ);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(zS,st({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(zS,st({},s,{ref:t}),r)});BS.displayName="Slot";const zS=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...tZ(s,r.props),ref:t?ZM(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});zS.displayName="SlotClone";const ZJ=({children:e})=>w.createElement(w.Fragment,null,e);function eZ(e){return w.isValidElement(e)&&e.type===ZJ}function tZ(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function rZ(e){const t=e+"CollectionProvider",[r,s]=XJ(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:g}=m,p=ce.useRef(null),x=ce.useRef(new Map).current;return ce.createElement(a,{scope:v,itemMap:x,collectionRef:p},g)},l=e+"CollectionSlot",c=ce.forwardRef((m,v)=>{const{scope:g,children:p}=m,x=i(l,g),b=M_(v,x.collectionRef);return ce.createElement(BS,{ref:b},p)}),d=e+"CollectionItemSlot",f="data-radix-collection-item",u=ce.forwardRef((m,v)=>{const{scope:g,children:p,...x}=m,b=ce.useRef(null),y=M_(v,b),j=i(d,g);return ce.useEffect(()=>(j.itemMap.set(b,{ref:b,...x}),()=>void j.itemMap.delete(b))),ce.createElement(BS,{[f]:"",ref:y},p)});function h(m){const v=i(e+"CollectionConsumer",m);return ce.useCallback(()=>{const p=v.collectionRef.current;if(!p)return[];const x=Array.from(p.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((j,E)=>x.indexOf(j.ref.current)-x.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:u},h,s]}function nZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function e7(...e){return t=>e.forEach(r=>nZ(r,t))}function nl(...e){return w.useCallback(e7(...e),e)}function sZ(e,t=[]){let r=[];function s(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];function d(u){const{scope:h,children:m,...v}=u,g=(h==null?void 0:h[e][c])||l,p=w.useMemo(()=>v,Object.values(v));return w.createElement(g.Provider,{value:p},m)}function f(u,h){const m=(h==null?void 0:h[e][c])||l,v=w.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,aZ(a,...t)]}function aZ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}const iZ=w.createContext(void 0);function oZ(e){const t=w.useContext(iZ);return e||t||"ltr"}function hN(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function lZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function t7(...e){return t=>e.forEach(r=>lZ(r,t))}function cZ(...e){return w.useCallback(t7(...e),e)}const r7=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(uZ);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(US,st({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(US,st({},s,{ref:t}),r)});r7.displayName="Slot";const US=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...fZ(s,r.props),ref:t?t7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});US.displayName="SlotClone";const dZ=({children:e})=>w.createElement(w.Fragment,null,e);function uZ(e){return w.isValidElement(e)&&e.type===dZ}function fZ(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const hZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],mZ=hZ.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?r7:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,st({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function pZ(e,t){e&&rl.flushSync(()=>e.dispatchEvent(t))}function Gl(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var s;return(s=t.current)===null||s===void 0?void 0:s.call(t,...r)},[])}function vZ(e,t=globalThis==null?void 0:globalThis.document){const r=Gl(e);w.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s),()=>t.removeEventListener("keydown",s)},[r,t])}const VS="dismissableLayer.update",gZ="dismissableLayer.pointerDownOutside",xZ="dismissableLayer.focusOutside";let B_;const yZ=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bZ=w.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,f=w.useContext(yZ),[u,h]=w.useState(null),m=(r=u==null?void 0:u.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,v]=w.useState({}),g=cZ(t,N=>h(N)),p=Array.from(f.layers),[x]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(x),y=u?p.indexOf(u):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,E=y>=b,C=jZ(N=>{const _=N.target,I=[...f.branches].some(T=>T.contains(_));!E||I||(i==null||i(N),l==null||l(N),N.defaultPrevented||c==null||c())},m),S=wZ(N=>{const _=N.target;[...f.branches].some(T=>T.contains(_))||(o==null||o(N),l==null||l(N),N.defaultPrevented||c==null||c())},m);return vZ(N=>{y===f.layers.size-1&&(a==null||a(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},m),w.useEffect(()=>{if(u)return s&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(B_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(u)),f.layers.add(u),z_(),()=>{s&&f.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=B_)}},[u,m,s,f]),w.useEffect(()=>()=>{u&&(f.layers.delete(u),f.layersWithOutsidePointerEventsDisabled.delete(u),z_())},[u,f]),w.useEffect(()=>{const N=()=>v({});return document.addEventListener(VS,N),()=>document.removeEventListener(VS,N)},[]),w.createElement(mZ.div,st({},d,{ref:g,style:{pointerEvents:j?E?"auto":"none":void 0,...e.style},onFocusCapture:hN(e.onFocusCapture,S.onFocusCapture),onBlurCapture:hN(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:hN(e.onPointerDownCapture,C.onPointerDownCapture)}))});function jZ(e,t=globalThis==null?void 0:globalThis.document){const r=Gl(e),s=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let d=function(){n7(gZ,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function wZ(e,t=globalThis==null?void 0:globalThis.document){const r=Gl(e),s=w.useRef(!1);return w.useEffect(()=>{const a=i=>{i.target&&!s.current&&n7(xZ,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function z_(){const e=new CustomEvent(VS);document.dispatchEvent(e)}function n7(e,t,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?pZ(a,i):a.dispatchEvent(i)}let mN=0;function NZ(){w.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:U_()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:U_()),mN++,()=>{mN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),mN--}},[])}function U_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}function SZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function s7(...e){return t=>e.forEach(r=>SZ(r,t))}function CZ(...e){return w.useCallback(s7(...e),e)}const a7=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(EZ);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(qS,st({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(qS,st({},s,{ref:t}),r)});a7.displayName="Slot";const qS=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...PZ(s,r.props),ref:t?s7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});qS.displayName="SlotClone";const AZ=({children:e})=>w.createElement(w.Fragment,null,e);function EZ(e){return w.isValidElement(e)&&e.type===AZ}function PZ(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const TZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_Z=TZ.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?a7:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,st({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),pN="focusScope.autoFocusOnMount",vN="focusScope.autoFocusOnUnmount",V_={bubbles:!1,cancelable:!0},IZ=w.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=w.useState(null),d=Gl(a),f=Gl(i),u=w.useRef(null),h=CZ(t,g=>c(g)),m=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(s){let g=function(y){if(m.paused||!l)return;const j=y.target;l.contains(j)?u.current=j:Nc(u.current,{select:!0})},p=function(y){if(m.paused||!l)return;const j=y.relatedTarget;j!==null&&(l.contains(j)||Nc(u.current,{select:!0}))},x=function(y){const j=document.activeElement;for(const E of y)E.removedNodes.length>0&&(l!=null&&l.contains(j)||Nc(l))};document.addEventListener("focusin",g),document.addEventListener("focusout",p);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",p),b.disconnect()}}},[s,l,m.paused]),w.useEffect(()=>{if(l){W_.add(m);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(pN,V_);l.addEventListener(pN,d),l.dispatchEvent(x),x.defaultPrevented||(kZ($Z(i7(l)),{select:!0}),document.activeElement===g&&Nc(l))}return()=>{l.removeEventListener(pN,d),setTimeout(()=>{const x=new CustomEvent(vN,V_);l.addEventListener(vN,f),l.dispatchEvent(x),x.defaultPrevented||Nc(g??document.body,{select:!0}),l.removeEventListener(vN,f),W_.remove(m)},0)}}},[l,d,f,m]);const v=w.useCallback(g=>{if(!r&&!s||m.paused)return;const p=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(p&&x){const b=g.currentTarget,[y,j]=DZ(b);y&&j?!g.shiftKey&&x===j?(g.preventDefault(),r&&Nc(y,{select:!0})):g.shiftKey&&x===y&&(g.preventDefault(),r&&Nc(j,{select:!0})):x===b&&g.preventDefault()}},[r,s,m.paused]);return w.createElement(_Z.div,st({tabIndex:-1},o,{ref:h,onKeyDown:v}))});function kZ(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Nc(s,{select:t}),document.activeElement!==r)return}function DZ(e){const t=i7(e),r=q_(t,e),s=q_(t.reverse(),e);return[r,s]}function i7(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function q_(e,t){for(const r of e)if(!OZ(r,{upTo:t}))return r}function OZ(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function LZ(e){return e instanceof HTMLInputElement&&"select"in e}function Nc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&LZ(e)&&t&&e.select()}}const W_=RZ();function RZ(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=H_(e,t),e.unshift(t)},remove(t){var r;e=H_(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function H_(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function $Z(e){return e.filter(t=>t.tagName!=="A")}const FZ=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},MZ=Zo["useId".toString()]||(()=>{});let BZ=0;function o7(e){const[t,r]=w.useState(MZ());return FZ(()=>{e||r(s=>s??String(BZ++))},[e]),e||(t?`radix-${t}`:"")}const zZ=["top","right","bottom","left"],cd=Math.min,Fa=Math.max,wb=Math.round,U0=Math.floor,Ho=e=>({x:e,y:e}),UZ={left:"right",right:"left",bottom:"top",top:"bottom"},VZ={start:"end",end:"start"};function WS(e,t,r){return Fa(e,cd(t,r))}function Kl(e,t){return typeof e=="function"?e(t):e}function Yl(e){return e.split("-")[0]}function Em(e){return e.split("-")[1]}function bE(e){return e==="x"?"y":"x"}function jE(e){return e==="y"?"height":"width"}const qZ=new Set(["top","bottom"]);function Mo(e){return qZ.has(Yl(e))?"y":"x"}function wE(e){return bE(Mo(e))}function WZ(e,t,r){r===void 0&&(r=!1);const s=Em(e),a=wE(e),i=jE(a);let o=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Nb(o)),[o,Nb(o)]}function HZ(e){const t=Nb(e);return[HS(e),t,HS(t)]}function HS(e){return e.replace(/start|end/g,t=>VZ[t])}const G_=["left","right"],K_=["right","left"],GZ=["top","bottom"],KZ=["bottom","top"];function YZ(e,t,r){switch(e){case"top":case"bottom":return r?t?K_:G_:t?G_:K_;case"left":case"right":return t?GZ:KZ;default:return[]}}function XZ(e,t,r,s){const a=Em(e);let i=YZ(Yl(e),r==="start",s);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(HS)))),i}function Nb(e){return e.replace(/left|right|bottom|top/g,t=>UZ[t])}function QZ(e){return{top:0,right:0,bottom:0,left:0,...e}}function l7(e){return typeof e!="number"?QZ(e):{top:e,right:e,bottom:e,left:e}}function Sb(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function Y_(e,t,r){let{reference:s,floating:a}=e;const i=Mo(t),o=wE(t),l=jE(o),c=Yl(t),d=i==="y",f=s.x+s.width/2-a.width/2,u=s.y+s.height/2-a.height/2,h=s[l]/2-a[l]/2;let m;switch(c){case"top":m={x:f,y:s.y-a.height};break;case"bottom":m={x:f,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:u};break;case"left":m={x:s.x-a.width,y:u};break;default:m={x:s.x,y:s.y}}switch(Em(t)){case"start":m[o]-=h*(r&&d?-1:1);break;case"end":m[o]+=h*(r&&d?-1:1);break}return m}const JZ=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:u}=Y_(d,s,c),h=s,m={},v=0;for(let g=0;g<l.length;g++){const{name:p,fn:x}=l[g],{x:b,y,data:j,reset:E}=await x({x:f,y:u,initialPlacement:s,placement:h,strategy:a,middlewareData:m,rects:d,platform:o,elements:{reference:e,floating:t}});f=b??f,u=y??u,m={...m,[p]:{...m[p],...j}},E&&v<=50&&(v++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(d=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):E.rects),{x:f,y:u}=Y_(d,h,c)),g=-1)}return{x:f,y:u,placement:h,strategy:a,middlewareData:m}};async function rg(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=Kl(t,e),v=l7(m),p=l[h?u==="floating"?"reference":"floating":u],x=Sb(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(p)))==null||r?p:p.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),b=u==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},E=Sb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:y,strategy:c}):b);return{top:(x.top-E.top+v.top)/j.y,bottom:(E.bottom-x.bottom+v.bottom)/j.y,left:(x.left-E.left+v.left)/j.x,right:(E.right-x.right+v.right)/j.x}}const ZZ=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=Kl(e,t)||{};if(d==null)return{};const u=l7(f),h={x:r,y:s},m=wE(a),v=jE(m),g=await o.getDimensions(d),p=m==="y",x=p?"top":"left",b=p?"bottom":"right",y=p?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[m]-h[m]-i.floating[v],E=h[m]-i.reference[m],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let S=C?C[y]:0;(!S||!await(o.isElement==null?void 0:o.isElement(C)))&&(S=l.floating[y]||i.floating[v]);const N=j/2-E/2,_=S/2-g[v]/2-1,I=cd(u[x],_),T=cd(u[b],_),A=I,O=S-g[v]-T,D=S/2-g[v]/2+N,$=WS(A,D,O),M=!c.arrow&&Em(a)!=null&&D!==$&&i.reference[v]/2-(D<A?I:T)-g[v]/2<0,R=M?D<A?D-A:D-O:0;return{[m]:h[m]+R,data:{[m]:$,centerOffset:D-$-R,...M&&{alignmentOffset:R}},reset:M}}}),eee=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...p}=Kl(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Yl(a),b=Mo(l),y=Yl(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),E=h||(y||!g?[Nb(l)]:HZ(l)),C=v!=="none";!h&&C&&E.push(...XZ(l,g,v,j));const S=[l,...E],N=await rg(t,p),_=[];let I=((s=i.flip)==null?void 0:s.overflows)||[];if(f&&_.push(N[x]),u){const D=WZ(a,o,j);_.push(N[D[0]],N[D[1]])}if(I=[...I,{placement:a,overflows:_}],!_.every(D=>D<=0)){var T,A;const D=(((T=i.flip)==null?void 0:T.index)||0)+1,$=S[D];if($&&(!(u==="alignment"?b!==Mo($):!1)||I.every(B=>B.overflows[0]>0&&Mo(B.placement)===b)))return{data:{index:D,overflows:I},reset:{placement:$}};let M=(A=I.filter(R=>R.overflows[0]<=0).sort((R,B)=>R.overflows[1]-B.overflows[1])[0])==null?void 0:A.placement;if(!M)switch(m){case"bestFit":{var O;const R=(O=I.filter(B=>{if(C){const U=Mo(B.placement);return U===b||U==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(U=>U>0).reduce((U,W)=>U+W,0)]).sort((B,U)=>B[1]-U[1])[0])==null?void 0:O[0];R&&(M=R);break}case"initialPlacement":M=l;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function X_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Q_(e){return zZ.some(t=>e[t]>=0)}const tee=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=Kl(e,t);switch(s){case"referenceHidden":{const i=await rg(t,{...a,elementContext:"reference"}),o=X_(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Q_(o)}}}case"escaped":{const i=await rg(t,{...a,altBoundary:!0}),o=X_(i,r.floating);return{data:{escapedOffsets:o,escaped:Q_(o)}}}default:return{}}}}},c7=new Set(["left","top"]);async function ree(e,t){const{placement:r,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=Yl(r),l=Em(r),c=Mo(r)==="y",d=c7.has(o)?-1:1,f=i&&c?-1:1,u=Kl(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:v}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*f,y:h*d}:{x:h*d,y:m*f}}const nee=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await ree(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},see=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:p=>{let{x,y:b}=p;return{x,y:b}}},...c}=Kl(e,t),d={x:r,y:s},f=await rg(t,c),u=Mo(Yl(a)),h=bE(u);let m=d[h],v=d[u];if(i){const p=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=m+f[p],y=m-f[x];m=WS(b,m,y)}if(o){const p=u==="y"?"top":"left",x=u==="y"?"bottom":"right",b=v+f[p],y=v-f[x];v=WS(b,v,y)}const g=l.fn({...t,[h]:m,[u]:v});return{...g,data:{x:g.x-r,y:g.y-s,enabled:{[h]:i,[u]:o}}}}}},aee=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Kl(e,t),f={x:r,y:s},u=Mo(a),h=bE(u);let m=f[h],v=f[u];const g=Kl(l,t),p=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const y=h==="y"?"height":"width",j=i.reference[h]-i.floating[y]+p.mainAxis,E=i.reference[h]+i.reference[y]-p.mainAxis;m<j?m=j:m>E&&(m=E)}if(d){var x,b;const y=h==="y"?"width":"height",j=c7.has(Yl(a)),E=i.reference[u]-i.floating[y]+(j&&((x=o.offset)==null?void 0:x[u])||0)+(j?0:p.crossAxis),C=i.reference[u]+i.reference[y]+(j?0:((b=o.offset)==null?void 0:b[u])||0)-(j?p.crossAxis:0);v<E?v=E:v>C&&(v=C)}return{[h]:m,[u]:v}}}},iee=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Kl(e,t),f=await rg(t,d),u=Yl(a),h=Em(a),m=Mo(a)==="y",{width:v,height:g}=i.floating;let p,x;u==="top"||u==="bottom"?(p=u,x=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=u,p=h==="end"?"top":"bottom");const b=g-f.top-f.bottom,y=v-f.left-f.right,j=cd(g-f[p],b),E=cd(v-f[x],y),C=!t.middlewareData.shift;let S=j,N=E;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(N=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(S=b),C&&!h){const I=Fa(f.left,0),T=Fa(f.right,0),A=Fa(f.top,0),O=Fa(f.bottom,0);m?N=v-2*(I!==0||T!==0?I+T:Fa(f.left,f.right)):S=g-2*(A!==0||O!==0?A+O:Fa(f.top,f.bottom))}await c({...t,availableWidth:N,availableHeight:S});const _=await o.getDimensions(l.floating);return v!==_.width||g!==_.height?{reset:{rects:!0}}:{}}}};function vj(){return typeof window<"u"}function Pm(e){return d7(e)?(e.nodeName||"").toLowerCase():"#document"}function qa(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function sl(e){var t;return(t=(d7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function d7(e){return vj()?e instanceof Node||e instanceof qa(e).Node:!1}function co(e){return vj()?e instanceof Element||e instanceof qa(e).Element:!1}function el(e){return vj()?e instanceof HTMLElement||e instanceof qa(e).HTMLElement:!1}function J_(e){return!vj()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof qa(e).ShadowRoot}const oee=new Set(["inline","contents"]);function sx(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=uo(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!oee.has(a)}const lee=new Set(["table","td","th"]);function cee(e){return lee.has(Pm(e))}const dee=[":popover-open",":modal"];function gj(e){return dee.some(t=>{try{return e.matches(t)}catch{return!1}})}const uee=["transform","translate","scale","rotate","perspective"],fee=["transform","translate","scale","rotate","perspective","filter"],hee=["paint","layout","strict","content"];function NE(e){const t=SE(),r=co(e)?uo(e):e;return uee.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||fee.some(s=>(r.willChange||"").includes(s))||hee.some(s=>(r.contain||"").includes(s))}function mee(e){let t=dd(e);for(;el(t)&&!Fh(t);){if(NE(t))return t;if(gj(t))return null;t=dd(t)}return null}function SE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const pee=new Set(["html","body","#document"]);function Fh(e){return pee.has(Pm(e))}function uo(e){return qa(e).getComputedStyle(e)}function xj(e){return co(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function dd(e){if(Pm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||J_(e)&&e.host||sl(e);return J_(t)?t.host:t}function u7(e){const t=dd(e);return Fh(t)?e.ownerDocument?e.ownerDocument.body:e.body:el(t)&&sx(t)?t:u7(t)}function ng(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=u7(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),o=qa(a);if(i){const l=GS(o);return t.concat(o,o.visualViewport||[],sx(a)?a:[],l&&r?ng(l):[])}return t.concat(a,ng(a,[],r))}function GS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function f7(e){const t=uo(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=el(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:s,l=wb(r)!==i||wb(s)!==o;return l&&(r=i,s=o),{width:r,height:s,$:l}}function CE(e){return co(e)?e:e.contextElement}function jh(e){const t=CE(e);if(!el(t))return Ho(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:i}=f7(t);let o=(i?wb(r.width):r.width)/s,l=(i?wb(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const vee=Ho(0);function h7(e){const t=qa(e);return!SE()||!t.visualViewport?vee:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gee(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==qa(e)?!1:t}function Ou(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=CE(e);let o=Ho(1);t&&(s?co(s)&&(o=jh(s)):o=jh(e));const l=gee(i,r,s)?h7(i):Ho(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,f=a.width/o.x,u=a.height/o.y;if(i){const h=qa(i),m=s&&co(s)?qa(s):s;let v=h,g=GS(v);for(;g&&s&&m!==v;){const p=jh(g),x=g.getBoundingClientRect(),b=uo(g),y=x.left+(g.clientLeft+parseFloat(b.paddingLeft))*p.x,j=x.top+(g.clientTop+parseFloat(b.paddingTop))*p.y;c*=p.x,d*=p.y,f*=p.x,u*=p.y,c+=y,d+=j,v=qa(g),g=GS(v)}}return Sb({width:f,height:u,x:c,y:d})}function AE(e,t){const r=xj(e).scrollLeft;return t?t.left+r:Ou(sl(e)).left+r}function m7(e,t,r){r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(r?0:AE(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function xee(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const i=a==="fixed",o=sl(s),l=t?gj(t.floating):!1;if(s===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Ho(1);const f=Ho(0),u=el(s);if((u||!u&&!i)&&((Pm(s)!=="body"||sx(o))&&(c=xj(s)),el(s))){const m=Ou(s);d=jh(s),f.x=m.x+s.clientLeft,f.y=m.y+s.clientTop}const h=o&&!u&&!i?m7(o,c,!0):Ho(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+f.x+h.x,y:r.y*d.y-c.scrollTop*d.y+f.y+h.y}}function yee(e){return Array.from(e.getClientRects())}function bee(e){const t=sl(e),r=xj(e),s=e.ownerDocument.body,a=Fa(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=Fa(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+AE(e);const l=-r.scrollTop;return uo(s).direction==="rtl"&&(o+=Fa(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}function jee(e,t){const r=qa(e),s=sl(e),a=r.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=SE();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const wee=new Set(["absolute","fixed"]);function Nee(e,t){const r=Ou(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,i=el(e)?jh(e):Ho(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:o,height:l,x:c,y:d}}function Z_(e,t,r){let s;if(t==="viewport")s=jee(e,r);else if(t==="document")s=bee(sl(e));else if(co(t))s=Nee(t,r);else{const a=h7(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Sb(s)}function p7(e,t){const r=dd(e);return r===t||!co(r)||Fh(r)?!1:uo(r).position==="fixed"||p7(r,t)}function See(e,t){const r=t.get(e);if(r)return r;let s=ng(e,[],!1).filter(l=>co(l)&&Pm(l)!=="body"),a=null;const i=uo(e).position==="fixed";let o=i?dd(e):e;for(;co(o)&&!Fh(o);){const l=uo(o),c=NE(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&wee.has(a.position)||sx(o)&&!c&&p7(e,o))?s=s.filter(f=>f!==o):a=l,o=dd(o)}return t.set(e,s),s}function Cee(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const o=[...r==="clippingAncestors"?gj(t)?[]:See(t,this._c):[].concat(r),s],l=o[0],c=o.reduce((d,f)=>{const u=Z_(t,f,a);return d.top=Fa(u.top,d.top),d.right=cd(u.right,d.right),d.bottom=cd(u.bottom,d.bottom),d.left=Fa(u.left,d.left),d},Z_(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Aee(e){const{width:t,height:r}=f7(e);return{width:t,height:r}}function Eee(e,t,r){const s=el(t),a=sl(t),i=r==="fixed",o=Ou(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ho(0);function d(){c.x=AE(a)}if(s||!s&&!i)if((Pm(t)!=="body"||sx(a))&&(l=xj(t)),s){const m=Ou(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&d();i&&!s&&a&&d();const f=a&&!s&&!i?m7(a,l):Ho(0),u=o.left+l.scrollLeft-c.x-f.x,h=o.top+l.scrollTop-c.y-f.y;return{x:u,y:h,width:o.width,height:o.height}}function gN(e){return uo(e).position==="static"}function eI(e,t){if(!el(e)||uo(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return sl(e)===r&&(r=r.ownerDocument.body),r}function v7(e,t){const r=qa(e);if(gj(e))return r;if(!el(e)){let a=dd(e);for(;a&&!Fh(a);){if(co(a)&&!gN(a))return a;a=dd(a)}return r}let s=eI(e,t);for(;s&&cee(s)&&gN(s);)s=eI(s,t);return s&&Fh(s)&&gN(s)&&!NE(s)?r:s||mee(e)||r}const Pee=async function(e){const t=this.getOffsetParent||v7,r=this.getDimensions,s=await r(e.floating);return{reference:Eee(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Tee(e){return uo(e).direction==="rtl"}const _ee={convertOffsetParentRelativeRectToViewportRelativeRect:xee,getDocumentElement:sl,getClippingRect:Cee,getOffsetParent:v7,getElementRects:Pee,getClientRects:yee,getDimensions:Aee,getScale:jh,isElement:co,isRTL:Tee};function g7(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Iee(e,t){let r=null,s;const a=sl(e);function i(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:f,top:u,width:h,height:m}=d;if(l||t(),!h||!m)return;const v=U0(u),g=U0(a.clientWidth-(f+h)),p=U0(a.clientHeight-(u+m)),x=U0(f),y={rootMargin:-v+"px "+-g+"px "+-p+"px "+-x+"px",threshold:Fa(0,cd(1,c))||1};let j=!0;function E(C){const S=C[0].intersectionRatio;if(S!==c){if(!j)return o();S?o(!1,S):s=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!g7(d,e.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(E,{...y,root:a.ownerDocument})}catch{r=new IntersectionObserver(E,y)}r.observe(e)}return o(!0),i}function kee(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=CE(e),f=a||i?[...d?ng(d):[],...ng(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const u=d&&l?Iee(d,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(x=>{let[b]=x;b&&b.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=m)==null||y.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let v,g=c?Ou(e):null;c&&p();function p(){const x=Ou(e);g&&!g7(g,x)&&r(),g=x,v=requestAnimationFrame(p)}return r(),()=>{var x;f.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),u==null||u(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const Dee=nee,Oee=see,Lee=eee,Ree=iee,$ee=tee,tI=ZZ,Fee=aee,Mee=(e,t,r)=>{const s=new Map,a={platform:_ee,...r},i={...a.platform,_c:s};return JZ(e,t,{...a,platform:i})};var Bee=typeof document<"u",zee=function(){},My=Bee?w.useLayoutEffect:zee;function Cb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Cb(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Cb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function x7(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rI(e,t){const r=x7(e);return Math.round(t*r)/r}function xN(e){const t=w.useRef(e);return My(()=>{t.current=e}),t}function Uee(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,u]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=w.useState(s);Cb(h,s)||m(s);const[v,g]=w.useState(null),[p,x]=w.useState(null),b=w.useCallback(B=>{B!==C.current&&(C.current=B,g(B))},[]),y=w.useCallback(B=>{B!==S.current&&(S.current=B,x(B))},[]),j=i||v,E=o||p,C=w.useRef(null),S=w.useRef(null),N=w.useRef(f),_=c!=null,I=xN(c),T=xN(a),A=xN(d),O=w.useCallback(()=>{if(!C.current||!S.current)return;const B={placement:t,strategy:r,middleware:h};T.current&&(B.platform=T.current),Mee(C.current,S.current,B).then(U=>{const W={...U,isPositioned:A.current!==!1};D.current&&!Cb(N.current,W)&&(N.current=W,rl.flushSync(()=>{u(W)}))})},[h,t,r,T,A]);My(()=>{d===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,u(B=>({...B,isPositioned:!1})))},[d]);const D=w.useRef(!1);My(()=>(D.current=!0,()=>{D.current=!1}),[]),My(()=>{if(j&&(C.current=j),E&&(S.current=E),j&&E){if(I.current)return I.current(j,E,O);O()}},[j,E,O,I,_]);const $=w.useMemo(()=>({reference:C,floating:S,setReference:b,setFloating:y}),[b,y]),M=w.useMemo(()=>({reference:j,floating:E}),[j,E]),R=w.useMemo(()=>{const B={position:r,left:0,top:0};if(!M.floating)return B;const U=rI(M.floating,f.x),W=rI(M.floating,f.y);return l?{...B,transform:"translate("+U+"px, "+W+"px)",...x7(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:U,top:W}},[r,l,M.floating,f.x,f.y]);return w.useMemo(()=>({...f,update:O,refs:$,elements:M,floatingStyles:R}),[f,O,$,M,R])}const Vee=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?tI({element:s.current,padding:a}).fn(r):{}:s?tI({element:s,padding:a}).fn(r):{}}}},qee=(e,t)=>({...Dee(e),options:[e,t]}),Wee=(e,t)=>({...Oee(e),options:[e,t]}),Hee=(e,t)=>({...Fee(e),options:[e,t]}),Gee=(e,t)=>({...Lee(e),options:[e,t]}),Kee=(e,t)=>({...Ree(e),options:[e,t]}),Yee=(e,t)=>({...$ee(e),options:[e,t]}),Xee=(e,t)=>({...Vee(e),options:[e,t]});function Qee(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function y7(...e){return t=>e.forEach(r=>Qee(r,t))}function b7(...e){return w.useCallback(y7(...e),e)}function Jee(e,t=[]){let r=[];function s(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];function d(u){const{scope:h,children:m,...v}=u,g=(h==null?void 0:h[e][c])||l,p=w.useMemo(()=>v,Object.values(v));return w.createElement(g.Provider,{value:p},m)}function f(u,h){const m=(h==null?void 0:h[e][c])||l,v=w.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,Zee(a,...t)]}function Zee(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}const j7=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(tte);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(KS,st({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(KS,st({},s,{ref:t}),r)});j7.displayName="Slot";const KS=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...rte(s,r.props),ref:t?y7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});KS.displayName="SlotClone";const ete=({children:e})=>w.createElement(w.Fragment,null,e);function tte(e){return w.isValidElement(e)&&e.type===ete}function rte(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const nte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],w7=nte.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?j7:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,st({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),YS=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{};function ste(e){const[t,r]=w.useState(void 0);return YS(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}const N7="Popper",[S7,C7]=Jee(N7),[ate,A7]=S7(N7),ite=e=>{const{__scopePopper:t,children:r}=e,[s,a]=w.useState(null);return w.createElement(ate,{scope:t,anchor:s,onAnchorChange:a},r)},ote="PopperAnchor",lte=w.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,i=A7(ote,r),o=w.useRef(null),l=b7(t,o);return w.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:w.createElement(w7.div,st({},a,{ref:l}))}),E7="PopperContent",[cte,DRe]=S7(E7),dte=w.forwardRef((e,t)=>{var r,s,a,i,o,l,c,d;const{__scopePopper:f,side:u="bottom",sideOffset:h=0,align:m="center",alignOffset:v=0,arrowPadding:g=0,collisionBoundary:p=[],collisionPadding:x=0,sticky:b="partial",hideWhenDetached:y=!1,avoidCollisions:j=!0,onPlaced:E,...C}=e,S=A7(E7,f),[N,_]=w.useState(null),I=b7(t,xe=>_(xe)),[T,A]=w.useState(null),O=ste(T),D=(r=O==null?void 0:O.width)!==null&&r!==void 0?r:0,$=(s=O==null?void 0:O.height)!==null&&s!==void 0?s:0,M=u+(m!=="center"?"-"+m:""),R=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},B=Array.isArray(p)?p:[p],U=B.length>0,W={padding:R,boundary:B.filter(ute),altBoundary:U},{refs:q,floatingStyles:L,placement:V,isPositioned:G,middlewareData:Z}=Uee({strategy:"fixed",placement:M,whileElementsMounted:kee,elements:{reference:S.anchor},middleware:[qee({mainAxis:h+$,alignmentAxis:v}),j&&Wee({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?Hee():void 0,...W}),j&&Gee({...W}),Kee({...W,apply:({elements:xe,rects:le,availableWidth:re,availableHeight:Ce})=>{const{width:Ne,height:ye}=le.reference,$e=xe.floating.style;$e.setProperty("--radix-popper-available-width",`${re}px`),$e.setProperty("--radix-popper-available-height",`${Ce}px`),$e.setProperty("--radix-popper-anchor-width",`${Ne}px`),$e.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),T&&Xee({element:T,padding:g}),fte({arrowWidth:D,arrowHeight:$}),y&&Yee({strategy:"referenceHidden"})]}),[te,he]=P7(V),me=Gl(E);YS(()=>{G&&(me==null||me())},[G,me]);const oe=(a=Z.arrow)===null||a===void 0?void 0:a.x,we=(i=Z.arrow)===null||i===void 0?void 0:i.y,ve=((o=Z.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[ge,De]=w.useState();return YS(()=>{N&&De(window.getComputedStyle(N).zIndex)},[N]),w.createElement("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:G?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(l=Z.transformOrigin)===null||l===void 0?void 0:l.x,(c=Z.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},w.createElement(cte,{scope:f,placedSide:te,onArrowChange:A,arrowX:oe,arrowY:we,shouldHideArrow:ve},w.createElement(w7.div,st({"data-side":te,"data-align":he},C,{ref:I,style:{...C.style,animation:G?void 0:"none",opacity:(d=Z.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function ute(e){return e!==null}const fte=e=>({name:"transformOrigin",options:e,fn(t){var r,s,a,i,o;const{placement:l,rects:c,middlewareData:d}=t,u=((r=d.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=u?0:e.arrowWidth,m=u?0:e.arrowHeight,[v,g]=P7(l),p={start:"0%",center:"50%",end:"100%"}[g],x=((s=(a=d.arrow)===null||a===void 0?void 0:a.x)!==null&&s!==void 0?s:0)+h/2,b=((i=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+m/2;let y="",j="";return v==="bottom"?(y=u?p:`${x}px`,j=`${-m}px`):v==="top"?(y=u?p:`${x}px`,j=`${c.floating.height+m}px`):v==="right"?(y=`${-m}px`,j=u?p:`${b}px`):v==="left"&&(y=`${c.floating.width+m}px`,j=u?p:`${b}px`),{data:{x:y,y:j}}}});function P7(e){const[t,r="center"]=e.split("-");return[t,r]}const hte=ite,mte=lte,pte=dte;function vte(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function gte(...e){return t=>e.forEach(r=>vte(r,t))}const T7=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(yte);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(XS,st({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(XS,st({},s,{ref:t}),r)});T7.displayName="Slot";const XS=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...bte(s,r.props),ref:t?gte(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});XS.displayName="SlotClone";const xte=({children:e})=>w.createElement(w.Fragment,null,e);function yte(e){return w.isValidElement(e)&&e.type===xte}function bte(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const jte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],wte=jte.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?T7:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,st({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Nte=w.forwardRef((e,t)=>{var r;const{container:s=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...a}=e;return s?eE.createPortal(w.createElement(wte.div,st({},a,{ref:t})),s):null}),EE=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(Cte);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(QS,st({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(QS,st({},s,{ref:t}),r)});EE.displayName="Slot";const QS=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...Ate(s,r.props),ref:t?e7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});QS.displayName="SlotClone";const Ste=({children:e})=>w.createElement(w.Fragment,null,e);function Cte(e){return w.isValidElement(e)&&e.type===Ste}function Ate(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const Ete=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ho=Ete.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?EE:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,st({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function nI({prop:e,defaultProp:t,onChange:r=()=>{}}){const[s,a]=Pte({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:s,l=Gl(r),c=w.useCallback(d=>{if(i){const u=typeof d=="function"?d(e):d;u!==e&&l(u)}else a(d)},[i,e,a,l]);return[o,c]}function Pte({defaultProp:e,onChange:t}){const r=w.useState(e),[s]=r,a=w.useRef(s),i=Gl(t);return w.useEffect(()=>{a.current!==s&&(i(s),a.current=s)},[s,a,i]),r}const ud=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{};function Tte(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function _te(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Ite(...e){return t=>e.forEach(r=>_te(r,t))}const _7=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(Dte);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(JS,st({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(JS,st({},s,{ref:t}),r)});_7.displayName="Slot";const JS=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...Ote(s,r.props),ref:t?Ite(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});JS.displayName="SlotClone";const kte=({children:e})=>w.createElement(w.Fragment,null,e);function Dte(e){return w.isValidElement(e)&&e.type===kte}function Ote(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const Lte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Rte=Lte.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?_7:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,st({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),$te=w.forwardRef((e,t)=>w.createElement(Rte.span,st({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var Fte=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Of=new WeakMap,V0=new WeakMap,q0={},yN=0,I7=function(e){return e&&(e.host||I7(e.parentNode))},Mte=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=I7(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Bte=function(e,t,r,s){var a=Mte(t,Array.isArray(e)?e:[e]);q0[r]||(q0[r]=new WeakMap);var i=q0[r],o=[],l=new Set,c=new Set(a),d=function(u){!u||l.has(u)||(l.add(u),d(u.parentNode))};a.forEach(d);var f=function(u){!u||c.has(u)||Array.prototype.forEach.call(u.children,function(h){if(l.has(h))f(h);else try{var m=h.getAttribute(s),v=m!==null&&m!=="false",g=(Of.get(h)||0)+1,p=(i.get(h)||0)+1;Of.set(h,g),i.set(h,p),o.push(h),g===1&&v&&V0.set(h,!0),p===1&&h.setAttribute(r,"true"),v||h.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return f(t),l.clear(),yN++,function(){o.forEach(function(u){var h=Of.get(u)-1,m=i.get(u)-1;Of.set(u,h),i.set(u,m),h||(V0.has(u)||u.removeAttribute(s),V0.delete(u)),m||u.removeAttribute(r)}),yN--,yN||(Of=new WeakMap,Of=new WeakMap,V0=new WeakMap,q0={})}},zte=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=t||Fte(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),Bte(s,a,r,"aria-hidden")):function(){return null}},$o=function(){return $o=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},$o.apply(this,arguments)};function k7(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function Gu(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})}function Ute(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var By="right-scroll-bar-position",zy="width-before-scroll-bar",Vte="with-scroll-bars-hidden",qte="--removed-body-scroll-bar-size";function bN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Wte(e,t){var r=w.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var Hte=typeof window<"u"?w.useLayoutEffect:w.useEffect,sI=new WeakMap;function Gte(e,t){var r=Wte(t||null,function(s){return e.forEach(function(a){return bN(a,s)})});return Hte(function(){var s=sI.get(r);if(s){var a=new Set(s),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||bN(l,null)}),i.forEach(function(l){a.has(l)||bN(l,o)})}sI.set(r,e)},[e]),r}function Kte(e){return e}function Yte(e,t){t===void 0&&(t=Kte);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,s);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){s=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var f=o;o=[],f.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),r}}}};return a}function Xte(e){e===void 0&&(e={});var t=Yte(null);return t.options=$o({async:!0,ssr:!1},e),t}var D7=function(e){var t=e.sideCar,r=k7(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return w.createElement(s,$o({},r))};D7.isSideCarExport=!0;function Qte(e,t){return e.useMedium(t),D7}var O7=Xte(),jN=function(){},yj=w.forwardRef(function(e,t){var r=w.useRef(null),s=w.useState({onScrollCapture:jN,onWheelCapture:jN,onTouchMoveCapture:jN}),a=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,u=e.shards,h=e.sideCar,m=e.noIsolation,v=e.inert,g=e.allowPinchZoom,p=e.as,x=p===void 0?"div":p,b=k7(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),y=h,j=Gte([r,t]),E=$o($o({},b),a);return w.createElement(w.Fragment,null,f&&w.createElement(y,{sideCar:O7,removeScrollBar:d,shards:u,noIsolation:m,inert:v,setCallbacks:i,allowPinchZoom:!!g,lockRef:r}),o?w.cloneElement(w.Children.only(l),$o($o({},E),{ref:j})):w.createElement(x,$o({},E,{className:c,ref:j}),l))});yj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yj.classNames={fullWidth:zy,zeroRight:By};var aI,Jte=function(){if(aI)return aI;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Zte(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Jte();return t&&e.setAttribute("nonce",t),e}function ere(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function tre(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var rre=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Zte())&&(ere(t,r),tre(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nre=function(){var e=rre();return function(t,r){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},L7=function(){var e=nre(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},sre={left:0,top:0,right:0,gap:0},wN=function(e){return parseInt(e||"",10)||0},are=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[wN(r),wN(s),wN(a)]},ire=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return sre;var t=are(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},ore=L7(),wh="data-scroll-locked",lre=function(e,t,r,s){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Vte,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(wh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(By,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(zy,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(By," .").concat(By,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(zy," .").concat(zy,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(wh,`] {
    `).concat(qte,": ").concat(l,`px;
  }
`)},iI=function(){var e=parseInt(document.body.getAttribute(wh)||"0",10);return isFinite(e)?e:0},cre=function(){w.useEffect(function(){return document.body.setAttribute(wh,(iI()+1).toString()),function(){var e=iI()-1;e<=0?document.body.removeAttribute(wh):document.body.setAttribute(wh,e.toString())}},[])},dre=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;cre();var i=w.useMemo(function(){return ire(a)},[a]);return w.createElement(ore,{styles:lre(i,!t,a,r?"":"!important")})},ZS=!1;if(typeof window<"u")try{var W0=Object.defineProperty({},"passive",{get:function(){return ZS=!0,!0}});window.addEventListener("test",W0,W0),window.removeEventListener("test",W0,W0)}catch{ZS=!1}var Lf=ZS?{passive:!1}:!1,ure=function(e){return e.tagName==="TEXTAREA"},R7=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!ure(e)&&r[t]==="visible")},fre=function(e){return R7(e,"overflowY")},hre=function(e){return R7(e,"overflowX")},oI=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=$7(e,r);if(s){var a=F7(e,r),i=a[1],o=a[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},mre=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},pre=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},$7=function(e,t){return e==="v"?fre(t):hre(t)},F7=function(e,t){return e==="v"?mre(t):pre(t)},vre=function(e,t){return e==="h"&&t==="rtl"?-1:1},gre=function(e,t,r,s,a){var i=vre(e,window.getComputedStyle(t).direction),o=i*s,l=r.target,c=t.contains(l),d=!1,f=o>0,u=0,h=0;do{var m=F7(e,l),v=m[0],g=m[1],p=m[2],x=g-p-i*v;(v||x)&&$7(e,l)&&(u+=x,h+=v),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(a&&u===0||!a&&o>u)||!f&&(a&&h===0||!a&&-o>h))&&(d=!0),d},H0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},lI=function(e){return[e.deltaX,e.deltaY]},cI=function(e){return e&&"current"in e?e.current:e},xre=function(e,t){return e[0]===t[0]&&e[1]===t[1]},yre=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},bre=0,Rf=[];function jre(e){var t=w.useRef([]),r=w.useRef([0,0]),s=w.useRef(),a=w.useState(bre++)[0],i=w.useState(function(){return L7()})[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=Ute([e.lockRef.current],(e.shards||[]).map(cI),!0).filter(Boolean);return g.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=w.useCallback(function(g,p){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var x=H0(g),b=r.current,y="deltaX"in g?g.deltaX:b[0]-x[0],j="deltaY"in g?g.deltaY:b[1]-x[1],E,C=g.target,S=Math.abs(y)>Math.abs(j)?"h":"v";if("touches"in g&&S==="h"&&C.type==="range")return!1;var N=oI(S,C);if(!N)return!0;if(N?E=S:(E=S==="v"?"h":"v",N=oI(S,C)),!N)return!1;if(!s.current&&"changedTouches"in g&&(y||j)&&(s.current=E),!E)return!0;var _=s.current||E;return gre(_,p,g,_==="h"?y:j,!0)},[]),c=w.useCallback(function(g){var p=g;if(!(!Rf.length||Rf[Rf.length-1]!==i)){var x="deltaY"in p?lI(p):H0(p),b=t.current.filter(function(E){return E.name===p.type&&E.target===p.target&&xre(E.delta,x)})[0];if(b&&b.should){p.cancelable&&p.preventDefault();return}if(!b){var y=(o.current.shards||[]).map(cI).filter(Boolean).filter(function(E){return E.contains(p.target)}),j=y.length>0?l(p,y[0]):!o.current.noIsolation;j&&p.cancelable&&p.preventDefault()}}},[]),d=w.useCallback(function(g,p,x,b){var y={name:g,delta:p,target:x,should:b};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(j){return j!==y})},1)},[]),f=w.useCallback(function(g){r.current=H0(g),s.current=void 0},[]),u=w.useCallback(function(g){d(g.type,lI(g),g.target,l(g,e.lockRef.current))},[]),h=w.useCallback(function(g){d(g.type,H0(g),g.target,l(g,e.lockRef.current))},[]);w.useEffect(function(){return Rf.push(i),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Lf),document.addEventListener("touchmove",c,Lf),document.addEventListener("touchstart",f,Lf),function(){Rf=Rf.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Lf),document.removeEventListener("touchmove",c,Lf),document.removeEventListener("touchstart",f,Lf)}},[]);var m=e.removeScrollBar,v=e.inert;return w.createElement(w.Fragment,null,v?w.createElement(i,{styles:yre(a)}):null,m?w.createElement(dre,{gapMode:"margin"}):null)}const wre=Qte(O7,jre);var M7=w.forwardRef(function(e,t){return w.createElement(yj,$o({},e,{ref:t,sideCar:wre}))});M7.classNames=yj.classNames;const Nre=M7,Sre=[" ","Enter","ArrowUp","ArrowDown"],Cre=[" ","Enter"],bj="Select",[jj,wj,Are]=rZ(bj),[Tm,ORe]=sZ(bj,[Are,C7]),PE=C7(),[Ere,Ku]=Tm(bj),[Pre,Tre]=Tm(bj),_re=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:u,disabled:h,required:m}=e,v=PE(t),[g,p]=w.useState(null),[x,b]=w.useState(null),[y,j]=w.useState(!1),E=oZ(d),[C=!1,S]=nI({prop:s,defaultProp:a,onChange:i}),[N,_]=nI({prop:o,defaultProp:l,onChange:c}),I=w.useRef(null),T=g?!!g.closest("form"):!0,[A,O]=w.useState(new Set),D=Array.from(A).map($=>$.props.value).join(";");return w.createElement(hte,v,w.createElement(Ere,{required:m,scope:t,trigger:g,onTriggerChange:p,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:y,onValueNodeHasChildrenChange:j,contentId:o7(),value:N,onValueChange:_,open:C,onOpenChange:S,dir:E,triggerPointerDownPosRef:I,disabled:h},w.createElement(jj.Provider,{scope:t},w.createElement(Pre,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback($=>{O(M=>new Set(M).add($))},[]),onNativeOptionRemove:w.useCallback($=>{O(M=>{const R=new Set(M);return R.delete($),R})},[])},r)),T?w.createElement(V7,{key:D,"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:u,value:N,onChange:$=>_($.target.value),disabled:h},N===void 0?w.createElement("option",{value:""}):null,Array.from(A)):null))},Ire="SelectTrigger",kre=w.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,i=PE(r),o=Ku(Ire,r),l=o.disabled||s,c=nl(t,o.onTriggerChange),d=wj(r),[f,u,h]=q7(v=>{const g=d().filter(b=>!b.disabled),p=g.find(b=>b.value===o.value),x=W7(g,v,p);x!==void 0&&o.onValueChange(x.value)}),m=()=>{l||(o.onOpenChange(!0),h())};return w.createElement(mte,st({asChild:!0},i),w.createElement(ho.button,st({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":o.value===void 0?"":void 0},a,{ref:c,onClick:Zs(a.onClick,v=>{v.currentTarget.focus()}),onPointerDown:Zs(a.onPointerDown,v=>{const g=v.target;g.hasPointerCapture(v.pointerId)&&g.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(m(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:Zs(a.onKeyDown,v=>{const g=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&u(v.key),!(g&&v.key===" ")&&Sre.includes(v.key)&&(m(),v.preventDefault())})})))}),Dre="SelectValue",Ore=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:o,...l}=e,c=Ku(Dre,r),{onValueNodeHasChildrenChange:d}=c,f=i!==void 0,u=nl(t,c.onValueNodeChange);return ud(()=>{d(f)},[d,f]),w.createElement(ho.span,st({},l,{ref:u,style:{pointerEvents:"none"}}),c.value===void 0&&o!==void 0?o:i)}),Lre=w.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return w.createElement(ho.span,st({"aria-hidden":!0},a,{ref:t}),s||"▼")}),Rre=e=>w.createElement(Nte,st({asChild:!0},e)),Mh="SelectContent",$re=w.forwardRef((e,t)=>{const r=Ku(Mh,e.__scopeSelect),[s,a]=w.useState();if(ud(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?rl.createPortal(w.createElement(B7,{scope:e.__scopeSelect},w.createElement(jj.Slot,{scope:e.__scopeSelect},w.createElement("div",null,e.children))),i):null}return w.createElement(Fre,st({},e,{ref:t}))}),Nl=10,[B7,Yu]=Tm(Mh),Fre=w.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:v,hideWhenDetached:g,avoidCollisions:p,...x}=e,b=Ku(Mh,r),[y,j]=w.useState(null),[E,C]=w.useState(null),S=nl(t,he=>j(he)),[N,_]=w.useState(null),[I,T]=w.useState(null),A=wj(r),[O,D]=w.useState(!1),$=w.useRef(!1);w.useEffect(()=>{if(y)return zte(y)},[y]),NZ();const M=w.useCallback(he=>{const[me,...oe]=A().map(ge=>ge.ref.current),[we]=oe.slice(-1),ve=document.activeElement;for(const ge of he)if(ge===ve||(ge==null||ge.scrollIntoView({block:"nearest"}),ge===me&&E&&(E.scrollTop=0),ge===we&&E&&(E.scrollTop=E.scrollHeight),ge==null||ge.focus(),document.activeElement!==ve))return},[A,E]),R=w.useCallback(()=>M([N,y]),[M,N,y]);w.useEffect(()=>{O&&R()},[O,R]);const{onOpenChange:B,triggerPointerDownPosRef:U}=b;w.useEffect(()=>{if(y){let he={x:0,y:0};const me=we=>{var ve,ge,De,xe;he={x:Math.abs(Math.round(we.pageX)-((ve=(ge=U.current)===null||ge===void 0?void 0:ge.x)!==null&&ve!==void 0?ve:0)),y:Math.abs(Math.round(we.pageY)-((De=(xe=U.current)===null||xe===void 0?void 0:xe.y)!==null&&De!==void 0?De:0))}},oe=we=>{he.x<=10&&he.y<=10?we.preventDefault():y.contains(we.target)||B(!1),document.removeEventListener("pointermove",me),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",oe,{capture:!0})}}},[y,B,U]),w.useEffect(()=>{const he=()=>B(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[B]);const[W,q]=q7(he=>{const me=A().filter(ve=>!ve.disabled),oe=me.find(ve=>ve.ref.current===document.activeElement),we=W7(me,he,oe);we&&setTimeout(()=>we.ref.current.focus())}),L=w.useCallback((he,me,oe)=>{const we=!$.current&&!oe;(b.value!==void 0&&b.value===me||we)&&(_(he),we&&($.current=!0))},[b.value]),V=w.useCallback(()=>y==null?void 0:y.focus(),[y]),G=w.useCallback((he,me,oe)=>{const we=!$.current&&!oe;(b.value!==void 0&&b.value===me||we)&&T(he)},[b.value]),Z=s==="popper"?dI:Mre,te=Z===dI?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:v,hideWhenDetached:g,avoidCollisions:p}:{};return w.createElement(B7,{scope:r,content:y,viewport:E,onViewportChange:C,itemRefCallback:L,selectedItem:N,onItemLeave:V,itemTextRefCallback:G,focusSelectedItem:R,selectedItemText:I,position:s,isPositioned:O,searchRef:W},w.createElement(Nre,{as:EE,allowPinchZoom:!0},w.createElement(IZ,{asChild:!0,trapped:b.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:Zs(a,he=>{var me;(me=b.trigger)===null||me===void 0||me.focus({preventScroll:!0}),he.preventDefault()})},w.createElement(bZ,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>b.onOpenChange(!1)},w.createElement(Z,st({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:he=>he.preventDefault()},x,te,{onPlaced:()=>D(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Zs(x.onKeyDown,he=>{const me=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!me&&he.key.length===1&&q(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let we=A().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(he.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const ve=he.target,ge=we.indexOf(ve);we=we.slice(ge+1)}setTimeout(()=>M(we)),he.preventDefault()}})}))))))}),Mre=w.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,i=Ku(Mh,r),o=Yu(Mh,r),[l,c]=w.useState(null),[d,f]=w.useState(null),u=nl(t,S=>f(S)),h=wj(r),m=w.useRef(!1),v=w.useRef(!0),{viewport:g,selectedItem:p,selectedItemText:x,focusSelectedItem:b}=o,y=w.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&p&&x){const S=i.trigger.getBoundingClientRect(),N=d.getBoundingClientRect(),_=i.valueNode.getBoundingClientRect(),I=x.getBoundingClientRect();if(i.dir!=="rtl"){const ve=I.left-N.left,ge=_.left-ve,De=S.left-ge,xe=S.width+De,le=Math.max(xe,N.width),re=window.innerWidth-Nl,Ce=F_(ge,[Nl,re-le]);l.style.minWidth=xe+"px",l.style.left=Ce+"px"}else{const ve=N.right-I.right,ge=window.innerWidth-_.right-ve,De=window.innerWidth-S.right-ge,xe=S.width+De,le=Math.max(xe,N.width),re=window.innerWidth-Nl,Ce=F_(ge,[Nl,re-le]);l.style.minWidth=xe+"px",l.style.right=Ce+"px"}const T=h(),A=window.innerHeight-Nl*2,O=g.scrollHeight,D=window.getComputedStyle(d),$=parseInt(D.borderTopWidth,10),M=parseInt(D.paddingTop,10),R=parseInt(D.borderBottomWidth,10),B=parseInt(D.paddingBottom,10),U=$+M+O+B+R,W=Math.min(p.offsetHeight*5,U),q=window.getComputedStyle(g),L=parseInt(q.paddingTop,10),V=parseInt(q.paddingBottom,10),G=S.top+S.height/2-Nl,Z=A-G,te=p.offsetHeight/2,he=p.offsetTop+te,me=$+M+he,oe=U-me;if(me<=G){const ve=p===T[T.length-1].ref.current;l.style.bottom="0px";const ge=d.clientHeight-g.offsetTop-g.offsetHeight,De=Math.max(Z,te+(ve?V:0)+ge+R),xe=me+De;l.style.height=xe+"px"}else{const ve=p===T[0].ref.current;l.style.top="0px";const De=Math.max(G,$+g.offsetTop+(ve?L:0)+te)+oe;l.style.height=De+"px",g.scrollTop=me-G+g.offsetTop}l.style.margin=`${Nl}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=A+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,d,g,p,x,i.dir,s]);ud(()=>y(),[y]);const[j,E]=w.useState();ud(()=>{d&&E(window.getComputedStyle(d).zIndex)},[d]);const C=w.useCallback(S=>{S&&v.current===!0&&(y(),b==null||b(),v.current=!1)},[y,b]);return w.createElement(Bre,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:C},w.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},w.createElement(ho.div,st({},a,{ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}}))))}),dI=w.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=Nl,...i}=e,o=PE(r);return w.createElement(pte,st({},o,i,{ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Bre,TE]=Tm(Mh,{}),uI="SelectViewport",zre=w.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=Yu(uI,r),i=TE(uI,r),o=nl(t,a.onViewportChange),l=w.useRef(0);return w.createElement(w.Fragment,null,w.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),w.createElement(jj.Slot,{scope:r},w.createElement(ho.div,st({"data-radix-select-viewport":"",role:"presentation"},s,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:Zs(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:u}=i;if(u!=null&&u.current&&f){const h=Math.abs(l.current-d.scrollTop);if(h>0){const m=window.innerHeight-Nl*2,v=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),p=Math.max(v,g);if(p<m){const x=p+h,b=Math.min(m,x),y=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=y>0?y:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})}))))}),Ure="SelectGroup",[LRe,Vre]=Tm(Ure),qre="SelectLabel",Wre=w.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=Vre(qre,r);return w.createElement(ho.div,st({id:a.id},s,{ref:t}))}),eC="SelectItem",[Hre,z7]=Tm(eC),Gre=w.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...o}=e,l=Ku(eC,r),c=Yu(eC,r),d=l.value===s,[f,u]=w.useState(i??""),[h,m]=w.useState(!1),v=nl(t,x=>{var b;return(b=c.itemRefCallback)===null||b===void 0?void 0:b.call(c,x,s,a)}),g=o7(),p=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};return w.createElement(Hre,{scope:r,value:s,disabled:a,textId:g,isSelected:d,onItemTextChange:w.useCallback(x=>{u(b=>{var y;return b||((y=x==null?void 0:x.textContent)!==null&&y!==void 0?y:"").trim()})},[])},w.createElement(jj.ItemSlot,{scope:r,value:s,disabled:a,textValue:f},w.createElement(ho.div,st({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},o,{ref:v,onFocus:Zs(o.onFocus,()=>m(!0)),onBlur:Zs(o.onBlur,()=>m(!1)),onPointerUp:Zs(o.onPointerUp,p),onPointerMove:Zs(o.onPointerMove,x=>{if(a){var b;(b=c.onItemLeave)===null||b===void 0||b.call(c)}else x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Zs(o.onPointerLeave,x=>{if(x.currentTarget===document.activeElement){var b;(b=c.onItemLeave)===null||b===void 0||b.call(c)}}),onKeyDown:Zs(o.onKeyDown,x=>{var b;((b=c.searchRef)===null||b===void 0?void 0:b.current)!==""&&x.key===" "||(Cre.includes(x.key)&&p(),x.key===" "&&x.preventDefault())})}))))}),G0="SelectItemText",Kre=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...i}=e,o=Ku(G0,r),l=Yu(G0,r),c=z7(G0,r),d=Tre(G0,r),[f,u]=w.useState(null),h=nl(t,x=>u(x),c.onItemTextChange,x=>{var b;return(b=l.itemTextRefCallback)===null||b===void 0?void 0:b.call(l,x,c.value,c.disabled)}),m=f==null?void 0:f.textContent,v=w.useMemo(()=>w.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},m),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:p}=d;return ud(()=>(g(v),()=>p(v)),[g,p,v]),w.createElement(w.Fragment,null,w.createElement(ho.span,st({id:c.textId},i,{ref:h})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?rl.createPortal(i.children,o.valueNode):null)}),Yre="SelectItemIndicator",Xre=w.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return z7(Yre,r).isSelected?w.createElement(ho.span,st({"aria-hidden":!0},s,{ref:t})):null}),fI="SelectScrollUpButton",Qre=w.forwardRef((e,t)=>{const r=Yu(fI,e.__scopeSelect),s=TE(fI,e.__scopeSelect),[a,i]=w.useState(!1),o=nl(t,s.onScrollButtonChange);return ud(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=l.scrollTop>0;i(d)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?w.createElement(U7,st({},e,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null}),hI="SelectScrollDownButton",Jre=w.forwardRef((e,t)=>{const r=Yu(hI,e.__scopeSelect),s=TE(hI,e.__scopeSelect),[a,i]=w.useState(!1),o=nl(t,s.onScrollButtonChange);return ud(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<d;i(f)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?w.createElement(U7,st({},e,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null}),U7=w.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,i=Yu("SelectScrollButton",r),o=w.useRef(null),l=wj(r),c=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),ud(()=>{var d;const f=l().find(u=>u.ref.current===document.activeElement);f==null||(d=f.ref.current)===null||d===void 0||d.scrollIntoView({block:"nearest"})},[l]),w.createElement(ho.div,st({"aria-hidden":!0},a,{ref:t,style:{flexShrink:0,...a.style},onPointerDown:Zs(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:Zs(a.onPointerMove,()=>{var d;(d=i.onItemLeave)===null||d===void 0||d.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:Zs(a.onPointerLeave,()=>{c()})}))}),Zre=w.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return w.createElement(ho.div,st({"aria-hidden":!0},s,{ref:t}))}),V7=w.forwardRef((e,t)=>{const{value:r,...s}=e,a=w.useRef(null),i=nl(t,a),o=Tte(r);return w.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&f){const u=new Event("change",{bubbles:!0});f.call(l,r),l.dispatchEvent(u)}},[o,r]),w.createElement($te,{asChild:!0},w.createElement("select",st({},s,{ref:i,defaultValue:r})))});V7.displayName="BubbleSelect";function q7(e){const t=Gl(e),r=w.useRef(""),s=w.useRef(0),a=w.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=w.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function W7(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=ene(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function ene(e,t){return e.map((r,s)=>e[(t+s)%e.length])}const tne=_re,H7=kre,rne=Ore,nne=Lre,sne=Rre,G7=$re,ane=zre,K7=Wre,Y7=Gre,ine=Kre,one=Xre,X7=Qre,Q7=Jre,J7=Zre,Ve=tne,qe=rne,ze=w.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(H7,{ref:s,className:He("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(nne,{asChild:!0,children:n.jsx(gM,{className:"h-4 w-4 opacity-50"})})]}));ze.displayName=H7.displayName;const Z7=w.forwardRef(({className:e,...t},r)=>n.jsx(X7,{ref:r,className:He("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(KY,{className:"h-4 w-4"})}));Z7.displayName=X7.displayName;const e8=w.forwardRef(({className:e,...t},r)=>n.jsx(Q7,{ref:r,className:He("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(gM,{className:"h-4 w-4"})}));e8.displayName=Q7.displayName;const Ue=w.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(sne,{children:n.jsxs(G7,{ref:a,className:He("relative z-50 max-h-96 min-w-[8rem] overflow-auto rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(Z7,{}),n.jsx(ane,{className:He("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(e8,{})]})}));Ue.displayName=G7.displayName;const lne=w.forwardRef(({className:e,...t},r)=>n.jsx(K7,{ref:r,className:He("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));lne.displayName=K7.displayName;const K=w.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(Y7,{ref:s,className:He("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(one,{children:n.jsx(dj,{className:"h-4 w-4"})})}),n.jsx(ine,{children:t})]}));K.displayName=Y7.displayName;const cne=w.forwardRef(({className:e,...t},r)=>n.jsx(J7,{ref:r,className:He("-mx-1 my-1 h-px bg-muted",e),...t}));cne.displayName=J7.displayName;var dne="Label",t8=w.forwardRef((e,t)=>n.jsx(An.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));t8.displayName=dne;var r8=t8;const une=cj("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ae=w.forwardRef(({className:e,...t},r)=>n.jsx(r8,{ref:r,className:He(une(),e),...t}));ae.displayName=r8.displayName;var Xn=(e=>(e.NEW="new",e.CONTACTED="contacted",e.QUALIFIED="qualified",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(Xn||{});function mo(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState([]),[h,m]=w.useState(!1);w.useEffect(()=>{v()},[]);const v=()=>{const A=[{id:"1",name:"Website Contact Form",type:"website",isActive:!0,trackingCode:"WEB_CONTACT",conversionRate:15.5,createdAt:new Date("2024-01-01")},{id:"2",name:"Facebook Ads",type:"advertising",isActive:!0,trackingCode:"FB_ADS",conversionRate:8.2,createdAt:new Date("2024-01-01")},{id:"3",name:"Customer Referral",type:"referral",isActive:!0,conversionRate:35.8,createdAt:new Date("2024-01-01")},{id:"4",name:"RV Show",type:"event",isActive:!0,trackingCode:"RV_SHOW_2024",conversionRate:22.1,createdAt:new Date("2024-01-01")},{id:"5",name:"Google Ads",type:"advertising",isActive:!0,trackingCode:"GOOGLE_ADS",conversionRate:12.3,createdAt:new Date("2024-01-01")},{id:"6",name:"Walk-in",type:"other",isActive:!0,conversionRate:45.2,createdAt:new Date("2024-01-01")}],O=[{id:"rep-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"rep-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"rep-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],D=pn("renter-insight-leads",[{id:"1",firstName:"John",lastName:"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website Contact Form",sourceId:"1",status:Xn.NEW,assignedTo:"rep-001",notes:"Interested in Class A Motorhome, budget $150k-200k",score:85,lastActivity:new Date("2024-01-20"),customFields:{budget:"$150k-200k",timeframe:"3-6 months",experience:"First-time buyer"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@email.com",phone:"(555) 987-6543",source:"Customer Referral",sourceId:"3",status:Xn.QUALIFIED,assignedTo:"rep-002",notes:"Looking for travel trailer under $50k, referred by Mike Davis",score:92,lastActivity:new Date("2024-01-18"),customFields:{budget:"Under $50k",timeframe:"1-3 months",experience:"Experienced RVer"},createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-18")}]),$=pn("renter-insight-activities",[{id:"1",leadId:"1",type:"call",description:"Initial qualification call",outcome:"positive",duration:25,completedDate:new Date("2024-01-20"),userId:"rep-001",createdAt:new Date("2024-01-20")},{id:"2",leadId:"2",type:"email",description:"Sent product brochures",outcome:"positive",completedDate:new Date("2024-01-18"),userId:"rep-002",createdAt:new Date("2024-01-18")}]),M=[{leadId:"1",totalScore:85,demographicScore:30,behaviorScore:25,engagementScore:30,lastCalculated:new Date("2024-01-20"),factors:[{factor:"Budget Match",points:25,reason:"Budget aligns with inventory"},{factor:"Response Time",points:20,reason:"Quick response to outreach"},{factor:"Engagement Level",points:15,reason:"High email open rates"}]}],R=[{id:"1",leadId:"1",userId:"rep-001",type:"follow_up",title:"Follow up on motorhome interest",description:"Schedule showroom visit",dueDate:new Date("2024-01-25"),isCompleted:!1,priority:"high",createdAt:new Date("2024-01-20")}];s(A),u(O),t(D),i($),l(M),d(R)},g=A=>{Gr("renter-insight-leads",A)},p=A=>{Gr("renter-insight-activities",A)},x=async A=>{m(!0);try{const O={id:Math.random().toString(36).substr(2,9),firstName:A.firstName||"",lastName:A.lastName||"",email:A.email||"",phone:A.phone||"",source:A.source||"",sourceId:A.sourceId||"",status:Xn.NEW,assignedTo:A.assignedTo,notes:A.notes||"",score:0,lastActivity:new Date,customFields:A.customFields||{},createdAt:new Date,updatedAt:new Date},D=[...e,O];return t(D),g(D),await j({leadId:O.id,type:"note",description:`Lead created from ${O.source}`,userId:"current-user"}),await E(O.id),O}finally{m(!1)}},b=async(A,O)=>{const D=e.map($=>$.id===A?{...$,status:O,updatedAt:new Date}:$);t(D),g(D),await j({leadId:A,type:"status_change",description:`Status changed to ${O}`,userId:"current-user"})},y=async(A,O)=>{var $;const D=e.map(M=>M.id===A?{...M,assignedTo:O,updatedAt:new Date}:M);t(D),g(D),await j({leadId:A,type:"note",description:`Lead assigned to ${($=f.find(M=>M.id===O))==null?void 0:$.name}`,userId:"current-user"})},j=async A=>{const O={id:Math.random().toString(36).substr(2,9),leadId:A.leadId||"",type:A.type||"note",description:A.description||"",outcome:A.outcome,duration:A.duration,scheduledDate:A.scheduledDate,completedDate:A.completedDate||new Date,userId:A.userId||"current-user",metadata:A.metadata,createdAt:new Date},D=[...a,O];i(D),p(D);const $=e.map(M=>M.id===O.leadId?{...M,lastActivity:new Date,updatedAt:new Date}:M);t($),g($),await E(O.leadId)},E=async A=>{var te,he,me;const O=e.find(oe=>oe.id===A);if(!O)return;const D=a.filter(oe=>oe.leadId===A);let $=0,M=0,R=0;const B=[];(te=O.customFields)!=null&&te.budget&&($+=20,B.push({factor:"Budget Provided",points:20,reason:"Customer provided budget information"})),((he=O.customFields)==null?void 0:he.timeframe)==="1-3 months"?($+=25,B.push({factor:"Short Timeframe",points:25,reason:"Ready to purchase soon"})):((me=O.customFields)==null?void 0:me.timeframe)==="3-6 months"&&($+=15,B.push({factor:"Medium Timeframe",points:15,reason:"Moderate purchase timeline"})),D.filter(oe=>oe.type==="call").length>0&&(M+=30,B.push({factor:"Phone Engagement",points:30,reason:"Participated in phone calls"})),D.filter(oe=>oe.type==="email").length>2&&(M+=20,B.push({factor:"Email Engagement",points:20,reason:"Active email communication"})),D.filter(oe=>new Date(oe.createdAt).getTime()>Date.now()-7*24*60*60*1e3).length>0&&(R+=25,B.push({factor:"Recent Activity",points:25,reason:"Active in the last 7 days"}));const L=D.filter(oe=>oe.outcome==="positive").length;L>0&&(R+=L*10,B.push({factor:"Positive Interactions",points:L*10,reason:`${L} positive interactions`}));const V=$+M+R,G={leadId:A,totalScore:V,demographicScore:$,behaviorScore:M,engagementScore:R,lastCalculated:new Date,factors:B};l(oe=>oe.filter(we=>we.leadId!==A).concat(G));const Z=e.map(oe=>oe.id===A?{...oe,score:V,updatedAt:new Date}:oe);t(Z),g(Z)};return{leads:e,sources:r,activities:a,scores:o,reminders:c,salesReps:f,loading:h,createLead:x,updateLeadStatus:b,assignLead:y,logActivity:j,calculateLeadScore:E,createReminder:async A=>{const O={id:Math.random().toString(36).substr(2,9),leadId:A.leadId||"",userId:A.userId||"current-user",type:A.type||"follow_up",title:A.title||"",description:A.description||"",dueDate:A.dueDate||new Date,isCompleted:!1,priority:A.priority||"medium",createdAt:new Date};return d(D=>[...D,O]),O},completeReminder:async A=>{d(O=>O.map(D=>D.id===A?{...D,isCompleted:!0}:D))},getLeadsByRep:A=>e.filter(O=>O.assignedTo===A),getActivitiesByLead:A=>a.filter(O=>O.leadId===A),getRemindersByUser:A=>c.filter(O=>O.userId===A&&!O.isCompleted),getLeadScore:A=>o.find(O=>O.leadId===A)}}function Xu({onClose:e,onSuccess:t}){const{sources:r,salesReps:s,createLead:a}=mo(),{toast:i}=At(),[o,l]=w.useState(!1),[c,d]=w.useState({firstName:"",lastName:"",email:"",phone:"",source:"",sourceId:"",assignedTo:"",notes:"",customFields:{budget:"",timeframe:"",experience:"",interests:"",preferredContact:"email"}}),[f,u]=w.useState({}),h=()=>{const p={};return c.firstName.trim()||(p.firstName="First name is required"),c.lastName.trim()||(p.lastName="Last name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(p.email="Please enter a valid email address"):p.email="Email is required",c.phone.trim()||(p.phone="Phone number is required"),c.sourceId||(p.sourceId="Lead source is required"),u(p),Object.keys(p).length===0},m=async p=>{if(p.preventDefault(),!h()){i({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}l(!0);try{const x=r.find(j=>j.id===c.sourceId),b={firstName:c.firstName.trim(),lastName:c.lastName.trim(),email:c.email.trim().toLowerCase(),phone:c.phone.trim(),source:(x==null?void 0:x.name)||"",sourceId:c.sourceId,assignedTo:c.assignedTo||void 0,notes:c.notes.trim(),customFields:{...c.customFields,interests:c.customFields.interests.trim()}},y=await a(b);i({title:"Lead Created Successfully!",description:`${y.firstName} ${y.lastName} has been added to your CRM.`,variant:"default"}),t(y),e()}catch(x){console.error("Error creating lead:",x),i({title:"Error Creating Lead",description:"There was a problem creating the lead. Please try again.",variant:"destructive"})}finally{l(!1)}},v=(p,x)=>{d(b=>({...b,[p]:x})),f[p]&&u(b=>({...b,[p]:""}))},g=(p,x)=>{d(b=>({...b,customFields:{...b.customFields,[p]:x}}))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl flex items-center",children:[n.jsx(fs,{className:"h-5 w-5 mr-2 text-blue-500"}),"Add New Lead"]}),n.jsx(Fe,{children:"Create a new lead and start the sales process"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(fs,{className:"h-4 w-4 mr-2"}),"Contact Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"firstName",children:"First Name *"}),n.jsx(Pe,{id:"firstName",value:c.firstName,onChange:p=>v("firstName",p.target.value),placeholder:"Enter first name",className:f.firstName?"border-red-500":""}),f.firstName&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.firstName})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"lastName",children:"Last Name *"}),n.jsx(Pe,{id:"lastName",value:c.lastName,onChange:p=>v("lastName",p.target.value),placeholder:"Enter last name",className:f.lastName?"border-red-500":""}),f.lastName&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.lastName})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"email",children:"Email Address *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Qr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"email",type:"email",value:c.email,onChange:p=>v("email",p.target.value),placeholder:"Enter email address",className:`pl-10 ${f.email?"border-red-500":""}`})]}),f.email&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.email})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"phone",children:"Phone Number *"}),n.jsxs("div",{className:"relative",children:[n.jsx(wm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"phone",type:"tel",value:c.phone,onChange:p=>v("phone",p.target.value),placeholder:"Enter phone number",className:`pl-10 ${f.phone?"border-red-500":""}`})]}),f.phone&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.phone})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(fE,{className:"h-4 w-4 mr-2"}),"Lead Details"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"source",children:"Lead Source *"}),n.jsxs(Ve,{value:c.sourceId,onValueChange:p=>v("sourceId",p),children:[n.jsx(ze,{className:f.sourceId?"border-red-500":"",children:n.jsx(qe,{placeholder:"Select lead source"})}),n.jsx(Ue,{children:r.map(p=>n.jsx(K,{value:p.id,children:p.name},p.id))})]}),f.sourceId&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.sourceId})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"assignedTo",children:"Assign to Sales Rep"}),n.jsxs(Ve,{value:c.assignedTo,onValueChange:p=>v("assignedTo",p),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select sales rep (optional)"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"Unassigned"}),s.map(p=>n.jsx(K,{value:p.id,children:p.name},p.id))]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(It,{className:"h-4 w-4 mr-2"}),"Additional Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"budget",children:"Budget Range"}),n.jsxs(Ve,{value:c.customFields.budget,onValueChange:p=>g("budget",p),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select budget range"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"Under $50k",children:"Under $50k"}),n.jsx(K,{value:"$50k-$100k",children:"$50k-$100k"}),n.jsx(K,{value:"$100k-$150k",children:"$100k-$150k"}),n.jsx(K,{value:"$150k-$200k",children:"$150k-$200k"}),n.jsx(K,{value:"$200k+",children:"$200k+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"timeframe",children:"Purchase Timeframe"}),n.jsxs(Ve,{value:c.customFields.timeframe,onValueChange:p=>g("timeframe",p),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select timeframe"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"Immediate",children:"Immediate (within 1 month)"}),n.jsx(K,{value:"1-3 months",children:"1-3 months"}),n.jsx(K,{value:"3-6 months",children:"3-6 months"}),n.jsx(K,{value:"6-12 months",children:"6-12 months"}),n.jsx(K,{value:"12+ months",children:"12+ months"})]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"experience",children:"RV Experience"}),n.jsxs(Ve,{value:c.customFields.experience,onValueChange:p=>g("experience",p),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select experience level"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"First-time buyer",children:"First-time buyer"}),n.jsx(K,{value:"Some experience",children:"Some experience"}),n.jsx(K,{value:"Experienced RVer",children:"Experienced RVer"}),n.jsx(K,{value:"Expert/Full-timer",children:"Expert/Full-timer"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"preferredContact",children:"Preferred Contact Method"}),n.jsxs(Ve,{value:c.customFields.preferredContact,onValueChange:p=>g("preferredContact",p),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select contact method"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"phone",children:"Phone"}),n.jsx(K,{value:"text",children:"Text/SMS"}),n.jsx(K,{value:"any",children:"Any method"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"interests",children:"Interests/Requirements"}),n.jsx(Pe,{id:"interests",value:c.customFields.interests,onChange:p=>g("interests",p.target.value),placeholder:"e.g., Class A Motorhome, Solar panels, Pet-friendly"})]})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes"}),n.jsx(tr,{id:"notes",value:c.notes,onChange:p=>v("notes",p.target.value),placeholder:"Add any additional notes about this lead...",rows:3})]})}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:e,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Lead..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Create Lead"]})})]})]})})]})})}const fne=[{name:"Total Leads",value:"2,651",change:"+4.75%",changeType:"positive",icon:Ln},{name:"Inventory Units",value:"847",change:"+54.02%",changeType:"positive",icon:Ws},{name:"Active Quotes",value:"124",change:"-1.39%",changeType:"negative",icon:cs},{name:"Monthly Revenue",value:"$405,091",change:"+10.18%",changeType:"positive",icon:It}],hne=[{id:1,type:"lead",title:"New lead from website",description:"John Smith interested in Class A Motorhome",time:"2 minutes ago"},{id:2,type:"quote",title:"Quote sent to customer",description:"Quote #Q-2024-001 sent to Sarah Johnson",time:"15 minutes ago"},{id:3,type:"service",title:"Service appointment scheduled",description:"Annual maintenance for RV #VIN123456",time:"1 hour ago"},{id:4,type:"delivery",title:"Delivery completed",description:"Travel Trailer delivered to Mike Davis",time:"2 hours ago"}];function mne(){const[e,t]=w.useState(!1),r=a=>{console.log("New lead created from dashboard:",a)},s=a=>{switch(a){case"add-lead":t(!0);break;case"add-inventory":window.location.href="/inventory";break;case"create-quote":window.location.href="/quotes";break;case"schedule-service":window.location.href="/service";break}};return n.jsxs("div",{className:"space-y-6",children:[e&&n.jsx(Xu,{onClose:()=>t(!1),onSuccess:r}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Welcome to your Renter Insight CRM/DMS dashboard"})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:fne.map(a=>n.jsxs(ue,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:a.name}),n.jsx(a.icon,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:a.value}),n.jsxs("p",{className:`text-xs ${a.changeType==="positive"?"text-green-600":"text-red-600"}`,children:[a.change," from last month"]})]})]},a.name))}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Recent Activity"}),n.jsx(Fe,{children:"Latest updates from your dealership"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:hne.map(a=>n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:a.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.time})]})]},a.id))})})]}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Quick Actions"}),n.jsx(Fe,{children:"Common tasks and shortcuts"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-3",children:[n.jsxs("button",{onClick:()=>s("add-lead"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ln,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Add New Lead"})]}),n.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs("button",{onClick:()=>s("add-inventory"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ws,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Add Inventory"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]}),n.jsxs("button",{onClick:()=>s("create-quote"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(cs,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Create Quote"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]}),n.jsxs("button",{onClick:()=>s("schedule-service"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Lr,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Schedule Service"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]})]})})]})]})]})}function pne(){const[e,t]=w.useState("admin@renterinsight.com"),[r,s]=w.useState("password"),{login:a,isLoading:i}=Nm(),{toast:o}=At(),l=aE(),c=async d=>{d.preventDefault();try{await a(e,r),l("/")}catch{o({title:"Login Failed",description:"Invalid email or password",variant:"destructive"})}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsxs(be,{className:"text-center",children:[n.jsx(je,{className:"text-2xl font-bold text-primary",children:"Renter Insight CRM/DMS"}),n.jsx(Fe,{children:"Sign in to your account to continue"})]}),n.jsxs(fe,{children:[n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsx("div",{children:n.jsx(Pe,{type:"email",placeholder:"Email",value:e,onChange:d=>t(d.target.value),required:!0,autoComplete:"username"})}),n.jsx("div",{children:n.jsx(Pe,{type:"password",placeholder:"Password",value:r,onChange:d=>s(d.target.value),required:!0,autoComplete:"current-password"})}),n.jsx(J,{type:"submit",className:"w-full",disabled:i,children:i?"Signing in...":"Sign In"})]}),n.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"Demo credentials: admin@renterinsight.com / password"})]})]})})}function vne({children:e}){const{user:t,isLoading:r}=Nm();return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):t?n.jsx(n.Fragment,{children:e}):n.jsx(zK,{to:"/login",replace:!0})}const gne=cj("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Re({className:e,variant:t,...r}){return n.jsx("div",{className:He(gne({variant:t}),e),...r})}function xne(e){const t=e+"CollectionProvider",[r,s]=Vu(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:x}=g,b=ce.useRef(null),y=ce.useRef(new Map).current;return n.jsx(a,{scope:p,itemMap:y,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Lh(l),d=ce.forwardRef((g,p)=>{const{scope:x,children:b}=g,y=i(l,x),j=Si(p,y.collectionRef);return n.jsx(c,{ref:j,children:b})});d.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",h=Lh(f),m=ce.forwardRef((g,p)=>{const{scope:x,children:b,...y}=g,j=ce.useRef(null),E=Si(p,j),C=i(f,x);return ce.useEffect(()=>(C.itemMap.set(j,{ref:j,...y}),()=>void C.itemMap.delete(j))),n.jsx(h,{[u]:"",ref:E,children:b})});m.displayName=f;function v(g){const p=i(e+"CollectionConsumer",g);return ce.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((C,S)=>y.indexOf(C.ref.current)-y.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},v,s]}var yne=Zo[" useId ".trim().toString()]||(()=>{}),bne=0;function jne(e){const[t,r]=w.useState(yne());return ld(()=>{e||r(s=>s??String(bne++))},[e]),e||(t?`radix-${t}`:"")}function wne(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}var Nne=w.createContext(void 0);function Sne(e){const t=w.useContext(Nne);return e||t||"ltr"}var NN="rovingFocusGroup.onEntryFocus",Cne={bubbles:!1,cancelable:!0},ax="RovingFocusGroup",[tC,n8,Ane]=xne(ax),[Ene,s8]=Vu(ax,[Ane]),[Pne,Tne]=Ene(ax),a8=w.forwardRef((e,t)=>n.jsx(tC.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(tC.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(_ne,{...e,ref:t})})}));a8.displayName=ax;var _ne=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...u}=e,h=w.useRef(null),m=Si(t,h),v=Sne(i),[g,p]=oj({prop:o,defaultProp:l??null,onChange:c,caller:ax}),[x,b]=w.useState(!1),y=wne(d),j=n8(r),E=w.useRef(!1),[C,S]=w.useState(0);return w.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(NN,y),()=>N.removeEventListener(NN,y)},[y]),n.jsx(Pne,{scope:r,orientation:s,dir:v,loop:a,currentTabStopId:g,onItemFocus:w.useCallback(N=>p(N),[p]),onItemShiftTab:w.useCallback(()=>b(!0),[]),onFocusableItemAdd:w.useCallback(()=>S(N=>N+1),[]),onFocusableItemRemove:w.useCallback(()=>S(N=>N-1),[]),children:n.jsx(An.div,{tabIndex:x||C===0?-1:0,"data-orientation":s,...u,ref:m,style:{outline:"none",...e.style},onMouseDown:on(e.onMouseDown,()=>{E.current=!0}),onFocus:on(e.onFocus,N=>{const _=!E.current;if(N.target===N.currentTarget&&_&&!x){const I=new CustomEvent(NN,Cne);if(N.currentTarget.dispatchEvent(I),!I.defaultPrevented){const T=j().filter(M=>M.focusable),A=T.find(M=>M.active),O=T.find(M=>M.id===g),$=[A,O,...T].filter(Boolean).map(M=>M.ref.current);l8($,f)}}E.current=!1}),onBlur:on(e.onBlur,()=>b(!1))})})}),i8="RovingFocusGroupItem",o8=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=jne(),d=i||c,f=Tne(i8,r),u=f.currentTabStopId===d,h=n8(r),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:g}=f;return w.useEffect(()=>{if(s)return m(),()=>v()},[s,m,v]),n.jsx(tC.ItemSlot,{scope:r,id:d,focusable:s,active:a,children:n.jsx(An.span,{tabIndex:u?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:on(e.onMouseDown,p=>{s?f.onItemFocus(d):p.preventDefault()}),onFocus:on(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:on(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){f.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const x=Dne(p,f.orientation,f.dir);if(x!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=h().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const j=y.indexOf(p.currentTarget);y=f.loop?One(y,j+1):y.slice(j+1)}setTimeout(()=>l8(y))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:g!=null}):o})})});o8.displayName=i8;var Ine={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kne(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Dne(e,t,r){const s=kne(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Ine[s]}function l8(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function One(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var Lne=a8,Rne=o8,$ne=w.createContext(void 0);function Fne(e){const t=w.useContext($ne);return e||t||"ltr"}var Mne=Zo[" useId ".trim().toString()]||(()=>{}),Bne=0;function zne(e){const[t,r]=w.useState(Mne());return ld(()=>{e||r(s=>s??String(Bne++))},[e]),e||(t?`radix-${t}`:"")}var Nj="Tabs",[Une,RRe]=Vu(Nj,[s8]),c8=s8(),[Vne,_E]=Une(Nj),d8=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=Fne(l),[u,h]=oj({prop:s,onChange:a,defaultProp:i??"",caller:Nj});return n.jsx(Vne,{scope:r,baseId:zne(),value:u,onValueChange:h,orientation:o,dir:f,activationMode:c,children:n.jsx(An.div,{dir:f,"data-orientation":o,...d,ref:t})})});d8.displayName=Nj;var u8="TabsList",f8=w.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,i=_E(u8,r),o=c8(r);return n.jsx(Lne,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:n.jsx(An.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});f8.displayName=u8;var h8="TabsTrigger",m8=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=e,o=_E(h8,r),l=c8(r),c=g8(o.baseId,s),d=x8(o.baseId,s),f=s===o.value;return n.jsx(Rne,{asChild:!0,...l,focusable:!a,active:f,children:n.jsx(An.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:on(e.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?o.onValueChange(s):u.preventDefault()}),onKeyDown:on(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(s)}),onFocus:on(e.onFocus,()=>{const u=o.activationMode!=="manual";!f&&!a&&u&&o.onValueChange(s)})})})});m8.displayName=h8;var p8="TabsContent",v8=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...o}=e,l=_E(p8,r),c=g8(l.baseId,s),d=x8(l.baseId,s),f=s===l.value,u=w.useRef(f);return w.useEffect(()=>{const h=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(h)},[]),n.jsx(ij,{present:a||f,children:({present:h})=>n.jsx(An.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:h&&i})})});v8.displayName=p8;function g8(e,t){return`${e}-trigger-${t}`}function x8(e,t){return`${e}-content-${t}`}var qne=d8,y8=f8,b8=m8,j8=v8;const xr=qne,hr=w.forwardRef(({className:e,...t},r)=>n.jsx(y8,{ref:r,className:He("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));hr.displayName=y8.displayName;const Qe=w.forwardRef(({className:e,...t},r)=>n.jsx(b8,{ref:r,className:He("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Qe.displayName=b8.displayName;const et=w.forwardRef(({className:e,...t},r)=>n.jsx(j8,{ref:r,className:He("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));et.displayName=j8.displayName;const SN=[{id:"1",name:"New",order:1,probability:10,isActive:!0,color:"bg-blue-500"},{id:"2",name:"Contacted",order:2,probability:25,isActive:!0,color:"bg-yellow-500"},{id:"3",name:"Qualified",order:3,probability:50,isActive:!0,color:"bg-orange-500"},{id:"4",name:"Proposal",order:4,probability:75,isActive:!0,color:"bg-purple-500"},{id:"5",name:"Negotiation",order:5,probability:90,isActive:!0,color:"bg-indigo-500"},{id:"6",name:"Closed Won",order:6,probability:100,isActive:!0,color:"bg-green-500"},{id:"7",name:"Closed Lost",order:7,probability:0,isActive:!0,color:"bg-red-500"}];function Wne(){var u,h,m;const{leads:e,salesReps:t,activities:r}=mo(),[s,a]=w.useState("all"),[i,o]=w.useState("30"),l=w.useMemo(()=>{const v=s==="all"?e:e.filter(p=>p.assignedTo===s);return SN.map(p=>{const x=v.filter(y=>{switch(p.name.toLowerCase()){case"new":return y.status===Xn.NEW;case"contacted":return y.status===Xn.CONTACTED;case"qualified":return y.status===Xn.QUALIFIED;case"proposal":return y.status===Xn.PROPOSAL;case"negotiation":return y.status===Xn.NEGOTIATION;case"closed won":return y.status===Xn.CLOSED_WON;case"closed lost":return y.status===Xn.CLOSED_LOST;default:return!1}}),b=x.reduce((y,j)=>{var C,S;const E=parseFloat(((S=(C=j.customFields)==null?void 0:C.budget)==null?void 0:S.replace(/[^0-9]/g,""))||"0");return y+E*p.probability/100},0);return{stage:p.name,count:x.length,value:b,averageTime:7,conversionRate:p.probability}})},[e,s]),c=w.useMemo(()=>t.map(g=>{const p=e.filter(I=>I.assignedTo===g.id),b=r.filter(I=>I.userId===g.id).filter(I=>{const T=new Date(I.createdAt),A=new Date;return A.setDate(A.getDate()-7),T>=A}),y=p.filter(I=>[Xn.QUALIFIED,Xn.PROPOSAL,Xn.NEGOTIATION,Xn.CLOSED_WON].includes(I.status)),j=p.filter(I=>I.status===Xn.CLOSED_WON),E=p.filter(I=>I.status===Xn.CLOSED_LOST),C=p.reduce((I,T)=>{var D,$;if(T.status===Xn.CLOSED_WON||T.status===Xn.CLOSED_LOST)return I;const A=parseFloat((($=(D=T.customFields)==null?void 0:D.budget)==null?void 0:$.replace(/[^0-9]/g,""))||"0"),O=SN.find(M=>M.name.toLowerCase()===T.status.replace("_"," "));return I+A*((O==null?void 0:O.probability)||0)/100},0),S=j.length+E.length,N=S>0?j.length/S*100:0,_=j.length>0?j.reduce((I,T)=>{var O,D;const A=parseFloat(((D=(O=T.customFields)==null?void 0:O.budget)==null?void 0:D.replace(/[^0-9]/g,""))||"0");return I+A},0)/j.length:0;return{repId:g.id,repName:g.name,totalLeads:p.length,qualifiedLeads:y.length,closedWon:j.length,closedLost:E.length,pipelineValue:C,conversionRate:N,averageDealSize:_,activitiesThisWeek:b.length}}),[e,t,r]),d=l.reduce((v,g)=>v+g.value,0),f=l.reduce((v,g)=>v+g.count,0);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs(Ve,{value:s,onValueChange:a,children:[n.jsx(ze,{className:"w-48",children:n.jsx(qe,{placeholder:"Select sales rep"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Sales Reps"}),t.map(v=>n.jsx(K,{value:v.id,children:v.name},v.id))]})]}),n.jsxs(Ve,{value:i,onValueChange:o,children:[n.jsx(ze,{className:"w-32",children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"7",children:"7 days"}),n.jsx(K,{value:"30",children:"30 days"}),n.jsx(K,{value:"90",children:"90 days"}),n.jsx(K,{value:"365",children:"1 year"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),n.jsx(It,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:_e(d)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),f," active leads"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Qualified Leads"}),n.jsx(Na,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:((u=l.find(v=>v.stage==="Qualified"))==null?void 0:u.count)||0}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Ready for proposal"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Conversion Rate"}),n.jsx(Na,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[Math.round(s==="all"?c.reduce((v,g)=>v+g.conversionRate,0)/c.length||0:((h=c.find(v=>v.repId===s))==null?void 0:h.conversionRate)||0),"%"]}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Win rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Avg Deal Size"}),n.jsx(It,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:_e(s==="all"?c.reduce((v,g)=>v+g.averageDealSize,0)/c.length||0:((m=c.find(v=>v.repId===s))==null?void 0:m.averageDealSize)||0)}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(It,{className:"h-3 w-3 mr-1"}),"Per closed deal"]})]})]})]}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Sales Pipeline"}),n.jsx(Fe,{children:"Lead distribution across pipeline stages"})]}),n.jsx(fe,{children:n.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:l.map((v,g)=>{const p=SN[g];return n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:He("w-full h-24 rounded-lg flex items-center justify-center text-white font-bold text-lg mb-2",p.color),children:v.count}),n.jsx("h3",{className:"font-semibold text-sm",children:p.name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:_e(v.value)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.probability,"% probability"]})]},p.id)})})})]}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Sales Rep Performance"}),n.jsx(Fe,{children:"Individual performance metrics and activity levels"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:c.map(v=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold",children:v.repName}),n.jsxs(Re,{variant:"secondary",children:[v.totalLeads," leads"]}),n.jsxs(Re,{className:"bg-green-50 text-green-700 border-green-200",children:[v.conversionRate.toFixed(1),"% conversion"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Pipeline Value:"}),n.jsx("div",{className:"font-bold text-primary",children:_e(v.pipelineValue)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Qualified:"}),n.jsx("div",{className:"font-bold text-green-600",children:v.qualifiedLeads})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Closed Won:"}),n.jsx("div",{className:"font-bold text-blue-600",children:v.closedWon})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Activities (7d):"}),n.jsx("div",{className:"font-bold text-purple-600",children:v.activitiesThisWeek})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",children:[n.jsx(Ln,{className:"h-3 w-3 mr-1"}),"View Leads"]}),n.jsxs(J,{variant:"outline",size:"sm",children:[n.jsx(Lr,{className:"h-3 w-3 mr-1"}),"Activities"]})]})]},v.repId))})})]})]})}var IE="Progress",kE=100,[Hne,$Re]=Vu(IE),[Gne,Kne]=Hne(IE),w8=w.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:i=Yne,...o}=e;(a||a===0)&&!mI(a)&&console.error(Xne(`${a}`,"Progress"));const l=mI(a)?a:kE;s!==null&&!pI(s,l)&&console.error(Qne(`${s}`,"Progress"));const c=pI(s,l)?s:null,d=Ab(c)?i(c,l):void 0;return n.jsx(Gne,{scope:r,value:c,max:l,children:n.jsx(An.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ab(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":C8(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});w8.displayName=IE;var N8="ProgressIndicator",S8=w.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=Kne(N8,r);return n.jsx(An.div,{"data-state":C8(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});S8.displayName=N8;function Yne(e,t){return`${Math.round(e/t*100)}%`}function C8(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ab(e){return typeof e=="number"}function mI(e){return Ab(e)&&!isNaN(e)&&e>0}function pI(e,t){return Ab(e)&&!isNaN(e)&&e<=t&&e>=0}function Xne(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kE}\`.`}function Qne(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var A8=w8,Jne=S8;const bu=w.forwardRef(({className:e,value:t,...r},s)=>n.jsx(A8,{ref:s,className:He("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(Jne,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));bu.displayName=A8.displayName;function Zne({score:e,className:t}){const r=i=>i>=80?"text-green-600":i>=60?"text-yellow-600":i>=40?"text-orange-600":"text-red-600",s=i=>i>=80?"bg-green-50 text-green-700 border-green-200":i>=60?"bg-yellow-50 text-yellow-700 border-yellow-200":i>=40?"bg-orange-50 text-orange-700 border-orange-200":"bg-red-50 text-red-700 border-red-200",a=i=>i>=80?"Hot Lead":i>=60?"Warm Lead":i>=40?"Cool Lead":"Cold Lead";return n.jsxs(ue,{className:He("shadow-sm",t),children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:"Lead Score"}),n.jsxs(Fe,{children:["Last calculated: ",e.lastCalculated.toLocaleDateString()]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:He("text-3xl font-bold",r(e.totalScore)),children:e.totalScore}),n.jsx(Re,{className:He("ri-badge-status",s(e.totalScore)),children:a(e.totalScore)})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(fs,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Demographics"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bu,{value:e.demographicScore/50*100,className:"w-20"}),n.jsx("span",{className:"text-sm font-bold w-8",children:e.demographicScore})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ko,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Behavior"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bu,{value:e.behaviorScore/50*100,className:"w-20"}),n.jsx("span",{className:"text-sm font-bold w-8",children:e.behaviorScore})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(XY,{className:"h-4 w-4 text-purple-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Engagement"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bu,{value:e.engagementScore/50*100,className:"w-20"}),n.jsx("span",{className:"text-sm font-bold w-8",children:e.engagementScore})]})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[n.jsx(_t,{className:"h-4 w-4 mr-2"}),"Score Factors"]}),n.jsx("div",{className:"space-y-2",children:e.factors.map((i,o)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-md",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:i.factor}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i.reason})]}),n.jsxs(Re,{variant:"secondary",className:"text-xs",children:["+",i.points]})]},o))})]}),n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-sm text-blue-900 mb-2",children:"Recommendations"}),n.jsxs("div",{className:"space-y-1 text-xs text-blue-700",children:[e.totalScore>=80&&n.jsx("p",{children:"• High priority lead - schedule immediate follow-up"}),e.totalScore>=60&&e.totalScore<80&&n.jsx("p",{children:"• Good potential - maintain regular contact"}),e.totalScore>=40&&e.totalScore<60&&n.jsx("p",{children:"• Nurture with educational content"}),e.totalScore<40&&n.jsx("p",{children:"• Low priority - add to drip campaign"}),e.behaviorScore<20&&n.jsx("p",{children:"• Increase engagement with personalized outreach"}),e.engagementScore<20&&n.jsx("p",{children:"• Try different communication channels"})]})]})]})]})}function ese({leadId:e,activities:t}){const{logActivity:r}=mo(),[s,a]=w.useState(!1),[i,o]=w.useState({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),l=h=>{switch(h){case"call":return wm;case"email":return Qr;case"meeting":return Lr;case"note":return ln;case"status_change":return fs;default:return ln}},c=h=>{switch(h){case"call":return"text-green-500";case"email":return"text-blue-500";case"meeting":return"text-purple-500";case"note":return"text-gray-500";case"status_change":return"text-orange-500";default:return"text-gray-500"}},d=h=>{switch(h){case"positive":return"bg-green-50 text-green-700 border-green-200";case"neutral":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"negative":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=async()=>{i.description.trim()&&(await r({leadId:e,type:i.type,description:i.description,outcome:i.outcome,duration:i.duration,scheduledDate:i.scheduledDate,userId:"current-user"}),o({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),a(!1))},u=[...t].sort((h,m)=>new Date(m.createdAt).getTime()-new Date(h.createdAt).getTime());return n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:"Activity Timeline"}),n.jsx(Fe,{children:"Track all interactions and activities for this lead"})]}),n.jsxs(J,{onClick:()=>a(!0),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})}),n.jsxs(fe,{children:[s&&n.jsx(ue,{className:"mb-6 border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Activity Type"}),n.jsxs(Ve,{value:i.type,onValueChange:h=>o(m=>({...m,type:h})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"call",children:"Phone Call"}),n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"meeting",children:"Meeting"}),n.jsx(K,{value:"note",children:"Note"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Outcome"}),n.jsxs(Ve,{value:i.outcome||"",onValueChange:h=>o(m=>({...m,outcome:h||void 0})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select outcome"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"positive",children:"Positive"}),n.jsx(K,{value:"neutral",children:"Neutral"}),n.jsx(K,{value:"negative",children:"Negative"})]})]})]})]}),i.type==="call"&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Duration (minutes)"}),n.jsx(Pe,{type:"number",value:i.duration||"",onChange:h=>o(m=>({...m,duration:h.target.value?parseInt(h.target.value):void 0})),placeholder:"e.g., 15"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Description"}),n.jsx(tr,{value:i.description,onChange:h=>o(m=>({...m,description:h.target.value})),placeholder:"Describe the activity...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsx(J,{onClick:f,children:"Add Activity"})]})]})})}),n.jsx("div",{className:"space-y-4",children:u.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No activities recorded yet"}):u.map((h,m)=>{const v=l(h.type),g=m===u.length-1;return n.jsxs("div",{className:"relative",children:[!g&&n.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:He("flex-shrink-0 w-8 h-8 rounded-full bg-background border-2 flex items-center justify-center",c(h.type)),children:n.jsx(v,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-sm capitalize",children:h.type.replace("_"," ")}),h.outcome&&n.jsx(Re,{className:He("ri-badge-status text-xs",d(h.outcome)),children:h.outcome}),h.duration&&n.jsxs(Re,{variant:"secondary",className:"text-xs",children:[n.jsx(sr,{className:"h-3 w-3 mr-1"}),h.duration,"m"]})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:ct(h.createdAt)})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.description}),h.scheduledDate&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Scheduled for: ",ct(h.scheduledDate)]})]})]})]},h.id)})})]})]})}function tse(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function rse(e){const[t,r]=w.useState(void 0);return ld(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var Sj="Checkbox",[nse,FRe]=Vu(Sj),[sse,DE]=nse(Sj);function ase(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:f="on",internal_do_not_use_render:u}=e,[h,m]=oj({prop:r,defaultProp:a??!1,onChange:c,caller:Sj}),[v,g]=w.useState(null),[p,x]=w.useState(null),b=w.useRef(!1),y=v?!!o||!!v.closest("form"):!0,j={checked:h,disabled:i,setChecked:m,control:v,setControl:g,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:ed(a)?!1:a,isFormControl:y,bubbleInput:p,setBubbleInput:x};return n.jsx(sse,{scope:t,...j,children:ise(u)?u(j):s})}var E8="CheckboxTrigger",P8=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:f,setChecked:u,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:v}=DE(E8,e),g=Si(a,f),p=w.useRef(c);return w.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const b=()=>u(p.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[i,u]),n.jsx(An.button,{type:"button",role:"checkbox","aria-checked":ed(c)?"mixed":c,"aria-required":d,"data-state":D8(c),"data-disabled":l?"":void 0,disabled:l,value:o,...s,ref:g,onKeyDown:on(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:on(r,x=>{u(b=>ed(b)?!0:!b),v&&m&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});P8.displayName=E8;var OE=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:f,...u}=e;return n.jsx(ase,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:s,form:f,value:c,internal_do_not_use_render:({isFormControl:h})=>n.jsxs(n.Fragment,{children:[n.jsx(P8,{...u,ref:t,__scopeCheckbox:r}),h&&n.jsx(k8,{__scopeCheckbox:r})]})})});OE.displayName=Sj;var T8="CheckboxIndicator",_8=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,i=DE(T8,r);return n.jsx(ij,{present:s||ed(i.checked)||i.checked===!0,children:n.jsx(An.span,{"data-state":D8(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});_8.displayName=T8;var I8="CheckboxBubbleInput",k8=w.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:f,form:u,bubbleInput:h,setBubbleInput:m}=DE(I8,e),v=Si(r,m),g=tse(i),p=rse(s);w.useEffect(()=>{const b=h;if(!b)return;const y=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(y,"checked").set,C=!a.current;if(g!==i&&E){const S=new Event("click",{bubbles:C});b.indeterminate=ed(i),E.call(b,ed(i)?!1:i),b.dispatchEvent(S)}},[h,g,i,a]);const x=w.useRef(ed(i)?!1:i);return n.jsx(An.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:d,value:f,form:u,...t,tabIndex:-1,ref:v,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});k8.displayName=I8;function ise(e){return typeof e=="function"}function ed(e){return e==="indeterminate"}function D8(e){return ed(e)?"indeterminate":e?"checked":"unchecked"}const Vt=w.forwardRef(({className:e,...t},r)=>n.jsx(OE,{ref:r,className:He("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(_8,{className:He("flex items-center justify-center text-current"),children:n.jsx(dj,{className:"h-4 w-4"})})}));Vt.displayName=OE.displayName;function ose({leadId:e,reminders:t}){const{createReminder:r,completeReminder:s}=mo(),[a,i]=w.useState(!1),[o,l]=w.useState({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),c=g=>{switch(g){case"urgent":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=g=>{switch(g){case"call":return"📞";case"email":return"📧";case"meeting":return"🤝";case"deadline":return"⏰";default:return"📋"}},f=g=>new Date(g)<new Date,u=async()=>{!o.title.trim()||!o.dueDate||(await r({leadId:e,type:o.type,title:o.title,description:o.description,dueDate:new Date(o.dueDate),priority:o.priority,userId:"current-user"}),l({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),i(!1))},h=async g=>{await s(g)},m=t.filter(g=>!g.isCompleted),v=t.filter(g=>g.isCompleted);return n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-lg flex items-center",children:[n.jsx(vM,{className:"h-5 w-5 mr-2"}),"Reminders"]}),n.jsx(Fe,{children:"Set follow-up reminders and track completion"})]}),n.jsxs(J,{onClick:()=>i(!0),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]})}),n.jsxs(fe,{children:[a&&n.jsx(ue,{className:"mb-6 border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Reminder Type"}),n.jsxs(Ve,{value:o.type,onValueChange:g=>l(p=>({...p,type:g})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"follow_up",children:"Follow Up"}),n.jsx(K,{value:"call",children:"Call"}),n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"meeting",children:"Meeting"}),n.jsx(K,{value:"deadline",children:"Deadline"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Priority"}),n.jsxs(Ve,{value:o.priority,onValueChange:g=>l(p=>({...p,priority:g})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"low",children:"Low"}),n.jsx(K,{value:"medium",children:"Medium"}),n.jsx(K,{value:"high",children:"High"}),n.jsx(K,{value:"urgent",children:"Urgent"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Title"}),n.jsx(Pe,{value:o.title,onChange:g=>l(p=>({...p,title:g.target.value})),placeholder:"e.g., Follow up on pricing questions"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),n.jsx(Pe,{type:"datetime-local",value:o.dueDate,onChange:g=>l(p=>({...p,dueDate:g.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Description"}),n.jsx(tr,{value:o.description,onChange:g=>l(p=>({...p,description:g.target.value})),placeholder:"Additional details...",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),n.jsx(J,{onClick:u,children:"Add Reminder"})]})]})})}),n.jsxs("div",{className:"space-y-6",children:[m.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[n.jsx(sr,{className:"h-4 w-4 mr-2"}),"Active Reminders (",m.length,")"]}),n.jsx("div",{className:"space-y-3",children:m.sort((g,p)=>new Date(g.dueDate).getTime()-new Date(p.dueDate).getTime()).map(g=>n.jsxs("div",{className:He("flex items-start space-x-3 p-3 border rounded-lg",f(g.dueDate)?"border-red-200 bg-red-50":"hover:bg-accent/50"),children:[n.jsx(Vt,{checked:!1,onCheckedChange:()=>h(g.id),className:"mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"text-lg",children:d(g.type)}),n.jsx("span",{className:"font-medium text-sm",children:g.title}),n.jsx(Re,{className:He("ri-badge-status text-xs",c(g.priority)),children:g.priority}),f(g.dueDate)&&n.jsxs(Re,{className:"bg-red-50 text-red-700 border-red-200 text-xs",children:[n.jsx(ro,{className:"h-3 w-3 mr-1"}),"Overdue"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:g.description}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[n.jsx(Lr,{className:"h-3 w-3"}),n.jsxs("span",{children:["Due: ",ct(g.dueDate)]})]})]})]},g.id))})]}),v.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-sm mb-3 text-muted-foreground",children:["Completed (",v.length,")"]}),n.jsx("div",{className:"space-y-2",children:v.sort((g,p)=>new Date(p.dueDate).getTime()-new Date(g.dueDate).getTime()).slice(0,5).map(g=>n.jsxs("div",{className:"flex items-center space-x-3 p-2 text-sm text-muted-foreground",children:[n.jsx(Vt,{checked:!0,disabled:!0}),n.jsx("span",{className:"line-through",children:g.title}),n.jsx("span",{className:"text-xs",children:ct(g.dueDate)})]},g.id))})]}),m.length===0&&v.length===0&&n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No reminders set for this lead"})]})]})]})}function lse({template:e,type:t,onSave:r,onCancel:s}){const{toast:a}=At(),[i,o]=w.useState(!1),[l,c]=w.useState({name:(e==null?void 0:e.name)||"",subject:(e==null?void 0:e.subject)||"",body:(e==null?void 0:e.body)||(e==null?void 0:e.message)||"",type:(e==null?void 0:e.type)||"custom",variables:(e==null?void 0:e.variables)||[],isActive:(e==null?void 0:e.isActive)??!0}),[d,f]=w.useState(""),u=[{value:"welcome",label:"Welcome"},{value:"follow_up",label:"Follow Up"},{value:"nurture",label:"Nurture"},{value:"proposal",label:"Proposal"},{value:"reminder",label:"Reminder"},{value:"custom",label:"Custom"}],h=["first_name","last_name","company_name","rep_name","rep_phone","rep_email","website_url","budget","timeframe"],m=async()=>{if(!l.name.trim()){a({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!l.body.trim()){a({title:"Validation Error",description:`${t==="email"?"Email body":"SMS message"} is required`,variant:"destructive"});return}if(t==="email"&&!l.subject.trim()){a({title:"Validation Error",description:"Email subject is required",variant:"destructive"});return}if(t==="sms"&&l.body.length>160){a({title:"Validation Error",description:"SMS message must be 160 characters or less",variant:"destructive"});return}o(!0);try{const x=t==="email"?{name:l.name,subject:l.subject,body:l.body,type:l.type,variables:l.variables,isActive:l.isActive}:{name:l.name,message:l.body,type:l.type,variables:l.variables,isActive:l.isActive};await r(x),a({title:"Success",description:`${t==="email"?"Email":"SMS"} template ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} template`,variant:"destructive"})}finally{o(!1)}},v=()=>{d.trim()&&!l.variables.includes(d.trim())&&(c(x=>({...x,variables:[...x.variables,d.trim()]})),f(""))},g=x=>{c(b=>({...b,variables:b.variables.filter(y=>y!==x)}))},p=x=>{const b=`{{${x}}}`;c(y=>({...y,body:y.body+b}))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl flex items-center",children:[t==="email"?n.jsx(Qr,{className:"h-5 w-5 mr-2 text-blue-500"}):n.jsx(ln,{className:"h-5 w-5 mr-2 text-green-500"}),e?"Edit":"Create"," ",t==="email"?"Email":"SMS"," Template"]}),n.jsx(Fe,{children:e?"Update the template details":"Create a new template for automated communications"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Template Name *"}),n.jsx(Pe,{id:"name",value:l.name,onChange:x=>c(b=>({...b,name:x.target.value})),placeholder:"e.g., Welcome New Lead"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Template Type"}),n.jsxs(Ve,{value:l.type,onValueChange:x=>c(b=>({...b,type:x})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsx(Ue,{children:u.map(x=>n.jsx(K,{value:x.value,children:x.label},x.value))})]})]})]}),t==="email"&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"subject",children:"Subject Line *"}),n.jsx(Pe,{id:"subject",value:l.subject,onChange:x=>c(b=>({...b,subject:x.target.value})),placeholder:"e.g., Welcome to {{company_name}}, {{first_name}}!"})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs(ae,{htmlFor:"body",children:[t==="email"?"Email Body":"SMS Message"," *"]}),n.jsx(tr,{id:"body",value:l.body,onChange:x=>c(b=>({...b,body:x.target.value})),placeholder:t==="email"?`Hi {{first_name}},

Thank you for your interest in our RV inventory!

Best regards,
{{rep_name}}`:"Hi {{first_name}}! Thanks for your interest. Call us at {{rep_phone}} - {{rep_name}}",rows:t==="email"?12:4,maxLength:t==="sms"?160:void 0}),t==="sms"&&n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.body.length,"/160 characters"]}),n.jsx("div",{className:`text-xs ${l.body.length>160?"text-red-500":"text-muted-foreground"}`,children:l.body.length>160&&"Message too long"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Variables"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Common Variables:"}),n.jsx("div",{className:"space-y-1",children:h.map(x=>n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start text-xs",onClick:()=>p(x),children:[n.jsx(Nt,{className:"h-3 w-3 mr-1"}),x]},x))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Custom Variables:"}),n.jsxs("div",{className:"flex space-x-1 mb-2",children:[n.jsx(Pe,{value:d,onChange:x=>f(x.target.value),placeholder:"variable_name",className:"text-xs",onKeyPress:x=>x.key==="Enter"&&v()}),n.jsx(J,{size:"sm",onClick:v,children:n.jsx(Nt,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"space-y-1",children:l.variables.map(x=>n.jsxs("div",{className:"flex items-center justify-between p-1 bg-muted rounded text-xs",children:[n.jsx("span",{children:x}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>g(x),className:"h-4 w-4 p-0",children:n.jsx(Cn,{className:"h-3 w-3"})})]},x))})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isActive",checked:l.isActive,onCheckedChange:x=>c(b=>({...b,isActive:!!x}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active template"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Preview"}),n.jsxs("div",{className:"mt-2 p-4 bg-muted/30 rounded-lg",children:[t==="email"&&n.jsxs("div",{className:"mb-2",children:[n.jsx("strong",{children:"Subject:"})," ",l.subject||"No subject"]}),n.jsx("div",{className:"whitespace-pre-wrap text-sm",children:l.body||`No ${t==="email"?"content":"message"}`})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:s,disabled:i,children:"Cancel"}),n.jsx(J,{onClick:m,disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Template"]})})]})]})]})})}function cse({sequence:e,emailTemplates:t,smsTemplates:r,onSave:s,onCancel:a}){var C,S,N,_,I;const{toast:i}=At(),[o,l]=w.useState(!1),[c,d]=w.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",targetAudience:(e==null?void 0:e.targetAudience)||"",steps:(e==null?void 0:e.steps)||[],isActive:(e==null?void 0:e.isActive)??!0}),[f,u]=w.useState(!1),[h,m]=w.useState({type:"email",delay:0,content:{body:""},isActive:!0}),v=[{value:"email",label:"Email",icon:Qr,color:"text-blue-500"},{value:"sms",label:"SMS",icon:ln,color:"text-green-500"},{value:"wait",label:"Wait",icon:sr,color:"text-orange-500"},{value:"task",label:"Task",icon:Ln,color:"text-purple-500"}],g=T=>{const A=v.find(O=>O.value===T);return(A==null?void 0:A.icon)||Qr},p=T=>{const A=v.find(O=>O.value===T);return(A==null?void 0:A.color)||"text-gray-500"},x=async()=>{if(!c.name.trim()){i({title:"Validation Error",description:"Sequence name is required",variant:"destructive"});return}if(c.steps.length===0){i({title:"Validation Error",description:"At least one step is required",variant:"destructive"});return}l(!0);try{const T={...c,steps:c.steps.map((A,O)=>({...A,order:O+1}))};await s(T),i({title:"Success",description:`Sequence ${e?"updated":"created"} successfully`})}catch{i({title:"Error",description:`Failed to ${e?"update":"create"} sequence`,variant:"destructive"})}finally{l(!1)}},b=()=>{var A,O;if(!((O=(A=h.content)==null?void 0:A.body)!=null&&O.trim())&&h.type!=="wait"){i({title:"Validation Error",description:"Step content is required",variant:"destructive"});return}const T={id:Math.random().toString(36).substr(2,9),type:h.type||"email",delay:h.delay||0,content:h.content||{body:""},isActive:!0};d(D=>({...D,steps:[...D.steps,T]})),m({type:"email",delay:0,content:{body:""},isActive:!0}),u(!1)},y=T=>{d(A=>({...A,steps:A.steps.filter(O=>O.id!==T)}))},j=(T,A)=>{const O=[...c.steps],D=O.findIndex($=>$.id===T);A==="up"&&D>0?[O[D],O[D-1]]=[O[D-1],O[D]]:A==="down"&&D<O.length-1&&([O[D],O[D+1]]=[O[D+1],O[D]]),d($=>({...$,steps:O}))},E=T=>{if(T<24)return`${T} hours`;const A=Math.floor(T/24),O=T%24;return O===0?`${A} days`:`${A} days ${O} hours`};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:[e?"Edit":"Create"," Nurture Sequence"]}),n.jsx(Fe,{children:e?"Update the sequence details and steps":"Create an automated sequence for lead nurturing"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Sequence Name *"}),n.jsx(Pe,{id:"name",value:c.name,onChange:T=>d(A=>({...A,name:T.target.value})),placeholder:"e.g., New Lead Welcome Series"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"targetAudience",children:"Target Audience"}),n.jsx(Pe,{id:"targetAudience",value:c.targetAudience,onChange:T=>d(A=>({...A,targetAudience:T.target.value})),placeholder:"e.g., New website leads"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"description",children:"Description"}),n.jsx(tr,{id:"description",value:c.description,onChange:T=>d(A=>({...A,description:T.target.value})),placeholder:"Describe the purpose and goals of this sequence",rows:3})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs(ae,{children:["Sequence Steps (",c.steps.length,")"]}),n.jsxs(J,{onClick:()=>u(!0),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Step"]})]}),f&&n.jsx(ue,{className:"mb-4 border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Step Type"}),n.jsxs(Ve,{value:h.type,onValueChange:T=>m(A=>({...A,type:T})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsx(Ue,{children:v.map(T=>n.jsx(K,{value:T.value,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(T.icon,{className:He("h-4 w-4 mr-2",T.color)}),n.jsx("span",{children:T.label})]})},T.value))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Delay (hours)"}),n.jsx(Pe,{type:"number",value:h.delay||0,onChange:T=>m(A=>({...A,delay:parseInt(T.target.value)||0})),placeholder:"0",min:"0"})]}),h.type==="email"&&n.jsxs("div",{children:[n.jsx(ae,{children:"Email Template"}),n.jsxs(Ve,{value:((C=h.content)==null?void 0:C.template)||"",onValueChange:T=>{const A=t.find(O=>O.id===T);m(O=>({...O,content:{...O.content,template:T,subject:(A==null?void 0:A.subject)||"",body:(A==null?void 0:A.body)||""}}))},children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select template"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"Custom Content"}),t.filter(T=>T.isActive).map(T=>n.jsx(K,{value:T.id,children:T.name},T.id))]})]})]}),h.type==="sms"&&n.jsxs("div",{children:[n.jsx(ae,{children:"SMS Template"}),n.jsxs(Ve,{value:((S=h.content)==null?void 0:S.template)||"",onValueChange:T=>{const A=r.find(O=>O.id===T);m(O=>({...O,content:{...O.content,template:T,body:(A==null?void 0:A.message)||""}}))},children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select template"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"Custom Content"}),r.filter(T=>T.isActive).map(T=>n.jsx(K,{value:T.id,children:T.name},T.id))]})]})]})]}),h.type==="email"&&n.jsxs("div",{children:[n.jsx(ae,{children:"Subject"}),n.jsx(Pe,{value:((N=h.content)==null?void 0:N.subject)||"",onChange:T=>m(A=>({...A,content:{...A.content,subject:T.target.value}})),placeholder:"Email subject line"})]}),(h.type==="email"||h.type==="sms"||h.type==="task")&&n.jsxs("div",{children:[n.jsx(ae,{children:h.type==="email"?"Email Body":h.type==="sms"?"SMS Message":"Task Description"}),n.jsx(tr,{value:((_=h.content)==null?void 0:_.body)||"",onChange:T=>m(A=>({...A,content:{...A.content,body:T.target.value}})),placeholder:h.type==="email"?"Email content...":h.type==="sms"?"SMS message...":"Task description...",rows:h.type==="email"?6:3,maxLength:h.type==="sms"?160:void 0}),h.type==="sms"&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[(((I=h.content)==null?void 0:I.body)||"").length,"/160 characters"]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),n.jsx(J,{onClick:b,children:"Add Step"})]})]})})}),n.jsxs("div",{className:"space-y-4",children:[c.steps.map((T,A)=>{const O=g(T.type),D=A===c.steps.length-1;return n.jsxs("div",{className:"relative",children:[!D&&n.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsx("div",{className:He("flex-shrink-0 w-12 h-12 rounded-full bg-background border-2 flex items-center justify-center",p(T.type)),children:n.jsx(O,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium capitalize",children:T.type}),T.delay>0&&n.jsxs(Re,{variant:"secondary",className:"text-xs",children:[n.jsx(sr,{className:"h-3 w-3 mr-1"}),E(T.delay)]})]}),T.type==="email"&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[n.jsx("p",{className:"font-medium text-sm text-blue-900",children:T.content.subject||"No subject"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1 line-clamp-2",children:T.content.body||"No content"})]}),T.type==="sms"&&n.jsx("div",{className:"bg-green-50 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-green-700",children:T.content.body||"No message"})}),T.type==="wait"&&n.jsx("div",{className:"bg-orange-50 p-3 rounded-md",children:n.jsxs("p",{className:"text-sm text-orange-700",children:["Wait ",E(T.delay)," before next step"]})}),T.type==="task"&&n.jsx("div",{className:"bg-purple-50 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-purple-700",children:T.content.body||"No task description"})})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(J,{variant:"outline",size:"sm",onClick:()=>j(T.id,"up"),disabled:A===0,children:n.jsx(Oo,{className:"h-3 w-3"})}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>j(T.id,"down"),disabled:A===c.steps.length-1,children:n.jsx(Do,{className:"h-3 w-3"})}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>y(T.id),children:n.jsx(Cn,{className:"h-3 w-3"})})]})]})]},T.id)}),c.steps.length===0&&n.jsx("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:'No steps added yet. Click "Add Step" to get started.'})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isActive",checked:c.isActive,onCheckedChange:T=>d(A=>({...A,isActive:!!T}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active sequence"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:a,disabled:o,children:"Cancel"}),n.jsx(J,{onClick:x,disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Sequence"]})})]})]})]})})}const dse=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",isActive:!0,targetAudience:"New website leads",steps:[{id:"1",type:"email",delay:0},{id:"2",type:"wait",delay:72},{id:"3",type:"email",delay:0},{id:"4",type:"sms",delay:48}]}],use=[{id:"1",name:"Welcome New Lead",subject:"Welcome to our RV dealership!",body:"Thank you for your interest...",type:"welcome",isActive:!0}],fse=[{id:"1",name:"Quick Follow-up",message:"Hi! Just wanted to check if you have any questions.",type:"follow_up",isActive:!0}];function vI(){const[e,t]=w.useState(dse),[r,s]=w.useState(use),[a,i]=w.useState(fse),[o]=w.useState([]),[l,c]=w.useState(null),[d,f]=w.useState(!1),[u,h]=w.useState(!1),[m,v]=w.useState(null),[g,p]=w.useState(null),[x,b]=w.useState("email"),y=A=>{switch(A){case"email":return Qr;case"sms":return ln;case"wait":return sr;case"task":return Ln;default:return iX}},j=A=>{switch(A){case"email":return"text-blue-500 bg-blue-50";case"sms":return"text-green-500 bg-green-50";case"wait":return"text-orange-500 bg-orange-50";case"task":return"text-purple-500 bg-purple-50";default:return"text-gray-500 bg-gray-50"}},E=A=>{if(A<24)return`${A} hours`;const O=Math.floor(A/24),D=A%24;return D===0?`${O} days`:`${O} days ${D} hours`},C=A=>{const O=o.filter(D=>D.sequenceId===A);return{total:O.length,active:O.filter(D=>D.status==="active").length,completed:O.filter(D=>D.status==="completed").length,paused:O.filter(D=>D.status==="paused").length}},S=(A,O)=>{p({template:A,type:O}),h(!0)},N=async A=>{if(g)g.type==="email"?s(O=>O.map(D=>D.id===g.template.id?{...D,...A}:D)):i(O=>O.map(D=>D.id===g.template.id?{...D,...A}:D));else{const O={id:Math.random().toString(36).substr(2,9),...A,isActive:!0};x==="email"?s(D=>[...D,O]):i(D=>[...D,O])}h(!1),p(null)},_=()=>{f(!0),v(null)},I=A=>{v(A),f(!0)},T=async A=>{if(m)t(O=>O.map(D=>D.id===m.id?{...D,...A}:D));else{const O={id:Math.random().toString(36).substr(2,9),...A,steps:A.steps||[]};t(D=>[...D,O])}f(!1),v(null)};return n.jsxs("div",{className:"space-y-6",children:[u&&n.jsx(lse,{template:g==null?void 0:g.template,type:(g==null?void 0:g.type)||x,onSave:N,onCancel:()=>{h(!1),p(null)}}),d&&n.jsx(cse,{sequence:m,emailTemplates:r,smsTemplates:a,onSave:T,onCancel:()=>{f(!1),v(null)}}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Nurture Sequences"}),n.jsx("p",{className:"text-muted-foreground",children:"Automate lead nurturing with email and SMS sequences"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",onClick:()=>h(!0),children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Template"]}),n.jsxs(J,{onClick:_,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Sequence"]})]})]}),n.jsxs(xr,{defaultValue:"sequences",className:"space-y-6",children:[n.jsxs(hr,{children:[n.jsx(Qe,{value:"sequences",children:"Sequences"}),n.jsx(Qe,{value:"templates",children:"Templates"}),n.jsx(Qe,{value:"analytics",children:"Analytics"})]}),n.jsxs(et,{value:"sequences",className:"space-y-6",children:[n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(A=>{const O=C(A.id);return n.jsxs(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(A),children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:A.name}),n.jsx(Fe,{className:"mt-1",children:A.description})]}),n.jsx(Re,{className:A.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:A.isActive?"Active":"Inactive"})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ln,{className:"h-4 w-4 text-blue-500"}),n.jsxs("span",{children:[O.total," enrolled"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(sN,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{children:[O.active," active"]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.steps.slice(0,4).map((D,$)=>{const M=y(D.type);return n.jsx("div",{className:He("flex items-center justify-center w-8 h-8 rounded-full",j(D.type)),children:n.jsx(M,{className:"h-4 w-4"})},D.id)}),A.steps.length>4&&n.jsxs("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-500 text-xs",children:["+",A.steps.length-4]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Target: ",A.targetAudience]})]})})]},A.id)})}),l&&n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:l.name}),n.jsx(Fe,{children:l.description})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>I(l),children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(J,{variant:"outline",size:"sm",children:[l.isActive?n.jsx(nX,{className:"h-4 w-4 mr-2"}):n.jsx(sN,{className:"h-4 w-4 mr-2"}),l.isActive?"Pause":"Activate"]})]})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"Sequence Steps"}),n.jsx("div",{className:"space-y-4",children:l.steps.map((A,O)=>{const D=y(A.type),$=O===l.steps.length-1;return n.jsxs("div",{className:"relative",children:[!$&&n.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:He("flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center",j(A.type)),children:n.jsx(D,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium capitalize",children:A.type}),A.delay>0&&n.jsxs(Re,{variant:"outline",className:"flex items-center space-x-1",children:[n.jsx(sr,{className:"h-3 w-3"}),n.jsxs("span",{children:["Wait ",E(A.delay)]})]})]}),A.type==="email"&&n.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:A.type==="email"?"Email step":A.type==="sms"?"SMS step":A.type==="wait"?"Wait step":"Step"})})]})]})]},A.id)})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"Performance"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:Object.entries(C(l.id)).map(([A,O])=>n.jsxs("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold",children:O}),n.jsx("div",{className:"text-sm text-muted-foreground capitalize",children:A})]},A))})]})]})})]})]}),n.jsx(et,{value:"templates",className:"space-y-6",children:n.jsxs(xr,{defaultValue:"email",className:"space-y-4",children:[n.jsxs(hr,{children:[n.jsx(Qe,{value:"email",children:"Email Templates"}),n.jsx(Qe,{value:"sms",children:"SMS Templates"})]}),u&&!g&&n.jsx("div",{className:"mb-4",children:n.jsx(xr,{value:x,onValueChange:A=>b(A),children:n.jsxs(hr,{children:[n.jsx(Qe,{value:"email",children:"Email Template"}),n.jsx(Qe,{value:"sms",children:"SMS Template"})]})})}),n.jsx(et,{value:"email",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(A=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:A.name}),n.jsx(Re,{variant:"secondary",className:"mt-1",children:A.type})]}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>S(A,"email"),children:n.jsx(zr,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:A.subject||A.body}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Variables:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(A.variables||["first_name","company_name"]).map(O=>n.jsx(Re,{variant:"outline",className:"text-xs",children:O},O))})]})]})})]},A.id))})}),n.jsx(et,{value:"sms",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:a.map(A=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:A.name}),n.jsx(Re,{variant:"secondary",className:"mt-1",children:A.type})]}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>S(A,"sms"),children:n.jsx(zr,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:A.message}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Variables:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(A.variables||["first_name"]).map(O=>n.jsx(Re,{variant:"outline",className:"text-xs",children:O},O))})]})]})})]},A.id))})})]})}),n.jsxs(et,{value:"analytics",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Enrollments"}),n.jsx(Ln,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"0"}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Across all sequences"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Active Sequences"}),n.jsx(sN,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(A=>A.isActive).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Currently running"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Completion Rate"}),n.jsx(_t,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"0%"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Average completion"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Templates"}),n.jsx(Qr,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:r.length+a.length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Qr,{className:"h-3 w-3 mr-1"}),"Email & SMS templates"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Sequence Performance"}),n.jsx(Fe,{children:"Detailed analytics for each nurture sequence"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:e.map(A=>{C(A.id);const O=0;return n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:A.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:A.description})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold",children:"0"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Enrolled"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold text-green-600",children:"0"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Active"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold text-blue-600",children:"0"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[O.toFixed(1),"%"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Rate"})]})]})]},A.id)})})})]})]})]})]})}function O8(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState([]),[h,m]=w.useState([]),[v,g]=w.useState([]),[p,x]=w.useState(!1);w.useEffect(()=>{b()},[]);const b=()=>{const W=pn("renter-insight-email-templates",[]),q=pn("renter-insight-sms-templates",[]),L=pn("renter-insight-sequences",[]),V=pn("renter-insight-enrollments",[]),G=pn("renter-insight-communication-logs",[]),Z=pn("renter-insight-ai-insights",[]);if(W.length===0){const te=[{id:"1",name:"Welcome New Lead",subject:"Welcome to {{company_name}}, {{first_name}}!",body:`Hi {{first_name}},

Thank you for your interest in our RV inventory! We're excited to help you find the perfect recreational vehicle for your adventures.

Here's what happens next:
- One of our RV specialists will contact you within 24 hours
- We'll schedule a personalized tour of our showroom
- You'll receive our latest inventory updates and special offers

In the meantime, feel free to browse our current inventory at {{website_url}}.

Best regards,
{{rep_name}}
{{company_name}}`,type:"welcome",variables:["first_name","company_name","website_url","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Follow-up After 3 Days",subject:"Still looking for the perfect RV, {{first_name}}?",body:`Hi {{first_name}},

I wanted to follow up on your recent inquiry about our RV inventory. Have you had a chance to think about what type of RV would best suit your needs?

Based on your interests, I'd love to show you:
- {{suggested_models}}

We also have some exciting financing options that might interest you. Would you like to schedule a call this week to discuss your options?

You can reply to this email or call me directly at {{rep_phone}}.

Best regards,
{{rep_name}}`,type:"follow_up",variables:["first_name","suggested_models","rep_phone","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];i(te),Gr("renter-insight-email-templates",te)}else i(W);if(q.length===0){const te=[{id:"1",name:"Quick Follow-up",message:"Hi {{first_name}}! This is {{rep_name}} from {{company_name}}. Just wanted to check if you have any questions about the RVs you viewed. Reply STOP to opt out.",type:"follow_up",variables:["first_name","rep_name","company_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Appointment Reminder",message:"Hi {{first_name}}! Reminder: Your RV showroom appointment is tomorrow at {{appointment_time}}. See you then! - {{rep_name}}",type:"reminder",variables:["first_name","appointment_time","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];l(te),Gr("renter-insight-sms-templates",te)}else l(q);if(L.length===0){const te=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",triggerConditions:[{type:"lead_status",operator:"equals",value:"new"}],steps:[{id:"1",sequenceId:"1",order:1,type:"email",delay:0,content:{subject:"Welcome to {{company_name}}, {{first_name}}!",body:mockEmailTemplates[0].body,template:"1"},isActive:!0},{id:"2",sequenceId:"1",order:2,type:"wait",delay:72,content:{body:"Wait 3 days"},isActive:!0},{id:"3",sequenceId:"1",order:3,type:"email",delay:0,content:{subject:"Still looking for the perfect RV, {{first_name}}?",body:mockEmailTemplates[1].body,template:"2"},isActive:!0},{id:"4",sequenceId:"1",order:4,type:"sms",delay:48,content:{body:mockSmsTemplates[0].message},isActive:!0}],isActive:!0,targetAudience:"New website leads",createdBy:"admin",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}];t(te),Gr("renter-insight-sequences",te)}else t(L);if(Z.length===0){const te=[{id:"1",leadId:"1",type:"next_action",title:"Optimal Contact Time Identified",description:"Based on lead behavior patterns, the best time to contact this lead is Tuesday-Thursday between 2-4 PM.",confidence:85,actionable:!0,suggestedActions:["Schedule call for Tuesday 2-4 PM","Send follow-up email on Wednesday morning","Avoid Friday afternoon contact"],metadata:{timeZone:"EST",preferredDays:["Tuesday","Wednesday","Thursday"],preferredHours:[14,15,16]},generatedAt:new Date("2024-01-20"),isRead:!1},{id:"2",leadId:"1",type:"communication_style",title:"Communication Preference Analysis",description:"This lead responds better to detailed, educational content rather than high-pressure sales tactics.",confidence:78,actionable:!0,suggestedActions:["Share educational RV buying guides","Focus on features and benefits","Provide comparison charts","Avoid aggressive closing techniques"],metadata:{preferredStyle:"educational",responseRate:.65,engagementType:"content-focused"},generatedAt:new Date("2024-01-20"),isRead:!1}];u(te),Gr("renter-insight-ai-insights",te)}else u(Z);s(V),d(G)},y=async(W,q)=>{var L,V;x(!0);try{const G={id:Math.random().toString(36).substr(2,9),leadId:W,sequenceId:q,currentStepId:((V=(L=e.find(Z=>Z.id===q))==null?void 0:L.steps[0])==null?void 0:V.id)||"",status:"active",enrolledAt:new Date,nextActionAt:new Date};return s(Z=>[...Z,G]),await j(G),G}finally{x(!1)}},j=async W=>{const q=e.find(G=>G.id===W.sequenceId);if(!q)return;const L=q.steps.find(G=>G.id===W.currentStepId);if(!L)return;switch(L.type){case"email":await E(W.leadId,L);break;case"sms":await C(W.leadId,L);break;case"wait":const G=new Date;G.setHours(G.getHours()+L.delay),s(Z=>Z.map(te=>te.id===W.id?{...te,nextActionAt:G}:te));break}const V=q.steps.findIndex(G=>G.id===L.id)+1;if(V<q.steps.length){const G=q.steps[V];s(Z=>Z.map(te=>te.id===W.id?{...te,currentStepId:G.id}:te))}else s(G=>G.map(Z=>Z.id===W.id?{...Z,status:"completed",completedAt:new Date}:Z))},E=async(W,q)=>{const L={id:Math.random().toString(36).substr(2,9),leadId:W,type:"email",direction:"outbound",subject:q.content.subject,content:q.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:q.id,template:q.content.template}};d(V=>[...V,L]),setTimeout(()=>{d(V=>V.map(G=>G.id===L.id?{...G,status:"delivered",deliveredAt:new Date}:G))},2e3),setTimeout(()=>{d(V=>V.map(G=>G.id===L.id?{...G,status:"opened",openedAt:new Date}:G))},5e3)},C=async(W,q)=>{const L={id:Math.random().toString(36).substr(2,9),leadId:W,type:"sms",direction:"outbound",content:q.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:q.id}};d(V=>[...V,L]),setTimeout(()=>{d(V=>V.map(G=>G.id===L.id?{...G,status:"delivered",deliveredAt:new Date}:G))},1e3)};return{sequences:e,enrollments:r,emailTemplates:a,smsTemplates:o,communicationLogs:c,aiInsights:f,automationRules:h,analytics:v,loading:p,enrollLeadInSequence:y,processNextStep:j,generateAIInsights:async(W,q)=>{var L;x(!0);try{const V=[];q.score>70&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"next_action",title:"High-Priority Lead - Immediate Action Recommended",description:"This lead has a high score and recent activity. Schedule a personal call within 24 hours.",confidence:92,actionable:!0,suggestedActions:["Schedule personal phone call","Send personalized video message","Invite to exclusive showroom tour"],generatedAt:new Date,isRead:!1});const G=new Date(q.lastActivity),Z=Math.floor((Date.now()-G.getTime())/(1e3*60*60*24));return Z>7&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"timing",title:"Re-engagement Opportunity",description:`No activity for ${Z} days. Consider a re-engagement campaign.`,confidence:75,actionable:!0,suggestedActions:['Send "We miss you" email',"Offer special incentive","Share new inventory updates"],generatedAt:new Date,isRead:!1}),(L=q.customFields)!=null&&L.budget&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"content_suggestion",title:"Personalized Content Recommendation",description:`Based on budget range ${q.customFields.budget}, suggest specific RV models and financing options.`,confidence:88,actionable:!0,suggestedActions:["Send budget-specific inventory","Share financing calculator","Provide trade-in valuation"],generatedAt:new Date,isRead:!1}),u(te=>[...te.filter(he=>he.leadId!==W),...V]),V}finally{x(!1)}},createEmailTemplate:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",subject:W.subject||"",body:W.body||"",type:W.type||"custom",variables:W.variables||[],isActive:!0,createdAt:new Date},L=[...a,q];return i(L),Gr("renter-insight-email-templates",L),q},createSMSTemplate:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",message:W.message||"",type:W.type||"custom",variables:W.variables||[],isActive:!0,createdAt:new Date},L=[...o,q];return l(L),Gr("renter-insight-sms-templates",L),q},createNurtureSequence:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",description:W.description||"",triggerConditions:W.triggerConditions||[],steps:W.steps||[],isActive:!0,targetAudience:W.targetAudience||"",createdBy:"current-user",createdAt:new Date,updatedAt:new Date},L=[...e,q];return t(L),Gr("renter-insight-sequences",L),q},updateNurtureSequence:async(W,q)=>{const L=e.map(V=>V.id===W?{...V,...q,updatedAt:new Date}:V);t(L),Gr("renter-insight-sequences",L)},updateEmailTemplate:async(W,q)=>{const L=a.map(V=>V.id===W?{...V,...q}:V);i(L),Gr("renter-insight-email-templates",L)},updateSMSTemplate:async(W,q)=>{const L=o.map(V=>V.id===W?{...V,...q}:V);l(L),Gr("renter-insight-sms-templates",L)},getEnrollmentsByLead:W=>r.filter(q=>q.leadId===W),getCommunicationHistory:W=>c.filter(q=>q.leadId===W).sort((q,L)=>new Date(L.sentAt).getTime()-new Date(q.sentAt).getTime()),getAIInsightsByLead:W=>f.filter(q=>q.leadId===W&&!q.isRead),markInsightAsRead:async W=>{u(q=>q.map(L=>L.id===W?{...L,isRead:!0}:L))},pauseEnrollment:async W=>{s(q=>q.map(L=>L.id===W?{...L,status:"paused"}:L))},resumeEnrollment:async W=>{s(q=>q.map(L=>L.id===W?{...L,status:"active"}:L))}}}function hse({leadId:e,leadData:t}){var E,C,S;const{aiInsights:r,generateAIInsights:s,markInsightAsRead:a,enrollLeadInSequence:i,sequences:o}=O8(),[l,c]=w.useState(!1),[d,f]=w.useState("insights"),u=r.filter(N=>N.leadId===e),h=u.filter(N=>!N.isRead),m=N=>{switch(N){case"next_action":return Na;case"communication_style":return ln;case"timing":return sr;case"content_suggestion":return ZY;case"risk_assessment":return _t;default:return Lo}},v=N=>{switch(N){case"next_action":return"from-blue-50 to-blue-100/50";case"communication_style":return"from-green-50 to-green-100/50";case"timing":return"from-orange-50 to-orange-100/50";case"content_suggestion":return"from-purple-50 to-purple-100/50";case"risk_assessment":return"from-red-50 to-red-100/50";default:return"from-gray-50 to-gray-100/50"}},g=N=>N>=80?"text-green-600 bg-green-50":N>=60?"text-yellow-600 bg-yellow-50":"text-orange-600 bg-orange-50",p=async()=>{c(!0);try{await s(e,t)}finally{c(!1)}},x=async N=>{await a(N)},b=async N=>{await i(e,N)},j=(N=>{var T;const _=[];if(N.score>80?_.push({type:"High Priority Action",suggestion:"This lead has excellent potential. Schedule a personal call within 24 hours and prepare a customized presentation.",confidence:95,actions:["Schedule immediate call","Prepare custom presentation","Send calendar invite"]}):N.score>60?_.push({type:"Warm Lead Nurturing",suggestion:"Good engagement level. Send educational content about RV ownership and schedule a follow-up in 3-5 days.",confidence:85,actions:["Send RV buying guide","Share customer testimonials","Schedule follow-up"]}):_.push({type:"Lead Warming",suggestion:"Lower engagement detected. Enroll in nurture sequence and focus on value-driven content.",confidence:75,actions:["Enroll in email sequence","Send value content","Monitor engagement"]}),(T=N.customFields)!=null&&T.budget){const A=N.customFields.budget;_.push({type:"Budget-Matched Recommendations",suggestion:`Based on ${A} budget, focus on specific inventory that matches their price range and financing options.`,confidence:90,actions:["Send matching inventory","Discuss financing","Offer trade-in evaluation"]})}const I=Math.floor((Date.now()-new Date(N.createdAt).getTime())/(1e3*60*60*24));return I>7&&_.push({type:"Re-engagement Strategy",suggestion:`Lead is ${I} days old. Implement re-engagement tactics with special offers or new inventory alerts.`,confidence:80,actions:["Send special offer","Share new arrivals","Offer exclusive preview"]}),N.source.toLowerCase().includes("website")&&_.push({type:"Digital-First Approach",suggestion:"Lead came from website - they prefer digital communication. Use email and video messages before phone calls.",confidence:85,actions:["Send welcome email","Create video message","Share virtual tour"]}),_})(t);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Lo,{className:"h-5 w-5 mr-2 text-purple-500"}),"AI Insights & Suggestions"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered recommendations for lead engagement"})]}),n.jsxs(J,{onClick:p,disabled:l,size:"sm",children:[n.jsx(Lo,{className:"h-4 w-4 mr-2"}),l?"Analyzing...":"Generate Insights"]})]}),n.jsxs(xr,{value:d,onValueChange:f,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsxs(Qe,{value:"insights",className:"relative",children:["AI Insights",h.length>0&&n.jsx(Re,{className:"ml-2 h-5 w-5 rounded-full p-0 text-xs bg-red-500",children:h.length})]}),n.jsx(Qe,{value:"chatgpt",children:"ChatGPT Suggestions"}),n.jsx(Qe,{value:"automation",children:"Automation"})]}),n.jsx(et,{value:"insights",className:"space-y-4",children:u.length===0?n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Lo,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Insights Yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Generate AI-powered insights to get personalized recommendations for this lead."}),n.jsxs(J,{onClick:p,disabled:l,children:[n.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Generate First Insights"]})]})}):n.jsx("div",{className:"space-y-4",children:u.sort((N,_)=>new Date(_.generatedAt).getTime()-new Date(N.generatedAt).getTime()).map(N=>{const _=m(N.type);return n.jsxs(ue,{className:He("shadow-sm border-0 bg-gradient-to-br",v(N.type),!N.isRead&&"ring-2 ring-blue-200"),children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(_,{className:"h-6 w-6 text-primary mt-1"}),n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:N.title}),n.jsx(Fe,{className:"mt-1",children:N.description})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(Re,{className:He("ri-badge-status",g(N.confidence)),children:[N.confidence,"% confidence"]}),!N.isRead&&n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>x(N.id),children:[n.jsx(Xr,{className:"h-3 w-3 mr-1"}),"Mark Read"]})]})]})}),N.actionable&&N.suggestedActions&&n.jsx(fe,{children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Suggested Actions:"}),n.jsx("div",{className:"space-y-2",children:N.suggestedActions.map((I,T)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/50 rounded-md",children:[n.jsx("span",{className:"text-sm",children:I}),n.jsx(J,{variant:"outline",size:"sm",children:"Execute"})]},T))})]})})]},N.id)})})}),n.jsxs(et,{value:"chatgpt",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:n.jsx(Lo,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{children:[n.jsx(je,{className:"text-green-900",children:"ChatGPT Analysis"}),n.jsx(Fe,{className:"text-green-700",children:"AI-powered lead analysis and action recommendations"})]})]})}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:j.map((N,_)=>n.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-green-900",children:N.type}),n.jsxs(Re,{className:"bg-green-100 text-green-700 border-green-200",children:[N.confidence,"% confidence"]})]}),n.jsx("p",{className:"text-sm text-green-800 mb-3",children:N.suggestion}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h5",{className:"text-xs font-semibold text-green-900 uppercase tracking-wide",children:"Recommended Actions:"}),n.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:N.actions.map((I,T)=>n.jsx(J,{variant:"outline",size:"sm",className:"justify-start text-xs bg-white/50 hover:bg-white/80",children:I},T))})]})]},_))})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs(je,{className:"flex items-center",children:[n.jsx(Na,{className:"h-5 w-5 mr-2 text-blue-500"}),"Lead Scoring Analysis"]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-blue-900",children:["Current Score: ",t.score]}),n.jsx("p",{className:"text-sm text-blue-700",children:t.score>=80?"Hot Lead - High Priority":t.score>=60?"Warm Lead - Good Potential":t.score>=40?"Cool Lead - Needs Nurturing":"Cold Lead - Long-term Nurturing"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.score}),n.jsx("div",{className:"text-xs text-blue-500",children:"/ 100"})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsx("h5",{className:"font-semibold text-green-900 mb-1",children:"Strengths"}),n.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[((E=t.customFields)==null?void 0:E.budget)&&n.jsx("li",{children:"• Budget information provided"}),((C=t.customFields)==null?void 0:C.timeframe)&&n.jsx("li",{children:"• Clear purchase timeline"}),t.score>60&&n.jsx("li",{children:"• Good engagement level"}),t.source==="Customer Referral"&&n.jsx("li",{children:"• High-quality referral source"})]})]}),n.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg",children:[n.jsx("h5",{className:"font-semibold text-orange-900 mb-1",children:"Improvement Areas"}),n.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[!((S=t.customFields)!=null&&S.budget)&&n.jsx("li",{children:"• No budget information"}),t.score<60&&n.jsx("li",{children:"• Low engagement level"}),!t.assignedTo&&n.jsx("li",{children:"• No sales rep assigned"}),n.jsx("li",{children:"• Limited activity history"})]})]})]})]})})]})]}),n.jsxs(et,{value:"automation",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(ln,{className:"h-5 w-5 mr-2 text-purple-500"}),"Nurture Sequences"]}),n.jsx(Fe,{children:"Enroll this lead in automated nurturing sequences"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:o.filter(N=>N.isActive).map(N=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:N.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:N.description}),n.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[n.jsxs(Re,{variant:"secondary",className:"text-xs",children:[N.steps.length," steps"]}),n.jsx(Re,{variant:"outline",className:"text-xs",children:N.targetAudience})]})]}),n.jsx(J,{onClick:()=>b(N.id),size:"sm",children:"Enroll Lead"})]},N.id))})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs(je,{className:"flex items-center",children:[n.jsx(sr,{className:"h-5 w-5 mr-2 text-orange-500"}),"Smart Timing Recommendations"]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-900",children:"Best Contact Times"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Based on lead behavior: Tuesday-Thursday, 2-4 PM"})]}),n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-900",children:"Email Timing"}),n.jsx("p",{className:"text-sm text-green-700",children:"Send emails Tuesday/Wednesday mornings for best open rates"})]}),n.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-purple-900",children:"Follow-up Schedule"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Next follow-up recommended in 2-3 days based on engagement"})]})]})})]})]})]})]})}function mse({leadId:e,leadData:t}){const{emailTemplates:r,smsTemplates:s,communicationLogs:a,getCommunicationHistory:i}=O8(),[o,l]=w.useState("history"),[c,d]=w.useState(""),[f,u]=w.useState(""),[h,m]=w.useState(""),[v,g]=w.useState(""),[p,x]=w.useState(""),[b,y]=w.useState(!1),j=i(e),E=T=>{switch(T){case"sent":return n.jsx(Wo,{className:"h-3 w-3 text-blue-500"});case"delivered":return n.jsx(Xr,{className:"h-3 w-3 text-green-500"});case"opened":return n.jsx(Qr,{className:"h-3 w-3 text-purple-500"});case"clicked":return n.jsx(Xr,{className:"h-3 w-3 text-green-600"});case"replied":return n.jsx(ln,{className:"h-3 w-3 text-blue-600"});case"failed":return n.jsx(yh,{className:"h-3 w-3 text-red-500"});default:return n.jsx(sr,{className:"h-3 w-3 text-gray-500"})}},C=T=>{switch(T){case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"delivered":return"bg-green-50 text-green-700 border-green-200";case"opened":return"bg-purple-50 text-purple-700 border-purple-200";case"clicked":return"bg-green-50 text-green-700 border-green-200";case"replied":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=(T,A)=>{var O;return T.replace(/\{\{first_name\}\}/g,A.firstName).replace(/\{\{last_name\}\}/g,A.lastName).replace(/\{\{company_name\}\}/g,"Renter Insight RV").replace(/\{\{rep_name\}\}/g,"Your Sales Representative").replace(/\{\{rep_phone\}\}/g,"(555) 123-4567").replace(/\{\{website_url\}\}/g,"https://renterinsight.com").replace(/\{\{budget\}\}/g,((O=A.customFields)==null?void 0:O.budget)||"your budget")},N=async()=>{y(!0);try{let T=h,A=v;if(c){const O=r.find(D=>D.id===c);O&&(T=S(O.subject,t),A=S(O.body,t))}await new Promise(O=>setTimeout(O,2e3)),m(""),g(""),d(""),console.log("Email sent:",{subject:T,body:A,to:t.email})}finally{y(!1)}},_=async()=>{y(!0);try{let T=p;if(f){const A=s.find(O=>O.id===f);A&&(T=S(A.message,t))}await new Promise(A=>setTimeout(A,1500)),x(""),u(""),console.log("SMS sent:",{message:T,to:t.phone})}finally{y(!1)}},I=(T,A)=>{if(A==="email"){d(T);const O=r.find(D=>D.id===T);O&&(m(S(O.subject,t)),g(S(O.body,t)))}else{u(T);const O=s.find(D=>D.id===T);O&&x(S(O.message,t))}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(ln,{className:"h-5 w-5 mr-2 text-blue-500"}),"Communication Center"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Send emails, SMS, and track communication history"})]}),n.jsxs(xr,{value:o,onValueChange:l,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"history",children:"History"}),n.jsx(Qe,{value:"email",children:"Send Email"}),n.jsx(Qe,{value:"sms",children:"Send SMS"})]}),n.jsx(et,{value:"history",className:"space-y-4",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(sr,{className:"h-5 w-5 mr-2"}),"Communication History"]}),n.jsx(Fe,{children:"All email and SMS communications with this lead"})]}),n.jsx(fe,{children:j.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(ln,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No communication history yet"}),n.jsx("p",{className:"text-sm",children:"Start by sending an email or SMS"})]}):n.jsx("div",{className:"space-y-4",children:j.map((T,A)=>n.jsxs("div",{className:"relative",children:[A<j.length-1&&n.jsx("div",{className:"absolute left-4 top-12 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:He("flex-shrink-0 w-8 h-8 rounded-full border-2 bg-background flex items-center justify-center",T.type==="email"?"border-blue-200":"border-green-200"),children:T.type==="email"?n.jsx(Qr,{className:"h-4 w-4 text-blue-500"}):n.jsx(ln,{className:"h-4 w-4 text-green-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"font-medium text-sm capitalize",children:[T.type," ",T.direction]}),n.jsxs(Re,{className:He("ri-badge-status text-xs",C(T.status)),children:[E(T.status),n.jsx("span",{className:"ml-1",children:T.status})]})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:ct(T.sentAt)})]}),T.subject&&n.jsx("p",{className:"font-medium text-sm mb-1",children:T.subject}),n.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:T.content})}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Sent: ",ct(T.sentAt)]}),T.deliveredAt&&n.jsxs("span",{children:["Delivered: ",ct(T.deliveredAt)]}),T.openedAt&&n.jsxs("span",{children:["Opened: ",ct(T.openedAt)]}),T.clickedAt&&n.jsxs("span",{children:["Clicked: ",ct(T.clickedAt)]})]})]})]})]},T.id))})})]})}),n.jsx(et,{value:"email",className:"space-y-4",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Qr,{className:"h-5 w-5 mr-2 text-blue-500"}),"Send Email"]}),n.jsx(Fe,{children:"Send personalized emails using templates or custom content"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Email Template (Optional)"}),n.jsxs(Ve,{value:c,onValueChange:T=>I(T,"email"),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Choose a template or write custom email"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"Custom Email"}),r.filter(T=>T.isActive).map(T=>n.jsxs(K,{value:T.id,children:[T.name," (",T.type,")"]},T.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"To"}),n.jsx(Pe,{value:t.email,disabled:!0,className:"bg-muted/50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Subject"}),n.jsx(Pe,{value:h,onChange:T=>m(T.target.value),placeholder:"Enter email subject"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Message"}),n.jsx(tr,{value:v,onChange:T=>g(T.target.value),placeholder:"Enter your email message",rows:8})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{last_name},", ",{company_name},", ",{rep_name}]}),n.jsxs(J,{onClick:N,disabled:b||!h||!v,children:[n.jsx(Wo,{className:"h-4 w-4 mr-2"}),b?"Sending...":"Send Email"]})]})]})]})}),n.jsx(et,{value:"sms",className:"space-y-4",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(ln,{className:"h-5 w-5 mr-2 text-green-500"}),"Send SMS"]}),n.jsx(Fe,{children:"Send text messages using templates or custom content"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"SMS Template (Optional)"}),n.jsxs(Ve,{value:f,onValueChange:T=>I(T,"sms"),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Choose a template or write custom SMS"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"Custom SMS"}),s.filter(T=>T.isActive).map(T=>n.jsxs(K,{value:T.id,children:[T.name," (",T.type,")"]},T.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"To"}),n.jsx(Pe,{value:t.phone,disabled:!0,className:"bg-muted/50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Message"}),n.jsx(tr,{value:p,onChange:T=>x(T.target.value),placeholder:"Enter your SMS message",rows:4,maxLength:160}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.length,"/160 characters"]}),n.jsx("div",{className:He("text-xs",p.length>160?"text-red-500":"text-muted-foreground"),children:p.length>160&&"Message too long"})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{company_name},", ",{rep_name}]}),n.jsxs(J,{onClick:_,disabled:b||!p||p.length>160,children:[n.jsx(Wo,{className:"h-4 w-4 mr-2"}),b?"Sending...":"Send SMS"]})]})]})]})})]})]})}var L8={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,s)=>{e.exports=s()})(Vn,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},a,i=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,l={},c=0,d={};function f(N){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var I=E(_);I.chunkSize=parseInt(I.chunkSize),_.step||_.chunk||(I.chunkSize=null),this._handle=new g(I),(this._handle.streamer=this)._config=I}).call(this,N),this.parseChunk=function(_,I){var T=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<T){let O=this._config.newline;O||(A=this._config.quoteChar||'"',O=this._handle.guessLineEndings(_,A)),_=[..._.split(O).slice(T)].join(O)}this.isFirstChunk&&S(this._config.beforeFirstChunk)&&(A=this._config.beforeFirstChunk(_))!==void 0&&(_=A),this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+_,A=(this._partialLine="",this._handle.parse(T,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=A.meta.cursor,T=(this._finished||(this._partialLine=T.substring(_-this._baseIndex),this._baseIndex=_),A&&A.data&&(this._rowCount+=A.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)s.postMessage({results:A,workerId:d.WORKER_ID,finished:T});else if(S(this._config.chunk)&&!I){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=A=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!T||!S(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),T||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(_){S(this._config.error)?this._config.error(_):o&&this._config.error&&s.postMessage({workerId:d.WORKER_ID,error:_,finished:!1})}}function u(N){var _;(N=N||{}).chunkSize||(N.chunkSize=d.RemoteChunkSize),f.call(this,N),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=C(this._chunkLoaded,this),_.onerror=C(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var I,T=this._config.downloadRequestHeaders;for(I in T)_.setRequestHeader(I,T[I])}var A;this._config.chunkSize&&(A=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+A));try{_.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(I){I=_.statusText||I,this._sendError(new Error(I))}}function h(N){(N=N||{}).chunkSize||(N.chunkSize=d.LocalChunkSize),f.call(this,N);var _,I,T=typeof FileReader<"u";this.stream=function(A){this._input=A,I=A.slice||A.webkitSlice||A.mozSlice,T?((_=new FileReader).onload=C(this._chunkLoaded,this),_.onerror=C(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input,O=(this._config.chunkSize&&(O=Math.min(this._start+this._config.chunkSize,this._input.size),A=I.call(A,this._start,O)),_.readAsText(A,this._config.encoding));T||this._chunkLoaded({target:{result:O}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(_.error)}}function m(N){var _;f.call(this,N=N||{}),this.stream=function(I){return _=I,this._nextChunk()},this._nextChunk=function(){var I,T;if(!this._finished)return I=this._config.chunkSize,_=I?(T=_.substring(0,I),_.substring(I)):(T=_,""),this._finished=!_,this.parseChunk(T)}}function v(N){f.call(this,N=N||{});var _=[],I=!0,T=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):I=!0},this._streamData=C(function(A){try{_.push(typeof A=="string"?A:A.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(O){this._streamError(O)}},this),this._streamError=C(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=C(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(N){var _,I,T,A,O=Math.pow(2,53),D=-O,$=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,R=this,B=0,U=0,W=!1,q=!1,L=[],V={data:[],errors:[],meta:{}};function G(me){return N.skipEmptyLines==="greedy"?me.join("").trim()==="":me.length===1&&me[0].length===0}function Z(){if(V&&T&&(he("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),T=!1),N.skipEmptyLines&&(V.data=V.data.filter(function(ve){return!G(ve)})),te()){let ve=function(ge,De){S(N.transformHeader)&&(ge=N.transformHeader(ge,De)),L.push(ge)};if(V)if(Array.isArray(V.data[0])){for(var me=0;te()&&me<V.data.length;me++)V.data[me].forEach(ve);V.data.splice(0,1)}else V.data.forEach(ve)}function oe(ve,ge){for(var De=N.header?{}:[],xe=0;xe<ve.length;xe++){var le=xe,re=ve[xe],re=((Ce,Ne)=>(ye=>(N.dynamicTypingFunction&&N.dynamicTyping[ye]===void 0&&(N.dynamicTyping[ye]=N.dynamicTypingFunction(ye)),(N.dynamicTyping[ye]||N.dynamicTyping)===!0))(Ce)?Ne==="true"||Ne==="TRUE"||Ne!=="false"&&Ne!=="FALSE"&&((ye=>{if($.test(ye)&&(ye=parseFloat(ye),D<ye&&ye<O))return 1})(Ne)?parseFloat(Ne):M.test(Ne)?new Date(Ne):Ne===""?null:Ne):Ne)(le=N.header?xe>=L.length?"__parsed_extra":L[xe]:le,re=N.transform?N.transform(re,le):re);le==="__parsed_extra"?(De[le]=De[le]||[],De[le].push(re)):De[le]=re}return N.header&&(xe>L.length?he("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+xe,U+ge):xe<L.length&&he("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+xe,U+ge)),De}var we;V&&(N.header||N.dynamicTyping||N.transform)&&(we=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(oe),we=V.data.length):V.data=oe(V.data,0),N.header&&V.meta&&(V.meta.fields=L),U+=we)}function te(){return N.header&&L.length===0}function he(me,oe,we,ve){me={type:me,code:oe,message:we},ve!==void 0&&(me.row=ve),V.errors.push(me)}S(N.step)&&(A=N.step,N.step=function(me){V=me,te()?Z():(Z(),V.data.length!==0&&(B+=me.data.length,N.preview&&B>N.preview?I.abort():(V.data=V.data[0],A(V,R))))}),this.parse=function(me,oe,we){var ve=N.quoteChar||'"',ve=(N.newline||(N.newline=this.guessLineEndings(me,ve)),T=!1,N.delimiter?S(N.delimiter)&&(N.delimiter=N.delimiter(me),V.meta.delimiter=N.delimiter):((ve=((ge,De,xe,le,re)=>{var Ce,Ne,ye,$e;re=re||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var nt=0;nt<re.length;nt++){for(var rt,gt=re[nt],Me=0,Ze=0,ft=0,xt=(ye=void 0,new x({comments:le,delimiter:gt,newline:De,preview:10}).parse(ge)),kt=0;kt<xt.data.length;kt++)xe&&G(xt.data[kt])?ft++:(rt=xt.data[kt].length,Ze+=rt,ye===void 0?ye=rt:0<rt&&(Me+=Math.abs(rt-ye),ye=rt));0<xt.data.length&&(Ze/=xt.data.length-ft),(Ne===void 0||Me<=Ne)&&($e===void 0||$e<Ze)&&1.99<Ze&&(Ne=Me,Ce=gt,$e=Ze)}return{successful:!!(N.delimiter=Ce),bestDelimiter:Ce}})(me,N.newline,N.skipEmptyLines,N.comments,N.delimitersToGuess)).successful?N.delimiter=ve.bestDelimiter:(T=!0,N.delimiter=d.DefaultDelimiter),V.meta.delimiter=N.delimiter),E(N));return N.preview&&N.header&&ve.preview++,_=me,I=new x(ve),V=I.parse(_,oe,we),Z(),W?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,I.abort(),_=S(N.chunk)?"":_.substring(I.getCharIndex())},this.resume=function(){R.streamer._halted?(W=!1,R.streamer.parseChunk(_,!0)):setTimeout(R.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,I.abort(),V.meta.aborted=!0,S(N.complete)&&N.complete(V),_=""},this.guessLineEndings=function(ge,ve){ge=ge.substring(0,1048576);var ve=new RegExp(p(ve)+"([^]*?)"+p(ve),"gm"),we=(ge=ge.replace(ve,"")).split("\r"),ve=ge.split(`
`),ge=1<ve.length&&ve[0].length<we[0].length;if(we.length===1||ge)return`
`;for(var De=0,xe=0;xe<we.length;xe++)we[xe][0]===`
`&&De++;return De>=we.length/2?`\r
`:"\r"}}function p(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(N){var _=(N=N||{}).delimiter,I=N.newline,T=N.comments,A=N.step,O=N.preview,D=N.fastMode,$=null,M=!1,R=N.quoteChar==null?'"':N.quoteChar,B=R;if(N.escapeChar!==void 0&&(B=N.escapeChar),(typeof _!="string"||-1<d.BAD_DELIMITERS.indexOf(_))&&(_=","),T===_)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<d.BAD_DELIMITERS.indexOf(T))&&(T=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var U=0,W=!1;this.parse=function(q,L,V){if(typeof q!="string")throw new Error("Input must be a string");var G=q.length,Z=_.length,te=I.length,he=T.length,me=S(A),oe=[],we=[],ve=[],ge=U=0;if(!q)return Me();if(D||D!==!1&&q.indexOf(R)===-1){for(var De=q.split(I),xe=0;xe<De.length;xe++){if(ve=De[xe],U+=ve.length,xe!==De.length-1)U+=I.length;else if(V)return Me();if(!T||ve.substring(0,he)!==T){if(me){if(oe=[],$e(ve.split(_)),Ze(),W)return Me()}else $e(ve.split(_));if(O&&O<=xe)return oe=oe.slice(0,O),Me(!0)}}return Me()}for(var le=q.indexOf(_,U),re=q.indexOf(I,U),Ce=new RegExp(p(B)+p(R),"g"),Ne=q.indexOf(R,U);;)if(q[U]===R)for(Ne=U,U++;;){if((Ne=q.indexOf(R,Ne+1))===-1)return V||we.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:U}),rt();if(Ne===G-1)return rt(q.substring(U,Ne).replace(Ce,R));if(R===B&&q[Ne+1]===B)Ne++;else if(R===B||Ne===0||q[Ne-1]!==B){le!==-1&&le<Ne+1&&(le=q.indexOf(_,Ne+1));var ye=nt((re=re!==-1&&re<Ne+1?q.indexOf(I,Ne+1):re)===-1?le:Math.min(le,re));if(q.substr(Ne+1+ye,Z)===_){ve.push(q.substring(U,Ne).replace(Ce,R)),q[U=Ne+1+ye+Z]!==R&&(Ne=q.indexOf(R,U)),le=q.indexOf(_,U),re=q.indexOf(I,U);break}if(ye=nt(re),q.substring(Ne+1+ye,Ne+1+ye+te)===I){if(ve.push(q.substring(U,Ne).replace(Ce,R)),gt(Ne+1+ye+te),le=q.indexOf(_,U),Ne=q.indexOf(R,U),me&&(Ze(),W))return Me();if(O&&oe.length>=O)return Me(!0);break}we.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:U}),Ne++}}else if(T&&ve.length===0&&q.substring(U,U+he)===T){if(re===-1)return Me();U=re+te,re=q.indexOf(I,U),le=q.indexOf(_,U)}else if(le!==-1&&(le<re||re===-1))ve.push(q.substring(U,le)),U=le+Z,le=q.indexOf(_,U);else{if(re===-1)break;if(ve.push(q.substring(U,re)),gt(re+te),me&&(Ze(),W))return Me();if(O&&oe.length>=O)return Me(!0)}return rt();function $e(ft){oe.push(ft),ge=U}function nt(ft){var xt=0;return xt=ft!==-1&&(ft=q.substring(Ne+1,ft))&&ft.trim()===""?ft.length:xt}function rt(ft){return V||(ft===void 0&&(ft=q.substring(U)),ve.push(ft),U=G,$e(ve),me&&Ze()),Me()}function gt(ft){U=ft,$e(ve),ve=[],re=q.indexOf(I,U)}function Me(ft){if(N.header&&!L&&oe.length&&!M){var xt=oe[0],kt=Object.create(null),St=new Set(xt);let zt=!1;for(let lt=0;lt<xt.length;lt++){let jr=xt[lt];if(kt[jr=S(N.transformHeader)?N.transformHeader(jr,lt):jr]){let Xt,Wn=kt[jr];for(;Xt=jr+"_"+Wn,Wn++,St.has(Xt););St.add(Xt),xt[lt]=Xt,kt[jr]++,zt=!0,($=$===null?{}:$)[Xt]=jr}else kt[jr]=1,xt[lt]=jr;St.add(jr)}zt&&console.warn("Duplicate headers found and renamed."),M=!0}return{data:oe,errors:we,meta:{delimiter:_,linebreak:I,aborted:W,truncated:!!ft,cursor:ge+(L||0),renamedHeaders:$}}}function Ze(){A(Me()),oe=[],we=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return U}}function b(N){var _=N.data,I=l[_.workerId],T=!1;if(_.error)I.userError(_.error,_.file);else if(_.results&&_.results.data){var A={abort:function(){T=!0,y(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(S(I.userStep)){for(var O=0;O<_.results.data.length&&(I.userStep({data:_.results.data[O],errors:_.results.errors,meta:_.results.meta},A),!T);O++);delete _.results}else S(I.userChunk)&&(I.userChunk(_.results,A,_.file),delete _.results)}_.finished&&!T&&y(_.workerId,_.results)}function y(N,_){var I=l[N];S(I.userComplete)&&I.userComplete(_),I.terminate(),delete l[N]}function j(){throw new Error("Not implemented.")}function E(N){if(typeof N!="object"||N===null)return N;var _,I=Array.isArray(N)?[]:{};for(_ in N)I[_]=E(N[_]);return I}function C(N,_){return function(){N.apply(_,arguments)}}function S(N){return typeof N=="function"}return d.parse=function(N,_){var I=(_=_||{}).dynamicTyping||!1;if(S(I)&&(_.dynamicTypingFunction=I,I={}),_.dynamicTyping=I,_.transform=!!S(_.transform)&&_.transform,!_.worker||!d.WORKERS_SUPPORTED)return I=null,d.NODE_STREAM_INPUT,typeof N=="string"?(N=(T=>T.charCodeAt(0)!==65279?T:T.slice(1))(N),I=new(_.download?u:m)(_)):N.readable===!0&&S(N.read)&&S(N.on)?I=new v(_):(s.File&&N instanceof File||N instanceof Object)&&(I=new h(_)),I.stream(N);(I=(()=>{var T;return!!d.WORKERS_SUPPORTED&&(T=(()=>{var A=s.URL||s.webkitURL||null,O=r.toString();return d.BLOB_URL||(d.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))})(),(T=new s.Worker(T)).onmessage=b,T.id=c++,l[T.id]=T)})()).userStep=_.step,I.userChunk=_.chunk,I.userComplete=_.complete,I.userError=_.error,_.step=S(_.step),_.chunk=S(_.chunk),_.complete=S(_.complete),_.error=S(_.error),delete _.worker,I.postMessage({input:N,config:_,workerId:I.id})},d.unparse=function(N,_){var I=!1,T=!0,A=",",O=`\r
`,D='"',$=D+D,M=!1,R=null,B=!1,U=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||d.BAD_DELIMITERS.filter(function(L){return _.delimiter.indexOf(L)!==-1}).length||(A=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(I=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(M=_.skipEmptyLines),typeof _.newline=="string"&&(O=_.newline),typeof _.quoteChar=="string"&&(D=_.quoteChar),typeof _.header=="boolean"&&(T=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");R=_.columns}_.escapeChar!==void 0&&($=_.escapeChar+D),_.escapeFormulae instanceof RegExp?B=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(B=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(D),"g"));if(typeof N=="string"&&(N=JSON.parse(N)),Array.isArray(N)){if(!N.length||Array.isArray(N[0]))return W(null,N,M);if(typeof N[0]=="object")return W(R||Object.keys(N[0]),N,M)}else if(typeof N=="object")return typeof N.data=="string"&&(N.data=JSON.parse(N.data)),Array.isArray(N.data)&&(N.fields||(N.fields=N.meta&&N.meta.fields||R),N.fields||(N.fields=Array.isArray(N.data[0])?N.fields:typeof N.data[0]=="object"?Object.keys(N.data[0]):[]),Array.isArray(N.data[0])||typeof N.data[0]=="object"||(N.data=[N.data])),W(N.fields||[],N.data||[],M);throw new Error("Unable to serialize unrecognized input");function W(L,V,G){var Z="",te=(typeof L=="string"&&(L=JSON.parse(L)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(L)&&0<L.length),he=!Array.isArray(V[0]);if(te&&T){for(var me=0;me<L.length;me++)0<me&&(Z+=A),Z+=q(L[me],me);0<V.length&&(Z+=O)}for(var oe=0;oe<V.length;oe++){var we=(te?L:V[oe]).length,ve=!1,ge=te?Object.keys(V[oe]).length===0:V[oe].length===0;if(G&&!te&&(ve=G==="greedy"?V[oe].join("").trim()==="":V[oe].length===1&&V[oe][0].length===0),G==="greedy"&&te){for(var De=[],xe=0;xe<we;xe++){var le=he?L[xe]:xe;De.push(V[oe][le])}ve=De.join("").trim()===""}if(!ve){for(var re=0;re<we;re++){0<re&&!ge&&(Z+=A);var Ce=te&&he?L[re]:re;Z+=q(V[oe][Ce],re)}oe<V.length-1&&(!G||0<we&&!ge)&&(Z+=O)}}return Z}function q(L,V){var G,Z;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(Z=!1,B&&typeof L=="string"&&B.test(L)&&(L="'"+L,Z=!0),G=L.toString().replace(U,$),(Z=Z||I===!0||typeof I=="function"&&I(L,V)||Array.isArray(I)&&I[V]||((te,he)=>{for(var me=0;me<he.length;me++)if(-1<te.indexOf(he[me]))return!0;return!1})(G,d.BAD_DELIMITERS)||-1<G.indexOf(A)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?D+G+D:G)}},d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!s.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=x,d.ParserHandle=g,d.NetworkStreamer=u,d.FileStreamer=h,d.StringStreamer=m,d.ReadableStreamStreamer=v,s.jQuery&&((a=s.jQuery).fn.parse=function(N){var _=N.config||{},I=[];return this.each(function(O){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var D=0;D<this.files.length;D++)I.push({file:this.files[D],inputElem:this,instanceConfig:a.extend({},_)})}),T(),this;function T(){if(I.length===0)S(N.complete)&&N.complete();else{var O,D,$,M,R=I[0];if(S(N.before)){var B=N.before(R.file,R.inputElem);if(typeof B=="object"){if(B.action==="abort")return O="AbortError",D=R.file,$=R.inputElem,M=B.reason,void(S(N.error)&&N.error({name:O},D,$,M));if(B.action==="skip")return void A();typeof B.config=="object"&&(R.instanceConfig=a.extend(R.instanceConfig,B.config))}else if(B==="skip")return void A()}var U=R.instanceConfig.complete;R.instanceConfig.complete=function(W){S(U)&&U(W,R.file,R.inputElem),A()},d.parse(R.file,R.instanceConfig)}}function A(){I.splice(0,1),T()}}),o&&(s.onmessage=function(N){N=N.data,d.WORKER_ID===void 0&&N&&(d.WORKER_ID=N.workerId),typeof N.input=="string"?s.postMessage({workerId:d.WORKER_ID,results:d.parse(N.input,N.config),finished:!0}):(s.File&&N.input instanceof File||N.input instanceof Object)&&(N=d.parse(N.input,N.config))&&s.postMessage({workerId:d.WORKER_ID,results:N,finished:!0})}),(u.prototype=Object.create(f.prototype)).constructor=u,(h.prototype=Object.create(f.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(v.prototype=Object.create(f.prototype)).constructor=v,d})})(L8);var pse=L8.exports;const Bh=Cr(pse);function wd(){const[e,t]=w.useState([]),[r,s]=w.useState(!1);w.useEffect(()=>{a()},[]);const a=()=>{const m=pn("renter-insight-vehicles",[{id:"1",vin:"1FDXE4FS8KDC12345",make:"Forest River",model:"Georgetown",year:2024,type:vt.MOTORHOME,status:Yt.AVAILABLE,price:125e3,cost:95e3,location:"Lot A-15",features:["Slide-out","Generator","Solar Panel"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")},{id:"2",vin:"1FDXE4FS8KDC67890",make:"Winnebago",model:"View",year:2023,type:vt.RV,status:Yt.AVAILABLE,price:89e3,cost:72e3,location:"Lot B-08",features:["Compact Design","Fuel Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-12")},{id:"3",vin:"1FDXE4FS8KDC11111",make:"Jayco",model:"Eagle",year:2024,type:vt.FIFTH_WHEEL,status:Yt.AVAILABLE,price:75e3,cost:58e3,location:"Lot C-12",features:["Bunk Beds","Outdoor Kitchen","Fireplace"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-10")},{id:"4",vin:"1FDXE4FS8KDC22222",make:"Airstream",model:"Flying Cloud",year:2024,type:vt.TRAVEL_TRAILER,status:Yt.AVAILABLE,price:95e3,cost:78e3,location:"Lot D-05",features:["Aluminum Construction","Premium Interior","Smart Technology"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-08")},{id:"5",vin:"1FDXE4FS8KDC33333",make:"Grand Design",model:"Momentum",year:2023,type:vt.TOY_HAULER,status:Yt.AVAILABLE,price:11e4,cost:88e3,location:"Lot E-18",features:["Garage Space","Fuel Station","Generator"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-05")},{id:"6",vin:"MH12345678901234",make:"Clayton Homes",model:"Inspiration",year:2024,type:vt.DOUBLE_WIDE,status:Yt.AVAILABLE,price:125e3,cost:95e3,location:"MH Section A-10",features:["3 Bedroom","2 Bathroom","Open Floor Plan","Energy Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{length:"76",width:"28",squareFootage:"2128",constructionType:"Manufactured",roofType:"Shingle",exteriorSiding:"Vinyl",insulationRating:"R-21"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);t(m)},i=m=>{Gr("renter-insight-vehicles",m)};return{vehicles:e,loading:r,getAvailableVehicles:()=>e.filter(m=>m.status===Yt.AVAILABLE),getVehicleById:m=>e.find(v=>v.id===m),updateVehicleStatus:async(m,v)=>{const g=e.map(p=>p.id===m?{...p,status:v,updatedAt:new Date}:p);t(g),i(g)},createVehicle:async m=>{s(!0);try{const v={id:Math.random().toString(36).substr(2,9),vin:m.vin||"",make:m.make||"",model:m.model||"",year:m.year||new Date().getFullYear(),type:m.type||vt.RV,status:Yt.AVAILABLE,price:m.price||0,cost:m.cost||0,location:m.location||"",features:m.features||[],images:m.images||[],customFields:m.customFields||{},createdAt:new Date,updatedAt:new Date},g=[...e,v];return t(g),i(g),v}finally{s(!1)}},deleteVehicle:async m=>{const v=e.filter(g=>g.id!==m);t(v),i(v)},importVehiclesFromCSV:async m=>new Promise((v,g)=>{Bh.parse(m,{header:!0,skipEmptyLines:!0,complete:p=>{const x=p.data.map(b=>({vin:b.vin||"",make:b.make||"",model:b.model||"",year:parseInt(b.year)||new Date().getFullYear(),type:b.type||vt.RV,status:b.status||Yt.AVAILABLE,price:parseFloat(b.price)||0,cost:parseFloat(b.cost)||0,location:b.location||"",features:b.features?b.features.split(",").map(y=>y.trim()):[],images:[],customFields:{exteriorColor:b.exteriorColor||"",interiorColor:b.interiorColor||"",length:b.length||"",weight:b.weight||"",sleeps:b.sleeps||"",slideouts:b.slideouts||"",fuelType:b.fuelType||"",mileage:b.mileage||"",condition:b.condition||"New"}}));v(x)},error:p=>{g(p)}})}),exportVehiclesToCSV:()=>{const m=e.map(g=>{var p,x,b,y,j,E,C,S,N;return{id:g.id,vin:g.vin,make:g.make,model:g.model,year:g.year,type:g.type,status:g.status,price:g.price,cost:g.cost,location:g.location,features:g.features.join(", "),exteriorColor:((p=g.customFields)==null?void 0:p.exteriorColor)||"",interiorColor:((x=g.customFields)==null?void 0:x.interiorColor)||"",length:((b=g.customFields)==null?void 0:b.length)||"",weight:((y=g.customFields)==null?void 0:y.weight)||"",sleeps:((j=g.customFields)==null?void 0:j.sleeps)||"",slideouts:((E=g.customFields)==null?void 0:E.slideouts)||"",fuelType:((C=g.customFields)==null?void 0:C.fuelType)||"",mileage:((S=g.customFields)==null?void 0:S.mileage)||"",condition:((N=g.customFields)==null?void 0:N.condition)||""}});return Bh.unparse(m)}}}const $p=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"}],vse=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0}];function R8({quote:e,customerId:t,onSave:r,onCancel:s}){const{toast:a}=At(),{getAvailableVehicles:i,getVehicleById:o}=wd(),[l,c]=w.useState(!1),[d,f]=w.useState("items"),[u,h]=w.useState({customerId:t,validUntil:new Date(Date.now()+30*24*60*60*1e3),notes:"",terms:"Payment due within 30 days. All sales final.",items:[],subtotal:0,totalDiscount:0,tax:0,taxRate:.08,total:0}),[m,v]=w.useState(""),[g,p]=w.useState(!1),[x,b]=w.useState(""),[y,j]=w.useState({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),E=i();w.useEffect(()=>{e&&h(R=>({...R,...e}))},[e]),w.useEffect(()=>{C()},[u.items,u.taxRate]);const C=()=>{const R=u.items.reduce((L,V)=>L+V.total,0),B=u.items.reduce((L,V)=>{const G=V.discountType==="percentage"?V.quantity*V.unitPrice*V.discount/100:V.discount*V.quantity;return L+G},0),U=R-B,W=U*u.taxRate,q=U+W;h(L=>({...L,subtotal:R,totalDiscount:B,tax:W,total:q}))},S=()=>{if(!y.description||!y.unitPrice){a({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const R={id:Math.random().toString(36).substr(2,9),description:y.description,quantity:y.quantity||1,unitPrice:y.unitPrice||0,discount:y.discount||0,discountType:y.discountType||"percentage",total:I(y)};h(B=>({...B,items:[...B.items,R]})),j({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),v(""),p(!1)},N=R=>{const B=o(R);if(!B)return;const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:`${B.year} ${B.make} ${B.model}`,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price};h(W=>({...W,items:[...W.items,U]})),b(""),a({title:"Vehicle Added",description:`${B.year} ${B.make} ${B.model} added to quote`})},_=R=>{const B=$p.find(U=>U.id===R);if(B){if(B.isBundle&&B.bundleItems){const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:B.description,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price,isBundle:!0,bundleItems:B.bundleItems.map(W=>{const q=$p.find(L=>L.id===W.productId);return{id:Math.random().toString(36).substr(2,9),productId:W.productId,description:(q==null?void 0:q.name)||"",quantity:W.quantity,unitPrice:(q==null?void 0:q.price)||0,discount:0,discountType:"percentage",total:((q==null?void 0:q.price)||0)*W.quantity}})};h(W=>({...W,items:[...W.items,U]}))}else{const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:B.name,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price};h(W=>({...W,items:[...W.items,U]}))}O()}},I=R=>{const B=R.quantity*R.unitPrice,U=R.discountType==="percentage"?B*(R.discount/100):R.discount*R.quantity;return B-U},T=(R,B)=>{h(U=>({...U,items:U.items.map(W=>{if(W.id===R){const q={...W,...B};return q.total=I(q),q}return W})}))},A=R=>{h(B=>({...B,items:B.items.filter(U=>U.id!==R)}))},O=()=>{const R=u.items.filter(U=>{var W;return((W=$p.find(q=>q.id===U.productId))==null?void 0:W.category)==="accessory"});R.length>=3&&R.forEach(U=>{T(U.id,{discount:10,discountType:"percentage"})}),u.items.filter(U=>U.isBundle).forEach(U=>{T(U.id,{discount:500,discountType:"fixed"})})},D=async()=>{c(!0);try{await new Promise(q=>setTimeout(q,2e3));const R=$(),B=new Blob([R],{type:"text/plain"}),U=URL.createObjectURL(B),W=document.createElement("a");W.href=U,W.download=`quote-${Date.now()}.txt`,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(U),a({title:"PDF Generated",description:"Quote PDF has been downloaded successfully"})}catch{a({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}finally{c(!1)}},$=()=>`
QUOTE DOCUMENT
==============

Customer ID: ${u.customerId}
Valid Until: ${u.validUntil.toLocaleDateString()}

LINE ITEMS:
-----------
${u.items.map(R=>{var B;return`
${R.description}
Quantity: ${R.quantity} x ${_e(R.unitPrice)}
${R.discount>0?`Discount: ${R.discount}${R.discountType==="percentage"?"%":" fixed"}`:""}
Total: ${_e(R.total)}
${R.isBundle?`
  Bundle Items:
  ${((B=R.bundleItems)==null?void 0:B.map(U=>`  - ${U.description} (${U.quantity}x)`).join(`
  `))||""}
`:""}
`}).join(`
`)}

TOTALS:
-------
Subtotal: ${_e(u.subtotal)}
Total Discount: ${_e(u.totalDiscount)}
Tax (${(u.taxRate*100).toFixed(1)}%): ${_e(u.tax)}
TOTAL: ${_e(u.total)}

Notes: ${u.notes}
Terms: ${u.terms}
    `,M=async()=>{if(u.items.length===0){a({title:"Validation Error",description:"At least one line item is required",variant:"destructive"});return}c(!0);try{const R={...u,customerId:u.customerId||t};await r(R),a({title:"Success",description:"Quote saved successfully"})}catch{a({title:"Error",description:"Failed to save quote",variant:"destructive"})}finally{c(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl flex items-center",children:[n.jsx(cs,{className:"h-5 w-5 mr-2 text-blue-500"}),e?"Edit Quote":"Create Quote"]}),n.jsx(Fe,{children:"Build a detailed quote with line items, pricing rules, and bundled products"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{children:[n.jsxs(xr,{value:d,onValueChange:f,className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-4",children:[n.jsx(Qe,{value:"items",children:"Line Items"}),n.jsx(Qe,{value:"products",children:"Products"}),n.jsx(Qe,{value:"pricing",children:"Pricing Rules"}),n.jsx(Qe,{value:"details",children:"Quote Details"})]}),n.jsxs(et,{value:"items",className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Quote Line Items"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Ve,{value:x,onValueChange:b,children:[n.jsx(ze,{className:"w-64",children:n.jsx(qe,{placeholder:"Add vehicle from inventory"})}),n.jsx(Ue,{children:E.map(R=>n.jsxs(K,{value:R.id,children:[R.year," ",R.make," ",R.model," - ",_e(R.price)]},R.id))})]}),x&&n.jsxs(J,{onClick:()=>N(x),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Vehicle"]}),n.jsxs(J,{onClick:()=>p(!0),size:"sm",variant:"outline",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Custom Item"]})]})]}),g&&n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Description"}),n.jsx(Pe,{value:y.description||"",onChange:R=>j(B=>({...B,description:R.target.value})),placeholder:"Item description"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Unit Price"}),n.jsx(Pe,{type:"number",value:y.unitPrice||"",onChange:R=>j(B=>({...B,unitPrice:parseFloat(R.target.value)||0})),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Quantity"}),n.jsx(Pe,{type:"number",value:y.quantity||1,onChange:R=>j(B=>({...B,quantity:parseInt(R.target.value)||1})),min:"1"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Discount"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{type:"number",value:y.discount||0,onChange:R=>j(B=>({...B,discount:parseFloat(R.target.value)||0})),placeholder:"0"}),n.jsxs(Ve,{value:y.discountType,onValueChange:R=>j(B=>({...B,discountType:R})),children:[n.jsx(ze,{className:"w-32",children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"percentage",children:"%"}),n.jsx(K,{value:"fixed",children:"$"})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx(J,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),n.jsx(J,{onClick:S,children:"Add Item"})]})]})}),n.jsxs("div",{className:"space-y-4",children:[u.items.map((R,B)=>n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Description"}),n.jsx(Pe,{value:R.description,onChange:U=>T(R.id,{description:U.target.value})}),R.isBundle&&n.jsxs(Re,{className:"mt-1 bg-purple-50 text-purple-700 border-purple-200",children:[n.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Quantity"}),n.jsx(Pe,{type:"number",value:R.quantity,onChange:U=>T(R.id,{quantity:parseInt(U.target.value)||1}),min:"1"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Unit Price"}),n.jsx(Pe,{type:"number",value:R.unitPrice,onChange:U=>T(R.id,{unitPrice:parseFloat(U.target.value)||0}),step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Discount"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{type:"number",value:R.discount,onChange:U=>T(R.id,{discount:parseFloat(U.target.value)||0}),step:"0.01"}),n.jsxs(Ve,{value:R.discountType,onValueChange:U=>T(R.id,{discountType:U}),children:[n.jsx(ze,{className:"w-16",children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"percentage",children:"%"}),n.jsx(K,{value:"fixed",children:"$"})]})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),n.jsx("div",{className:"font-bold text-lg",children:_e(R.total)})]}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>A(R.id),children:n.jsx(Cn,{className:"h-4 w-4"})})]})]}),R.isBundle&&R.bundleItems&&n.jsxs("div",{className:"mt-4 pl-4 border-l-2 border-purple-200",children:[n.jsx("h4",{className:"text-sm font-semibold text-purple-700 mb-2",children:"Bundle Contents:"}),n.jsx("div",{className:"space-y-2",children:R.bundleItems.map(U=>n.jsxs("div",{className:"flex items-center justify-between text-sm bg-purple-50 p-2 rounded",children:[n.jsx("span",{children:U.description}),n.jsxs("span",{children:[U.quantity,"x ",_e(U.unitPrice)]})]},U.id))})]})]})},R.id)),u.items.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No line items added yet"}),n.jsx("p",{className:"text-sm",children:"Add products or custom items to build your quote"})]})]}),u.items.length>0&&n.jsx(ue,{className:"bg-muted/30",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:_e(u.subtotal)})]}),n.jsxs("div",{className:"flex justify-between text-red-600",children:[n.jsx("span",{children:"Total Discount:"}),n.jsxs("span",{children:["-",_e(u.totalDiscount)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",(u.taxRate*100).toFixed(1),"%):"]}),n.jsx("span",{children:_e(u.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:_e(u.total)})]})]})})})]}),n.jsx(et,{value:"products",className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Inventory & Products"}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h4",{className:"text-md font-semibold mb-3 text-blue-600",children:"Available Vehicles"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:E.map(R=>n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsxs("h4",{className:"font-semibold",children:[R.year," ",R.make," ",R.model]}),n.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200",children:R.type.replace("_"," ").toUpperCase()})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["VIN: ",R.vin]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Location: ",R.location]}),n.jsx("div",{className:"text-lg font-bold text-primary",children:_e(R.price)}),R.features.length>0&&n.jsx("div",{className:"mt-3",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[R.features.slice(0,3).map((B,U)=>n.jsx(Re,{variant:"outline",className:"text-xs",children:B},U)),R.features.length>3&&n.jsxs(Re,{variant:"outline",className:"text-xs",children:["+",R.features.length-3," more"]})]})})]}),n.jsxs(J,{onClick:()=>N(R.id),size:"sm",className:"ml-4",children:[n.jsx(Nt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},R.id))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-semibold mb-3 text-green-600",children:"Available Products & Services"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:$p.map(R=>n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("h4",{className:"font-semibold",children:R.name}),R.isBundle&&n.jsxs(Re,{className:"bg-purple-50 text-purple-700 border-purple-200",children:[n.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:R.description}),n.jsx("div",{className:"text-lg font-bold text-primary",children:_e(R.price)}),R.isBundle&&R.bundleItems&&n.jsxs("div",{className:"mt-3 p-2 bg-purple-50 rounded",children:[n.jsx("div",{className:"text-xs font-semibold text-purple-700 mb-1",children:"Includes:"}),R.bundleItems.map(B=>{const U=$p.find(W=>W.id===B.productId);return n.jsxs("div",{className:"text-xs text-purple-600",children:["• ",U==null?void 0:U.name," (",B.quantity,"x)"]},B.productId)})]})]}),n.jsxs(J,{onClick:()=>_(R.id),size:"sm",className:"ml-4",children:[n.jsx(Nt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},R.id))})]})]})}),n.jsx(et,{value:"pricing",className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Pricing Rules"}),n.jsx("div",{className:"space-y-4",children:vse.filter(R=>R.isActive).map(R=>n.jsx(ue,{className:"shadow-sm",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:R.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[R.type==="quantity_discount"&&`Min quantity: ${R.conditions.minQuantity}`,R.type==="bundle_discount"&&"Applied to bundle products",R.type==="customer_discount"&&`Customer type: ${R.conditions.customerType}`]}),n.jsx("div",{className:"flex items-center space-x-2 mt-2",children:n.jsxs(Re,{className:"bg-green-50 text-green-700 border-green-200",children:[n.jsx(eg,{className:"h-3 w-3 mr-1"}),R.discount.type==="percentage"?`${R.discount.value}%`:_e(R.discount.value)," off"]})})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>O(),children:[n.jsx(ql,{className:"h-4 w-4 mr-1"}),"Apply"]})]})})},R.id))})]})}),n.jsxs(et,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"validUntil",children:"Valid Until"}),n.jsx(Pe,{id:"validUntil",type:"date",value:u.validUntil.toISOString().split("T")[0],onChange:R=>h(B=>({...B,validUntil:new Date(R.target.value)}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Pe,{id:"taxRate",type:"number",value:(u.taxRate*100).toFixed(2),onChange:R=>h(B=>({...B,taxRate:parseFloat(R.target.value)/100||0})),step:"0.01",min:"0",max:"100"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes"}),n.jsx(tr,{id:"notes",value:u.notes,onChange:R=>h(B=>({...B,notes:R.target.value})),placeholder:"Additional notes for the customer...",rows:3})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"terms",children:"Terms & Conditions"}),n.jsx(tr,{id:"terms",value:u.terms,onChange:R=>h(B=>({...B,terms:R.target.value})),placeholder:"Terms and conditions...",rows:4})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[n.jsx("div",{className:"flex space-x-2",children:n.jsxs(J,{variant:"outline",onClick:D,disabled:l||u.items.length===0,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),l?"Generating...":"Export PDF"]})}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx(J,{variant:"outline",onClick:s,disabled:l,children:"Cancel"}),n.jsx(J,{onClick:M,disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Quote"]})})]})]})]})]})})}function gse(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(!1);w.useEffect(()=>{c()},[]);const c=()=>{const C=pn("renter-insight-quotes",[]);t(C);const S=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"},{id:"6",name:"Backup Camera System",description:"Wireless backup camera with monitor",price:450,category:"accessory"},{id:"7",name:"Awning Package",description:"Electric awning with LED lighting",price:1200,category:"accessory"}],N=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0},{id:"3",name:"First-Time Buyer Discount",type:"customer_discount",conditions:{customerType:"first_time"},discount:{type:"percentage",value:5},isActive:!0}];s(S),i(N)},d=C=>{Gr("renter-insight-quotes",C)},f=async C=>{l(!0);try{const S={id:Math.random().toString(36).substr(2,9),customerId:C.customerId||"",items:C.items||[],subtotal:C.subtotal||0,totalDiscount:C.totalDiscount||0,tax:C.tax||0,taxRate:C.taxRate||.08,total:C.total||0,status:"draft",validUntil:C.validUntil||new Date(Date.now()+2592e6),notes:C.notes||"",terms:C.terms||"",createdAt:new Date,updatedAt:new Date},N=[...e,S];return t(N),d(N),S}finally{l(!1)}},u=async(C,S)=>{l(!0);try{const N=e.map(_=>_.id===C?{..._,...S,updatedAt:new Date}:_);return t(N),d(N),N.find(_=>_.id===C)}finally{l(!1)}};return{quotes:e,products:r,pricingRules:a,loading:o,createQuote:f,updateQuote:u,deleteQuote:async C=>{const S=e.filter(N=>N.id!==C);t(S),d(S)},duplicateQuote:async C=>{const S=e.find(I=>I.id===C);if(!S)return;const N={...S,id:Math.random().toString(36).substr(2,9),status:"draft",createdAt:new Date,updatedAt:new Date},_=[...e,N];return t(_),d(_),N},sendQuote:async C=>u(C,{status:"sent"}),acceptQuote:async C=>u(C,{status:"accepted"}),rejectQuote:async C=>u(C,{status:"rejected"}),calculateQuoteTotals:(C,S=.08)=>{const N=C.reduce((O,D)=>O+D.total,0),_=C.reduce((O,D)=>{const $=D.discountType==="percentage"?D.quantity*D.unitPrice*D.discount/100:D.discount*D.quantity;return O+$},0),I=N-_,T=I*S,A=I+T;return{subtotal:N,totalDiscount:_,tax:T,total:A}},applyPricingRules:(C,S)=>{let N=[...C];return a.forEach(_=>{if(_.isActive)switch(_.type){case"quantity_discount":if(_.conditions.minQuantity){const I=N.filter(T=>{var A;return((A=r.find(O=>O.id===T.productId))==null?void 0:A.category)==="accessory"});I.length>=_.conditions.minQuantity&&(N=N.map(T=>I.includes(T)?{...T,discount:_.discount.value,discountType:_.discount.type}:T))}break;case"bundle_discount":_.conditions.productIds&&(N=N.map(I=>{var T;return I.isBundle&&((T=_.conditions.productIds)!=null&&T.includes(I.productId||""))?{...I,discount:_.discount.value,discountType:_.discount.type}:I}));break}}),N},getQuotesByCustomer:C=>e.filter(S=>S.customerId===C),getQuotesByStatus:C=>e.filter(S=>S.status===C),getExpiredQuotes:()=>{const C=new Date;return e.filter(S=>new Date(S.validUntil)<C&&S.status!=="accepted")}}}function xse({quote:e,onClose:t,onEdit:r}){const s=a=>{switch(a){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Quote #",e.id]}),n.jsx(Fe,{children:"Quote details and line items"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>r(e),size:"sm",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx("div",{className:"mt-1",children:n.jsx(Re,{className:He("ri-badge-status",s(e.status)),children:e.status.toUpperCase()})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:ct(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),n.jsx("p",{className:"font-medium",children:ct(e.validUntil)})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),n.jsx("div",{className:"space-y-3",children:e.items.map((a,i)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:a.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",a.quantity," × ",_e(a.unitPrice)]}),a.isBundle&&n.jsx(Re,{className:"mt-1 bg-purple-50 text-purple-700 border-purple-200",children:"Bundle"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-bold text-lg",children:_e(a.total)}),a.discount>0&&n.jsxs("div",{className:"text-sm text-green-600",children:["-",a.discountType==="percentage"?`${a.discount}%`:_e(a.discount)," discount"]})]})]},a.id))})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:_e(e.subtotal)})]}),e.totalDiscount>0&&n.jsxs("div",{className:"flex justify-between text-green-600",children:[n.jsx("span",{children:"Total Discount:"}),n.jsxs("span",{children:["-",_e(e.totalDiscount)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:_e(e.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:_e(e.total)})]})]})}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:e.notes})})]}),e.terms&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Terms & Conditions"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.terms})})]})]})]})})}function yse(){const{quotes:e,loading:t,createQuote:r,updateQuote:s,deleteQuote:a,duplicateQuote:i,sendQuote:o,acceptQuote:l,rejectQuote:c}=gse(),{toast:d}=At(),[f,u]=w.useState(""),[h,m]=w.useState("all"),[v,g]=w.useState(!1),[p,x]=w.useState(null),[b,y]=w.useState(null),[j,E]=w.useState(""),C=R=>{switch(R){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=e.filter(R=>{const B=R.id.toLowerCase().includes(f.toLowerCase())||R.customerId.toLowerCase().includes(f.toLowerCase()),U=h==="all"||R.status===h;return B&&U}),N=()=>{x(null),E(""),g(!0)},_=R=>{x(R),E(R.customerId),g(!0)},I=R=>{y(R)},T=()=>y(null),A=async R=>{try{p?(await s(p.id,R),d({title:"Success",description:"Quote updated successfully"})):(await r(R),d({title:"Success",description:"Quote created successfully"})),g(!1),x(null)}catch{d({title:"Error",description:"Failed to save quote",variant:"destructive"})}},O=async R=>{try{await o(R),d({title:"Success",description:"Quote sent to customer"})}catch{d({title:"Error",description:"Failed to send quote",variant:"destructive"})}},D=async R=>{try{await i(R),d({title:"Success",description:"Quote duplicated successfully"})}catch{d({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},$=async R=>{if(window.confirm("Are you sure you want to delete this quote?"))try{await a(R),d({title:"Success",description:"Quote deleted successfully"})}catch{d({title:"Error",description:"Failed to delete quote",variant:"destructive"})}},M={total:e.length,draft:e.filter(R=>R.status==="draft").length,sent:e.filter(R=>R.status==="sent").length,accepted:e.filter(R=>R.status==="accepted").length,totalValue:e.reduce((R,B)=>R+B.total,0),acceptedValue:e.filter(R=>R.status==="accepted").reduce((R,B)=>R+B.total,0)};return n.jsxs("div",{className:"space-y-8",children:[v&&n.jsx(R8,{quote:p,customerId:j,onSave:A,onCancel:()=>{g(!1),x(null)}}),b&&n.jsx(xse,{quote:b,onClose:T,onEdit:_}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),n.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),n.jsxs(J,{className:"shadow-sm",onClick:N,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Quotes"}),n.jsx(cs,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:M.total}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"All quotes"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(cs,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:M.sent}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Lr,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Accepted"}),n.jsx(cs,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:M.accepted}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),M.total>0?Math.round(M.accepted/M.total*100):0,"% acceptance rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Quote Value"}),n.jsx(It,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_e(M.totalValue)}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(It,{className:"h-3 w-3 mr-1"}),_e(M.acceptedValue)," accepted"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search quotes...",value:f,onChange:R=>u(R.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(Ve,{value:h,onValueChange:m,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:"draft",children:"Draft"}),n.jsx(K,{value:"sent",children:"Sent"}),n.jsx(K,{value:"viewed",children:"Viewed"}),n.jsx(K,{value:"accepted",children:"Accepted"}),n.jsx(K,{value:"rejected",children:"Rejected"}),n.jsx(K,{value:"expired",children:"Expired"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Quotes (",S.length,")"]}),n.jsx(Fe,{children:"Manage customer quotes with advanced pricing and bundling"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[S.map(R=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",R.id]}),n.jsx(Re,{className:He("ri-badge-status",C(R.status)),children:R.status.toUpperCase()}),R.items.some(B=>B.isBundle)&&n.jsx(Re,{className:"bg-purple-50 text-purple-700 border-purple-200",children:"Bundle"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",R.customerId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"}),n.jsx("span",{className:"font-bold text-primary ml-1",children:_e(R.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Created:"})," ",ct(R.createdAt)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",ct(R.validUntil)]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[R.items.length," item(s)",R.totalDiscount>0&&n.jsxs("span",{className:"text-green-600 ml-2",children:["• ",_e(R.totalDiscount)," discount applied"]})]}),R.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",R.notes]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(R),children:[n.jsx(Wl,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>_(R),children:[n.jsx(zr,{className:"h-3 w-3 mr-1"}),"Edit"]}),R.status==="draft"&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>O(R.id),children:[n.jsx(Wo,{className:"h-3 w-3 mr-1"}),"Send"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D(R.id),children:[n.jsx(uE,{className:"h-3 w-3 mr-1"}),"Copy"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>$(R.id),children:n.jsx(Cn,{className:"h-3 w-3"})})]})]},R.id)),S.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No quotes found"}),n.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})]})})]})]})}function gI(){var _;const{leads:e,sources:t,activities:r,salesReps:s,updateLeadStatus:a,assignLead:i,getActivitiesByLead:o,getRemindersByUser:l,getLeadScore:c}=mo(),[d,f]=w.useState(""),[u,h]=w.useState("all"),[m,v]=w.useState("all"),[g,p]=w.useState("all"),[x,b]=w.useState(null),[y,j]=w.useState(!1),E=I=>{switch(I){case bs.NEW:return"bg-blue-50 text-blue-700 border-blue-200";case bs.CONTACTED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case bs.QUALIFIED:return"bg-green-50 text-green-700 border-green-200";case bs.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case bs.NEGOTIATION:return"bg-orange-50 text-orange-700 border-orange-200";case bs.CLOSED_WON:return"bg-emerald-50 text-emerald-700 border-emerald-200";case bs.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=I=>I>=80?"text-green-600 bg-green-50":I>=60?"text-yellow-600 bg-yellow-50":I>=40?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",S=e.filter(I=>{const T=`${I.firstName} ${I.lastName}`.toLowerCase().includes(d.toLowerCase())||I.email.toLowerCase().includes(d.toLowerCase())||I.phone.includes(d),A=u==="all"||I.status===u,O=m==="all"||I.sourceId===m,D=g==="all"||I.assignedTo===g;return T&&A&&O&&D}),N=I=>{console.log("New lead created:",I)};if(x){const I=o(x.id),T=l("current-user").filter(O=>O.leadId===x.id),A=c(x.id);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(J,{variant:"outline",onClick:()=>b(null),className:"mb-4",children:"← Back to Leads"}),n.jsxs("h1",{className:"ri-page-title",children:[x.firstName," ",x.lastName]}),n.jsx("p",{className:"ri-page-description",children:"Lead details and activity management"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Re,{className:He("ri-badge-status",E(x.status)),children:x.status.replace("_"," ").toUpperCase()}),x.score&&n.jsxs(Re,{className:He("ri-badge-status",C(x.score)),children:["Score: ",x.score]})]})]}),n.jsxs(xr,{defaultValue:"overview",className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-6",children:[n.jsx(Qe,{value:"overview",children:"Overview"}),n.jsx(Qe,{value:"activity",children:"Activity"}),n.jsx(Qe,{value:"communication",children:"Communication"}),n.jsx(Qe,{value:"ai-insights",children:"AI Insights"}),n.jsx(Qe,{value:"nurturing",children:"Nurturing"}),n.jsx(Qe,{value:"reminders",children:"Reminders"})]}),n.jsx(et,{value:"overview",className:"space-y-6",children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsx(je,{children:"Lead Information"})}),n.jsxs(fe,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium",children:x.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"font-medium",children:x.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Source"}),n.jsx("p",{className:"font-medium",children:x.source})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsx("p",{className:"font-medium",children:((_=s.find(O=>O.id===x.assignedTo))==null?void 0:_.name)||"Unassigned"})]}),Object.entries(x.customFields||{}).map(([O,D])=>n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground capitalize",children:O.replace(/([A-Z])/g," $1").trim()}),n.jsx("p",{className:"font-medium",children:D})]},O))]}),x.notes&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:x.notes})]})]})]})}),n.jsx("div",{className:"space-y-6",children:A&&n.jsx(Zne,{score:A})})]})}),n.jsx(et,{value:"activity",children:n.jsx(ese,{leadId:x.id,activities:I})}),n.jsx(et,{value:"communication",children:n.jsx(mse,{leadId:x.id,leadData:x})}),n.jsx(et,{value:"ai-insights",children:n.jsx(hse,{leadId:x.id,leadData:x})}),n.jsx(et,{value:"nurturing",children:n.jsx("div",{className:"space-y-6",children:n.jsx(vI,{})})}),n.jsx(et,{value:"reminders",children:n.jsx(ose,{leadId:x.id,reminders:T})})]})]})}return n.jsxs("div",{className:"space-y-8",children:[y&&n.jsx(Xu,{onClose:()=>j(!1),onSuccess:N}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"CRM & Prospecting"}),n.jsx("p",{className:"ri-page-description",children:"Manage leads, track activities, and monitor sales pipeline with AI-powered insights"})]}),n.jsxs(J,{className:"shadow-sm",onClick:()=>j(!0),children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Leads"}),n.jsx(Ln,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"New Leads"}),n.jsx(Ln,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(I=>I.status===bs.NEW).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"+8% from last week"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Qualified"}),n.jsx(Na,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(I=>I.status===bs.QUALIFIED).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"+15% from last month"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"AI Insights"}),n.jsx(Lo,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"47"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Lo,{className:"h-3 w-3 mr-1"}),"Active recommendations"]})]})]})]}),n.jsxs(xr,{defaultValue:"leads",className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-6",children:[n.jsx(Qe,{value:"leads",children:"Leads"}),n.jsx(Qe,{value:"pipeline",children:"Pipeline"}),n.jsx(Qe,{value:"quotes",children:"Quotes"}),n.jsx(Qe,{value:"nurturing",children:"Nurturing"}),n.jsx(Qe,{value:"forms",children:"Intake Forms"}),n.jsx(Qe,{value:"sources",children:"Sources"})]}),n.jsxs(et,{value:"leads",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search leads...",value:d,onChange:I=>f(I.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(Ve,{value:u,onValueChange:h,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:bs.NEW,children:"New"}),n.jsx(K,{value:bs.CONTACTED,children:"Contacted"}),n.jsx(K,{value:bs.QUALIFIED,children:"Qualified"}),n.jsx(K,{value:bs.PROPOSAL,children:"Proposal"}),n.jsx(K,{value:bs.NEGOTIATION,children:"Negotiation"}),n.jsx(K,{value:bs.CLOSED_WON,children:"Closed Won"}),n.jsx(K,{value:bs.CLOSED_LOST,children:"Closed Lost"})]})]}),n.jsxs(Ve,{value:m,onValueChange:v,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Source"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Sources"}),t.map(I=>n.jsx(K,{value:I.id,children:I.name},I.id))]})]}),n.jsxs(Ve,{value:g,onValueChange:p,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Assignee"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Reps"}),s.map(I=>n.jsx(K,{value:I.id,children:I.name},I.id))]})]}),n.jsxs(J,{onClick:()=>j(!0),className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Leads (",S.length,")"]}),n.jsx(Fe,{children:"Manage your sales prospects with AI-powered insights and automated nurturing"})]}),n.jsxs(J,{onClick:()=>j(!0),variant:"outline",className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:S.map(I=>{var T;return n.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>b(I),children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:[I.firstName," ",I.lastName]}),n.jsx(Re,{className:He("ri-badge-status",E(I.status)),children:I.status.replace("_"," ").toUpperCase()}),I.score&&n.jsx(Re,{className:He("ri-badge-status",C(I.score)),children:I.score}),n.jsxs(Re,{variant:"outline",className:"text-xs",children:[n.jsx(Lo,{className:"h-3 w-3 mr-1"}),"AI Ready"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Qr,{className:"h-3 w-3 mr-2 text-blue-500"}),I.email]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(wm,{className:"h-3 w-3 mr-2 text-green-500"}),I.phone]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Ln,{className:"h-3 w-3 mr-2 text-purple-500"}),((T=s.find(A=>A.id===I.assignedTo))==null?void 0:T.name)||"Unassigned"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Lr,{className:"h-3 w-3 mr-2 text-orange-500"}),ct(I.createdAt)]})]}),I.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:I.notes})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:A=>{A.stopPropagation()},children:[n.jsx(ln,{className:"h-3 w-3 mr-1"}),"Contact"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:A=>{A.stopPropagation(),b(I)},children:[n.jsx(Lo,{className:"h-3 w-3 mr-1"}),"AI Insights"]})]})]},I.id)})})})]})]}),n.jsx(et,{value:"pipeline",children:n.jsx(Wne,{})}),n.jsx(et,{value:"quotes",children:n.jsx(yse,{})}),n.jsx(et,{value:"nurturing",children:n.jsx(vI,{})}),n.jsx(et,{value:"forms",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Lead Intake Forms"}),n.jsx(Fe,{children:"Create and manage dynamic lead capture forms"})]}),n.jsx(fe,{children:n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Form builder coming soon..."})})]})}),n.jsx(et,{value:"sources",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Lead Sources"}),n.jsx(Fe,{children:"Manage and track lead source performance"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:t.map(I=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:I.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",I.type," • Conversion: ",I.conversionRate,"%",I.trackingCode&&` • Code: ${I.trackingCode}`]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Re,{className:I.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:I.isActive?"Active":"Inactive"}),n.jsx(J,{variant:"outline",size:"sm",children:n.jsx(tg,{className:"h-3 w-3"})})]})]},I.id))})})]})})]})]})}function bse(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(gI,{})}),n.jsx($t,{path:"/*",element:n.jsx(gI,{})})]})}function jse({vehicles:e,onEdit:t,onDelete:r,onView:s,onStatusChange:a}){const{toast:i}=At(),[o,l]=w.useState(""),[c,d]=w.useState("all"),[f,u]=w.useState("all"),[h,m]=w.useState("all"),[v,g]=w.useState([]),[p,x]=w.useState("updatedAt"),[b,y]=w.useState("desc"),j=Array.from(new Set(e.map(O=>O.location))),E=O=>{switch(O){case Yt.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case Yt.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Yt.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case Yt.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case Yt.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=O=>O.replace("_"," ").toUpperCase(),S=e.filter(O=>{const D=`${O.make} ${O.model}`.toLowerCase().includes(o.toLowerCase())||O.vin.toLowerCase().includes(o.toLowerCase())||O.year.toString().includes(o),$=c==="all"||O.status===c,M=f==="all"||O.type===f,R=h==="all"||O.location===h;return D&&$&&M&&R}).sort((O,D)=>{let $=O[p],M=D[p];return $ instanceof Date&&M instanceof Date&&($=$.getTime(),M=M.getTime()),typeof $=="string"&&typeof M=="string"&&($=$.toLowerCase(),M=M.toLowerCase()),$<M?b==="asc"?-1:1:$>M?b==="asc"?1:-1:0}),N=O=>{p===O?y(b==="asc"?"desc":"asc"):(x(O),y("asc"))},_=O=>{g(O?S.map(D=>D.id):[])},I=O=>{v.includes(O)?g(v.filter(D=>D!==O)):g([...v,O])},T=()=>{const D=(v.length>0?e.filter(U=>v.includes(U.id)):S).map(U=>({id:U.id,vin:U.vin,make:U.make,model:U.model,year:U.year,type:U.type,status:U.status,price:U.price,cost:U.cost,location:U.location,features:U.features.join(", "),createdAt:U.createdAt.toISOString(),updatedAt:U.updatedAt.toISOString()})),$=Bh.unparse(D),M=new Blob([$],{type:"text/csv;charset=utf-8;"}),R=URL.createObjectURL(M),B=document.createElement("a");B.href=R,B.setAttribute("download",`inventory_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(B),B.click(),document.body.removeChild(B),i({title:"Export Successful",description:`Exported ${D.length} vehicles to CSV`})},A=O=>{if(v.length===0){i({title:"No Vehicles Selected",description:"Please select vehicles to update",variant:"destructive"});return}v.forEach(D=>{a(D,O)}),i({title:"Status Updated",description:`Updated ${v.length} vehicles to ${O}`})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search by make, model, VIN...",value:o,onChange:O=>l(O.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ve,{value:c,onValueChange:d,children:[n.jsx(ze,{className:"w-[130px]",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:Yt.AVAILABLE,children:"Available"}),n.jsx(K,{value:Yt.RESERVED,children:"Reserved"}),n.jsx(K,{value:Yt.SOLD,children:"Sold"}),n.jsx(K,{value:Yt.SERVICE,children:"Service"}),n.jsx(K,{value:Yt.DELIVERED,children:"Delivered"})]})]}),n.jsxs(Ve,{value:f,onValueChange:u,children:[n.jsx(ze,{className:"w-[130px]",children:n.jsx(qe,{placeholder:"Type"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Types"}),n.jsx(K,{value:vt.RV,children:"RV"}),n.jsx(K,{value:vt.MOTORHOME,children:"Motorhome"}),n.jsx(K,{value:vt.TRAVEL_TRAILER,children:"Travel Trailer"}),n.jsx(K,{value:vt.FIFTH_WHEEL,children:"Fifth Wheel"}),n.jsx(K,{value:vt.TOY_HAULER,children:"Toy Hauler"})]})]}),n.jsxs(Ve,{value:h,onValueChange:m,children:[n.jsx(ze,{className:"w-[130px]",children:n.jsx(qe,{placeholder:"Location"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Locations"}),j.map(O=>n.jsx(K,{value:O,children:O},O))]})]})]})]}),v.length>0&&n.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-lg",children:[n.jsxs("div",{className:"text-sm font-medium",children:[v.length," vehicles selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ve,{onValueChange:O=>A(O),children:[n.jsx(ze,{className:"w-[150px]",children:n.jsx(qe,{placeholder:"Change Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Yt.AVAILABLE,children:"Available"}),n.jsx(K,{value:Yt.RESERVED,children:"Reserved"}),n.jsx(K,{value:Yt.SOLD,children:"Sold"}),n.jsx(K,{value:Yt.SERVICE,children:"Service"}),n.jsx(K,{value:Yt.DELIVERED,children:"Delivered"}),n.jsx(K,{value:vt.SINGLE_WIDE,children:"Single Wide MH"}),n.jsx(K,{value:vt.DOUBLE_WIDE,children:"Double Wide MH"}),n.jsx(K,{value:vt.TRIPLE_WIDE,children:"Triple Wide MH"}),n.jsx(K,{value:vt.PARK_MODEL,children:"Park Model"}),n.jsx(K,{value:vt.MODULAR_HOME,children:"Modular Home"})]})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:T,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g([]),children:[n.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Clear Selection"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Inventory (",S.length,")"]}),n.jsx(Fe,{children:"Manage your RV and motorhome inventory"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(J,{variant:"outline",size:"sm",onClick:T,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})}),n.jsx(fe,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"p-2 text-left",children:n.jsx(Vt,{checked:v.length===S.length&&S.length>0,onCheckedChange:_})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("make"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Make/Model"}),p==="make"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("year"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Year"}),p==="year"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("vin"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"VIN"}),p==="vin"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("type"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Type"}),p==="type"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("status"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Status"}),p==="status"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("location"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Location"}),p==="location"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("price"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Price"}),p==="price"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left",children:"Media"}),n.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),n.jsxs("tbody",{children:[S.map(O=>n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:n.jsx(Vt,{checked:v.includes(O.id),onCheckedChange:()=>I(O.id)})}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"font-medium",children:[O.make," ",O.model]})}),n.jsx("td",{className:"p-2",children:O.year}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:"font-mono text-xs",children:O.vin})}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:"text-sm",children:C(O.type)})}),n.jsx("td",{className:"p-2",children:n.jsx(Re,{className:He("ri-badge-status",E(O.status)),children:O.status.toUpperCase()})}),n.jsx("td",{className:"p-2",children:O.location}),n.jsx("td",{className:"p-2 font-medium text-primary",children:_e(O.price)}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsxs(Re,{variant:"outline",className:"text-xs",children:[n.jsx(Rh,{className:"h-3 w-3 mr-1"}),O.images.length]}),O.customFields.videos&&n.jsxs(Re,{variant:"outline",className:"text-xs",children:[n.jsx(gb,{className:"h-3 w-3 mr-1"}),O.customFields.videos.length||0]})]})}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>s(O),children:n.jsx(Wl,{className:"h-4 w-4"})}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>t(O),children:n.jsx(zr,{className:"h-4 w-4"})}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>r(O.id),children:n.jsx(Cn,{className:"h-4 w-4"})})]})})]},O.id)),S.length===0&&n.jsx("tr",{children:n.jsxs("td",{colSpan:10,className:"p-8 text-center text-muted-foreground",children:[n.jsx(Ws,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No vehicles found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})]})]})})})]})]})}var $8={exports:{}},wse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Nse=wse,Sse=Nse;function F8(){}function M8(){}M8.resetWarningCache=F8;var Cse=function(){function e(s,a,i,o,l,c){if(c!==Sse){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:M8,resetWarningCache:F8};return r.PropTypes=r,r};$8.exports=Cse();var Ase=$8.exports;const Ct=Cr(Ase),Ese=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function zh(e,t,r){const s=Pse(e),{webkitRelativePath:a}=e,i=typeof t=="string"?t:typeof a=="string"&&a.length>0?a:`./${e.name}`;return typeof s.path!="string"&&xI(s,"path",i),r!==void 0&&Object.defineProperty(s,"handle",{value:r,writable:!1,configurable:!1,enumerable:!0}),xI(s,"relativePath",i),s}function Pse(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const s=t.split(".").pop().toLowerCase(),a=Ese.get(s);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}function xI(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1,enumerable:!0})}const Tse=[".DS_Store","Thumbs.db"];function _se(e){return Gu(this,void 0,void 0,function*(){return Eb(e)&&Ise(e.dataTransfer)?Lse(e.dataTransfer,e.type):kse(e)?Dse(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?Ose(e):[]})}function Ise(e){return Eb(e)}function kse(e){return Eb(e)&&Eb(e.target)}function Eb(e){return typeof e=="object"&&e!==null}function Dse(e){return rC(e.target.files).map(t=>zh(t))}function Ose(e){return Gu(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>r.getFile()))).map(r=>zh(r))})}function Lse(e,t){return Gu(this,void 0,void 0,function*(){if(e.items){const r=rC(e.items).filter(a=>a.kind==="file");if(t!=="drop")return r;const s=yield Promise.all(r.map(Rse));return yI(B8(s))}return yI(rC(e.files).map(r=>zh(r)))})}function yI(e){return e.filter(t=>Tse.indexOf(t.name)===-1)}function rC(e){if(e===null)return[];const t=[];for(let r=0;r<e.length;r++){const s=e[r];t.push(s)}return t}function Rse(e){if(typeof e.webkitGetAsEntry!="function")return bI(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?z8(t):bI(e,t)}function B8(e){return e.reduce((t,r)=>[...t,...Array.isArray(r)?B8(r):[r]],[])}function bI(e,t){return Gu(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const i=yield e.getAsFileSystemHandle();if(i===null)throw new Error(`${e} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,zh(o)}}const s=e.getAsFile();if(!s)throw new Error(`${e} is not a File`);return zh(s,(r=t==null?void 0:t.fullPath)!==null&&r!==void 0?r:void 0)})}function $se(e){return Gu(this,void 0,void 0,function*(){return e.isDirectory?z8(e):Fse(e)})}function z8(e){const t=e.createReader();return new Promise((r,s)=>{const a=[];function i(){t.readEntries(o=>Gu(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map($se));a.push(l),i()}else try{const l=yield Promise.all(a);r(l)}catch(l){s(l)}}),o=>{s(o)})}i()})}function Fse(e){return Gu(this,void 0,void 0,function*(){return new Promise((t,r)=>{e.file(s=>{const a=zh(s,e.fullPath);t(a)},s=>{r(s)})})})}var CN=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(",");if(r.length===0)return!0;var s=e.name||"",a=(e.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return r.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?i===l.replace(/\/.*$/,""):a===l})}return!0};function jI(e){return zse(e)||Bse(e)||V8(e)||Mse()}function Mse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zse(e){if(Array.isArray(e))return nC(e)}function wI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function NI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(r),!0).forEach(function(s){U8(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function U8(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sg(e,t){return qse(e)||Vse(e,t)||V8(e,t)||Use()}function Use(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V8(e,t){if(e){if(typeof e=="string")return nC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nC(e,t)}}function nC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Vse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s=[],a=!0,i=!1,o,l;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(s.push(o.value),!(t&&s.length===t));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw l}}return s}}function qse(e){if(Array.isArray(e))return e}var Wse=typeof CN=="function"?CN:CN.default,Hse="file-invalid-type",Gse="file-too-large",Kse="file-too-small",Yse="too-many-files",Xse=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=t.split(","),s=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:Hse,message:"File type must be ".concat(s)}},SI=function(t){return{code:Gse,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},CI=function(t){return{code:Kse,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Qse={code:Yse,message:"Too many files"};function q8(e,t){var r=e.type==="application/x-moz-file"||Wse(e,t);return[r,r?null:Xse(t)]}function W8(e,t,r){if(tu(e.size))if(tu(t)&&tu(r)){if(e.size>r)return[!1,SI(r)];if(e.size<t)return[!1,CI(t)]}else{if(tu(t)&&e.size<t)return[!1,CI(t)];if(tu(r)&&e.size>r)return[!1,SI(r)]}return[!0,null]}function tu(e){return e!=null}function Jse(e){var t=e.files,r=e.accept,s=e.minSize,a=e.maxSize,i=e.multiple,o=e.maxFiles,l=e.validator;return!i&&t.length>1||i&&o>=1&&t.length>o?!1:t.every(function(c){var d=q8(c,r),f=sg(d,1),u=f[0],h=W8(c,s,a),m=sg(h,1),v=m[0],g=l?l(c):null;return u&&v&&!g})}function Pb(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function K0(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function AI(e){e.preventDefault()}function Zse(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function eae(e){return e.indexOf("Edge/")!==-1}function tae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Zse(e)||eae(e)}function To(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return t.some(function(l){return!Pb(s)&&l&&l.apply(void 0,[s].concat(i)),Pb(s)})}}function rae(){return"showOpenFilePicker"in window}function nae(e){if(tu(e)){var t=Object.entries(e).filter(function(r){var s=sg(r,2),a=s[0],i=s[1],o=!0;return H8(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(G8))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,s){var a=sg(s,2),i=a[0],o=a[1];return NI(NI({},r),{},U8({},i,o))},{});return[{description:"Files",accept:t}]}return e}function sae(e){if(tu(e))return Object.entries(e).reduce(function(t,r){var s=sg(r,2),a=s[0],i=s[1];return[].concat(jI(t),[a],jI(i))},[]).filter(function(t){return H8(t)||G8(t)}).join(",")}function aae(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function iae(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function H8(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function G8(e){return/^.*\.[\w]+$/.test(e)}var oae=["children"],lae=["open"],cae=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],dae=["refKey","onChange","onClick"];function uae(e){return mae(e)||hae(e)||K8(e)||fae()}function fae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hae(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mae(e){if(Array.isArray(e))return sC(e)}function AN(e,t){return gae(e)||vae(e,t)||K8(e,t)||pae()}function pae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K8(e,t){if(e){if(typeof e=="string")return sC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sC(e,t)}}function sC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function vae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s=[],a=!0,i=!1,o,l;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(s.push(o.value),!(t&&s.length===t));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw l}}return s}}function gae(e){if(Array.isArray(e))return e}function EI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(r),!0).forEach(function(s){aC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function aC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tb(e,t){if(e==null)return{};var r=xae(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function xae(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var LE=w.forwardRef(function(e,t){var r=e.children,s=Tb(e,oae),a=ix(s),i=a.open,o=Tb(a,lae);return w.useImperativeHandle(t,function(){return{open:i}},[i]),ce.createElement(w.Fragment,null,r(fn(fn({},o),{},{open:i})))});LE.displayName="Dropzone";var Y8={disabled:!1,getFilesFromEvent:_se,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};LE.defaultProps=Y8;LE.propTypes={children:Ct.func,accept:Ct.objectOf(Ct.arrayOf(Ct.string)),multiple:Ct.bool,preventDropOnDocument:Ct.bool,noClick:Ct.bool,noKeyboard:Ct.bool,noDrag:Ct.bool,noDragEventsBubbling:Ct.bool,minSize:Ct.number,maxSize:Ct.number,maxFiles:Ct.number,disabled:Ct.bool,getFilesFromEvent:Ct.func,onFileDialogCancel:Ct.func,onFileDialogOpen:Ct.func,useFsAccessApi:Ct.bool,autoFocus:Ct.bool,onDragEnter:Ct.func,onDragLeave:Ct.func,onDragOver:Ct.func,onDrop:Ct.func,onDropAccepted:Ct.func,onDropRejected:Ct.func,onError:Ct.func,validator:Ct.func};var iC={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ix(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=fn(fn({},Y8),e),r=t.accept,s=t.disabled,a=t.getFilesFromEvent,i=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,f=t.onDragLeave,u=t.onDragOver,h=t.onDrop,m=t.onDropAccepted,v=t.onDropRejected,g=t.onFileDialogCancel,p=t.onFileDialogOpen,x=t.useFsAccessApi,b=t.autoFocus,y=t.preventDropOnDocument,j=t.noClick,E=t.noKeyboard,C=t.noDrag,S=t.noDragEventsBubbling,N=t.onError,_=t.validator,I=w.useMemo(function(){return sae(r)},[r]),T=w.useMemo(function(){return nae(r)},[r]),A=w.useMemo(function(){return typeof p=="function"?p:PI},[p]),O=w.useMemo(function(){return typeof g=="function"?g:PI},[g]),D=w.useRef(null),$=w.useRef(null),M=w.useReducer(yae,iC),R=AN(M,2),B=R[0],U=R[1],W=B.isFocused,q=B.isFileDialogActive,L=w.useRef(typeof window<"u"&&window.isSecureContext&&x&&rae()),V=function(){!L.current&&q&&setTimeout(function(){if($.current){var Ze=$.current.files;Ze.length||(U({type:"closeDialog"}),O())}},300)};w.useEffect(function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}},[$,q,O,L]);var G=w.useRef([]),Z=function(Ze){D.current&&D.current.contains(Ze.target)||(Ze.preventDefault(),G.current=[])};w.useEffect(function(){return y&&(document.addEventListener("dragover",AI,!1),document.addEventListener("drop",Z,!1)),function(){y&&(document.removeEventListener("dragover",AI),document.removeEventListener("drop",Z))}},[D,y]),w.useEffect(function(){return!s&&b&&D.current&&D.current.focus(),function(){}},[D,b,s]);var te=w.useCallback(function(Me){N?N(Me):console.error(Me)},[N]),he=w.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me),G.current=[].concat(uae(G.current),[Me.target]),K0(Me)&&Promise.resolve(a(Me)).then(function(Ze){if(!(Pb(Me)&&!S)){var ft=Ze.length,xt=ft>0&&Jse({files:Ze,accept:I,minSize:o,maxSize:i,multiple:l,maxFiles:c,validator:_}),kt=ft>0&&!xt;U({isDragAccept:xt,isDragReject:kt,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Me)}}).catch(function(Ze){return te(Ze)})},[a,d,te,S,I,o,i,l,c,_]),me=w.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me);var Ze=K0(Me);if(Ze&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return Ze&&u&&u(Me),!1},[u,S]),oe=w.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me);var Ze=G.current.filter(function(xt){return D.current&&D.current.contains(xt)}),ft=Ze.indexOf(Me.target);ft!==-1&&Ze.splice(ft,1),G.current=Ze,!(Ze.length>0)&&(U({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),K0(Me)&&f&&f(Me))},[D,f,S]),we=w.useCallback(function(Me,Ze){var ft=[],xt=[];Me.forEach(function(kt){var St=q8(kt,I),zt=AN(St,2),lt=zt[0],jr=zt[1],Xt=W8(kt,o,i),Wn=AN(Xt,2),wr=Wn[0],kr=Wn[1],aa=_?_(kt):null;if(lt&&wr&&!aa)ft.push(kt);else{var dr=[jr,kr];aa&&(dr=dr.concat(aa)),xt.push({file:kt,errors:dr.filter(function(ol){return ol})})}}),(!l&&ft.length>1||l&&c>=1&&ft.length>c)&&(ft.forEach(function(kt){xt.push({file:kt,errors:[Qse]})}),ft.splice(0)),U({acceptedFiles:ft,fileRejections:xt,isDragReject:xt.length>0,type:"setFiles"}),h&&h(ft,xt,Ze),xt.length>0&&v&&v(xt,Ze),ft.length>0&&m&&m(ft,Ze)},[U,l,I,o,i,c,h,m,v,_]),ve=w.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me),G.current=[],K0(Me)&&Promise.resolve(a(Me)).then(function(Ze){Pb(Me)&&!S||we(Ze,Me)}).catch(function(Ze){return te(Ze)}),U({type:"reset"})},[a,we,te,S]),ge=w.useCallback(function(){if(L.current){U({type:"openDialog"}),A();var Me={multiple:l,types:T};window.showOpenFilePicker(Me).then(function(Ze){return a(Ze)}).then(function(Ze){we(Ze,null),U({type:"closeDialog"})}).catch(function(Ze){aae(Ze)?(O(Ze),U({type:"closeDialog"})):iae(Ze)?(L.current=!1,$.current?($.current.value=null,$.current.click()):te(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):te(Ze)});return}$.current&&(U({type:"openDialog"}),A(),$.current.value=null,$.current.click())},[U,A,O,x,we,te,T,l]),De=w.useCallback(function(Me){!D.current||!D.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),ge())},[D,ge]),xe=w.useCallback(function(){U({type:"focus"})},[]),le=w.useCallback(function(){U({type:"blur"})},[]),re=w.useCallback(function(){j||(tae()?setTimeout(ge,0):ge())},[j,ge]),Ce=function(Ze){return s?null:Ze},Ne=function(Ze){return E?null:Ce(Ze)},ye=function(Ze){return C?null:Ce(Ze)},$e=function(Ze){S&&Ze.stopPropagation()},nt=w.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ze=Me.refKey,ft=Ze===void 0?"ref":Ze,xt=Me.role,kt=Me.onKeyDown,St=Me.onFocus,zt=Me.onBlur,lt=Me.onClick,jr=Me.onDragEnter,Xt=Me.onDragOver,Wn=Me.onDragLeave,wr=Me.onDrop,kr=Tb(Me,cae);return fn(fn(aC({onKeyDown:Ne(To(kt,De)),onFocus:Ne(To(St,xe)),onBlur:Ne(To(zt,le)),onClick:Ce(To(lt,re)),onDragEnter:ye(To(jr,he)),onDragOver:ye(To(Xt,me)),onDragLeave:ye(To(Wn,oe)),onDrop:ye(To(wr,ve)),role:typeof xt=="string"&&xt!==""?xt:"presentation"},ft,D),!s&&!E?{tabIndex:0}:{}),kr)}},[D,De,xe,le,re,he,me,oe,ve,E,C,s]),rt=w.useCallback(function(Me){Me.stopPropagation()},[]),gt=w.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ze=Me.refKey,ft=Ze===void 0?"ref":Ze,xt=Me.onChange,kt=Me.onClick,St=Tb(Me,dae),zt=aC({accept:I,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ce(To(xt,ve)),onClick:Ce(To(kt,rt)),tabIndex:-1},ft,$);return fn(fn({},zt),St)}},[$,r,l,ve,s]);return fn(fn({},B),{},{isFocused:W&&!s,getRootProps:nt,getInputProps:gt,rootRef:D,inputRef:$,open:Ce(ge)})}function yae(e,t){switch(t.type){case"focus":return fn(fn({},e),{},{isFocused:!0});case"blur":return fn(fn({},e),{},{isFocused:!1});case"openDialog":return fn(fn({},iC),{},{isFileDialogActive:!0});case"closeDialog":return fn(fn({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return fn(fn({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return fn(fn({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return fn({},iC);default:return e}}function PI(){}function bae({vehicle:e,onSave:t,onCancel:r,onScanBarcode:s}){var N,_,I,T,A,O,D,$,M,R,B,U,W,q,L,V,G,Z,te,he,me,oe,we,ve,ge,De;const{toast:a}=At(),[i,o]=w.useState(!1),[l,c]=w.useState({vin:"",make:"",model:"",year:new Date().getFullYear(),type:vt.RV,status:Yt.AVAILABLE,price:0,cost:0,location:"",features:[],images:[],customFields:{videos:[],exteriorColor:"",interiorColor:"",length:"",weight:"",sleeps:"",slideouts:"",fuelType:"",mileage:"",condition:"New"}}),[d,f]=w.useState(""),[u,h]=w.useState(""),[m,v]=w.useState(!1);w.useEffect(()=>{e&&c({...e,customFields:{...e.customFields,videos:e.customFields.videos||[]}})},[e]);const{getRootProps:g,getInputProps:p}=ix({accept:{"image/*":[]},onDrop:xe=>{const le=xe.map(re=>URL.createObjectURL(re));c(re=>({...re,images:[...re.images||[],...le]})),a({title:"Images Added",description:`Added ${xe.length} images`})}}),x=async xe=>{if(xe.preventDefault(),!l.vin||!l.make||!l.model||!l.year){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}o(!0);try{await t(l),a({title:"Success",description:`Vehicle ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} vehicle`,variant:"destructive"})}finally{o(!1)}},b=()=>{var xe;d.trim()&&!((xe=l.features)!=null&&xe.includes(d.trim()))&&(c(le=>({...le,features:[...le.features||[],d.trim()]})),f(""))},y=xe=>{c(le=>{var re;return{...le,features:((re=le.features)==null?void 0:re.filter(Ce=>Ce!==xe))||[]}})},j=()=>{u.trim()&&(c(xe=>{var le;return{...xe,customFields:{...xe.customFields,videos:[...((le=xe.customFields)==null?void 0:le.videos)||[],u.trim()]}}}),h(""))},E=xe=>{c(le=>{var re,Ce;return{...le,customFields:{...le.customFields,videos:((Ce=(re=le.customFields)==null?void 0:re.videos)==null?void 0:Ce.filter(Ne=>Ne!==xe))||[]}}})},C=xe=>{c(le=>{var re;return{...le,images:((re=le.images)==null?void 0:re.filter(Ce=>Ce!==xe))||[]}})},S=xe=>{xe.length===17?(c(le=>({...le,vin:xe})),a({title:"Barcode Scanned",description:`VIN: ${xe}`}),v(!1)):a({title:"Invalid Barcode",description:"The scanned barcode does not appear to be a valid VIN",variant:"destructive"})};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Vehicle":"Add New Home"}),n.jsx(Fe,{children:e?"Update vehicle details":"Add a new home to inventory"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vin",children:"VIN *"}),n.jsxs("div",{className:"flex",children:[n.jsx(Pe,{id:"vin",value:l.vin,onChange:xe=>c(le=>({...le,vin:xe.target.value})),placeholder:"Vehicle Identification Number",className:"flex-1"}),n.jsx(J,{type:"button",variant:"outline",className:"ml-2",onClick:()=>v(!0),children:n.jsx(bM,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"year",children:"Year *"}),n.jsx(Pe,{id:"year",type:"number",value:l.year,onChange:xe=>c(le=>({...le,year:parseInt(xe.target.value)||new Date().getFullYear()})),min:"1900",max:new Date().getFullYear()+1})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"make",children:"Make *"}),n.jsx(Pe,{id:"make",value:l.make,onChange:xe=>c(le=>({...le,make:xe.target.value})),placeholder:"e.g., Forest River, Winnebago"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"model",children:"Model *"}),n.jsx(Pe,{id:"model",value:l.model,onChange:xe=>c(le=>({...le,model:xe.target.value})),placeholder:"e.g., Georgetown, View"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Type"}),n.jsxs(Ve,{value:l.type,onValueChange:xe=>c(le=>({...le,type:xe})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:vt.RV,children:"RV"}),n.jsx(K,{value:vt.MOTORHOME,children:"Motorhome"}),n.jsx(K,{value:vt.TRAVEL_TRAILER,children:"Travel Trailer"}),n.jsx(K,{value:vt.FIFTH_WHEEL,children:"Fifth Wheel"}),n.jsx(K,{value:vt.TOY_HAULER,children:"Toy Hauler"}),n.jsx(K,{value:vt.SINGLE_WIDE,children:"Single Wide MH"}),n.jsx(K,{value:vt.DOUBLE_WIDE,children:"Double Wide MH"}),n.jsx(K,{value:vt.TRIPLE_WIDE,children:"Triple Wide MH"}),n.jsx(K,{value:vt.PARK_MODEL,children:"Park Model"}),n.jsx(K,{value:vt.MODULAR_HOME,children:"Modular Home"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(Ve,{value:l.status,onValueChange:xe=>c(le=>({...le,status:xe})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Yt.AVAILABLE,children:"Available"}),n.jsx(K,{value:Yt.RESERVED,children:"Reserved"}),n.jsx(K,{value:Yt.SOLD,children:"Sold"}),n.jsx(K,{value:Yt.SERVICE,children:"Service"}),n.jsx(K,{value:Yt.DELIVERED,children:"Delivered"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"location",children:"Location"}),n.jsx(Pe,{id:"location",value:l.location,onChange:xe=>c(le=>({...le,location:xe.target.value})),placeholder:"e.g., Lot A-15"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"price",children:"Price *"}),n.jsx(Pe,{id:"price",type:"number",value:l.price,onChange:xe=>c(le=>({...le,price:parseFloat(xe.target.value)||0})),min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"cost",children:"Cost *"}),n.jsx(Pe,{id:"cost",type:"number",value:l.cost,onChange:xe=>c(le=>({...le,cost:parseFloat(xe.target.value)||0})),min:"0",step:"0.01"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Features"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{value:d,onChange:xe=>f(xe.target.value),placeholder:"Add a feature",onKeyDown:xe=>{xe.key==="Enter"&&(xe.preventDefault(),b())}}),n.jsx(J,{type:"button",onClick:b,children:n.jsx(Nt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(N=l.features)==null?void 0:N.map((xe,le)=>n.jsxs(Re,{variant:"secondary",className:"flex items-center gap-1",children:[xe,n.jsx(Bt,{className:"h-3 w-3 cursor-pointer",onClick:()=>y(xe)})]},le)),(!l.features||l.features.length===0)&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No features added yet"})]})]}),(l.type===vt.SINGLE_WIDE||l.type===vt.DOUBLE_WIDE||l.type===vt.TRIPLE_WIDE||l.type===vt.PARK_MODEL||l.type===vt.MODULAR_HOME)&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Manufactured Housing Details"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"squareFootage",children:"Square Footage"}),n.jsx(Pe,{id:"squareFootage",value:((_=l.customFields)==null?void 0:_.squareFootage)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,squareFootage:xe.target.value}})),placeholder:"e.g., 1200"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"bedrooms",children:"Bedrooms"}),n.jsxs(Ve,{value:((I=l.customFields)==null?void 0:I.bedrooms)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,bedrooms:xe}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select number"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"1",children:"1"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"4",children:"4"}),n.jsx(K,{value:"5+",children:"5+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"bathrooms",children:"Bathrooms"}),n.jsxs(Ve,{value:((T=l.customFields)==null?void 0:T.bathrooms)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,bathrooms:xe}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select number"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"1",children:"1"}),n.jsx(K,{value:"1.5",children:"1.5"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"2.5",children:"2.5"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"3+",children:"3+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"constructionType",children:"Construction Type"}),n.jsxs(Ve,{value:((A=l.customFields)==null?void 0:A.constructionType)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,constructionType:xe}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select type"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"Manufactured",children:"Manufactured"}),n.jsx(K,{value:"Modular",children:"Modular"}),n.jsx(K,{value:"Park Model",children:"Park Model"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"exteriorSiding",children:"Exterior Siding"}),n.jsx(Pe,{id:"exteriorSiding",value:((O=l.customFields)==null?void 0:O.exteriorSiding)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,exteriorSiding:xe.target.value}})),placeholder:"e.g., Vinyl, Hardiplank"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"roofType",children:"Roof Type"}),n.jsx(Pe,{id:"roofType",value:((D=l.customFields)==null?void 0:D.roofType)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,roofType:xe.target.value}})),placeholder:"e.g., Shingle, Metal"})]})]})]}),(l.type===vt.SINGLE_WIDE||l.type===vt.DOUBLE_WIDE||l.type===vt.TRIPLE_WIDE||l.type===vt.PARK_MODEL||l.type===vt.MODULAR_HOME)&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"squareFootage",children:"Square Footage"}),n.jsx(Pe,{id:"squareFootage",value:(($=l.customFields)==null?void 0:$.squareFootage)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,squareFootage:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"constructionType",children:"Construction Type"}),n.jsxs(Ve,{value:((M=l.customFields)==null?void 0:M.constructionType)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,constructionType:xe}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select type"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"Manufactured",children:"Manufactured"}),n.jsx(K,{value:"Modular",children:"Modular"}),n.jsx(K,{value:"Park Model",children:"Park Model"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"bedrooms",children:"Bedrooms"}),n.jsxs(Ve,{value:((R=l.customFields)==null?void 0:R.bedrooms)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,bedrooms:xe}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select number"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"1",children:"1"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"4",children:"4"}),n.jsx(K,{value:"5+",children:"5+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"bathrooms",children:"Bathrooms"}),n.jsxs(Ve,{value:((B=l.customFields)==null?void 0:B.bathrooms)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,bathrooms:xe}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select number"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"1",children:"1"}),n.jsx(K,{value:"1.5",children:"1.5"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"2.5",children:"2.5"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"3+",children:"3+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"exteriorSiding",children:"Exterior Siding"}),n.jsx(Pe,{id:"exteriorSiding",value:((U=l.customFields)==null?void 0:U.exteriorSiding)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,exteriorSiding:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"roofType",children:"Roof Type"}),n.jsx(Pe,{id:"roofType",value:((W=l.customFields)==null?void 0:W.roofType)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,roofType:xe.target.value}}))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Specifications"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"exteriorColor",children:"Exterior Color"}),n.jsx(Pe,{id:"exteriorColor",value:((q=l.customFields)==null?void 0:q.exteriorColor)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,exteriorColor:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"interiorColor",children:"Interior Color"}),n.jsx(Pe,{id:"interiorColor",value:((L=l.customFields)==null?void 0:L.interiorColor)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,interiorColor:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"length",children:"Length (ft)"}),n.jsx(Pe,{id:"length",value:((V=l.customFields)==null?void 0:V.length)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,length:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"weight",children:"Weight (lbs)"}),n.jsx(Pe,{id:"weight",value:((G=l.customFields)==null?void 0:G.weight)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,weight:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"sleeps",children:"Sleeps"}),n.jsx(Pe,{id:"sleeps",value:((Z=l.customFields)==null?void 0:Z.sleeps)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,sleeps:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"slideouts",children:"Slideouts"}),n.jsx(Pe,{id:"slideouts",value:((te=l.customFields)==null?void 0:te.slideouts)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,slideouts:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"fuelType",children:"Fuel Type"}),n.jsxs(Ve,{value:((he=l.customFields)==null?void 0:he.fuelType)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,fuelType:xe}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select fuel type"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"Not Applicable"}),n.jsx(K,{value:"gasoline",children:"Gasoline"}),n.jsx(K,{value:"diesel",children:"Diesel"}),n.jsx(K,{value:"propane",children:"Propane"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"mileage",children:"Mileage"}),n.jsx(Pe,{id:"mileage",value:((me=l.customFields)==null?void 0:me.mileage)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,mileage:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"condition",children:"Condition"}),n.jsxs(Ve,{value:((oe=l.customFields)==null?void 0:oe.condition)||"New",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,condition:xe}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"New",children:"New"}),n.jsx(K,{value:"Used",children:"Used"}),n.jsx(K,{value:"Certified Pre-Owned",children:"Certified Pre-Owned"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Images"}),n.jsxs("div",{...g(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[n.jsx("input",{...p()}),n.jsx(Rh,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop images here, or click to select files"})]}),l.images&&l.images.length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:l.images.map((xe,le)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:xe,alt:`Vehicle ${le+1}`,className:"h-24 w-full object-cover rounded-md"}),n.jsx(J,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>C(xe),children:n.jsx(Bt,{className:"h-3 w-3"})})]},le))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Videos"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{value:u,onChange:xe=>h(xe.target.value),placeholder:"Add a video URL (YouTube, Vimeo, etc.)",onKeyDown:xe=>{xe.key==="Enter"&&(xe.preventDefault(),j())}}),n.jsx(J,{type:"button",onClick:j,children:n.jsx(Nt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[(ve=(we=l.customFields)==null?void 0:we.videos)==null?void 0:ve.map((xe,le)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-md",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(gb,{className:"h-4 w-4 mr-2 text-blue-500"}),n.jsx("a",{href:xe,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate max-w-md",children:xe})]}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(xe),children:n.jsx(Bt,{className:"h-4 w-4"})})]},le)),(!((ge=l.customFields)!=null&&ge.videos)||l.customFields.videos.length===0)&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No videos added yet"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),n.jsx(tr,{value:((De=l.customFields)==null?void 0:De.notes)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,notes:xe.target.value}})),placeholder:"Add any additional notes about this vehicle...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Home"]})})]})]})})]}),m&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Scan VIN Barcode"}),n.jsx(Fe,{children:"Position the barcode in front of your camera"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md",children:n.jsx(Tl,{className:"h-12 w-12 text-white/50"})}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),n.jsx(J,{onClick:()=>{S("1FDXE4FS8KDC"+Math.floor(Math.random()*1e5).toString().padStart(5,"0"))},children:"Simulate Scan"})]})]})]})})]})}function jae({vehicle:e,onClose:t,onEdit:r}){var i,o,l,c,d,f,u,h,m,v,g,p,x,b,y,j,E,C,S,N,_,I,T;const s=A=>{switch(A){case Yt.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case Yt.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Yt.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case Yt.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case Yt.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=A=>A.replace("_"," ").toUpperCase();return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:[e.year," ",e.make," ",e.model]}),n.jsxs(Fe,{children:["VIN: ",e.vin]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>{t(),r(e)},size:"sm",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Re,{className:He("ri-badge-status",s(e.status)),children:e.status.toUpperCase()}),n.jsx(Re,{variant:"outline",children:a(e.type)}),n.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:_e(e.price)})]}),n.jsxs(xr,{defaultValue:"details",className:"space-y-4",children:[n.jsxs(hr,{children:[n.jsx(Qe,{value:"details",children:"Details"}),n.jsx(Qe,{value:"images",children:"Images"}),n.jsx(Qe,{value:"features",children:"Features"}),n.jsx(Qe,{value:"videos",children:"Videos"}),n.jsx(Qe,{value:"notes",children:"Notes"})]}),n.jsxs(et,{value:"details",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Make"}),n.jsx("p",{className:"font-medium",children:e.make})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),n.jsx("p",{className:"font-medium",children:e.model})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Year"}),n.jsx("p",{className:"font-medium",children:e.year})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"VIN"}),n.jsx("p",{className:"font-medium font-mono",children:e.vin})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),n.jsx("p",{className:"font-medium",children:a(e.type)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),n.jsx("p",{className:"font-medium",children:e.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),n.jsx("p",{className:"font-medium text-primary",children:_e(e.price)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Cost"}),n.jsx("p",{className:"font-medium",children:_e(e.cost)})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Specifications"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[((i=e.customFields)==null?void 0:i.exteriorColor)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Color"}),n.jsx("p",{className:"font-medium",children:e.customFields.exteriorColor})]}),((o=e.customFields)==null?void 0:o.interiorColor)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Interior Color"}),n.jsx("p",{className:"font-medium",children:e.customFields.interiorColor})]}),((l=e.customFields)==null?void 0:l.length)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Length"}),n.jsxs("p",{className:"font-medium",children:[e.customFields.length," ft"]})]}),((c=e.customFields)==null?void 0:c.weight)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Weight"}),n.jsxs("p",{className:"font-medium",children:[e.customFields.weight," lbs"]})]}),((d=e.customFields)==null?void 0:d.sleeps)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sleeps"}),n.jsx("p",{className:"font-medium",children:e.customFields.sleeps})]}),((f=e.customFields)==null?void 0:f.slideouts)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Slideouts"}),n.jsx("p",{className:"font-medium",children:e.customFields.slideouts})]}),((u=e.customFields)==null?void 0:u.fuelType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Fuel Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.fuelType})]}),((h=e.customFields)==null?void 0:h.mileage)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Mileage"}),n.jsx("p",{className:"font-medium",children:e.customFields.mileage})]}),((m=e.customFields)==null?void 0:m.condition)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),n.jsx("p",{className:"font-medium",children:e.customFields.condition})]}),(e.type===vt.SINGLE_WIDE||e.type===vt.DOUBLE_WIDE||e.type===vt.TRIPLE_WIDE||e.type===vt.PARK_MODEL||e.type===vt.MODULAR_HOME)&&n.jsxs(n.Fragment,{children:[((v=e.customFields)==null?void 0:v.squareFootage)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),n.jsxs("p",{className:"font-medium",children:[e.customFields.squareFootage," sq ft"]})]}),((g=e.customFields)==null?void 0:g.bedrooms)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),n.jsx("p",{className:"font-medium",children:e.customFields.bedrooms})]}),((p=e.customFields)==null?void 0:p.bathrooms)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),n.jsx("p",{className:"font-medium",children:e.customFields.bathrooms})]}),((x=e.customFields)==null?void 0:x.constructionType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.constructionType})]}),((b=e.customFields)==null?void 0:b.exteriorSiding)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),n.jsx("p",{className:"font-medium",children:e.customFields.exteriorSiding})]}),((y=e.customFields)==null?void 0:y.roofType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.roofType})]})]}),(e.type===vt.SINGLE_WIDE||e.type===vt.DOUBLE_WIDE||e.type===vt.TRIPLE_WIDE||e.type===vt.PARK_MODEL||e.type===vt.MODULAR_HOME)&&n.jsxs(n.Fragment,{children:[((j=e.customFields)==null?void 0:j.squareFootage)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),n.jsxs("p",{className:"font-medium",children:[e.customFields.squareFootage," sq ft"]})]}),((E=e.customFields)==null?void 0:E.bedrooms)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),n.jsx("p",{className:"font-medium",children:e.customFields.bedrooms})]}),((C=e.customFields)==null?void 0:C.bathrooms)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),n.jsx("p",{className:"font-medium",children:e.customFields.bathrooms})]}),((S=e.customFields)==null?void 0:S.constructionType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.constructionType})]}),((N=e.customFields)==null?void 0:N.exteriorSiding)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),n.jsx("p",{className:"font-medium",children:e.customFields.exteriorSiding})]}),((_=e.customFields)==null?void 0:_.roofType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.roofType})]})]})]})]})]}),n.jsx(et,{value:"images",children:e.images&&e.images.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.images.map((A,O)=>n.jsx("div",{className:"overflow-hidden rounded-md",children:n.jsx("img",{src:A,alt:`${e.make} ${e.model} ${O+1}`,className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})},O))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Rh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No images available"})]})}),n.jsx(et,{value:"features",children:e.features&&e.features.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.features.map((A,O)=>n.jsxs("div",{className:"flex items-center p-2 bg-muted/30 rounded-md",children:[n.jsx(Ws,{className:"h-4 w-4 mr-2 text-primary"}),n.jsx("span",{children:A})]},O))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ws,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No features listed"})]})}),n.jsx(et,{value:"videos",children:(I=e.customFields)!=null&&I.videos&&e.customFields.videos.length>0?n.jsx("div",{className:"space-y-4",children:e.customFields.videos.map((A,O)=>n.jsx("div",{className:"p-3 bg-muted/30 rounded-md",children:n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(gb,{className:"h-4 w-4 mr-2 text-primary"}),n.jsxs("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["Video ",O+1]})]})},O))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(gb,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No videos available"})]})}),n.jsx(et,{value:"notes",children:(T=e.customFields)!=null&&T.notes?n.jsx("div",{className:"p-4 bg-muted/30 rounded-md whitespace-pre-wrap",children:e.customFields.notes}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No notes available"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Close"}),n.jsxs(J,{onClick:()=>r(e),children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]})]})]})]})})}function wae({onImport:e,onCancel:t}){const{toast:r}=At(),[s,a]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState({}),[d,f]=w.useState(!1),[u,h]=w.useState("upload"),[m,v]=w.useState([]),g=["vin","make","model","year","price","cost"],p=[{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price"},{key:"cost",label:"Cost"},{key:"location",label:"Location"},{key:"features",label:"Features"},{key:"exteriorColor",label:"Exterior Color"},{key:"interiorColor",label:"Interior Color"},{key:"length",label:"Length"},{key:"weight",label:"Weight"},{key:"sleeps",label:"Sleeps"},{key:"slideouts",label:"Slideouts"},{key:"fuelType",label:"Fuel Type"},{key:"mileage",label:"Mileage"},{key:"condition",label:"Condition"}],x=_=>{var T;const I=(T=_.target.files)==null?void 0:T[0];I&&(a(I),Bh.parse(I,{header:!0,skipEmptyLines:!0,complete:A=>{if(o(A.data),A.meta.fields){const O={};A.meta.fields.forEach(D=>{const $=D.toLowerCase().replace(/[^a-z0-9]/g,"");p.forEach(M=>{const R=M.key.toLowerCase();($===R||$===M.label.toLowerCase().replace(/[^a-z0-9]/g,""))&&(O[D]=M.key)})}),c(O)}h("map")},error:A=>{r({title:"Error Parsing CSV",description:A.message,variant:"destructive"})}}))},b=(_,I)=>{c(T=>({...T,[_]:I}))},y=()=>{if(g.filter(I=>Object.values(l).includes(I)).length<g.length){r({title:"Missing Required Fields",description:`Please map all required fields: ${g.join(", ")}`,variant:"destructive"});return}h("preview"),v(i.map((I,T)=>T))},j=_=>{v(_?i.map((I,T)=>T):[])},E=_=>{m.includes(_)?v(m.filter(I=>I!==_)):v([...m,_])},C=async()=>{if(m.length===0){r({title:"No Rows Selected",description:"Please select at least one row to import",variant:"destructive"});return}f(!0);try{const _=m.map(I=>{const T=i[I],A={images:[],features:[],customFields:{}};return Object.entries(l).forEach(([O,D])=>{const $=T[O];D==="features"?A.features=$?$.split(",").map(M=>M.trim()):[]:D==="year"||D==="price"||D==="cost"?A[D]=parseFloat($)||0:D==="type"?A.type=S($):D==="status"?A.status=N($):["exteriorColor","interiorColor","length","weight","sleeps","slideouts","fuelType","mileage","condition"].includes(D)?A.customFields={...A.customFields,[D]:$}:A[D]=$}),A});await e(_),r({title:"Import Successful",description:`Imported ${_.length} vehicles`})}catch{r({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}finally{f(!1)}},S=_=>{const I=_.toLowerCase().replace(/[^a-z0-9]/g,"");return I.includes("motorhome")?vt.MOTORHOME:I.includes("travel")&&I.includes("trailer")?vt.TRAVEL_TRAILER:I.includes("fifth")&&I.includes("wheel")?vt.FIFTH_WHEEL:I.includes("toy")&&I.includes("hauler")?vt.TOY_HAULER:vt.RV},N=_=>{const I=_.toLowerCase().replace(/[^a-z0-9]/g,"");return I.includes("reserved")?Yt.RESERVED:I.includes("sold")?Yt.SOLD:I.includes("service")?Yt.SERVICE:I.includes("delivered")?Yt.DELIVERED:Yt.AVAILABLE};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Import Inventory from CSV"}),n.jsxs(Fe,{children:[u==="upload"&&"Upload a CSV file with your inventory data",u==="map"&&"Map CSV columns to vehicle fields",u==="preview"&&"Preview and select vehicles to import"]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{children:[u==="upload"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[n.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload a CSV file with your inventory data"}),n.jsx(Pe,{type:"file",accept:".csv",onChange:x,className:"max-w-sm mx-auto"})]}),n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-medium mb-2",children:"CSV Format Guidelines"}),n.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[n.jsx("li",{children:"• File should be in CSV format"}),n.jsx("li",{children:"• First row should contain column headers"}),n.jsx("li",{children:"• Required fields: VIN, Make, Model, Year, Price, Cost"}),n.jsx("li",{children:"• Features should be comma-separated within quotes"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{variant:"outline",onClick:t,children:"Cancel"})})]}),u==="map"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[n.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),s==null?void 0:s.name]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," rows found"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-medium",children:"Map CSV Columns to Vehicle Fields"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Required fields are marked with *"}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto p-2",children:s&&i.length>0&&Object.keys(i[0]).map(_=>n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-1/3 font-medium truncate",children:_}),n.jsx("div",{className:"w-2/3",children:n.jsxs("select",{value:l[_]||"",onChange:I=>b(_,I.target.value),className:"w-full p-2 border rounded-md",children:[n.jsx("option",{value:"",children:"-- Skip this field --"}),p.map(I=>n.jsxs("option",{value:I.key,children:[I.label," ",g.includes(I.key)?"*":""]},I.key))]})})]},_))})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Cancel"}),n.jsx(J,{onClick:y,children:"Preview Data"})]})]}),u==="preview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{checked:m.length===i.length,onCheckedChange:j}),n.jsxs(ae,{children:["Select All (",i.length," vehicles)"]})]}),n.jsxs(Re,{children:[m.length," selected"]})]}),n.jsx("div",{className:"border rounded-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left"}),Object.entries(l).filter(([_,I])=>I).map(([_,I])=>n.jsxs("th",{className:"p-2 text-left text-sm",children:[I,g.includes(I)&&n.jsx("span",{className:"text-red-500",children:"*"})]},_))]})}),n.jsx("tbody",{children:i.map((_,I)=>n.jsxs("tr",{className:"border-t hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:n.jsx(Vt,{checked:m.includes(I),onCheckedChange:()=>E(I)})}),Object.entries(l).filter(([T,A])=>A).map(([T,A])=>n.jsx("td",{className:"p-2 text-sm",children:_[T]||n.jsx("span",{className:"text-muted-foreground italic",children:"Empty"})},T))]},I))})]})})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(J,{variant:"outline",onClick:()=>h("map"),children:"Back to Mapping"}),n.jsx(J,{onClick:C,disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(hE,{className:"h-4 w-4 mr-2"}),"Import ",m.length," Vehicles"]})})]})]})]})]})})}function Nae({onScan:e,onClose:t}){const{toast:r}=At(),[s,a]=w.useState(!1),[i,o]=w.useState(null);w.useEffect(()=>{const d=setTimeout(()=>{a(!0)},1e3);return()=>clearTimeout(d)},[]);const l=()=>{const d="ABCDEFGHJKLMNPRSTUVWXYZ0123456789";let f="";for(let u=0;u<17;u++)f+=d.charAt(Math.floor(Math.random()*d.length));o(f),r({title:"Barcode Scanned",description:`VIN: ${f}`})},c=()=>{i&&e(i)};return n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Scan VIN Barcode"}),n.jsx(Fe,{children:"Position the barcode in front of your camera"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-4",children:[n.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md relative",children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-3/4 h-1 bg-red-500 animate-pulse"})}),n.jsx("div",{className:"text-white text-sm absolute bottom-2 left-2",children:i?`Scanned: ${i}`:"Scanning..."})]}):n.jsx(Tl,{className:"h-12 w-12 text-white/50"})}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Cancel"}),i?n.jsxs(J,{onClick:c,children:[n.jsx(dj,{className:"h-4 w-4 mr-2"}),"Confirm"]}):n.jsx(J,{onClick:l,children:"Simulate Scan"})]})]})]})})}function TI(){const{vehicles:e,createVehicle:t,updateVehicleStatus:r,deleteVehicle:s}=wd(),{toast:a}=At(),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[d,f]=w.useState(!1),[u,h]=w.useState(!1),[m,v]=w.useState(null),g=()=>{v(null),o(!0)},p=S=>{v(S),o(!0)},x=S=>{v(S),c(!0)},b=async S=>{if(window.confirm("Are you sure you want to delete this vehicle?"))try{await s(S),a({title:"Vehicle Deleted",description:"The vehicle has been removed from inventory"})}catch{a({title:"Error",description:"Failed to delete vehicle",variant:"destructive"})}},y=async(S,N)=>{try{await r(S,N),a({title:"Status Updated",description:`Vehicle status changed to ${N}`})}catch{a({title:"Error",description:"Failed to update vehicle status",variant:"destructive"})}},j=async S=>{try{m?(await r(m.id,S.status||m.status),a({title:"Vehicle Updated",description:"Vehicle information has been updated"})):(await t(S),a({title:"Vehicle Added",description:"New vehicle has been added to inventory"})),o(!1),v(null)}catch{a({title:"Error",description:`Failed to ${m?"update":"create"} vehicle`,variant:"destructive"})}},E=async S=>{try{for(const N of S)await t(N);f(!1),a({title:"Import Successful",description:`Imported ${S.length} vehicles`})}catch{a({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}},C=S=>{const N=e.find(_=>_.vin===S);N?(v(N),c(!0),a({title:"Vehicle Found",description:`Found existing vehicle with VIN: ${S}`})):(v(null),o(!0),setTimeout(()=>{const _=document.getElementById("vin");if(_){_.value=S;const I=new Event("input",{bubbles:!0});_.dispatchEvent(I)}},100),a({title:"New VIN Scanned",description:`Creating new vehicle with VIN: ${S}`})),h(!1)};return n.jsxs("div",{className:"space-y-8",children:[i&&n.jsx(bae,{vehicle:m||void 0,onSave:j,onCancel:()=>{o(!1),v(null)}}),l&&m&&n.jsx(jae,{vehicle:m,onClose:()=>c(!1),onEdit:p}),d&&n.jsx(wae,{onImport:E,onCancel:()=>f(!1)}),u&&n.jsx(Nae,{onScan:C,onClose:()=>h(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Inventory Management"}),n.jsx("p",{className:"ri-page-description",children:"Manage your RV and motorhome inventory"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(J,{variant:"outline",onClick:()=>h(!0),children:[n.jsx(bM,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),n.jsxs(J,{variant:"outline",onClick:()=>f(!0),children:[n.jsx(hE,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),n.jsxs(J,{onClick:g,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Home"]})]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Units"}),n.jsx(Ws,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"+5 units this month"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Available"}),n.jsx(Ws,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(S=>S.status===Yt.AVAILABLE).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Ready for sale"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Reserved"}),n.jsx(Ws,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(S=>S.status===Yt.RESERVED).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Pending sale"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Total Value"}),n.jsx(It,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_e(e.reduce((S,N)=>S+N.price,0))}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Inventory value"]})]})]})]}),n.jsx(jse,{vehicles:e,onEdit:p,onDelete:b,onView:x,onStatusChange:y})]})}function Sae(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(TI,{})}),n.jsx($t,{path:"/*",element:n.jsx(TI,{})})]})}const Cae=[{id:"1",customerId:"cust-1",vehicleId:"veh-1",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:ui.SENT,validUntil:new Date("2024-02-15"),notes:"Customer interested in financing options",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-16")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",items:[{id:"3",description:"2023 Winnebago View",quantity:1,unitPrice:89e3,total:89e3}],subtotal:89e3,tax:7120,total:96120,status:ui.ACCEPTED,validUntil:new Date("2024-02-20"),notes:"Ready to proceed with purchase",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}];function Aae({quote:e,onClose:t,onEdit:r}){const s=a=>{switch(a){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Quote #",e.id]}),n.jsx(Fe,{children:"Quote details and line items"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>r(e),size:"sm",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx("div",{className:"mt-1",children:n.jsx(Re,{className:He("ri-badge-status",s(e.status)),children:e.status.toUpperCase()})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:ct(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),n.jsx("p",{className:"font-medium",children:ct(e.validUntil)})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),n.jsx("div",{className:"space-y-3",children:e.items.map((a,i)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:a.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",a.quantity," × ",_e(a.unitPrice)]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg",children:_e(a.total)})})]},a.id))})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:_e(e.subtotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:_e(e.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:_e(e.total)})]})]})}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:e.notes})})]})]})]})})}function _I(){const{toast:e}=At(),[t,r]=w.useState(Cae),[s,a]=w.useState(""),[i,o]=w.useState("all"),[l,c]=w.useState(!1),[d,f]=w.useState(null),[u,h]=w.useState(null),[m,v]=w.useState(""),g=I=>{switch(I){case ui.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case ui.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case ui.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ui.ACCEPTED:return"bg-green-50 text-green-700 border-green-200";case ui.REJECTED:return"bg-red-50 text-red-700 border-red-200";case ui.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},p=t.filter(I=>{const T=I.id.toLowerCase().includes(s.toLowerCase())||I.customerId.toLowerCase().includes(s.toLowerCase()),A=i==="all"||I.status===i;return T&&A}),x=()=>{f(null),v(""),c(!0)},b=I=>{f(I),v(I.customerId),c(!0)},y=I=>{h(I)},j=()=>h(null),E=async I=>{try{if(d)r(T=>T.map(A=>A.id===d.id?{...A,...I,updatedAt:new Date}:A)),e({title:"Success",description:"Quote updated successfully"});else{const T={id:Math.random().toString(36).substr(2,9),...I,status:ui.DRAFT,createdAt:new Date,updatedAt:new Date};r(A=>[...A,T]),e({title:"Success",description:"Quote created successfully"})}c(!1),f(null)}catch{e({title:"Error",description:"Failed to save quote",variant:"destructive"})}},C=async I=>{try{r(T=>T.map(A=>A.id===I?{...A,status:ui.SENT,updatedAt:new Date}:A)),e({title:"Success",description:"Quote sent to customer"})}catch{e({title:"Error",description:"Failed to send quote",variant:"destructive"})}},S=async I=>{try{const T=t.find(A=>A.id===I);if(T){const A={...T,id:Math.random().toString(36).substr(2,9),status:ui.DRAFT,createdAt:new Date,updatedAt:new Date};r(O=>[...O,A]),e({title:"Success",description:"Quote duplicated successfully"})}}catch{e({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},N=async I=>{if(window.confirm("Are you sure you want to delete this quote?"))try{r(T=>T.filter(A=>A.id!==I)),e({title:"Success",description:"Quote deleted successfully"})}catch{e({title:"Error",description:"Failed to delete quote",variant:"destructive"})}},_={total:t.length,draft:t.filter(I=>I.status==="draft").length,sent:t.filter(I=>I.status==="sent").length,accepted:t.filter(I=>I.status==="accepted").length,totalValue:t.reduce((I,T)=>I+T.total,0),acceptedValue:t.filter(I=>I.status==="accepted").reduce((I,T)=>I+T.total,0)};return n.jsxs("div",{className:"space-y-8",children:[l&&n.jsx(R8,{quote:d,customerId:m,onSave:E,onCancel:()=>{c(!1),f(null)}}),u&&n.jsx(Aae,{quote:u,onClose:j,onEdit:b}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),n.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),n.jsxs(J,{className:"shadow-sm",onClick:x,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Quotes"}),n.jsx(cs,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:_.total}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"All quotes"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(cs,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:_.sent}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Accepted"}),n.jsx(cs,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:_.accepted}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),_.total>0?Math.round(_.accepted/_.total*100):0,"% acceptance rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Quote Value"}),n.jsx(It,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_e(_.totalValue)}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(It,{className:"h-3 w-3 mr-1"}),_e(_.acceptedValue)," accepted"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search quotes...",value:s,onChange:I=>a(I.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(Ve,{value:i,onValueChange:o,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:"draft",children:"Draft"}),n.jsx(K,{value:"sent",children:"Sent"}),n.jsx(K,{value:"viewed",children:"Viewed"}),n.jsx(K,{value:"accepted",children:"Accepted"}),n.jsx(K,{value:"rejected",children:"Rejected"}),n.jsx(K,{value:"expired",children:"Expired"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Quotes (",p.length,")"]}),n.jsx(Fe,{children:"Manage customer quotes with advanced pricing and bundling"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[p.map(I=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",I.id]}),n.jsx(Re,{className:He("ri-badge-status",g(I.status)),children:I.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",I.customerId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"}),n.jsx("span",{className:"font-bold text-primary ml-1",children:_e(I.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Created:"})," ",ct(I.createdAt)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",ct(I.validUntil)]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.items.length," item(s)"]}),I.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",I.notes]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>y(I),children:[n.jsx(Wl,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>b(I),children:[n.jsx(zr,{className:"h-3 w-3 mr-1"}),"Edit"]}),I.status==="draft"&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>C(I.id),children:[n.jsx(Wo,{className:"h-3 w-3 mr-1"}),"Send"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>S(I.id),children:[n.jsx(uE,{className:"h-3 w-3 mr-1"}),"Copy"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>N(I.id),children:n.jsx(Cn,{className:"h-3 w-3"})})]})]},I.id)),p.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No quotes found"}),n.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})]})})]})]})}function Eae(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(_I,{})}),n.jsx($t,{path:"/*",element:n.jsx(_I,{})})]})}function Pae({schedule:e}){const[t,r]=w.useState(""),[s,a]=w.useState(1),[i,o]=w.useState("month"),[l,c]=w.useState("asc"),d=12,u=[...e.filter(x=>x.month.toString().includes(t))].sort((x,b)=>{const y=x[i],j=b[i];return l==="asc"?y>j?1:-1:y<j?1:-1}),h=Math.ceil(u.length/d),m=(s-1)*d,v=u.slice(m,m+d),g=x=>{i===x?c(l==="asc"?"desc":"asc"):(o(x),c("asc"))},p=x=>{a(x)};return e.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No amortization schedule available. Please calculate a loan first."}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"relative w-64",children:[n.jsx(ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{placeholder:"Search by month...",value:t,onChange:x=>{r(x.target.value),a(1)},className:"pl-10"})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",m+1,"-",Math.min(m+d,u.length)," of ",u.length," payments"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("month"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Month"}),i==="month"&&(l==="asc"?n.jsx(Oo,{className:"ml-1 h-3 w-3"}):n.jsx(Do,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("payment"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Payment"}),i==="payment"&&(l==="asc"?n.jsx(Oo,{className:"ml-1 h-3 w-3"}):n.jsx(Do,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("principal"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Principal"}),i==="principal"&&(l==="asc"?n.jsx(Oo,{className:"ml-1 h-3 w-3"}):n.jsx(Do,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("interest"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Interest"}),i==="interest"&&(l==="asc"?n.jsx(Oo,{className:"ml-1 h-3 w-3"}):n.jsx(Do,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Additional"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("balance"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Balance"}),i==="balance"&&(l==="asc"?n.jsx(Oo,{className:"ml-1 h-3 w-3"}):n.jsx(Do,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("totalInterestPaid"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Total Interest"}),i==="totalInterestPaid"&&(l==="asc"?n.jsx(Oo,{className:"ml-1 h-3 w-3"}):n.jsx(Do,{className:"ml-1 h-3 w-3"}))]})})]})}),n.jsx("tbody",{children:v.map((x,b)=>n.jsxs("tr",{className:b%2===0?"bg-muted/20":"",children:[n.jsx("td",{className:"p-3",children:x.month}),n.jsx("td",{className:"p-3",children:_e(x.payment)}),n.jsx("td",{className:"p-3",children:_e(x.principal)}),n.jsx("td",{className:"p-3",children:_e(x.interest)}),n.jsx("td",{className:"p-3",children:_e(x.additionalCosts)}),n.jsx("td",{className:"p-3",children:_e(x.balance)}),n.jsx("td",{className:"p-3",children:_e(x.totalInterestPaid)})]},x.month))})]})}),h>1&&n.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[n.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:s===1,children:"First"}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(s-1),disabled:s===1,children:"Previous"}),n.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,h)},(x,b)=>{let y;return h<=5||s<=3?y=b+1:s>=h-2?y=h-4+b:y=s-2+b,n.jsx(J,{variant:s===y?"default":"outline",size:"sm",onClick:()=>p(y),children:y},y)})}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(s+1),disabled:s===h,children:"Next"}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(h),disabled:s===h,children:"Last"})]})]})}function Tae({initialValues:e,onSave:t,onClose:r}){const{toast:s}=At(),[a,i]=w.useState((e==null?void 0:e.loanAmount)||1e5),[o,l]=w.useState((e==null?void 0:e.downPayment)||2e4),[c,d]=w.useState((e==null?void 0:e.interestRate)||6.99),[f,u]=w.useState((e==null?void 0:e.loanTerm)||60),[h,m]=w.useState("monthly"),[v,g]=w.useState(!1),[p,x]=w.useState(0),[b,y]=w.useState(!1),[j,E]=w.useState(0),[C,S]=w.useState("calculator"),[N,_]=w.useState(0),[I,T]=w.useState(0),[A,O]=w.useState(0),[D,$]=w.useState([]);w.useEffect(()=>{M()},[a,o,c,f,h,v,p,b,j]);const M=()=>{const q=a-o;if(q<=0){_(0),T(0),O(0),$([]);return}const L=c/100/12,V=q*L/(1-Math.pow(1+L,-f));let G=0;v&&(G+=p),b&&(G+=V*(j/100));let Z=1;switch(h){case"biweekly":Z=12/26;break;case"weekly":Z=12/52;break;default:Z=1;break}const te=V*Z+G*Z,he=f,me=V*he-q,oe=q+me+G*he,we=R(q,L,f,V,G);_(te),T(me),O(oe),$(we)},R=(q,L,V,G,Z)=>{let te=q,he=0;const me=[];for(let oe=1;oe<=V;oe++){const we=te*L;let ve=G-we;if(te<ve&&(ve=te),te-=ve,he+=we,me.push({month:oe,payment:G+Z,principal:ve,interest:we,additionalCosts:Z,balance:te,totalInterestPaid:he}),te<=0)break}return me},B=()=>{t&&t({loanAmount:a,downPayment:o,interestRate:c,loanTerm:f,paymentFrequency:h,includeInsurance:v,insuranceAmount:p,includeTax:b,taxRate:j,monthlyPayment:N,totalInterest:I,totalCost:A,amortizationSchedule:D}),s({title:"Loan Calculation Saved",description:"Your loan calculation has been saved successfully."})},U=()=>{window.print()},W=()=>{const L=[["Month","Payment","Principal","Interest","Additional Costs","Balance","Total Interest Paid"].join(","),...D.map(te=>[te.month,te.payment.toFixed(2),te.principal.toFixed(2),te.interest.toFixed(2),te.additionalCosts.toFixed(2),te.balance.toFixed(2),te.totalInterestPaid.toFixed(2)].join(","))].join(`
`),V=new Blob([L],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(V),Z=document.createElement("a");Z.href=G,Z.setAttribute("download","amortization_schedule.csv"),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),s({title:"Export Successful",description:"Amortization schedule exported to CSV."})};return n.jsx("div",{className:"space-y-6",children:n.jsxs(xr,{value:C,onValueChange:S,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-2",children:[n.jsx(Qe,{value:"calculator",children:"Calculator"}),n.jsx(Qe,{value:"amortization",children:"Amortization Schedule"})]}),n.jsxs(et,{value:"calculator",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(ql,{className:"h-5 w-5 mr-2 text-primary"}),"Loan Details"]}),n.jsx(Fe,{children:"Enter the details of your loan"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"loanAmount",children:"Vehicle Price"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"loanAmount",type:"number",value:a,onChange:q=>i(parseFloat(q.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"downPayment",children:"Down Payment"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"downPayment",type:"number",value:o,onChange:q=>l(parseFloat(q.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"interestRate",children:"Interest Rate (%)"}),n.jsx(Pe,{id:"interestRate",type:"number",step:"0.01",value:c,onChange:q=>d(parseFloat(q.target.value)||0)})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"loanTerm",children:"Loan Term (months)"}),n.jsxs(Ve,{value:f.toString(),onValueChange:q=>u(parseInt(q)),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"12",children:"12 months (1 year)"}),n.jsx(K,{value:"24",children:"24 months (2 years)"}),n.jsx(K,{value:"36",children:"36 months (3 years)"}),n.jsx(K,{value:"48",children:"48 months (4 years)"}),n.jsx(K,{value:"60",children:"60 months (5 years)"}),n.jsx(K,{value:"72",children:"72 months (6 years)"}),n.jsx(K,{value:"84",children:"84 months (7 years)"}),n.jsx(K,{value:"96",children:"96 months (8 years)"}),n.jsx(K,{value:"120",children:"120 months (10 years)"}),n.jsx(K,{value:"180",children:"180 months (15 years)"}),n.jsx(K,{value:"240",children:"240 months (20 years)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),n.jsxs(Ve,{value:h,onValueChange:m,children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"monthly",children:"Monthly"}),n.jsx(K,{value:"biweekly",children:"Bi-weekly"}),n.jsx(K,{value:"weekly",children:"Weekly"})]})]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(It,{className:"h-5 w-5 mr-2 text-primary"}),"Additional Costs"]}),n.jsx(Fe,{children:"Include additional costs in your calculation"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"includeInsurance",checked:v,onCheckedChange:q=>g(!!q)}),n.jsx(ae,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),v&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"insuranceAmount",type:"number",value:p,onChange:q=>x(parseFloat(q.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"includeTax",checked:b,onCheckedChange:q=>y(!!q)}),n.jsx(ae,{htmlFor:"includeTax",children:"Include Tax"})]}),b&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Pe,{id:"taxRate",type:"number",step:"0.01",value:j,onChange:q=>E(parseFloat(q.target.value)||0)})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Loan Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Principal Amount:"}),n.jsx("span",{className:"font-medium",children:_e(a-o)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:[h==="monthly"?"Monthly":h==="biweekly"?"Bi-weekly":"Weekly"," Payment:"]}),n.jsx("span",{className:"font-bold text-primary",children:_e(N)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total Interest:"}),n.jsx("span",{className:"font-medium",children:_e(I)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total Cost:"}),n.jsx("span",{className:"font-medium",children:_e(A)})]})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[r&&n.jsx(J,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(J,{variant:"outline",onClick:()=>S("amortization"),children:[n.jsx(Lr,{className:"h-4 w-4 mr-2"}),"View Amortization"]}),t&&n.jsx(J,{onClick:B,children:"Save Calculation"})]})]}),n.jsxs(et,{value:"amortization",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Lr,{className:"h-5 w-5 mr-2 text-primary"}),"Amortization Schedule"]}),n.jsx(Fe,{children:"Detailed payment schedule over the life of the loan"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:W,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:U,children:[n.jsx(qu,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),n.jsx(fe,{children:n.jsx(Pae,{schedule:D})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsxs(J,{variant:"outline",onClick:()=>S("calculator"),children:[n.jsx(ql,{className:"h-4 w-4 mr-2"}),"Back to Calculator"]}),t&&n.jsx(J,{onClick:B,children:"Save Calculation"})]})]})]})})}function _ae({onSave:e,onCancel:t,onAddNewCustomer:r,preselectedCustomerId:s}){const{toast:a}=At(),{leads:i}=mo(),{vehicles:o,getAvailableVehicles:l}=wd(),[c,d]=w.useState(!1),[f,u]=w.useState(!1),[h,m]=w.useState(null),[v,g]=w.useState({customerId:s||"",customerName:"",vehicleId:"",vehicleInfo:"",amount:0,downPayment:0,term:60,rate:6.99,paymentAmount:0,startDate:new Date().toISOString().split("T")[0],status:"active",notes:"",loanType:"standard",paymentFrequency:"monthly",includeInsurance:!1,insuranceAmount:0,includeTax:!1,taxRate:0});w.useEffect(()=>{s&&g(j=>({...j,customerId:s}))},[s]),w.useEffect(()=>{if(v.customerId){const j=i.find(E=>E.id===v.customerId);j&&g(E=>({...E,customerName:`${j.firstName} ${j.lastName}`}))}},[v.customerId,i]);const p=j=>{j==="add-new"?r==null||r():g(E=>({...E,customerId:j}))},x=j=>{const E=o.find(C=>C.id===j);E&&g(C=>({...C,vehicleId:j,vehicleInfo:`${E.year} ${E.make} ${E.model}`,amount:E.price}))},b=j=>{m(j),g(E=>({...E,amount:j.loanAmount,downPayment:j.downPayment,term:j.loanTerm,rate:j.interestRate,paymentAmount:j.monthlyPayment,paymentFrequency:j.paymentFrequency,includeInsurance:j.includeInsurance,insuranceAmount:j.insuranceAmount,includeTax:j.includeTax,taxRate:j.taxRate}))},y=async j=>{if(j.preventDefault(),!v.customerId||!v.vehicleId){a({title:"Validation Error",description:"Customer and vehicle are required.",variant:"destructive"});return}d(!0);try{await e(v)}catch{a({title:"Error",description:"Failed to create loan",variant:"destructive"})}finally{d(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:f?n.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:n.jsx(Tae,{initialValues:{loanAmount:v.amount,downPayment:v.downPayment,interestRate:v.rate,loanTerm:v.term},onSave:b,onClose:()=>u(!1)})}):n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Create New Loan"}),n.jsx(Fe,{children:"Set up a new loan for a customer"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:y,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Customer & Vehicle"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(Ve,{value:v.customerId,onValueChange:p,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsxs(Ue,{children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>p("add-new"),children:[n.jsx(Bt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),i.map(j=>n.jsxs(K,{value:j.id,children:[j.firstName," ",j.lastName]},j.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle *"}),n.jsxs(Ve,{value:v.vehicleId,onValueChange:x,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select vehicle"})}),n.jsx(Ue,{children:o.map(j=>n.jsxs(K,{value:j.id,children:[j.year," ",j.make," ",j.model]},j.id))})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Loan Details"}),n.jsxs(J,{type:"button",variant:"outline",onClick:()=>u(!0),children:[n.jsx(ql,{className:"h-4 w-4 mr-2"}),"Loan Calculator"]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"amount",children:"Loan Amount *"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"amount",type:"number",value:v.amount,onChange:j=>g(E=>({...E,amount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"downPayment",children:"Down Payment"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"downPayment",type:"number",value:v.downPayment,onChange:j=>g(E=>({...E,downPayment:parseFloat(j.target.value)||0})),className:"pl-10"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"term",children:"Term (months) *"}),n.jsxs(Ve,{value:v.term.toString(),onValueChange:j=>g(E=>({...E,term:parseInt(j)})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"12",children:"12 months (1 year)"}),n.jsx(K,{value:"24",children:"24 months (2 years)"}),n.jsx(K,{value:"36",children:"36 months (3 years)"}),n.jsx(K,{value:"48",children:"48 months (4 years)"}),n.jsx(K,{value:"60",children:"60 months (5 years)"}),n.jsx(K,{value:"72",children:"72 months (6 years)"}),n.jsx(K,{value:"84",children:"84 months (7 years)"}),n.jsx(K,{value:"96",children:"96 months (8 years)"}),n.jsx(K,{value:"120",children:"120 months (10 years)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"rate",children:"Interest Rate (%) *"}),n.jsx(Pe,{id:"rate",type:"number",step:"0.01",value:v.rate,onChange:j=>g(E=>({...E,rate:parseFloat(j.target.value)||0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"paymentAmount",children:"Monthly Payment *"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"paymentAmount",type:"number",step:"0.01",value:v.paymentAmount,onChange:j=>g(E=>({...E,paymentAmount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"startDate",children:"Start Date *"}),n.jsx(Pe,{id:"startDate",type:"date",value:v.startDate,onChange:j=>g(E=>({...E,startDate:j.target.value}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"loanType",children:"Loan Type"}),n.jsxs(Ve,{value:v.loanType,onValueChange:j=>g(E=>({...E,loanType:j})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"standard",children:"Standard"}),n.jsx(K,{value:"bhph",children:"Buy Here Pay Here"}),n.jsx(K,{value:"balloon",children:"Balloon"}),n.jsx(K,{value:"lease",children:"Lease"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Additional Options"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"includeInsurance",checked:v.includeInsurance,onCheckedChange:j=>g(E=>({...E,includeInsurance:!!j}))}),n.jsx(ae,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),v.includeInsurance&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"insuranceAmount",type:"number",step:"0.01",value:v.insuranceAmount,onChange:j=>g(E=>({...E,insuranceAmount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"includeTax",checked:v.includeTax,onCheckedChange:j=>g(E=>({...E,includeTax:!!j}))}),n.jsx(ae,{htmlFor:"includeTax",children:"Include Tax"})]}),v.includeTax&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Pe,{id:"taxRate",type:"number",step:"0.01",value:v.taxRate,onChange:j=>g(E=>({...E,taxRate:parseFloat(j.target.value)||0}))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),n.jsx(tr,{value:v.notes,onChange:j=>g(E=>({...E,notes:j.target.value})),placeholder:"Add any additional notes about this loan...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:t,disabled:c,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Loan..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Create Loan"]})})]})]})})]})})}const Iae=[{id:"1",customerId:"cust-1",customerName:"John Smith",vehicleId:"veh-1",vehicleInfo:"2024 Forest River Georgetown",amount:125e3,downPayment:2e4,term:60,rate:6.99,paymentAmount:2100.42,startDate:new Date("2024-01-15"),status:"active",remainingBalance:105e3,nextPaymentDate:new Date("2024-02-15"),createdAt:new Date("2024-01-15")},{id:"2",customerId:"cust-2",customerName:"Sarah Johnson",vehicleId:"veh-2",vehicleInfo:"2023 Winnebago View",amount:89e3,downPayment:15e3,term:72,rate:7.49,paymentAmount:1250.33,startDate:new Date("2024-01-10"),status:"active",remainingBalance:74e3,nextPaymentDate:new Date("2024-02-10"),createdAt:new Date("2024-01-10")}];function II(){const[e,t]=w.useState(Iae),[r,s]=w.useState(!1),[a,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(!1);w.useState("dashboard"),w.useState("");const{toast:f}=At(),u=()=>{l(null),i(!0)},h=v=>{f({title:"Customer Added",description:`${v.firstName} ${v.lastName} has been added.`}),l(v.id),d(!1),i(!0)},m=async v=>{const g={id:Math.random().toString(36).substr(2,9),customerId:v.customerId,customerName:v.customerName,vehicleId:v.vehicleId,vehicleInfo:v.vehicleInfo,amount:v.amount,downPayment:v.downPayment,term:v.term,rate:v.rate,paymentAmount:v.paymentAmount,startDate:new Date(v.startDate),status:v.status,remainingBalance:v.amount-v.downPayment,nextPaymentDate:new Date(new Date(v.startDate).setMonth(new Date(v.startDate).getMonth()+1)),createdAt:new Date};t([...e,g]),i(!1),f({title:"Success",description:"Loan created successfully"})};return n.jsxs("div",{className:"space-y-8",children:[c&&n.jsx(Xu,{onClose:()=>d(!1),onSuccess:h}),a&&n.jsx(_ae,{preselectedCustomerId:o,onSave:m,onCancel:()=>i(!1),onAddNewCustomer:()=>{i(!1),d(!0)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Finance & Loans"}),n.jsx("p",{className:"ri-page-description",children:"Manage loans, payments, and financial calculations"})]}),n.jsxs(J,{className:"shadow-sm",onClick:u,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Loan"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Active Loans"}),n.jsx(It,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Current loans"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Total Financed"}),n.jsx(It,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:_e(e.reduce((v,g)=>v+g.amount,0))}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Loan volume"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Avg Rate"}),n.jsx(ql,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[(e.reduce((v,g)=>v+g.rate,0)/e.length).toFixed(2),"%"]}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Average interest rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Monthly Payments"}),n.jsx(xi,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:_e(e.reduce((v,g)=>v+g.paymentAmount,0))}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Lr,{className:"h-3 w-3 mr-1"}),"Total monthly"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Loans"}),n.jsx(Fe,{children:"Manage customer loans and financing"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[e.map(v=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:v.customerName}),n.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200",children:v.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle:"}),n.jsx("span",{className:"ml-1",children:v.vehicleInfo})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Amount:"}),n.jsx("span",{className:"ml-1 font-bold text-primary",children:_e(v.amount)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Term:"}),n.jsxs("span",{className:"ml-1",children:[v.term," months @ ",v.rate,"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Payment:"}),n.jsxs("span",{className:"ml-1",children:[_e(v.paymentAmount),"/month"]})]})]}),n.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Next Payment:"})," ",v.nextPaymentDate.toLocaleDateString(),n.jsx("span",{className:"ml-4 font-medium",children:"Balance:"})," ",_e(v.remainingBalance)]})})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>s(!0),children:[n.jsx(ql,{className:"h-3 w-3 mr-1"}),"Calculator"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(xi,{className:"h-3 w-3 mr-1"}),"Payments"]})]})]},v.id)),e.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(It,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No loans found"}),n.jsx("p",{className:"text-sm",children:"Create your first loan to get started"})]})]})})]})]})}function kae(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(II,{})}),n.jsx($t,{path:"/*",element:n.jsx(II,{})})]})}var yt=(e=>(e.PROSPECTING="prospecting",e.QUALIFICATION="qualification",e.NEEDS_ANALYSIS="needs_analysis",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(yt||{}),Pr=(e=>(e.ACTIVE="active",e.WON="won",e.LOST="lost",e.ON_HOLD="on_hold",e.CANCELLED="cancelled",e))(Pr||{}),Fo=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(Fo||{}),Sc=(e=>(e.GEOGRAPHIC="geographic",e.INDUSTRY="industry",e.ACCOUNT_SIZE="account_size",e.PRODUCT_LINE="product_line",e))(Sc||{});function Dae(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState(!1);w.useEffect(()=>{h()},[]);const h=()=>{const D=pn("renter-insight-deals",[{id:"1",name:"Georgetown Class A Sale - Smith Family",customerId:"cust-001",customerName:"John & Mary Smith",stage:yt.PROPOSAL,status:Pr.ACTIVE,priority:"high",value:145e3,probability:75,expectedCloseDate:new Date("2024-02-15"),assignedTo:"rep-001",territoryId:"territory-001",sourceId:"source-001",competitorIds:["comp-001"],products:[{id:"1",productId:"prod-001",productName:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,discount:5e3,total:12e4},{id:"2",productId:"prod-002",productName:"Extended Warranty Package",quantity:1,unitPrice:3500,discount:0,total:3500}],stageHistory:[],notes:"Customer very interested, financing pre-approved",requiresApproval:!0,approvalStatus:"pending",customFields:{tradeInValue:25e3,financingType:"bank_loan"},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-20")},{id:"2",name:"Travel Trailer - Johnson Family",customerId:"cust-002",customerName:"Sarah Johnson",stage:yt.NEGOTIATION,status:Pr.ACTIVE,priority:"medium",value:75e3,probability:85,expectedCloseDate:new Date("2024-02-10"),assignedTo:"rep-002",territoryId:"territory-002",competitorIds:[],products:[{id:"3",productId:"prod-003",productName:"2024 Airstream Flying Cloud",quantity:1,unitPrice:75e3,discount:2e3,total:73e3}],stageHistory:[],notes:"Ready to close, just finalizing delivery details",requiresApproval:!1,customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-18")}]),$=pn("renter-insight-territories",[{id:"territory-001",name:"North Region",type:"geographic",description:"Northern states territory",assignedTo:["rep-001","rep-003"],rules:[{id:"1",field:"state",operator:"in_range",value:["IL","WI","MN","IA"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"territory-002",name:"South Region",type:"geographic",description:"Southern states territory",assignedTo:["rep-002"],rules:[{id:"2",field:"state",operator:"in_range",value:["TX","FL","GA","NC"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),M=pn("renter-insight-stage-history",[{id:"1",dealId:"1",fromStage:yt.QUALIFICATION,toStage:yt.NEEDS_ANALYSIS,changedBy:"rep-001",changedAt:new Date("2024-01-12"),duration:48,notes:"Customer qualified, moving to needs analysis"},{id:"2",dealId:"1",fromStage:yt.NEEDS_ANALYSIS,toStage:yt.PROPOSAL,changedBy:"rep-001",changedAt:new Date("2024-01-18"),duration:144,notes:"Proposal prepared and presented"}]);t(D),s($),d(M)},m=D=>{Gr("renter-insight-deals",D)},v=D=>{Gr("renter-insight-stage-history",D)},g=async D=>{u(!0);try{const $={id:Math.random().toString(36).substr(2,9),name:D.name||"",customerId:D.customerId||"",customerName:D.customerName||"",stage:yt.PROSPECTING,status:Pr.ACTIVE,priority:D.priority||"medium",value:D.value||0,probability:10,expectedCloseDate:D.expectedCloseDate||new Date,assignedTo:D.assignedTo||"",territoryId:D.territoryId||"",sourceId:D.sourceId,competitorIds:D.competitorIds||[],products:D.products||[],stageHistory:[],notes:D.notes||"",requiresApproval:(D.value||0)>1e5,customFields:D.customFields||{},createdAt:new Date,updatedAt:new Date},M=[...e,$];return t(M),m(M),await x($.id,void 0,yt.PROSPECTING,"system"),$}finally{u(!1)}},p=async(D,$,M)=>{const R=e.find(V=>V.id===D);if(!R)return;const B=R.stage,U=y($),W=$===yt.CLOSED_WON?Pr.WON:$===yt.CLOSED_LOST?Pr.LOST:Pr.ACTIVE,q=$===yt.CLOSED_WON||$===yt.CLOSED_LOST?new Date:void 0,L=e.map(V=>V.id===D?{...V,stage:$,probability:U,status:W,actualCloseDate:q,updatedAt:new Date}:V);return t(L),m(L),await x(D,B,$,"current-user",M||`Stage changed from ${(B==null?void 0:B.replace("_"," "))||"none"} to ${$.replace("_"," ")}`),L.find(V=>V.id===D)},x=async(D,$,M,R,B)=>{const U=$?b(D,$):void 0,W={id:Math.random().toString(36).substr(2,9),dealId:D,fromStage:$,toStage:M,changedBy:R,changedAt:new Date,duration:U,notes:B},q=[...c,W];d(q),v(q)},b=(D,$)=>{const R=c.filter(B=>B.dealId===D).find(B=>B.toStage===$);return R?Math.floor((Date.now()-R.changedAt.getTime())/36e5):0},y=D=>{switch(D){case yt.PROSPECTING:return 10;case yt.QUALIFICATION:return 25;case yt.NEEDS_ANALYSIS:return 40;case yt.PROPOSAL:return 60;case yt.NEGOTIATION:return 80;case yt.CLOSED_WON:return 100;case yt.CLOSED_LOST:return 0;default:return 10}},j=async(D,$)=>{const M=r.find(R=>R.isActive);if(M){const R=e.map(B=>B.id===D?{...B,territoryId:M.id,updatedAt:new Date}:B);t(R),m(R)}},E=async(D,$)=>{const M={id:Math.random().toString(36).substr(2,9),dealId:D,workflowType:$,currentStep:1,totalSteps:2,steps:[{id:"1",stepNumber:1,approverRole:"sales_manager",approverIds:["manager-001"],requiredApprovals:1,currentApprovals:[],status:"pending"},{id:"2",stepNumber:2,approverRole:"sales_director",approverIds:["director-001"],requiredApprovals:1,currentApprovals:[],status:"pending"}],status:"pending",requestedBy:"current-user",requestedAt:new Date};return i(R=>[...R,M]),M},C=async(D,$,M)=>{const R={id:Math.random().toString(36).substr(2,9),dealId:D,outcome:$,primaryReason:M.primaryReason||"",secondaryReasons:M.secondaryReasons||[],competitorWon:M.competitorWon,feedback:M.feedback||"",lessonsLearned:M.lessonsLearned||[],actionItems:M.actionItems||[],reportedBy:"current-user",reportedAt:new Date};return l(B=>[...B,R]),R},S=()=>{const D=e.length,$=e.reduce((V,G)=>V+G.value,0),M=e.filter(V=>V.status===Pr.WON).length,R=e.filter(V=>V.status===Pr.WON).reduce((V,G)=>V+G.value,0),B=e.filter(V=>V.status===Pr.LOST).length,U=e.filter(V=>V.status===Pr.LOST).reduce((V,G)=>V+G.value,0),W=D>0?M/D*100:0,q=D>0?$/D:0,L=N();return{totalDeals:D,totalValue:$,wonDeals:M,wonValue:R,lostDeals:B,lostValue:U,winRate:W,averageDealSize:q,averageSalesCycle:L,conversionRates:_()}},N=()=>{const D=e.filter(M=>M.actualCloseDate);return D.length===0?0:D.reduce((M,R)=>{const B=new Date(R.actualCloseDate),U=new Date(R.createdAt),W=isNaN(B.getTime())?0:B.getTime(),q=isNaN(U.getTime())?0:U.getTime(),L=W&&q?Math.floor((W-q)/(1e3*60*60*24)):0;return M+L},0)/D.length},_=()=>[{fromStage:yt.PROSPECTING,toStage:yt.QUALIFICATION,rate:65,averageDuration:72},{fromStage:yt.QUALIFICATION,toStage:yt.NEEDS_ANALYSIS,rate:75,averageDuration:48},{fromStage:yt.NEEDS_ANALYSIS,toStage:yt.PROPOSAL,rate:80,averageDuration:96},{fromStage:yt.PROPOSAL,toStage:yt.NEGOTIATION,rate:70,averageDuration:120},{fromStage:yt.NEGOTIATION,toStage:yt.CLOSED_WON,rate:85,averageDuration:168}];return{deals:e,territories:r,approvalWorkflows:a,winLossReports:o,stageHistory:c,loading:f,createDeal:g,updateDealStage:p,assignTerritory:j,createApprovalWorkflow:E,createWinLossReport:C,getDealMetrics:S,getDealsByStage:D=>e.filter($=>$.stage===D),getDealsByTerritory:D=>e.filter($=>$.territoryId===D),getDealsByRep:D=>e.filter($=>$.assignedTo===D),getStageHistory:D=>c.filter($=>$.dealId===D).sort(($,M)=>new Date($.changedAt).getTime()-new Date(M.changedAt).getTime())}}function oC(e,t){return oC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},oC(e,t)}function X8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,oC(e,t)}function yr(e){"@babel/helpers - typeof";return yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(e)}function Oae(e,t){if(yr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(yr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lae(e){var t=Oae(e,"string");return yr(t)=="symbol"?t:t+""}function Rae(e,t,r){return(t=Lae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function DI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kI(Object(r),!0).forEach(function(s){Rae(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ha(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var OI=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),EN=function(){return Math.random().toString(36).substring(7).split("").join(".")},LI={INIT:"@@redux/INIT"+EN(),REPLACE:"@@redux/REPLACE"+EN(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+EN()}};function $ae(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Q8(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ha(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ha(1));return r(Q8)(e,t)}if(typeof e!="function")throw new Error(ha(2));var a=e,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function f(){if(c)throw new Error(ha(3));return i}function u(g){if(typeof g!="function")throw new Error(ha(4));if(c)throw new Error(ha(5));var p=!0;return d(),l.push(g),function(){if(p){if(c)throw new Error(ha(6));p=!1,d();var b=l.indexOf(g);l.splice(b,1),o=null}}}function h(g){if(!$ae(g))throw new Error(ha(7));if(typeof g.type>"u")throw new Error(ha(8));if(c)throw new Error(ha(9));try{c=!0,i=a(i,g)}finally{c=!1}for(var p=o=l,x=0;x<p.length;x++){var b=p[x];b()}return g}function m(g){if(typeof g!="function")throw new Error(ha(10));a=g,h({type:LI.REPLACE})}function v(){var g,p=u;return g={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(ha(11));function y(){b.next&&b.next(f())}y();var j=p(y);return{unsubscribe:j}}},g[OI]=function(){return this},g}return h({type:LI.INIT}),s={dispatch:h,subscribe:u,getState:f,replaceReducer:m},s[OI]=v,s}function RI(e,t){return function(){return t(e.apply(this,arguments))}}function $I(e,t){if(typeof e=="function")return RI(e,t);if(typeof e!="object"||e===null)throw new Error(ha(16));var r={};for(var s in e){var a=e[s];typeof a=="function"&&(r[s]=RI(a,t))}return r}function J8(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,a){return function(){return s(a.apply(void 0,arguments))}})}function Fae(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var a=s.apply(void 0,arguments),i=function(){throw new Error(ha(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=J8.apply(void 0,l)(a.dispatch),DI(DI({},a),{},{dispatch:i})}}}var Z8=ce.createContext(null);function Mae(e){e()}var eB=Mae,Bae=function(t){return eB=t},zae=function(){return eB};function Uae(){var e=zae(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var FI={notify:function(){},get:function(){return[]}};function tB(e,t){var r,s=FI;function a(u){return c(),s.subscribe(u)}function i(){s.notify()}function o(){f.onStateChange&&f.onStateChange()}function l(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),s=Uae())}function d(){r&&(r(),r=void 0,s.clear(),s=FI)}var f={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return s}};return f}var rB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function Vae(e){var t=e.store,r=e.context,s=e.children,a=w.useMemo(function(){var l=tB(t);return{store:t,subscription:l}},[t]),i=w.useMemo(function(){return t.getState()},[t]);rB(function(){var l=a.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[a,i]);var o=r||Z8;return ce.createElement(o.Provider,{value:a},s)}function _b(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var nB={exports:{}},_r={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=typeof Symbol=="function"&&Symbol.for,RE=ms?Symbol.for("react.element"):60103,$E=ms?Symbol.for("react.portal"):60106,Cj=ms?Symbol.for("react.fragment"):60107,Aj=ms?Symbol.for("react.strict_mode"):60108,Ej=ms?Symbol.for("react.profiler"):60114,Pj=ms?Symbol.for("react.provider"):60109,Tj=ms?Symbol.for("react.context"):60110,FE=ms?Symbol.for("react.async_mode"):60111,_j=ms?Symbol.for("react.concurrent_mode"):60111,Ij=ms?Symbol.for("react.forward_ref"):60112,kj=ms?Symbol.for("react.suspense"):60113,qae=ms?Symbol.for("react.suspense_list"):60120,Dj=ms?Symbol.for("react.memo"):60115,Oj=ms?Symbol.for("react.lazy"):60116,Wae=ms?Symbol.for("react.block"):60121,Hae=ms?Symbol.for("react.fundamental"):60117,Gae=ms?Symbol.for("react.responder"):60118,Kae=ms?Symbol.for("react.scope"):60119;function Qa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case RE:switch(e=e.type,e){case FE:case _j:case Cj:case Ej:case Aj:case kj:return e;default:switch(e=e&&e.$$typeof,e){case Tj:case Ij:case Oj:case Dj:case Pj:return e;default:return t}}case $E:return t}}}function sB(e){return Qa(e)===_j}_r.AsyncMode=FE;_r.ConcurrentMode=_j;_r.ContextConsumer=Tj;_r.ContextProvider=Pj;_r.Element=RE;_r.ForwardRef=Ij;_r.Fragment=Cj;_r.Lazy=Oj;_r.Memo=Dj;_r.Portal=$E;_r.Profiler=Ej;_r.StrictMode=Aj;_r.Suspense=kj;_r.isAsyncMode=function(e){return sB(e)||Qa(e)===FE};_r.isConcurrentMode=sB;_r.isContextConsumer=function(e){return Qa(e)===Tj};_r.isContextProvider=function(e){return Qa(e)===Pj};_r.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===RE};_r.isForwardRef=function(e){return Qa(e)===Ij};_r.isFragment=function(e){return Qa(e)===Cj};_r.isLazy=function(e){return Qa(e)===Oj};_r.isMemo=function(e){return Qa(e)===Dj};_r.isPortal=function(e){return Qa(e)===$E};_r.isProfiler=function(e){return Qa(e)===Ej};_r.isStrictMode=function(e){return Qa(e)===Aj};_r.isSuspense=function(e){return Qa(e)===kj};_r.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Cj||e===_j||e===Ej||e===Aj||e===kj||e===qae||typeof e=="object"&&e!==null&&(e.$$typeof===Oj||e.$$typeof===Dj||e.$$typeof===Pj||e.$$typeof===Tj||e.$$typeof===Ij||e.$$typeof===Hae||e.$$typeof===Gae||e.$$typeof===Kae||e.$$typeof===Wae)};_r.typeOf=Qa;nB.exports=_r;var Yae=nB.exports,ME=Yae,Xae={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Qae={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Jae={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},aB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},BE={};BE[ME.ForwardRef]=Jae;BE[ME.Memo]=aB;function MI(e){return ME.isMemo(e)?aB:BE[e.$$typeof]||Xae}var Zae=Object.defineProperty,eie=Object.getOwnPropertyNames,BI=Object.getOwnPropertySymbols,tie=Object.getOwnPropertyDescriptor,rie=Object.getPrototypeOf,zI=Object.prototype;function iB(e,t,r){if(typeof t!="string"){if(zI){var s=rie(t);s&&s!==zI&&iB(e,s,r)}var a=eie(t);BI&&(a=a.concat(BI(t)));for(var i=MI(e),o=MI(t),l=0;l<a.length;++l){var c=a[l];if(!Qae[c]&&!(r&&r[c])&&!(o&&o[c])&&!(i&&i[c])){var d=tie(t,c);try{Zae(e,c,d)}catch{}}}}return e}var nie=iB;const UI=Cr(nie);var oB={exports:{}},Ur={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lj=60103,Rj=60106,ox=60107,lx=60108,cx=60114,dx=60109,ux=60110,fx=60112,hx=60113,zE=60120,mx=60115,px=60116,lB=60121,cB=60122,dB=60117,uB=60129,fB=60131;if(typeof Symbol=="function"&&Symbol.for){var ys=Symbol.for;Lj=ys("react.element"),Rj=ys("react.portal"),ox=ys("react.fragment"),lx=ys("react.strict_mode"),cx=ys("react.profiler"),dx=ys("react.provider"),ux=ys("react.context"),fx=ys("react.forward_ref"),hx=ys("react.suspense"),zE=ys("react.suspense_list"),mx=ys("react.memo"),px=ys("react.lazy"),lB=ys("react.block"),cB=ys("react.server.block"),dB=ys("react.fundamental"),uB=ys("react.debug_trace_mode"),fB=ys("react.legacy_hidden")}function po(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Lj:switch(e=e.type,e){case ox:case cx:case lx:case hx:case zE:return e;default:switch(e=e&&e.$$typeof,e){case ux:case fx:case px:case mx:case dx:return e;default:return t}}case Rj:return t}}}var sie=dx,aie=Lj,iie=fx,oie=ox,lie=px,cie=mx,die=Rj,uie=cx,fie=lx,hie=hx;Ur.ContextConsumer=ux;Ur.ContextProvider=sie;Ur.Element=aie;Ur.ForwardRef=iie;Ur.Fragment=oie;Ur.Lazy=lie;Ur.Memo=cie;Ur.Portal=die;Ur.Profiler=uie;Ur.StrictMode=fie;Ur.Suspense=hie;Ur.isAsyncMode=function(){return!1};Ur.isConcurrentMode=function(){return!1};Ur.isContextConsumer=function(e){return po(e)===ux};Ur.isContextProvider=function(e){return po(e)===dx};Ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lj};Ur.isForwardRef=function(e){return po(e)===fx};Ur.isFragment=function(e){return po(e)===ox};Ur.isLazy=function(e){return po(e)===px};Ur.isMemo=function(e){return po(e)===mx};Ur.isPortal=function(e){return po(e)===Rj};Ur.isProfiler=function(e){return po(e)===cx};Ur.isStrictMode=function(e){return po(e)===lx};Ur.isSuspense=function(e){return po(e)===hx};Ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ox||e===cx||e===uB||e===lx||e===hx||e===zE||e===fB||typeof e=="object"&&e!==null&&(e.$$typeof===px||e.$$typeof===mx||e.$$typeof===dx||e.$$typeof===ux||e.$$typeof===fx||e.$$typeof===dB||e.$$typeof===lB||e[0]===cB)};Ur.typeOf=po;oB.exports=Ur;var mie=oB.exports,pie=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],vie=["reactReduxForwardedRef"],gie=[],xie=[null,null];function yie(e,t){var r=e[1];return[t.payload,r+1]}function VI(e,t,r){rB(function(){return e.apply(void 0,t)},r)}function bie(e,t,r,s,a,i,o){e.current=s,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function jie(e,t,r,s,a,i,o,l,c,d){if(e){var f=!1,u=null,h=function(){if(!f){var g=t.getState(),p,x;try{p=s(g,a.current)}catch(b){x=b,u=b}x||(u=null),p===i.current?o.current||c():(i.current=p,l.current=p,o.current=!0,d({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=h,r.trySubscribe(),h();var m=function(){if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u};return m}}var wie=function(){return[null,0]};function Nie(e,t){t===void 0&&(t={});var r=t,s=r.getDisplayName,a=s===void 0?function(y){return"ConnectAdvanced("+y+")"}:s,i=r.methodName,o=i===void 0?"connectAdvanced":i,l=r.renderCountProp,c=l===void 0?void 0:l,d=r.shouldHandleStateChanges,f=d===void 0?!0:d,u=r.storeKey,h=u===void 0?"store":u;r.withRef;var m=r.forwardRef,v=m===void 0?!1:m,g=r.context,p=g===void 0?Z8:g,x=_b(r,pie),b=p;return function(j){var E=j.displayName||j.name||"Component",C=a(E),S=st({},x,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:f,storeKey:h,displayName:C,wrappedComponentName:E,WrappedComponent:j}),N=x.pure;function _(D){return e(D.dispatch,S)}var I=N?w.useMemo:function(D){return D()};function T(D){var $=w.useMemo(function(){var ye=D.reactReduxForwardedRef,$e=_b(D,vie);return[D.context,ye,$e]},[D]),M=$[0],R=$[1],B=$[2],U=w.useMemo(function(){return M&&M.Consumer&&mie.isContextConsumer(ce.createElement(M.Consumer,null))?M:b},[M,b]),W=w.useContext(U),q=!!D.store&&!!D.store.getState&&!!D.store.dispatch;W&&W.store;var L=q?D.store:W.store,V=w.useMemo(function(){return _(L)},[L]),G=w.useMemo(function(){if(!f)return xie;var ye=tB(L,q?null:W.subscription),$e=ye.notifyNestedSubs.bind(ye);return[ye,$e]},[L,q,W]),Z=G[0],te=G[1],he=w.useMemo(function(){return q?W:st({},W,{subscription:Z})},[q,W,Z]),me=w.useReducer(yie,gie,wie),oe=me[0],we=oe[0],ve=me[1];if(we&&we.error)throw we.error;var ge=w.useRef(),De=w.useRef(B),xe=w.useRef(),le=w.useRef(!1),re=I(function(){return xe.current&&B===De.current?xe.current:V(L.getState(),B)},[L,we,B]);VI(bie,[De,ge,le,B,re,xe,te]),VI(jie,[f,L,Z,V,De,ge,le,xe,te,ve],[L,Z,V]);var Ce=w.useMemo(function(){return ce.createElement(j,st({},re,{ref:R}))},[R,j,re]),Ne=w.useMemo(function(){return f?ce.createElement(U.Provider,{value:he},Ce):Ce},[U,Ce,he]);return Ne}var A=N?ce.memo(T):T;if(A.WrappedComponent=j,A.displayName=T.displayName=C,v){var O=ce.forwardRef(function($,M){return ce.createElement(A,st({},$,{reactReduxForwardedRef:M}))});return O.displayName=C,O.WrappedComponent=j,UI(O,j)}return UI(A,j)}}function qI(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function PN(e,t){if(qI(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!qI(e[r[a]],t[r[a]]))return!1;return!0}function Sie(e,t){var r={},s=function(o){var l=e[o];typeof l=="function"&&(r[o]=function(){return t(l.apply(void 0,arguments))})};for(var a in e)s(a);return r}function UE(e){return function(r,s){var a=e(r,s);function i(){return a}return i.dependsOnOwnProps=!1,i}}function WI(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function hB(e,t){return function(s,a){a.displayName;var i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=WI(e);var d=i(l,c);return typeof d=="function"&&(i.mapToProps=d,i.dependsOnOwnProps=WI(d),d=i(l,c)),d},i}}function Cie(e){return typeof e=="function"?hB(e):void 0}function Aie(e){return e?void 0:UE(function(t){return{dispatch:t}})}function Eie(e){return e&&typeof e=="object"?UE(function(t){return Sie(e,t)}):void 0}const Pie=[Cie,Aie,Eie];function Tie(e){return typeof e=="function"?hB(e):void 0}function _ie(e){return e?void 0:UE(function(){return{}})}const Iie=[Tie,_ie];function kie(e,t,r){return st({},r,e,t)}function Die(e){return function(r,s){s.displayName;var a=s.pure,i=s.areMergedPropsEqual,o=!1,l;return function(d,f,u){var h=e(d,f,u);return o?(!a||!i(h,l))&&(l=h):(o=!0,l=h),l}}}function Oie(e){return typeof e=="function"?Die(e):void 0}function Lie(e){return e?void 0:function(){return kie}}const Rie=[Oie,Lie];var $ie=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Fie(e,t,r,s){return function(i,o){return r(e(i,o),t(s,o),o)}}function Mie(e,t,r,s,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,l=a.areStatePropsEqual,c=!1,d,f,u,h,m;function v(y,j){return d=y,f=j,u=e(d,f),h=t(s,f),m=r(u,h,f),c=!0,m}function g(){return u=e(d,f),t.dependsOnOwnProps&&(h=t(s,f)),m=r(u,h,f),m}function p(){return e.dependsOnOwnProps&&(u=e(d,f)),t.dependsOnOwnProps&&(h=t(s,f)),m=r(u,h,f),m}function x(){var y=e(d,f),j=!l(y,u);return u=y,j&&(m=r(u,h,f)),m}function b(y,j){var E=!o(j,f),C=!i(y,d,j,f);return d=y,f=j,E&&C?g():E?p():C?x():m}return function(j,E){return c?b(j,E):v(j,E)}}function Bie(e,t){var r=t.initMapStateToProps,s=t.initMapDispatchToProps,a=t.initMergeProps,i=_b(t,$ie),o=r(e,i),l=s(e,i),c=a(e,i),d=i.pure?Mie:Fie;return d(o,l,c,e,i)}var zie=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function TN(e,t,r){for(var s=t.length-1;s>=0;s--){var a=t[s](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Uie(e,t){return e===t}function Vie(e){var t=e===void 0?{}:e,r=t.connectHOC,s=r===void 0?Nie:r,a=t.mapStateToPropsFactories,i=a===void 0?Iie:a,o=t.mapDispatchToPropsFactories,l=o===void 0?Pie:o,c=t.mergePropsFactories,d=c===void 0?Rie:c,f=t.selectorFactory,u=f===void 0?Bie:f;return function(m,v,g,p){p===void 0&&(p={});var x=p,b=x.pure,y=b===void 0?!0:b,j=x.areStatesEqual,E=j===void 0?Uie:j,C=x.areOwnPropsEqual,S=C===void 0?PN:C,N=x.areStatePropsEqual,_=N===void 0?PN:N,I=x.areMergedPropsEqual,T=I===void 0?PN:I,A=_b(x,zie),O=TN(m,i,"mapStateToProps"),D=TN(v,l,"mapDispatchToProps"),$=TN(g,d,"mergeProps");return s(u,st({methodName:"connect",getDisplayName:function(R){return"Connect("+R+")"},shouldHandleStateChanges:!!m,initMapStateToProps:O,initMapDispatchToProps:D,initMergeProps:$,pure:y,areStatesEqual:E,areOwnPropsEqual:S,areStatePropsEqual:_,areMergedPropsEqual:T},A))}}const mB=Vie();Bae(rl.unstable_batchedUpdates);function qie(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function pB(e,t){var r=w.useState(function(){return{inputs:t,result:e()}})[0],s=w.useRef(!0),a=w.useRef(r),i=s.current||!!(t&&a.current.inputs&&qie(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return w.useEffect(function(){s.current=!1,a.current=o},[o]),o.result}function Wie(e,t){return pB(function(){return e},t)}var vr=pB,Et=Wie,Hie=!0,_N="Invariant failed";function fd(e,t){if(!e){if(Hie)throw new Error(_N);var r=typeof t=="function"?t():t,s=r?"".concat(_N,": ").concat(r):_N;throw new Error(s)}}var no=function(t){var r=t.top,s=t.right,a=t.bottom,i=t.left,o=s-i,l=a-r,c={top:r,right:s,bottom:a,left:i,width:o,height:l,x:i,y:r,center:{x:(s+i)/2,y:(a+r)/2}};return c},VE=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},HI=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Gie=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},IN={top:0,right:0,bottom:0,left:0},qE=function(t){var r=t.borderBox,s=t.margin,a=s===void 0?IN:s,i=t.border,o=i===void 0?IN:i,l=t.padding,c=l===void 0?IN:l,d=no(VE(r,a)),f=no(HI(r,o)),u=no(HI(f,c));return{marginBox:d,borderBox:no(r),paddingBox:f,contentBox:u,margin:a,border:o,padding:c}},ii=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(r);return isNaN(a)&&fd(!1),a},Kie=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ib=function(t,r){var s=t.borderBox,a=t.border,i=t.margin,o=t.padding,l=Gie(s,r);return qE({borderBox:l,border:a,margin:i,padding:o})},kb=function(t,r){return r===void 0&&(r=Kie()),Ib(t,r)},vB=function(t,r){var s={top:ii(r.marginTop),right:ii(r.marginRight),bottom:ii(r.marginBottom),left:ii(r.marginLeft)},a={top:ii(r.paddingTop),right:ii(r.paddingRight),bottom:ii(r.paddingBottom),left:ii(r.paddingLeft)},i={top:ii(r.borderTopWidth),right:ii(r.borderRightWidth),bottom:ii(r.borderBottomWidth),left:ii(r.borderLeftWidth)};return qE({borderBox:t,margin:s,padding:a,border:i})},gB=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return vB(r,s)},GI=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Yie(e,t){return!!(e===t||GI(e)&&GI(t))}function Xie(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Yie(e[r],t[r]))return!1;return!0}function us(e,t){t===void 0&&(t=Xie);var r,s=[],a,i=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&r===this&&t(l,s)||(a=e.apply(this,l),i=!0,r=this,s=l),a}return o}var Qie=function(t){var r=[],s=null,a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};const ag=Qie;function xB(e,t){}xB.bind(null,"warn");xB.bind(null,"error");function td(){}function Jie(e,t){return st({},e,{},t)}function pi(e,t,r){var s=t.map(function(a){var i=Jie(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){s.forEach(function(i){i()})}}var Zie="Invariant failed";function Db(e){this.message=e}Db.prototype.toString=function(){return this.message};function ot(e,t){if(!e)throw new Db(Zie)}var eoe=function(e){X8(t,e);function t(){for(var s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s=e.call.apply(e,[this].concat(i))||this,s.callbacks=null,s.unbind=td,s.onWindowError=function(l){var c=s.getCallbacks();c.isDragging()&&c.tryAbort();var d=l.error;d instanceof Db&&l.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(l){s.callbacks=l},s}var r=t.prototype;return r.componentDidMount=function(){this.unbind=pi(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof Db){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(ce.Component),toe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ob=function(t){return t+1},roe=function(t){return`
  You have lifted an item in position `+Ob(t.source.index)+`
`},yB=function(t,r){var s=t.droppableId===r.droppableId,a=Ob(t.index),i=Ob(r.index);return s?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},bB=function(t,r,s){var a=r.droppableId===s.droppableId;return a?`
      The item `+t+`
      has been combined with `+s.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},noe=function(t){var r=t.destination;if(r)return yB(t.source,r);var s=t.combine;return s?bB(t.draggableId,t.source,s):"You are over an area that cannot be dropped on"},KI=function(t){return`
  The item has returned to its starting position
  of `+Ob(t.index)+`
`},soe=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+KI(t.source)+`
    `;var r=t.destination,s=t.combine;return r?`
      You have dropped the item.
      `+yB(t.source,r)+`
    `:s?`
      You have dropped the item.
      `+bB(t.draggableId,t.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+KI(t.source)+`
  `},Uy={dragHandleUsageInstructions:toe,onDragStart:roe,onDragUpdate:noe,onDragEnd:soe},hs={x:0,y:0},Cs=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},za=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},rd=function(t,r){return t.x===r.x&&t.y===r.y},_m=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},Lu=function(t,r,s){var a;return s===void 0&&(s=0),a={},a[t]=r,a[t==="x"?"y":"x"]=s,a},ig=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},YI=function(t,r){return Math.min.apply(Math,r.map(function(s){return ig(t,s)}))},jB=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},aoe=function(e,t){var r=no({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},vx=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},XI=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},ioe={top:0,right:0,bottom:0,left:0},ooe=function(t,r){return r?vx(t,r.scroll.diff.displacement):t},loe=function(t,r,s){if(s&&s.increasedBy){var a;return st({},t,(a={},a[r.end]=t[r.end]+s.increasedBy[r.line],a))}return t},coe=function(t,r){return r&&r.shouldClipSubject?aoe(r.pageMarginBox,t):no(t)},Uh=function(e){var t=e.page,r=e.withPlaceholder,s=e.axis,a=e.frame,i=ooe(t.marginBox,a),o=loe(i,s,r),l=coe(o,a);return{page:t,withPlaceholder:r,active:l}},WE=function(e,t){e.frame||ot(!1);var r=e.frame,s=za(t,r.scroll.initial),a=_m(s),i=st({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:a},max:r.scroll.max}}),o=Uh({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),l=st({},e,{frame:i,subject:o});return l};function Lb(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function HE(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Nd(e,t){if(e.find)return e.find(t);var r=HE(e,t);if(r!==-1)return e[r]}function wB(e){return Array.prototype.slice.call(e)}var NB=us(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),SB=us(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),$j=us(function(e){return Lb(e)}),doe=us(function(e){return Lb(e)}),Im=us(function(e,t){var r=doe(t).filter(function(s){return e===s.descriptor.droppableId}).sort(function(s,a){return s.descriptor.index-a.descriptor.index});return r});function GE(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Fj(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Mj=us(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),uoe=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,a=e.insideDestination,i=e.previousImpact;if(!s.isCombineEnabled)return null;var o=GE(i);if(!o)return null;function l(g){var p={type:"COMBINE",combine:{draggableId:g,droppableId:s.descriptor.id}};return st({},i,{at:p})}var c=i.displaced.all,d=c.length?c[0]:null;if(t)return d?l(d):null;var f=Mj(r,a);if(!d){if(!f.length)return null;var u=f[f.length-1];return l(u.descriptor.id)}var h=HE(f,function(g){return g.descriptor.id===d});h===-1&&ot(!1);var m=h-1;if(m<0)return null;var v=f[m];return l(v.descriptor.id)},km=function(e,t){return e.descriptor.droppableId===t.descriptor.id},CB={point:hs,value:0},og={invisible:{},visible:{},all:[]},foe={displaced:og,displacedBy:CB,at:null},yi=function(e,t){return function(r){return e<=r&&r<=t}},AB=function(e){var t=yi(e.top,e.bottom),r=yi(e.left,e.right);return function(s){var a=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);if(a)return!0;var i=t(s.top)||t(s.bottom),o=r(s.left)||r(s.right),l=i&&o;if(l)return!0;var c=s.top<e.top&&s.bottom>e.bottom,d=s.left<e.left&&s.right>e.right,f=c&&d;if(f)return!0;var u=c&&o||d&&i;return u}},hoe=function(e){var t=yi(e.top,e.bottom),r=yi(e.left,e.right);return function(s){var a=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);return a}},KE={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},EB={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},moe=function(e){return function(t){var r=yi(t.top,t.bottom),s=yi(t.left,t.right);return function(a){return e===KE?r(a.top)&&r(a.bottom):s(a.left)&&s(a.right)}}},poe=function(t,r){var s=r.frame?r.frame.scroll.diff.displacement:hs;return vx(t,s)},voe=function(t,r,s){return r.subject.active?s(r.subject.active)(t):!1},goe=function(t,r,s){return s(r)(t)},YE=function(t){var r=t.target,s=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,l=i?poe(r,s):r;return voe(l,s,o)&&goe(l,a,o)},xoe=function(t){return YE(st({},t,{isVisibleThroughFrameFn:AB}))},PB=function(t){return YE(st({},t,{isVisibleThroughFrameFn:hoe}))},yoe=function(t){return YE(st({},t,{isVisibleThroughFrameFn:moe(t.destination.axis)}))},boe=function(t,r,s){if(typeof s=="boolean")return s;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function joe(e,t){var r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return no(VE(r,s))}function lg(e){var t=e.afterDragging,r=e.destination,s=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,d){var f=joe(d,s),u=d.descriptor.id;c.all.push(u);var h=xoe({target:f,destination:r,viewport:a,withDroppableDisplacement:!0});if(!h)return c.invisible[d.descriptor.id]=!0,c;var m=boe(u,o,i),v={draggableId:u,shouldAnimate:m};return c.visible[u]=v,c},{all:[],visible:{},invisible:{}})}function woe(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function QI(e){var t=e.insideDestination,r=e.inHomeList,s=e.displacedBy,a=e.destination,i=woe(t,{inHomeList:r});return{displaced:og,displacedBy:s,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function Rb(e){var t=e.draggable,r=e.insideDestination,s=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,l=e.index,c=e.forceShouldAnimate,d=km(t,s);if(l==null)return QI({insideDestination:r,inHomeList:d,displacedBy:i,destination:s});var f=Nd(r,function(g){return g.descriptor.index===l});if(!f)return QI({insideDestination:r,inHomeList:d,displacedBy:i,destination:s});var u=Mj(t,r),h=r.indexOf(f),m=u.slice(h),v=lg({afterDragging:m,destination:s,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:v,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:l}}}}function hd(e,t){return!!t.effected[e]}var Noe=function(e){var t=e.isMovingForward,r=e.destination,s=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,l=s[o],c=l.descriptor.index,d=hd(o,i);return d?t?c:c-1:t?c+1:c},Soe=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.insideDestination,a=e.location;if(!s.length)return null;var i=a.index,o=t?i+1:i-1,l=s[0].descriptor.index,c=s[s.length-1].descriptor.index,d=r?c:c+1;return o<l||o>d?null:o},Coe=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,l=e.previousImpact,c=e.viewport,d=e.afterCritical,f=l.at;if(f||ot(!1),f.type==="REORDER"){var u=Soe({isMovingForward:t,isInHomeList:r,location:f.destination,insideDestination:o});return u==null?null:Rb({draggable:s,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:u})}var h=Noe({isMovingForward:t,destination:i,displaced:l.displaced,draggables:a,combine:f.combine,afterCritical:d});return h==null?null:Rb({draggable:s,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})},Aoe=function(e){var t=e.displaced,r=e.afterCritical,s=e.combineWith,a=e.displacedBy,i=!!(t.visible[s]||t.invisible[s]);return hd(s,r)?i?hs:_m(a.point):i?a.point:hs},Eoe=function(e){var t=e.afterCritical,r=e.impact,s=e.draggables,a=Fj(r);a||ot(!1);var i=a.draggableId,o=s[i].page.borderBox.center,l=Aoe({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Cs(o,l)},TB=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},Poe=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},XE=function(t,r,s){return r[t.crossAxisStart]+s.margin[t.crossAxisStart]+s.borderBox[t.crossAxisSize]/2},JI=function(t){var r=t.axis,s=t.moveRelativeTo,a=t.isMoving;return Lu(r.line,s.marginBox[r.end]+TB(r,a),XE(r,s.marginBox,a))},ZI=function(t){var r=t.axis,s=t.moveRelativeTo,a=t.isMoving;return Lu(r.line,s.marginBox[r.start]-Poe(r,a),XE(r,s.marginBox,a))},Toe=function(t){var r=t.axis,s=t.moveInto,a=t.isMoving;return Lu(r.line,s.contentBox[r.start]+TB(r,a),XE(r,s.contentBox,a))},_oe=function(e){var t=e.impact,r=e.draggable,s=e.draggables,a=e.droppable,i=e.afterCritical,o=Im(a.descriptor.id,s),l=r.page,c=a.axis;if(!o.length)return Toe({axis:c,moveInto:a.page,isMoving:l});var d=t.displaced,f=t.displacedBy,u=d.all[0];if(u){var h=s[u];if(hd(u,i))return ZI({axis:c,moveRelativeTo:h.page,isMoving:l});var m=Ib(h.page,f.point);return ZI({axis:c,moveRelativeTo:m,isMoving:l})}var v=o[o.length-1];if(v.descriptor.id===r.descriptor.id)return l.borderBox.center;if(hd(v.descriptor.id,i)){var g=Ib(v.page,_m(i.displacedBy.point));return JI({axis:c,moveRelativeTo:g,isMoving:l})}return JI({axis:c,moveRelativeTo:v.page,isMoving:l})},lC=function(e,t){var r=e.frame;return r?Cs(t,r.scroll.diff.displacement):t},Ioe=function(t){var r=t.impact,s=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,l=s.page.borderBox.center,c=r.at;return!a||!c?l:c.type==="REORDER"?_oe({impact:r,draggable:s,draggables:i,droppable:a,afterCritical:o}):Eoe({impact:r,draggables:i,afterCritical:o})},Bj=function(e){var t=Ioe(e),r=e.droppable,s=r?lC(r,t):t;return s},_B=function(e,t){var r=za(t,e.scroll.initial),s=_m(r),a=no({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}};return i};function ek(e,t){return e.map(function(r){return t[r]})}function koe(e,t){for(var r=0;r<t.length;r++){var s=t[r].visible[e];if(s)return s}return null}var Doe=function(e){var t=e.impact,r=e.viewport,s=e.destination,a=e.draggables,i=e.maxScrollChange,o=_B(r,Cs(r.scroll.current,i)),l=s.frame?WE(s,Cs(s.frame.scroll.current,i)):s,c=t.displaced,d=lg({afterDragging:ek(c.all,a),destination:s,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),f=lg({afterDragging:ek(c.all,a),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),u={},h={},m=[c,d,f];c.all.forEach(function(g){var p=koe(g,m);if(p){h[g]=p;return}u[g]=!0});var v=st({},t,{displaced:{all:c.all,invisible:u,visible:h}});return v},Ooe=function(e,t){return Cs(e.scroll.diff.displacement,t)},QE=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,s=e.viewport,a=Ooe(s,t),i=za(a,r.page.borderBox.center);return Cs(r.client.borderBox.center,i)},IB=function(e){var t=e.draggable,r=e.destination,s=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=o===void 0?!1:o,c=za(s,t.page.borderBox.center),d=vx(t.page.borderBox,c),f={target:d,destination:r,withDroppableDisplacement:i,viewport:a};return l?yoe(f):PB(f)},Loe=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,d=e.afterCritical;if(!s.isEnabled)return null;var f=Im(s.descriptor.id,a),u=km(r,s),h=uoe({isMovingForward:t,draggable:r,destination:s,insideDestination:f,previousImpact:i})||Coe({isMovingForward:t,isInHomeList:u,draggable:r,draggables:a,destination:s,insideDestination:f,previousImpact:i,viewport:o,afterCritical:d});if(!h)return null;var m=Bj({impact:h,draggable:r,droppable:s,draggables:a,afterCritical:d}),v=IB({draggable:r,destination:s,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var g=QE({pageBorderBoxCenter:m,draggable:r,viewport:o});return{clientSelection:g,impact:h,scrollJumpRequest:null}}var p=za(m,l),x=Doe({impact:h,viewport:o,destination:s,draggables:a,maxScrollChange:p});return{clientSelection:c,impact:x,scrollJumpRequest:p}},Xs=function(t){var r=t.subject.active;return r||ot(!1),r},Roe=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,s=e.source,a=e.droppables,i=e.viewport,o=s.subject.active;if(!o)return null;var l=s.axis,c=yi(o[l.start],o[l.end]),d=$j(a).filter(function(u){return u!==s}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return AB(i.frame)(Xs(u))}).filter(function(u){var h=Xs(u);return t?o[l.crossAxisEnd]<h[l.crossAxisEnd]:h[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(u){var h=Xs(u),m=yi(h[l.start],h[l.end]);return c(h[l.start])||c(h[l.end])||m(o[l.start])||m(o[l.end])}).sort(function(u,h){var m=Xs(u)[l.crossAxisStart],v=Xs(h)[l.crossAxisStart];return t?m-v:v-m}).filter(function(u,h,m){return Xs(u)[l.crossAxisStart]===Xs(m[0])[l.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var f=d.filter(function(u){var h=yi(Xs(u)[l.start],Xs(u)[l.end]);return h(r[l.line])});return f.length===1?f[0]:f.length>1?f.sort(function(u,h){return Xs(u)[l.start]-Xs(h)[l.start]})[0]:d.sort(function(u,h){var m=YI(r,XI(Xs(u))),v=YI(r,XI(Xs(h)));return m!==v?m-v:Xs(u)[l.start]-Xs(h)[l.start]})[0]},tk=function(t,r){var s=t.page.borderBox.center;return hd(t.descriptor.id,r)?za(s,r.displacedBy.point):s},$oe=function(t,r){var s=t.page.borderBox;return hd(t.descriptor.id,r)?vx(s,_m(r.displacedBy.point)):s},Foe=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,s=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(l){return PB({target:$oe(l,i),destination:s,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var d=ig(t,lC(s,tk(l,i))),f=ig(t,lC(s,tk(c,i)));return d<f?-1:f<d?1:l.descriptor.index-c.descriptor.index});return o[0]||null},gx=us(function(t,r){var s=r[t.line];return{value:s,point:Lu(t.line,s)}}),Moe=function(t,r,s){var a=t.axis;if(t.descriptor.mode==="virtual")return Lu(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=Im(t.descriptor.id,s),l=o.reduce(function(f,u){return f+u.client.marginBox[a.size]},0),c=l+r[a.line],d=c-i;return d<=0?null:Lu(a.line,d)},kB=function(t,r){return st({},t,{scroll:st({},t.scroll,{max:r})})},DB=function(t,r,s){var a=t.frame;km(r,t)&&ot(!1),t.subject.withPlaceholder&&ot(!1);var i=gx(t.axis,r.displaceBy).point,o=Moe(t,i,s),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=Uh({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return st({},t,{subject:c})}var d=o?Cs(a.scroll.max,o):a.scroll.max,f=kB(a,d),u=Uh({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:f});return st({},t,{subject:u,frame:f})},Boe=function(t){var r=t.subject.withPlaceholder;r||ot(!1);var s=t.frame;if(!s){var a=Uh({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return st({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||ot(!1);var o=kB(s,i),l=Uh({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return st({},t,{subject:l,frame:o})},zoe=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,s=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,l=e.viewport,c=e.afterCritical;if(!r){if(s.length)return null;var d={displaced:og,displacedBy:CB,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},f=Bj({impact:d,draggable:a,droppable:o,draggables:i,afterCritical:c}),u=km(a,o)?o:DB(o,a,i),h=IB({draggable:a,destination:u,newPageBorderBoxCenter:f,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?d:null}var m=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],v=function(){var p=r.descriptor.index;return r.descriptor.id===a.descriptor.id||m?p:p+1}(),g=gx(o.axis,a.displaceBy);return Rb({draggable:a,insideDestination:s,destination:o,viewport:l,displacedBy:g,last:og,index:v})},Uoe=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,s=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,l=e.viewport,c=e.afterCritical,d=Roe({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:l});if(!d)return null;var f=Im(d.descriptor.id,i),u=Foe({pageBorderBoxCenter:r,viewport:l,destination:d,insideDestination:f,afterCritical:c}),h=zoe({previousPageBorderBoxCenter:r,destination:d,draggable:s,draggables:i,moveRelativeTo:u,insideDestination:f,viewport:l,afterCritical:c});if(!h)return null;var m=Bj({impact:h,draggable:s,droppable:d,draggables:i,afterCritical:c}),v=QE({pageBorderBoxCenter:m,draggable:s,viewport:l});return{clientSelection:v,impact:h,scrollJumpRequest:null}},Wa=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Voe=function(t,r){var s=Wa(t);return s?r[s]:null},qoe=function(e){var t=e.state,r=e.type,s=Voe(t.impact,t.dimensions.droppables),a=!!s,i=t.dimensions.droppables[t.critical.droppable.id],o=s||i,l=o.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var d=r==="MOVE_DOWN"||r==="MOVE_RIGHT",f=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,h=t.dimensions,m=h.draggables,v=h.droppables;return c?Loe({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:f,destination:o,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Uoe({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:f,isOver:o,draggables:m,droppables:v,viewport:t.viewport,afterCritical:t.afterCritical})};function Kd(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function OB(e){var t=yi(e.top,e.bottom),r=yi(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function Woe(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Hoe(e){var t=e.pageBorderBox,r=e.draggable,s=e.candidates,a=r.page.borderBox.center,i=s.map(function(o){var l=o.axis,c=Lu(o.axis.line,t.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:ig(a,c)}}).sort(function(o,l){return l.distance-o.distance});return i[0]?i[0].id:null}function Goe(e){var t=e.pageBorderBox,r=e.draggable,s=e.droppables,a=$j(s).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!Woe(t,o))return!1;if(OB(o)(t.center))return!0;var l=i.axis,c=o.center[l.crossAxisLine],d=t[l.crossAxisStart],f=t[l.crossAxisEnd],u=yi(o[l.crossAxisStart],o[l.crossAxisEnd]),h=u(d),m=u(f);return!h&&!m?!0:h?d<c:f>c});return a.length?a.length===1?a[0].descriptor.id:Hoe({pageBorderBox:t,draggable:r,candidates:a}):null}var LB=function(t,r){return no(vx(t,r))},Koe=function(e,t){var r=e.frame;return r?LB(t,r.scroll.diff.value):t};function RB(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function Yoe(e){var t=e.draggable,r=e.closest,s=e.inHomeList;return r?s&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var Xoe=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,s=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,l=e.afterCritical,c=s.axis,d=gx(s.axis,r.displaceBy),f=d.value,u=t[c.start],h=t[c.end],m=Mj(r,a),v=Nd(m,function(p){var x=p.descriptor.id,b=p.page.borderBox.center[c.line],y=hd(x,l),j=RB({displaced:i,id:x});return y?j?h<=b:u<b-f:j?h<=b+f:u<b}),g=Yoe({draggable:r,closest:v,inHomeList:km(r,s)});return Rb({draggable:r,insideDestination:a,destination:s,viewport:o,last:i,displacedBy:d,index:g})},Qoe=4,Joe=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,s=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var l=a.axis,c=gx(a.axis,t.displaceBy),d=c.value,f=r[l.start],u=r[l.end],h=Mj(t,i),m=Nd(h,function(g){var p=g.descriptor.id,x=g.page.borderBox,b=x[l.size],y=b/Qoe,j=hd(p,o),E=RB({displaced:s.displaced,id:p});return j?E?u>x[l.start]+y&&u<x[l.end]-y:f>x[l.start]-d+y&&f<x[l.end]-d-y:E?u>x[l.start]+d+y&&u<x[l.end]+d-y:f>x[l.start]+y&&f<x[l.end]-y});if(!m)return null;var v={displacedBy:c,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:a.descriptor.id}}};return v},$B=function(e){var t=e.pageOffset,r=e.draggable,s=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,l=e.afterCritical,c=LB(r.page.borderBox,t),d=Goe({pageBorderBox:c,draggable:r,droppables:a});if(!d)return foe;var f=a[d],u=Im(f.descriptor.id,s),h=Koe(f,c);return Joe({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:i,destination:f,insideDestination:u,afterCritical:l})||Xoe({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:f,insideDestination:u,last:i.displaced,viewport:o,afterCritical:l})},JE=function(e,t){var r;return st({},e,(r={},r[t.descriptor.id]=t,r))},Zoe=function(t){var r=t.previousImpact,s=t.impact,a=t.droppables,i=Wa(r),o=Wa(s);if(!i||i===o)return a;var l=a[i];if(!l.subject.withPlaceholder)return a;var c=Boe(l);return JE(a,c)},ele=function(e){var t=e.draggable,r=e.draggables,s=e.droppables,a=e.previousImpact,i=e.impact,o=Zoe({previousImpact:a,impact:i,droppables:s}),l=Wa(i);if(!l)return o;var c=s[l];if(km(t,c)||c.subject.withPlaceholder)return o;var d=DB(c,t,r);return JE(o,d)},gv=function(e){var t=e.state,r=e.clientSelection,s=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,l=a||t.viewport,c=s||t.dimensions,d=r||t.current.client.selection,f=za(d,t.initial.client.selection),u={offset:f,selection:d,borderBoxCenter:Cs(t.initial.client.borderBoxCenter,f)},h={selection:Cs(u.selection,l.scroll.current),borderBoxCenter:Cs(u.borderBoxCenter,l.scroll.current),offset:Cs(u.offset,l.scroll.diff.value)},m={client:u,page:h};if(t.phase==="COLLECTING")return st({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:m});var v=c.draggables[t.critical.draggable.id],g=i||$B({pageOffset:h.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),p=ele({draggable:v,impact:g,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),x=st({},t,{current:m,dimensions:{draggables:c.draggables,droppables:p},impact:g,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function tle(e,t){return e.map(function(r){return t[r]})}var FB=function(e){var t=e.impact,r=e.viewport,s=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,l=tle(o.all,s),c=lg({afterDragging:l,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return st({},t,{displaced:c})},MB=function(e){var t=e.impact,r=e.draggable,s=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,l=Bj({impact:t,draggable:r,draggables:a,droppable:s,afterCritical:o});return QE({pageBorderBoxCenter:l,draggable:r,viewport:i})},BB=function(e){var t=e.state,r=e.dimensions,s=e.viewport;t.movementMode!=="SNAP"&&ot(!1);var a=t.impact,i=s||t.viewport,o=r||t.dimensions,l=o.draggables,c=o.droppables,d=l[t.critical.draggable.id],f=Wa(a);f||ot(!1);var u=c[f],h=FB({impact:a,viewport:i,destination:u,draggables:l}),m=MB({impact:h,draggable:d,droppable:u,draggables:l,viewport:i,afterCritical:t.afterCritical});return gv({impact:h,clientSelection:m,state:t,dimensions:o,viewport:i})},rle=function(e){return{index:e.index,droppableId:e.droppableId}},zB=function(e){var t=e.draggable,r=e.home,s=e.draggables,a=e.viewport,i=gx(r.axis,t.displaceBy),o=Im(r.descriptor.id,s),l=o.indexOf(t);l===-1&&ot(!1);var c=o.slice(l+1),d=c.reduce(function(m,v){return m[v.descriptor.id]=!0,m},{}),f={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:d},u=lg({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),h={displaced:u,displacedBy:i,at:{type:"REORDER",destination:rle(t.descriptor)}};return{impact:h,afterCritical:f}},nle=function(e,t){return{draggables:e.draggables,droppables:JE(e.droppables,t)}},sle=function(e){var t=e.draggable,r=e.offset,s=e.initialWindowScroll,a=Ib(t.client,r),i=kb(a,s),o=st({},t,{placeholder:st({},t.placeholder,{client:a}),client:a,page:i});return o},ale=function(e){var t=e.frame;return t||ot(!1),t},ile=function(e){var t=e.additions,r=e.updatedDroppables,s=e.viewport,a=s.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,l=r[o],c=ale(l),d=c.scroll.diff.value,f=Cs(a,d),u=sle({draggable:i,offset:f,initialWindowScroll:s.scroll.initial});return u})},ole=function(e){var t=e.state,r=e.published,s=r.modified.map(function(y){var j=t.dimensions.droppables[y.droppableId],E=WE(j,y.scroll);return E}),a=st({},t.dimensions.droppables,{},NB(s)),i=SB(ile({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=st({},t.dimensions.draggables,{},i);r.removals.forEach(function(y){delete o[y]});var l={droppables:a,draggables:o},c=Wa(t.impact),d=c?l.droppables[c]:null,f=l.draggables[t.critical.draggable.id],u=l.droppables[t.critical.droppable.id],h=zB({draggable:f,home:u,draggables:o,viewport:t.viewport}),m=h.impact,v=h.afterCritical,g=d&&d.isCombineEnabled?t.impact:m,p=$B({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:g,viewport:t.viewport,afterCritical:v}),x=st({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:p,onLiftImpact:m,dimensions:l,afterCritical:v,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return x;var b=st({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return b},cC=function(t){return t.movementMode==="SNAP"},kN=function(t,r,s){var a=nle(t.dimensions,r);return!cC(t)||s?gv({state:t,dimensions:a}):BB({state:t,dimensions:a})};function DN(e){return e.isDragging&&e.movementMode==="SNAP"?st({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var rk={phase:"IDLE",completed:null,shouldFlush:!1},lle=function(e,t){if(e===void 0&&(e=rk),t.type==="FLUSH")return st({},rk,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ot(!1);var r=t.payload,s=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,l=r.movementMode,c=o.draggables[s.draggable.id],d=o.droppables[s.droppable.id],f={selection:a,borderBoxCenter:c.client.borderBox.center,offset:hs},u={client:f,page:{selection:Cs(f.selection,i.scroll.initial),borderBoxCenter:Cs(f.selection,i.scroll.initial),offset:Cs(f.selection,i.scroll.diff.value)}},h=$j(o.droppables).every(function(ve){return!ve.isFixedOnPage}),m=zB({draggable:c,home:d,draggables:o.draggables,viewport:i}),v=m.impact,g=m.afterCritical,p={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:l,dimensions:o,initial:u,current:u,isWindowScrollAllowed:h,impact:v,afterCritical:g,onLiftImpact:v,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return p}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ot(!1);var x=st({phase:"COLLECTING"},e,{phase:"COLLECTING"});return x}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ot(!1),ole({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Kd(e)||ot(!1);var b=t.payload.client;return rd(b,e.current.client.selection)?e:gv({state:e,clientSelection:b,impact:cC(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return DN(e);Kd(e)||ot(!1);var y=t.payload,j=y.id,E=y.newScroll,C=e.dimensions.droppables[j];if(!C)return e;var S=WE(C,E);return kN(e,S,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Kd(e)||ot(!1);var N=t.payload,_=N.id,I=N.isEnabled,T=e.dimensions.droppables[_];T||ot(!1),T.isEnabled===I&&ot(!1);var A=st({},T,{isEnabled:I});return kN(e,A,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Kd(e)||ot(!1);var O=t.payload,D=O.id,$=O.isCombineEnabled,M=e.dimensions.droppables[D];M||ot(!1),M.isCombineEnabled===$&&ot(!1);var R=st({},M,{isCombineEnabled:$});return kN(e,R,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Kd(e)||ot(!1),e.isWindowScrollAllowed||ot(!1);var B=t.payload.newScroll;if(rd(e.viewport.scroll.current,B))return DN(e);var U=_B(e.viewport,B);return cC(e)?BB({state:e,viewport:U}):gv({state:e,viewport:U})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Kd(e))return e;var W=t.payload.maxScroll;if(rd(W,e.viewport.scroll.max))return e;var q=st({},e.viewport,{scroll:st({},e.viewport.scroll,{max:W})});return st({phase:"DRAGGING"},e,{viewport:q})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ot(!1);var L=qoe({state:e,type:t.type});return L?gv({state:e,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var V=t.payload.reason;e.phase!=="COLLECTING"&&ot(!1);var G=st({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:V});return G}if(t.type==="DROP_ANIMATE"){var Z=t.payload,te=Z.completed,he=Z.dropDuration,me=Z.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ot(!1);var oe={phase:"DROP_ANIMATING",completed:te,dropDuration:he,newHomeClientOffset:me,dimensions:e.dimensions};return oe}if(t.type==="DROP_COMPLETE"){var we=t.payload.completed;return{phase:"IDLE",completed:we,shouldFlush:!1}}return e},cle=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},dle=function(t){return{type:"LIFT",payload:t}},ule=function(t){return{type:"INITIAL_PUBLISH",payload:t}},fle=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},hle=function(){return{type:"COLLECTION_STARTING",payload:null}},mle=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},ple=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},vle=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},UB=function(t){return{type:"MOVE",payload:t}},gle=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},xle=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},yle=function(){return{type:"MOVE_UP",payload:null}},ble=function(){return{type:"MOVE_DOWN",payload:null}},jle=function(){return{type:"MOVE_RIGHT",payload:null}},wle=function(){return{type:"MOVE_LEFT",payload:null}},ZE=function(){return{type:"FLUSH",payload:null}},Nle=function(t){return{type:"DROP_ANIMATE",payload:t}},eP=function(t){return{type:"DROP_COMPLETE",payload:t}},VB=function(t){return{type:"DROP",payload:t}},Sle=function(t){return{type:"DROP_PENDING",payload:t}},qB=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Cle=function(e){return function(t){var r=t.getState,s=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,l=o.id,c=o.clientSelection,d=o.movementMode,f=r();f.phase==="DROP_ANIMATING"&&s(eP({completed:f.completed})),r().phase!=="IDLE"&&ot(!1),s(ZE()),s(cle({draggableId:l,movementMode:d}));var u={shouldPublishImmediately:d==="SNAP"},h={draggableId:l,scrollOptions:u},m=e.startPublishing(h),v=m.critical,g=m.dimensions,p=m.viewport;s(ule({critical:v,dimensions:g,clientSelection:c,movementMode:d,viewport:p}))}}}},Ale=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},tP={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},cg={opacity:{drop:0,combining:.7},scale:{drop:.75}},rP={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Vd=rP.outOfTheWay+"s "+tP.outOfTheWay,xv={fluid:"opacity "+Vd,snap:"transform "+Vd+", opacity "+Vd,drop:function(t){var r=t+"s "+tP.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Vd,placeholder:"height "+Vd+", width "+Vd+", margin "+Vd},nk=function(t){return rd(t,hs)?null:"translate("+t.x+"px, "+t.y+"px)"},dC={moveTo:nk,drop:function(t,r){var s=nk(t);return s?r?s+" scale("+cg.scale.drop+")":s:null}},uC=rP.minDropTime,WB=rP.maxDropTime,Ele=WB-uC,sk=1500,Ple=.6,Tle=function(e){var t=e.current,r=e.destination,s=e.reason,a=ig(t,r);if(a<=0)return uC;if(a>=sk)return WB;var i=a/sk,o=uC+Ele*i,l=s==="CANCEL"?o*Ple:o;return Number(l.toFixed(2))},_le=function(e){var t=e.impact,r=e.draggable,s=e.dimensions,a=e.viewport,i=e.afterCritical,o=s.draggables,l=s.droppables,c=Wa(t),d=c?l[c]:null,f=l[r.descriptor.droppableId],u=MB({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:d||f,viewport:a}),h=za(u,r.client.borderBox.center);return h},Ile=function(e){var t=e.draggables,r=e.reason,s=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!s.at||r!=="DROP"){var l=FB({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var c=st({},s,{displaced:og});return{impact:c,didDropInsideDroppable:!0}},kle=function(e){var t=e.getState,r=e.dispatch;return function(s){return function(a){if(a.type!=="DROP"){s(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(Sle({reason:o}));return}if(i.phase!=="IDLE"){var l=i.phase==="DROP_PENDING"&&i.isWaiting;l&&ot(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ot(!1);var c=i.critical,d=i.dimensions,f=d.draggables[i.critical.draggable.id],u=Ile({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=u.impact,m=u.didDropInsideDroppable,v=m?GE(h):null,g=m?Fj(h):null,p={index:c.draggable.index,droppableId:c.droppable.id},x={draggableId:f.descriptor.id,type:f.descriptor.type,source:p,reason:o,mode:i.movementMode,destination:v,combine:g},b=_le({impact:h,draggable:f,dimensions:d,viewport:i.viewport,afterCritical:i.afterCritical}),y={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:h},j=!rd(i.current.client.offset,b)||!!x.combine;if(!j){r(eP({completed:y}));return}var E=Tle({current:i.current.client.offset,destination:b,reason:o}),C={newHomeClientOffset:b,dropDuration:E,completed:y};r(Nle(C))}}}},HB=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Dle(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function Ole(e){var t=e.onWindowScroll;function r(){t(HB())}var s=ag(r),a=Dle(s),i=td;function o(){return i!==td}function l(){o()&&ot(!1),i=pi(window,[a])}function c(){o()||ot(!1),s.cancel(),i(),i=td}return{start:l,stop:c,isActive:o}}var Lle=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Rle=function(e){var t=Ole({onWindowScroll:function(s){e.dispatch(gle({newScroll:s}))}});return function(r){return function(s){!t.isActive()&&s.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Lle(s)&&t.stop(),r(s)}}},$le=function(e){var t=!1,r=!1,s=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(s))};return a.wasCalled=function(){return t},a},Fle=function(){var e=[],t=function(i){var o=HE(e,function(d){return d.timerId===i});o===-1&&ot(!1);var l=e.splice(o,1),c=l[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),l={timerId:o,callback:i};e.push(l)},s=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:s}},Mle=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Ble=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},zle=function(t,r){if(t===r)return!0;var s=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return s&&a},Fp=function(t,r){r()},Y0=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},ON=function(t,r,s,a){if(!t){s(a(r));return}var i=$le(s),o={announce:i};t(r,o),i.wasCalled()||s(a(r))},Ule=function(e,t){var r=Fle(),s=null,a=function(h,m){s&&ot(!1),Fp("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var g={draggableId:h,mode:m};v(g)}})},i=function(h,m){s&&ot(!1),Fp("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(Y0(h,m))})},o=function(h,m){s&&ot(!1);var v=Y0(h,m);s={mode:m,lastCritical:h,lastLocation:v.source,lastCombine:null},r.add(function(){Fp("onDragStart",function(){return ON(e().onDragStart,v,t,Uy.onDragStart)})})},l=function(h,m){var v=GE(m),g=Fj(m);s||ot(!1);var p=!zle(h,s.lastCritical);p&&(s.lastCritical=h);var x=!Mle(s.lastLocation,v);x&&(s.lastLocation=v);var b=!Ble(s.lastCombine,g);if(b&&(s.lastCombine=g),!(!p&&!x&&!b)){var y=st({},Y0(h,s.mode),{combine:g,destination:v});r.add(function(){Fp("onDragUpdate",function(){return ON(e().onDragUpdate,y,t,Uy.onDragUpdate)})})}},c=function(){s||ot(!1),r.flush()},d=function(h){s||ot(!1),s=null,Fp("onDragEnd",function(){return ON(e().onDragEnd,h,t,Uy.onDragEnd)})},f=function(){if(s){var h=st({},Y0(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});d(h)}};return{beforeCapture:a,beforeStart:i,start:o,update:l,flush:c,drop:d,abort:f}},Vle=function(e,t){var r=Ule(e,t);return function(s){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var l=i.payload.completed.result;r.flush(),a(i),r.drop(l);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=s.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},qle=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var s=e.getState();s.phase!=="DROP_ANIMATING"&&ot(!1),e.dispatch(eP({completed:s.completed}))}}},Wle=function(e){var t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&s(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(qB())}};r=requestAnimationFrame(function(){r=null,t=pi(window,[o])})}}}},Hle=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},Gle=function(e){var t=!1;return function(){return function(r){return function(s){if(s.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(s.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){t=!1;var a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Kle=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Yle=function(e){return function(t){return function(r){return function(s){if(Kle(s)){e.stop(),r(s);return}if(s.type==="INITIAL_PUBLISH"){r(s);var a=t.getState();a.phase!=="DRAGGING"&&ot(!1),e.start(a);return}r(s),e.scroll(t.getState())}}}},Xle=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(VB({reason:s.reason})))}}}},Qle=J8,Jle=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,s=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return Q8(lle,Qle(Fae(Ale(s),Hle(t),Cle(t),kle,qle,Wle,Xle,Yle(o),Rle,Gle(r),Vle(a,i))))},LN=function(){return{additions:{},removals:{},modified:{}}};function Zle(e){var t=e.registry,r=e.callbacks,s=LN(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var f=s,u=f.additions,h=f.removals,m=f.modified,v=Object.keys(u).map(function(x){return t.draggable.getById(x).getDimension(hs)}).sort(function(x,b){return x.descriptor.index-b.descriptor.index}),g=Object.keys(m).map(function(x){var b=t.droppable.getById(x),y=b.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:y}}),p={additions:v,removals:Object.keys(h),modified:g};s=LN(),r.publish(p)}))},o=function(f){var u=f.descriptor.id;s.additions[u]=f,s.modified[f.descriptor.droppableId]=!0,s.removals[u]&&delete s.removals[u],i()},l=function(f){var u=f.descriptor;s.removals[u.id]=!0,s.modified[u.droppableId]=!0,s.additions[u.id]&&delete s.additions[u.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,s=LN())};return{add:o,remove:l,stop:c}}var GB=function(e){var t=e.scrollHeight,r=e.scrollWidth,s=e.height,a=e.width,i=za({x:r,y:t},{x:a,y:s}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},KB=function(){var e=document.documentElement;return e||ot(!1),e},YB=function(){var e=KB(),t=GB({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},ece=function(){var e=HB(),t=YB(),r=e.y,s=e.x,a=KB(),i=a.clientWidth,o=a.clientHeight,l=s+i,c=r+o,d=no({top:r,left:s,right:l,bottom:c}),f={frame:d,scroll:{initial:e,current:e,max:t,diff:{value:hs,displacement:hs}}};return f},tce=function(e){var t=e.critical,r=e.scrollOptions,s=e.registry,a=ece(),i=a.scroll.current,o=t.droppable,l=s.droppable.getAllByType(o.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,r)}),c=s.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(i)}),d={draggables:SB(c),droppables:NB(l)},f={dimensions:d,critical:t,viewport:a};return f};function ak(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var s=e.droppable.getById(r.descriptor.droppableId);return s.descriptor.mode==="virtual"}var rce=function(e,t){var r=null,s=Zle({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(m,v){e.droppable.exists(m)||ot(!1),r&&t.updateDroppableIsEnabled({id:m,isEnabled:v})},i=function(m,v){r&&(e.droppable.exists(m)||ot(!1),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:v}))},o=function(m,v){r&&(e.droppable.exists(m)||ot(!1),t.updateDroppableScroll({id:m,newScroll:v}))},l=function(m,v){r&&e.droppable.getById(m).callbacks.scroll(v)},c=function(){if(r){s.stop();var m=r.critical.droppable;e.droppable.getAllByType(m.type).forEach(function(v){return v.callbacks.dragStopped()}),r.unsubscribe(),r=null}},d=function(m){r||ot(!1);var v=r.critical.draggable;m.type==="ADDITION"&&ak(e,v,m.value)&&s.add(m.value),m.type==="REMOVAL"&&ak(e,v,m.value)&&s.remove(m.value)},f=function(m){r&&ot(!1);var v=e.draggable.getById(m.draggableId),g=e.droppable.getById(v.descriptor.droppableId),p={draggable:v.descriptor,droppable:g.descriptor},x=e.subscribe(d);return r={critical:p,unsubscribe:x},tce({critical:p,registry:e,scrollOptions:m.scrollOptions})},u={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:f,stopPublishing:c};return u},XB=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},nce=function(e){window.scrollBy(e.x,e.y)},sce=us(function(e){return $j(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),ace=function(t,r){var s=Nd(sce(r),function(a){return a.frame||ot(!1),OB(a.frame.pageMarginBox)(t)});return s},ice=function(e){var t=e.center,r=e.destination,s=e.droppables;if(r){var a=s[r];return a.frame?a:null}var i=ace(t,s);return i},nd={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},oce=function(e,t){var r=e[t.size]*nd.startFromPercentage,s=e[t.size]*nd.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:s};return a},QB=function(e){var t=e.startOfRange,r=e.endOfRange,s=e.current,a=r-t;if(a===0)return 0;var i=s-t,o=i/a;return o},nP=1,lce=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return nd.maxPixelScroll;if(e===t.startScrollingFrom)return nP;var r=QB({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=1-r,a=nd.maxPixelScroll*nd.ease(s);return Math.ceil(a)},ik=nd.durationDampening.accelerateAt,ok=nd.durationDampening.stopDampeningAt,cce=function(e,t){var r=t,s=ok,a=Date.now(),i=a-r;if(i>=ok)return e;if(i<ik)return nP;var o=QB({startOfRange:ik,endOfRange:s,current:i}),l=e*nd.ease(o);return Math.ceil(l)},lk=function(e){var t=e.distanceToEdge,r=e.thresholds,s=e.dragStartTime,a=e.shouldUseTimeDampening,i=lce(t,r);return i===0?0:a?Math.max(cce(i,s),nP):i},ck=function(e){var t=e.container,r=e.distanceToEdges,s=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=oce(t,a),l=r[a.end]<r[a.start];return l?lk({distanceToEdge:r[a.end],thresholds:o,dragStartTime:s,shouldUseTimeDampening:i}):-1*lk({distanceToEdge:r[a.start],thresholds:o,dragStartTime:s,shouldUseTimeDampening:i})},dce=function(e){var t=e.container,r=e.subject,s=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?s:i&&a?null:{x:i?0:s.x,y:a?0:s.y}},uce=jB(function(e){return e===0?0:e}),JB=function(e){var t=e.dragStartTime,r=e.container,s=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},l=ck({container:r,distanceToEdges:o,dragStartTime:t,axis:KE,shouldUseTimeDampening:i}),c=ck({container:r,distanceToEdges:o,dragStartTime:t,axis:EB,shouldUseTimeDampening:i}),d=uce({x:c,y:l});if(rd(d,hs))return null;var f=dce({container:r,subject:s,proposedScroll:d});return f?rd(f,hs)?null:f:null},fce=jB(function(e){return e===0?0:e>0?1:-1}),sP=function(){var e=function(r,s){return r<0?r:r>s?r-s:0};return function(t){var r=t.current,s=t.max,a=t.change,i=Cs(r,a),o={x:e(i.x,s.x),y:e(i.y,s.y)};return rd(o,hs)?null:o}}(),ZB=function(t){var r=t.max,s=t.current,a=t.change,i={x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)},o=fce(a),l=sP({max:i,current:s,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},aP=function(t,r){return ZB({current:t.scroll.current,max:t.scroll.max,change:r})},hce=function(t,r){if(!aP(t,r))return null;var s=t.scroll.max,a=t.scroll.current;return sP({current:a,max:s,change:r})},iP=function(t,r){var s=t.frame;return s?ZB({current:s.scroll.current,max:s.scroll.max,change:r}):!1},mce=function(t,r){var s=t.frame;return!s||!iP(t,r)?null:sP({current:s.scroll.current,max:s.scroll.max,change:r})},pce=function(e){var t=e.viewport,r=e.subject,s=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=JB({dragStartTime:a,container:t.frame,subject:r,center:s,shouldUseTimeDampening:i});return o&&aP(t,o)?o:null},vce=function(e){var t=e.droppable,r=e.subject,s=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var l=JB({dragStartTime:a,container:o.pageMarginBox,subject:r,center:s,shouldUseTimeDampening:i});return l&&iP(t,l)?l:null},dk=function(e){var t=e.state,r=e.dragStartTime,s=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var d=t.viewport,f=pce({dragStartTime:r,viewport:d,subject:c,center:o,shouldUseTimeDampening:s});if(f){a(f);return}}var u=ice({center:o,destination:Wa(t.impact),droppables:t.dimensions.droppables});if(u){var h=vce({dragStartTime:r,droppable:u,subject:c,center:o,shouldUseTimeDampening:s});h&&i(u.descriptor.id,h)}},gce=function(e){var t=e.scrollWindow,r=e.scrollDroppable,s=ag(t),a=ag(r),i=null,o=function(f){i||ot(!1);var u=i,h=u.shouldUseTimeDampening,m=u.dragStartTime;dk({state:f,scrollWindow:s,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:h})},l=function(f){i&&ot(!1);var u=Date.now(),h=!1,m=function(){h=!0};dk({state:f,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),i={dragStartTime:u,shouldUseTimeDampening:h},h&&o(f)},c=function(){i&&(s.cancel(),a.cancel(),i=null)};return{start:l,stop:c,scroll:o}},xce=function(e){var t=e.move,r=e.scrollDroppable,s=e.scrollWindow,a=function(d,f){var u=Cs(d.current.client.selection,f);t({client:u})},i=function(d,f){if(!iP(d,f))return f;var u=mce(d,f);if(!u)return r(d.descriptor.id,f),null;var h=za(f,u);r(d.descriptor.id,h);var m=za(f,h);return m},o=function(d,f,u){if(!d||!aP(f,u))return u;var h=hce(f,u);if(!h)return s(u),null;var m=za(u,h);s(m);var v=za(u,m);return v},l=function(d){var f=d.scrollJumpRequest;if(f){var u=Wa(d.impact);u||ot(!1);var h=i(d.dimensions.droppables[u],f);if(h){var m=d.viewport,v=o(d.isWindowScrollAllowed,m,h);v&&a(d,v)}}};return l},yce=function(e){var t=e.scrollDroppable,r=e.scrollWindow,s=e.move,a=gce({scrollWindow:r,scrollDroppable:t}),i=xce({move:s,scrollWindow:r,scrollDroppable:t}),o=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){a.scroll(d);return}d.scrollJumpRequest&&i(d)}},l={scroll:o,start:a.start,stop:a.stop};return l},Vh="data-rbd",qh=function(){var e=Vh+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),fC=function(){var e=Vh+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),bce=function(){var e=Vh+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),uk={contextId:Vh+"-scroll-container-context-id"},jce=function(t){return function(r){return"["+r+'="'+t+'"]'}},Mp=function(t,r){return t.map(function(s){var a=s.styles[r];return a?s.selector+" { "+a+" }":""}).join(" ")},wce="pointer-events: none;",Nce=function(e){var t=jce(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(qh.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:wce,dropAnimating:l}}}(),s=function(){var l=`
      transition: `+xv.outOfTheWay+`;
    `;return{selector:t(fC.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),a={selector:t(bce.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[s,r,a,i];return{always:Mp(o,"always"),resting:Mp(o,"resting"),dragging:Mp(o,"dragging"),dropAnimating:Mp(o,"dropAnimating"),userCancel:Mp(o,"userCancel")}},Ha=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,RN=function(){var t=document.querySelector("head");return t||ot(!1),t},fk=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function Sce(e,t){var r=vr(function(){return Nce(e)},[e]),s=w.useRef(null),a=w.useRef(null),i=Et(us(function(u){var h=a.current;h||ot(!1),h.textContent=u}),[]),o=Et(function(u){var h=s.current;h||ot(!1),h.textContent=u},[]);Ha(function(){!s.current&&!a.current||ot(!1);var u=fk(t),h=fk(t);return s.current=u,a.current=h,u.setAttribute(Vh+"-always",e),h.setAttribute(Vh+"-dynamic",e),RN().appendChild(u),RN().appendChild(h),o(r.always),i(r.resting),function(){var m=function(g){var p=g.current;p||ot(!1),RN().removeChild(p),g.current=null};m(s),m(a)}},[t,o,i,r.always,r.resting,e]);var l=Et(function(){return i(r.dragging)},[i,r.dragging]),c=Et(function(u){if(u==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),d=Et(function(){a.current&&i(r.resting)},[i,r.resting]),f=vr(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d]);return f}var e9=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function zj(e){return e instanceof e9(e).HTMLElement}function Cce(e,t){var r="["+qh.contextId+'="'+e+'"]',s=wB(document.querySelectorAll(r));if(!s.length)return null;var a=Nd(s,function(i){return i.getAttribute(qh.draggableId)===t});return!a||!zj(a)?null:a}function Ace(e){var t=w.useRef({}),r=w.useRef(null),s=w.useRef(null),a=w.useRef(!1),i=Et(function(h,m){var v={id:h,focus:m};return t.current[h]=v,function(){var p=t.current,x=p[h];x!==v&&delete p[h]}},[]),o=Et(function(h){var m=Cce(e,h);m&&m!==document.activeElement&&m.focus()},[e]),l=Et(function(h,m){r.current===h&&(r.current=m)},[]),c=Et(function(){s.current||a.current&&(s.current=requestAnimationFrame(function(){s.current=null;var h=r.current;h&&o(h)}))},[o]),d=Et(function(h){r.current=null;var m=document.activeElement;m&&m.getAttribute(qh.draggableId)===h&&(r.current=h)},[]);Ha(function(){return a.current=!0,function(){a.current=!1;var h=s.current;h&&cancelAnimationFrame(h)}},[]);var f=vr(function(){return{register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[i,d,c,l]);return f}function Ece(){var e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){var m=t.indexOf(u);m!==-1&&t.splice(m,1)}}function s(u){t.length&&t.forEach(function(h){return h(u)})}function a(u){return e.draggables[u]||null}function i(u){var h=a(u);return h||ot(!1),h}var o={register:function(h){e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:function(h,m){var v=e.draggables[m.descriptor.id];v&&v.uniqueId===h.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var m=h.descriptor.id,v=a(m);v&&h.uniqueId===v.uniqueId&&(delete e.draggables[m],s({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:function(h){return!!a(h)},getAllByType:function(h){return Lb(e.draggables).filter(function(m){return m.descriptor.type===h})}};function l(u){return e.droppables[u]||null}function c(u){var h=l(u);return h||ot(!1),h}var d={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var m=l(h.descriptor.id);m&&h.uniqueId===m.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:function(h){return!!l(h)},getAllByType:function(h){return Lb(e.droppables).filter(function(m){return m.descriptor.type===h})}};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:r,clean:f}}function Pce(){var e=vr(Ece,[]);return w.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var oP=ce.createContext(null),$b=function(){var e=document.body;return e||ot(!1),e},Tce={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},_ce=function(t){return"rbd-announcement-"+t};function Ice(e){var t=vr(function(){return _ce(e)},[e]),r=w.useRef(null);w.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),st(i.style,Tce),$b().appendChild(i),function(){setTimeout(function(){var c=$b();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var s=Et(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return s}var kce=0,Dce={separator:"::"};function lP(e,t){return t===void 0&&(t=Dce),vr(function(){return""+e+t.separator+kce++},[t.separator,e])}function Oce(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function Lce(e){var t=e.contextId,r=e.text,s=lP("hidden-text",{separator:"-"}),a=vr(function(){return Oce({contextId:t,uniqueId:s})},[s,t]);return w.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",$b().appendChild(o),function(){var c=$b();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var Uj=ce.createContext(null);function t9(e){var t=w.useRef(e);return w.useEffect(function(){t.current=e}),t}function Rce(){var e=null;function t(){return!!e}function r(o){return o===e}function s(o){e&&ot(!1);var l={abandon:o};return e=l,l}function a(){e||ot(!1),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:s,release:a,tryAbandon:i}}var $ce=9,Fce=13,cP=27,r9=32,Mce=33,Bce=34,zce=35,Uce=36,Vce=37,qce=38,Wce=39,Hce=40,X0,Gce=(X0={},X0[Fce]=!0,X0[$ce]=!0,X0),n9=function(e){Gce[e.keyCode]&&e.preventDefault()},Vj=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Nd(t,function(s){return"on"+s in document});return r||e}(),s9=0,hk=5;function Kce(e,t){return Math.abs(t.x-e.x)>=hk||Math.abs(t.y-e.y)>=hk}var mk={type:"IDLE"};function Yce(e){var t=e.cancel,r=e.completed,s=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,d=o.clientY;if(l===s9){var f={x:c,y:d},u=s();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(f);return}u.type!=="PENDING"&&ot(!1);var h=u.point;if(Kce(h,f)){o.preventDefault();var m=u.actions.fluidLift(f);a({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(o){var l=s();if(l.type!=="DRAGGING"){t();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){s().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var l=s();if(l.type==="PENDING"){t();return}if(o.keyCode===cP){o.preventDefault(),t();return}n9(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=s();if(l.type==="IDLE"&&ot(!1),l.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:Vj,fn:t}]}function Xce(e){var t=w.useRef(mk),r=w.useRef(td),s=vr(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===s9&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var h=e.findClosestDraggableId(u);if(h){var m=e.tryGetLock(h,o,{sourceEvent:u});if(m){u.preventDefault();var v={x:u.clientX,y:u.clientY};r.current(),d(m,v)}}}}}},[e]),a=vr(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var h=e.findClosestDraggableId(u);if(h){var m=e.findOptionsForDraggable(h);m&&(m.shouldRespectForcePress||e.canGetLock(h)&&u.preventDefault())}}}}},[e]),i=Et(function(){var u={passive:!1,capture:!0};r.current=pi(window,[a,s],u)},[a,s]),o=Et(function(){var f=t.current;f.type!=="IDLE"&&(t.current=mk,r.current(),i())},[i]),l=Et(function(){var f=t.current;o(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[o]),c=Et(function(){var u={capture:!0,passive:!1},h=Yce({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(v){t.current=v}});r.current=pi(window,h,u)},[l,o]),d=Et(function(u,h){t.current.type!=="IDLE"&&ot(!1),t.current={type:"PENDING",point:h,actions:u},c()},[c]);Ha(function(){return i(),function(){r.current()}},[i])}var $f;function Qce(){}var Jce=($f={},$f[Bce]=!0,$f[Mce]=!0,$f[Uce]=!0,$f[zce]=!0,$f);function Zce(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===cP){i.preventDefault(),r();return}if(i.keyCode===r9){i.preventDefault(),s();return}if(i.keyCode===Hce){i.preventDefault(),e.moveDown();return}if(i.keyCode===qce){i.preventDefault(),e.moveUp();return}if(i.keyCode===Wce){i.preventDefault(),e.moveRight();return}if(i.keyCode===Vce){i.preventDefault(),e.moveLeft();return}if(Jce[i.keyCode]){i.preventDefault();return}n9(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Vj,fn:r}]}function ede(e){var t=w.useRef(Qce),r=vr(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==r9)return;var o=e.findClosestDraggableId(i);if(!o)return;var l=e.tryGetLock(o,f,{sourceEvent:i});if(!l)return;i.preventDefault();var c=!0,d=l.snapLift();t.current();function f(){c||ot(!1),c=!1,t.current(),s()}t.current=pi(window,Zce(d,f),{capture:!0,passive:!1})}}},[e]),s=Et(function(){var i={passive:!1,capture:!0};t.current=pi(window,[r],i)},[r]);Ha(function(){return s(),function(){t.current()}},[s])}var $N={type:"IDLE"},tde=120,rde=.15;function nde(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===cP&&a.preventDefault(),t()}},{eventName:Vj,fn:t}]}function sde(e){var t=e.cancel,r=e.completed,s=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=s();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var l=i.touches[0],c=l.clientX,d=l.clientY,f={x:c,y:d};i.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:function(i){var o=s();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(s().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=s();o.type==="IDLE"&&ot(!1);var l=i.touches[0];if(l){var c=l.force>=rde;if(c){var d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&t();return}if(d){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:Vj,fn:t}]}function ade(e){var t=w.useRef($N),r=w.useRef(td),s=Et(function(){return t.current},[]),a=Et(function(m){t.current=m},[]),i=vr(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var v=e.findClosestDraggableId(m);if(v){var g=e.tryGetLock(v,l,{sourceEvent:m});if(g){var p=m.touches[0],x=p.clientX,b=p.clientY,y={x,y:b};r.current(),u(g,y)}}}}}},[e]),o=Et(function(){var m={capture:!0,passive:!1};r.current=pi(window,[i],m)},[i]),l=Et(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a($N),r.current(),o())},[o,a]),c=Et(function(){var h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),d=Et(function(){var m={capture:!0,passive:!1},v={cancel:c,completed:l,getPhase:s},g=pi(window,sde(v),m),p=pi(window,nde(v),m);r.current=function(){g(),p()}},[c,s,l]),f=Et(function(){var m=s();m.type!=="PENDING"&&ot(!1);var v=m.actions.fluidLift(m.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[s,a]),u=Et(function(m,v){s().type!=="IDLE"&&ot(!1);var g=setTimeout(f,tde);a({type:"PENDING",point:v,actions:m,longPressTimerId:g}),d()},[d,s,a,f]);Ha(function(){return o(),function(){r.current();var v=s();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a($N))}},[s,o,a]),Ha(function(){var m=pi(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var ide={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function a9(e,t){if(t==null)return!1;var r=!!ide[t.tagName.toLowerCase()];if(r)return!0;var s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:a9(e,t.parentElement)}function ode(e,t){var r=t.target;return zj(r)?a9(e,r):!1}var lde=function(e){return no(e.getBoundingClientRect()).center};function cde(e){return e instanceof e9(e).Element}var dde=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Nd(t,function(s){return s in Element.prototype});return r||e}();function i9(e,t){return e==null?null:e[dde](t)?e:i9(e.parentElement,t)}function ude(e,t){return e.closest?e.closest(t):i9(e,t)}function fde(e){return"["+qh.contextId+'="'+e+'"]'}function hde(e,t){var r=t.target;if(!cde(r))return null;var s=fde(e),a=ude(r,s);return!a||!zj(a)?null:a}function mde(e,t){var r=hde(e,t);return r?r.getAttribute(qh.draggableId):null}function pde(e,t){var r="["+fC.contextId+'="'+e+'"]',s=wB(document.querySelectorAll(r)),a=Nd(s,function(i){return i.getAttribute(fC.id)===t});return!a||!zj(a)?null:a}function vde(e){e.preventDefault()}function Q0(e){var t=e.expected,r=e.phase,s=e.isLockActive;return e.shouldWarn,!(!s()||t!==r)}function o9(e){var t=e.lockAPI,r=e.store,s=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=s.draggable.findById(a);return!(!i||!i.options.isEnabled||!XB(r.getState(),a))}function gde(e){var t=e.lockAPI,r=e.contextId,s=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent,c=o9({lockAPI:t,store:s,registry:a,draggableId:i});if(!c)return null;var d=a.draggable.getById(i),f=pde(r,d.descriptor.id);if(!f||l&&!d.options.canDragInteractiveElements&&ode(f,l))return null;var u=t.claim(o||td),h="PRE_DRAG";function m(){return d.options.shouldRespectForcePress}function v(){return t.isActive(u)}function g(C,S){Q0({expected:C,phase:h,isLockActive:v,shouldWarn:!0})&&s.dispatch(S())}var p=g.bind(null,"DRAGGING");function x(C){function S(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(S(),h!=="PRE_DRAG"&&ot(!1)),s.dispatch(dle(C.liftActionArgs)),h="DRAGGING";function N(_,I){if(I===void 0&&(I={shouldBlockNextClick:!1}),C.cleanup(),I.shouldBlockNextClick){var T=pi(window,[{eventName:"click",fn:vde,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}S(),s.dispatch(VB({reason:_}))}return st({isActive:function(){return Q0({expected:"DRAGGING",phase:h,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(I){return N("DROP",I)},cancel:function(I){return N("CANCEL",I)}},C.actions)}function b(C){var S=ag(function(_){p(function(){return UB({client:_})})}),N=x({liftActionArgs:{id:i,clientSelection:C,movementMode:"FLUID"},cleanup:function(){return S.cancel()},actions:{move:S}});return st({},N,{move:S})}function y(){var C={moveUp:function(){return p(yle)},moveRight:function(){return p(jle)},moveDown:function(){return p(ble)},moveLeft:function(){return p(wle)}};return x({liftActionArgs:{id:i,clientSelection:lde(f),movementMode:"SNAP"},cleanup:td,actions:C})}function j(){var C=Q0({expected:"PRE_DRAG",phase:h,isLockActive:v,shouldWarn:!0});C&&t.release()}var E={isActive:function(){return Q0({expected:"PRE_DRAG",phase:h,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:b,snapLift:y,abort:j};return E}var xde=[Xce,ede,ade];function yde(e){var t=e.contextId,r=e.store,s=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?xde:[],a||[]),l=w.useState(function(){return Rce()})[0],c=Et(function(b,y){b.isDragging&&!y.isDragging&&l.tryAbandon()},[l]);Ha(function(){var b=r.getState(),y=r.subscribe(function(){var j=r.getState();c(b,j),b=j});return y},[l,r,c]),Ha(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=Et(function(x){return o9({lockAPI:l,registry:s,store:r,draggableId:x})},[l,s,r]),f=Et(function(x,b,y){return gde({lockAPI:l,registry:s,contextId:t,store:r,draggableId:x,forceSensorStop:b,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null})},[t,l,s,r]),u=Et(function(x){return mde(t,x)},[t]),h=Et(function(x){var b=s.draggable.findById(x);return b?b.options:null},[s.draggable]),m=Et(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(ZE()))},[l,r]),v=Et(l.isClaimed,[l]),g=vr(function(){return{canGetLock:d,tryGetLock:f,findClosestDraggableId:u,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:v}},[d,f,u,h,m,v]),p=0;p<o.length;p++)o[p](g)}var bde=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Bp(e){return e.current||ot(!1),e.current}function jde(e){var t=e.contextId,r=e.setCallbacks,s=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=w.useRef(null),l=t9(e),c=Et(function(){return bde(l.current)},[l]),d=Ice(t),f=Lce({contextId:t,text:i}),u=Sce(t,a),h=Et(function(_){Bp(o).dispatch(_)},[]),m=vr(function(){return $I({publishWhileDragging:fle,updateDroppableScroll:mle,updateDroppableIsEnabled:ple,updateDroppableIsCombineEnabled:vle,collectionStarting:hle},h)},[h]),v=Pce(),g=vr(function(){return rce(v,m)},[v,m]),p=vr(function(){return yce(st({scrollWindow:nce,scrollDroppable:g.scrollDroppable},$I({move:UB},h)))},[g.scrollDroppable,h]),x=Ace(t),b=vr(function(){return Jle({announce:d,autoScroller:p,dimensionMarshal:g,focusMarshal:x,getResponders:c,styleMarshal:u})},[d,p,g,x,c,u]);o.current=b;var y=Et(function(){var _=Bp(o),I=_.getState();I.phase!=="IDLE"&&_.dispatch(ZE())},[]),j=Et(function(){var _=Bp(o).getState();return _.isDragging||_.phase==="DROP_ANIMATING"},[]),E=vr(function(){return{isDragging:j,tryAbort:y}},[j,y]);r(E);var C=Et(function(_){return XB(Bp(o).getState(),_)},[]),S=Et(function(){return Kd(Bp(o).getState())},[]),N=vr(function(){return{marshal:g,focus:x,contextId:t,canLift:C,isMovementAllowed:S,dragHandleUsageInstructionsId:f,registry:v}},[t,g,f,x,C,S,v]);return yde({contextId:t,store:b,registry:v,customSensors:s,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(function(){return y},[y]),ce.createElement(Uj.Provider,{value:N},ce.createElement(Vae,{context:oP,store:b},e.children))}var wde=0;function Nde(){return vr(function(){return""+wde++},[])}function Sde(e){var t=Nde(),r=e.dragHandleUsageInstructions||Uy.dragHandleUsageInstructions;return ce.createElement(eoe,null,function(s){return ce.createElement(jde,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var l9=function(t){return function(r){return t===r}},Cde=l9("scroll"),Ade=l9("auto"),pk=function(t,r){return r(t.overflowX)||r(t.overflowY)},Ede=function(t){var r=window.getComputedStyle(t),s={overflowX:r.overflowX,overflowY:r.overflowY};return pk(s,Cde)||pk(s,Ade)},Pde=function(){return!1},Tde=function e(t){return t==null?null:t===document.body?Pde()?t:null:t===document.documentElement?null:Ede(t)?t:e(t.parentElement)},hC=function(e){return{x:e.scrollLeft,y:e.scrollTop}},_de=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},Ide=function(e){var t=Tde(e),r=_de(e);return{closestScrollable:t,isFixedOnPage:r}},kde=function(e){var t=e.descriptor,r=e.isEnabled,s=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,l=e.page,c=e.closest,d=function(){if(!c)return null;var m=c.scrollSize,v=c.client,g=GB({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:m,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:g,diff:{value:hs,displacement:hs}}}}(),f=i==="vertical"?KE:EB,u=Uh({page:l,withPlaceholder:null,axis:f,frame:d}),h={descriptor:t,isCombineEnabled:s,isFixedOnPage:a,axis:f,isEnabled:r,client:o,page:l,frame:d,subject:u};return h},Dde=function(t,r){var s=gB(t);if(!r||t!==r)return s;var a=s.paddingBox.top-r.scrollTop,i=s.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,l=i+r.scrollWidth,c={top:a,right:l,bottom:o,left:i},d=VE(c,s.border),f=qE({borderBox:d,margin:s.margin,border:s.border,padding:s.padding});return f},Ode=function(e){var t=e.ref,r=e.descriptor,s=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,d=s.closestScrollable,f=Dde(t,d),u=kb(f,a),h=function(){if(!d)return null;var v=gB(d),g={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:v,page:kb(v,a),scroll:hC(d),scrollSize:g,shouldClipSubject:c}}(),m=kde({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:s.isFixedOnPage,direction:i,client:f,page:u,closest:h});return m},Lde={passive:!1},Rde={passive:!0},vk=function(e){return e.shouldPublishImmediately?Lde:Rde};function Fb(e){var t=w.useContext(e);return t||ot(!1),t}var J0=function(t){return t&&t.env.closestScrollable||null};function $de(e){var t=w.useRef(null),r=Fb(Uj),s=lP("droppable"),a=r.registry,i=r.marshal,o=t9(e),l=vr(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=w.useRef(l),d=vr(function(){return us(function(j,E){t.current||ot(!1);var C={x:j,y:E};i.updateDroppableScroll(l.id,C)})},[l.id,i]),f=Et(function(){var j=t.current;return!j||!j.env.closestScrollable?hs:hC(j.env.closestScrollable)},[]),u=Et(function(){var j=f();d(j.x,j.y)},[f,d]),h=vr(function(){return ag(u)},[u]),m=Et(function(){var j=t.current,E=J0(j);j&&E||ot(!1);var C=j.scrollOptions;if(C.shouldPublishImmediately){u();return}h()},[h,u]),v=Et(function(j,E){t.current&&ot(!1);var C=o.current,S=C.getDroppableRef();S||ot(!1);var N=Ide(S),_={ref:S,descriptor:l,env:N,scrollOptions:E};t.current=_;var I=Ode({ref:S,descriptor:l,env:N,windowScroll:j,direction:C.direction,isDropDisabled:C.isDropDisabled,isCombineEnabled:C.isCombineEnabled,shouldClipSubject:!C.ignoreContainerClipping}),T=N.closestScrollable;return T&&(T.setAttribute(uk.contextId,r.contextId),T.addEventListener("scroll",m,vk(_.scrollOptions))),I},[r.contextId,l,m,o]),g=Et(function(){var j=t.current,E=J0(j);return j&&E||ot(!1),hC(E)},[]),p=Et(function(){var j=t.current;j||ot(!1);var E=J0(j);t.current=null,E&&(h.cancel(),E.removeAttribute(uk.contextId),E.removeEventListener("scroll",m,vk(j.scrollOptions)))},[m,h]),x=Et(function(j){var E=t.current;E||ot(!1);var C=J0(E);C||ot(!1),C.scrollTop+=j.y,C.scrollLeft+=j.x},[]),b=vr(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:g,dragStopped:p,scroll:x}},[p,v,g,x]),y=vr(function(){return{uniqueId:s,descriptor:l,callbacks:b}},[b,l,s]);Ha(function(){return c.current=y.descriptor,a.droppable.register(y),function(){t.current&&p(),a.droppable.unregister(y)}},[b,l,p,y,i,a.droppable]),Ha(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Ha(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function FN(){}var gk={width:0,height:0,margin:ioe},Fde=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,a=t.animate;return r||a==="close"?gk:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},Mde=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,a=t.animate,i=Fde({isAnimatingOpenOnMount:r,placeholder:s,animate:a});return{display:s.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?xv.placeholder:null}};function Bde(e){var t=w.useRef(null),r=Et(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),s=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,l=w.useState(e.animate==="open"),c=l[0],d=l[1];w.useEffect(function(){return c?s!=="open"?(r(),d(!1),FN):t.current?FN:(t.current=setTimeout(function(){t.current=null,d(!1)}),r):FN},[s,c,r]);var f=Et(function(h){h.propertyName==="height"&&(a(),s==="close"&&i())},[s,i,a]),u=Mde({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return ce.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":o,onTransitionEnd:f,ref:e.innerRef})}var zde=ce.memo(Bde),dP=ce.createContext(null),Ude=function(e){X8(t,e);function t(){for(var s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s=e.call.apply(e,[this].concat(i))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(ce.PureComponent),xk={dragging:5e3,dropAnimating:4500},Vde=function(t,r){return r?xv.drop(r.duration):t?xv.snap:xv.fluid},qde=function(t,r){return t?r?cg.opacity.drop:cg.opacity.combining:null},Wde=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Hde(e){var t=e.dimension,r=t.client,s=e.offset,a=e.combineWith,i=e.dropping,o=!!a,l=Wde(e),c=!!i,d=c?dC.drop(s,o):dC.moveTo(s),f={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Vde(l,i),transform:d,opacity:qde(o,c),zIndex:c?xk.dropAnimating:xk.dragging,pointerEvents:"none"};return f}function Gde(e){return{transform:dC.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Kde(e){return e.type==="DRAGGING"?Hde(e):Gde(e)}function Yde(e,t,r){r===void 0&&(r=hs);var s=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=vB(a,s),o=kb(i,r),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height},d={descriptor:e,placeholder:l,displaceBy:c,client:i,page:o};return d}function Xde(e){var t=lP("draggable"),r=e.descriptor,s=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=vr(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}},[i,l,o]),d=Et(function(m){var v=a();return v||ot(!1),Yde(r,v,m)},[r,a]),f=vr(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:d}},[r,d,c,t]),u=w.useRef(f),h=w.useRef(!0);Ha(function(){return s.draggable.register(u.current),function(){return s.draggable.unregister(u.current)}},[s.draggable]),Ha(function(){if(h.current){h.current=!1;return}var m=u.current;u.current=f,s.draggable.update(f,m)},[f,s.draggable])}function Qde(e){e.preventDefault()}function Jde(e){var t=w.useRef(null),r=Et(function(_){t.current=_},[]),s=Et(function(){return t.current},[]),a=Fb(Uj),i=a.contextId,o=a.dragHandleUsageInstructionsId,l=a.registry,c=Fb(dP),d=c.type,f=c.droppableId,u=vr(function(){return{id:e.draggableId,index:e.index,type:d,droppableId:f}},[e.draggableId,e.index,d,f]),h=e.children,m=e.draggableId,v=e.isEnabled,g=e.shouldRespectForcePress,p=e.canDragInteractiveElements,x=e.isClone,b=e.mapped,y=e.dropAnimationFinished;if(!x){var j=vr(function(){return{descriptor:u,registry:l,getDraggableRef:s,canDragInteractiveElements:p,shouldRespectForcePress:g,isEnabled:v}},[u,l,s,p,g,v]);Xde(j)}var E=vr(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:Qde}:null},[i,o,m,v]),C=Et(function(_){b.type==="DRAGGING"&&b.dropping&&_.propertyName==="transform"&&y()},[y,b]),S=vr(function(){var _=Kde(b),I=b.type==="DRAGGING"&&b.dropping?C:null,T={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":m,style:_,onTransitionEnd:I},dragHandleProps:E};return T},[i,E,m,b,C,r]),N=vr(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return h(S,b.snapshot,N)}var c9=function(e,t){return e===t},d9=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},Zde=function(t){return t.combine?t.combine.draggableId:null},eue=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function tue(){var e=us(function(a,i){return{x:a,y:i}}),t=us(function(a,i,o,l,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=us(function(a,i,o,l,c,d,f){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:i,offset:a,dimension:o,forceShouldAnimate:f,snapshot:t(i,l,c,d,null)}}}),s=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],d=Wa(i.impact),f=eue(i.impact),u=i.forceShouldAnimate;return r(e(l.x,l.y),i.movementMode,c,o.isClone,d,f,u)}if(i.phase==="DROP_ANIMATING"){var h=i.completed;if(h.result.draggableId!==o.draggableId)return null;var m=o.isClone,v=i.dimensions.draggables[o.draggableId],g=h.result,p=g.mode,x=d9(g),b=Zde(g),y=i.dropDuration,j={duration:y,curve:tP.drop,moveTo:i.newHomeClientOffset,opacity:b?cg.opacity.drop:null,scale:b?cg.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:v,dropping:j,draggingOver:x,combineWith:b,mode:p,forceShouldAnimate:null,snapshot:t(p,m,x,b,j)}}}return null};return s}function u9(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var rue={mapped:{type:"SECONDARY",offset:hs,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:u9(null)}};function nue(){var e=us(function(o,l){return{x:o,y:l}}),t=us(u9),r=us(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),s=function(l){return l?r(hs,l,!0):null},a=function(l,c,d,f){var u=d.displaced.visible[l],h=!!(f.inVirtualList&&f.effected[l]),m=Fj(d),v=m&&m.draggableId===l?c:null;if(!u){if(!h)return s(v);if(d.displaced.invisible[l])return null;var g=_m(f.displacedBy.point),p=e(g.x,g.y);return r(p,v,!0)}if(h)return s(v);var x=d.displacedBy.point,b=e(x.x,x.y);return r(b,v,u.shouldAnimate)},i=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:a(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var d=l.completed;return d.result.draggableId===c.draggableId?null:a(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return i}var sue=function(){var t=tue(),r=nue(),s=function(i,o){return t(i,o)||r(i,o)||rue};return s},aue={dropAnimationFinished:qB},iue=mB(sue,aue,null,{context:oP,pure:!0,areStatePropsEqual:c9})(Jde);function f9(e){var t=Fb(dP),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:ce.createElement(iue,e)}function oue(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ce.createElement(f9,st({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}function lue(e){var t=w.useContext(Uj);t||ot(!1);var r=t.contextId,s=t.isMovementAllowed,a=w.useRef(null),i=w.useRef(null),o=e.children,l=e.droppableId,c=e.type,d=e.mode,f=e.direction,u=e.ignoreContainerClipping,h=e.isDropDisabled,m=e.isCombineEnabled,v=e.snapshot,g=e.useClone,p=e.updateViewportMaxScroll,x=e.getContainerForClone,b=Et(function(){return a.current},[]),y=Et(function(T){a.current=T},[]);Et(function(){return i.current},[]);var j=Et(function(T){i.current=T},[]),E=Et(function(){s()&&p({maxScroll:YB()})},[s,p]);$de({droppableId:l,type:c,mode:d,direction:f,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:u,getDroppableRef:b});var C=ce.createElement(Ude,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(T){var A=T.onClose,O=T.data,D=T.animate;return ce.createElement(zde,{placeholder:O,onClose:A,innerRef:j,animate:D,contextId:r,onTransitionEnd:E})}),S=vr(function(){return{innerRef:y,placeholder:C,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,C,y]),N=g?g.dragging.draggableId:null,_=vr(function(){return{droppableId:l,type:c,isUsingCloneFor:N}},[l,N,c]);function I(){if(!g)return null;var T=g.dragging,A=g.render,O=ce.createElement(f9,{draggableId:T.draggableId,index:T.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(D,$){return A(D,$,T)});return eE.createPortal(O,x())}return ce.createElement(dP.Provider,{value:_},o(S,v),I())}var MN=function(t,r){return t===r.droppable.type},yk=function(t,r){return r.draggables[t.draggable.id]},cue=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=st({},t,{shouldAnimatePlaceholder:!1}),s=us(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=us(function(o,l,c,d,f,u){var h=f.descriptor.id,m=f.descriptor.droppableId===o;if(m){var v=u?{render:u,dragging:s(f.descriptor)}:null,g={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:v}}if(!l)return r;if(!d)return t;var p={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}),i=function(l,c){var d=c.droppableId,f=c.type,u=!c.isDropDisabled,h=c.renderClone;if(l.isDragging){var m=l.critical;if(!MN(f,m))return r;var v=yk(m,l.dimensions),g=Wa(l.impact)===d;return a(d,u,g,g,v,h)}if(l.phase==="DROP_ANIMATING"){var p=l.completed;if(!MN(f,p.critical))return r;var x=yk(p.critical,l.dimensions);return a(d,u,d9(p.result)===d,Wa(p.impact)===d,x,h)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var b=l.completed;if(!MN(f,b.critical))return r;var y=Wa(b.impact)===d,j=!!(b.impact.at&&b.impact.at.type==="COMBINE"),E=b.critical.droppable.id===d;return y?j?t:r:E?t:r}return r};return i},due={updateViewportMaxScroll:xle};function uue(){return document.body||ot(!1),document.body}var fue={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:uue},h9=mB(cue,due,null,{context:oP,pure:!0,areStatePropsEqual:c9})(lue);h9.defaultProps=fue;const bk=[{stage:yt.PROSPECTING,name:"Prospecting",color:"bg-blue-500"},{stage:yt.QUALIFICATION,name:"Qualification",color:"bg-yellow-500"},{stage:yt.NEEDS_ANALYSIS,name:"Needs Analysis",color:"bg-orange-500"},{stage:yt.PROPOSAL,name:"Proposal",color:"bg-purple-500"},{stage:yt.NEGOTIATION,name:"Negotiation",color:"bg-indigo-500"},{stage:yt.CLOSED_WON,name:"Closed Won",color:"bg-green-500"},{stage:yt.CLOSED_LOST,name:"Closed Lost",color:"bg-red-500"}];function hue({deals:e,onDealStageChange:t,onDealClick:r}){const[s,a]=w.useState(null),i=m=>{switch(m){case Pr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Pr.WON:return"bg-green-50 text-green-700 border-green-200";case Pr.LOST:return"bg-red-50 text-red-700 border-red-200";case Pr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Pr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=m=>{switch(m){case"critical":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},l=m=>new Date(m.expectedCloseDate)<new Date&&m.status===Pr.ACTIVE,c=m=>{if(a(null),!m.destination||m.source.droppableId===m.destination.droppableId)return;const v=m.draggableId,g=m.destination.droppableId;t(v,g)},d=m=>{a(m.draggableId)},f=m=>e.filter(v=>v.stage===m),u=m=>f(m).reduce((v,g)=>v+g.value,0),h=m=>f(m).reduce((v,g)=>v+g.value*g.probability/100,0);return n.jsxs("div",{className:"space-y-6 pb-10",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:bk.map(m=>{const v=f(m.stage),g=u(m.stage),p=h(m.stage);return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:He("w-3 h-3 rounded-full",m.color)}),n.jsx("span",{className:"text-xs text-muted-foreground",children:v.length})]}),n.jsx(je,{className:"text-sm font-medium",children:m.name})]}),n.jsx(fe,{className:"pt-0",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-lg font-bold",children:_e(g)}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Weighted: ",_e(p)]})]})})]},m.stage)})}),n.jsx(Sde,{onDragEnd:c,onDragStart:d,children:n.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-7 min-h-[600px]",children:bk.map(m=>n.jsx(h9,{droppableId:m.stage,children:(v,g)=>n.jsxs("div",{ref:v.innerRef,...v.droppableProps,className:He("space-y-3 p-3 rounded-lg border-2 border-dashed transition-colors min-h-[200px]",g.isDraggingOver?"border-primary bg-primary/5":"border-muted"),children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx("div",{className:He("w-3 h-3 rounded-full",m.color)}),n.jsx("h3",{className:"font-semibold text-sm",children:m.name})]}),f(m.stage).map((p,x)=>n.jsx(oue,{draggableId:p.id,index:x,children:(b,y)=>n.jsx(ue,{ref:b.innerRef,...b.draggableProps,...b.dragHandleProps,className:He("cursor-pointer transition-all hover:shadow-md",y.isDragging&&"rotate-3 shadow-lg",s===p.id&&"opacity-50"),onClick:()=>r(p),children:n.jsx(fe,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm line-clamp-2",children:p.name}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:p.customerName})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-bold text-primary",children:_e(p.value)}),n.jsx(Re,{className:He("ri-badge-status text-xs",o(p.priority)),children:p.priority.toUpperCase()})]}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(_t,{className:"h-3 w-3"}),n.jsxs("span",{children:[p.probability,"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Lr,{className:"h-3 w-3 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:new Date(p.expectedCloseDate).toLocaleDateString()})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Re,{className:He("ri-badge-status text-xs",i(p.status)),children:p.status.toUpperCase()}),l(p)&&n.jsxs("div",{className:"flex items-center space-x-1 text-red-500",children:[n.jsx(yh,{className:"h-3 w-3 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:"Overdue"})]})]})]})})},p.id)},p.id)),v.placeholder]})},m.stage))})})]})}function mue({metrics:e}){const t=r=>r>=80?"text-green-600":r>=60?"text-yellow-600":"text-red-600";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),n.jsx(It,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:_e(e.totalValue)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(zn,{className:"h-3 w-3 mr-1"}),e.totalDeals," active deals"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),n.jsx(_t,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:_e(e.wonValue)}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Na,{className:"h-3 w-3 mr-1"}),e.wonDeals," deals closed"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Win Rate"}),n.jsx(Na,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[e.winRate.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Industry average: 27%"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Avg Deal Size"}),n.jsx(It,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:_e(e.averageDealSize)}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(sr,{className:"h-3 w-3 mr-1"}),e.averageSalesCycle.toFixed(0)," day cycle"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Stage Conversion Rates"}),n.jsx(Fe,{children:"Conversion rates and average time spent in each stage"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-6",children:e.conversionRates.map((r,s)=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm font-medium capitalize",children:[r.fromStage.replace("_"," ")," → ",r.toStage.replace("_"," ")]}),n.jsxs("span",{className:`text-sm font-bold ${t(r.rate)}`,children:[r.rate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[n.jsx(sr,{className:"h-3 w-3"}),n.jsxs("span",{children:[r.averageDuration,"h avg"]})]})]}),n.jsx(bu,{value:r.rate,className:"h-2"})]},`${r.fromStage}-${r.toStage}`))})})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Pipeline Health"}),n.jsx(Fe,{children:"Key performance indicators"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(_t,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Win Rate"})]}),n.jsxs("span",{className:"text-lg font-bold text-green-600",children:[e.winRate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(It,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Average Deal Size"})]}),n.jsx("span",{className:"text-lg font-bold text-blue-600",children:_e(e.averageDealSize)})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sr,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Sales Cycle"})]}),n.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[e.averageSalesCycle.toFixed(0)," days"]})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Deal Breakdown"}),n.jsx(Fe,{children:"Current pipeline composition"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Deals"}),n.jsx("span",{className:"font-bold",children:e.totalDeals})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Won Deals"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-bold text-green-600",children:e.wonDeals}),n.jsxs("span",{className:"text-xs text-green-600",children:["(",_e(e.wonValue),")"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Lost Deals"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-bold text-red-600",children:e.lostDeals}),n.jsxs("span",{className:"text-xs text-red-600",children:["(",_e(e.lostValue),")"]})]})]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Active Pipeline"}),n.jsx("span",{className:"font-bold text-primary",children:_e(e.totalValue-e.wonValue-e.lostValue)})]})})]})})]})]})]})}const pue=["Best Price","Superior Product Features","Excellent Service","Strong Relationship","Competitive Financing","Quick Delivery","Brand Reputation","Referral/Recommendation"],vue=["Price Too High","Lost to Competitor","Budget Constraints","Timing Issues","Product Limitations","Service Concerns","Decision Delayed","Requirements Changed"],gue=["Camping World","Lazydays","General RV","PPL Motor Homes","Local Dealer","Private Seller","Other"];function xue({deals:e,winLossReports:t,onCreateReport:r}){const[s,a]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}),d=e.filter(C=>C.status==="won"||C.status==="lost"),f=e.filter(C=>C.status==="won"),u=e.filter(C=>C.status==="lost"),h=d.length>0?f.length/d.length*100:0,m=f.length>0?f.reduce((C,S)=>C+S.value,0)/f.length:0,v=u.length>0?u.reduce((C,S)=>C+S.value,0)/u.length:0,g=C=>{o(C),c({...l,outcome:C.status==="won"?"won":"lost"}),a(!0)},p=()=>{i&&(r(i.id,l.outcome,l),a(!1),o(null),c({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}))},x=(C,S,N)=>{S.trim()&&!C.includes(S.trim())&&N([...C,S.trim()])},b=(C,S,N)=>{N(C.filter((_,I)=>I!==S))},y=C=>{const S=t.filter(_=>_.outcome===C),N={};return S.forEach(_=>{N[_.primaryReason]=(N[_.primaryReason]||0)+1}),Object.entries(N).sort(([,_],[,I])=>I-_).slice(0,5).map(([_,I])=>({reason:_,count:I,percentage:S.length>0?I/S.length*100:0}))},j=y("won"),E=y("lost");return n.jsxs("div",{className:"space-y-6",children:[s&&i&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Win/Loss Report"}),n.jsxs(Fe,{children:[i.name," - ",_e(i.value)]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>a(!1),children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Outcome"}),n.jsxs(Ve,{value:l.outcome,onValueChange:C=>c(S=>({...S,outcome:C})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"won",children:"Won"}),n.jsx(K,{value:"lost",children:"Lost"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Primary Reason"}),n.jsxs(Ve,{value:l.primaryReason,onValueChange:C=>c(S=>({...S,primaryReason:C})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select primary reason"})}),n.jsx(Ue,{children:(l.outcome==="won"?pue:vue).map(C=>n.jsx(K,{value:C,children:C},C))})]})]}),l.outcome==="lost"&&n.jsxs("div",{children:[n.jsx(ae,{children:"Competitor Won"}),n.jsxs(Ve,{value:l.competitorWon,onValueChange:C=>c(S=>({...S,competitorWon:C})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select competitor"})}),n.jsx(Ue,{children:gue.map(C=>n.jsx(K,{value:C,children:C},C))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Customer Feedback"}),n.jsx(tr,{value:l.feedback,onChange:C=>c(S=>({...S,feedback:C.target.value})),placeholder:"What did the customer say about their decision?",rows:3})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Lessons Learned"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{placeholder:"Add a lesson learned",onKeyDown:C=>{if(C.key==="Enter"){C.preventDefault();const S=C.currentTarget;x(l.lessonsLearned,S.value,N=>c(_=>({..._,lessonsLearned:N}))),S.value=""}}}),n.jsx(J,{type:"button",variant:"outline",onClick:C=>{const S=C.currentTarget.previousElementSibling;x(l.lessonsLearned,S.value,N=>c(_=>({..._,lessonsLearned:N}))),S.value=""},children:n.jsx(Nt,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:l.lessonsLearned.map((C,S)=>n.jsxs(Re,{variant:"secondary",className:"flex items-center gap-1",children:[C,n.jsx(Bt,{className:"h-3 w-3 cursor-pointer",onClick:()=>b(l.lessonsLearned,S,N=>c(_=>({..._,lessonsLearned:N})))})]},S))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Action Items"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{placeholder:"Add an action item",onKeyDown:C=>{if(C.key==="Enter"){C.preventDefault();const S=C.currentTarget;x(l.actionItems,S.value,N=>c(_=>({..._,actionItems:N}))),S.value=""}}}),n.jsx(J,{type:"button",variant:"outline",onClick:C=>{const S=C.currentTarget.previousElementSibling;x(l.actionItems,S.value,N=>c(_=>({..._,actionItems:N}))),S.value=""},children:n.jsx(Nt,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:l.actionItems.map((C,S)=>n.jsxs(Re,{variant:"secondary",className:"flex items-center gap-1",children:[C,n.jsx(Bt,{className:"h-3 w-3 cursor-pointer",onClick:()=>b(l.actionItems,S,N=>c(_=>({..._,actionItems:N})))})]},S))})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsxs(J,{onClick:p,children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Report"]})]})]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Win Rate"}),n.jsx(Na,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[h.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(zn,{className:"h-3 w-3 mr-1"}),d.length," closed deals"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),n.jsx(_t,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:f.length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),_e(m)," avg"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-red-900",children:"Lost Deals"}),n.jsx(bh,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:u.length}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[n.jsx(bh,{className:"h-3 w-3 mr-1"}),_e(v)," avg"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Reports"}),n.jsx(zn,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:t.length}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(zn,{className:"h-3 w-3 mr-1"}),"Completed reports"]})]})]})]}),n.jsxs(xr,{defaultValue:"analysis",className:"space-y-6",children:[n.jsxs(hr,{children:[n.jsx(Qe,{value:"analysis",children:"Analysis"}),n.jsx(Qe,{value:"closed-deals",children:"Closed Deals"}),n.jsx(Qe,{value:"reports",children:"Reports"})]}),n.jsxs(et,{value:"analysis",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(_t,{className:"h-5 w-5 mr-2 text-green-500"}),"Win Reasons"]}),n.jsx(Fe,{children:"Top reasons for winning deals"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:j.length>0?j.map((C,S)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:C.reason}),n.jsxs("span",{className:"text-sm text-green-600",children:[C.percentage.toFixed(0),"%"]})]}),n.jsx(bu,{value:C.percentage,className:"h-2"})]},S)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win reports available"})})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(bh,{className:"h-5 w-5 mr-2 text-red-500"}),"Loss Reasons"]}),n.jsx(Fe,{children:"Top reasons for losing deals"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:E.length>0?E.map((C,S)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:C.reason}),n.jsxs("span",{className:"text-sm text-red-600",children:[C.percentage.toFixed(0),"%"]})]}),n.jsx(bu,{value:C.percentage,className:"h-2"})]},S)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No loss reports available"})})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Lessons Learned"}),n.jsx(Fe,{children:"Key insights from win/loss reports"})]}),n.jsx(fe,{children:t.length>0?n.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((C,S)=>n.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[C.outcome==="won"?n.jsx(Re,{className:"bg-green-50 text-green-700 border-green-200",children:"WON"}):n.jsx(Re,{className:"bg-red-50 text-red-700 border-red-200",children:"LOST"}),n.jsx("span",{className:"text-sm font-medium",children:C.primaryReason})]}),n.jsx("div",{className:"space-y-2",children:C.lessonsLearned.map((N,_)=>n.jsxs("p",{className:"text-sm text-muted-foreground",children:["• ",N]},_))})]},S))}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No lessons learned available"})})]})]}),n.jsx(et,{value:"closed-deals",className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Recently Closed Deals"}),n.jsx(Fe,{children:"Deals that have been won or lost"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:d.length>0?d.map(C=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold",children:C.name}),n.jsx(Re,{className:C.status==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:C.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",C.customerName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Value:"})," ",_e(C.value)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Closed:"})," ",C.actualCloseDate?ct(C.actualCloseDate):"N/A"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Rep:"})," ",C.assignedTo]})]})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g(C),className:"shadow-sm",children:[n.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Report"]})]},C.id)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No closed deals available"})})})]})}),n.jsx(et,{value:"reports",className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Win/Loss Reports"}),n.jsx(Fe,{children:"Detailed reports on won and lost deals"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:t.length>0?t.map(C=>{const S=e.find(N=>N.id===C.dealId);return n.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Re,{className:C.outcome==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:C.outcome.toUpperCase()}),n.jsx("h3",{className:"font-semibold",children:(S==null?void 0:S.name)||"Unknown Deal"})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:ct(C.reportedAt)})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Reasons"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Primary:"})," ",C.primaryReason]}),C.secondaryReasons.length>0&&n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Secondary:"})," ",C.secondaryReasons.join(", ")]}),C.competitorWon&&n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Competitor:"})," ",C.competitorWon]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Feedback"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:C.feedback})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t",children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Lessons & Action Items"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Lessons Learned:"}),n.jsx("ul",{className:"text-sm space-y-1",children:C.lessonsLearned.map((N,_)=>n.jsxs("li",{children:["• ",N]},_))})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Action Items:"}),n.jsx("ul",{className:"text-sm space-y-1",children:C.actionItems.map((N,_)=>n.jsxs("li",{children:["• ",N]},_))})]})]})]})]},C.id)}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win/loss reports available"})})})]})})]})]})}function yue({deal:e,onClose:t,onEdit:r}){const s=l=>{switch(l){case Pr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Pr.WON:return"bg-green-50 text-green-700 border-green-200";case Pr.LOST:return"bg-red-50 text-red-700 border-red-200";case Pr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Pr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=l=>{switch(l){case Fo.CRITICAL:return"bg-red-50 text-red-700 border-red-200";case Fo.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Fo.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Fo.LOW:return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=l=>{switch(l){case yt.PROSPECTING:return"bg-blue-50 text-blue-700 border-blue-200";case yt.QUALIFICATION:return"bg-yellow-50 text-yellow-700 border-yellow-200";case yt.NEEDS_ANALYSIS:return"bg-orange-50 text-orange-700 border-orange-200";case yt.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case yt.NEGOTIATION:return"bg-indigo-50 text-indigo-700 border-indigo-200";case yt.CLOSED_WON:return"bg-green-50 text-green-700 border-green-200";case yt.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=l=>new Date(l.expectedCloseDate)<new Date&&l.status===Pr.ACTIVE;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:e.name}),n.jsx(Fe,{children:"Deal details and information"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>r(e),size:"sm",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Deal"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Re,{className:He("ri-badge-status",s(e.status)),children:e.status.toUpperCase()}),n.jsx(Re,{className:He("ri-badge-status",i(e.stage)),children:e.stage.replace("_"," ").toUpperCase()}),n.jsx(Re,{className:He("ri-badge-status",a(e.priority)),children:e.priority.toUpperCase()}),o(e)&&n.jsxs(Re,{className:"bg-red-50 text-red-700 border-red-200",children:[n.jsx(ro,{className:"h-3 w-3 mr-1"}),"OVERDUE"]}),e.requiresApproval&&n.jsx(Re,{className:"bg-orange-50 text-orange-700 border-orange-200",children:"REQUIRES APPROVAL"})]}),n.jsxs(xr,{defaultValue:"overview",className:"space-y-4",children:[n.jsxs(hr,{children:[n.jsx(Qe,{value:"overview",children:"Overview"}),n.jsx(Qe,{value:"products",children:"Products"}),n.jsx(Qe,{value:"history",children:"History"})]}),n.jsxs(et,{value:"overview",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:e.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Value"}),n.jsx("p",{className:"font-bold text-primary text-lg",children:_e(e.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Probability"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Na,{className:"h-4 w-4 text-blue-500"}),n.jsxs("p",{className:"font-medium",children:[e.probability,"%"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expected Close"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Lr,{className:"h-4 w-4 text-purple-500"}),n.jsx("p",{className:"font-medium",children:ct(e.expectedCloseDate)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(fs,{className:"h-4 w-4 text-green-500"}),n.jsx("p",{className:"font-medium",children:e.assignedTo||"Unassigned"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Territory"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Hl,{className:"h-4 w-4 text-orange-500"}),n.jsx("p",{className:"font-medium",children:e.territoryId||"No Territory"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sr,{className:"h-4 w-4 text-blue-500"}),n.jsx("p",{className:"font-medium",children:ct(e.createdAt)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sr,{className:"h-4 w-4 text-blue-500"}),n.jsx("p",{className:"font-medium",children:ct(e.updatedAt)})]})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.notes})})]}),Object.keys(e.customFields||{}).length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custom Fields"}),n.jsx("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:Object.entries(e.customFields||{}).map(([l,c])=>n.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[n.jsxs("span",{className:"text-sm font-medium capitalize",children:[l.replace(/([A-Z])/g," $1").trim(),": "]}),n.jsx("span",{className:"text-sm",children:c==null?void 0:c.toString()})]},l))})]})]}),n.jsxs(et,{value:"products",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Products & Services"}),e.products&&e.products.length>0?n.jsxs("div",{className:"space-y-3",children:[e.products.map(l=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ws,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"font-medium",children:l.productName})]}),n.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Quantity: ",l.quantity]}),n.jsxs("span",{children:["Unit Price: ",_e(l.unitPrice)]}),l.discount>0&&n.jsxs("span",{className:"text-green-600",children:["Discount: ",_e(l.discount)]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold",children:_e(l.total)})})]},l.id)),n.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),n.jsx("span",{className:"text-lg font-bold text-primary",children:_e(e.value)})]})})]}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ws,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No products added to this deal"}),n.jsx("p",{className:"text-sm",children:"Edit the deal to add products"})]})]}),n.jsxs(et,{value:"history",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Stage History"}),e.stageHistory&&e.stageHistory.length>0?n.jsx("div",{className:"space-y-3",children:e.stageHistory.map((l,c)=>n.jsxs("div",{className:"relative",children:[c<e.stageHistory.length-1&&n.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground",children:c+1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium capitalize",children:l.fromStage?`${l.fromStage.replace("_"," ")} → ${l.toStage.replace("_"," ")}`:`Started at ${l.toStage.replace("_"," ")}`}),n.jsx("span",{className:"text-xs text-muted-foreground",children:ct(l.changedAt)})]}),l.duration!==void 0&&n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Duration: ",l.duration," hours"]}),l.notes&&n.jsx("div",{className:"mt-1 text-sm bg-muted/30 p-2 rounded-md",children:l.notes})]})]})]},c))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(sr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No stage history available"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Close"}),n.jsxs(J,{onClick:()=>r(e),children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Deal"]})]})]})]})})}function bue({territories:e,salesReps:t,deals:r,onCreateTerritory:s,onUpdateTerritory:a,onDeleteTerritory:i}){var C,S,N;const[o,l]=w.useState(!1),[c,d]=w.useState(null),[f,u]=w.useState({name:"",type:Sc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),[h,m]=w.useState({field:"",operator:"equals",value:"",priority:1}),v=()=>{d(null),u({name:"",type:Sc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),l(!0)},g=_=>{d(_),u({name:_.name,type:_.type,description:_.description,assignedTo:[..._.assignedTo],rules:[..._.rules],isActive:_.isActive}),l(!0)},p=()=>{f.name&&(c?a(c.id,f):s(f),l(!1),d(null),u({name:"",type:Sc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}))},x=()=>{if(!h.field||!h.operator)return;const _={id:Math.random().toString(36).substr(2,9),field:h.field,operator:h.operator,value:h.value,priority:h.priority||1};u(I=>({...I,rules:[...I.rules||[],_]})),m({field:"",operator:"equals",value:"",priority:1})},b=_=>{u(I=>{var T;return{...I,rules:((T=I.rules)==null?void 0:T.filter(A=>A.id!==_))||[]}})},y=(_,I)=>{u(I?T=>({...T,assignedTo:[...T.assignedTo||[],_]}):T=>{var A;return{...T,assignedTo:((A=T.assignedTo)==null?void 0:A.filter(O=>O!==_))||[]}})},j=_=>r.filter(T=>T.territoryId===_).length,E=_=>{const I=e.find(T=>T.id===_);return I?t.filter(T=>I.assignedTo.includes(T.id)):[]};return n.jsxs("div",{className:"space-y-6",children:[o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:c?"Edit Territory":"Create Territory"}),n.jsx(Fe,{children:c?"Update territory details and rules":"Define a new sales territory"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>l(!1),children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Territory Name *"}),n.jsx(Pe,{id:"name",value:f.name,onChange:_=>u(I=>({...I,name:_.target.value})),placeholder:"e.g., North Region"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Territory Type"}),n.jsxs(Ve,{value:f.type,onValueChange:_=>u(I=>({...I,type:_})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Sc.GEOGRAPHIC,children:"Geographic"}),n.jsx(K,{value:Sc.INDUSTRY,children:"Industry"}),n.jsx(K,{value:Sc.ACCOUNT_SIZE,children:"Account Size"}),n.jsx(K,{value:Sc.PRODUCT_LINE,children:"Product Line"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"description",children:"Description"}),n.jsx(tr,{id:"description",value:f.description,onChange:_=>u(I=>({...I,description:_.target.value})),placeholder:"Describe the territory",rows:3})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx(ae,{children:"Territory Rules"})}),n.jsxs("div",{className:"space-y-4",children:[(C=f.rules)==null?void 0:C.map(_=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:_.field}),n.jsx("span",{className:"text-muted-foreground",children:_.operator}),n.jsx("span",{children:_.value.toString()})]}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Priority: ",_.priority]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>b(_.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]},_.id)),n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Field"}),n.jsxs(Ve,{value:h.field,onValueChange:_=>m(I=>({...I,field:_})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select field"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"state",children:"State"}),n.jsx(K,{value:"zipCode",children:"Zip Code"}),n.jsx(K,{value:"country",children:"Country"}),n.jsx(K,{value:"industry",children:"Industry"}),n.jsx(K,{value:"dealSize",children:"Deal Size"}),n.jsx(K,{value:"productType",children:"Product Type"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Operator"}),n.jsxs(Ve,{value:h.operator,onValueChange:_=>m(I=>({...I,operator:_})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"equals",children:"Equals"}),n.jsx(K,{value:"contains",children:"Contains"}),n.jsx(K,{value:"starts_with",children:"Starts With"}),n.jsx(K,{value:"in_range",children:"In Range"}),n.jsx(K,{value:"greater_than",children:"Greater Than"}),n.jsx(K,{value:"less_than",children:"Less Than"})]})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(ae,{children:"Value"}),n.jsx(Pe,{value:((S=h.value)==null?void 0:S.toString())||"",onChange:_=>m(I=>({...I,value:_.target.value})),placeholder:"Rule value"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"For multiple values, separate with commas"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(ae,{children:"Priority"}),n.jsxs(Ve,{value:((N=h.priority)==null?void 0:N.toString())||"1",onValueChange:_=>m(I=>({...I,priority:parseInt(_)})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"1",children:"1 - Highest"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"4",children:"4"}),n.jsx(K,{value:"5",children:"5 - Lowest"})]})]})]}),n.jsx("div",{className:"flex justify-end mt-4",children:n.jsxs(J,{onClick:x,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Rule"]})})]})})]})]}),n.jsxs("div",{children:[n.jsx(ae,{className:"mb-2 block",children:"Assign Sales Reps"}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-lg",children:t.map(_=>{var I;return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:`rep-${_.id}`,checked:(I=f.assignedTo)==null?void 0:I.includes(_.id),onCheckedChange:T=>y(_.id,!!T)}),n.jsx(ae,{htmlFor:`rep-${_.id}`,className:"text-sm cursor-pointer",children:_.name})]},_.id)})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isActive",checked:f.isActive,onCheckedChange:_=>u(I=>({...I,isActive:!!_}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active territory"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),n.jsxs(J,{onClick:p,children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),c?"Update":"Create"," Territory"]})]})]})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Territory Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Define and manage sales territories and assignment rules"})]}),n.jsxs(J,{onClick:v,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Territory"]})]}),n.jsxs("div",{className:"space-y-6",children:[e.map(_=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(je,{children:_.name}),n.jsx(Re,{className:_.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:_.isActive?"Active":"Inactive"}),n.jsx(Re,{variant:"outline",children:_.type.replace("_"," ")})]}),n.jsx(Fe,{className:"mt-1",children:_.description})]}),n.jsx("div",{className:"flex space-x-2",children:n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g(_),children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Rules"}),n.jsxs("div",{className:"space-y-2",children:[_.rules.map(I=>n.jsx("div",{className:"p-2 bg-muted/30 rounded-lg text-sm",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:I.field}),n.jsx("span",{className:"text-muted-foreground",children:I.operator}),n.jsx("span",{children:I.value.toString()})]})},I.id)),_.rules.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"No rules defined"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Assigned Sales Reps"}),n.jsxs("div",{className:"space-y-2",children:[E(_.id).map(I=>n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-lg",children:[n.jsx(Ln,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm",children:I.name})]},I.id)),_.assignedTo.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"No reps assigned"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Stats"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg",children:[n.jsx("span",{className:"text-sm text-blue-700",children:"Deals"}),n.jsx("span",{className:"font-bold text-blue-700",children:j(_.id)})]}),n.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg",children:[n.jsx("span",{className:"text-sm text-green-700",children:"Reps"}),n.jsx("span",{className:"font-bold text-green-700",children:_.assignedTo.length})]})]})]})]})})]},_.id)),e.length===0&&n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Hl,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Territories Defined"}),n.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create territories to organize your sales team and deals by region, industry, or other criteria."}),n.jsxs(J,{onClick:v,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create First Territory"]})]})})]})]})}function jue({deals:e,approvalWorkflows:t,onApprove:r,onReject:s,onEscalate:a}){var b;const[i,o]=w.useState("pending"),[l,c]=w.useState(null),[d,f]=w.useState(""),u=y=>{switch(y){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"escalated":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},h=y=>{switch(y){case"pending":return n.jsx(sr,{className:"h-4 w-4 text-yellow-500"});case"approved":return n.jsx(Xr,{className:"h-4 w-4 text-green-500"});case"rejected":return n.jsx(oo,{className:"h-4 w-4 text-red-500"});case"escalated":return n.jsx(ro,{className:"h-4 w-4 text-orange-500"});default:return n.jsx(sr,{className:"h-4 w-4 text-gray-500"})}},m=y=>t.filter(j=>j.status===y),v=y=>e.find(j=>j.id===y),g=()=>{if(!l)return;const y=l.steps.find(j=>j.stepNumber===l.currentStep);y&&(r(l.id,y.id,d),f(""),c(null))},p=()=>{if(!l)return;const y=l.steps.find(j=>j.stepNumber===l.currentStep);y&&(s(l.id,y.id,d),f(""),c(null))},x=()=>{if(!l)return;const y=l.steps.find(j=>j.stepNumber===l.currentStep);y&&(a(l.id,y.id,d),f(""),c(null))};return n.jsxs("div",{className:"space-y-6",children:[l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Approval Request"}),n.jsx(Fe,{children:((b=v(l.dealId))==null?void 0:b.name)||"Unknown Deal"})]}),n.jsx(Re,{className:He("ri-badge-status",u(l.status)),children:l.status.toUpperCase()})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:(()=>{const y=v(l.dealId);return y?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Customer:"}),n.jsx("p",{className:"text-sm",children:y.customerName})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-sm font-bold",children:_e(y.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Stage:"}),n.jsx("p",{className:"text-sm",children:y.stage.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Assigned To:"}),n.jsx("p",{className:"text-sm",children:y.assignedTo})]})]}):null})()})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Workflow Details"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Type:"}),n.jsx("p",{className:"text-sm",children:l.workflowType.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),n.jsx("p",{className:"text-sm",children:l.requestedBy})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:ct(l.requestedAt)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Current Step:"}),n.jsxs("p",{className:"text-sm",children:[l.currentStep," of ",l.totalSteps]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"comments",children:"Comments"}),n.jsx(tr,{id:"comments",value:d,onChange:y=>f(y.target.value),placeholder:"Add your comments here...",rows:3})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Approval Steps"}),n.jsx("div",{className:"space-y-4",children:l.steps.map((y,j)=>{const E=y.stepNumber===l.currentStep,C=y.stepNumber<l.currentStep;return n.jsxs("div",{className:He("p-3 rounded-lg border-2",E?"border-primary bg-primary/5":C?"border-muted bg-muted/10":"border-dashed border-muted"),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold",children:y.stepNumber}),n.jsx("span",{className:"font-medium",children:y.approverRole.replace("_"," ")})]}),n.jsxs(Re,{className:He("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Requires ",y.requiredApprovals," approval(s) from ",y.approverIds.length," approver(s)"]}),y.currentApprovals.length>0&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx("h4",{className:"text-xs font-medium",children:"Approvals:"}),y.currentApprovals.map((S,N)=>n.jsxs("div",{className:"flex items-start space-x-2 text-xs p-2 bg-muted/30 rounded",children:[S.action==="approve"?n.jsx(aX,{className:"h-3 w-3 text-green-500 mt-0.5"}):S.action==="reject"?n.jsx(sX,{className:"h-3 w-3 text-red-500 mt-0.5"}):n.jsx(ro,{className:"h-3 w-3 text-orange-500 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:S.approverId}),n.jsx("div",{className:"text-muted-foreground",children:ct(S.actionDate)}),S.comments&&n.jsx("div",{className:"mt-1 italic",children:S.comments})]})]},N))]})]},y.id)})})]}),l.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"comments",children:"Comments"}),n.jsx(tr,{id:"comments",value:d,onChange:y=>f(y.target.value),placeholder:"Add your comments here...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),n.jsxs(J,{variant:"outline",onClick:x,children:[n.jsx(ro,{className:"h-4 w-4 mr-2"}),"Escalate"]}),n.jsxs(J,{variant:"destructive",onClick:p,children:[n.jsx(oo,{className:"h-4 w-4 mr-2"}),"Reject"]}),n.jsxs(J,{variant:"default",onClick:g,children:[n.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]}),l.status!=="pending"&&n.jsx("div",{className:"flex justify-end pt-6 border-t",children:n.jsx(J,{variant:"outline",onClick:()=>c(null),children:"Close"})})]})]})}),n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Approval Workflows"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage approval requests for deals above threshold"})]})}),n.jsxs(xr,{value:i,onValueChange:o,className:"space-y-6",children:[n.jsxs(hr,{children:[n.jsxs(Qe,{value:"pending",children:["Pending",n.jsx(Re,{className:"ml-2 bg-yellow-50 text-yellow-700 border-yellow-200",children:m("pending").length})]}),n.jsxs(Qe,{value:"approved",children:["Approved",n.jsx(Re,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:m("approved").length})]}),n.jsxs(Qe,{value:"rejected",children:["Rejected",n.jsx(Re,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:m("rejected").length})]}),n.jsxs(Qe,{value:"escalated",children:["Escalated",n.jsx(Re,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",children:m("escalated").length})]})]}),n.jsx(et,{value:"pending",className:"space-y-4",children:m("pending").length>0?m("pending").map(y=>{const j=v(y.dealId);return j?n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(y),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:j.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),n.jsxs(Re,{className:He("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:_e(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),n.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[n.jsx(fs,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm",children:y.requestedBy})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:ct(y.requestedAt)})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"Approval Progress:"}),n.jsxs("span",{className:"text-sm",children:[y.currentStep," of ",y.totalSteps]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:y.steps.map((E,C)=>{const S=E.stepNumber<y.currentStep,N=E.stepNumber===y.currentStep;return n.jsxs(ce.Fragment,{children:[n.jsx("div",{className:He("flex items-center justify-center w-8 h-8 rounded-full",S?"bg-primary text-primary-foreground":N?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:E.stepNumber}),C<y.steps.length-1&&n.jsx(GY,{className:"h-4 w-4 text-muted-foreground"})]},E.id)})})]})]})},y.id):null}):n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(sr,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Pending Approvals"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no deals currently waiting for your approval."})]})})}),n.jsx(et,{value:"approved",className:"space-y-4",children:m("approved").length>0?m("approved").map(y=>{const j=v(y.dealId);return j?n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(y),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:j.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),n.jsxs(Re,{className:He("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:_e(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),n.jsx("p",{className:"text-sm",children:y.completedAt?ct(y.completedAt):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:y.workflowType.replace("_"," ")})]})]})]})},y.id):null}):n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Xr,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Approved Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no approved deal workflows yet."})]})})}),n.jsx(et,{value:"rejected",className:"space-y-4",children:m("rejected").length>0?m("rejected").map(y=>{const j=v(y.dealId);return j?n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(y),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:j.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),n.jsxs(Re,{className:He("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:_e(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),n.jsx("p",{className:"text-sm",children:y.completedAt?ct(y.completedAt):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:y.workflowType.replace("_"," ")})]})]})]})},y.id):null}):n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(oo,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Rejected Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no rejected deal workflows."})]})})}),n.jsx(et,{value:"escalated",className:"space-y-4",children:m("escalated").length>0?m("escalated").map(y=>{const j=v(y.dealId);return j?n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(y),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:j.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),n.jsxs(Re,{className:He("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:_e(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:ct(y.requestedAt)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:y.workflowType.replace("_"," ")})]})]})]})},y.id):null}):n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(ro,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Escalated Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no escalated deal workflows."})]})})})]})]})}function wue({deal:e,customers:t,salesReps:r,territories:s,products:a,onSave:i,onCancel:o}){const{toast:l}=At(),[c,d]=w.useState(!1),[f,u]=w.useState({name:"",customerId:"",customerName:"",stage:yt.PROSPECTING,status:Pr.ACTIVE,priority:Fo.MEDIUM,value:0,probability:10,expectedCloseDate:new Date(Date.now()+30*24*60*60*1e3),assignedTo:"",territoryId:"",sourceId:"",competitorIds:[],products:[],notes:"",requiresApproval:!1,customFields:{}}),[h,m]=w.useState(!1),[v,g]=w.useState(!1),[p,x]=w.useState({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0});w.useEffect(()=>{e&&u({...e,expectedCloseDate:new Date(e.expectedCloseDate)})},[e]),w.useEffect(()=>{if(f.customerId){const S=t.find(N=>N.id===f.customerId);S&&u(N=>({...N,customerName:`${S.firstName} ${S.lastName}`}))}},[f.customerId,t]),w.useEffect(()=>{if(f.products&&f.products.length>0){const S=f.products.reduce((N,_)=>N+_.total,0);u(N=>({...N,value:S}))}},[f.products]),w.useEffect(()=>{const S=p.quantity||1,N=p.unitPrice||0,_=p.discount||0,I=S*N-_;x(T=>({...T,total:I}))},[p.quantity,p.unitPrice,p.discount]);const b=async S=>{if(S.preventDefault(),!f.name||!f.customerId||!f.expectedCloseDate){l({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}d(!0);try{await i(f),l({title:"Success",description:`Deal ${e?"updated":"created"} successfully`})}catch{l({title:"Error",description:`Failed to ${e?"update":"create"} deal`,variant:"destructive"})}finally{d(!1)}},y=()=>{if(!p.productId||!p.productName){l({title:"Validation Error",description:"Please select a product",variant:"destructive"});return}const S={id:Math.random().toString(36).substr(2,9),productId:p.productId,productName:p.productName,quantity:p.quantity||1,unitPrice:p.unitPrice||0,discount:p.discount||0,total:p.total||0};u(N=>({...N,products:[...N.products||[],S]})),x({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0}),m(!1)},j=S=>{u(N=>{var _;return{...N,products:((_=N.products)==null?void 0:_.filter(I=>I.id!==S))||[]}})},E=S=>{const N=a.find(_=>_.id===S);N&&x({productId:N.id,productName:N.name,quantity:1,unitPrice:N.price,discount:0,total:N.price})},C=S=>{u(N=>({...N,customerId:S.id,customerName:`${S.firstName} ${S.lastName}`})),g(!1),l({title:"Customer Added",description:`${S.firstName} ${S.lastName} has been added as a customer.`})};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[v&&n.jsx(Xu,{onClose:()=>g(!1),onSuccess:C}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Deal":"Create Deal"}),n.jsx(Fe,{children:e?"Update deal details":"Create a new sales deal"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:o,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Na,{className:"h-4 w-4 mr-2"}),"Deal Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Deal Name *"}),n.jsx(Pe,{id:"name",value:f.name,onChange:S=>u(N=>({...N,name:S.target.value})),placeholder:"Enter deal name"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(Ve,{value:f.customerId||"",onValueChange:S=>u(N=>({...N,customerId:S})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsxs(Ue,{children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>g(!0),children:[n.jsx(Nt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),t.map(S=>n.jsxs(K,{value:S.id,children:[S.firstName," ",S.lastName]},S.id))]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"stage",children:"Stage"}),n.jsxs(Ve,{value:f.stage,onValueChange:S=>u(N=>({...N,stage:S,probability:S===yt.PROSPECTING?10:S===yt.QUALIFICATION?25:S===yt.NEEDS_ANALYSIS?40:S===yt.PROPOSAL?60:S===yt.NEGOTIATION?80:S===yt.CLOSED_WON?100:S===yt.CLOSED_LOST?0:10})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:yt.PROSPECTING,children:"Prospecting"}),n.jsx(K,{value:yt.QUALIFICATION,children:"Qualification"}),n.jsx(K,{value:yt.NEEDS_ANALYSIS,children:"Needs Analysis"}),n.jsx(K,{value:yt.PROPOSAL,children:"Proposal"}),n.jsx(K,{value:yt.NEGOTIATION,children:"Negotiation"}),n.jsx(K,{value:yt.CLOSED_WON,children:"Closed Won"}),n.jsx(K,{value:yt.CLOSED_LOST,children:"Closed Lost"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"priority",children:"Priority"}),n.jsxs(Ve,{value:f.priority,onValueChange:S=>u(N=>({...N,priority:S})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Fo.LOW,children:"Low"}),n.jsx(K,{value:Fo.MEDIUM,children:"Medium"}),n.jsx(K,{value:Fo.HIGH,children:"High"}),n.jsx(K,{value:Fo.CRITICAL,children:"Critical"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"probability",children:"Probability (%)"}),n.jsx(Pe,{id:"probability",type:"number",min:"0",max:"100",value:f.probability,onChange:S=>u(N=>({...N,probability:parseInt(S.target.value)||0}))})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"expectedCloseDate",children:"Expected Close Date *"}),n.jsx(Pe,{id:"expectedCloseDate",type:"date",value:f.expectedCloseDate?new Date(f.expectedCloseDate).toISOString().split("T")[0]:"",onChange:S=>u(N=>({...N,expectedCloseDate:new Date(S.target.value)}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"assignedTo",children:"Assigned To"}),n.jsxs(Ve,{value:f.assignedTo,onValueChange:S=>u(N=>({...N,assignedTo:S})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select sales rep"})}),n.jsx(Ue,{children:r.map(S=>n.jsx(K,{value:S.id,children:S.name},S.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"territoryId",children:"Territory"}),n.jsxs(Ve,{value:f.territoryId,onValueChange:S=>u(N=>({...N,territoryId:S})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select territory"})}),n.jsx(Ue,{children:s.map(S=>n.jsx(K,{value:S.id,children:S.name},S.id))})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Products"]}),n.jsxs(J,{type:"button",onClick:()=>m(!0),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),h&&n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Product"}),n.jsxs(Ve,{onValueChange:E,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select product"})}),n.jsx(Ue,{children:a.map(S=>n.jsxs(K,{value:S.id,children:[S.name," - ",_e(S.price)]},S.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Quantity"}),n.jsx(Pe,{type:"number",min:"1",value:p.quantity,onChange:S=>x(N=>({...N,quantity:parseInt(S.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Unit Price"}),n.jsx(Pe,{type:"number",min:"0",step:"0.01",value:p.unitPrice,onChange:S=>x(N=>({...N,unitPrice:parseFloat(S.target.value)||0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Discount"}),n.jsx(Pe,{type:"number",min:"0",step:"0.01",value:p.discount,onChange:S=>x(N=>({...N,discount:parseFloat(S.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:_e(p.total||0)})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),n.jsx(J,{type:"button",onClick:y,children:"Add Product"})]})]})]})}),n.jsx("div",{className:"space-y-3",children:f.products&&f.products.length>0?f.products.map(S=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:S.productName}),n.jsxs(Re,{variant:"outline",children:[S.quantity," × ",_e(S.unitPrice)]})]}),S.discount>0&&n.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Discount: ",_e(S.discount)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:_e(S.total)}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(S.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]})]},S.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ws,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No products added yet"}),n.jsx("p",{className:"text-sm",children:"Add products to calculate deal value"})]})}),f.products&&f.products.length>0&&n.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),n.jsx("span",{className:"text-lg font-bold text-primary",children:_e(f.value||0)})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),n.jsx(tr,{value:f.notes,onChange:S=>u(N=>({...N,notes:S.target.value})),placeholder:"Add any additional notes about this deal...",rows:3})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Approval Settings"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"requiresApproval",checked:f.requiresApproval,onCheckedChange:S=>u(N=>({...N,requiresApproval:!!S}))}),n.jsx(ae,{htmlFor:"requiresApproval",children:"This deal requires approval"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Deals over $100,000 automatically require approval"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:o,disabled:c,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Deal"]})})]})]})})]})]})}function jk(){const{deals:e,territories:t,approvalWorkflows:r,winLossReports:s,stageHistory:a,createDeal:i,updateDealStage:o,assignTerritory:l,createApprovalWorkflow:c,createWinLossReport:d,getDealMetrics:f}=Dae(),{leads:u,salesReps:h}=mo(),{vehicles:m}=wd(),[v,g]=w.useState(""),[p,x]=w.useState("all"),[b,y]=w.useState("all"),[j,E]=w.useState(null),[C,S]=w.useState(!1),[N,_]=w.useState("pipeline"),[I,T]=w.useState(!1),{toast:A}=At(),O=G=>{switch(G){case Pr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Pr.WON:return"bg-green-50 text-green-700 border-green-200";case Pr.LOST:return"bg-red-50 text-red-700 border-red-200";case Pr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Pr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},D=e.filter(G=>{const Z=G.name.toLowerCase().includes(v.toLowerCase())||G.customerName.toLowerCase().includes(v.toLowerCase()),te=p==="all"||G.stage===p,he=b==="all"||G.assignedTo===b;return Z&&te&&he}),$=async(G,Z)=>{try{await o(G,Z);const te=e.find(he=>he.id===G);te&&A({title:"Deal Stage Updated",description:`${te.name} moved to ${Z.replace("_"," ").toLowerCase()}`})}catch{A({title:"Error",description:"Failed to update deal stage",variant:"destructive"})}},M=G=>{E(G),T(!0)},R=()=>{E(null),S(!0)},B=G=>{E(G),S(!0)},U=async G=>{j?await o(j.id,G.stage||j.stage):await i(G),S(!1),E(null)},W=async(G,Z)=>{await c(G,Z)},q=async(G,Z,te)=>{await d(G,Z,te)},L=f(),V=m.map(G=>({id:G.id,name:`${G.year} ${G.make} ${G.model}`,price:G.price,category:"vehicle"})).concat([{id:"prod-001",name:"Extended Warranty Package",price:3500,category:"warranty"},{id:"prod-002",name:"Premium Interior Upgrade",price:2200,category:"upgrade"},{id:"prod-003",name:"Solar Panel Package",price:3500,category:"accessory"}]);return n.jsxs("div",{className:"space-y-8",children:[I&&j&&n.jsx(yue,{deal:j,onClose:()=>T(!1),onEdit:B}),C&&n.jsx(wue,{deal:j||void 0,customers:u,salesReps:h,territories:t,products:V,onSave:U,onCancel:()=>{S(!1),E(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Sales Deal Management"}),n.jsx("p",{className:"ri-page-description",children:"Track deals through the sales pipeline with approvals and territory management"})]}),n.jsxs(J,{className:"shadow-sm",onClick:R,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Deal"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),n.jsx(It,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:_e(L.totalValue)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),L.totalDeals," active deals"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Win Rate"}),n.jsx(Na,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[L.winRate.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),L.wonDeals," won deals"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Avg Deal Size"}),n.jsx(It,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_e(L.averageDealSize)}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),L.averageSalesCycle.toFixed(0)," day cycle"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Territories"}),n.jsx(Hl,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Ln,{className:"h-3 w-3 mr-1"}),"Active territories"]})]})]})]}),n.jsxs(xr,{value:N,onValueChange:_,className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-5",children:[n.jsx(Qe,{value:"pipeline",children:"Pipeline"}),n.jsx(Qe,{value:"deals",children:"Deals"}),n.jsx(Qe,{value:"analytics",children:"Analytics"}),n.jsx(Qe,{value:"territories",children:"Territories"}),n.jsx(Qe,{value:"approvals",children:"Approvals"})]}),n.jsx(et,{value:"pipeline",className:"space-y-6",children:n.jsx(hue,{deals:e,onDealStageChange:$,onDealClick:M})}),n.jsxs(et,{value:"deals",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search deals...",value:v,onChange:G=>g(G.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(Ve,{value:p,onValueChange:x,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Stage"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Stages"}),n.jsx(K,{value:yt.PROSPECTING,children:"Prospecting"}),n.jsx(K,{value:yt.QUALIFICATION,children:"Qualification"}),n.jsx(K,{value:yt.NEEDS_ANALYSIS,children:"Needs Analysis"}),n.jsx(K,{value:yt.PROPOSAL,children:"Proposal"}),n.jsx(K,{value:yt.NEGOTIATION,children:"Negotiation"}),n.jsx(K,{value:yt.CLOSED_WON,children:"Closed Won"}),n.jsx(K,{value:yt.CLOSED_LOST,children:"Closed Lost"})]})]}),n.jsxs(Ve,{value:b,onValueChange:y,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Sales Rep"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Reps"}),h.map(G=>n.jsx(K,{value:G.id,children:G.name},G.id))]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Deals (",D.length,")"]}),n.jsx(Fe,{children:"Manage your sales pipeline and deal progression"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[D.map(G=>{var Z;return n.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>B(G),children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:G.name}),n.jsx(Re,{className:He("ri-badge-status",O(G.status)),children:G.status.toUpperCase()}),n.jsx(Re,{variant:"outline",children:G.stage.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Ln,{className:"h-3 w-3 mr-2 text-blue-500"}),G.customerName]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(It,{className:"h-3 w-3 mr-2 text-green-500"}),_e(G.value)]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Na,{className:"h-3 w-3 mr-2 text-purple-500"}),G.probability,"% probability"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Hl,{className:"h-3 w-3 mr-2 text-orange-500"}),((Z=t.find(te=>te.id===G.territoryId))==null?void 0:Z.name)||"No Territory"]})]}),G.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:G.notes})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:te=>{te.stopPropagation(),M(G)},children:"View"}),G.requiresApproval&&n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:te=>{te.stopPropagation(),W(G.id,"deal_value")},children:"Request Approval"})]})]},G.id)}),D.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Na,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No deals found"}),n.jsx("p",{className:"text-sm",children:"Create your first deal to get started"})]})]})})]})]}),n.jsx(et,{value:"analytics",className:"space-y-6",children:n.jsxs(xr,{defaultValue:"metrics",className:"space-y-6",children:[n.jsxs(hr,{children:[n.jsx(Qe,{value:"metrics",children:"Deal Metrics"}),n.jsx(Qe,{value:"win-loss",children:"Win/Loss Analysis"})]}),n.jsx(et,{value:"metrics",children:n.jsx(mue,{metrics:L})}),n.jsx(et,{value:"win-loss",children:n.jsx(xue,{deals:e,winLossReports:s,onCreateReport:q})})]})}),n.jsx(et,{value:"territories",className:"space-y-6",children:n.jsx(bue,{territories:t,salesReps:h,deals:e,onCreateTerritory:()=>{},onUpdateTerritory:()=>{},onDeleteTerritory:()=>{}})}),n.jsx(et,{value:"approvals",className:"space-y-6",children:n.jsx(jue,{deals:e,approvalWorkflows:r,onApprove:()=>{},onReject:()=>{},onEscalate:()=>{}})})]})]})}function Nue(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(jk,{})}),n.jsx($t,{path:"/*",element:n.jsx(jk,{})})]})}const Sue=[{id:"1",type:lu.PURCHASE,customerId:"cust-1",vehicleId:"veh-1",quoteId:"quote-1",status:Gi.SIGNED,signedDate:new Date("2024-01-18"),effectiveDate:new Date("2024-01-18"),expirationDate:new Date("2025-01-18"),terms:"Standard purchase agreement with 90-day warranty",documents:[{id:"1",name:"Purchase Agreement.pdf",type:"application/pdf",url:"/documents/purchase-agreement-1.pdf",size:245760,uploadedAt:new Date("2024-01-18")}],customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",type:lu.SERVICE,customerId:"cust-2",status:Gi.ACTIVE,effectiveDate:new Date("2024-01-10"),expirationDate:new Date("2024-07-10"),terms:"Extended service contract for 6 months",documents:[{id:"2",name:"Service Contract.pdf",type:"application/pdf",url:"/documents/service-contract-2.pdf",size:189440,uploadedAt:new Date("2024-01-10")}],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-10")}];function wk(){const[e]=w.useState(Sue),[t,r]=w.useState(""),s=o=>{switch(o){case Gi.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Gi.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Gi.SIGNED:return"bg-blue-50 text-blue-700 border-blue-200";case Gi.ACTIVE:return"bg-green-50 text-green-700 border-green-200";case Gi.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";case Gi.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=o=>{switch(o){case lu.PURCHASE:return"bg-blue-50 text-blue-700 border-blue-200";case lu.LEASE:return"bg-purple-50 text-purple-700 border-purple-200";case lu.SERVICE:return"bg-green-50 text-green-700 border-green-200";case lu.WARRANTY:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=e.filter(o=>o.id.toLowerCase().includes(t.toLowerCase())||o.customerId.toLowerCase().includes(t.toLowerCase())||o.type.toLowerCase().includes(t.toLowerCase()));return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Agreement Vault"}),n.jsx("p",{className:"ri-page-description",children:"Manage contracts, agreements, and legal documents"})]}),n.jsxs(J,{className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Agreement"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Agreements"}),n.jsx(Ly,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"All contracts"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Active"}),n.jsx(Ly,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(o=>o.status===Gi.ACTIVE).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(Ly,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(o=>o.status===Gi.PENDING).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Lr,{className:"h-3 w-3 mr-1"}),"Awaiting signature"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Expiring Soon"}),n.jsx(Lr,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:"0"}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Lr,{className:"h-3 w-3 mr-1"}),"Next 30 days"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search agreements...",value:t,onChange:o=>r(o.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Agreements"}),n.jsx(Fe,{children:"Manage contracts, purchase agreements, and legal documents"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:i.map(o=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Agreement #",o.id]}),n.jsx(Re,{className:He("ri-badge-status",a(o.type)),children:o.type.toUpperCase()}),n.jsx(Re,{className:He("ri-badge-status",s(o.status)),children:o.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",o.customerId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Effective:"})," ",ct(o.effectiveDate)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Documents:"})," ",o.documents.length]}),o.expirationDate&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Expires:"})," ",ct(o.expirationDate)]})]}),n.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:o.terms})})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(Wl,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(zr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(Sa,{className:"h-3 w-3 mr-1"}),"Download"]})]})]},o.id))})})]})]})}function Cue(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(wk,{})}),n.jsx($t,{path:"/*",element:n.jsx(wk,{})})]})}function m9(){const[e,t]=w.useState([]),[r,s]=w.useState(!1);w.useEffect(()=>{a()},[]);const a=()=>{const p=pn("renter-insight-service-tickets",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",title:"Annual Maintenance Service",description:"Complete annual maintenance including oil change, filter replacement, and system checks",priority:rn.MEDIUM,status:lr.IN_PROGRESS,assignedTo:"Tech-001",scheduledDate:new Date("2024-01-20"),parts:[{id:"1",partNumber:"OIL-001",description:"Engine Oil Filter",quantity:1,unitCost:25.99,total:25.99}],labor:[{id:"1",description:"Annual Maintenance",hours:3,rate:85,total:255}],notes:"Customer requested additional inspection of brake system",customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"2024-01-22",customerAuthorization:!0,technicianNotes:"Check brake pads and rotors during service",customerPortalAccess:!0},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",title:"AC System Repair",description:"Air conditioning not cooling properly, needs diagnostic and repair",priority:rn.HIGH,status:lr.WAITING_PARTS,assignedTo:"Tech-002",scheduledDate:new Date("2024-01-22"),parts:[{id:"2",partNumber:"AC-COMP-001",description:"AC Compressor",quantity:1,unitCost:450,total:450}],labor:[{id:"2",description:"AC System Diagnostic",hours:2,rate:85,total:170}],notes:"Waiting for compressor part to arrive",customFields:{warrantyStatus:"partial",estimatedCompletionDate:"2024-01-25",customerAuthorization:!0,technicianNotes:"Compressor needs replacement, on order from supplier",customerPortalAccess:!0},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-16")}]);t(p)},i=p=>{Gr("renter-insight-service-tickets",p)};return{tickets:e,loading:r,getTicketsByCustomerId:p=>e.filter(x=>x.customerId===p),getTicketsByVehicleId:p=>e.filter(x=>x.vehicleId===p),getTicketById:p=>e.find(x=>x.id===p),createTicket:async p=>{s(!0);try{const x={id:Math.random().toString(36).substr(2,9),customerId:p.customerId||"",vehicleId:p.vehicleId,title:p.title||"",description:p.description||"",priority:p.priority||rn.MEDIUM,status:p.status||lr.OPEN,assignedTo:p.assignedTo,scheduledDate:p.scheduledDate,parts:p.parts||[],labor:p.labor||[],notes:p.notes||"",customFields:p.customFields||{},createdAt:new Date,updatedAt:new Date},b=[...e,x];return t(b),i(b),x}finally{s(!1)}},updateTicket:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,...x,updatedAt:new Date}:y);t(b),i(b)},deleteTicket:async p=>{const x=e.filter(b=>b.id!==p);t(x),i(x)},updateTicketStatus:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,status:x,completedDate:x===lr.COMPLETED?new Date:y.completedDate,updatedAt:new Date}:y);t(b),i(b)},assignTechnician:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,assignedTo:x,updatedAt:new Date}:y);t(b),i(b)},addPart:async(p,x)=>{if(!e.find(E=>E.id===p))return null;const y={id:Math.random().toString(36).substr(2,9),partNumber:x.partNumber||"",description:x.description||"",quantity:x.quantity||1,unitCost:x.unitCost||0,total:x.total||0},j=e.map(E=>E.id===p?{...E,parts:[...E.parts,y],updatedAt:new Date}:E);return t(j),i(j),y},addLabor:async(p,x)=>{if(!e.find(E=>E.id===p))return null;const y={id:Math.random().toString(36).substr(2,9),description:x.description||"",hours:x.hours||1,rate:x.rate||85,total:x.total||85},j=e.map(E=>E.id===p?{...E,labor:[...E.labor,y],updatedAt:new Date}:E);return t(j),i(j),y}}}function Aue({ticket:e,onSave:t,onCancel:r}){var D,$,M,R,B,U,W;const{toast:s}=At(),{vehicles:a}=wd(),{leads:i}=mo(),[o,l]=w.useState(!1),[c,d]=w.useState(!1),[f,u]=w.useState({customerId:"",vehicleId:"",title:"",description:"",priority:rn.MEDIUM,status:lr.OPEN,assignedTo:"",scheduledDate:void 0,notes:"",parts:[],labor:[],customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"",customerAuthorization:!1,technicianNotes:"",customerPortalAccess:!0}}),[h,m]=w.useState(!1),[v,g]=w.useState(!1),[p,x]=w.useState({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),[b,y]=w.useState({description:"",hours:1,rate:85,total:85});w.useEffect(()=>{var q,L,V,G,Z;e&&u({...e,customFields:{...e.customFields,warrantyStatus:((q=e.customFields)==null?void 0:q.warrantyStatus)||"not_covered",estimatedCompletionDate:((L=e.customFields)==null?void 0:L.estimatedCompletionDate)||"",customerAuthorization:((V=e.customFields)==null?void 0:V.customerAuthorization)||!1,technicianNotes:((G=e.customFields)==null?void 0:G.technicianNotes)||"",customerPortalAccess:((Z=e.customFields)==null?void 0:Z.customerPortalAccess)!==!1}})},[e]),w.useEffect(()=>{const q=p.quantity||1,L=p.unitCost||0;x(V=>({...V,total:q*L}))},[p.quantity,p.unitCost]),w.useEffect(()=>{const q=b.hours||1,L=b.rate||85;y(V=>({...V,total:q*L}))},[b.hours,b.rate]);const j=async q=>{if(q.preventDefault(),!f.customerId||!f.title||!f.description){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}l(!0);try{await t(f),s({title:"Success",description:`Service ticket ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} service ticket`,variant:"destructive"})}finally{l(!1)}},E=q=>{q==="add-new"?d(!0):u(L=>({...L,customerId:q}))},C=q=>{u(L=>({...L,customerId:q.id})),d(!1),s({title:"Customer Added",description:`${q.firstName} ${q.lastName} has been added as a customer.`})},S=()=>{if(!p.partNumber||!p.description){s({title:"Validation Error",description:"Part number and description are required",variant:"destructive"});return}const q={id:Math.random().toString(36).substr(2,9),partNumber:p.partNumber||"",description:p.description||"",quantity:p.quantity||1,unitCost:p.unitCost||0,total:p.total||0};u(L=>({...L,parts:[...L.parts||[],q]})),x({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),m(!1)},N=q=>{u(L=>{var V;return{...L,parts:((V=L.parts)==null?void 0:V.filter(G=>G.id!==q))||[]}})},_=()=>{if(!b.description){s({title:"Validation Error",description:"Labor description is required",variant:"destructive"});return}const q={id:Math.random().toString(36).substr(2,9),description:b.description||"",hours:b.hours||1,rate:b.rate||85,total:b.total||85};u(L=>({...L,labor:[...L.labor||[],q]})),y({description:"",hours:1,rate:85,total:85}),g(!1)},I=q=>{u(L=>{var V;return{...L,labor:((V=L.labor)==null?void 0:V.filter(G=>G.id!==q))||[]}})},A=(()=>{var V,G;const q=((V=f.parts)==null?void 0:V.reduce((Z,te)=>Z+te.total,0))||0,L=((G=f.labor)==null?void 0:G.reduce((Z,te)=>Z+te.total,0))||0;return{partsTotal:q,laborTotal:L,grandTotal:q+L}})(),O=[{id:"Tech-001",name:"John Smith"},{id:"Tech-002",name:"Sarah Johnson"},{id:"Tech-003",name:"Mike Davis"}];return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&n.jsx(Xu,{onClose:()=>d(!1),onSuccess:C}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Service Ticket":"Create Service Ticket"}),n.jsx(Fe,{children:e?"Update service ticket details":"Create a new service ticket"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Ticket Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(Ve,{value:f.customerId,onValueChange:E,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsxs(Ue,{children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>E("add-new"),children:[n.jsx(Nt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),i.map(q=>n.jsxs(K,{value:q.id,children:[q.firstName," ",q.lastName]},q.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle"}),n.jsxs(Ve,{value:f.vehicleId,onValueChange:q=>u(L=>({...L,vehicleId:q})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select vehicle (optional)"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"No Vehicle"}),a.map(q=>n.jsxs(K,{value:q.id,children:[q.year," ",q.make," ",q.model]},q.id))]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"title",children:"Service Title *"}),n.jsx(Pe,{id:"title",value:f.title,onChange:q=>u(L=>({...L,title:q.target.value})),placeholder:"e.g., Annual Maintenance Service"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"description",children:"Description *"}),n.jsx(tr,{id:"description",value:f.description,onChange:q=>u(L=>({...L,description:q.target.value})),placeholder:"Describe the service needed",rows:3})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"priority",children:"Priority"}),n.jsxs(Ve,{value:f.priority,onValueChange:q=>u(L=>({...L,priority:q})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:rn.LOW,children:"Low"}),n.jsx(K,{value:rn.MEDIUM,children:"Medium"}),n.jsx(K,{value:rn.HIGH,children:"High"}),n.jsx(K,{value:rn.URGENT,children:"Urgent"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(Ve,{value:f.status,onValueChange:q=>u(L=>({...L,status:q})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:lr.OPEN,children:"Open"}),n.jsx(K,{value:lr.IN_PROGRESS,children:"In Progress"}),n.jsx(K,{value:lr.WAITING_PARTS,children:"Waiting for Parts"}),n.jsx(K,{value:lr.COMPLETED,children:"Completed"}),n.jsx(K,{value:lr.CANCELLED,children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"assignedTo",children:"Assigned Technician"}),n.jsxs(Ve,{value:f.assignedTo,onValueChange:q=>u(L=>({...L,assignedTo:q})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select technician"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"Unassigned"}),O.map(q=>n.jsx(K,{value:q.id,children:q.name},q.id))]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"scheduledDate",children:"Scheduled Date"}),n.jsx(Pe,{id:"scheduledDate",type:"date",value:f.scheduledDate?new Date(f.scheduledDate).toISOString().split("T")[0]:"",onChange:q=>u(L=>({...L,scheduledDate:q.target.value?new Date(q.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"estimatedCompletionDate",children:"Estimated Completion"}),n.jsx(Pe,{id:"estimatedCompletionDate",type:"date",value:((D=f.customFields)==null?void 0:D.estimatedCompletionDate)||"",onChange:q=>u(L=>({...L,customFields:{...L.customFields,estimatedCompletionDate:q.target.value}}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Warranty Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"warrantyStatus",children:"Warranty Status"}),n.jsxs(Ve,{value:(($=f.customFields)==null?void 0:$.warrantyStatus)||"not_covered",onValueChange:q=>u(L=>({...L,customFields:{...L.customFields,warrantyStatus:q}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"covered",children:"Covered by Warranty"}),n.jsx(K,{value:"partial",children:"Partially Covered"}),n.jsx(K,{value:"not_covered",children:"Not Covered"}),n.jsx(K,{value:"extended",children:"Extended Warranty"}),n.jsx(K,{value:"expired",children:"Warranty Expired"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[n.jsx(Vt,{id:"customerAuthorization",checked:((M=f.customFields)==null?void 0:M.customerAuthorization)||!1,onCheckedChange:q=>u(L=>({...L,customFields:{...L.customFields,customerAuthorization:!!q}}))}),n.jsx(ae,{htmlFor:"customerAuthorization",children:"Customer has authorized work"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Parts"}),n.jsxs(J,{type:"button",onClick:()=>m(!0),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Part"]})]}),h&&n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"partNumber",children:"Part Number *"}),n.jsx(Pe,{id:"partNumber",value:p.partNumber,onChange:q=>x(L=>({...L,partNumber:q.target.value})),placeholder:"e.g., AC-COMP-001"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"partDescription",children:"Description *"}),n.jsx(Pe,{id:"partDescription",value:p.description,onChange:q=>x(L=>({...L,description:q.target.value})),placeholder:"e.g., AC Compressor"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"partQuantity",children:"Quantity"}),n.jsx(Pe,{id:"partQuantity",type:"number",min:"1",value:p.quantity,onChange:q=>x(L=>({...L,quantity:parseInt(q.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"partUnitCost",children:"Unit Cost"}),n.jsx(Pe,{id:"partUnitCost",type:"number",step:"0.01",min:"0",value:p.unitCost,onChange:q=>x(L=>({...L,unitCost:parseFloat(q.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:_e(p.total||0)})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),n.jsx(J,{type:"button",onClick:S,children:"Add Part"})]})]})]})}),n.jsx("div",{className:"space-y-3",children:f.parts&&f.parts.length>0?f.parts.map(q=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:q.description}),n.jsx(Re,{variant:"outline",children:q.partNumber})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",q.quantity," × ",_e(q.unitCost)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:_e(q.total)}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(q.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]})]},q.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(iu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No parts added yet"}),n.jsx("p",{className:"text-sm",children:"Add parts needed for this service"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Labor"}),n.jsxs(J,{type:"button",onClick:()=>g(!0),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Labor"]})]}),v&&n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"md:col-span-3",children:[n.jsx(ae,{htmlFor:"laborDescription",children:"Description *"}),n.jsx(Pe,{id:"laborDescription",value:b.description,onChange:q=>y(L=>({...L,description:q.target.value})),placeholder:"e.g., Diagnostic and Repair"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"laborHours",children:"Hours"}),n.jsx(Pe,{id:"laborHours",type:"number",step:"0.5",min:"0.5",value:b.hours,onChange:q=>y(L=>({...L,hours:parseFloat(q.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"laborRate",children:"Hourly Rate"}),n.jsx(Pe,{id:"laborRate",type:"number",step:"0.01",min:"0",value:b.rate,onChange:q=>y(L=>({...L,rate:parseFloat(q.target.value)||85}))})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Total"}),n.jsx("div",{className:"h-10 px-3 py-2 rounded-md border border-input bg-muted/50 flex items-center",children:_e(b.total||0)})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),n.jsx(J,{type:"button",onClick:_,children:"Add Labor"})]})]})}),n.jsx("div",{className:"space-y-3",children:f.labor&&f.labor.length>0?f.labor.map(q=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:q.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[q.hours," hours × ",_e(q.rate),"/hr"]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:_e(q.total)}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(q.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]})]},q.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(sr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No labor added yet"}),n.jsx("p",{className:"text-sm",children:"Add labor for this service"})]})})]}),(((R=f.parts)==null?void 0:R.length)>0||((B=f.labor)==null?void 0:B.length)>0)&&n.jsx(ue,{className:"bg-muted/30",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Parts Total:"}),n.jsx("span",{children:_e(A.partsTotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Labor Total:"}),n.jsx("span",{children:_e(A.laborTotal)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Grand Total:"}),n.jsx("span",{children:_e(A.grandTotal)})]})]})})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"technicianNotes",children:"Technician Notes"}),n.jsx(tr,{id:"technicianNotes",value:((U=f.customFields)==null?void 0:U.technicianNotes)||"",onChange:q=>u(L=>({...L,customFields:{...L.customFields,technicianNotes:q.target.value}})),placeholder:"Notes for technicians only (not visible to customer)",rows:3})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Customer Notes"}),n.jsx(tr,{id:"notes",value:f.notes,onChange:q=>u(L=>({...L,notes:q.target.value})),placeholder:"Notes visible to the customer",rows:3})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"customerPortalAccess",checked:((W=f.customFields)==null?void 0:W.customerPortalAccess)!==!1,onCheckedChange:q=>u(L=>({...L,customFields:{...L.customFields,customerPortalAccess:!!q}}))}),n.jsx(ae,{htmlFor:"customerPortalAccess",children:"Allow customer to view this ticket in portal"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Ticket"]})})]})]})})]})]})}const Eue="modulepreload",Pue=function(e){return"/"+e},Nk={},md=function(t,r,s){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=Pue(i),i in Nk)return;Nk[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let f=a.length-1;f>=0;f--){const u=a[f];if(u.href===i&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Eue,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((f,u)=>{d.addEventListener("load",f),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var Vs=Uint8Array,Ua=Uint16Array,uP=Int32Array,qj=new Vs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wj=new Vs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mC=new Vs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p9=function(e,t){for(var r=new Ua(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var a=new uP(r[30]),s=1;s<30;++s)for(var i=r[s];i<r[s+1];++i)a[i]=i-r[s]<<5|s;return{b:r,r:a}},v9=p9(qj,2),g9=v9.b,pC=v9.r;g9[28]=258,pC[258]=28;var x9=p9(Wj,0),Tue=x9.b,Sk=x9.r,vC=new Ua(32768);for(var nn=0;nn<32768;++nn){var jc=(nn&43690)>>1|(nn&21845)<<1;jc=(jc&52428)>>2|(jc&13107)<<2,jc=(jc&61680)>>4|(jc&3855)<<4,vC[nn]=((jc&65280)>>8|(jc&255)<<8)>>1}var Go=function(e,t,r){for(var s=e.length,a=0,i=new Ua(t);a<s;++a)e[a]&&++i[e[a]-1];var o=new Ua(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new Ua(1<<t);var c=15-t;for(a=0;a<s;++a)if(e[a])for(var d=a<<4|e[a],f=t-e[a],u=o[e[a]-1]++<<f,h=u|(1<<f)-1;u<=h;++u)l[vC[u]>>c]=d}else for(l=new Ua(s),a=0;a<s;++a)e[a]&&(l[a]=vC[o[e[a]-1]++]>>15-e[a]);return l},pd=new Vs(288);for(var nn=0;nn<144;++nn)pd[nn]=8;for(var nn=144;nn<256;++nn)pd[nn]=9;for(var nn=256;nn<280;++nn)pd[nn]=7;for(var nn=280;nn<288;++nn)pd[nn]=8;var dg=new Vs(32);for(var nn=0;nn<32;++nn)dg[nn]=5;var _ue=Go(pd,9,0),Iue=Go(pd,9,1),kue=Go(dg,5,0),Due=Go(dg,5,1),BN=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ui=function(e,t,r){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&r},zN=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},fP=function(e){return(e+7)/8|0},y9=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new Vs(e.subarray(t,r))},Oue=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ki=function(e,t,r){var s=new Error(t||Oue[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,Ki),!r)throw s;return s},Lue=function(e,t,r,s){var a=e.length,i=s?s.length:0;if(!a||t.f&&!t.l)return r||new Vs(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Vs(a*3));var d=function(ve){var ge=r.length;if(ve>ge){var De=new Vs(Math.max(ge*2,ve));De.set(r),r=De}},f=t.f||0,u=t.p||0,h=t.b||0,m=t.l,v=t.d,g=t.m,p=t.n,x=a*8;do{if(!m){f=Ui(e,u,1);var b=Ui(e,u+1,3);if(u+=3,b)if(b==1)m=Iue,v=Due,g=9,p=5;else if(b==2){var C=Ui(e,u,31)+257,S=Ui(e,u+10,15)+4,N=C+Ui(e,u+5,31)+1;u+=14;for(var _=new Vs(N),I=new Vs(19),T=0;T<S;++T)I[mC[T]]=Ui(e,u+T*3,7);u+=S*3;for(var A=BN(I),O=(1<<A)-1,D=Go(I,A,1),T=0;T<N;){var $=D[Ui(e,u,O)];u+=$&15;var y=$>>4;if(y<16)_[T++]=y;else{var M=0,R=0;for(y==16?(R=3+Ui(e,u,3),u+=2,M=_[T-1]):y==17?(R=3+Ui(e,u,7),u+=3):y==18&&(R=11+Ui(e,u,127),u+=7);R--;)_[T++]=M}}var B=_.subarray(0,C),U=_.subarray(C);g=BN(B),p=BN(U),m=Go(B,g,1),v=Go(U,p,1)}else Ki(1);else{var y=fP(u)+4,j=e[y-4]|e[y-3]<<8,E=y+j;if(E>a){c&&Ki(0);break}l&&d(h+j),r.set(e.subarray(y,E),h),t.b=h+=j,t.p=u=E*8,t.f=f;continue}if(u>x){c&&Ki(0);break}}l&&d(h+131072);for(var W=(1<<g)-1,q=(1<<p)-1,L=u;;L=u){var M=m[zN(e,u)&W],V=M>>4;if(u+=M&15,u>x){c&&Ki(0);break}if(M||Ki(2),V<256)r[h++]=V;else if(V==256){L=u,m=null;break}else{var G=V-254;if(V>264){var T=V-257,Z=qj[T];G=Ui(e,u,(1<<Z)-1)+g9[T],u+=Z}var te=v[zN(e,u)&q],he=te>>4;te||Ki(3),u+=te&15;var U=Tue[he];if(he>3){var Z=Wj[he];U+=zN(e,u)&(1<<Z)-1,u+=Z}if(u>x){c&&Ki(0);break}l&&d(h+131072);var me=h+G;if(h<U){var oe=i-U,we=Math.min(U,me);for(oe+h<0&&Ki(3);h<we;++h)r[h]=s[oe+h]}for(;h<me;++h)r[h]=r[h-U]}}t.l=m,t.p=L,t.b=h,t.f=f,m&&(f=1,t.m=g,t.d=v,t.n=p)}while(!f);return h!=r.length&&o?y9(r,0,h):r.subarray(0,h)},yl=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8},zp=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},UN=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var a=r.length,i=r.slice();if(!a)return{t:j9,l:0};if(a==1){var o=new Vs(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(E,C){return E.f-C.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,f=1,u=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};f!=a-1;)l=r[r[d].f<r[u].f?d++:u++],c=r[d!=f&&r[d].f<r[u].f?d++:u++],r[f++]={s:-1,f:l.f+c.f,l,r:c};for(var h=i[0].s,s=1;s<a;++s)i[s].s>h&&(h=i[s].s);var m=new Ua(h+1),v=gC(r[f-1],m,0);if(v>t){var s=0,g=0,p=v-t,x=1<<p;for(i.sort(function(C,S){return m[S.s]-m[C.s]||C.f-S.f});s<a;++s){var b=i[s].s;if(m[b]>t)g+=x-(1<<v-m[b]),m[b]=t;else break}for(g>>=p;g>0;){var y=i[s].s;m[y]<t?g-=1<<t-m[y]++-1:++s}for(;s>=0&&g;--s){var j=i[s].s;m[j]==t&&(--m[j],++g)}v=t}return{t:new Vs(m),l:v}},gC=function(e,t,r){return e.s==-1?Math.max(gC(e.l,t,r+1),gC(e.r,t,r+1)):t[e.s]=r},Ck=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ua(++t),s=0,a=e[0],i=1,o=function(c){r[s++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,s),n:t}},Up=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},b9=function(e,t,r){var s=r.length,a=fP(t+2);e[a]=s&255,e[a+1]=s>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<s;++i)e[a+i+4]=r[i];return(a+4+s)*8},Ak=function(e,t,r,s,a,i,o,l,c,d,f){yl(t,f++,r),++a[256];for(var u=UN(a,15),h=u.t,m=u.l,v=UN(i,15),g=v.t,p=v.l,x=Ck(h),b=x.c,y=x.n,j=Ck(g),E=j.c,C=j.n,S=new Ua(19),N=0;N<b.length;++N)++S[b[N]&31];for(var N=0;N<E.length;++N)++S[E[N]&31];for(var _=UN(S,7),I=_.t,T=_.l,A=19;A>4&&!I[mC[A-1]];--A);var O=d+5<<3,D=Up(a,pd)+Up(i,dg)+o,$=Up(a,h)+Up(i,g)+o+14+3*A+Up(S,I)+2*S[16]+3*S[17]+7*S[18];if(c>=0&&O<=D&&O<=$)return b9(t,f,e.subarray(c,c+d));var M,R,B,U;if(yl(t,f,1+($<D)),f+=2,$<D){M=Go(h,m,0),R=h,B=Go(g,p,0),U=g;var W=Go(I,T,0);yl(t,f,y-257),yl(t,f+5,C-1),yl(t,f+10,A-4),f+=14;for(var N=0;N<A;++N)yl(t,f+3*N,I[mC[N]]);f+=3*A;for(var q=[b,E],L=0;L<2;++L)for(var V=q[L],N=0;N<V.length;++N){var G=V[N]&31;yl(t,f,W[G]),f+=I[G],G>15&&(yl(t,f,V[N]>>5&127),f+=V[N]>>12)}}else M=_ue,R=pd,B=kue,U=dg;for(var N=0;N<l;++N){var Z=s[N];if(Z>255){var G=Z>>18&31;zp(t,f,M[G+257]),f+=R[G+257],G>7&&(yl(t,f,Z>>23&31),f+=qj[G]);var te=Z&31;zp(t,f,B[te]),f+=U[te],te>3&&(zp(t,f,Z>>5&8191),f+=Wj[te])}else zp(t,f,M[Z]),f+=R[Z]}return zp(t,f,M[256]),f+R[256]},Rue=new uP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),j9=new Vs(0),$ue=function(e,t,r,s,a,i){var o=i.z||e.length,l=new Vs(s+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(s,l.length-a),d=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var u=Rue[t-1],h=u>>13,m=u&8191,v=(1<<r)-1,g=i.p||new Ua(32768),p=i.h||new Ua(v+1),x=Math.ceil(r/3),b=2*x,y=function(xe){return(e[xe]^e[xe+1]<<x^e[xe+2]<<b)&v},j=new uP(25e3),E=new Ua(288),C=new Ua(32),S=0,N=0,_=i.i||0,I=0,T=i.w||0,A=0;_+2<o;++_){var O=y(_),D=_&32767,$=p[O];if(g[D]=$,p[O]=D,T<=_){var M=o-_;if((S>7e3||I>24576)&&(M>423||!d)){f=Ak(e,c,0,j,E,C,N,I,A,_-A,f),I=S=N=0,A=_;for(var R=0;R<286;++R)E[R]=0;for(var R=0;R<30;++R)C[R]=0}var B=2,U=0,W=m,q=D-$&32767;if(M>2&&O==y(_-q))for(var L=Math.min(h,M)-1,V=Math.min(32767,_),G=Math.min(258,M);q<=V&&--W&&D!=$;){if(e[_+B]==e[_+B-q]){for(var Z=0;Z<G&&e[_+Z]==e[_+Z-q];++Z);if(Z>B){if(B=Z,U=q,Z>L)break;for(var te=Math.min(q,Z-2),he=0,R=0;R<te;++R){var me=_-q+R&32767,oe=g[me],we=me-oe&32767;we>he&&(he=we,$=me)}}}D=$,$=g[D],q+=D-$&32767}if(U){j[I++]=268435456|pC[B]<<18|Sk[U];var ve=pC[B]&31,ge=Sk[U]&31;N+=qj[ve]+Wj[ge],++E[257+ve],++C[ge],T=_+B,++S}else j[I++]=e[_],++E[e[_]]}}for(_=Math.max(_,T);_<o;++_)j[I++]=e[_],++E[e[_]];f=Ak(e,c,d,j,E,C,N,I,A,_-A,f),d||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=p,i.p=g,i.i=_,i.w=T)}else{for(var _=i.w||0;_<o+d;_+=65535){var De=_+65535;De>=o&&(c[f/8|0]=d,De=o),f=b9(c,f+1,e.subarray(_,De))}i.i=o}return y9(l,0,s+fP(f)+a)},w9=function(){var e=1,t=0;return{p:function(r){for(var s=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=s+=r[o];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}e=s,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Fue=function(e,t,r,s,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Vs(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return $ue(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,s,a)},N9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Mue=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=w9();a.p(t.dictionary),N9(e,2,a.d())}},Bue=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ki(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Ki(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function xC(e,t){t||(t={});var r=w9();r.p(e);var s=Fue(e,t,t.dictionary?6:2,4);return Mue(s,t),N9(s,s.length-4,r.d()),s}function zue(e,t){return Lue(e.subarray(Bue(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Uue=typeof TextDecoder<"u"&&new TextDecoder,Vue=0;try{Uue.decode(j9,{stream:!0}),Vue=1}catch{}var Ft=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function VN(){Ft.console&&typeof Ft.console.log=="function"&&Ft.console.log.apply(Ft.console,arguments)}var Fr={log:VN,warn:function(e){Ft.console&&(typeof Ft.console.warn=="function"?Ft.console.warn.apply(Ft.console,arguments):VN.call(null,arguments))},error:function(e){Ft.console&&(typeof Ft.console.error=="function"?Ft.console.error.apply(Ft.console,arguments):VN(e))}};function qN(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Yd(s.response,t,r)},s.onerror=function(){Fr.error("could not download file")},s.send()}function Ek(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Z0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var yv,yC,Yd=Ft.saveAs||((typeof window>"u"?"undefined":yr(window))!=="object"||window!==Ft?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=Ft.URL||Ft.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?Ek(a.href)?qN(e,t,r):Z0(a,a.target="_blank"):Z0(a)):(a.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){Z0(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(Ek(e))qN(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){Z0(s)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:yr(i)!=="object"&&(Fr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return qN(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Ft.HTMLElement)||Ft.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":yr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=f:location=f,s=null},l.readAsDataURL(e)}else{var c=Ft.URL||Ft.webkitURL,d=c.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function S9(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],s=0;s<r.length;s++){var a=r[s].re,i=r[s].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function WN(e,t){var r=e[0],s=e[1],a=e[2],i=e[3];r=Os(r,s,a,i,t[0],7,-680876936),i=Os(i,r,s,a,t[1],12,-389564586),a=Os(a,i,r,s,t[2],17,606105819),s=Os(s,a,i,r,t[3],22,-1044525330),r=Os(r,s,a,i,t[4],7,-176418897),i=Os(i,r,s,a,t[5],12,1200080426),a=Os(a,i,r,s,t[6],17,-1473231341),s=Os(s,a,i,r,t[7],22,-45705983),r=Os(r,s,a,i,t[8],7,1770035416),i=Os(i,r,s,a,t[9],12,-1958414417),a=Os(a,i,r,s,t[10],17,-42063),s=Os(s,a,i,r,t[11],22,-1990404162),r=Os(r,s,a,i,t[12],7,1804603682),i=Os(i,r,s,a,t[13],12,-40341101),a=Os(a,i,r,s,t[14],17,-1502002290),r=Ls(r,s=Os(s,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Ls(i,r,s,a,t[6],9,-1069501632),a=Ls(a,i,r,s,t[11],14,643717713),s=Ls(s,a,i,r,t[0],20,-373897302),r=Ls(r,s,a,i,t[5],5,-701558691),i=Ls(i,r,s,a,t[10],9,38016083),a=Ls(a,i,r,s,t[15],14,-660478335),s=Ls(s,a,i,r,t[4],20,-405537848),r=Ls(r,s,a,i,t[9],5,568446438),i=Ls(i,r,s,a,t[14],9,-1019803690),a=Ls(a,i,r,s,t[3],14,-187363961),s=Ls(s,a,i,r,t[8],20,1163531501),r=Ls(r,s,a,i,t[13],5,-1444681467),i=Ls(i,r,s,a,t[2],9,-51403784),a=Ls(a,i,r,s,t[7],14,1735328473),r=Rs(r,s=Ls(s,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Rs(i,r,s,a,t[8],11,-2022574463),a=Rs(a,i,r,s,t[11],16,1839030562),s=Rs(s,a,i,r,t[14],23,-35309556),r=Rs(r,s,a,i,t[1],4,-1530992060),i=Rs(i,r,s,a,t[4],11,1272893353),a=Rs(a,i,r,s,t[7],16,-155497632),s=Rs(s,a,i,r,t[10],23,-1094730640),r=Rs(r,s,a,i,t[13],4,681279174),i=Rs(i,r,s,a,t[0],11,-358537222),a=Rs(a,i,r,s,t[3],16,-722521979),s=Rs(s,a,i,r,t[6],23,76029189),r=Rs(r,s,a,i,t[9],4,-640364487),i=Rs(i,r,s,a,t[12],11,-421815835),a=Rs(a,i,r,s,t[15],16,530742520),r=$s(r,s=Rs(s,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=$s(i,r,s,a,t[7],10,1126891415),a=$s(a,i,r,s,t[14],15,-1416354905),s=$s(s,a,i,r,t[5],21,-57434055),r=$s(r,s,a,i,t[12],6,1700485571),i=$s(i,r,s,a,t[3],10,-1894986606),a=$s(a,i,r,s,t[10],15,-1051523),s=$s(s,a,i,r,t[1],21,-2054922799),r=$s(r,s,a,i,t[8],6,1873313359),i=$s(i,r,s,a,t[15],10,-30611744),a=$s(a,i,r,s,t[6],15,-1560198380),s=$s(s,a,i,r,t[13],21,1309151649),r=$s(r,s,a,i,t[4],6,-145523070),i=$s(i,r,s,a,t[11],10,-1120210379),a=$s(a,i,r,s,t[2],15,718787259),s=$s(s,a,i,r,t[9],21,-343485551),e[0]=Uc(r,e[0]),e[1]=Uc(s,e[1]),e[2]=Uc(a,e[2]),e[3]=Uc(i,e[3])}function Hj(e,t,r,s,a,i){return t=Uc(Uc(t,e),Uc(s,i)),Uc(t<<a|t>>>32-a,r)}function Os(e,t,r,s,a,i,o){return Hj(t&r|~t&s,e,t,a,i,o)}function Ls(e,t,r,s,a,i,o){return Hj(t&s|r&~s,e,t,a,i,o)}function Rs(e,t,r,s,a,i,o){return Hj(t^r^s,e,t,a,i,o)}function $s(e,t,r,s,a,i,o){return Hj(r^(t|~s),e,t,a,i,o)}function C9(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)WN(s,que(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(WN(s,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,WN(s,a),s}function que(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}yv=Ft.atob.bind(Ft),yC=Ft.btoa.bind(Ft);var Pk="0123456789abcdef".split("");function Wue(e){for(var t="",r=0;r<4;r++)t+=Pk[e>>8*r+4&15]+Pk[e>>8*r&15];return t}function Hue(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function bC(e){return C9(e).map(Hue).join("")}var Gue=function(e){for(var t=0;t<e.length;t++)e[t]=Wue(e[t]);return e.join("")}(C9("hello"))!="5d41402abc4b2a76b9719d911017c592";function Uc(e,t){if(Gue){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function jC(e,t){var r,s,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var f=l[c];d=(d+f+o.charCodeAt(c))%256,l[c]=l[d],l[d]=f}r=e,s=l}else l=s;var u=t.length,h=0,m=0,v="";for(c=0;c<u;c++)m=(m+(f=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=f,o=l[(l[h]+l[m])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Tk={print:4,modify:8,copy:16,"annot-forms":32};function Yf(e,t,r,s){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(Tk.perm!==void 0)throw new Error("Invalid permission: "+l);a+=Tk[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=bC(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=jC(this.encryptionKey,this.padding)}function Xf(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var a=e.charCodeAt(s);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[s]}return t}function _k(e){if(yr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,a){if(a=a||!1,typeof r!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[s,!!a],i},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,s)}catch(l){Ft.console&&Fr.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function ug(e){if(!(this instanceof ug))return new ug(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function A9(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Oc(e,t,r,s,a){if(!(this instanceof Oc))return new Oc(e,t,r,s,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,A9.call(this,s,a)}function du(e,t,r,s,a){if(!(this instanceof du))return new du(e,t,r,s,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,A9.call(this,s,a)}function Tt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",f=null;yr(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,a=e.format||a,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),s=s||"mm",r=(""+(r||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=_k;var v="1.3",g=m.__private__.getPdfVersion=function(){return v};m.__private__.setPdfVersion=function(F){v=F};var p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return p};var x=m.__private__.getPageFormat=function(F){return p[F]};a=a||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},y=b.COMPAT;function j(){this.saveGraphicsState(),re(new Ot(lt,0,0,-lt,0,ic()*lt).toString()+" cm"),this.setFontSize(this.getFontSize()/lt),d="n",y=b.ADVANCED}function E(){this.restoreGraphicsState(),d="S",y=b.COMPAT}var C=m.__private__.combineFontStyleAndFontWeight=function(F,Q){if(F=="bold"&&Q=="normal"||F=="bold"&&Q==400||F=="normal"&&Q=="italic"||F=="bold"&&Q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Q&&(F=Q==400||Q==="normal"?F==="italic"?"italic":"normal":Q!=700&&Q!=="bold"||F!=="normal"?(Q==700?"bold":Q)+""+F:"bold"),F};m.advancedAPI=function(F){var Q=y===b.COMPAT;return Q&&j.call(this),typeof F!="function"||(F(this),Q&&E.call(this)),this},m.compatAPI=function(F){var Q=y===b.ADVANCED;return Q&&E.call(this),typeof F!="function"||(F(this),Q&&j.call(this)),this},m.isAdvancedAPI=function(){return y===b.ADVANCED};var S,N=function(F){if(y!==b.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_=m.roundToPrecision=m.__private__.roundToPrecision=function(F,Q){var pe=t||Q;if(isNaN(F)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(pe).replace(/0+$/,"")};S=m.hpf=m.__private__.hpf=typeof c=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return _(F,c)}:c==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return _(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return _(F,16)};var I=m.f2=m.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return _(F,2)},T=m.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return _(F,3)},A=m.scale=m.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return y===b.COMPAT?F*lt:y===b.ADVANCED?F:void 0},O=function(F){return y===b.COMPAT?ic()-F:y===b.ADVANCED?F:void 0},D=function(F){return A(O(F))};m.__private__.setPrecision=m.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(t=parseInt(F,10))};var $,M="00000000000000000000000000000000",R=m.__private__.getFileId=function(){return M},B=m.__private__.setFileId=function(F){return M=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():M.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(_s=new Yf(f.userPermissions,f.userPassword,f.ownerPassword,M)),M};m.setFileId=function(F){return B(F),this},m.getFileId=function(){return R()};var U=m.__private__.convertDateToPDFDate=function(F){var Q=F.getTimezoneOffset(),pe=Q<0?"+":"-",Se=Math.floor(Math.abs(Q/60)),ke=Math.abs(Q%60),We=[pe,G(Se),"'",G(ke),"'"].join("");return["D:",F.getFullYear(),G(F.getMonth()+1),G(F.getDate()),G(F.getHours()),G(F.getMinutes()),G(F.getSeconds()),We].join("")},W=m.__private__.convertPDFDateToDate=function(F){var Q=parseInt(F.substr(2,4),10),pe=parseInt(F.substr(6,2),10)-1,Se=parseInt(F.substr(8,2),10),ke=parseInt(F.substr(10,2),10),We=parseInt(F.substr(12,2),10),tt=parseInt(F.substr(14,2),10);return new Date(Q,pe,Se,ke,We,tt,0)},q=m.__private__.setCreationDate=function(F){var Q;if(F===void 0&&(F=new Date),F instanceof Date)Q=U(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Q=F}return $=Q},L=m.__private__.getCreationDate=function(F){var Q=$;return F==="jsDate"&&(Q=W($)),Q};m.setCreationDate=function(F){return q(F),this},m.getCreationDate=function(F){return L(F)};var V,G=m.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},Z=m.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},te=0,he=[],me=[],oe=0,we=[],ve=[],ge=!1,De=me,xe=function(){te=0,oe=0,me=[],he=[],we=[],cl=Rn(),ki=Rn()};m.__private__.setCustomOutputDestination=function(F){ge=!0,De=F};var le=function(F){ge||(De=F)};m.__private__.resetCustomOutputDestination=function(){ge=!1,De=me};var re=m.__private__.out=function(F){return F=F.toString(),oe+=F.length+1,De.push(F),De},Ce=m.__private__.write=function(F){return re(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},Ne=m.__private__.getArrayBuffer=function(F){for(var Q=F.length,pe=new ArrayBuffer(Q),Se=new Uint8Array(pe);Q--;)Se[Q]=F.charCodeAt(Q);return pe},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ye};var $e=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(F){return $e=y===b.ADVANCED?F/lt:F,this};var nt,rt=m.__private__.getFontSize=m.getFontSize=function(){return y===b.COMPAT?$e:$e*lt},gt=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(F){return gt=F,this},m.__private__.getR2L=m.getR2L=function(){return gt};var Me,Ze=m.__private__.setZoomMode=function(F){var Q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))nt=F;else if(isNaN(F)){if(Q.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');nt=F}else nt=parseInt(F,10)};m.__private__.getZoomMode=function(){return nt};var ft,xt=m.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');Me=F};m.__private__.getPageMode=function(){return Me};var kt=m.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');ft=F};m.__private__.getLayoutMode=function(){return ft},m.__private__.setDisplayMode=m.setDisplayMode=function(F,Q,pe){return Ze(F),kt(Q),xt(pe),this};var St={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(F){if(Object.keys(St).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return St[F]},m.__private__.getDocumentProperties=function(){return St},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(F){for(var Q in St)St.hasOwnProperty(Q)&&F[Q]&&(St[Q]=F[Q]);return this},m.__private__.setDocumentProperty=function(F,Q){if(Object.keys(St).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return St[F]=Q};var zt,lt,jr,Xt,Wn,wr={},kr={},aa=[],dr={},ol={},xn={},_i={},ll=null,yn=0,Wt=[],Sr=new _k(m),Id=e.hotfixes||[],vs={},yo={},bo=[],Ot=function F(Q,pe,Se,ke,We,tt){if(!(this instanceof F))return new F(Q,pe,Se,ke,We,tt);isNaN(Q)&&(Q=1),isNaN(pe)&&(pe=0),isNaN(Se)&&(Se=0),isNaN(ke)&&(ke=1),isNaN(We)&&(We=0),isNaN(tt)&&(tt=0),this._matrix=[Q,pe,Se,ke,We,tt]};Object.defineProperty(Ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ot.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(F)},Ot.prototype.multiply=function(F){var Q=F.sx*this.sx+F.shy*this.shx,pe=F.sx*this.shy+F.shy*this.sy,Se=F.shx*this.sx+F.sy*this.shx,ke=F.shx*this.shy+F.sy*this.sy,We=F.tx*this.sx+F.ty*this.shx+this.tx,tt=F.tx*this.shy+F.ty*this.sy+this.ty;return new Ot(Q,pe,Se,ke,We,tt)},Ot.prototype.decompose=function(){var F=this.sx,Q=this.shy,pe=this.shx,Se=this.sy,ke=this.tx,We=this.ty,tt=Math.sqrt(F*F+Q*Q),mt=(F/=tt)*pe+(Q/=tt)*Se;pe-=F*mt,Se-=Q*mt;var Pt=Math.sqrt(pe*pe+Se*Se);return mt/=Pt,F*(Se/=Pt)<Q*(pe/=Pt)&&(F=-F,Q=-Q,mt=-mt,tt=-tt),{scale:new Ot(tt,0,0,Pt,0,0),translate:new Ot(1,0,0,1,ke,We),rotate:new Ot(F,Q,-Q,F,0,0),skew:new Ot(1,0,mt,1,0,0)}},Ot.prototype.toString=function(F){return this.join(" ")},Ot.prototype.inversed=function(){var F=this.sx,Q=this.shy,pe=this.shx,Se=this.sy,ke=this.tx,We=this.ty,tt=1/(F*Se-Q*pe),mt=Se*tt,Pt=-Q*tt,Kt=-pe*tt,Ht=F*tt;return new Ot(mt,Pt,Kt,Ht,-mt*ke-Kt*We,-Pt*ke-Ht*We)},Ot.prototype.applyToPoint=function(F){var Q=F.x*this.sx+F.y*this.shx+this.tx,pe=F.x*this.shy+F.y*this.sy+this.ty;return new gf(Q,pe)},Ot.prototype.applyToRectangle=function(F){var Q=this.applyToPoint(F),pe=this.applyToPoint(new gf(F.x+F.w,F.y+F.h));return new ap(Q.x,Q.y,pe.x-Q.x,pe.y-Q.y)},Ot.prototype.clone=function(){var F=this.sx,Q=this.shy,pe=this.shx,Se=this.sy,ke=this.tx,We=this.ty;return new Ot(F,Q,pe,Se,ke,We)},m.Matrix=Ot;var Ii=m.matrixMult=function(F,Q){return Q.multiply(F)},jo=new Ot(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=jo;var ia=function(F,Q){if(!ol[F]){var pe=(Q instanceof Oc?"Sh":"P")+(Object.keys(dr).length+1).toString(10);Q.id=pe,ol[F]=pe,dr[pe]=Q,Sr.publish("addPattern",Q)}};m.ShadingPattern=Oc,m.TilingPattern=du,m.addShadingPattern=function(F,Q){return N("addShadingPattern()"),ia(F,Q),this},m.beginTilingPattern=function(F){N("beginTilingPattern()"),Hx(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},m.endTilingPattern=function(F,Q){N("endTilingPattern()"),Q.stream=ve[V].join(`
`),ia(F,Q),Sr.publish("endTilingPattern",Q),bo.pop().restore()};var Hn=m.__private__.newObject=function(){var F=Rn();return Pa(F,!0),F},Rn=m.__private__.newObjectDeferred=function(){return te++,he[te]=function(){return oe},te},Pa=function(F,Q){return Q=typeof Q=="boolean"&&Q,he[F]=oe,Q&&re(F+" 0 obj"),F},nf=m.__private__.newAdditionalObject=function(){var F={objId:Rn(),content:""};return we.push(F),F},cl=Rn(),ki=Rn(),Di=m.__private__.decodeColorString=function(F){var Q=F.split(" ");if(Q.length!==2||Q[1]!=="g"&&Q[1]!=="G")Q.length===5&&(Q[4]==="k"||Q[4]==="K")&&(Q=[(1-Q[0])*(1-Q[3]),(1-Q[1])*(1-Q[3]),(1-Q[2])*(1-Q[3]),"r"]);else{var pe=parseFloat(Q[0]);Q=[pe,pe,pe,"r"]}for(var Se="#",ke=0;ke<3;ke++)Se+=("0"+Math.floor(255*parseFloat(Q[ke])).toString(16)).slice(-2);return Se},Oi=m.__private__.encodeColorString=function(F){var Q;typeof F=="string"&&(F={ch1:F});var pe=F.ch1,Se=F.ch2,ke=F.ch3,We=F.ch4,tt=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var mt=new S9(pe);if(mt.ok)pe=mt.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var Pt=parseInt(pe.substr(1),16);pe=Pt>>16&255,Se=Pt>>8&255,ke=255&Pt}if(Se===void 0||We===void 0&&pe===Se&&Se===ke)if(typeof pe=="string")Q=pe+" "+tt[0];else switch(F.precision){case 2:Q=I(pe/255)+" "+tt[0];break;case 3:default:Q=T(pe/255)+" "+tt[0]}else if(We===void 0||yr(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return Q=["1.","1.","1.",tt[1]].join(" ");if(typeof pe=="string")Q=[pe,Se,ke,tt[1]].join(" ");else switch(F.precision){case 2:Q=[I(pe/255),I(Se/255),I(ke/255),tt[1]].join(" ");break;default:case 3:Q=[T(pe/255),T(Se/255),T(ke/255),tt[1]].join(" ")}}else if(typeof pe=="string")Q=[pe,Se,ke,We,tt[2]].join(" ");else switch(F.precision){case 2:Q=[I(pe),I(Se),I(ke),I(We),tt[2]].join(" ");break;case 3:default:Q=[T(pe),T(Se),T(ke),T(We),tt[2]].join(" ")}return Q},wo=m.__private__.getFilters=function(){return o},Ja=m.__private__.putStream=function(F){var Q=(F=F||{}).data||"",pe=F.filters||wo(),Se=F.alreadyAppliedFilters||[],ke=F.addLength1||!1,We=Q.length,tt=F.objectId,mt=function(Is){return Is};if(f!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(mt=_s.encryptor(tt,0));var Pt={};pe===!0&&(pe=["FlateEncode"]);var Kt=F.additionalKeyValues||[],Ht=(Pt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(Q,pe):{data:Q,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(Pt.data.length!==0&&(Kt.push({key:"Length",value:Pt.data.length}),ke===!0&&Kt.push({key:"Length1",value:We})),Ht.length!=0)if(Ht.split("/").length-1==1)Kt.push({key:"Filter",value:Ht});else{Kt.push({key:"Filter",value:"["+Ht+"]"});for(var ur=0;ur<Kt.length;ur+=1)if(Kt[ur].key==="DecodeParms"){for(var un=[],bn=0;bn<Pt.reverseChain.split("/").length-1;bn+=1)un.push("null");un.push(Kt[ur].value),Kt[ur].value="["+un.join(" ")+"]"}}re("<<");for(var $n=0;$n<Kt.length;$n++)re("/"+Kt[$n].key+" "+Kt[$n].value);re(">>"),Pt.data.length!==0&&(re("stream"),re(mt(Pt.data)),re("endstream"))},No=m.__private__.putPage=function(F){var Q=F.number,pe=F.data,Se=F.objId,ke=F.contentsObjId;Pa(Se,!0),re("<</Type /Page"),re("/Parent "+F.rootDictionaryObjId+" 0 R"),re("/Resources "+F.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(S(F.mediaBox.bottomLeftX))+" "+parseFloat(S(F.mediaBox.bottomLeftY))+" "+S(F.mediaBox.topRightX)+" "+S(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&re("/CropBox ["+S(F.cropBox.bottomLeftX)+" "+S(F.cropBox.bottomLeftY)+" "+S(F.cropBox.topRightX)+" "+S(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&re("/BleedBox ["+S(F.bleedBox.bottomLeftX)+" "+S(F.bleedBox.bottomLeftY)+" "+S(F.bleedBox.topRightX)+" "+S(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&re("/TrimBox ["+S(F.trimBox.bottomLeftX)+" "+S(F.trimBox.bottomLeftY)+" "+S(F.trimBox.topRightX)+" "+S(F.trimBox.topRightY)+"]"),F.artBox!==null&&re("/ArtBox ["+S(F.artBox.bottomLeftX)+" "+S(F.artBox.bottomLeftY)+" "+S(F.artBox.topRightX)+" "+S(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&re("/UserUnit "+F.userUnit),Sr.publish("putPage",{objId:Se,pageContext:Wt[Q],pageNumber:Q,page:pe}),re("/Contents "+ke+" 0 R"),re(">>"),re("endobj");var We=pe.join(`
`);return y===b.ADVANCED&&(We+=`
Q`),Pa(ke,!0),Ja({data:We,filters:wo(),objectId:ke}),re("endobj"),Se},kd=m.__private__.putPages=function(){var F,Q,pe=[];for(F=1;F<=yn;F++)Wt[F].objId=Rn(),Wt[F].contentsObjId=Rn();for(F=1;F<=yn;F++)pe.push(No({number:F,data:ve[F],objId:Wt[F].objId,contentsObjId:Wt[F].contentsObjId,mediaBox:Wt[F].mediaBox,cropBox:Wt[F].cropBox,bleedBox:Wt[F].bleedBox,trimBox:Wt[F].trimBox,artBox:Wt[F].artBox,userUnit:Wt[F].userUnit,rootDictionaryObjId:cl,resourceDictionaryObjId:ki}));Pa(cl,!0),re("<</Type /Pages");var Se="/Kids [";for(Q=0;Q<yn;Q++)Se+=pe[Q]+" 0 R ";re(Se+"]"),re("/Count "+yn),re(">>"),re("endobj"),Sr.publish("postPutPages")},sf=function(F){Sr.publish("putFont",{font:F,out:re,newObject:Hn,putStream:Ja}),F.isAlreadyPutted!==!0&&(F.objectNumber=Hn(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Xf(F.postScriptName)),re("/Subtype /Type1"),typeof F.encoding=="string"&&re("/Encoding /"+F.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},af=function(){for(var F in wr)wr.hasOwnProperty(F)&&(u===!1||u===!0&&h.hasOwnProperty(F))&&sf(wr[F])},of=function(F){F.objectNumber=Hn();var Q=[];Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Form"}),Q.push({key:"BBox",value:"["+[S(F.x),S(F.y),S(F.x+F.width),S(F.y+F.height)].join(" ")+"]"}),Q.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var pe=F.pages[1].join(`
`);Ja({data:pe,additionalKeyValues:Q,objectId:F.objectNumber}),re("endobj")},lf=function(){for(var F in vs)vs.hasOwnProperty(F)&&of(vs[F])},Px=function(F,Q){var pe,Se=[],ke=1/(Q-1);for(pe=0;pe<1;pe+=ke)Se.push(pe);if(Se.push(1),F[0].offset!=0){var We={offset:0,color:F[0].color};F.unshift(We)}if(F[F.length-1].offset!=1){var tt={offset:1,color:F[F.length-1].color};F.push(tt)}for(var mt="",Pt=0,Kt=0;Kt<Se.length;Kt++){for(pe=Se[Kt];pe>F[Pt+1].offset;)Pt++;var Ht=F[Pt].offset,ur=(pe-Ht)/(F[Pt+1].offset-Ht),un=F[Pt].color,bn=F[Pt+1].color;mt+=Z(Math.round((1-ur)*un[0]+ur*bn[0]).toString(16))+Z(Math.round((1-ur)*un[1]+ur*bn[1]).toString(16))+Z(Math.round((1-ur)*un[2]+ur*bn[2]).toString(16))}return mt.trim()},zw=function(F,Q){Q||(Q=21);var pe=Hn(),Se=Px(F.colors,Q),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+Q+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ja({data:Se,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),re("endobj"),F.objectNumber=Hn(),re("<< /ShadingType "+F.type),re("/ColorSpace /DeviceRGB");var We="/Coords ["+S(parseFloat(F.coords[0]))+" "+S(parseFloat(F.coords[1]))+" ";F.type===2?We+=S(parseFloat(F.coords[2]))+" "+S(parseFloat(F.coords[3])):We+=S(parseFloat(F.coords[2]))+" "+S(parseFloat(F.coords[3]))+" "+S(parseFloat(F.coords[4]))+" "+S(parseFloat(F.coords[5])),re(We+="]"),F.matrix&&re("/Matrix ["+F.matrix.toString()+"]"),re("/Function "+pe+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Uw=function(F,Q){var pe=Rn(),Se=Hn();Q.push({resourcesOid:pe,objectOid:Se}),F.objectNumber=Se;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+F.boundingBox.map(S).join(" ")+"]"}),ke.push({key:"XStep",value:S(F.xStep)}),ke.push({key:"YStep",value:S(F.yStep)}),ke.push({key:"Resources",value:pe+" 0 R"}),F.matrix&&ke.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),Ja({data:F.stream,additionalKeyValues:ke,objectId:F.objectNumber}),re("endobj")},cf=function(F){var Q;for(Q in dr)dr.hasOwnProperty(Q)&&(dr[Q]instanceof Oc?zw(dr[Q]):dr[Q]instanceof du&&Uw(dr[Q],F))},Tx=function(F){for(var Q in F.objectNumber=Hn(),re("<<"),F)switch(Q){case"opacity":re("/ca "+I(F[Q]));break;case"stroke-opacity":re("/CA "+I(F[Q]))}re(">>"),re("endobj")},Vw=function(){var F;for(F in xn)xn.hasOwnProperty(F)&&Tx(xn[F])},Ym=function(){for(var F in re("/XObject <<"),vs)vs.hasOwnProperty(F)&&vs[F].objectNumber>=0&&re("/"+F+" "+vs[F].objectNumber+" 0 R");Sr.publish("putXobjectDict"),re(">>")},qw=function(){_s.oid=Hn(),re("<<"),re("/Filter /Standard"),re("/V "+_s.v),re("/R "+_s.r),re("/U <"+_s.toHexString(_s.U)+">"),re("/O <"+_s.toHexString(_s.O)+">"),re("/P "+_s.P),re(">>"),re("endobj")},_x=function(){for(var F in re("/Font <<"),wr)wr.hasOwnProperty(F)&&(u===!1||u===!0&&h.hasOwnProperty(F))&&re("/"+F+" "+wr[F].objectNumber+" 0 R");re(">>")},Ww=function(){if(Object.keys(dr).length>0){for(var F in re("/Shading <<"),dr)dr.hasOwnProperty(F)&&dr[F]instanceof Oc&&dr[F].objectNumber>=0&&re("/"+F+" "+dr[F].objectNumber+" 0 R");Sr.publish("putShadingPatternDict"),re(">>")}},df=function(F){if(Object.keys(dr).length>0){for(var Q in re("/Pattern <<"),dr)dr.hasOwnProperty(Q)&&dr[Q]instanceof m.TilingPattern&&dr[Q].objectNumber>=0&&dr[Q].objectNumber<F&&re("/"+Q+" "+dr[Q].objectNumber+" 0 R");Sr.publish("putTilingPatternDict"),re(">>")}},Hw=function(){if(Object.keys(xn).length>0){var F;for(F in re("/ExtGState <<"),xn)xn.hasOwnProperty(F)&&xn[F].objectNumber>=0&&re("/"+F+" "+xn[F].objectNumber+" 0 R");Sr.publish("putGStateDict"),re(">>")}},En=function(F){Pa(F.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),_x(),Ww(),df(F.objectOid),Hw(),Ym(),re(">>"),re("endobj")},Ix=function(){var F=[];af(),Vw(),lf(),cf(F),Sr.publish("putResources"),F.forEach(En),En({resourcesOid:ki,objectOid:Number.MAX_SAFE_INTEGER}),Sr.publish("postPutResources")},kx=function(){Sr.publish("putAdditionalObjects");for(var F=0;F<we.length;F++){var Q=we[F];Pa(Q.objId,!0),re(Q.content),re("endobj")}Sr.publish("postPutAdditionalObjects")},Dx=function(F){kr[F.fontName]=kr[F.fontName]||{},kr[F.fontName][F.fontStyle]=F.id},Xm=function(F,Q,pe,Se,ke){var We={id:"F"+(Object.keys(wr).length+1).toString(10),postScriptName:F,fontName:Q,fontStyle:pe,encoding:Se,isStandardFont:ke||!1,metadata:{}};return Sr.publish("addFont",{font:We,instance:this}),wr[We.id]=We,Dx(We),We.id},Gw=function(F){for(var Q=0,pe=ye.length;Q<pe;Q++){var Se=Xm.call(this,F[Q][0],F[Q][1],F[Q][2],ye[Q][3],!0);u===!1&&(h[Se]=!0);var ke=F[Q][0].split("-");Dx({id:Se,fontName:ke[0],fontStyle:ke[1]||""})}Sr.publish("addFonts",{fonts:wr,dictionary:kr})},Li=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(Se){var Q=Se.stack||"";~Q.indexOf(" at ")&&(Q=Q.split(" at ")[1]);var pe="Error in function "+Q.split(`
`)[0].split("<")[0]+": "+Se.message;if(!Ft.console)throw new Error(pe);Ft.console.error(pe,Se),Ft.alert&&alert(pe)}},F.foo.bar=F,F.foo},uf=function(F,Q){var pe,Se,ke,We,tt,mt,Pt,Kt,Ht;if(ke=(Q=Q||{}).sourceEncoding||"Unicode",tt=Q.outputEncoding,(Q.autoencode||tt)&&wr[zt].metadata&&wr[zt].metadata[ke]&&wr[zt].metadata[ke].encoding&&(We=wr[zt].metadata[ke].encoding,!tt&&wr[zt].encoding&&(tt=wr[zt].encoding),!tt&&We.codePages&&(tt=We.codePages[0]),typeof tt=="string"&&(tt=We[tt]),tt)){for(Pt=!1,mt=[],pe=0,Se=F.length;pe<Se;pe++)(Kt=tt[F.charCodeAt(pe)])?mt.push(String.fromCharCode(Kt)):mt.push(F[pe]),mt[pe].charCodeAt(0)>>8&&(Pt=!0);F=mt.join("")}for(pe=F.length;Pt===void 0&&pe!==0;)F.charCodeAt(pe-1)>>8&&(Pt=!0),pe--;if(!Pt)return F;for(mt=Q.noBOM?[]:[254,255],pe=0,Se=F.length;pe<Se;pe++){if((Ht=(Kt=F.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");mt.push(Ht),mt.push(Kt-(Ht<<8))}return String.fromCharCode.apply(void 0,mt)},oa=m.__private__.pdfEscape=m.pdfEscape=function(F,Q){return uf(F,Q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qm=m.__private__.beginPage=function(F){ve[++yn]=[],Wt[yn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},Lx(yn),le(ve[V])},Ox=function(F,Q){var pe,Se,ke;switch(r=Q||r,typeof F=="string"&&(pe=x(F.toLowerCase()),Array.isArray(pe)&&(Se=pe[0],ke=pe[1])),Array.isArray(F)&&(Se=F[0]*lt,ke=F[1]*lt),isNaN(Se)&&(Se=a[0],ke=a[1]),(Se>14400||ke>14400)&&(Fr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),ke=Math.min(14400,ke)),a=[Se,ke],r.substr(0,1)){case"l":ke>Se&&(a=[ke,Se]);break;case"p":Se>ke&&(a=[ke,Se])}Qm(a),zx(tp),re(Ri),np!==0&&re(np+" J"),sp!==0&&re(sp+" j"),Sr.publish("addPage",{pageNumber:yn})},Kw=function(F){F>0&&F<=yn&&(ve.splice(F,1),Wt.splice(F,1),yn--,V>yn&&(V=yn),this.setPage(V))},Lx=function(F){F>0&&F<=yn&&(V=F)},Yw=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ve.length-1},Rx=function(F,Q,pe){var Se,ke=void 0;return pe=pe||{},F=F!==void 0?F:wr[zt].fontName,Q=Q!==void 0?Q:wr[zt].fontStyle,Se=F.toLowerCase(),kr[Se]!==void 0&&kr[Se][Q]!==void 0?ke=kr[Se][Q]:kr[F]!==void 0&&kr[F][Q]!==void 0?ke=kr[F][Q]:pe.disableWarning===!1&&Fr.warn("Unable to look up font label for font '"+F+"', '"+Q+"'. Refer to getFontList() for available fonts."),ke||pe.noFallback||(ke=kr.times[Q])==null&&(ke=kr.times.normal),ke},Xw=m.__private__.putInfo=function(){var F=Hn(),Q=function(Se){return Se};for(var pe in f!==null&&(Q=_s.encryptor(F,0)),re("<<"),re("/Producer ("+oa(Q("jsPDF "+Tt.version))+")"),St)St.hasOwnProperty(pe)&&St[pe]&&re("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+oa(Q(St[pe]))+")");re("/CreationDate ("+oa(Q($))+")"),re(">>"),re("endobj")},Jm=m.__private__.putCatalog=function(F){var Q=(F=F||{}).rootDictionaryObjId||cl;switch(Hn(),re("<<"),re("/Type /Catalog"),re("/Pages "+Q+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+nt;pe.substr(pe.length-1)==="%"&&(nt=parseInt(nt)/100),typeof nt=="number"&&re("/OpenAction [3 0 R /XYZ null null "+I(nt)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Me&&re("/PageMode /"+Me),Sr.publish("putCatalog"),re(">>"),re("endobj")},Qw=m.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(te+1)),re("/Root "+te+" 0 R"),re("/Info "+(te-1)+" 0 R"),f!==null&&re("/Encrypt "+_s.oid+" 0 R"),re("/ID [ <"+M+"> <"+M+"> ]"),re(">>")},Jw=m.__private__.putHeader=function(){re("%PDF-"+v),re("%ºß¬à")},Zw=m.__private__.putXRef=function(){var F="0000000000";re("xref"),re("0 "+(te+1)),re("0000000000 65535 f ");for(var Q=1;Q<=te;Q++)typeof he[Q]=="function"?re((F+he[Q]()).slice(-10)+" 00000 n "):he[Q]!==void 0?re((F+he[Q]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},dl=m.__private__.buildDocument=function(){xe(),le(me),Sr.publish("buildDocument"),Jw(),kd(),kx(),Ix(),f!==null&&qw(),Xw(),Jm();var F=oe;return Zw(),Qw(),re("startxref"),re(""+F),re("%%EOF"),le(ve[V]),me.join(`
`)},ff=m.__private__.getBlob=function(F){return new Blob([Ne(F)],{type:"application/pdf"})},hf=m.output=m.__private__.output=Li(function(F,Q){switch(typeof(Q=Q||{})=="string"?Q={filename:Q}:Q.filename=Q.filename||"generated.pdf",F){case void 0:return dl();case"save":m.save(Q.filename);break;case"arraybuffer":return Ne(dl());case"blob":return ff(dl());case"bloburi":case"bloburl":if(Ft.URL!==void 0&&typeof Ft.URL.createObjectURL=="function")return Ft.URL&&Ft.URL.createObjectURL(ff(dl()))||void 0;Fr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",Se=dl();try{pe=yC(Se)}catch{pe=yC(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+Q.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ft)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Q.pdfObjectUrl&&(ke=Q.pdfObjectUrl,We="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Q)+");<\/script></body></html>",mt=Ft.open();return mt!==null&&mt.document.write(tt),mt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ft)==="[object Window]"){var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Q.filename+'" width="500px" height="400px" /></body></html>',Kt=Ft.open();if(Kt!==null){Kt.document.write(Pt);var Ht=this;Kt.document.documentElement.querySelector("#pdfViewer").onload=function(){Kt.document.title=Q.filename,Kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ht.output("bloburl"))}}return Kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ft)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Q)+'"></iframe></body></html>',un=Ft.open();if(un!==null&&(un.document.write(ur),un.document.title=Q.filename),un||typeof safari>"u")return un;break;case"datauri":case"dataurl":return Ft.document.location.href=this.output("datauristring",Q);default:return null}}),$x=function(F){return Array.isArray(Id)===!0&&Id.indexOf(F)>-1};switch(s){case"pt":lt=1;break;case"mm":lt=72/25.4;break;case"cm":lt=72/2.54;break;case"in":lt=72;break;case"px":lt=$x("px_scaling")==1?.75:96/72;break;case"pc":case"em":lt=12;break;case"ex":lt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);lt=s}var _s=null;q(),B();var e2=function(F){return f!==null?_s.encryptor(F,0):function(Q){return Q}},Fx=m.__private__.getPageInfo=m.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Wt[F].objId,pageNumber:F,pageContext:Wt[F]}},qt=m.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Q in Wt)if(Wt[Q].objId===F)break;return Fx(Q)},t2=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Wt[V].objId,pageNumber:V,pageContext:Wt[V]}};m.addPage=function(){return Ox.apply(this,arguments),this},m.setPage=function(){return Lx.apply(this,arguments),le.call(this,ve[V]),this},m.insertPage=function(F){return this.addPage(),this.movePage(V,F),this},m.movePage=function(F,Q){var pe,Se;if(F>Q){pe=ve[F],Se=Wt[F];for(var ke=F;ke>Q;ke--)ve[ke]=ve[ke-1],Wt[ke]=Wt[ke-1];ve[Q]=pe,Wt[Q]=Se,this.setPage(Q)}else if(F<Q){pe=ve[F],Se=Wt[F];for(var We=F;We<Q;We++)ve[We]=ve[We+1],Wt[We]=Wt[We+1];ve[Q]=pe,Wt[Q]=Se,this.setPage(Q)}return this},m.deletePage=function(){return Kw.apply(this,arguments),this},m.__private__.text=m.text=function(F,Q,pe,Se,ke){var We,tt,mt,Pt,Kt,Ht,ur,un,bn,$n=(Se=Se||{}).scope||this;if(typeof F=="number"&&typeof Q=="number"&&(typeof pe=="string"||Array.isArray(pe))){var Is=pe;pe=Q,Q=F,F=Is}if(arguments[3]instanceof Ot?(N("The transform parameter of text() with a Matrix value"),bn=ke):(mt=arguments[4],Pt=arguments[5],yr(ur=arguments[3])==="object"&&ur!==null||(typeof mt=="string"&&(Pt=mt,mt=null),typeof ur=="string"&&(Pt=ur,ur=null),typeof ur=="number"&&(mt=ur,ur=null),Se={flags:ur,angle:mt,align:Pt})),isNaN(Q)||isNaN(pe)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return $n;var ns="",$i=!1,Ta=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:Od,Ao=$n.internal.scaleFactor;function Gx(Vr){return Vr=Vr.split("	").join(Array(Se.TabLen||9).join(" ")),oa(Vr,ur)}function cp(Vr){for(var qr,Tn=Vr.concat(),Gn=[],pl=Tn.length;pl--;)typeof(qr=Tn.shift())=="string"?Gn.push(qr):Array.isArray(Vr)&&(qr.length===1||qr[1]===void 0&&qr[2]===void 0)?Gn.push(qr[0]):Gn.push([qr[0],qr[1],qr[2]]);return Gn}function dp(Vr,qr){var Tn;if(typeof Vr=="string")Tn=qr(Vr)[0];else if(Array.isArray(Vr)){for(var Gn,pl,xp=Vr.concat(),Pf=[],Jx=xp.length;Jx--;)typeof(Gn=xp.shift())=="string"?Pf.push(qr(Gn)[0]):Array.isArray(Gn)&&typeof Gn[0]=="string"&&(pl=qr(Gn[0],Gn[1],Gn[2]),Pf.push([pl[0],pl[1],pl[2]]));Tn=Pf}return Tn}var yf=!1,up=!0;if(typeof F=="string")yf=!0;else if(Array.isArray(F)){var fp=F.concat();tt=[];for(var bf,gs=fp.length;gs--;)(typeof(bf=fp.shift())!="string"||Array.isArray(bf)&&typeof bf[0]!="string")&&(up=!1);yf=up}if(yf===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var jf=$e/$n.internal.scaleFactor,wf=jf*(Ta-1);switch(Se.baseline){case"bottom":pe-=wf;break;case"top":pe+=jf-wf;break;case"hanging":pe+=jf-2*wf;break;case"middle":pe+=jf/2-wf}if((Ht=Se.maxWidth||0)>0&&(typeof F=="string"?F=$n.splitTextToSize(F,Ht):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Vr,qr){return Vr.concat($n.splitTextToSize(qr,Ht))},[]))),We={text:F,x:Q,y:pe,options:Se,mutex:{pdfEscape:oa,activeFontKey:zt,fonts:wr,activeFontSize:$e}},Sr.publish("preProcessText",We),F=We.text,mt=(Se=We.options).angle,!(bn instanceof Ot)&&mt&&typeof mt=="number"){mt*=Math.PI/180,Se.rotationDirection===0&&(mt=-mt),y===b.ADVANCED&&(mt=-mt);var Nf=Math.cos(mt),hp=Math.sin(mt);bn=new Ot(Nf,hp,-hp,Nf,0,0)}else mt&&mt instanceof Ot&&(bn=mt);y!==b.ADVANCED||bn||(bn=jo),(Kt=Se.charSpace||vf)!==void 0&&(ns+=S(A(Kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(un=Se.horizontalScale)!==void 0&&(ns+=S(100*un)+` Tz
`),Se.lang;var la=-1,u2=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,mp=$n.internal.getCurrentPageInfo().pageContext;switch(u2){case 0:case!1:case"fill":la=0;break;case 1:case!0:case"stroke":la=1;break;case 2:case"fillThenStroke":la=2;break;case 3:case"invisible":la=3;break;case 4:case"fillAndAddForClipping":la=4;break;case 5:case"strokeAndAddPathForClipping":la=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":la=6;break;case 7:case"addToPathForClipping":la=7}var Kx=mp.usedRenderingMode!==void 0?mp.usedRenderingMode:-1;la!==-1?ns+=la+` Tr
`:Kx!==-1&&(ns+=`0 Tr
`),la!==-1&&(mp.usedRenderingMode=la),Pt=Se.align||"left";var Za,Sf=$e*Ta,Yx=$n.internal.pageSize.getWidth(),Xx=wr[zt];Kt=Se.charSpace||vf,Ht=Se.maxWidth||0,ur=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var oc=[],$d=function(Vr){return $n.getStringUnitWidth(Vr,{font:Xx,charSpace:Kt,fontSize:$e,doKerning:!1})*$e/Ao};if(Object.prototype.toString.call(F)==="[object Array]"){var ca;tt=cp(F),Pt!=="left"&&(Za=tt.map($d));var Gs,lc=0;if(Pt==="right"){Q-=Za[0],F=[],gs=tt.length;for(var fl=0;fl<gs;fl++)fl===0?(Gs=Co(Q),ca=ul(pe)):(Gs=A(lc-Za[fl]),ca=-Sf),F.push([tt[fl],Gs,ca]),lc=Za[fl]}else if(Pt==="center"){Q-=Za[0]/2,F=[],gs=tt.length;for(var hl=0;hl<gs;hl++)hl===0?(Gs=Co(Q),ca=ul(pe)):(Gs=A((lc-Za[hl])/2),ca=-Sf),F.push([tt[hl],Gs,ca]),lc=Za[hl]}else if(Pt==="left"){F=[],gs=tt.length;for(var Cf=0;Cf<gs;Cf++)F.push(tt[Cf])}else if(Pt==="justify"&&Xx.encoding==="Identity-H"){F=[],gs=tt.length,Ht=Ht!==0?Ht:Yx;for(var ml=0,Pn=0;Pn<gs;Pn++)if(ca=Pn===0?ul(pe):-Sf,Gs=Pn===0?Co(Q):ml,Pn<gs-1){var pp=A((Ht-Za[Pn])/(tt[Pn].split(" ").length-1)),Ks=tt[Pn].split(" ");F.push([Ks[0]+" ",Gs,ca]),ml=0;for(var ei=1;ei<Ks.length;ei++){var Af=($d(Ks[ei-1]+" "+Ks[ei])-$d(Ks[ei]))*Ao+pp;ei==Ks.length-1?F.push([Ks[ei],Af,0]):F.push([Ks[ei]+" ",Af,0]),ml-=Af}}else F.push([tt[Pn],Gs,ca]);F.push(["",ml,0])}else{if(Pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],gs=tt.length,Ht=Ht!==0?Ht:Yx,Pn=0;Pn<gs;Pn++)ca=Pn===0?ul(pe):-Sf,Gs=Pn===0?Co(Q):0,Pn<gs-1?oc.push(S(A((Ht-Za[Pn])/(tt[Pn].split(" ").length-1)))):oc.push(0),F.push([tt[Pn],Gs,ca])}}var Qx=typeof Se.R2L=="boolean"?Se.R2L:gt;Qx===!0&&(F=dp(F,function(Vr,qr,Tn){return[Vr.split("").reverse().join(""),qr,Tn]})),We={text:F,x:Q,y:pe,options:Se,mutex:{pdfEscape:oa,activeFontKey:zt,fonts:wr,activeFontSize:$e}},Sr.publish("postProcessText",We),F=We.text,$i=We.mutex.isHex||!1;var vp=wr[zt].encoding;vp!=="WinAnsiEncoding"&&vp!=="StandardEncoding"||(F=dp(F,function(Vr,qr,Tn){return[Gx(Vr),qr,Tn]})),tt=cp(F),F=[];for(var Fd,Md,cc,Bd=0,Ef=1,zd=Array.isArray(tt[0])?Ef:Bd,dc="",gp=function(Vr,qr,Tn){var Gn="";return Tn instanceof Ot?(Tn=typeof Se.angle=="number"?Ii(Tn,new Ot(1,0,0,1,Vr,qr)):Ii(new Ot(1,0,0,1,Vr,qr),Tn),y===b.ADVANCED&&(Tn=Ii(new Ot(1,0,0,-1,0,0),Tn)),Gn=Tn.join(" ")+` Tm
`):Gn=S(Vr)+" "+S(qr)+` Td
`,Gn},ti=0;ti<tt.length;ti++){switch(dc="",zd){case Ef:cc=($i?"<":"(")+tt[ti][0]+($i?">":")"),Fd=parseFloat(tt[ti][1]),Md=parseFloat(tt[ti][2]);break;case Bd:cc=($i?"<":"(")+tt[ti]+($i?">":")"),Fd=Co(Q),Md=ul(pe)}oc!==void 0&&oc[ti]!==void 0&&(dc=oc[ti]+` Tw
`),ti===0?F.push(dc+gp(Fd,Md,bn)+cc):zd===Bd?F.push(dc+cc):zd===Ef&&F.push(dc+gp(Fd,Md,bn)+cc)}F=zd===Bd?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var ri=`BT
/`;return ri+=zt+" "+$e+` Tf
`,ri+=S($e*Ta)+` TL
`,ri+=Ld+`
`,ri+=ns,ri+=F,re(ri+="ET"),h[zt]=!0,$n};var r2=m.__private__.clip=m.clip=function(F){return re(F==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return r2("evenodd")},m.__private__.discardPath=m.discardPath=function(){return re("n"),this};var So=m.__private__.isValidStyle=function(F){var Q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(Q=!0),Q};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(F){return So(F)&&(d=F),this};var Mx=m.__private__.getStyle=m.getStyle=function(F){var Q=d;switch(F){case"D":case"S":Q="S";break;case"F":Q="f";break;case"FD":case"DF":Q="B";break;case"f":case"f*":case"B":case"B*":Q=F}return Q},Bx=m.close=function(){return re("h"),this};m.stroke=function(){return re("S"),this},m.fill=function(F){return mf("f",F),this},m.fillEvenOdd=function(F){return mf("f*",F),this},m.fillStroke=function(F){return mf("B",F),this},m.fillStrokeEvenOdd=function(F){return mf("B*",F),this};var mf=function(F,Q){yr(Q)==="object"?s2(Q,F):re(F)},Zm=function(F){F===null||y===b.ADVANCED&&F===void 0||(F=Mx(F),re(F))};function n2(F,Q,pe,Se,ke){var We=new du(Q||this.boundingBox,pe||this.xStep,Se||this.yStep,this.gState,ke||this.matrix);We.stream=this.stream;var tt=F+"$$"+this.cloneIndex+++"$$";return ia(tt,We),We}var s2=function(F,Q){var pe=ol[F.key],Se=dr[pe];if(Se instanceof Oc)re("q"),re(a2(Q)),Se.gState&&m.setGState(Se.gState),re(F.matrix.toString()+" cm"),re("/"+pe+" sh"),re("Q");else if(Se instanceof du){var ke=new Ot(1,0,0,-1,0,ic());F.matrix&&(ke=ke.multiply(F.matrix||jo),pe=n2.call(Se,F.key,F.boundingBox,F.xStep,F.yStep,ke).id),re("q"),re("/Pattern cs"),re("/"+pe+" scn"),Se.gState&&m.setGState(Se.gState),re(Q),re("Q")}},a2=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ep=m.moveTo=function(F,Q){return re(S(A(F))+" "+S(D(Q))+" m"),this},Dd=m.lineTo=function(F,Q){return re(S(A(F))+" "+S(D(Q))+" l"),this},sc=m.curveTo=function(F,Q,pe,Se,ke,We){return re([S(A(F)),S(D(Q)),S(A(pe)),S(D(Se)),S(A(ke)),S(D(We)),"c"].join(" ")),this};m.__private__.line=m.line=function(F,Q,pe,Se,ke){if(isNaN(F)||isNaN(Q)||isNaN(pe)||isNaN(Se)||!So(ke))throw new Error("Invalid arguments passed to jsPDF.line");return y===b.COMPAT?this.lines([[pe-F,Se-Q]],F,Q,[1,1],ke||"S"):this.lines([[pe-F,Se-Q]],F,Q,[1,1]).stroke()},m.__private__.lines=m.lines=function(F,Q,pe,Se,ke,We){var tt,mt,Pt,Kt,Ht,ur,un,bn,$n,Is,ns,$i;if(typeof F=="number"&&($i=pe,pe=Q,Q=F,F=$i),Se=Se||[1,1],We=We||!1,isNaN(Q)||isNaN(pe)||!Array.isArray(F)||!Array.isArray(Se)||!So(ke)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ep(Q,pe),tt=Se[0],mt=Se[1],Kt=F.length,Is=Q,ns=pe,Pt=0;Pt<Kt;Pt++)(Ht=F[Pt]).length===2?(Is=Ht[0]*tt+Is,ns=Ht[1]*mt+ns,Dd(Is,ns)):(ur=Ht[0]*tt+Is,un=Ht[1]*mt+ns,bn=Ht[2]*tt+Is,$n=Ht[3]*mt+ns,Is=Ht[4]*tt+Is,ns=Ht[5]*mt+ns,sc(ur,un,bn,$n,Is,ns));return We&&Bx(),Zm(ke),this},m.path=function(F){for(var Q=0;Q<F.length;Q++){var pe=F[Q],Se=pe.c;switch(pe.op){case"m":ep(Se[0],Se[1]);break;case"l":Dd(Se[0],Se[1]);break;case"c":sc.apply(this,Se);break;case"h":Bx()}}return this},m.__private__.rect=m.rect=function(F,Q,pe,Se,ke){if(isNaN(F)||isNaN(Q)||isNaN(pe)||isNaN(Se)||!So(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return y===b.COMPAT&&(Se=-Se),re([S(A(F)),S(D(Q)),S(A(pe)),S(A(Se)),"re"].join(" ")),Zm(ke),this},m.__private__.triangle=m.triangle=function(F,Q,pe,Se,ke,We,tt){if(isNaN(F)||isNaN(Q)||isNaN(pe)||isNaN(Se)||isNaN(ke)||isNaN(We)||!So(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-F,Se-Q],[ke-pe,We-Se],[F-ke,Q-We]],F,Q,[1,1],tt,!0),this},m.__private__.roundedRect=m.roundedRect=function(F,Q,pe,Se,ke,We,tt){if(isNaN(F)||isNaN(Q)||isNaN(pe)||isNaN(Se)||isNaN(ke)||isNaN(We)||!So(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var mt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*pe),We=Math.min(We,.5*Se),this.lines([[pe-2*ke,0],[ke*mt,0,ke,We-We*mt,ke,We],[0,Se-2*We],[0,We*mt,-ke*mt,We,-ke,We],[2*ke-pe,0],[-ke*mt,0,-ke,-We*mt,-ke,-We],[0,2*We-Se],[0,-We*mt,ke*mt,-We,ke,-We]],F+ke,Q,[1,1],tt,!0),this},m.__private__.ellipse=m.ellipse=function(F,Q,pe,Se,ke){if(isNaN(F)||isNaN(Q)||isNaN(pe)||isNaN(Se)||!So(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*pe,tt=4/3*(Math.SQRT2-1)*Se;return ep(F+pe,Q),sc(F+pe,Q-tt,F+We,Q-Se,F,Q-Se),sc(F-We,Q-Se,F-pe,Q-tt,F-pe,Q),sc(F-pe,Q+tt,F-We,Q+Se,F,Q+Se),sc(F+We,Q+Se,F+pe,Q+tt,F+pe,Q),Zm(ke),this},m.__private__.circle=m.circle=function(F,Q,pe,Se){if(isNaN(F)||isNaN(Q)||isNaN(pe)||!So(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,Q,pe,pe,Se)},m.setFont=function(F,Q,pe){return pe&&(Q=C(Q,pe)),zt=Rx(F,Q,{disableWarning:!1}),this};var i2=m.__private__.getFont=m.getFont=function(){return wr[Rx.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var F,Q,pe={};for(F in kr)if(kr.hasOwnProperty(F))for(Q in pe[F]=[],kr[F])kr[F].hasOwnProperty(Q)&&pe[F].push(Q);return pe},m.addFont=function(F,Q,pe,Se,ke){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(pe=C(pe,Se)),ke=ke||"Identity-H",Xm.call(this,F,Q,pe,ke)};var Od,tp=e.lineWidth||.200025,pf=m.__private__.getLineWidth=m.getLineWidth=function(){return tp},zx=m.__private__.setLineWidth=m.setLineWidth=function(F){return tp=F,re(S(A(F))+" w"),this};m.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(F,Q){if(F=F||[],Q=Q||0,isNaN(Q)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(pe){return S(A(pe))}).join(" "),Q=S(A(Q)),re("["+F+"] "+Q+" d"),this};var Ux=m.__private__.getLineHeight=m.getLineHeight=function(){return $e*Od};m.__private__.getLineHeight=m.getLineHeight=function(){return $e*Od};var Vx=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(Od=F),this},qx=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Od};Vx(e.lineHeight);var Co=m.__private__.getHorizontalCoordinate=function(F){return A(F)},ul=m.__private__.getVerticalCoordinate=function(F){return y===b.ADVANCED?F:Wt[V].mediaBox.topRightY-Wt[V].mediaBox.bottomLeftY-A(F)},o2=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(F){return S(Co(F))},ac=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(F){return S(ul(F))},Ri=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Di(Ri)},m.__private__.setStrokeColor=m.setDrawColor=function(F,Q,pe,Se){return Ri=Oi({ch1:F,ch2:Q,ch3:pe,ch4:Se,pdfColorType:"draw",precision:2}),re(Ri),this};var rp=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Di(rp)},m.__private__.setFillColor=m.setFillColor=function(F,Q,pe,Se){return rp=Oi({ch1:F,ch2:Q,ch3:pe,ch4:Se,pdfColorType:"fill",precision:2}),re(rp),this};var Ld=e.textColor||"0 g",l2=m.__private__.getTextColor=m.getTextColor=function(){return Di(Ld)};m.__private__.setTextColor=m.setTextColor=function(F,Q,pe,Se){return Ld=Oi({ch1:F,ch2:Q,ch3:pe,ch4:Se,pdfColorType:"text",precision:3}),this};var vf=e.charSpace,c2=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(vf||0)};m.__private__.setCharSpace=m.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vf=F,this};var np=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(F){var Q=m.CapJoinStyles[F];if(Q===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return np=Q,re(Q+" J"),this};var sp=0;m.__private__.setLineJoin=m.setLineJoin=function(F){var Q=m.CapJoinStyles[F];if(Q===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sp=Q,re(Q+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(S(A(F))+" M"),this},m.GState=ug,m.setGState=function(F){(F=typeof F=="string"?xn[_i[F]]:Wx(null,F)).equals(ll)||(re("/"+F.id+" gs"),ll=F)};var Wx=function(F,Q){if(!F||!_i[F]){var pe=!1;for(var Se in xn)if(xn.hasOwnProperty(Se)&&xn[Se].equals(Q)){pe=!0;break}if(pe)Q=xn[Se];else{var ke="GS"+(Object.keys(xn).length+1).toString(10);xn[ke]=Q,Q.id=ke}return F&&(_i[F]=Q.id),Sr.publish("addGState",Q),Q}};m.addGState=function(F,Q){return Wx(F,Q),this},m.saveGraphicsState=function(){return re("q"),aa.push({key:zt,size:$e,color:Ld}),this},m.restoreGraphicsState=function(){re("Q");var F=aa.pop();return zt=F.key,$e=F.size,Ld=F.color,ll=null,this},m.setCurrentTransformationMatrix=function(F){return re(F.toString()+" cm"),this},m.comment=function(F){return re("#"+F),this};var gf=function(F,Q){var pe=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(We){isNaN(We)||(pe=parseFloat(We))}});var Se=Q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(We){isNaN(We)||(Se=parseFloat(We))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(We){ke=We.toString()}}),this},ap=function(F,Q,pe,Se){gf.call(this,F,Q),this.type="rect";var ke=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(tt){isNaN(tt)||(ke=parseFloat(tt))}});var We=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(tt){isNaN(tt)||(We=parseFloat(tt))}}),this},ip=function(){this.page=yn,this.currentPage=V,this.pages=ve.slice(0),this.pagesContext=Wt.slice(0),this.x=jr,this.y=Xt,this.matrix=Wn,this.width=Rd(V),this.height=ic(V),this.outputDestination=De,this.id="",this.objectNumber=-1};ip.prototype.restore=function(){yn=this.page,V=this.currentPage,Wt=this.pagesContext,ve=this.pages,jr=this.x,Xt=this.y,Wn=this.matrix,op(V,this.width),lp(V,this.height),De=this.outputDestination};var Hx=function(F,Q,pe,Se,ke){bo.push(new ip),yn=V=0,ve=[],jr=F,Xt=Q,Wn=ke,Qm([pe,Se])},d2=function(F){if(yo[F])bo.pop().restore();else{var Q=new ip,pe="Xo"+(Object.keys(vs).length+1).toString(10);Q.id=pe,yo[F]=pe,vs[pe]=Q,Sr.publish("addFormObject",Q),bo.pop().restore()}};for(var xf in m.beginFormObject=function(F,Q,pe,Se,ke){return Hx(F,Q,pe,Se,ke),this},m.endFormObject=function(F){return d2(F),this},m.doFormObject=function(F,Q){var pe=vs[yo[F]];return re("q"),re(Q.toString()+" cm"),re("/"+pe.id+" Do"),re("Q"),this},m.getFormObject=function(F){var Q=vs[yo[F]];return{x:Q.x,y:Q.y,width:Q.width,height:Q.height,matrix:Q.matrix}},m.save=function(F,Q){return F=F||"generated.pdf",(Q=Q||{}).returnPromise=Q.returnPromise||!1,Q.returnPromise===!1?(Yd(ff(dl()),F),typeof Yd.unload=="function"&&Ft.setTimeout&&setTimeout(Yd.unload,911),this):new Promise(function(pe,Se){try{var ke=Yd(ff(dl()),F);typeof Yd.unload=="function"&&Ft.setTimeout&&setTimeout(Yd.unload,911),pe(ke)}catch(We){Se(We.message)}})},Tt.API)Tt.API.hasOwnProperty(xf)&&(xf==="events"&&Tt.API.events.length?function(F,Q){var pe,Se,ke;for(ke=Q.length-1;ke!==-1;ke--)pe=Q[ke][0],Se=Q[ke][1],F.subscribe.apply(F,[pe].concat(typeof Se=="function"?[Se]:Se))}(Sr,Tt.API.events):m[xf]=Tt.API[xf]);var Rd=m.getPageWidth=function(F){return(Wt[F=F||V].mediaBox.topRightX-Wt[F].mediaBox.bottomLeftX)/lt},op=m.setPageWidth=function(F,Q){Wt[F].mediaBox.topRightX=Q*lt+Wt[F].mediaBox.bottomLeftX},ic=m.getPageHeight=function(F){return(Wt[F=F||V].mediaBox.topRightY-Wt[F].mediaBox.bottomLeftY)/lt},lp=m.setPageHeight=function(F,Q){Wt[F].mediaBox.topRightY=Q*lt+Wt[F].mediaBox.bottomLeftY};return m.internal={pdfEscape:oa,getStyle:Mx,getFont:i2,getFontSize:rt,getCharSpace:c2,getTextColor:l2,getLineHeight:Ux,getLineHeightFactor:qx,getLineWidth:pf,write:Ce,getHorizontalCoordinate:Co,getVerticalCoordinate:ul,getCoordinateString:o2,getVerticalCoordinateString:ac,collections:{},newObject:Hn,newAdditionalObject:nf,newObjectDeferred:Rn,newObjectDeferredBegin:Pa,getFilters:wo,putStream:Ja,events:Sr,scaleFactor:lt,pageSize:{getWidth:function(){return Rd(V)},setWidth:function(F){op(V,F)},getHeight:function(){return ic(V)},setHeight:function(F){lp(V,F)}},encryptionOptions:f,encryption:_s,getEncryptor:e2,output:hf,getNumberOfPages:Yw,pages:ve,out:re,f2:I,f3:T,getPageInfo:Fx,getPageInfoByObjId:qt,getCurrentPageInfo:t2,getPDFVersion:g,Point:gf,Rectangle:ap,Matrix:Ot,hasHotfix:$x},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Rd(V)},set:function(F){op(V,F)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ic(V)},set:function(F){lp(V,F)},enumerable:!0,configurable:!0}),Gw.call(m,ye),zt="F1",Ox(a,r),Sr.publish("initialized"),m}Yf.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Yf.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Yf.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Yf.prototype.processOwnerPassword=function(e,t){return jC(bC(t).substr(0,5),e)},Yf.prototype.encryptor=function(e,t){var r=bC(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return jC(r,s)}},ug.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||yr(e)!==yr(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Tt.API={events:[]},Tt.version="2.5.2";var wn=Tt.API,hP=1,Qu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ff=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Gt=function(e){return e.toFixed(2)},wc=function(e){return e.toFixed(5)};wn.__acroform__={};var Aa=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Ik=function(e){return e*hP},_o=function(e){var t=new P9,r=wt.internal.getHeight(e)||0,s=wt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Gt(s)),Number(Gt(r))],t},Kue=wn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Yue=wn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Xue=wn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},In=wn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Xue(e,t-1)},kn=wn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Kue(e,t-1)},Dn=wn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Yue(e,t-1)},Que=wn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=s(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=s(i)||0,[Number(Gt(c.lowerLeft_X)),Number(Gt(c.lowerLeft_Y)),Number(Gt(c.upperRight_X)),Number(Gt(c.upperRight_Y))]},Jue=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=wC(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Gt(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=_o(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},wC=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(T){return T.split(`
`)}):a.map(function(T){return[T]});var i=r,o=wt.internal.getHeight(e)||0;o=o<0?-o:o;var l=wt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(T,A,O){if(T+1<a.length){var D=A+" "+a[T+1][0];return ey(D,e,O).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,f,u=ey("3",e,i).height,h=e.multiline?o-i:(o-u)/2,m=h+=2,v=0,g=0,p=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+ey(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var x="",b=0,y=0;y<a.length;y++)if(a.hasOwnProperty(y)){var j=!1;if(a[y].length!==1&&p!==a[y].length-1){if((u+2)*(b+2)+2>o)continue e;x+=a[y][p],j=!0,g=y,y--}else{x=(x+=a[y][p]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var E=parseInt(y),C=c(E,x,i),S=y>=a.length-1;if(C&&!S){x+=" ",p=0;continue}if(C||S){if(S)g=E;else if(e.multiline&&(u+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(u+2)*(b+2)+2>o)continue e;g=E}}for(var N="",_=v;_<=g;_++){var I=a[_];if(e.multiline){if(_===g){N+=I[p]+" ",p=(p+1)%I.length;continue}if(_===v){N+=I[I.length-1]+" ";continue}}N+=I[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,f=ey(N,e,i).width,e.textAlign){case"right":d=l-f-2;break;case"center":d=(l-f)/2;break;case"left":default:d=2}t+=Gt(d)+" "+Gt(m)+` Td
`,t+="("+Qu(N)+`) Tj
`,t+=-Gt(d)+` 0 Td
`,m=-(i+2),f=0,v=j?g:g+1,b++,x=""}break}return s.text=t,s.fontSize=i,s},ey=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Zue={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},efe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},tfe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var s=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),yr(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[s]}},rfe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(vo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Zue)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");hP=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new T9,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];i.objId=void 0,i.hasAnnotation&&efe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,a){var i=!s;for(var o in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var l=s[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=Que(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=wt.createDefaultAppearanceStream(l),yr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=Jue(l);c.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var u="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var v=m[o];typeof v=="function"&&(v=v.call(a,l)),u+="/"+o+" "+v+" ",a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v)}}else typeof(v=m)=="function"&&(v=v.call(a,l)),u+="/"+o+" "+v,a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v);u+=">>"}c.push({key:"AP",value:`<<
`+u+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&tfe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},E9=wn.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),yr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),a+="("+Qu(s(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},HN=function(e,t,r){var s=function(a){return a};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Qu(s(e))+")"},Bo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bo.prototype.toString=function(){return this.objId+" 0 R"},Bo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Bo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],a=this[s];a&&(Array.isArray(a)?e.push({key:s,value:E9(a,this.objId,this.scope)}):a instanceof Bo?(a.scope=this.scope,e.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:s,value:a}))}return e};var P9=function(){Bo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Aa(P9,Bo);var T9=function(){Bo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Qu(r(e))+")"}},set:function(r){e=r}})};Aa(T9,Bo);var vo=function e(){Bo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!In(t,3)},set:function(x){x?this.F=kn(t,3):this.F=Dn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(x){s=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(x){s[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(x){s[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(x){s[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(x){s[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Mb)return;i="FieldObject"+e.FieldNum++}var x=function(b){return b};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Qu(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/hP:d},set:function(x){d=x}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(x){f=x}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Mb||this instanceof sd))return HN(u,this.objId,this.scope)},set:function(x){x=x.toString(),u=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Jn?h:HN(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof Jn?x:x.substr(0,1)==="("?Ff(x.substr(1,x.length-2)):Ff(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jn?Ff(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Jn?"/"+x:x}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Jn?m:HN(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=this instanceof Jn?x:x.substr(0,1)==="("?Ff(x.substr(1,x.length-2)):Ff(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jn?Ff(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof Jn?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(x){x=!!x,g=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,1)},set:function(x){x?this.Ff=kn(this.Ff,1):this.Ff=Dn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,2)},set:function(x){x?this.Ff=kn(this.Ff,2):this.Ff=Dn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,3)},set:function(x){x?this.Ff=kn(this.Ff,3):this.Ff=Dn(this.Ff,3)}});var p=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(p!==null)return p},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');p=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(p){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:p=2;break;case"center":case 1:p=1;break;case"left":case 0:default:p=0}}})};Aa(vo,Bo);var ju=function(){vo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return E9(t,this.objId,this.scope)},set:function(r){var s,a;a=[],typeof(s=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(s,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,18)},set:function(r){r?this.Ff=kn(this.Ff,18):this.Ff=Dn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=kn(this.Ff,19):this.Ff=Dn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,20)},set:function(r){r?(this.Ff=kn(this.Ff,20),t.sort()):this.Ff=Dn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,22)},set:function(r){r?this.Ff=kn(this.Ff,22):this.Ff=Dn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,23)},set:function(r){r?this.Ff=kn(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,27)},set:function(r){r?this.Ff=kn(this.Ff,27):this.Ff=Dn(this.Ff,27)}}),this.hasAppearanceStream=!1};Aa(ju,vo);var wu=function(){ju.call(this),this.fontName="helvetica",this.combo=!1};Aa(wu,ju);var Nu=function(){wu.call(this),this.combo=!0};Aa(Nu,wu);var bv=function(){Nu.call(this),this.edit=!0};Aa(bv,Nu);var Jn=function(){vo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,15)},set:function(r){r?this.Ff=kn(this.Ff,15):this.Ff=Dn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,16)},set:function(r){r?this.Ff=kn(this.Ff,16):this.Ff=Dn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,17)},set:function(r){r?this.Ff=kn(this.Ff,17):this.Ff=Dn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,26)},set:function(r){r?this.Ff=kn(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,a=[];for(s in a.push("<<"),t)a.push("/"+s+" ("+Qu(r(t[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){yr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Aa(Jn,vo);var jv=function(){Jn.call(this),this.pushButton=!0};Aa(jv,Jn);var Su=function(){Jn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Aa(Su,Jn);var Mb=function(){var e,t;vo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),s)o.push("/"+i+" ("+Qu(a(s[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){yr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Aa(Mb,vo),Su.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Su.prototype.createOption=function(e){var t=new Mb;return t.Parent=this,t.optionName=e,this.Kids.push(t),nfe.call(this.scope,t),t};var wv=function(){Jn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=wt.CheckBox.createAppearanceStream()};Aa(wv,Jn);var sd=function(){vo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,13)},set:function(t){t?this.Ff=kn(this.Ff,13):this.Ff=Dn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,21)},set:function(t){t?this.Ff=kn(this.Ff,21):this.Ff=Dn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,23)},set:function(t){t?this.Ff=kn(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,24)},set:function(t){t?this.Ff=kn(this.Ff,24):this.Ff=Dn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,25)},set:function(t){t?this.Ff=kn(this.Ff,25):this.Ff=Dn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,26)},set:function(t){t?this.Ff=kn(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Aa(sd,vo);var Nv=function(){sd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,14)},set:function(e){e?this.Ff=kn(this.Ff,14):this.Ff=Dn(this.Ff,14)}}),this.password=!0};Aa(Nv,sd);var wt={CheckBox:{createAppearanceStream:function(){return{N:{On:wt.CheckBox.YesNormal},D:{On:wt.CheckBox.YesPushDown,Off:wt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=_o(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=wC(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Gt(wt.internal.getWidth(e))+" "+Gt(wt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+Gt(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=_o(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=[],i=wt.internal.getHeight(e),o=wt.internal.getWidth(e),l=wC(e,e.caption);return a.push("1 g"),a.push("0 0 "+Gt(o)+" "+Gt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Gt(o-1)+" "+Gt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Gt(l.fontSize)+" Tf "+s),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=_o(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Gt(wt.internal.getWidth(e))+" "+Gt(wt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Circle.YesNormal,t.D[e]=wt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=_o(e);t.scope=e.scope;var r=[],s=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=wt.internal.Bezier_C,i=Number((s*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+wc(wt.internal.getWidth(e)/2)+" "+wc(wt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=_o(e);t.scope=e.scope;var r=[],s=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*wt.internal.Bezier_C).toFixed(5)),o=Number((s*wt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wc(wt.internal.getWidth(e)/2)+" "+wc(wt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+wc(wt.internal.getWidth(e)/2)+" "+wc(wt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=_o(e);t.scope=e.scope;var r=[],s=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*wt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wc(wt.internal.getWidth(e)/2)+" "+wc(wt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Cross.YesNormal,t.D[e]=wt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=_o(e);t.scope=e.scope;var r=[],s=wt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Gt(wt.internal.getWidth(e)-2)+" "+Gt(wt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Gt(s.x1.x)+" "+Gt(s.x1.y)+" m"),r.push(Gt(s.x2.x)+" "+Gt(s.x2.y)+" l"),r.push(Gt(s.x4.x)+" "+Gt(s.x4.y)+" m"),r.push(Gt(s.x3.x)+" "+Gt(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=_o(e);t.scope=e.scope;var r=wt.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Gt(wt.internal.getWidth(e))+" "+Gt(wt.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Gt(wt.internal.getWidth(e)-2)+" "+Gt(wt.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Gt(r.x1.x)+" "+Gt(r.x1.y)+" m"),s.push(Gt(r.x2.x)+" "+Gt(r.x2.y)+" l"),s.push(Gt(r.x4.x)+" "+Gt(r.x4.y)+" m"),s.push(Gt(r.x3.x)+" "+Gt(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=_o(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Gt(wt.internal.getWidth(e))+" "+Gt(wt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};wt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=wt.internal.getWidth(e),r=wt.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},wt.internal.getWidth=function(e){var t=0;return yr(e)==="object"&&(t=Ik(e.Rect[2])),t},wt.internal.getHeight=function(e){var t=0;return yr(e)==="object"&&(t=Ik(e.Rect[3])),t};var nfe=wn.addField=function(e){if(rfe(this,e),!(e instanceof vo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};wn.AcroFormChoiceField=ju,wn.AcroFormListBox=wu,wn.AcroFormComboBox=Nu,wn.AcroFormEditBox=bv,wn.AcroFormButton=Jn,wn.AcroFormPushButton=jv,wn.AcroFormRadioButton=Su,wn.AcroFormCheckBox=wv,wn.AcroFormTextField=sd,wn.AcroFormPasswordField=Nv,wn.AcroFormAppearance=wt,wn.AcroForm={ChoiceField:ju,ListBox:wu,ComboBox:Nu,EditBox:bv,Button:Jn,PushButton:jv,RadioButton:Su,CheckBox:wv,TextField:sd,PasswordField:Nv,Appearance:wt},Tt.AcroForm={ChoiceField:ju,ListBox:wu,ComboBox:Nu,EditBox:bv,Button:Jn,PushButton:jv,RadioButton:Su,CheckBox:wv,TextField:sd,PasswordField:Nv,Appearance:wt};var sfe=Tt.AcroForm;function _9(e){return e.reduce(function(t,r,s){return t[r]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(T,A){var O,D,$,M,R,B=t;if((A=A||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(C(T))for(R in r)for($=r[R],O=0;O<$.length;O+=1){for(M=!0,D=0;D<$[O].length;D+=1)if($[O][D]!==void 0&&$[O][D]!==T[D]){M=!1;break}if(M===!0){B=R;break}}else for(R in r)for($=r[R],O=0;O<$.length;O+=1){for(M=!0,D=0;D<$[O].length;D+=1)if($[O][D]!==void 0&&$[O][D]!==T.charCodeAt(D)){M=!1;break}if(M===!0){B=R;break}}return B===t&&A!==t&&(B=A),B},a=function T(A){for(var O=this.internal.write,D=this.internal.putStream,$=(0,this.internal.getFilters)();$.indexOf("FlateEncode")!==-1;)$.splice($.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var M=[];if(M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Image"}),M.push({key:"Width",value:A.width}),M.push({key:"Height",value:A.height}),A.colorSpace===p.INDEXED?M.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(M.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===p.DEVICE_CMYK&&M.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),M.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&M.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var R="",B=0,U=A.transparency.length;B<U;B++)R+=A.transparency[B]+" "+A.transparency[B]+" ";M.push({key:"Mask",value:"["+R+"]"})}A.sMask!==void 0&&M.push({key:"SMask",value:A.objectId+1+" 0 R"});var W=A.filter!==void 0?["/"+A.filter]:void 0;if(D({data:A.data,additionalKeyValues:M,alreadyAppliedFilters:W,objectId:A.objectId}),O("endobj"),"sMask"in A&&A.sMask!==void 0){var q="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,L={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:q,data:A.sMask};"filter"in A&&(L.filter=A.filter),T.call(this,L)}if(A.colorSpace===p.INDEXED){var V=this.internal.newObject();D({data:N(new Uint8Array(A.palette)),objectId:V}),O("endobj")}},i=function(){var T=this.internal.collections.addImage_images;for(var A in T)a.call(this,T[A])},o=function(){var T,A=this.internal.collections.addImage_images,O=this.internal.write;for(var D in A)O("/I"+(T=A[D]).index,T.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var T=this.internal.collections.addImage_images;return l.call(this),T},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(T){return typeof e["process"+T.toUpperCase()]=="function"},u=function(T){return yr(T)==="object"&&T.nodeType===1},h=function(T,A){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var O=""+T.getAttribute("src");if(O.indexOf("data:image/")===0)return yv(unescape(O).split("base64,").pop());var D=e.loadFile(O,!0);if(D!==void 0)return D}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var $;switch(A){case"PNG":$="image/png";break;case"WEBP":$="image/webp";break;case"JPEG":case"JPG":default:$="image/jpeg"}return yv(T.toDataURL($,1).split("base64,").pop())}},m=function(T){var A=this.internal.collections.addImage_images;if(A){for(var O in A)if(T===A[O].alias)return A[O]}},v=function(T,A,O){return T||A||(T=-96,A=-96),T<0&&(T=-1*O.width*72/T/this.internal.scaleFactor),A<0&&(A=-1*O.height*72/A/this.internal.scaleFactor),T===0&&(T=A*O.width/O.height),A===0&&(A=T*O.height/O.width),[T,A]},g=function(T,A,O,D,$,M){var R=v.call(this,O,D,$),B=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,W=c.call(this);if(O=R[0],D=R[1],W[$.index]=$,M){M*=Math.PI/180;var q=Math.cos(M),L=Math.sin(M),V=function(Z){return Z.toFixed(4)},G=[V(q),V(L),V(-1*L),V(q),0,0,"cm"]}this.internal.write("q"),M?(this.internal.write([1,"0","0",1,B(T),U(A+D),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([B(O),"0","0",B(D),"0","0","cm"].join(" "))):this.internal.write([B(O),"0","0",B(D),B(T),U(A+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$.index+" Do"),this.internal.write("Q")},p=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(T){var A,O,D=0;if(typeof T=="string")for(O=T.length,A=0;A<O;A++)D=(D<<5)-D+T.charCodeAt(A),D|=0;else if(C(T))for(O=T.byteLength/2,A=0;A<O;A++)D=(D<<5)-D+T[A],D|=0;return D},y=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var A=!0;return T.length===0&&(A=!1),T.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(A=!1),A},j=e.__addimage__.extractImageFromDataUrl=function(T){var A=(T=T||"").split("base64,"),O=null;if(A.length===2){var D=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(D)&&(O={mimeType:D[1],charset:D[2],data:A[1]})}return O},E=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(T){return E()&&T instanceof ArrayBuffer};var C=e.__addimage__.isArrayBufferView=function(T){return E()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},S=e.__addimage__.binaryStringToUint8Array=function(T){for(var A=T.length,O=new Uint8Array(A),D=0;D<A;D++)O[D]=T.charCodeAt(D);return O},N=e.__addimage__.arrayBufferToBinaryString=function(T){for(var A="",O=C(T)?T:new Uint8Array(T),D=0;D<O.length;D+=8192)A+=String.fromCharCode.apply(null,O.subarray(D,D+8192));return A};e.addImage=function(){var T,A,O,D,$,M,R,B,U;if(typeof arguments[1]=="number"?(A=t,O=arguments[1],D=arguments[2],$=arguments[3],M=arguments[4],R=arguments[5],B=arguments[6],U=arguments[7]):(A=arguments[1],O=arguments[2],D=arguments[3],$=arguments[4],M=arguments[5],R=arguments[6],B=arguments[7],U=arguments[8]),yr(T=arguments[0])==="object"&&!u(T)&&"imageData"in T){var W=T;T=W.imageData,A=W.format||A||t,O=W.x||O||0,D=W.y||D||0,$=W.w||W.width||$,M=W.h||W.height||M,R=W.alias||R,B=W.compression||B,U=W.rotation||W.angle||U}var q=this.internal.getFilters();if(B===void 0&&q.indexOf("FlateEncode")!==-1&&(B="SLOW"),isNaN(O)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var L=_.call(this,T,A,R,B);return g.call(this,O,D,$,M,L,U),this};var _=function(T,A,O,D){var $,M,R;if(typeof T=="string"&&s(T)===t){T=unescape(T);var B=I(T,!1);(B!==""||(B=e.loadFile(T,!0))!==void 0)&&(T=B)}if(u(T)&&(T=h(T,A)),A=s(T,A),!f(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((R=O)==null||R.length===0)&&(O=function(U){return typeof U=="string"||C(U)?b(U):C(U.data)?b(U.data):null}(T)),($=m.call(this,O))||(E()&&(T instanceof Uint8Array||A==="RGBA"||(M=T,T=S(T))),$=this["process"+A.toUpperCase()](T,d.call(this),O,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in e.image_compression?U:x.NONE}(D),M)),!$)throw new Error("An unknown error occurred whilst processing the image.");return $},I=e.__addimage__.convertBase64ToBinaryString=function(T,A){var O;A=typeof A!="boolean"||A;var D,$="";if(typeof T=="string"){D=(O=j(T))!==null?O.data:T;try{$=yv(D)}catch(M){if(A)throw y(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+M.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};e.getImageProperties=function(T){var A,O,D="";if(u(T)&&(T=h(T)),typeof T=="string"&&s(T)===t&&((D=I(T,!1))===""&&(D=e.loadFile(T)||""),T=D),O=s(T),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!E()||T instanceof Uint8Array||(T=S(T)),!(A=this["process"+O.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=O,A}})(Tt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Tt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,f=!1,u=0;u<d.length&&!f;u++)switch((s=d[u]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var h=0;h<d.length;h++){s=d[h];var m=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(g.objId),b=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y)+"] ")+"/Contents ("+m(x(s.contents))+")",i+=" /Popup "+p.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(x(b))+") >>",g.content=i;var y=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(s.bounds.x+30)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+l(s.bounds.y)+"] ")+" /Parent "+y,s.open&&(i+=" /Open true"),i+=" >>",p.content=i,this.internal.write(g.objId,"0 R",p.objId,"0 R");break;case"freetext":a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y+s.bounds.h)+"] ";var j=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(v(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var E=this.annotations._nameMap[s.options.name];s.options.pageNumber=E.page,s.options.top=E.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(v(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var C=l(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+C+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(s),w:c(r+a),h:d(s+i)},options:o,type:"link"})},e.textWithLink=function(r,s,a,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(d*f)}else l=c,o=d;return this.text(r,s,a,i),a+=.2*d,i.align==="center"&&(s-=c/2),i.align==="right"&&(s-=c),this.link(s,a-d,l,o,i),c},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Tt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},u=e.__arabicParser__.resolveLigatures=function(g){var p=0,x=r,b="",y=0;for(p=0;p<g.length;p+=1)x[g.charCodeAt(p)]!==void 0?(y++,typeof(x=x[g.charCodeAt(p)])=="number"&&(b+=String.fromCharCode(x),x=r,y=0),p===g.length-1&&(x=r,b+=g.charAt(p-(y-1)),p-=y-1,y=0)):(x=r,b+=g.charAt(p-y),p-=y,y=0);return b};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&s[g.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(g,p,x){return o(g)?i(g)===!1?-1:!d(g)||!o(p)&&!o(x)||!o(x)&&l(p)||l(g)&&!o(p)||l(g)&&c(p)||l(g)&&l(p)?0:f(g)&&o(p)&&!l(p)&&o(x)&&d(x)?3:l(g)||!o(x)?1:2:-1},m=function(g){var p=0,x=0,b=0,y="",j="",E="",C=(g=g||"").split("\\s+"),S=[];for(p=0;p<C.length;p+=1){for(S.push(""),x=0;x<C[p].length;x+=1)y=C[p][x],j=C[p][x-1],E=C[p][x+1],o(y)?(b=h(y,j,E),S[p]+=b!==-1?String.fromCharCode(t[y.charCodeAt(0)][b]):y):S[p]+=y;S[p]=u(S[p])}return S.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var g,p=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(p)){var b=0;for(x=[],b=0;b<p.length;b+=1)Array.isArray(p[b])?x.push([m(p[b][0]),p[b][1],p[b][2]]):x.push([m(p[b])]);g=x}else g=m(p);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",v])}(Tt.API),Tt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var a;if((r=r||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Tt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(g){v=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){s.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),h=d.scaleFactor||this.internal.scaleFactor,m=0,v=0,g=0,p=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=d.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(y,j){return y.concat(p.splitTextToSize(j,x))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)m<(g=this.getStringUnitWidth(c[b],{font:u})*f)&&(m=g);return m!==0&&(v=c.length),{w:m/=h,h:Math.max((v*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,u=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=u.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,f,u,h){if(s.call(this),!f)throw new Error("No data for PDF table.");var m,v,g,p,x=[],b=[],y=[],j={},E={},C=[],S=[],N=(h=h||{}).autoSize||!1,_=h.printHeaders!==!1,I=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,T=h.margins||Object.assign({width:this.getPageWidth()},t),A=typeof h.padding=="number"?h.padding:3,O=h.headerBackgroundColor||"#c8c8c8",D=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=I,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=D,this.setFontSize(I),u==null)b=x=Object.keys(f[0]),y=x.map(function(){return"left"});else if(Array.isArray(u)&&yr(u[0])==="object")for(x=u.map(function(W){return W.name}),b=u.map(function(W){return W.prompt||W.name||""}),y=u.map(function(W){return W.align||"left"}),m=0;m<u.length;m+=1)E[u[m].name]=u[m].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(b=x=u,y=x.map(function(){return"left"}));if(N||Array.isArray(u)&&typeof u[0]=="string")for(m=0;m<x.length;m+=1){for(j[p=x[m]]=f.map(function(W){return W[p]}),this.setFont(void 0,"bold"),C.push(this.getTextDimensions(b[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=j[p],this.setFont(void 0,"normal"),g=0;g<v.length;g+=1)C.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[p]=Math.max.apply(null,C)+A+A,C=[]}if(_){var $={};for(m=0;m<x.length;m+=1)$[x[m]]={},$[x[m]].text=b[m],$[x[m]].align=y[m];var M=l.call(this,$,E);S=x.map(function(W){return new i(c,d,E[W],M,$[W].text,void 0,$[W].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var R=u.reduce(function(W,q){return W[q.name]=q.align,W},{});for(m=0;m<f.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:f[m]},this);var B=l.call(this,f[m],E);for(g=0;g<x.length;g+=1){var U=f[m][x[g]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:g,data:U},this),o.call(this,new i(c,d,E[x[g]],B,U,m+2,R[x[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var f=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var v=c[m];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*u/h+f+f},this).reduce(function(m,v){return Math.max(m,v)},0)};e.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,h.push(f)),f.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(v)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Tt.API);var I9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},k9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],NC=_9(k9),D9=[100,200,300,400,500,600,700,800,900],afe=_9(D9);function SC(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return I9[i=i||"normal"]?i:"normal"}(e.style),s=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof NC[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:s,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,s].join(" ")}}}function kk(e,t,r,s){var a;for(a=r;a>=0&&a<t.length;a+=s)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=s)if(e[t[a]])return e[t[a]]}var ife={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Dk={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ok(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function ofe(e,t,r){for(var s=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},ife,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=SC(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[s]))throw new Error("Could not find a font-family for the rule '"+Ok(i)+"' and default family '"+s+"'.");if(o=function(c,d){if(d[c])return d[c];var f=NC[c],u=f<=NC.normal?-1:1,h=kk(d,k9,f,u);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var f=I9[c],u=0;u<f.length;++u)if(d[f[u]])return d[f[u]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var f=afe[c],u=kk(d,D9,f,c<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+c);return u}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Ok(i)+"'.");return o}function Lk(e){return e.trimLeft()}function lfe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function cfe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var ty,Rk,$k,GN=["times"];(function(e){var t,r,s,a,i,o,l,c,d,f=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new f}]);var u=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=L;Object.defineProperty(this,"pdf",{get:function(){return V}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(le){G=!!le}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(le){Z=!!le}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(le){isNaN(le)||(te=le)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(le){isNaN(le)||(he=le)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(le){var re;typeof le=="number"?re=[le,le,le,le]:((re=new Array(4))[0]=le[0],re[1]=le.length>=2?le[1]:re[0],re[2]=le.length>=3?le[2]:re[0],re[3]=le.length>=4?le[3]:re[1]),d.margin=re}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(le){me=le}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(le){oe=le}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(le){we=le}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(le){le instanceof f&&(d=le)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(le){d.path=le}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(le){ve=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var re;re=h(le),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var re=h(le);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var ge=null;function De(le,re){if(ge===null){var Ce=function(Ne){var ye=[];return Object.keys(Ne).forEach(function($e){Ne[$e].forEach(function(nt){var rt=null;switch(nt){case"bold":rt={family:$e,weight:"bold"};break;case"italic":rt={family:$e,style:"italic"};break;case"bolditalic":rt={family:$e,weight:"bold",style:"italic"};break;case"":case"normal":rt={family:$e}}rt!==null&&(rt.ref={name:$e,style:nt},ye.push(rt))})}),ye}(le.getFontList());ge=function(Ne){for(var ye={},$e=0;$e<Ne.length;++$e){var nt=SC(Ne[$e]),rt=nt.family,gt=nt.stretch,Me=nt.style,Ze=nt.weight;ye[rt]=ye[rt]||{},ye[rt][gt]=ye[rt][gt]||{},ye[rt][gt][Me]=ye[rt][gt][Me]||{},ye[rt][gt][Me][Ze]=nt}return ye}(Ce.concat(re))}return ge}var xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return xe},set:function(le){ge=null,xe=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var re;if(this.ctx.font=le,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(le))!==null){var Ce=re[1],Ne=(re[2],re[3]),ye=re[4],$e=(re[5],re[6]),nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(nt==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var rt=function(St){var zt,lt,jr=[],Xt=St.trim();if(Xt==="")return GN;if(Xt in Dk)return[Dk[Xt]];for(;Xt!=="";){switch(lt=null,zt=(Xt=Lk(Xt)).charAt(0)){case'"':case"'":lt=lfe(Xt.substring(1),zt);break;default:lt=cfe(Xt)}if(lt===null||(jr.push(lt[0]),(Xt=Lk(lt[1]))!==""&&Xt.charAt(0)!==","))return GN;Xt=Xt.replace(/^,/,"")}return jr}($e);if(this.fontFaces){var gt=ofe(De(this.pdf,this.fontFaces),rt.map(function(St){return{family:St,stretch:"normal",weight:Ne,style:Ce}}));this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var Me="";(Ne==="bold"||parseInt(Ne,10)>=700||Ce==="bold")&&(Me="bold"),Ce==="italic"&&(Me+="italic"),Me.length===0&&(Me="normal");for(var Ze="",ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xt=0;xt<rt.length;xt++){if(this.pdf.internal.getFont(rt[xt],Me,{noFallback:!0,disableWarning:!0})!==void 0){Ze=rt[xt];break}if(Me==="bolditalic"&&this.pdf.internal.getFont(rt[xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ze=rt[xt],Me="bold";else if(this.pdf.internal.getFont(rt[xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ze=rt[xt],Me="normal";break}}if(Ze===""){for(var kt=0;kt<rt.length;kt++)if(ft[rt[kt]]){Ze=ft[rt[kt]];break}}Ze=Ze===""?"Times":Ze,this.pdf.setFont(Ze,Me)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};u.prototype.setLineDash=function(L){this.lineDash=L},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){j.call(this,"fill",!1)},u.prototype.stroke=function(){j.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(L,V){if(isNaN(L)||isNaN(V))throw Fr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(L,V));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(L,V)},u.prototype.closePath=function(){var L=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&yr(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){L=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},u.prototype.lineTo=function(L,V){if(isNaN(L)||isNaN(V))throw Fr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(L,V));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},u.prototype.quadraticCurveTo=function(L,V,G,Z){if(isNaN(G)||isNaN(Z)||isNaN(L)||isNaN(V))throw Fr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(G,Z)),he=this.ctx.transform.applyToPoint(new o(L,V));this.path.push({type:"qct",x1:he.x,y1:he.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},u.prototype.bezierCurveTo=function(L,V,G,Z,te,he){if(isNaN(te)||isNaN(he)||isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Fr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(te,he)),oe=this.ctx.transform.applyToPoint(new o(L,V)),we=this.ctx.transform.applyToPoint(new o(G,Z));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:we.x,y2:we.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},u.prototype.arc=function(L,V,G,Z,te,he){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z)||isNaN(te))throw Fr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(L,V));L=me.x,V=me.y;var oe=this.ctx.transform.applyToPoint(new o(0,G)),we=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(oe.x-we.x,2)+Math.pow(oe.y-we.y,2))}Math.abs(te-Z)>=2*Math.PI&&(Z=0,te=2*Math.PI),this.path.push({type:"arc",x:L,y:V,radius:G,startAngle:Z,endAngle:te,counterclockwise:he})},u.prototype.arcTo=function(L,V,G,Z,te){throw new Error("arcTo not implemented.")},u.prototype.rect=function(L,V,G,Z){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Fr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,V),this.lineTo(L+G,V),this.lineTo(L+G,V+Z),this.lineTo(L,V+Z),this.lineTo(L,V),this.lineTo(L+G,V),this.lineTo(L,V)},u.prototype.fillRect=function(L,V,G,Z){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Fr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,V,G,Z),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},u.prototype.strokeRect=function(L,V,G,Z){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Fr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(L,V,G,Z),this.stroke())},u.prototype.clearRect=function(L,V,G,Z){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Fr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,V,G,Z))},u.prototype.save=function(L){L=typeof L!="boolean"||L;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},u.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(V),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var V,G,Z,te;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))V=0,G=0,Z=0,te=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(he!==null)V=parseInt(he[1]),G=parseInt(he[2]),Z=parseInt(he[3]),te=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)V=parseInt(he[1]),G=parseInt(he[2]),Z=parseInt(he[3]),te=parseFloat(he[4]);else{if(te=1,typeof L=="string"&&L.charAt(0)!=="#"){var me=new S9(L);L=me.ok?me.toHex():"#000000"}L.length===4?(V=L.substring(1,2),V+=V,G=L.substring(2,3),G+=G,Z=L.substring(3,4),Z+=Z):(V=L.substring(1,3),G=L.substring(3,5),Z=L.substring(5,7)),V=parseInt(V,16),G=parseInt(G,16),Z=parseInt(Z,16)}}return{r:V,g:G,b:Z,a:te,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(L,V,G,Z){if(isNaN(V)||isNaN(G)||typeof L!="string")throw Fr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!m.call(this)){var te=B(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;A.call(this,{text:L,x:V,y:G,scale:he,angle:te,align:this.textAlign,maxWidth:Z})}},u.prototype.strokeText=function(L,V,G,Z){if(isNaN(V)||isNaN(G)||typeof L!="string")throw Fr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){Z=isNaN(Z)?void 0:Z;var te=B(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;A.call(this,{text:L,x:V,y:G,scale:he,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:Z})}},u.prototype.measureText=function(L){if(typeof L!="string")throw Fr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,G=this.pdf.internal.scaleFactor,Z=V.internal.getFontSize(),te=V.getStringUnitWidth(L)*Z/V.internal.scaleFactor,he=function(me){var oe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new he({width:te*=Math.round(96*G/72*1e4)/1e4})},u.prototype.scale=function(L,V){if(isNaN(L)||isNaN(V))throw Fr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(L,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},u.prototype.rotate=function(L){if(isNaN(L))throw Fr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},u.prototype.translate=function(L,V){if(isNaN(L)||isNaN(V))throw Fr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,L,V);this.ctx.transform=this.ctx.transform.multiply(G)},u.prototype.transform=function(L,V,G,Z,te,he){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z)||isNaN(te)||isNaN(he))throw Fr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(L,V,G,Z,te,he);this.ctx.transform=this.ctx.transform.multiply(me)},u.prototype.setTransform=function(L,V,G,Z,te,he){L=isNaN(L)?1:L,V=isNaN(V)?0:V,G=isNaN(G)?0:G,Z=isNaN(Z)?1:Z,te=isNaN(te)?0:te,he=isNaN(he)?0:he,this.ctx.transform=new c(L,V,G,Z,te,he)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(L,V,G,Z,te,he,me,oe,we){var ve=this.pdf.getImageProperties(L),ge=1,De=1,xe=1,le=1;Z!==void 0&&oe!==void 0&&(xe=oe/Z,le=we/te,ge=ve.width/Z*oe/Z,De=ve.height/te*we/te),he===void 0&&(he=V,me=G,V=0,G=0),Z!==void 0&&oe===void 0&&(oe=Z,we=te),Z===void 0&&oe===void 0&&(oe=ve.width,we=ve.height);for(var re,Ce=this.ctx.transform.decompose(),Ne=B(Ce.rotate.shx),ye=new c,$e=(ye=(ye=(ye=ye.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale)).applyToRectangle(new l(he-V*xe,me-G*le,Z*ge,te*De)),nt=p.call(this,$e),rt=[],gt=0;gt<nt.length;gt+=1)rt.indexOf(nt[gt])===-1&&rt.push(nt[gt]);if(y(rt),this.autoPaging)for(var Me=rt[0],Ze=rt[rt.length-1],ft=Me;ft<Ze+1;ft++){this.pdf.setPage(ft);var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=ft===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=ft===1?0:St+(ft-2)*zt;if(this.ctx.clip_path.length!==0){var jr=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(re,this.posX+this.margin[3],-lt+kt+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=jr}var Xt=JSON.parse(JSON.stringify($e));Xt=b([Xt],this.posX+this.margin[3],-lt+kt+this.ctx.prevPageLastElemOffset)[0];var Wn=(ft>Me||ft<Ze)&&g.call(this);Wn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,zt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,Ne),Wn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,Ne)};var p=function(L,V,G){var Z=[];V=V||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":Z.push(Math.floor((L.y+te)/G)+1);break;case"arc":Z.push(Math.floor((L.y+te-L.radius)/G)+1),Z.push(Math.floor((L.y+te+L.radius)/G)+1);break;case"qct":var he=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);Z.push(Math.floor((he.y+te)/G)+1),Z.push(Math.floor((he.y+he.h+te)/G)+1);break;case"bct":var me=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);Z.push(Math.floor((me.y+te)/G)+1),Z.push(Math.floor((me.y+me.h+te)/G)+1);break;case"rect":Z.push(Math.floor((L.y+te)/G)+1),Z.push(Math.floor((L.y+L.h+te)/G)+1)}for(var oe=0;oe<Z.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<Z[oe];)x.call(this);return Z},x=function(){var L=this.fillStyle,V=this.strokeStyle,G=this.font,Z=this.lineCap,te=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=V,this.font=G,this.lineCap=Z,this.lineWidth=te,this.lineJoin=he},b=function(L,V,G){for(var Z=0;Z<L.length;Z++)switch(L[Z].type){case"bct":L[Z].x2+=V,L[Z].y2+=G;case"qct":L[Z].x1+=V,L[Z].y1+=G;case"mt":case"lt":case"arc":default:L[Z].x+=V,L[Z].y+=G}return L},y=function(L){return L.sort(function(V,G){return V-G})},j=function(L,V){for(var G,Z,te=this.fillStyle,he=this.strokeStyle,me=this.lineCap,oe=this.lineWidth,we=Math.abs(oe*this.ctx.transform.scaleX),ve=this.lineJoin,ge=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),xe=[],le=0;le<De.length;le++)if(De[le].x!==void 0)for(var re=p.call(this,De[le]),Ce=0;Ce<re.length;Ce+=1)xe.indexOf(re[Ce])===-1&&xe.push(re[Ce]);for(var Ne=0;Ne<xe.length;Ne++)for(;this.pdf.internal.getNumberOfPages()<xe[Ne];)x.call(this);if(y(xe),this.autoPaging)for(var ye=xe[0],$e=xe[xe.length-1],nt=ye;nt<$e+1;nt++){this.pdf.setPage(nt),this.fillStyle=te,this.strokeStyle=he,this.lineCap=me,this.lineWidth=we,this.lineJoin=ve;var rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gt=nt===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=nt===1?0:Me+(nt-2)*Ze;if(this.ctx.clip_path.length!==0){var xt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(G,this.posX+this.margin[3],-ft+gt+this.ctx.prevPageLastElemOffset),E.call(this,L,!0),this.path=xt}if(Z=JSON.parse(JSON.stringify(ge)),this.path=b(Z,this.posX+this.margin[3],-ft+gt+this.ctx.prevPageLastElemOffset),V===!1||nt===0){var kt=(nt>ye||nt<$e)&&g.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,Ze,null).clip().discardPath()),E.call(this,L,V),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=we,E.call(this,L,V),this.lineWidth=oe;this.path=ge},E=function(L,V){if((L!=="stroke"||V||!v.call(this))&&(L==="stroke"||V||!m.call(this))){for(var G,Z,te=[],he=this.path,me=0;me<he.length;me++){var oe=he[me];switch(oe.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:oe,deltas:[],abs:[]});break;case"lt":var we=te.length;if(he[me-1]&&!isNaN(he[me-1].x)&&(G=[oe.x-he[me-1].x,oe.y-he[me-1].y],we>0)){for(;we>=0;we--)if(te[we-1].close!==!0&&te[we-1].begin!==!0){te[we-1].deltas.push(G),te[we-1].abs.push(oe);break}}break;case"bct":G=[oe.x1-he[me-1].x,oe.y1-he[me-1].y,oe.x2-he[me-1].x,oe.y2-he[me-1].y,oe.x-he[me-1].x,oe.y-he[me-1].y],te[te.length-1].deltas.push(G);break;case"qct":var ve=he[me-1].x+2/3*(oe.x1-he[me-1].x),ge=he[me-1].y+2/3*(oe.y1-he[me-1].y),De=oe.x+2/3*(oe.x1-oe.x),xe=oe.y+2/3*(oe.y1-oe.y),le=oe.x,re=oe.y;G=[ve-he[me-1].x,ge-he[me-1].y,De-he[me-1].x,xe-he[me-1].y,le-he[me-1].x,re-he[me-1].y],te[te.length-1].deltas.push(G);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(oe)}}Z=V?null:L==="stroke"?"stroke":"fill";for(var Ce=!1,Ne=0;Ne<te.length;Ne++)if(te[Ne].arc)for(var ye=te[Ne].abs,$e=0;$e<ye.length;$e++){var nt=ye[$e];nt.type==="arc"?N.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,V,!Ce):O.call(this,nt.x,nt.y),Ce=!0}else if(te[Ne].close===!0)this.pdf.internal.out("h"),Ce=!1;else if(te[Ne].begin!==!0){var rt=te[Ne].start.x,gt=te[Ne].start.y;D.call(this,te[Ne].deltas,rt,gt),Ce=!0}Z&&_.call(this,Z),V&&I.call(this)}},C=function(L){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-G;case"top":return L+V-G;case"hanging":return L+V-2*G;case"middle":return L+V/2-G;case"ideographic":return L;case"alphabetic":default:return L}},S=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(V,G){this.colorStops.push([V,G])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(L,V,G,Z,te,he,me,oe,we){for(var ve=M.call(this,G,Z,te,he),ge=0;ge<ve.length;ge++){var De=ve[ge];ge===0&&(we?T.call(this,De.x1+L,De.y1+V):O.call(this,De.x1+L,De.y1+V)),$.call(this,L,V,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}oe?I.call(this):_.call(this,me)},_=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},I=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(L,V){this.pdf.internal.out(r(L)+" "+s(V)+" m")},A=function(L){var V;switch(L.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var G=this.pdf.getTextDimensions(L.text),Z=C.call(this,L.y),te=S.call(this,Z)-G.h,he=this.ctx.transform.applyToPoint(new o(L.x,Z)),me=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var we,ve,ge,De=this.ctx.transform.applyToRectangle(new l(L.x,Z,G.w,G.h)),xe=oe.applyToRectangle(new l(L.x,te,G.w,G.h)),le=p.call(this,xe),re=[],Ce=0;Ce<le.length;Ce+=1)re.indexOf(le[Ce])===-1&&re.push(le[Ce]);if(y(re),this.autoPaging)for(var Ne=re[0],ye=re[re.length-1],$e=Ne;$e<ye+1;$e++){this.pdf.setPage($e);var nt=$e===1?this.posY+this.margin[0]:this.margin[0],rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[2],Me=gt-this.margin[0],Ze=this.pdf.internal.pageSize.width-this.margin[1],ft=Ze-this.margin[3],xt=$e===1?0:rt+($e-2)*Me;if(this.ctx.clip_path.length!==0){var kt=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(we,this.posX+this.margin[3],-1*xt+nt),E.call(this,"fill",!0),this.path=kt}var St=b([JSON.parse(JSON.stringify(xe))],this.posX+this.margin[3],-xt+nt+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*L.scale),ge=this.lineWidth,this.lineWidth=ge*L.scale);var zt=this.autoPaging!=="text";if(zt||St.y+St.h<=gt){if(zt||St.y>=nt&&St.x<=Ze){var lt=zt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ze-St.x)[0],jr=b([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-xt+nt+this.ctx.prevPageLastElemOffset)[0],Xt=zt&&($e>Ne||$e<ye)&&g.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Me,null).clip().discardPath()),this.pdf.text(lt,jr.x,jr.y,{angle:L.angle,align:V,renderingMode:L.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else St.y<gt&&(this.ctx.prevPageLastElemOffset+=gt-St.y);L.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ge)}else L.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*L.scale),ge=this.lineWidth,this.lineWidth=ge*L.scale),this.pdf.text(L.text,he.x+this.posX,he.y+this.posY,{angle:L.angle,align:V,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ge)},O=function(L,V,G,Z){G=G||0,Z=Z||0,this.pdf.internal.out(r(L+G)+" "+s(V+Z)+" l")},D=function(L,V,G){return this.pdf.lines(L,V,G,null,null)},$=function(L,V,G,Z,te,he,me,oe){this.pdf.internal.out([t(a(G+L)),t(i(Z+V)),t(a(te+L)),t(i(he+V)),t(a(me+L)),t(i(oe+V)),"c"].join(" "))},M=function(L,V,G,Z){for(var te=2*Math.PI,he=Math.PI/2;V>G;)V-=te;var me=Math.abs(G-V);me<te&&Z&&(me=te-me);for(var oe=[],we=Z?-1:1,ve=V;me>1e-5;){var ge=ve+we*Math.min(me,he);oe.push(R.call(this,L,ve,ge)),me-=Math.abs(ge-ve),ve=ge}return oe},R=function(L,V,G){var Z=(G-V)/2,te=L*Math.cos(Z),he=L*Math.sin(Z),me=te,oe=-he,we=me*me+oe*oe,ve=we+me*te+oe*he,ge=4/3*(Math.sqrt(2*we*ve)-ve)/(me*he-oe*te),De=me-ge*oe,xe=oe+ge*me,le=De,re=-xe,Ce=Z+V,Ne=Math.cos(Ce),ye=Math.sin(Ce);return{x1:L*Math.cos(V),y1:L*Math.sin(V),x2:De*Ne-xe*ye,y2:De*ye+xe*Ne,x3:le*Ne-re*ye,y3:le*ye+re*Ne,x4:L*Math.cos(G),y4:L*Math.sin(G)}},B=function(L){return 180*L/Math.PI},U=function(L,V,G,Z,te,he){var me=L+.5*(G-L),oe=V+.5*(Z-V),we=te+.5*(G-te),ve=he+.5*(Z-he),ge=Math.min(L,te,me,we),De=Math.max(L,te,me,we),xe=Math.min(V,he,oe,ve),le=Math.max(V,he,oe,ve);return new l(ge,xe,De-ge,le-xe)},W=function(L,V,G,Z,te,he,me,oe){var we,ve,ge,De,xe,le,re,Ce,Ne,ye,$e,nt,rt,gt,Me=G-L,Ze=Z-V,ft=te-G,xt=he-Z,kt=me-te,St=oe-he;for(ve=0;ve<41;ve++)Ne=(re=(ge=L+(we=ve/40)*Me)+we*((xe=G+we*ft)-ge))+we*(xe+we*(te+we*kt-xe)-re),ye=(Ce=(De=V+we*Ze)+we*((le=Z+we*xt)-De))+we*(le+we*(he+we*St-le)-Ce),ve==0?($e=Ne,nt=ye,rt=Ne,gt=ye):($e=Math.min($e,Ne),nt=Math.min(nt,ye),rt=Math.max(rt,Ne),gt=Math.max(gt,ye));return new l(Math.round($e),Math.round(nt),Math.round(rt-$e),Math.round(gt-nt))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,V,G=(L=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:V}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Tt.API),function(e){var t=function(i){var o,l,c,d,f,u,h,m,v,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(f=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(u=(f=((f=((f=((f=(f-(g=f%85))/85)-(v=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,l.push(u+33,h+33,m+33,v+33,g+33)):l.push(122);return function(p,x){for(var b=x;b>0;b--)p.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,f,u=String,h="length",m=255,v="charCodeAt",g="slice",p="replace";for(i[g](-2),i=i[g](0,-2)[p](/\s/g,"")[p]("z","!!!!!"),c=[],d=0,f=(i+=o="uuuuu"[g](i[h]%5||5))[h];f>d;d+=5)l=52200625*(i[v](d)-33)+614125*(i[v](d+1)-33)+7225*(i[v](d+2)-33)+85*(i[v](d+3)-33)+(i[v](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(x,b){for(var y=b;y>0;y--)x.pop()}(c,o[h]),u.fromCharCode.apply(u,c)},s=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=xC(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Tt.API),function(e){e.loadFile=function(t,r,s){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,f){var u=new XMLHttpRequest,h=0,m=function(v){var g=v.length,p=[],x=String.fromCharCode;for(h=0;h<g;h+=1)p.push(x(255&v.charCodeAt(h)));return p.join("")};if(u.open("GET",c,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?f(m(this.responseText)):f(void 0)}),u.send(null),d&&u.status===200)return m(u.responseText)}(a,i,o)}catch{}return l}(t,r,s)},e.loadImageFile=e.loadFile}(Tt.API),function(e){function t(){return(Ft.html2canvas?Promise.resolve(Ft.html2canvas):md(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Ft.DOMPurify?Promise.resolve(Ft.DOMPurify):md(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var s=function(o){var l=yr(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(s(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,f){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)f!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(c(h,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],v=m.src.find(function(g){return g.format==="truetype"});v&&c.addFont(v.url,m.ref.name,m.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,c.context2d.save(!0),l(this.prop.container,u)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(s(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,f){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return c.updateProgress(null,d),u}).then(d,f).then(function(u){return c.updateProgress(1),u})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=c.call(d,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Tt.getPageSize=function(o,l,c){if(yr(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,u=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var m,v=0,g=0;if(h.hasOwnProperty(u))v=h[u][1]/f,g=h[u][0]/f;else try{v=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>v&&(m=g,g=v,v=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>g&&(m=g,g=v,v=m)}return{width:g,height:v,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(SC):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(Tt.API),Tt.API.addJS=function(e){return $k=e,this.internal.events.subscribe("postPutResources",function(){ty=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ty+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Rk=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$k+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ty!==void 0&&Rk!==void 0&&this.internal.out("/Names <</JavaScript "+ty+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=s.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(i=0;i<d;i++){var u=r.internal.newObject();f.push(u);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,a,i){var o={title:a,options:i,children:[]};return s==null&&(s=this.root),s.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var o=s.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,a){for(var i=0;i<a.children.length;i++)s.count++,this.count_r(s,a.children[i]);return s.count}}])}(Tt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,a,i,o,l){var c,d=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(u){for(var h,m=256*u.charCodeAt(4)+u.charCodeAt(5),v=u.length,g={width:0,height:0,numcomponents:1},p=4;p<v;p+=2){if(p+=m,t.indexOf(u.charCodeAt(p+1))!==-1){h=256*u.charCodeAt(p+5)+u.charCodeAt(p+6),g={width:256*u.charCodeAt(p+7)+u.charCodeAt(p+8),height:h,numcomponents:u.charCodeAt(p+9)};break}m=256*u.charCodeAt(p+2)+u.charCodeAt(p+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:s,alias:a}}return f}}(Tt.API);var Mf,ry,Fk,Mk,Bk,dfe=function(){var e,t,r;function s(i){var o,l,c,d,f,u,h,m,v,g,p,x,b,y;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(o=this.readUInt32(),v=(function(){var j,E;for(E=[],j=0;j<4;++j)E.push(String.fromCharCode(this.data[this.pos++]));return E}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*f/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),i=(u!=null?u.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(b=0;0<=g?b<g:b>g;0<=g?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(p=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,p.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,p.slice(h+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(y=this.colorType)===4||y===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(u,h,m,v){var g,p,x,b,y,j,E,C,S,N,_,I,T,A,O,D,$,M,R,B,U,W=Math.ceil((d.width-u)/m),q=Math.ceil((d.height-h)/v),L=d.width==W&&d.height==q;for(A=o*W,I=L?l:new Uint8Array(A*q),j=i.length,T=0,p=0;T<q&&c<j;){switch(i[c++]){case 0:for(b=$=0;$<A;b=$+=1)I[p++]=i[c++];break;case 1:for(b=M=0;M<A;b=M+=1)g=i[c++],y=b<o?0:I[p-o],I[p++]=(g+y)%256;break;case 2:for(b=R=0;R<A;b=R+=1)g=i[c++],x=(b-b%o)/o,O=T&&I[(T-1)*A+x*o+b%o],I[p++]=(O+g)%256;break;case 3:for(b=B=0;B<A;b=B+=1)g=i[c++],x=(b-b%o)/o,y=b<o?0:I[p-o],O=T&&I[(T-1)*A+x*o+b%o],I[p++]=(g+Math.floor((y+O)/2))%256;break;case 4:for(b=U=0;U<A;b=U+=1)g=i[c++],x=(b-b%o)/o,y=b<o?0:I[p-o],T===0?O=D=0:(O=I[(T-1)*A+x*o+b%o],D=x&&I[(T-1)*A+(x-1)*o+b%o]),E=y+O-D,C=Math.abs(E-y),N=Math.abs(E-O),_=Math.abs(E-D),S=C<=N&&C<=_?y:N<=_?O:D,I[p++]=(g+S)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!L){var V=((h+T*v)*d.width+u)*o,G=T*A;for(b=0;b<W;b+=1){for(var Z=0;Z<o;Z+=1)l[V++]=I[G++];V+=(m-1)*o}}T++}}return i=zue(i),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},s.prototype.decodePalette=function(){var i,o,l,c,d,f,u,h,m;for(l=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+l.length),c=0,i=0,o=u=0,h=l.length;u<h;o=u+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=f[i++])!=null?m:255;return d},s.prototype.copyToImageData=function(i,o){var l,c,d,f,u,h,m,v,g,p,x;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),c=4,l=!0),v=(d=i.data||i).length,u=g||o,f=h=0,c===1)for(;f<v;)m=g?4*o[f/4]:h,p=u[m++],d[f++]=p,d[f++]=p,d[f++]=p,d[f++]=l?u[m++]:255,h=m;else for(;f<v;)m=g?4*o[f/4]:h,d[f++]=u[m++],d[f++]=u[m++],d[f++]=u[m++],d[f++]=l?u[m++]:255,h=m},s.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Ft)==="[object Window]"){try{t=Ft.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(i){var o,l,c,d,f,u,h,m;if(this.animation){for(m=[],l=f=0,u=(h=this.animation.frames).length;f<u;l=++f)o=h[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=e(c));return m}},s.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},s.prototype.animate=function(i){var o,l,c,d,f,u,h=this;return l=0,u=this.animation,d=u.numFrames,c=u.frames,f=u.numPlays,(o=function(){var m,v;if(m=l++%d,v=c[m],h.renderFrame(i,m),d>1&&l/d<f)return h.animation._timeout=setTimeout(o,v.delay)})()},s.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},s.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ufe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,f=[],u=0,h=null,m=0,v=null;for(this.width=r,this.height=s;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],!(1&g)&&(h=null),m=g>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var p=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,j=e[t++],E=j>>6&1,C=1<<(7&j)+1,S=l,N=c,_=!1;j>>7&&(_=!0,S=t,N=C,t+=3*C);var I=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}f.push({x:p,y:x,width:b,height:y,has_local_palette:_,palette_offset:S,palette_size:N,data_offset:I,data_length:t-I,transparent_index:h,interlaced:!!E,delay:u,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return v},this.frameInfo=function(A){if(A<0||A>=f.length)throw new Error("Frame index out of range.");return f[A]},this.decodeAndBlitFrameBGRA=function(A,O){var D=this.frameInfo(A),$=D.width*D.height,M=new Uint8Array($);zk(e,D.data_offset,M,$);var R=D.palette_offset,B=D.transparent_index;B===null&&(B=256);var U=D.width,W=r-U,q=U,L=4*(D.y*r+D.x),V=4*((D.y+D.height)*r+D.x),G=L,Z=4*W;D.interlaced===!0&&(Z+=4*r*7);for(var te=8,he=0,me=M.length;he<me;++he){var oe=M[he];if(q===0&&(q=U,(G+=Z)>=V&&(Z=4*W+4*r*(te-1),G=L+(U+W)*(te<<1),te>>=1)),oe===B)G+=4;else{var we=e[R+3*oe],ve=e[R+3*oe+1],ge=e[R+3*oe+2];O[G++]=ge,O[G++]=ve,O[G++]=we,O[G++]=255}--q}},this.decodeAndBlitFrameRGBA=function(A,O){var D=this.frameInfo(A),$=D.width*D.height,M=new Uint8Array($);zk(e,D.data_offset,M,$);var R=D.palette_offset,B=D.transparent_index;B===null&&(B=256);var U=D.width,W=r-U,q=U,L=4*(D.y*r+D.x),V=4*((D.y+D.height)*r+D.x),G=L,Z=4*W;D.interlaced===!0&&(Z+=4*r*7);for(var te=8,he=0,me=M.length;he<me;++he){var oe=M[he];if(q===0&&(q=U,(G+=Z)>=V&&(Z=4*W+4*r*(te-1),G=L+(U+W)*(te<<1),te>>=1)),oe===B)G+=4;else{var we=e[R+3*oe],ve=e[R+3*oe+1],ge=e[R+3*oe+2];O[G++]=we,O[G++]=ve,O[G++]=ge,O[G++]=255}--q}}}function zk(e,t,r,s){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,f=0,u=0,h=0,m=e[t++],v=new Int32Array(4096),g=null;;){for(;f<16&&m!==0;)u|=e[t++]<<f,f+=8,m===1?m=e[t++]:--m;if(f<c)break;var p=u&d;if(u>>=c,f-=c,p!==i){if(p===o)break;for(var x=p<l?p:g,b=0,y=x;y>i;)y=v[y]>>8,++b;var j=y;if(h+b+(x!==p?1:0)>s)return void Fr.log("Warning, gif stream longer than expected.");r[h++]=j;var E=h+=b;for(x!==p&&(r[h++]=j),y=x;b--;)y=v[y],r[--E]=255&y,y>>=8;g!==null&&l<4096&&(v[l++]=g<<8|j,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=p}else l=o+1,d=(1<<(c=a+1))-1,g=null}return h!==s&&Fr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function KN(e){var t,r,s,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),f=new Array(64),u=new Array(65535),h=new Array(65535),m=new Array(64),v=new Array(64),g=[],p=0,x=7,b=new Array(64),y=new Array(64),j=new Array(64),E=new Array(256),C=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(L,V){for(var G=0,Z=0,te=new Array,he=1;he<=16;he++){for(var me=1;me<=L[he];me++)te[V[Z]]=[],te[V[Z]][0]=G,te[V[Z]][1]=he,Z++,G++;G*=2}return te}function R(L){for(var V=L[0],G=L[1]-1;G>=0;)V&1<<G&&(p|=1<<x),G--,--x<0&&(p==255?(B(255),B(0)):B(p),x=7,p=0)}function B(L){g.push(L)}function U(L){B(L>>8&255),B(255&L)}function W(L,V,G,Z,te){for(var he,me=te[0],oe=te[240],we=function(ye,$e){var nt,rt,gt,Me,Ze,ft,xt,kt,St,zt,lt=0;for(St=0;St<8;++St){nt=ye[lt],rt=ye[lt+1],gt=ye[lt+2],Me=ye[lt+3],Ze=ye[lt+4],ft=ye[lt+5],xt=ye[lt+6];var jr=nt+(kt=ye[lt+7]),Xt=nt-kt,Wn=rt+xt,wr=rt-xt,kr=gt+ft,aa=gt-ft,dr=Me+Ze,ol=Me-Ze,xn=jr+dr,_i=jr-dr,ll=Wn+kr,yn=Wn-kr;ye[lt]=xn+ll,ye[lt+4]=xn-ll;var Wt=.707106781*(yn+_i);ye[lt+2]=_i+Wt,ye[lt+6]=_i-Wt;var Sr=.382683433*((xn=ol+aa)-(yn=wr+Xt)),Id=.5411961*xn+Sr,vs=1.306562965*yn+Sr,yo=.707106781*(ll=aa+wr),bo=Xt+yo,Ot=Xt-yo;ye[lt+5]=Ot+Id,ye[lt+3]=Ot-Id,ye[lt+1]=bo+vs,ye[lt+7]=bo-vs,lt+=8}for(lt=0,St=0;St<8;++St){nt=ye[lt],rt=ye[lt+8],gt=ye[lt+16],Me=ye[lt+24],Ze=ye[lt+32],ft=ye[lt+40],xt=ye[lt+48];var Ii=nt+(kt=ye[lt+56]),jo=nt-kt,ia=rt+xt,Hn=rt-xt,Rn=gt+ft,Pa=gt-ft,nf=Me+Ze,cl=Me-Ze,ki=Ii+nf,Di=Ii-nf,Oi=ia+Rn,wo=ia-Rn;ye[lt]=ki+Oi,ye[lt+32]=ki-Oi;var Ja=.707106781*(wo+Di);ye[lt+16]=Di+Ja,ye[lt+48]=Di-Ja;var No=.382683433*((ki=cl+Pa)-(wo=Hn+jo)),kd=.5411961*ki+No,sf=1.306562965*wo+No,af=.707106781*(Oi=Pa+Hn),of=jo+af,lf=jo-af;ye[lt+40]=lf+kd,ye[lt+24]=lf-kd,ye[lt+8]=of+sf,ye[lt+56]=of-sf,lt++}for(St=0;St<64;++St)zt=ye[St]*$e[St],m[St]=zt>0?zt+.5|0:zt-.5|0;return m}(L,V),ve=0;ve<64;++ve)v[S[ve]]=we[ve];var ge=v[0]-G;G=v[0],ge==0?R(Z[0]):(R(Z[h[he=32767+ge]]),R(u[he]));for(var De=63;De>0&&v[De]==0;)De--;if(De==0)return R(me),G;for(var xe,le=1;le<=De;){for(var re=le;v[le]==0&&le<=De;)++le;var Ce=le-re;if(Ce>=16){xe=Ce>>4;for(var Ne=1;Ne<=xe;++Ne)R(oe);Ce&=15}he=32767+v[le],R(te[(Ce<<4)+h[he]]),R(u[he]),le++}return De!=63&&R(me),G}function q(L){L=Math.min(Math.max(L,1),100),i!=L&&(function(V){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var te=o((G[Z]*V+50)/100);te=Math.min(Math.max(te,1),255),l[S[Z]]=te}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var oe=o((he[me]*V+50)/100);oe=Math.min(Math.max(oe,1),255),c[S[me]]=oe}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,ge=0;ge<8;ge++)for(var De=0;De<8;De++)d[ve]=1/(l[S[ve]]*we[ge]*we[De]*8),f[ve]=1/(c[S[ve]]*we[ge]*we[De]*8),ve++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,V){V&&q(V),g=new Array,p=0,x=7,U(65496),U(65504),U(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),U(1),U(1),B(0),B(0),function(){U(65499),U(132),B(0);for(var rt=0;rt<64;rt++)B(l[rt]);B(1);for(var gt=0;gt<64;gt++)B(c[gt])}(),function(rt,gt){U(65472),U(17),B(8),U(gt),U(rt),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(L.width,L.height),function(){U(65476),U(418),B(0);for(var rt=0;rt<16;rt++)B(N[rt+1]);for(var gt=0;gt<=11;gt++)B(_[gt]);B(16);for(var Me=0;Me<16;Me++)B(I[Me+1]);for(var Ze=0;Ze<=161;Ze++)B(T[Ze]);B(1);for(var ft=0;ft<16;ft++)B(A[ft+1]);for(var xt=0;xt<=11;xt++)B(O[xt]);B(17);for(var kt=0;kt<16;kt++)B(D[kt+1]);for(var St=0;St<=161;St++)B($[St])}(),U(65498),U(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var G=0,Z=0,te=0;p=0,x=7,this.encode.displayName="_encode_";for(var he,me,oe,we,ve,ge,De,xe,le,re=L.data,Ce=L.width,Ne=L.height,ye=4*Ce,$e=0;$e<Ne;){for(he=0;he<ye;){for(ve=ye*$e+he,De=-1,xe=0,le=0;le<64;le++)ge=ve+(xe=le>>3)*ye+(De=4*(7&le)),$e+xe>=Ne&&(ge-=ye*($e+1+xe-Ne)),he+De>=ye&&(ge-=he+De-ye+4),me=re[ge++],oe=re[ge++],we=re[ge++],b[le]=(C[me]+C[oe+256>>0]+C[we+512>>0]>>16)-128,y[le]=(C[me+768>>0]+C[oe+1024>>0]+C[we+1280>>0]>>16)-128,j[le]=(C[me+1280>>0]+C[oe+1536>>0]+C[we+1792>>0]>>16)-128;G=W(b,d,G,t,s),Z=W(y,f,Z,r,a),te=W(j,f,te,r,a),he+=32}$e+=8}if(x>=0){var nt=[];nt[1]=x+1,nt[0]=(1<<x+1)-1,R(nt)}return U(65497),new Uint8Array(g)},e=e||50,function(){for(var L=String.fromCharCode,V=0;V<256;V++)E[V]=L(V)}(),t=M(N,_),r=M(A,O),s=M(I,T),a=M(D,$),function(){for(var L=1,V=2,G=1;G<=15;G++){for(var Z=L;Z<V;Z++)h[32767+Z]=G,u[32767+Z]=[],u[32767+Z][1]=G,u[32767+Z][0]=Z;for(var te=-(V-1);te<=-L;te++)h[32767+te]=G,u[32767+te]=[],u[32767+te][1]=G,u[32767+te][0]=V-1+te;L<<=1,V<<=1}}(),function(){for(var L=0;L<256;L++)C[L]=19595*L,C[L+256>>0]=38470*L,C[L+512>>0]=7471*L+32768,C[L+768>>0]=-11059*L,C[L+1024>>0]=-21709*L,C[L+1280>>0]=32768*L+8421375,C[L+1536>>0]=-27439*L,C[L+1792>>0]=-5329*L}(),q(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Vi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Uk(e){function t(N){if(!N)throw Error("assert :P")}function r(N,_,I){for(var T=0;4>T;T++)if(N[_+T]!=I.charCodeAt(T))return!0;return!1}function s(N,_,I,T,A){for(var O=0;O<A;O++)N[_+O]=I[T+O]}function a(N,_,I,T){for(var A=0;A<T;A++)N[_+A]=I}function i(N){return new Int32Array(N)}function o(N,_){for(var I=[],T=0;T<N;T++)I.push(new _);return I}function l(N,_){var I=[];return function T(A,O,D){for(var $=D[O],M=0;M<$&&(A.push(D.length>O+1?[]:new _),!(D.length<O+1));M++)T(A[M],O+1,D)}(I,0,N),I}var c=function(){var N=this;function _(P,k){for(var z=1<<k-1>>>0;P&z;)z>>>=1;return z?(P&z-1)+z:P}function I(P,k,z,H,Y){t(!(H%z));do P[k+(H-=z)]=Y;while(0<H)}function T(P,k,z,H,Y){if(t(2328>=Y),512>=Y)var ee=i(512);else if((ee=i(Y))==null)return 0;return function(ne,se,ie,de,Ae,Oe){var Le,Ie,Xe=se,Be=1<<ie,Ee=i(16),Te=i(16);for(t(Ae!=0),t(de!=null),t(ne!=null),t(0<ie),Ie=0;Ie<Ae;++Ie){if(15<de[Ie])return 0;++Ee[de[Ie]]}if(Ee[0]==Ae)return 0;for(Te[1]=0,Le=1;15>Le;++Le){if(Ee[Le]>1<<Le)return 0;Te[Le+1]=Te[Le]+Ee[Le]}for(Ie=0;Ie<Ae;++Ie)Le=de[Ie],0<de[Ie]&&(Oe[Te[Le]++]=Ie);if(Te[15]==1)return(de=new A).g=0,de.value=Oe[0],I(ne,Xe,1,Be,de),Be;var Ke,Je=-1,Ye=Be-1,pt=0,ut=1,Dt=1,ht=1<<ie;for(Ie=0,Le=1,Ae=2;Le<=ie;++Le,Ae<<=1){if(ut+=Dt<<=1,0>(Dt-=Ee[Le]))return 0;for(;0<Ee[Le];--Ee[Le])(de=new A).g=Le,de.value=Oe[Ie++],I(ne,Xe+pt,Ae,ht,de),pt=_(pt,Le)}for(Le=ie+1,Ae=2;15>=Le;++Le,Ae<<=1){if(ut+=Dt<<=1,0>(Dt-=Ee[Le]))return 0;for(;0<Ee[Le];--Ee[Le]){if(de=new A,(pt&Ye)!=Je){for(Xe+=ht,Ke=1<<(Je=Le)-ie;15>Je&&!(0>=(Ke-=Ee[Je]));)++Je,Ke<<=1;Be+=ht=1<<(Ke=Je-ie),ne[se+(Je=pt&Ye)].g=Ke+ie,ne[se+Je].value=Xe-se-Je}de.g=Le-ie,de.value=Oe[Ie++],I(ne,Xe+(pt>>ie),Ae,ht,de),pt=_(pt,Le)}}return ut!=2*Te[15]-1?0:Be}(P,k,z,H,Y,ee)}function A(){this.value=this.g=0}function O(){this.value=this.g=0}function D(){this.G=o(5,A),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(gs,O)}function $(P,k,z,H){t(P!=null),t(k!=null),t(2147483648>H),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=k,P.pa=z,P.Jd=k,P.Yc=z+H,P.Zc=4<=H?z+H-4+1:z,he(P)}function M(P,k){for(var z=0;0<k--;)z|=oe(P,128)<<k;return z}function R(P,k){var z=M(P,k);return me(P)?-z:z}function B(P,k,z,H){var Y,ee=0;for(t(P!=null),t(k!=null),t(4294967288>H),P.Sb=H,P.Ra=0,P.u=0,P.h=0,4<H&&(H=4),Y=0;Y<H;++Y)ee+=k[z+Y]<<8*Y;P.Ra=ee,P.bb=H,P.oa=k,P.pa=z}function U(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<Nf-8>>>0,++P.bb,P.u-=8;G(P)&&(P.h=1,P.u=0)}function W(P,k){if(t(0<=k),!P.h&&k<=wf){var z=V(P)&jf[k];return P.u+=k,U(P),z}return P.h=1,P.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(P){return P.Ra>>>(P.u&Nf-1)>>>0}function G(P){return t(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>Nf}function Z(P,k){P.u=k,P.h=G(P)}function te(P){P.u>=hp&&(t(P.u>=hp),U(P))}function he(P){t(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(t(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function me(P){return M(P,1)}function oe(P,k){var z=P.Ca;0>P.b&&he(P);var H=P.b,Y=z*k>>>8,ee=(P.I>>>H>Y)+0;for(ee?(z-=Y,P.I-=Y+1<<H>>>0):z=Y+1,H=z,Y=0;256<=H;)Y+=8,H>>=8;return H=7^Y+la[H],P.b-=H,P.Ca=(z<<H)-1,ee}function we(P,k,z){P[k+0]=z>>24&255,P[k+1]=z>>16&255,P[k+2]=z>>8&255,P[k+3]=z>>0&255}function ve(P,k){return P[k+0]<<0|P[k+1]<<8}function ge(P,k){return ve(P,k)|P[k+2]<<16}function De(P,k){return ve(P,k)|ve(P,k+2)<<16}function xe(P,k){var z=1<<k;return t(P!=null),t(0<k),P.X=i(z),P.X==null?0:(P.Mb=32-k,P.Xa=k,1)}function le(P,k){t(P!=null),t(k!=null),t(P.Xa==k.Xa),s(k.X,0,P.X,0,1<<k.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function Ce(P,k,z,H){t(z!=null),t(H!=null);var Y=z[0],ee=H[0];return Y==0&&(Y=(P*ee+k/2)/k),ee==0&&(ee=(k*Y+P/2)/P),0>=Y||0>=ee?0:(z[0]=Y,H[0]=ee,1)}function Ne(P,k){return P+(1<<k)-1>>>k}function ye(P,k){return((4278255360&P)+(4278255360&k)>>>0&4278255360)+((16711935&P)+(16711935&k)>>>0&16711935)>>>0}function $e(P,k){N[k]=function(z,H,Y,ee,ne,se,ie){var de;for(de=0;de<ne;++de){var Ae=N[P](se[ie+de-1],Y,ee+de);se[ie+de]=ye(z[H+de],Ae)}}}function nt(){this.ud=this.hd=this.jd=0}function rt(P,k){return((4278124286&(P^k))>>>1)+(P&k)>>>0}function gt(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function Me(P,k){return gt(P+(P-k+.5>>1))}function Ze(P,k,z){return Math.abs(k-z)-Math.abs(P-z)}function ft(P,k,z,H,Y,ee,ne){for(H=ee[ne-1],z=0;z<Y;++z)ee[ne+z]=H=ye(P[k+z],H)}function xt(P,k,z,H,Y){var ee;for(ee=0;ee<z;++ee){var ne=P[k+ee],se=ne>>8&255,ie=16711935&(ie=(ie=16711935&ne)+((se<<16)+se));H[Y+ee]=(4278255360&ne)+ie>>>0}}function kt(P,k){k.jd=P>>0&255,k.hd=P>>8&255,k.ud=P>>16&255}function St(P,k,z,H,Y,ee){var ne;for(ne=0;ne<H;++ne){var se=k[z+ne],ie=se>>>8,de=se,Ae=255&(Ae=(Ae=se>>>16)+((P.jd<<24>>24)*(ie<<24>>24)>>>5));de=255&(de=(de=de+((P.hd<<24>>24)*(ie<<24>>24)>>>5))+((P.ud<<24>>24)*(Ae<<24>>24)>>>5)),Y[ee+ne]=(4278255360&se)+(Ae<<16)+de}}function zt(P,k,z,H,Y){N[k]=function(ee,ne,se,ie,de,Ae,Oe,Le,Ie){for(ie=Oe;ie<Le;++ie)for(Oe=0;Oe<Ie;++Oe)de[Ae++]=Y(se[H(ee[ne++])])},N[P]=function(ee,ne,se,ie,de,Ae,Oe){var Le=8>>ee.b,Ie=ee.Ea,Xe=ee.K[0],Be=ee.w;if(8>Le)for(ee=(1<<ee.b)-1,Be=(1<<Le)-1;ne<se;++ne){var Ee,Te=0;for(Ee=0;Ee<Ie;++Ee)Ee&ee||(Te=H(ie[de++])),Ae[Oe++]=Y(Xe[Te&Be]),Te>>=Le}else N["VP8LMapColor"+z](ie,de,Xe,Be,Ae,Oe,ne,se,Ie)}}function lt(P,k,z,H,Y){for(z=k+z;k<z;){var ee=P[k++];H[Y++]=ee>>16&255,H[Y++]=ee>>8&255,H[Y++]=ee>>0&255}}function jr(P,k,z,H,Y){for(z=k+z;k<z;){var ee=P[k++];H[Y++]=ee>>16&255,H[Y++]=ee>>8&255,H[Y++]=ee>>0&255,H[Y++]=ee>>24&255}}function Xt(P,k,z,H,Y){for(z=k+z;k<z;){var ee=(ne=P[k++])>>16&240|ne>>12&15,ne=ne>>0&240|ne>>28&15;H[Y++]=ee,H[Y++]=ne}}function Wn(P,k,z,H,Y){for(z=k+z;k<z;){var ee=(ne=P[k++])>>16&248|ne>>13&7,ne=ne>>5&224|ne>>3&31;H[Y++]=ee,H[Y++]=ne}}function wr(P,k,z,H,Y){for(z=k+z;k<z;){var ee=P[k++];H[Y++]=ee>>0&255,H[Y++]=ee>>8&255,H[Y++]=ee>>16&255}}function kr(P,k,z,H,Y,ee){if(ee==0)for(z=k+z;k<z;)we(H,((ee=P[k++])[0]>>24|ee[1]>>8&65280|ee[2]<<8&16711680|ee[3]<<24)>>>0),Y+=32;else s(H,Y,P,k,z)}function aa(P,k){N[k][0]=N[P+"0"],N[k][1]=N[P+"1"],N[k][2]=N[P+"2"],N[k][3]=N[P+"3"],N[k][4]=N[P+"4"],N[k][5]=N[P+"5"],N[k][6]=N[P+"6"],N[k][7]=N[P+"7"],N[k][8]=N[P+"8"],N[k][9]=N[P+"9"],N[k][10]=N[P+"10"],N[k][11]=N[P+"11"],N[k][12]=N[P+"12"],N[k][13]=N[P+"13"],N[k][14]=N[P+"0"],N[k][15]=N[P+"0"]}function dr(P){return P==m2||P==p2||P==s0||P==v2}function ol(){this.eb=[],this.size=this.A=this.fb=0}function xn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function _i(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ol,this.f.kb=new xn,this.sd=null}function ll(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Wt(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function Sr(P,k){var z=P.T,H=k.ba.f.RGBA,Y=H.eb,ee=H.fb+P.ka*H.A,ne=si[k.ba.S],se=P.y,ie=P.O,de=P.f,Ae=P.N,Oe=P.ea,Le=P.W,Ie=k.cc,Xe=k.dc,Be=k.Mc,Ee=k.Nc,Te=P.ka,Ke=P.ka+P.T,Je=P.U,Ye=Je+1>>1;for(Te==0?ne(se,ie,null,null,de,Ae,Oe,Le,de,Ae,Oe,Le,Y,ee,null,null,Je):(ne(k.ec,k.fc,se,ie,Ie,Xe,Be,Ee,de,Ae,Oe,Le,Y,ee-H.A,Y,ee,Je),++z);Te+2<Ke;Te+=2)Ie=de,Xe=Ae,Be=Oe,Ee=Le,Ae+=P.Rc,Le+=P.Rc,ee+=2*H.A,ne(se,(ie+=2*P.fa)-P.fa,se,ie,Ie,Xe,Be,Ee,de,Ae,Oe,Le,Y,ee-H.A,Y,ee,Je);return ie+=P.fa,P.j+Ke<P.o?(s(k.ec,k.fc,se,ie,Je),s(k.cc,k.dc,de,Ae,Ye),s(k.Mc,k.Nc,Oe,Le,Ye),z--):1&Ke||ne(se,ie,null,null,de,Ae,Oe,Le,de,Ae,Oe,Le,Y,ee+H.A,null,null,Je),z}function Id(P,k,z){var H=P.F,Y=[P.J];if(H!=null){var ee=P.U,ne=k.ba.S,se=ne==n0||ne==s0;k=k.ba.f.RGBA;var ie=[0],de=P.ka;ie[0]=P.T,P.Kb&&(de==0?--ie[0]:(--de,Y[0]-=P.width),P.j+P.ka+P.T==P.o&&(ie[0]=P.o-P.j-de));var Ae=k.eb;de=k.fb+de*k.A,P=qr(H,Y[0],P.width,ee,ie,Ae,de+(se?0:3),k.A),t(z==ie),P&&dr(ne)&&ri(Ae,de,se,ee,ie,k.A)}return 0}function vs(P){var k=P.ma,z=k.ba.S,H=11>z,Y=z==t0||z==r0||z==n0||z==h2||z==12||dr(z);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!up(k.Oa,P,Y?11:12))return 0;if(Y&&dr(z)&&tt(),P.da)alert("todo:use_scaling");else{if(H){if(k.Ib=Wt,P.Kb){if(z=P.U+1>>1,k.memory=i(P.U+2*z),k.memory==null)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+P.U,k.Mc=k.cc,k.Nc=k.dc+z,k.Ib=Sr,tt()}}else alert("todo:EmitYUV");Y&&(k.Jb=Id,H&&ke())}if(H&&!$3){for(P=0;256>P;++P)lW[P]=89858*(P-128)+i0>>a0,uW[P]=-22014*(P-128)+i0,dW[P]=-45773*(P-128),cW[P]=113618*(P-128)+i0>>a0;for(P=bp;P<y2;++P)k=76283*(P-16)+i0>>a0,fW[P-bp]=Ta(k,255),hW[P-bp]=Ta(k+8>>4,15);$3=1}return 1}function yo(P){var k=P.ma,z=P.U,H=P.T;return t(!(1&P.ka)),0>=z||0>=H?0:(z=k.Ib(P,k),k.Jb!=null&&k.Jb(P,k,z),k.Dc+=z,1)}function bo(P){P.ma.memory=null}function Ot(P,k,z,H){return W(P,8)!=47?0:(k[0]=W(P,14)+1,z[0]=W(P,14)+1,H[0]=W(P,1),W(P,3)!=0?0:!P.h)}function Ii(P,k){if(4>P)return P+1;var z=P-2>>1;return(2+(1&P)<<z)+W(k,z)+1}function jo(P,k){return 120<k?k-120:1<=(z=((z=Kq[k-1])>>4)*P+(8-(15&z)))?z:1;var z}function ia(P,k,z){var H=V(z),Y=P[k+=255&H].g-8;return 0<Y&&(Z(z,z.u+8),H=V(z),k+=P[k].value,k+=H&(1<<Y)-1),Z(z,z.u+P[k].g),P[k].value}function Hn(P,k,z){return z.g+=P.g,z.value+=P.value<<k>>>0,t(8>=z.g),P.g}function Rn(P,k,z){var H=P.xc;return t((k=H==0?0:P.vc[P.md*(z>>H)+(k>>H)])<P.Wb),P.Ya[k]}function Pa(P,k,z,H){var Y=P.ab,ee=P.c*k,ne=P.C;k=ne+k;var se=z,ie=H;for(H=P.Ta,z=P.Ua;0<Y--;){var de=P.gc[Y],Ae=ne,Oe=k,Le=se,Ie=ie,Xe=(ie=H,se=z,de.Ea);switch(t(Ae<Oe),t(Oe<=de.nc),de.hc){case 2:Kx(Le,Ie,(Oe-Ae)*Xe,ie,se);break;case 0:var Be=Ae,Ee=Oe,Te=ie,Ke=se,Je=(ht=de).Ea;Be==0&&(u2(Le,Ie,null,null,1,Te,Ke),ft(Le,Ie+1,0,0,Je-1,Te,Ke+1),Ie+=Je,Ke+=Je,++Be);for(var Ye=1<<ht.b,pt=Ye-1,ut=Ne(Je,ht.b),Dt=ht.K,ht=ht.w+(Be>>ht.b)*ut;Be<Ee;){var Nr=Dt,Ar=ht,mr=1;for(mp(Le,Ie,Te,Ke-Je,1,Te,Ke);mr<Je;){var ir=(mr&~pt)+Ye;ir>Je&&(ir=Je),(0,oc[Nr[Ar++]>>8&15])(Le,Ie+ +mr,Te,Ke+mr-Je,ir-mr,Te,Ke+mr),mr=ir}Ie+=Je,Ke+=Je,++Be&pt||(ht+=ut)}Oe!=de.nc&&s(ie,se-Xe,ie,se+(Oe-Ae-1)*Xe,Xe);break;case 1:for(Xe=Le,Ee=Ie,Je=(Le=de.Ea)-(Ke=Le&~(Te=(Ie=1<<de.b)-1)),Be=Ne(Le,de.b),Ye=de.K,de=de.w+(Ae>>de.b)*Be;Ae<Oe;){for(pt=Ye,ut=de,Dt=new nt,ht=Ee+Ke,Nr=Ee+Le;Ee<ht;)kt(pt[ut++],Dt),$d(Dt,Xe,Ee,Ie,ie,se),Ee+=Ie,se+=Ie;Ee<Nr&&(kt(pt[ut++],Dt),$d(Dt,Xe,Ee,Je,ie,se),Ee+=Je,se+=Je),++Ae&Te||(de+=Be)}break;case 3:if(Le==ie&&Ie==se&&0<de.b){for(Ee=ie,Le=Xe=se+(Oe-Ae)*Xe-(Ke=(Oe-Ae)*Ne(de.Ea,de.b)),Ie=ie,Te=se,Be=[],Ke=(Je=Ke)-1;0<=Ke;--Ke)Be[Ke]=Ie[Te+Ke];for(Ke=Je-1;0<=Ke;--Ke)Ee[Le+Ke]=Be[Ke];Za(de,Ae,Oe,ie,Xe,ie,se)}else Za(de,Ae,Oe,Le,Ie,ie,se)}se=H,ie=z}ie!=z&&s(H,z,se,ie,ee)}function nf(P,k){var z=P.V,H=P.Ba+P.c*P.C,Y=k-P.C;if(t(k<=P.l.o),t(16>=Y),0<Y){var ee=P.l,ne=P.Ta,se=P.Ua,ie=ee.width;if(Pa(P,Y,z,H),Y=se=[se],t((z=P.C)<(H=k)),t(ee.v<ee.va),H>ee.o&&(H=ee.o),z<ee.j){var de=ee.j-z;z=ee.j,Y[0]+=de*ie}if(z>=H?z=0:(Y[0]+=4*ee.v,ee.ka=z-ee.j,ee.U=ee.va-ee.v,ee.T=H-z,z=1),z){if(se=se[0],11>(z=P.ca).S){var Ae=z.f.RGBA,Oe=(H=z.S,Y=ee.U,ee=ee.T,de=Ae.eb,Ae.A),Le=ee;for(Ae=Ae.fb+P.Ma*Ae.A;0<Le--;){var Ie=ne,Xe=se,Be=Y,Ee=de,Te=Ae;switch(H){case e0:ca(Ie,Xe,Be,Ee,Te);break;case t0:Gs(Ie,Xe,Be,Ee,Te);break;case m2:Gs(Ie,Xe,Be,Ee,Te),ri(Ee,Te,0,Be,1,0);break;case E3:hl(Ie,Xe,Be,Ee,Te);break;case r0:kr(Ie,Xe,Be,Ee,Te,1);break;case p2:kr(Ie,Xe,Be,Ee,Te,1),ri(Ee,Te,0,Be,1,0);break;case n0:kr(Ie,Xe,Be,Ee,Te,0);break;case s0:kr(Ie,Xe,Be,Ee,Te,0),ri(Ee,Te,1,Be,1,0);break;case h2:lc(Ie,Xe,Be,Ee,Te);break;case v2:lc(Ie,Xe,Be,Ee,Te),Vr(Ee,Te,Be,1,0);break;case P3:fl(Ie,Xe,Be,Ee,Te);break;default:t(0)}se+=ie,Ae+=Oe}P.Ma+=ee}else alert("todo:EmitRescaledRowsYUVA");t(P.Ma<=z.height)}}P.C=k,t(P.C<=P.i)}function cl(P){var k;if(0<P.ua)return 0;for(k=0;k<P.Wb;++k){var z=P.Ya[k].G,H=P.Ya[k].H;if(0<z[1][H[1]+0].g||0<z[2][H[2]+0].g||0<z[3][H[3]+0].g)return 0}return 1}function ki(P,k,z,H,Y,ee){if(P.Z!=0){var ne=P.qd,se=P.rd;for(t(fc[P.Z]!=null);k<z;++k)fc[P.Z](ne,se,H,Y,H,Y,ee),ne=H,se=Y,Y+=ee;P.qd=ne,P.rd=se}}function Di(P,k){var z=P.l.ma,H=z.Z==0||z.Z==1?P.l.j:P.C;if(H=P.C<H?H:P.C,t(k<=P.l.o),k>H){var Y=P.l.width,ee=z.ca,ne=z.tb+Y*H,se=P.V,ie=P.Ba+P.c*H,de=P.gc;t(P.ab==1),t(de[0].hc==3),Yx(de[0],H,k,se,ie,ee,ne),ki(z,H,k,ee,ne,Y)}P.C=P.Ma=k}function Oi(P,k,z,H,Y,ee,ne){var se=P.$/H,ie=P.$%H,de=P.m,Ae=P.s,Oe=z+P.$,Le=Oe;Y=z+H*Y;var Ie=z+H*ee,Xe=280+Ae.ua,Be=P.Pb?se:16777216,Ee=0<Ae.ua?Ae.Wa:null,Te=Ae.wc,Ke=Oe<Ie?Rn(Ae,ie,se):null;t(P.C<ee),t(Ie<=Y);var Je=!1;e:for(;;){for(;Je||Oe<Ie;){var Ye=0;if(se>=Be){var pt=Oe-z;t((Be=P).Pb),Be.wd=Be.m,Be.xd=pt,0<Be.s.ua&&le(Be.s.Wa,Be.s.vb),Be=se+Xq}if(ie&Te||(Ke=Rn(Ae,ie,se)),t(Ke!=null),Ke.Qb&&(k[Oe]=Ke.qb,Je=!0),!Je)if(te(de),Ke.jc){Ye=de,pt=k;var ut=Oe,Dt=Ke.pd[V(Ye)&gs-1];t(Ke.jc),256>Dt.g?(Z(Ye,Ye.u+Dt.g),pt[ut]=Dt.value,Ye=0):(Z(Ye,Ye.u+Dt.g-256),t(256<=Dt.value),Ye=Dt.value),Ye==0&&(Je=!0)}else Ye=ia(Ke.G[0],Ke.H[0],de);if(de.h)break;if(Je||256>Ye){if(!Je)if(Ke.nd)k[Oe]=(Ke.qb|Ye<<8)>>>0;else{if(te(de),Je=ia(Ke.G[1],Ke.H[1],de),te(de),pt=ia(Ke.G[2],Ke.H[2],de),ut=ia(Ke.G[3],Ke.H[3],de),de.h)break;k[Oe]=(ut<<24|Je<<16|Ye<<8|pt)>>>0}if(Je=!1,++Oe,++ie>=H&&(ie=0,++se,ne!=null&&se<=ee&&!(se%16)&&ne(P,se),Ee!=null))for(;Le<Oe;)Ye=k[Le++],Ee.X[(506832829*Ye&4294967295)>>>Ee.Mb]=Ye}else if(280>Ye){if(Ye=Ii(Ye-256,de),pt=ia(Ke.G[4],Ke.H[4],de),te(de),pt=jo(H,pt=Ii(pt,de)),de.h)break;if(Oe-z<pt||Y-Oe<Ye)break e;for(ut=0;ut<Ye;++ut)k[Oe+ut]=k[Oe+ut-pt];for(Oe+=Ye,ie+=Ye;ie>=H;)ie-=H,++se,ne!=null&&se<=ee&&!(se%16)&&ne(P,se);if(t(Oe<=Y),ie&Te&&(Ke=Rn(Ae,ie,se)),Ee!=null)for(;Le<Oe;)Ye=k[Le++],Ee.X[(506832829*Ye&4294967295)>>>Ee.Mb]=Ye}else{if(!(Ye<Xe))break e;for(Je=Ye-280,t(Ee!=null);Le<Oe;)Ye=k[Le++],Ee.X[(506832829*Ye&4294967295)>>>Ee.Mb]=Ye;Ye=Oe,t(!(Je>>>(pt=Ee).Xa)),k[Ye]=pt.X[Je],Je=!0}Je||t(de.h==G(de))}if(P.Pb&&de.h&&Oe<Y)t(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&le(P.s.vb,P.s.Wa);else{if(de.h)break e;ne!=null&&ne(P,se>ee?ee:se),P.a=0,P.$=Oe-z}return 1}return P.a=3,0}function wo(P){t(P!=null),P.vc=null,P.yc=null,P.Ya=null;var k=P.Wa;k!=null&&(k.X=null),P.vb=null,t(P!=null)}function Ja(){var P=new d2;return P==null?null:(P.a=0,P.xb=I3,aa("Predictor","VP8LPredictors"),aa("Predictor","VP8LPredictors_C"),aa("PredictorAdd","VP8LPredictorsAdd"),aa("PredictorAdd","VP8LPredictorsAdd_C"),Kx=xt,$d=St,ca=lt,Gs=jr,lc=Xt,fl=Wn,hl=wr,N.VP8LMapColor32b=Sf,N.VP8LMapColor8b=Xx,P)}function No(P,k,z,H,Y){var ee=1,ne=[P],se=[k],ie=H.m,de=H.s,Ae=null,Oe=0;e:for(;;){if(z)for(;ee&&W(ie,1);){var Le=ne,Ie=se,Xe=H,Be=1,Ee=Xe.m,Te=Xe.gc[Xe.ab],Ke=W(Ee,2);if(Xe.Oc&1<<Ke)ee=0;else{switch(Xe.Oc|=1<<Ke,Te.hc=Ke,Te.Ea=Le[0],Te.nc=Ie[0],Te.K=[null],++Xe.ab,t(4>=Xe.ab),Ke){case 0:case 1:Te.b=W(Ee,3)+2,Be=No(Ne(Te.Ea,Te.b),Ne(Te.nc,Te.b),0,Xe,Te.K),Te.K=Te.K[0];break;case 3:var Je,Ye=W(Ee,8)+1,pt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(Le[0]=Ne(Te.Ea,pt),Te.b=pt,Je=Be=No(Ye,1,0,Xe,Te.K)){var ut,Dt=Ye,ht=Te,Nr=1<<(8>>ht.b),Ar=i(Nr);if(Ar==null)Je=0;else{var mr=ht.K[0],ir=ht.w;for(Ar[0]=ht.K[0][0],ut=1;ut<1*Dt;++ut)Ar[ut]=ye(mr[ir+ut],Ar[ut-1]);for(;ut<4*Nr;++ut)Ar[ut]=0;ht.K[0]=null,ht.K[0]=Ar,Je=1}}Be=Je;break;case 2:break;default:t(0)}ee=Be}}if(ne=ne[0],se=se[0],ee&&W(ie,1)&&!(ee=1<=(Oe=W(ie,4))&&11>=Oe)){H.a=3;break e}var $r;if($r=ee)t:{var Dr,Qt,Fn,da=H,Mn=ne,ua=se,Er=Oe,Ia=z,ka=da.m,ss=da.s,xs=[null],Ys=1,ai=0,Eo=Yq[Er];r:for(;;){if(Ia&&W(ka,1)){var as=W(ka,3)+2,gl=Ne(Mn,as),Ud=Ne(ua,as),Tf=gl*Ud;if(!No(gl,Ud,0,da,xs))break r;for(xs=xs[0],ss.xc=as,Dr=0;Dr<Tf;++Dr){var hc=xs[Dr]>>8&65535;xs[Dr]=hc,hc>=Ys&&(Ys=hc+1)}}if(ka.h)break r;for(Qt=0;5>Qt;++Qt){var jn=T3[Qt];!Qt&&0<Er&&(jn+=1<<Er),ai<jn&&(ai=jn)}var b2=o(Ys*Eo,A),B3=Ys,z3=o(B3,D);if(z3==null)var l0=null;else t(65536>=B3),l0=z3;var jp=i(ai);if(l0==null||jp==null||b2==null){da.a=1;break r}var c0=b2;for(Dr=Fn=0;Dr<Ys;++Dr){var Mi=l0[Dr],_f=Mi.G,If=Mi.H,U3=0,d0=1,V3=0;for(Qt=0;5>Qt;++Qt){jn=T3[Qt],_f[Qt]=c0,If[Qt]=Fn,!Qt&&0<Er&&(jn+=1<<Er);s:{var u0,j2=jn,f0=da,wp=jp,vW=c0,gW=Fn,w2=0,mc=f0.m,xW=W(mc,1);if(a(wp,0,0,j2),xW){var yW=W(mc,1)+1,bW=W(mc,1),q3=W(mc,bW==0?1:8);wp[q3]=1,yW==2&&(wp[q3=W(mc,8)]=1);var h0=1}else{var W3=i(19),H3=W(mc,4)+4;if(19<H3){f0.a=3;var m0=0;break s}for(u0=0;u0<H3;++u0)W3[Gq[u0]]=W(mc,3);var N2=void 0,Np=void 0,G3=f0,jW=W3,p0=j2,K3=wp,S2=0,pc=G3.m,Y3=8,X3=o(128,A);n:for(;T(X3,0,7,jW,19);){if(W(pc,1)){var wW=2+2*W(pc,3);if((N2=2+W(pc,wW))>p0)break n}else N2=p0;for(Np=0;Np<p0&&N2--;){te(pc);var Q3=X3[0+(127&V(pc))];Z(pc,pc.u+Q3.g);var kf=Q3.value;if(16>kf)K3[Np++]=kf,kf!=0&&(Y3=kf);else{var NW=kf==16,J3=kf-16,SW=Wq[J3],Z3=W(pc,qq[J3])+SW;if(Np+Z3>p0)break n;for(var CW=NW?Y3:0;0<Z3--;)K3[Np++]=CW}}S2=1;break n}S2||(G3.a=3),h0=S2}(h0=h0&&!mc.h)&&(w2=T(vW,gW,8,wp,j2)),h0&&w2!=0?m0=w2:(f0.a=3,m0=0)}if(m0==0)break r;if(d0&&Hq[Qt]==1&&(d0=c0[Fn].g==0),U3+=c0[Fn].g,Fn+=m0,3>=Qt){var Sp,C2=jp[0];for(Sp=1;Sp<jn;++Sp)jp[Sp]>C2&&(C2=jp[Sp]);V3+=C2}}if(Mi.nd=d0,Mi.Qb=0,d0&&(Mi.qb=(_f[3][If[3]+0].value<<24|_f[1][If[1]+0].value<<16|_f[2][If[2]+0].value)>>>0,U3==0&&256>_f[0][If[0]+0].value&&(Mi.Qb=1,Mi.qb+=_f[0][If[0]+0].value<<8)),Mi.jc=!Mi.Qb&&6>V3,Mi.jc){var v0,xl=Mi;for(v0=0;v0<gs;++v0){var vc=v0,gc=xl.pd[vc],g0=xl.G[0][xl.H[0]+vc];256<=g0.value?(gc.g=g0.g+256,gc.value=g0.value):(gc.g=0,gc.value=0,vc>>=Hn(g0,8,gc),vc>>=Hn(xl.G[1][xl.H[1]+vc],16,gc),vc>>=Hn(xl.G[2][xl.H[2]+vc],0,gc),Hn(xl.G[3][xl.H[3]+vc],24,gc))}}}ss.vc=xs,ss.Wb=Ys,ss.Ya=l0,ss.yc=b2,$r=1;break t}$r=0}if(!(ee=$r)){H.a=3;break e}if(0<Oe){if(de.ua=1<<Oe,!xe(de.Wa,Oe)){H.a=1,ee=0;break e}}else de.ua=0;var A2=H,eT=ne,AW=se,E2=A2.s,P2=E2.xc;if(A2.c=eT,A2.i=AW,E2.md=Ne(eT,P2),E2.wc=P2==0?-1:(1<<P2)-1,z){H.xb=nW;break e}if((Ae=i(ne*se))==null){H.a=1,ee=0;break e}ee=(ee=Oi(H,Ae,0,ne,se,se,null))&&!ie.h;break e}return ee?(Y!=null?Y[0]=Ae:(t(Ae==null),t(z)),H.$=0,z||wo(de)):wo(de),ee}function kd(P,k){var z=P.c*P.i,H=z+k+16*k;return t(P.c<=k),P.V=i(H),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+z+k,1)}function sf(P,k){var z=P.C,H=k-z,Y=P.V,ee=P.Ba+P.c*z;for(t(k<=P.l.o);0<H;){var ne=16<H?16:H,se=P.l.ma,ie=P.l.width,de=ie*ne,Ae=se.ca,Oe=se.tb+ie*z,Le=P.Ta,Ie=P.Ua;Pa(P,ne,Y,ee),Tn(Le,Ie,Ae,Oe,de),ki(se,z,z+ne,Ae,Oe,ie),H-=ne,Y+=ne*P.c,z+=ne}t(z==k),P.C=P.Ma=k}function af(){this.ub=this.yd=this.td=this.Rb=0}function of(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function lf(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Px(){this.Yb=function(){var P=[];return function k(z,H,Y){for(var ee=Y[H],ne=0;ne<ee&&(z.push(Y.length>H+1?[]:0),!(Y.length<H+1));ne++)k(z[ne],H+1,Y)}(P,0,[3,11]),P}()}function zw(){this.jb=i(3),this.Wc=l([4,8],Px),this.Xc=l([4,17],Px)}function Uw(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function cf(){this.ld=this.La=this.dd=this.tc=0}function Tx(){this.Na=this.la=0}function Vw(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ym(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function qw(){this.uc=this.M=this.Nb=0,this.wa=Array(new cf),this.Y=0,this.ya=Array(new Ym),this.aa=0,this.l=new df}function _x(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ww(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new af,this.Kc=new of,this.ed=new Uw,this.Qa=new lf,this.Ic=this.$c=this.Aa=0,this.D=new qw,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,q),this.ia=0,this.pb=o(4,Vw),this.Pa=new zw,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _x),this.Hd=0,this.rb=Array(new Tx),this.sb=0,this.wa=Array(new cf),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ym),this.L=this.aa=0,this.gd=l([4,2],cf),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function df(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Hw(){var P=new Ww;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,yp||(yp=Dx)),P}function En(P,k,z){return P.a==0&&(P.a=k,P.sc=z,P.cb=0),0}function Ix(P,k,z){return 3<=z&&P[k+0]==157&&P[k+1]==1&&P[k+2]==42}function kx(P,k){if(P==null)return 0;if(P.a=0,P.sc="OK",k==null)return En(P,2,"null VP8Io passed to VP8GetHeaders()");var z=k.data,H=k.w,Y=k.ha;if(4>Y)return En(P,7,"Truncated header.");var ee=z[H+0]|z[H+1]<<8|z[H+2]<<16,ne=P.Od;if(ne.Rb=!(1&ee),ne.td=ee>>1&7,ne.yd=ee>>4&1,ne.ub=ee>>5,3<ne.td)return En(P,3,"Incorrect keyframe parameters.");if(!ne.yd)return En(P,4,"Frame not displayable.");H+=3,Y-=3;var se=P.Kc;if(ne.Rb){if(7>Y)return En(P,7,"cannot parse picture header");if(!Ix(z,H,Y))return En(P,3,"Bad code word");se.c=16383&(z[H+4]<<8|z[H+3]),se.Td=z[H+4]>>6,se.i=16383&(z[H+6]<<8|z[H+5]),se.Ud=z[H+6]>>6,H+=7,Y-=7,P.za=se.c+15>>4,P.Ub=se.i+15>>4,k.width=se.c,k.height=se.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,a((ee=P.Pa).jb,0,255,ee.jb.length),t((ee=P.Qa)!=null),ee.Cb=0,ee.Bb=0,ee.Fb=1,a(ee.Zb,0,0,ee.Zb.length),a(ee.Lb,0,0,ee.Lb)}if(ne.ub>Y)return En(P,7,"bad partition length");$(ee=P.m,z,H,ne.ub),H+=ne.ub,Y-=ne.ub,ne.Rb&&(se.Ld=me(ee),se.Kd=me(ee)),se=P.Qa;var ie,de=P.Pa;if(t(ee!=null),t(se!=null),se.Cb=me(ee),se.Cb){if(se.Bb=me(ee),me(ee)){for(se.Fb=me(ee),ie=0;4>ie;++ie)se.Zb[ie]=me(ee)?R(ee,7):0;for(ie=0;4>ie;++ie)se.Lb[ie]=me(ee)?R(ee,6):0}if(se.Bb)for(ie=0;3>ie;++ie)de.jb[ie]=me(ee)?M(ee,8):255}else se.Bb=0;if(ee.Ka)return En(P,3,"cannot parse segment header");if((se=P.ed).zd=me(ee),se.Tb=M(ee,6),se.wb=M(ee,3),se.Pc=me(ee),se.Pc&&me(ee)){for(de=0;4>de;++de)me(ee)&&(se.vd[de]=R(ee,6));for(de=0;4>de;++de)me(ee)&&(se.od[de]=R(ee,6))}if(P.L=se.Tb==0?0:se.zd?1:2,ee.Ka)return En(P,3,"cannot parse filter header");var Ae=Y;if(Y=ie=H,H=ie+Ae,se=Ae,P.Xb=(1<<M(P.m,2))-1,Ae<3*(de=P.Xb))z=7;else{for(ie+=3*de,se-=3*de,Ae=0;Ae<de;++Ae){var Oe=z[Y+0]|z[Y+1]<<8|z[Y+2]<<16;Oe>se&&(Oe=se),$(P.Jc[+Ae],z,ie,Oe),ie+=Oe,se-=Oe,Y+=3}$(P.Jc[+de],z,ie,se),z=ie<H?0:5}if(z!=0)return En(P,z,"cannot parse partitions");for(z=M(ie=P.m,7),Y=me(ie)?R(ie,4):0,H=me(ie)?R(ie,4):0,se=me(ie)?R(ie,4):0,de=me(ie)?R(ie,4):0,ie=me(ie)?R(ie,4):0,Ae=P.Qa,Oe=0;4>Oe;++Oe){if(Ae.Cb){var Le=Ae.Zb[Oe];Ae.Fb||(Le+=z)}else{if(0<Oe){P.pb[Oe]=P.pb[0];continue}Le=z}var Ie=P.pb[Oe];Ie.Sc[0]=g2[Ta(Le+Y,127)],Ie.Sc[1]=x2[Ta(Le+0,127)],Ie.Eb[0]=2*g2[Ta(Le+H,127)],Ie.Eb[1]=101581*x2[Ta(Le+se,127)]>>16,8>Ie.Eb[1]&&(Ie.Eb[1]=8),Ie.Qc[0]=g2[Ta(Le+de,117)],Ie.Qc[1]=x2[Ta(Le+ie,127)],Ie.lc=Le+ie}if(!ne.Rb)return En(P,4,"Not a key frame.");for(me(ee),ne=P.Pa,z=0;4>z;++z){for(Y=0;8>Y;++Y)for(H=0;3>H;++H)for(se=0;11>se;++se)de=oe(ee,tW[z][Y][H][se])?M(ee,8):Zq[z][Y][H][se],ne.Wc[z][Y].Yb[H][se]=de;for(Y=0;17>Y;++Y)ne.Xc[z][Y]=ne.Wc[z][rW[Y]]}return P.kc=me(ee),P.kc&&(P.Bd=M(ee,8)),P.cb=1}function Dx(P,k,z,H,Y,ee,ne){var se=k[Y].Yb[z];for(z=0;16>Y;++Y){if(!oe(P,se[z+0]))return Y;for(;!oe(P,se[z+1]);)if(se=k[++Y].Yb[0],z=0,Y==16)return 16;var ie=k[Y+1].Yb;if(oe(P,se[z+2])){var de=P,Ae=0;if(oe(de,(Le=se)[(Oe=z)+3]))if(oe(de,Le[Oe+6])){for(se=0,Oe=2*(Ae=oe(de,Le[Oe+8]))+(Le=oe(de,Le[Oe+9+Ae])),Ae=0,Le=Qq[Oe];Le[se];++se)Ae+=Ae+oe(de,Le[se]);Ae+=3+(8<<Oe)}else oe(de,Le[Oe+7])?(Ae=7+2*oe(de,165),Ae+=oe(de,145)):Ae=5+oe(de,159);else Ae=oe(de,Le[Oe+4])?3+oe(de,Le[Oe+5]):2;se=ie[2]}else Ae=1,se=ie[1];ie=ne+Jq[Y],0>(de=P).b&&he(de);var Oe,Le=de.b,Ie=(Oe=de.Ca>>1)-(de.I>>Le)>>31;--de.b,de.Ca+=Ie,de.Ca|=1,de.I-=(Oe+1&Ie)<<Le,ee[ie]=((Ae^Ie)-Ie)*H[(0<Y)+0]}return 16}function Xm(P){var k=P.rb[P.sb-1];k.la=0,k.Na=0,a(P.zc,0,0,P.zc.length),P.ja=0}function Gw(P,k){if(P==null)return 0;if(k==null)return En(P,2,"NULL VP8Io parameter in VP8Decode().");if(!P.cb&&!kx(P,k))return 0;if(t(P.cb),k.ac==null||k.ac(k)){k.ob&&(P.L=0);var z=o0[P.L];if(P.L==2?(P.yb=0,P.zb=0):(P.yb=k.v-z>>4,P.zb=k.j-z>>4,0>P.yb&&(P.yb=0),0>P.zb&&(P.zb=0)),P.Va=k.o+15+z>>4,P.Hb=k.va+15+z>>4,P.Hb>P.za&&(P.Hb=P.za),P.Va>P.Ub&&(P.Va=P.Ub),0<P.L){var H=P.ed;for(z=0;4>z;++z){var Y;if(P.Qa.Cb){var ee=P.Qa.Lb[z];P.Qa.Fb||(ee+=H.Tb)}else ee=H.Tb;for(Y=0;1>=Y;++Y){var ne=P.gd[z][Y],se=ee;if(H.Pc&&(se+=H.vd[0],Y&&(se+=H.od[0])),0<(se=0>se?0:63<se?63:se)){var ie=se;0<H.wb&&(ie=4<H.wb?ie>>2:ie>>1)>9-H.wb&&(ie=9-H.wb),1>ie&&(ie=1),ne.dd=ie,ne.tc=2*se+ie,ne.ld=40<=se?2:15<=se?1:0}else ne.tc=0;ne.La=Y}}}z=0}else En(P,6,"Frame setup failed"),z=P.a;if(z=z==0){if(z){P.$c=0,0<P.Aa||(P.Ic=pW);e:{z=P.Ic,H=4*(ie=P.za);var de=32*ie,Ae=ie+1,Oe=0<P.L?ie*(0<P.Aa?2:1):0,Le=(P.Aa==2?2:1)*ie;if((ne=H+832+(Y=3*(16*z+o0[P.L])/2*de)+(ee=P.Fa!=null&&0<P.Fa.length?P.Kc.c*P.Kc.i:0))!=ne)z=0;else{if(ne>P.Vb){if(P.Vb=0,P.Ec=i(ne),P.Fc=0,P.Ec==null){z=En(P,1,"no memory during frame initialization.");break e}P.Vb=ne}ne=P.Ec,se=P.Fc,P.Ac=ne,P.Bc=se,se+=H,P.Gd=o(de,_x),P.Hd=0,P.rb=o(Ae+1,Tx),P.sb=1,P.wa=Oe?o(Oe,cf):null,P.Y=0,P.D.Nb=0,P.D.wa=P.wa,P.D.Y=P.Y,0<P.Aa&&(P.D.Y+=ie),t(!0),P.oc=ne,P.pc=se,se+=832,P.ya=o(Le,Ym),P.aa=0,P.D.ya=P.ya,P.D.aa=P.aa,P.Aa==2&&(P.D.aa+=ie),P.R=16*ie,P.B=8*ie,ie=(de=o0[P.L])*P.R,de=de/2*P.B,P.sa=ne,P.ta=se+ie,P.qa=P.sa,P.ra=P.ta+16*z*P.R+de,P.Ha=P.qa,P.Ia=P.ra+8*z*P.B+de,P.$c=0,se+=Y,P.mb=ee?ne:null,P.nb=ee?se:null,t(se+ee<=P.Fc+P.Vb),Xm(P),a(P.Ac,P.Bc,0,H),z=1}}if(z){if(k.ka=0,k.y=P.sa,k.O=P.ta,k.f=P.qa,k.N=P.ra,k.ea=P.Ha,k.Vd=P.Ia,k.fa=P.R,k.Rc=P.B,k.F=null,k.J=0,!Jx){for(z=-255;255>=z;++z)Gn[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)pl[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)xp[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)Pf[255+z]=0>z?0:255<z?255:z;Jx=1}Cf=Xw,ml=Kw,pp=Lx,Ks=Yw,ei=Rx,Pn=Ox,Af=rp,Qx=Ld,vp=c2,Fd=np,Md=l2,cc=vf,Bd=sp,Ef=Wx,zd=qx,dc=Co,gp=ul,ti=o2,Fi[0]=So,Fi[1]=Qw,Fi[2]=t2,Fi[3]=r2,Fi[4]=Mx,Fi[5]=mf,Fi[6]=Bx,Fi[7]=Zm,Fi[8]=s2,Fi[9]=n2,uc[0]=$x,uc[1]=Zw,uc[2]=dl,uc[3]=ff,uc[4]=_s,uc[5]=e2,uc[6]=Fx,vl[0]=sc,vl[1]=Jw,vl[2]=a2,vl[3]=ep,vl[4]=Od,vl[5]=i2,vl[6]=tp,z=1}else z=0}z&&(z=function(Ie,Xe){for(Ie.M=0;Ie.M<Ie.Va;++Ie.M){var Be,Ee=Ie.Jc[Ie.M&Ie.Xb],Te=Ie.m,Ke=Ie;for(Be=0;Be<Ke.za;++Be){var Je=Te,Ye=Ke,pt=Ye.Ac,ut=Ye.Bc+4*Be,Dt=Ye.zc,ht=Ye.ya[Ye.aa+Be];if(Ye.Qa.Bb?ht.$b=oe(Je,Ye.Pa.jb[0])?2+oe(Je,Ye.Pa.jb[2]):oe(Je,Ye.Pa.jb[1]):ht.$b=0,Ye.kc&&(ht.Ad=oe(Je,Ye.Bd)),ht.Za=!oe(Je,145)+0,ht.Za){var Nr=ht.Ob,Ar=0;for(Ye=0;4>Ye;++Ye){var mr,ir=Dt[0+Ye];for(mr=0;4>mr;++mr){ir=eW[pt[ut+mr]][ir];for(var $r=_3[oe(Je,ir[0])];0<$r;)$r=_3[2*$r+oe(Je,ir[$r])];ir=-$r,pt[ut+mr]=ir}s(Nr,Ar,pt,ut,4),Ar+=4,Dt[0+Ye]=ir}}else ir=oe(Je,156)?oe(Je,128)?1:3:oe(Je,163)?2:0,ht.Ob[0]=ir,a(pt,ut,ir,4),a(Dt,0,ir,4);ht.Dd=oe(Je,142)?oe(Je,114)?oe(Je,183)?1:3:2:0}if(Ke.m.Ka)return En(Ie,7,"Premature end-of-partition0 encountered.");for(;Ie.ja<Ie.za;++Ie.ja){if(Ke=Ee,Je=(Te=Ie).rb[Te.sb-1],pt=Te.rb[Te.sb+Te.ja],Be=Te.ya[Te.aa+Te.ja],ut=Te.kc?Be.Ad:0)Je.la=pt.la=0,Be.Za||(Je.Na=pt.Na=0),Be.Hc=0,Be.Gc=0,Be.ia=0;else{var Dr,Qt;if(Je=pt,pt=Ke,ut=Te.Pa.Xc,Dt=Te.ya[Te.aa+Te.ja],ht=Te.pb[Dt.$b],Ye=Dt.ad,Nr=0,Ar=Te.rb[Te.sb-1],ir=mr=0,a(Ye,Nr,0,384),Dt.Za)var Fn=0,da=ut[3];else{$r=i(16);var Mn=Je.Na+Ar.Na;if(Mn=yp(pt,ut[1],Mn,ht.Eb,0,$r,0),Je.Na=Ar.Na=(0<Mn)+0,1<Mn)Cf($r,0,Ye,Nr);else{var ua=$r[0]+3>>3;for($r=0;256>$r;$r+=16)Ye[Nr+$r]=ua}Fn=1,da=ut[0]}var Er=15&Je.la,Ia=15&Ar.la;for($r=0;4>$r;++$r){var ka=1&Ia;for(ua=Qt=0;4>ua;++ua)Er=Er>>1|(ka=(Mn=yp(pt,da,Mn=ka+(1&Er),ht.Sc,Fn,Ye,Nr))>Fn)<<7,Qt=Qt<<2|(3<Mn?3:1<Mn?2:Ye[Nr+0]!=0),Nr+=16;Er>>=4,Ia=Ia>>1|ka<<7,mr=(mr<<8|Qt)>>>0}for(da=Er,Fn=Ia>>4,Dr=0;4>Dr;Dr+=2){for(Qt=0,Er=Je.la>>4+Dr,Ia=Ar.la>>4+Dr,$r=0;2>$r;++$r){for(ka=1&Ia,ua=0;2>ua;++ua)Mn=ka+(1&Er),Er=Er>>1|(ka=0<(Mn=yp(pt,ut[2],Mn,ht.Qc,0,Ye,Nr)))<<3,Qt=Qt<<2|(3<Mn?3:1<Mn?2:Ye[Nr+0]!=0),Nr+=16;Er>>=2,Ia=Ia>>1|ka<<5}ir|=Qt<<4*Dr,da|=Er<<4<<Dr,Fn|=(240&Ia)<<Dr}Je.la=da,Ar.la=Fn,Dt.Hc=mr,Dt.Gc=ir,Dt.ia=43690&ir?0:ht.ia,ut=!(mr|ir)}if(0<Te.L&&(Te.wa[Te.Y+Te.ja]=Te.gd[Be.$b][Be.Za],Te.wa[Te.Y+Te.ja].La|=!ut),Ke.Ka)return En(Ie,7,"Premature end-of-file encountered.")}if(Xm(Ie),Te=Xe,Ke=1,Be=(Ee=Ie).D,Je=0<Ee.L&&Ee.M>=Ee.zb&&Ee.M<=Ee.Va,Ee.Aa==0)e:{if(Be.M=Ee.M,Be.uc=Je,dp(Ee,Be),Ke=1,Be=(Qt=Ee.D).Nb,Je=(ir=o0[Ee.L])*Ee.R,pt=ir/2*Ee.B,$r=16*Be*Ee.R,ua=8*Be*Ee.B,ut=Ee.sa,Dt=Ee.ta-Je+$r,ht=Ee.qa,Ye=Ee.ra-pt+ua,Nr=Ee.Ha,Ar=Ee.Ia-pt+ua,Ia=(Er=Qt.M)==0,mr=Er>=Ee.Va-1,Ee.Aa==2&&dp(Ee,Qt),Qt.uc)for(ka=(Mn=Ee).D.M,t(Mn.D.uc),Qt=Mn.yb;Qt<Mn.Hb;++Qt){Fn=Qt,da=ka;var ss=(xs=(jn=Mn).D).Nb;Dr=jn.R;var xs=xs.wa[xs.Y+Fn],Ys=jn.sa,ai=jn.ta+16*ss*Dr+16*Fn,Eo=xs.dd,as=xs.tc;if(as!=0)if(t(3<=as),jn.L==1)0<Fn&&dc(Ys,ai,Dr,as+4),xs.La&&ti(Ys,ai,Dr,as),0<da&&zd(Ys,ai,Dr,as+4),xs.La&&gp(Ys,ai,Dr,as);else{var gl=jn.B,Ud=jn.qa,Tf=jn.ra+8*ss*gl+8*Fn,hc=jn.Ha,jn=jn.Ia+8*ss*gl+8*Fn;ss=xs.ld,0<Fn&&(Qx(Ys,ai,Dr,as+4,Eo,ss),Fd(Ud,Tf,hc,jn,gl,as+4,Eo,ss)),xs.La&&(cc(Ys,ai,Dr,as,Eo,ss),Ef(Ud,Tf,hc,jn,gl,as,Eo,ss)),0<da&&(Af(Ys,ai,Dr,as+4,Eo,ss),vp(Ud,Tf,hc,jn,gl,as+4,Eo,ss)),xs.La&&(Md(Ys,ai,Dr,as,Eo,ss),Bd(Ud,Tf,hc,jn,gl,as,Eo,ss))}}if(Ee.ia&&alert("todo:DitherRow"),Te.put!=null){if(Qt=16*Er,Er=16*(Er+1),Ia?(Te.y=Ee.sa,Te.O=Ee.ta+$r,Te.f=Ee.qa,Te.N=Ee.ra+ua,Te.ea=Ee.Ha,Te.W=Ee.Ia+ua):(Qt-=ir,Te.y=ut,Te.O=Dt,Te.f=ht,Te.N=Ye,Te.ea=Nr,Te.W=Ar),mr||(Er-=ir),Er>Te.o&&(Er=Te.o),Te.F=null,Te.J=null,Ee.Fa!=null&&0<Ee.Fa.length&&Qt<Er&&(Te.J=lp(Ee,Te,Qt,Er-Qt),Te.F=Ee.mb,Te.F==null&&Te.F.length==0)){Ke=En(Ee,3,"Could not decode alpha data.");break e}Qt<Te.j&&(ir=Te.j-Qt,Qt=Te.j,t(!(1&ir)),Te.O+=Ee.R*ir,Te.N+=Ee.B*(ir>>1),Te.W+=Ee.B*(ir>>1),Te.F!=null&&(Te.J+=Te.width*ir)),Qt<Er&&(Te.O+=Te.v,Te.N+=Te.v>>1,Te.W+=Te.v>>1,Te.F!=null&&(Te.J+=Te.v),Te.ka=Qt-Te.j,Te.U=Te.va-Te.v,Te.T=Er-Qt,Ke=Te.put(Te))}Be+1!=Ee.Ic||mr||(s(Ee.sa,Ee.ta-Je,ut,Dt+16*Ee.R,Je),s(Ee.qa,Ee.ra-pt,ht,Ye+8*Ee.B,pt),s(Ee.Ha,Ee.Ia-pt,Nr,Ar+8*Ee.B,pt))}if(!Ke)return En(Ie,6,"Output aborted.")}return 1}(P,k)),k.bc!=null&&k.bc(k),z&=1}return z?(P.cb=0,z):0}function Li(P,k,z,H,Y){Y=P[k+z+32*H]+(Y>>3),P[k+z+32*H]=-256&Y?0>Y?0:255:Y}function uf(P,k,z,H,Y,ee){Li(P,k,0,z,H+Y),Li(P,k,1,z,H+ee),Li(P,k,2,z,H-ee),Li(P,k,3,z,H-Y)}function oa(P){return(20091*P>>16)+P}function Qm(P,k,z,H){var Y,ee=0,ne=i(16);for(Y=0;4>Y;++Y){var se=P[k+0]+P[k+8],ie=P[k+0]-P[k+8],de=(35468*P[k+4]>>16)-oa(P[k+12]),Ae=oa(P[k+4])+(35468*P[k+12]>>16);ne[ee+0]=se+Ae,ne[ee+1]=ie+de,ne[ee+2]=ie-de,ne[ee+3]=se-Ae,ee+=4,k++}for(Y=ee=0;4>Y;++Y)se=(P=ne[ee+0]+4)+ne[ee+8],ie=P-ne[ee+8],de=(35468*ne[ee+4]>>16)-oa(ne[ee+12]),Li(z,H,0,0,se+(Ae=oa(ne[ee+4])+(35468*ne[ee+12]>>16))),Li(z,H,1,0,ie+de),Li(z,H,2,0,ie-de),Li(z,H,3,0,se-Ae),ee++,H+=32}function Ox(P,k,z,H){var Y=P[k+0]+4,ee=35468*P[k+4]>>16,ne=oa(P[k+4]),se=35468*P[k+1]>>16;uf(z,H,0,Y+ne,P=oa(P[k+1]),se),uf(z,H,1,Y+ee,P,se),uf(z,H,2,Y-ee,P,se),uf(z,H,3,Y-ne,P,se)}function Kw(P,k,z,H,Y){Qm(P,k,z,H),Y&&Qm(P,k+16,z,H+4)}function Lx(P,k,z,H){ml(P,k+0,z,H,1),ml(P,k+32,z,H+128,1)}function Yw(P,k,z,H){var Y;for(P=P[k+0]+4,Y=0;4>Y;++Y)for(k=0;4>k;++k)Li(z,H,k,Y,P)}function Rx(P,k,z,H){P[k+0]&&Ks(P,k+0,z,H),P[k+16]&&Ks(P,k+16,z,H+4),P[k+32]&&Ks(P,k+32,z,H+128),P[k+48]&&Ks(P,k+48,z,H+128+4)}function Xw(P,k,z,H){var Y,ee=i(16);for(Y=0;4>Y;++Y){var ne=P[k+0+Y]+P[k+12+Y],se=P[k+4+Y]+P[k+8+Y],ie=P[k+4+Y]-P[k+8+Y],de=P[k+0+Y]-P[k+12+Y];ee[0+Y]=ne+se,ee[8+Y]=ne-se,ee[4+Y]=de+ie,ee[12+Y]=de-ie}for(Y=0;4>Y;++Y)ne=(P=ee[0+4*Y]+3)+ee[3+4*Y],se=ee[1+4*Y]+ee[2+4*Y],ie=ee[1+4*Y]-ee[2+4*Y],de=P-ee[3+4*Y],z[H+0]=ne+se>>3,z[H+16]=de+ie>>3,z[H+32]=ne-se>>3,z[H+48]=de-ie>>3,H+=64}function Jm(P,k,z){var H,Y=k-32,ee=_a,ne=255-P[Y-1];for(H=0;H<z;++H){var se,ie=ee,de=ne+P[k-1];for(se=0;se<z;++se)P[k+se]=ie[de+P[Y+se]];k+=32}}function Qw(P,k){Jm(P,k,4)}function Jw(P,k){Jm(P,k,8)}function Zw(P,k){Jm(P,k,16)}function dl(P,k){var z;for(z=0;16>z;++z)s(P,k+32*z,P,k-32,16)}function ff(P,k){var z;for(z=16;0<z;--z)a(P,k,P[k-1],16),k+=32}function hf(P,k,z){var H;for(H=0;16>H;++H)a(k,z+32*H,P,16)}function $x(P,k){var z,H=16;for(z=0;16>z;++z)H+=P[k-1+32*z]+P[k+z-32];hf(H>>5,P,k)}function _s(P,k){var z,H=8;for(z=0;16>z;++z)H+=P[k-1+32*z];hf(H>>4,P,k)}function e2(P,k){var z,H=8;for(z=0;16>z;++z)H+=P[k+z-32];hf(H>>4,P,k)}function Fx(P,k){hf(128,P,k)}function qt(P,k,z){return P+2*k+z+2>>2}function t2(P,k){var z,H=k-32;for(H=new Uint8Array([qt(P[H-1],P[H+0],P[H+1]),qt(P[H+0],P[H+1],P[H+2]),qt(P[H+1],P[H+2],P[H+3]),qt(P[H+2],P[H+3],P[H+4])]),z=0;4>z;++z)s(P,k+32*z,H,0,H.length)}function r2(P,k){var z=P[k-1],H=P[k-1+32],Y=P[k-1+64],ee=P[k-1+96];we(P,k+0,16843009*qt(P[k-1-32],z,H)),we(P,k+32,16843009*qt(z,H,Y)),we(P,k+64,16843009*qt(H,Y,ee)),we(P,k+96,16843009*qt(Y,ee,ee))}function So(P,k){var z,H=4;for(z=0;4>z;++z)H+=P[k+z-32]+P[k-1+32*z];for(H>>=3,z=0;4>z;++z)a(P,k+32*z,H,4)}function Mx(P,k){var z=P[k-1+0],H=P[k-1+32],Y=P[k-1+64],ee=P[k-1-32],ne=P[k+0-32],se=P[k+1-32],ie=P[k+2-32],de=P[k+3-32];P[k+0+96]=qt(H,Y,P[k-1+96]),P[k+1+96]=P[k+0+64]=qt(z,H,Y),P[k+2+96]=P[k+1+64]=P[k+0+32]=qt(ee,z,H),P[k+3+96]=P[k+2+64]=P[k+1+32]=P[k+0+0]=qt(ne,ee,z),P[k+3+64]=P[k+2+32]=P[k+1+0]=qt(se,ne,ee),P[k+3+32]=P[k+2+0]=qt(ie,se,ne),P[k+3+0]=qt(de,ie,se)}function Bx(P,k){var z=P[k+1-32],H=P[k+2-32],Y=P[k+3-32],ee=P[k+4-32],ne=P[k+5-32],se=P[k+6-32],ie=P[k+7-32];P[k+0+0]=qt(P[k+0-32],z,H),P[k+1+0]=P[k+0+32]=qt(z,H,Y),P[k+2+0]=P[k+1+32]=P[k+0+64]=qt(H,Y,ee),P[k+3+0]=P[k+2+32]=P[k+1+64]=P[k+0+96]=qt(Y,ee,ne),P[k+3+32]=P[k+2+64]=P[k+1+96]=qt(ee,ne,se),P[k+3+64]=P[k+2+96]=qt(ne,se,ie),P[k+3+96]=qt(se,ie,ie)}function mf(P,k){var z=P[k-1+0],H=P[k-1+32],Y=P[k-1+64],ee=P[k-1-32],ne=P[k+0-32],se=P[k+1-32],ie=P[k+2-32],de=P[k+3-32];P[k+0+0]=P[k+1+64]=ee+ne+1>>1,P[k+1+0]=P[k+2+64]=ne+se+1>>1,P[k+2+0]=P[k+3+64]=se+ie+1>>1,P[k+3+0]=ie+de+1>>1,P[k+0+96]=qt(Y,H,z),P[k+0+64]=qt(H,z,ee),P[k+0+32]=P[k+1+96]=qt(z,ee,ne),P[k+1+32]=P[k+2+96]=qt(ee,ne,se),P[k+2+32]=P[k+3+96]=qt(ne,se,ie),P[k+3+32]=qt(se,ie,de)}function Zm(P,k){var z=P[k+0-32],H=P[k+1-32],Y=P[k+2-32],ee=P[k+3-32],ne=P[k+4-32],se=P[k+5-32],ie=P[k+6-32],de=P[k+7-32];P[k+0+0]=z+H+1>>1,P[k+1+0]=P[k+0+64]=H+Y+1>>1,P[k+2+0]=P[k+1+64]=Y+ee+1>>1,P[k+3+0]=P[k+2+64]=ee+ne+1>>1,P[k+0+32]=qt(z,H,Y),P[k+1+32]=P[k+0+96]=qt(H,Y,ee),P[k+2+32]=P[k+1+96]=qt(Y,ee,ne),P[k+3+32]=P[k+2+96]=qt(ee,ne,se),P[k+3+64]=qt(ne,se,ie),P[k+3+96]=qt(se,ie,de)}function n2(P,k){var z=P[k-1+0],H=P[k-1+32],Y=P[k-1+64],ee=P[k-1+96];P[k+0+0]=z+H+1>>1,P[k+2+0]=P[k+0+32]=H+Y+1>>1,P[k+2+32]=P[k+0+64]=Y+ee+1>>1,P[k+1+0]=qt(z,H,Y),P[k+3+0]=P[k+1+32]=qt(H,Y,ee),P[k+3+32]=P[k+1+64]=qt(Y,ee,ee),P[k+3+64]=P[k+2+64]=P[k+0+96]=P[k+1+96]=P[k+2+96]=P[k+3+96]=ee}function s2(P,k){var z=P[k-1+0],H=P[k-1+32],Y=P[k-1+64],ee=P[k-1+96],ne=P[k-1-32],se=P[k+0-32],ie=P[k+1-32],de=P[k+2-32];P[k+0+0]=P[k+2+32]=z+ne+1>>1,P[k+0+32]=P[k+2+64]=H+z+1>>1,P[k+0+64]=P[k+2+96]=Y+H+1>>1,P[k+0+96]=ee+Y+1>>1,P[k+3+0]=qt(se,ie,de),P[k+2+0]=qt(ne,se,ie),P[k+1+0]=P[k+3+32]=qt(z,ne,se),P[k+1+32]=P[k+3+64]=qt(H,z,ne),P[k+1+64]=P[k+3+96]=qt(Y,H,z),P[k+1+96]=qt(ee,Y,H)}function a2(P,k){var z;for(z=0;8>z;++z)s(P,k+32*z,P,k-32,8)}function ep(P,k){var z;for(z=0;8>z;++z)a(P,k,P[k-1],8),k+=32}function Dd(P,k,z){var H;for(H=0;8>H;++H)a(k,z+32*H,P,8)}function sc(P,k){var z,H=8;for(z=0;8>z;++z)H+=P[k+z-32]+P[k-1+32*z];Dd(H>>4,P,k)}function i2(P,k){var z,H=4;for(z=0;8>z;++z)H+=P[k+z-32];Dd(H>>3,P,k)}function Od(P,k){var z,H=4;for(z=0;8>z;++z)H+=P[k-1+32*z];Dd(H>>3,P,k)}function tp(P,k){Dd(128,P,k)}function pf(P,k,z){var H=P[k-z],Y=P[k+0],ee=3*(Y-H)+f2[1020+P[k-2*z]-P[k+z]],ne=Zx[112+(ee+4>>3)];P[k-z]=_a[255+H+Zx[112+(ee+3>>3)]],P[k+0]=_a[255+Y-ne]}function zx(P,k,z,H){var Y=P[k+0],ee=P[k+z];return ni[255+P[k-2*z]-P[k-z]]>H||ni[255+ee-Y]>H}function Ux(P,k,z,H){return 4*ni[255+P[k-z]-P[k+0]]+ni[255+P[k-2*z]-P[k+z]]<=H}function Vx(P,k,z,H,Y){var ee=P[k-3*z],ne=P[k-2*z],se=P[k-z],ie=P[k+0],de=P[k+z],Ae=P[k+2*z],Oe=P[k+3*z];return 4*ni[255+se-ie]+ni[255+ne-de]>H?0:ni[255+P[k-4*z]-ee]<=Y&&ni[255+ee-ne]<=Y&&ni[255+ne-se]<=Y&&ni[255+Oe-Ae]<=Y&&ni[255+Ae-de]<=Y&&ni[255+de-ie]<=Y}function qx(P,k,z,H){var Y=2*H+1;for(H=0;16>H;++H)Ux(P,k+H,z,Y)&&pf(P,k+H,z)}function Co(P,k,z,H){var Y=2*H+1;for(H=0;16>H;++H)Ux(P,k+H*z,1,Y)&&pf(P,k+H*z,1)}function ul(P,k,z,H){var Y;for(Y=3;0<Y;--Y)qx(P,k+=4*z,z,H)}function o2(P,k,z,H){var Y;for(Y=3;0<Y;--Y)Co(P,k+=4,z,H)}function ac(P,k,z,H,Y,ee,ne,se){for(ee=2*ee+1;0<Y--;){if(Vx(P,k,z,ee,ne))if(zx(P,k,z,se))pf(P,k,z);else{var ie=P,de=k,Ae=z,Oe=ie[de-2*Ae],Le=ie[de-Ae],Ie=ie[de+0],Xe=ie[de+Ae],Be=ie[de+2*Ae],Ee=27*(Ke=f2[1020+3*(Ie-Le)+f2[1020+Oe-Xe]])+63>>7,Te=18*Ke+63>>7,Ke=9*Ke+63>>7;ie[de-3*Ae]=_a[255+ie[de-3*Ae]+Ke],ie[de-2*Ae]=_a[255+Oe+Te],ie[de-Ae]=_a[255+Le+Ee],ie[de+0]=_a[255+Ie-Ee],ie[de+Ae]=_a[255+Xe-Te],ie[de+2*Ae]=_a[255+Be-Ke]}k+=H}}function Ri(P,k,z,H,Y,ee,ne,se){for(ee=2*ee+1;0<Y--;){if(Vx(P,k,z,ee,ne))if(zx(P,k,z,se))pf(P,k,z);else{var ie=P,de=k,Ae=z,Oe=ie[de-Ae],Le=ie[de+0],Ie=ie[de+Ae],Xe=Zx[112+((Be=3*(Le-Oe))+4>>3)],Be=Zx[112+(Be+3>>3)],Ee=Xe+1>>1;ie[de-2*Ae]=_a[255+ie[de-2*Ae]+Ee],ie[de-Ae]=_a[255+Oe+Be],ie[de+0]=_a[255+Le-Xe],ie[de+Ae]=_a[255+Ie-Ee]}k+=H}}function rp(P,k,z,H,Y,ee){ac(P,k,z,1,16,H,Y,ee)}function Ld(P,k,z,H,Y,ee){ac(P,k,1,z,16,H,Y,ee)}function l2(P,k,z,H,Y,ee){var ne;for(ne=3;0<ne;--ne)Ri(P,k+=4*z,z,1,16,H,Y,ee)}function vf(P,k,z,H,Y,ee){var ne;for(ne=3;0<ne;--ne)Ri(P,k+=4,1,z,16,H,Y,ee)}function c2(P,k,z,H,Y,ee,ne,se){ac(P,k,Y,1,8,ee,ne,se),ac(z,H,Y,1,8,ee,ne,se)}function np(P,k,z,H,Y,ee,ne,se){ac(P,k,1,Y,8,ee,ne,se),ac(z,H,1,Y,8,ee,ne,se)}function sp(P,k,z,H,Y,ee,ne,se){Ri(P,k+4*Y,Y,1,8,ee,ne,se),Ri(z,H+4*Y,Y,1,8,ee,ne,se)}function Wx(P,k,z,H,Y,ee,ne,se){Ri(P,k+4,1,Y,8,ee,ne,se),Ri(z,H+4,1,Y,8,ee,ne,se)}function gf(){this.ba=new _i,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ap(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ip(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hx(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new D,this.yc=new A}function d2(){this.xb=this.a=0,this.l=new df,this.ca=new _i,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hx,this.ab=0,this.gc=o(4,ip),this.Oc=0}function xf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new df,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Rd(P,k,z,H,Y,ee,ne){for(P=P==null?0:P[k+0],k=0;k<ne;++k)Y[ee+k]=P+z[H+k]&255,P=Y[ee+k]}function op(P,k,z,H,Y,ee,ne){var se;if(P==null)Rd(null,null,z,H,Y,ee,ne);else for(se=0;se<ne;++se)Y[ee+se]=P[k+se]+z[H+se]&255}function ic(P,k,z,H,Y,ee,ne){if(P==null)Rd(null,null,z,H,Y,ee,ne);else{var se,ie=P[k+0],de=ie,Ae=ie;for(se=0;se<ne;++se)de=Ae+(ie=P[k+se])-de,Ae=z[H+se]+(-256&de?0>de?0:255:de)&255,de=ie,Y[ee+se]=Ae}}function lp(P,k,z,H){var Y=k.width,ee=k.o;if(t(P!=null&&k!=null),0>z||0>=H||z+H>ee)return null;if(!P.Cc){if(P.ga==null){var ne;if(P.ga=new xf,(ne=P.ga==null)||(ne=k.width*k.o,t(P.Gb.length==0),P.Gb=i(ne),P.Uc=0,P.Gb==null?ne=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,ne=1),ne=!ne),!ne){ne=P.ga;var se=P.Fa,ie=P.P,de=P.qc,Ae=P.mb,Oe=P.nb,Le=ie+1,Ie=de-1,Xe=ne.l;if(t(se!=null&&Ae!=null&&k!=null),fc[0]=null,fc[1]=Rd,fc[2]=op,fc[3]=ic,ne.ca=Ae,ne.tb=Oe,ne.c=k.width,ne.i=k.height,t(0<ne.c&&0<ne.i),1>=de)k=0;else if(ne.$a=se[ie+0]>>0&3,ne.Z=se[ie+0]>>2&3,ne.Lc=se[ie+0]>>4&3,ie=se[ie+0]>>6&3,0>ne.$a||1<ne.$a||4<=ne.Z||1<ne.Lc||ie)k=0;else if(Xe.put=yo,Xe.ac=vs,Xe.bc=bo,Xe.ma=ne,Xe.width=k.width,Xe.height=k.height,Xe.Da=k.Da,Xe.v=k.v,Xe.va=k.va,Xe.j=k.j,Xe.o=k.o,ne.$a)e:{t(ne.$a==1),k=Ja();t:for(;;){if(k==null){k=0;break e}if(t(ne!=null),ne.mc=k,k.c=ne.c,k.i=ne.i,k.l=ne.l,k.l.ma=ne,k.l.width=ne.c,k.l.height=ne.i,k.a=0,B(k.m,se,Le,Ie),!No(ne.c,ne.i,1,k,null)||(k.ab==1&&k.gc[0].hc==3&&cl(k.s)?(ne.ic=1,se=k.c*k.i,k.Ta=null,k.Ua=0,k.V=i(se),k.Ba=0,k.V==null?(k.a=1,k=0):k=1):(ne.ic=0,k=kd(k,ne.c)),!k))break t;k=1;break e}ne.mc=null,k=0}else k=Ie>=ne.c*ne.i;ne=!k}if(ne)return null;P.ga.Lc!=1?P.Ga=0:H=ee-z}t(P.ga!=null),t(z+H<=ee);e:{if(k=(se=P.ga).c,ee=se.l.o,se.$a==0){if(Le=P.rc,Ie=P.Vc,Xe=P.Fa,ie=P.P+1+z*k,de=P.mb,Ae=P.nb+z*k,t(ie<=P.P+P.qc),se.Z!=0)for(t(fc[se.Z]!=null),ne=0;ne<H;++ne)fc[se.Z](Le,Ie,Xe,ie,de,Ae,k),Le=de,Ie=Ae,Ae+=k,ie+=k;else for(ne=0;ne<H;++ne)s(de,Ae,Xe,ie,k),Le=de,Ie=Ae,Ae+=k,ie+=k;P.rc=Le,P.Vc=Ie}else{if(t(se.mc!=null),k=z+H,t((ne=se.mc)!=null),t(k<=ne.i),ne.C>=k)k=1;else if(se.ic||ke(),se.ic){se=ne.V,Le=ne.Ba,Ie=ne.c;var Be=ne.i,Ee=(Xe=1,ie=ne.$/Ie,de=ne.$%Ie,Ae=ne.m,Oe=ne.s,ne.$),Te=Ie*Be,Ke=Ie*k,Je=Oe.wc,Ye=Ee<Ke?Rn(Oe,de,ie):null;t(Ee<=Te),t(k<=Be),t(cl(Oe));t:for(;;){for(;!Ae.h&&Ee<Ke;){if(de&Je||(Ye=Rn(Oe,de,ie)),t(Ye!=null),te(Ae),256>(Be=ia(Ye.G[0],Ye.H[0],Ae)))se[Le+Ee]=Be,++Ee,++de>=Ie&&(de=0,++ie<=k&&!(ie%16)&&Di(ne,ie));else{if(!(280>Be)){Xe=0;break t}Be=Ii(Be-256,Ae);var pt,ut=ia(Ye.G[4],Ye.H[4],Ae);if(te(Ae),!(Ee>=(ut=jo(Ie,ut=Ii(ut,Ae)))&&Te-Ee>=Be)){Xe=0;break t}for(pt=0;pt<Be;++pt)se[Le+Ee+pt]=se[Le+Ee+pt-ut];for(Ee+=Be,de+=Be;de>=Ie;)de-=Ie,++ie<=k&&!(ie%16)&&Di(ne,ie);Ee<Ke&&de&Je&&(Ye=Rn(Oe,de,ie))}t(Ae.h==G(Ae))}Di(ne,ie>k?k:ie);break t}!Xe||Ae.h&&Ee<Te?(Xe=0,ne.a=Ae.h?5:3):ne.$=Ee,k=Xe}else k=Oi(ne,ne.V,ne.Ba,ne.c,ne.i,k,sf);if(!k){H=0;break e}}z+H>=ee&&(P.Cc=1),H=1}if(!H)return null;if(P.Cc&&((H=P.ga)!=null&&(H.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+z*Y}function F(P,k,z,H,Y,ee){for(;0<Y--;){var ne,se=P,ie=k+(z?1:0),de=P,Ae=k+(z?0:3);for(ne=0;ne<H;++ne){var Oe=de[Ae+4*ne];Oe!=255&&(Oe*=32897,se[ie+4*ne+0]=se[ie+4*ne+0]*Oe>>23,se[ie+4*ne+1]=se[ie+4*ne+1]*Oe>>23,se[ie+4*ne+2]=se[ie+4*ne+2]*Oe>>23)}k+=ee}}function Q(P,k,z,H,Y){for(;0<H--;){var ee;for(ee=0;ee<z;++ee){var ne=P[k+2*ee+0],se=15&(de=P[k+2*ee+1]),ie=4369*se,de=(240&de|de>>4)*ie>>16;P[k+2*ee+0]=(240&ne|ne>>4)*ie>>16&240|(15&ne|ne<<4)*ie>>16>>4&15,P[k+2*ee+1]=240&de|se}k+=Y}}function pe(P,k,z,H,Y,ee,ne,se){var ie,de,Ae=255;for(de=0;de<Y;++de){for(ie=0;ie<H;++ie){var Oe=P[k+ie];ee[ne+4*ie]=Oe,Ae&=Oe}k+=z,ne+=se}return Ae!=255}function Se(P,k,z,H,Y){var ee;for(ee=0;ee<Y;++ee)z[H+ee]=P[k+ee]>>8}function ke(){ri=F,Vr=Q,qr=pe,Tn=Se}function We(P,k,z){N[P]=function(H,Y,ee,ne,se,ie,de,Ae,Oe,Le,Ie,Xe,Be,Ee,Te,Ke,Je){var Ye,pt=Je-1>>1,ut=se[ie+0]|de[Ae+0]<<16,Dt=Oe[Le+0]|Ie[Xe+0]<<16;t(H!=null);var ht=3*ut+Dt+131074>>2;for(k(H[Y+0],255&ht,ht>>16,Be,Ee),ee!=null&&(ht=3*Dt+ut+131074>>2,k(ee[ne+0],255&ht,ht>>16,Te,Ke)),Ye=1;Ye<=pt;++Ye){var Nr=se[ie+Ye]|de[Ae+Ye]<<16,Ar=Oe[Le+Ye]|Ie[Xe+Ye]<<16,mr=ut+Nr+Dt+Ar+524296,ir=mr+2*(Nr+Dt)>>3;ht=ir+ut>>1,ut=(mr=mr+2*(ut+Ar)>>3)+Nr>>1,k(H[Y+2*Ye-1],255&ht,ht>>16,Be,Ee+(2*Ye-1)*z),k(H[Y+2*Ye-0],255&ut,ut>>16,Be,Ee+(2*Ye-0)*z),ee!=null&&(ht=mr+Dt>>1,ut=ir+Ar>>1,k(ee[ne+2*Ye-1],255&ht,ht>>16,Te,Ke+(2*Ye-1)*z),k(ee[ne+2*Ye+0],255&ut,ut>>16,Te,Ke+(2*Ye+0)*z)),ut=Nr,Dt=Ar}1&Je||(ht=3*ut+Dt+131074>>2,k(H[Y+Je-1],255&ht,ht>>16,Be,Ee+(Je-1)*z),ee!=null&&(ht=3*Dt+ut+131074>>2,k(ee[ne+Je-1],255&ht,ht>>16,Te,Ke+(Je-1)*z)))}}function tt(){si[e0]=sW,si[t0]=k3,si[E3]=aW,si[r0]=D3,si[n0]=O3,si[h2]=L3,si[P3]=iW,si[m2]=k3,si[p2]=D3,si[s0]=O3,si[v2]=L3}function mt(P){return P&~oW?0>P?0:255:P>>R3}function Pt(P,k){return mt((19077*P>>8)+(26149*k>>8)-14234)}function Kt(P,k,z){return mt((19077*P>>8)-(6419*k>>8)-(13320*z>>8)+8708)}function Ht(P,k){return mt((19077*P>>8)+(33050*k>>8)-17685)}function ur(P,k,z,H,Y){H[Y+0]=Pt(P,z),H[Y+1]=Kt(P,k,z),H[Y+2]=Ht(P,k)}function un(P,k,z,H,Y){H[Y+0]=Ht(P,k),H[Y+1]=Kt(P,k,z),H[Y+2]=Pt(P,z)}function bn(P,k,z,H,Y){var ee=Kt(P,k,z);k=ee<<3&224|Ht(P,k)>>3,H[Y+0]=248&Pt(P,z)|ee>>5,H[Y+1]=k}function $n(P,k,z,H,Y){var ee=240&Ht(P,k)|15;H[Y+0]=240&Pt(P,z)|Kt(P,k,z)>>4,H[Y+1]=ee}function Is(P,k,z,H,Y){H[Y+0]=255,ur(P,k,z,H,Y+1)}function ns(P,k,z,H,Y){un(P,k,z,H,Y),H[Y+3]=255}function $i(P,k,z,H,Y){ur(P,k,z,H,Y),H[Y+3]=255}function Ta(P,k){return 0>P?0:P>k?k:P}function Ao(P,k,z){N[P]=function(H,Y,ee,ne,se,ie,de,Ae,Oe){for(var Le=Ae+(-2&Oe)*z;Ae!=Le;)k(H[Y+0],ee[ne+0],se[ie+0],de,Ae),k(H[Y+1],ee[ne+0],se[ie+0],de,Ae+z),Y+=2,++ne,++ie,Ae+=2*z;1&Oe&&k(H[Y+0],ee[ne+0],se[ie+0],de,Ae)}}function Gx(P,k,z){return z==0?P==0?k==0?6:5:k==0?4:0:z}function cp(P,k,z,H,Y){switch(P>>>30){case 3:ml(k,z,H,Y,0);break;case 2:Pn(k,z,H,Y);break;case 1:Ks(k,z,H,Y)}}function dp(P,k){var z,H,Y=k.M,ee=k.Nb,ne=P.oc,se=P.pc+40,ie=P.oc,de=P.pc+584,Ae=P.oc,Oe=P.pc+600;for(z=0;16>z;++z)ne[se+32*z-1]=129;for(z=0;8>z;++z)ie[de+32*z-1]=129,Ae[Oe+32*z-1]=129;for(0<Y?ne[se-1-32]=ie[de-1-32]=Ae[Oe-1-32]=129:(a(ne,se-32-1,127,21),a(ie,de-32-1,127,9),a(Ae,Oe-32-1,127,9)),H=0;H<P.za;++H){var Le=k.ya[k.aa+H];if(0<H){for(z=-1;16>z;++z)s(ne,se+32*z-4,ne,se+32*z+12,4);for(z=-1;8>z;++z)s(ie,de+32*z-4,ie,de+32*z+4,4),s(Ae,Oe+32*z-4,Ae,Oe+32*z+4,4)}var Ie=P.Gd,Xe=P.Hd+H,Be=Le.ad,Ee=Le.Hc;if(0<Y&&(s(ne,se-32,Ie[Xe].y,0,16),s(ie,de-32,Ie[Xe].f,0,8),s(Ae,Oe-32,Ie[Xe].ea,0,8)),Le.Za){var Te=ne,Ke=se-32+16;for(0<Y&&(H>=P.za-1?a(Te,Ke,Ie[Xe].y[15],4):s(Te,Ke,Ie[Xe+1].y,0,4)),z=0;4>z;z++)Te[Ke+128+z]=Te[Ke+256+z]=Te[Ke+384+z]=Te[Ke+0+z];for(z=0;16>z;++z,Ee<<=2)Te=ne,Ke=se+F3[z],Fi[Le.Ob[z]](Te,Ke),cp(Ee,Be,16*+z,Te,Ke)}else if(Te=Gx(H,Y,Le.Ob[0]),uc[Te](ne,se),Ee!=0)for(z=0;16>z;++z,Ee<<=2)cp(Ee,Be,16*+z,ne,se+F3[z]);for(z=Le.Gc,Te=Gx(H,Y,Le.Dd),vl[Te](ie,de),vl[Te](Ae,Oe),Ee=Be,Te=ie,Ke=de,255&(Le=z>>0)&&(170&Le?pp(Ee,256,Te,Ke):ei(Ee,256,Te,Ke)),Le=Ae,Ee=Oe,255&(z>>=8)&&(170&z?pp(Be,320,Le,Ee):ei(Be,320,Le,Ee)),Y<P.Ub-1&&(s(Ie[Xe].y,0,ne,se+480,16),s(Ie[Xe].f,0,ie,de+224,8),s(Ie[Xe].ea,0,Ae,Oe+224,8)),z=8*ee*P.B,Ie=P.sa,Xe=P.ta+16*H+16*ee*P.R,Be=P.qa,Le=P.ra+8*H+z,Ee=P.Ha,Te=P.Ia+8*H+z,z=0;16>z;++z)s(Ie,Xe+z*P.R,ne,se+32*z,16);for(z=0;8>z;++z)s(Be,Le+z*P.B,ie,de+32*z,8),s(Ee,Te+z*P.B,Ae,Oe+32*z,8)}}function yf(P,k,z,H,Y,ee,ne,se,ie){var de=[0],Ae=[0],Oe=0,Le=ie!=null?ie.kd:0,Ie=ie??new ap;if(P==null||12>z)return 7;Ie.data=P,Ie.w=k,Ie.ha=z,k=[k],z=[z],Ie.gb=[Ie.gb];e:{var Xe=k,Be=z,Ee=Ie.gb;if(t(P!=null),t(Be!=null),t(Ee!=null),Ee[0]=0,12<=Be[0]&&!r(P,Xe[0],"RIFF")){if(r(P,Xe[0]+8,"WEBP")){Ee=3;break e}var Te=De(P,Xe[0]+4);if(12>Te||4294967286<Te){Ee=3;break e}if(Le&&Te>Be[0]-8){Ee=7;break e}Ee[0]=Te,Xe[0]+=12,Be[0]-=12}Ee=0}if(Ee!=0)return Ee;for(Te=0<Ie.gb[0],z=z[0];;){e:{var Ke=P;Be=k,Ee=z;var Je=de,Ye=Ae,pt=Xe=[0];if((ht=Oe=[Oe])[0]=0,8>Ee[0])Ee=7;else{if(!r(Ke,Be[0],"VP8X")){if(De(Ke,Be[0]+4)!=10){Ee=3;break e}if(18>Ee[0]){Ee=7;break e}var ut=De(Ke,Be[0]+8),Dt=1+ge(Ke,Be[0]+12);if(2147483648<=Dt*(Ke=1+ge(Ke,Be[0]+15))){Ee=3;break e}pt!=null&&(pt[0]=ut),Je!=null&&(Je[0]=Dt),Ye!=null&&(Ye[0]=Ke),Be[0]+=18,Ee[0]-=18,ht[0]=1}Ee=0}}if(Oe=Oe[0],Xe=Xe[0],Ee!=0)return Ee;if(Be=!!(2&Xe),!Te&&Oe)return 3;if(ee!=null&&(ee[0]=!!(16&Xe)),ne!=null&&(ne[0]=Be),se!=null&&(se[0]=0),ne=de[0],Xe=Ae[0],Oe&&Be&&ie==null){Ee=0;break}if(4>z){Ee=7;break}if(Te&&Oe||!Te&&!Oe&&!r(P,k[0],"ALPH")){z=[z],Ie.na=[Ie.na],Ie.P=[Ie.P],Ie.Sa=[Ie.Sa];e:{ut=P,Ee=k,Te=z;var ht=Ie.gb;Je=Ie.na,Ye=Ie.P,pt=Ie.Sa,Dt=22,t(ut!=null),t(Te!=null),Ke=Ee[0];var Nr=Te[0];for(t(Je!=null),t(pt!=null),Je[0]=null,Ye[0]=null,pt[0]=0;;){if(Ee[0]=Ke,Te[0]=Nr,8>Nr){Ee=7;break e}var Ar=De(ut,Ke+4);if(4294967286<Ar){Ee=3;break e}var mr=8+Ar+1&-2;if(Dt+=mr,0<ht&&Dt>ht){Ee=3;break e}if(!r(ut,Ke,"VP8 ")||!r(ut,Ke,"VP8L")){Ee=0;break e}if(Nr[0]<mr){Ee=7;break e}r(ut,Ke,"ALPH")||(Je[0]=ut,Ye[0]=Ke+8,pt[0]=Ar),Ke+=mr,Nr-=mr}}if(z=z[0],Ie.na=Ie.na[0],Ie.P=Ie.P[0],Ie.Sa=Ie.Sa[0],Ee!=0)break}z=[z],Ie.Ja=[Ie.Ja],Ie.xa=[Ie.xa];e:if(ht=P,Ee=k,Te=z,Je=Ie.gb[0],Ye=Ie.Ja,pt=Ie.xa,ut=Ee[0],Ke=!r(ht,ut,"VP8 "),Dt=!r(ht,ut,"VP8L"),t(ht!=null),t(Te!=null),t(Ye!=null),t(pt!=null),8>Te[0])Ee=7;else{if(Ke||Dt){if(ht=De(ht,ut+4),12<=Je&&ht>Je-12){Ee=3;break e}if(Le&&ht>Te[0]-8){Ee=7;break e}Ye[0]=ht,Ee[0]+=8,Te[0]-=8,pt[0]=Dt}else pt[0]=5<=Te[0]&&ht[ut+0]==47&&!(ht[ut+4]>>5),Ye[0]=Te[0];Ee=0}if(z=z[0],Ie.Ja=Ie.Ja[0],Ie.xa=Ie.xa[0],k=k[0],Ee!=0)break;if(4294967286<Ie.Ja)return 3;if(se==null||Be||(se[0]=Ie.xa?2:1),ne=[ne],Xe=[Xe],Ie.xa){if(5>z){Ee=7;break}se=ne,Le=Xe,Be=ee,P==null||5>z?P=0:5<=z&&P[k+0]==47&&!(P[k+4]>>5)?(Te=[0],ht=[0],Je=[0],B(Ye=new L,P,k,z),Ot(Ye,Te,ht,Je)?(se!=null&&(se[0]=Te[0]),Le!=null&&(Le[0]=ht[0]),Be!=null&&(Be[0]=Je[0]),P=1):P=0):P=0}else{if(10>z){Ee=7;break}se=Xe,P==null||10>z||!Ix(P,k+3,z-3)?P=0:(Le=P[k+0]|P[k+1]<<8|P[k+2]<<16,Be=16383&(P[k+7]<<8|P[k+6]),P=16383&(P[k+9]<<8|P[k+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=Ie.Ja||!Be||!P?P=0:(ne&&(ne[0]=Be),se&&(se[0]=P),P=1))}if(!P||(ne=ne[0],Xe=Xe[0],Oe&&(de[0]!=ne||Ae[0]!=Xe)))return 3;ie!=null&&(ie[0]=Ie,ie.offset=k-ie.w,t(4294967286>k-ie.w),t(ie.offset==ie.ha-z));break}return Ee==0||Ee==7&&Oe&&ie==null?(ee!=null&&(ee[0]|=Ie.na!=null&&0<Ie.na.length),H!=null&&(H[0]=ne),Y!=null&&(Y[0]=Xe),0):Ee}function up(P,k,z){var H=k.width,Y=k.height,ee=0,ne=0,se=H,ie=Y;if(k.Da=P!=null&&0<P.Da,k.Da&&(se=P.cd,ie=P.bd,ee=P.v,ne=P.j,11>z||(ee&=-2,ne&=-2),0>ee||0>ne||0>=se||0>=ie||ee+se>H||ne+ie>Y))return 0;if(k.v=ee,k.j=ne,k.va=ee+se,k.o=ne+ie,k.U=se,k.T=ie,k.da=P!=null&&0<P.da,k.da){if(!Ce(se,ie,z=[P.ib],ee=[P.hb]))return 0;k.ib=z[0],k.hb=ee[0]}return k.ob=P!=null&&P.ob,k.Kb=P==null||!P.Sd,k.da&&(k.ob=k.ib<3*H/4&&k.hb<3*Y/4,k.Kb=0),1}function fp(P){if(P==null)return 2;if(11>P.S){var k=P.f.RGBA;k.fb+=(P.height-1)*k.A,k.A=-k.A}else k=P.f.kb,P=P.height,k.O+=(P-1)*k.fa,k.fa=-k.fa,k.N+=(P-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(P-1>>1)*k.Db,k.Db=-k.Db,k.F!=null&&(k.J+=(P-1)*k.lb,k.lb=-k.lb);return 0}function bf(P,k,z,H){if(H==null||0>=P||0>=k)return 2;if(z!=null){if(z.Da){var Y=z.cd,ee=z.bd,ne=-2&z.v,se=-2&z.j;if(0>ne||0>se||0>=Y||0>=ee||ne+Y>P||se+ee>k)return 2;P=Y,k=ee}if(z.da){if(!Ce(P,k,Y=[z.ib],ee=[z.hb]))return 2;P=Y[0],k=ee[0]}}H.width=P,H.height=k;e:{var ie=H.width,de=H.height;if(P=H.S,0>=ie||0>=de||!(P>=e0&&13>P))P=2;else{if(0>=H.Rd&&H.sd==null){ne=ee=Y=k=0;var Ae=(se=ie*M3[P])*de;if(11>P||(ee=(de+1)/2*(k=(ie+1)/2),P==12&&(ne=(Y=ie)*de)),(de=i(Ae+2*ee+ne))==null){P=1;break e}H.sd=de,11>P?((ie=H.f.RGBA).eb=de,ie.fb=0,ie.A=se,ie.size=Ae):((ie=H.f.kb).y=de,ie.O=0,ie.fa=se,ie.Fd=Ae,ie.f=de,ie.N=0+Ae,ie.Ab=k,ie.Cd=ee,ie.ea=de,ie.W=0+Ae+ee,ie.Db=k,ie.Ed=ee,P==12&&(ie.F=de,ie.J=0+Ae+2*ee),ie.Tc=ne,ie.lb=Y)}if(k=1,Y=H.S,ee=H.width,ne=H.height,Y>=e0&&13>Y)if(11>Y)P=H.f.RGBA,k&=(se=Math.abs(P.A))*(ne-1)+ee<=P.size,k&=se>=ee*M3[Y],k&=P.eb!=null;else{P=H.f.kb,se=(ee+1)/2,Ae=(ne+1)/2,ie=Math.abs(P.fa),de=Math.abs(P.Ab);var Oe=Math.abs(P.Db),Le=Math.abs(P.lb),Ie=Le*(ne-1)+ee;k&=ie*(ne-1)+ee<=P.Fd,k&=de*(Ae-1)+se<=P.Cd,k=(k&=Oe*(Ae-1)+se<=P.Ed)&ie>=ee&de>=se&Oe>=se,k&=P.y!=null,k&=P.f!=null,k&=P.ea!=null,Y==12&&(k&=Le>=ee,k&=Ie<=P.Tc,k&=P.F!=null)}else k=0;P=k?0:2}}return P!=0||z!=null&&z.fd&&(P=fp(H)),P}var gs=64,jf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wf=24,Nf=32,hp=8,la=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$e("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(P){return P},N.Predictor2=function(P,k,z){return k[z+0]},N.Predictor3=function(P,k,z){return k[z+1]},N.Predictor4=function(P,k,z){return k[z-1]},N.Predictor5=function(P,k,z){return rt(rt(P,k[z+1]),k[z+0])},N.Predictor6=function(P,k,z){return rt(P,k[z-1])},N.Predictor7=function(P,k,z){return rt(P,k[z+0])},N.Predictor8=function(P,k,z){return rt(k[z-1],k[z+0])},N.Predictor9=function(P,k,z){return rt(k[z+0],k[z+1])},N.Predictor10=function(P,k,z){return rt(rt(P,k[z-1]),rt(k[z+0],k[z+1]))},N.Predictor11=function(P,k,z){var H=k[z+0];return 0>=Ze(H>>24&255,P>>24&255,(k=k[z-1])>>24&255)+Ze(H>>16&255,P>>16&255,k>>16&255)+Ze(H>>8&255,P>>8&255,k>>8&255)+Ze(255&H,255&P,255&k)?H:P},N.Predictor12=function(P,k,z){var H=k[z+0];return(gt((P>>24&255)+(H>>24&255)-((k=k[z-1])>>24&255))<<24|gt((P>>16&255)+(H>>16&255)-(k>>16&255))<<16|gt((P>>8&255)+(H>>8&255)-(k>>8&255))<<8|gt((255&P)+(255&H)-(255&k)))>>>0},N.Predictor13=function(P,k,z){var H=k[z-1];return(Me((P=rt(P,k[z+0]))>>24&255,H>>24&255)<<24|Me(P>>16&255,H>>16&255)<<16|Me(P>>8&255,H>>8&255)<<8|Me(P>>0&255,H>>0&255))>>>0};var u2=N.PredictorAdd0;N.PredictorAdd1=ft,$e("Predictor2","PredictorAdd2"),$e("Predictor3","PredictorAdd3"),$e("Predictor4","PredictorAdd4"),$e("Predictor5","PredictorAdd5"),$e("Predictor6","PredictorAdd6"),$e("Predictor7","PredictorAdd7"),$e("Predictor8","PredictorAdd8"),$e("Predictor9","PredictorAdd9"),$e("Predictor10","PredictorAdd10"),$e("Predictor11","PredictorAdd11"),$e("Predictor12","PredictorAdd12"),$e("Predictor13","PredictorAdd13");var mp=N.PredictorAdd2;zt("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),zt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var Kx,Za=N.ColorIndexInverseTransform,Sf=N.MapARGB,Yx=N.VP8LColorIndexInverseTransformAlpha,Xx=N.MapAlpha,oc=N.VP8LPredictorsAdd=[];oc.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var $d,ca,Gs,lc,fl,hl,Cf,ml,Pn,pp,Ks,ei,Af,Qx,vp,Fd,Md,cc,Bd,Ef,zd,dc,gp,ti,ri,Vr,qr,Tn,Gn=i(511),pl=i(2041),xp=i(225),Pf=i(767),Jx=0,f2=pl,Zx=xp,_a=Pf,ni=Gn,e0=0,t0=1,E3=2,r0=3,n0=4,h2=5,P3=6,m2=7,p2=8,s0=9,v2=10,qq=[2,3,7],Wq=[3,3,11],T3=[280,256,256,256,40],Hq=[0,1,1,1,0],Gq=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Kq=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yq=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xq=8,g2=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],x2=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yp=null,Qq=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Jq=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_3=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zq=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],eW=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],tW=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],rW=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],uc=[],Fi=[],vl=[],nW=1,I3=2,fc=[],si=[];We("UpsampleRgbLinePair",ur,3),We("UpsampleBgrLinePair",un,3),We("UpsampleRgbaLinePair",$i,4),We("UpsampleBgraLinePair",ns,4),We("UpsampleArgbLinePair",Is,4),We("UpsampleRgba4444LinePair",$n,2),We("UpsampleRgb565LinePair",bn,2);var sW=N.UpsampleRgbLinePair,aW=N.UpsampleBgrLinePair,k3=N.UpsampleRgbaLinePair,D3=N.UpsampleBgraLinePair,O3=N.UpsampleArgbLinePair,L3=N.UpsampleRgba4444LinePair,iW=N.UpsampleRgb565LinePair,a0=16,i0=1<<a0-1,bp=-227,y2=482,R3=6,oW=(256<<R3)-1,$3=0,lW=i(256),cW=i(256),dW=i(256),uW=i(256),fW=i(y2-bp),hW=i(y2-bp);Ao("YuvToRgbRow",ur,3),Ao("YuvToBgrRow",un,3),Ao("YuvToRgbaRow",$i,4),Ao("YuvToBgraRow",ns,4),Ao("YuvToArgbRow",Is,4),Ao("YuvToRgba4444Row",$n,2),Ao("YuvToRgb565Row",bn,2);var F3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],o0=[0,2,8],mW=[8,7,6,4,4,2,2,2,1,1,1,1],pW=1;this.WebPDecodeRGBA=function(P,k,z,H,Y){var ee=t0,ne=new gf,se=new _i;ne.ba=se,se.S=ee,se.width=[se.width],se.height=[se.height];var ie=se.width,de=se.height,Ae=new ll;if(Ae==null||P==null)var Oe=2;else t(Ae!=null),Oe=yf(P,k,z,Ae.width,Ae.height,Ae.Pd,Ae.Qd,Ae.format,null);if(Oe!=0?ie=0:(ie!=null&&(ie[0]=Ae.width[0]),de!=null&&(de[0]=Ae.height[0]),ie=1),ie){se.width=se.width[0],se.height=se.height[0],H!=null&&(H[0]=se.width),Y!=null&&(Y[0]=se.height);e:{if(H=new df,(Y=new ap).data=P,Y.w=k,Y.ha=z,Y.kd=1,k=[0],t(Y!=null),((P=yf(Y.data,Y.w,Y.ha,null,null,null,k,null,Y))==0||P==7)&&k[0]&&(P=4),(k=P)==0){if(t(ne!=null),H.data=Y.data,H.w=Y.w+Y.offset,H.ha=Y.ha-Y.offset,H.put=yo,H.ac=vs,H.bc=bo,H.ma=ne,Y.xa){if((P=Ja())==null){ne=1;break e}if(function(Le,Ie){var Xe=[0],Be=[0],Ee=[0];t:for(;;){if(Le==null)return 0;if(Ie==null)return Le.a=2,0;if(Le.l=Ie,Le.a=0,B(Le.m,Ie.data,Ie.w,Ie.ha),!Ot(Le.m,Xe,Be,Ee)){Le.a=3;break t}if(Le.xb=I3,Ie.width=Xe[0],Ie.height=Be[0],!No(Xe[0],Be[0],1,Le,null))break t;return 1}return t(Le.a!=0),0}(P,H)){if(H=(k=bf(H.width,H.height,ne.Oa,ne.ba))==0){t:{H=P;r:for(;;){if(H==null){H=0;break t}if(t(H.s.yc!=null),t(H.s.Ya!=null),t(0<H.s.Wb),t((z=H.l)!=null),t((Y=z.ma)!=null),H.xb!=0){if(H.ca=Y.ba,H.tb=Y.tb,t(H.ca!=null),!up(Y.Oa,z,r0)){H.a=2;break r}if(!kd(H,z.width)||z.da)break r;if((z.da||dr(H.ca.S))&&ke(),11>H.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),H.ca.f.kb.F!=null&&ke()),H.Pb&&0<H.s.ua&&H.s.vb.X==null&&!xe(H.s.vb,H.s.Wa.Xa)){H.a=1;break r}H.xb=0}if(!Oi(H,H.V,H.Ba,H.c,H.i,z.o,nf))break r;Y.Dc=H.Ma,H=1;break t}t(H.a!=0),H=0}H=!H}H&&(k=P.a)}else k=P.a}else{if((P=new Hw)==null){ne=1;break e}if(P.Fa=Y.na,P.P=Y.P,P.qc=Y.Sa,kx(P,H)){if((k=bf(H.width,H.height,ne.Oa,ne.ba))==0){if(P.Aa=0,z=ne.Oa,t((Y=P)!=null),z!=null){if(0<(ie=0>(ie=z.Md)?0:100<ie?255:255*ie/100)){for(de=Ae=0;4>de;++de)12>(Oe=Y.pb[de]).lc&&(Oe.ia=ie*mW[0>Oe.lc?0:Oe.lc]>>3),Ae|=Oe.ia;Ae&&(alert("todo:VP8InitRandom"),Y.ia=1)}Y.Ga=z.Id,100<Y.Ga?Y.Ga=100:0>Y.Ga&&(Y.Ga=0)}Gw(P,H)||(k=P.a)}}else k=P.a}k==0&&ne.Oa!=null&&ne.Oa.fd&&(k=fp(ne.ba))}ne=k}ee=ne!=0?null:11>ee?se.f.RGBA.eb:se.f.kb.y}else ee=null;return ee};var M3=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(N,_){for(var I="",T=0;T<4;T++)I+=String.fromCharCode(N[_++]);return I}function f(N,_){return(N[_+0]<<0|N[_+1]<<8|N[_+2]<<16)>>>0}function u(N,_){return(N[_+0]<<0|N[_+1]<<8|N[_+2]<<16|N[_+3]<<24)>>>0}new c;var h=[0],m=[0],v=[],g=new c,p=e,x=function(N,_){var I={},T=0,A=!1,O=0,D=0;if(I.frames=[],!function(V,G,Z,te){for(var he=0;he<te;he++)if(V[G+he]!=Z.charCodeAt(he))return!0;return!1}(N,_,"RIFF",4)){var $,M;for(u(N,_+=4),_+=8;_<N.length;){var R=d(N,_),B=u(N,_+=4);_+=4;var U=B+(1&B);switch(R){case"VP8 ":case"VP8L":I.frames[T]===void 0&&(I.frames[T]={}),(L=I.frames[T]).src_off=A?D:_-8,L.src_size=O+B+8,T++,A&&(A=!1,O=0,D=0);break;case"VP8X":(L=I.header={}).feature_flags=N[_];var W=_+4;L.canvas_width=1+f(N,W),W+=3,L.canvas_height=1+f(N,W),W+=3;break;case"ALPH":A=!0,O=U+8,D=_-8;break;case"ANIM":(L=I.header).bgcolor=u(N,_),W=_+4,L.loop_count=($=N)[(M=W)+0]<<0|$[M+1]<<8,W+=2;break;case"ANMF":var q,L;(L=I.frames[T]={}).offset_x=2*f(N,_),_+=3,L.offset_y=2*f(N,_),_+=3,L.width=1+f(N,_),_+=3,L.height=1+f(N,_),_+=3,L.duration=f(N,_),_+=3,q=N[_++],L.dispose=1&q,L.blend=q>>1&1}R!="ANMF"&&(_+=U)}return I}}(p,0);x.response=p,x.rgbaoutput=!0,x.dataurl=!1;var b=x.header?x.header:null,y=x.frames?x.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<y.length&&y[j].blend!=0;j++);}var E=y[0],C=g.WebPDecodeRGBA(p,E.src_off,E.src_size,m,h);E.rgba=C,E.imgwidth=m[0],E.imgheight=h[0];for(var S=0;S<m[0]*h[0]*4;S++)v[S]=C[S];return this.width=m,this.height=h,this.data=v,this}(function(e){var t=function(){return typeof xC=="function"},r=function(h,m,v,g){var p=4,x=o;switch(g){case e.image_compression.FAST:p=1,x=i;break;case e.image_compression.MEDIUM:p=6,x=l;break;case e.image_compression.SLOW:p=9,x=c}h=s(h,m,v,x);var b=xC(h,{level:p});return e.__addimage__.arrayBufferToBinaryString(b)},s=function(h,m,v,g){for(var p,x,b,y=h.length/m,j=new Uint8Array(h.length+y),E=f(),C=0;C<y;C+=1){if(b=C*m,p=h.subarray(b,b+m),g)j.set(g(p,v,x),b+C);else{for(var S,N=E.length,_=[];S<N;S+=1)_[S]=E[S](p,v,x);var I=u(_.concat());j.set(_[I],b+C)}x=p}return j},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},i=function(h,m){var v,g=[],p=h.length;g[0]=1;for(var x=0;x<p;x+=1)v=h[x-m]||0,g[x+1]=h[x]-v+256&255;return g},o=function(h,m,v){var g,p=[],x=h.length;p[0]=2;for(var b=0;b<x;b+=1)g=v&&v[b]||0,p[b+1]=h[b]-g+256&255;return p},l=function(h,m,v){var g,p,x=[],b=h.length;x[0]=3;for(var y=0;y<b;y+=1)g=h[y-m]||0,p=v&&v[y]||0,x[y+1]=h[y]+256-(g+p>>>1)&255;return x},c=function(h,m,v){var g,p,x,b,y=[],j=h.length;y[0]=4;for(var E=0;E<j;E+=1)g=h[E-m]||0,p=v&&v[E]||0,x=v&&v[E-m]||0,b=d(g,p,x),y[E+1]=h[E]-b+256&255;return y},d=function(h,m,v){if(h===m&&m===v)return h;var g=Math.abs(m-v),p=Math.abs(h-v),x=Math.abs(h+m-v-v);return g<=p&&g<=x?h:p<=x?m:v},f=function(){return[a,i,o,l,c]},u=function(h){var m=h.map(function(v){return v.reduce(function(g,p){return g+Math.abs(p)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,v,g){var p,x,b,y,j,E,C,S,N,_,I,T,A,O,D,$=this.decode.FLATE_DECODE,M="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(b=new dfe(h)).imgData,x=b.bits,p=b.colorSpace,j=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){N=(S=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,I=new Uint8Array(N*b.colors),_=new Uint8Array(N);var R,B=b.pixelBitlength-b.bits;for(O=0,D=0;O<N;O++){for(A=S[O],R=0;R<B;)I[D++]=A>>>R&255,R+=b.bits;_[O]=A>>>R&255}}if(b.bits===16){N=(S=new Uint32Array(b.decodePixels().buffer)).length,I=new Uint8Array(N*(32/b.pixelBitlength)*b.colors),_=new Uint8Array(N*(32/b.pixelBitlength)),T=b.colors>1,O=0,D=0;for(var U=0;O<N;)A=S[O++],I[D++]=A>>>0&255,T&&(I[D++]=A>>>16&255,A=S[O++],I[D++]=A>>>0&255),_[U++]=A>>>16&255;x=8}g!==e.image_compression.NONE&&t()?(h=r(I,b.width*b.colors,b.colors,g),C=r(_,b.width,1,g)):(h=I,C=_,$=void 0)}if(b.colorType===3&&(p=this.color_spaces.INDEXED,E=b.palette,b.transparency.indexed)){var W=b.transparency.indexed,q=0;for(O=0,N=W.length;O<N;++O)q+=W[O];if((q/=255)===N-1&&W.indexOf(0)!==-1)y=[W.indexOf(0)];else if(q!==N){for(S=b.decodePixels(),_=new Uint8Array(S.length),O=0,N=S.length;O<N;O++)_[O]=W[S[O]];C=r(_,b.width,1)}}var L=function(V){var G;switch(V){case e.image_compression.FAST:G=11;break;case e.image_compression.MEDIUM:G=13;break;case e.image_compression.SLOW:G=14;break;default:G=12}return G}(g);return $===this.decode.FLATE_DECODE&&(M="/Predictor "+L+" "),M+="/Colors "+j+" /BitsPerComponent "+x+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(C&&this.__addimage__.isArrayBuffer(C)||this.__addimage__.isArrayBufferView(C))&&(C=this.__addimage__.arrayBufferToBinaryString(C)),{alias:v,data:h,index:m,filter:$,decodeParameters:M,transparency:y,palette:E,sMask:C,predictor:L,width:b.width,height:b.height,bitsPerComponent:x,colorSpace:p}}}})(Tt.API),function(e){e.processGIF89A=function(t,r,s,a){var i=new ufe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},f=new KN(100).encode(d,100);return e.processJPEG.call(this,f,r,s,a)},e.processGIF87A=e.processGIF89A}(Tt.API),Vi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:s,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Fr.log("bit decode error:"+r)}},Vi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Vi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Vi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*s;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Vi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,f=s*this.width*4+4*a;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=d}this.pos+=e}},Vi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,f=a*this.width*4+4*i;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},Vi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},Vi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=s,this.data[l+3]=o}},Vi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,s,a){var i=new Vi(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new KN(100).encode(c,100);return e.processJPEG.call(this,d,r,s,a)}}(Tt.API),Uk.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,s,a){var i=new Uk(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new KN(100).encode(c,100);return e.processJPEG.call(this,d,r,s,a)}}(Tt.API),Tt.API.processRGBA=function(e,t,r){for(var s=e.data,a=s.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var f=s[d],u=s[d+1],h=s[d+2],m=s[d+3];i[l++]=f,i[l++]=u,i[l++]=h,o[c++]=m}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Tt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mf=Tt.API,ry=Mf.getCharWidthsArray=function(e,t){var r,s,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,f=d.fof?d.fof:1,u=t.doKerning!==!1,h=0,m=e.length,v=0,g=l[0]||c,p=[];for(r=0;r<m;r++)s=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?p.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+o*(1e3/i)||0)/1e3):(h=u&&yr(d[s])==="object"&&!isNaN(parseInt(d[s][v],10))?d[s][v]/f:0,p.push((l[s]||g)/c+h)),v=s;return p},Fk=Mf.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Mf.processArabic&&(e=Mf.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,a)/r:ry.apply(this,arguments).reduce(function(i,o){return i+o},0)},Mk=function(e,t,r,s){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>s&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},Bk=function(e,t,r){r||(r={});var s,a,i,o,l,c,d,f=[],u=[f],h=r.textIndent||0,m=0,v=0,g=e.split(" "),p=ry.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),b=[];g.map(function(j){(j=j.split(/\s*\n/)).length>1?b=b.concat(j.map(function(E,C){return(C&&E.length?`
`:"")+E})):b.push(j[0])}),g=b,c=Fk.apply(this,[x,r])}for(i=0,o=g.length;i<o;i++){var y=0;if(s=g[i],c&&s[0]==`
`&&(s=s.substr(1),y=1),h+m+(v=(a=ry.apply(this,[s,r])).reduce(function(j,E){return j+E},0))>t||y){if(v>t){for(l=Mk.apply(this,[s,a,t-(h+m),t]),f.push(l.shift()),f=[l.pop()];l.length;)u.push([l.shift()]);v=a.slice(s.length-(f[0]?f[0].length:0)).reduce(function(j,E){return j+E},0)}else f=[s];u.push(f),h=v+c,m=p}else f.push(s),h+=m+v,m=p}return d=c?function(j,E){return(E?x:"")+j.join(" ")}:function(j){return j.join(" ")},u.map(d)},Mf.splitTextToSize=function(e,t,r){var s,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var u=this.internal.getFont(f.fontName,f.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=s.length;l<c;l++)d=d.concat(Bk.apply(this,[s[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},s={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],s["0123456789abcdef"[a]]=t[a];var i=function(u){return"0x"+parseInt(u,10).toString(16)},o=e.__fontmetrics__.compress=function(u){var h,m,v,g,p=["{"];for(var x in u){if(h=u[x],isNaN(parseInt(x,10))?m="'"+x+"'":(x=parseInt(x,10),m=(m=i(x).slice(2)).slice(0,-1)+s[m.slice(-1)]),typeof h=="number")h<0?(v=i(h).slice(3),g="-"):(v=i(h).slice(2),g=""),v=g+v.slice(0,-1)+s[v.slice(-1)];else{if(yr(h)!=="object")throw new Error("Don't know what to do with value type "+yr(h)+".");v=o(h)}p.push(m+v)}return p.push("}"),p.join("")},l=e.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,v,g,p={},x=1,b=p,y=[],j="",E="",C=u.length-1,S=1;S<C;S+=1)(g=u[S])=="'"?h?(v=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(y.push([b,v]),b={},v=void 0):g=="}"?((m=y.pop())[0][m[1]]=b,v=void 0,b=m[0]):g=="-"?x=-1:v===void 0?r.hasOwnProperty(g)?(j+=r[g],v=parseInt(j,16)*x,x=1,j=""):j+=g:r.hasOwnProperty(g)?(E+=r[g],b[v]=parseInt(E,16)*x,x=1,v=void 0,E=""):E+=g;return p},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(u){var h=u.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var v=d.Unicode[h.postScriptName];v&&(h.metadata.Unicode.encoding=v,h.encoding=v.codePages[0])}])}(Tt.API),function(e){var t=function(r){for(var s=r.length,a=new Uint8Array(s),i=0;i<s;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var s=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(yv(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,s)}}])}(Tt),function(e){function t(){return(Ft.canvg?Promise.resolve(Ft.canvg):md(()=>import("./index.es-2a0eb51f.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Tt.API.addSvgAsImage=function(r,s,a,i,o,l,c,d){if(isNaN(s)||isNaN(a))throw Fr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Fr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var u=f.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,f.width,f.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(v){return v.fromString(u,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),s,a,i,o,c,d)})}}(),Tt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(t,r);return this},Tt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,f=0,u=0;function h(v,g){var p,x=!1;for(p=0;p<v.length;p+=1)v[p]===g&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(u=0;u<m;u+=1)r[l[u]].value=r[l[u]].defaultValue,r[l[u]].explicitSet=!1}if(yr(e)==="object"){for(a in e)if(i=e[a],h(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(s=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(f=0;f<i[d].length;f+=1)typeof i[d][f]!="number"&&(s=!1);s===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,g=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?g.push("/"+v+" /"+r[v].value):g.push("/"+v+" "+r[v].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Tt.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],u=0,h=i.length;u<h;++u){if(l=o.metadata.characterToGlyph(i.charCodeAt(u)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(u),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(d[4-l.length],l)}return f.join("")},s=function(i){var o,l,c,d,f,u,h;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],u=0,h=(l=Object.keys(i).sort(function(m,v){return m-v})).length;u<h;u++)o=l[u],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var u=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",v=0;v<h.length;v++)m+=String.fromCharCode(h[v]);var g=d();f({data:m,addLength1:!0,objectId:g}),c("endobj");var p=d();f({data:s(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var x=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Xf(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Xf(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+e.API.PDFObject.convert(u)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+p+" 0 R"),c("/BaseFont /"+Xf(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var u=l.metadata.rawData,h="",m=0;m<u.length;m++)h+=String.fromCharCode(u[m]);var v=d();f({data:h,addLength1:!0,objectId:v}),c("endobj");var g=d();f({data:s(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var p=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Xf(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Xf(l.fontName)+"/FontDescriptor "+p+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,f=i.options||{},u=i.mutex||{},h=u.pdfEscape,m=u.activeFontKey,v=u.fonts,g=m,p="",x=0,b="",y=v[g].encoding;if(v[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:f,mutex:u};for(b=l,g=m,Array.isArray(l)&&(b=l[0]),x=0;x<b.length;x+=1)v[g].metadata.hasOwnProperty("cmap")&&(o=v[g].metadata.cmap.unicode.codeMap[b[x].charCodeAt(0)]),o||b[x].charCodeAt(0)<256&&v[g].metadata.hasOwnProperty("Unicode")?p+=b[x]:p+="";var j="";return parseInt(g.slice(1))<14||y==="WinAnsiEncoding"?j=h(p,g).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):y==="Identity-H"&&(j=r(p,v[g])),u.isHex=!0,{text:j,x:c,y:d,options:f,mutex:u}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(Tt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Tt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var a,i,o,l,c,d,f,u=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,y=0;this.__bidiEngine__={};var j=function(T){var A=T.charCodeAt(),O=A>>8,D=g[O];return D!==void 0?u[256*D+(255&A)]:O===252||O===253?"AL":x.test(O)?"L":O===8?"R":"N"},E=function(T){for(var A,O=0;O<T.length;O++){if((A=j(T.charAt(O)))==="L")return!1;if(A==="R")return!0}return!1},C=function(T,A,O,D){var $,M,R,B,U=A[D];switch(U){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(U="AN");break;case"AL":b=!0,U="R";break;case"WS":U="N";break;case"CS":D<1||D+1>=A.length||($=O[D-1])!=="EN"&&$!=="AN"||(M=A[D+1])!=="EN"&&M!=="AN"?U="N":b&&(M="AN"),U=M===$?M:"N";break;case"ES":U=($=D>0?O[D-1]:"B")==="EN"&&D+1<A.length&&A[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&O[D-1]==="EN"){U="EN";break}if(b){U="N";break}for(R=D+1,B=A.length;R<B&&A[R]==="ET";)R++;U=R<B&&A[R]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(B=A.length,R=D+1;R<B&&A[R]==="NSM";)R++;if(R<B){var W=T[D],q=W>=1425&&W<=2303||W===64286;if($=A[R],q&&($==="R"||$==="AL")){U="R";break}}}U=D<1||($=A[D-1])==="B"?"N":O[D-1];break;case"B":b=!1,a=!0,U=y;break;case"S":i=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":U="N"}return U},S=function(T,A,O){var D=T.split("");return O&&N(D,O,{hiLevel:y}),D.reverse(),A&&A.reverse(),D.join("")},N=function(T,A,O){var D,$,M,R,B,U=-1,W=T.length,q=0,L=[],V=y?m:h,G=[];for(b=!1,a=!1,i=!1,$=0;$<W;$++)G[$]=j(T[$]);for(M=0;M<W;M++){if(B=q,L[M]=C(T,G,L,M),D=240&(q=V[B][v[L[M]]]),q&=15,A[M]=R=V[q][5],D>0)if(D===16){for($=U;$<M;$++)A[$]=1;U=-1}else U=-1;if(V[q][6])U===-1&&(U=M);else if(U>-1){for($=U;$<M;$++)A[$]=R;U=-1}G[M]==="B"&&(A[M]=0),O.hiLevel|=R}i&&function(Z,te,he){for(var me=0;me<he;me++)if(Z[me]==="S"){te[me]=y;for(var oe=me-1;oe>=0&&Z[oe]==="WS";oe--)te[oe]=y}}(G,A,W)},_=function(T,A,O,D,$){if(!($.hiLevel<T)){if(T===1&&y===1&&!a)return A.reverse(),void(O&&O.reverse());for(var M,R,B,U,W=A.length,q=0;q<W;){if(D[q]>=T){for(B=q+1;B<W&&D[B]>=T;)B++;for(U=q,R=B-1;U<R;U++,R--)M=A[U],A[U]=A[R],A[R]=M,O&&(M=O[U],O[U]=O[R],O[R]=M);q=B}q++}}},I=function(T,A,O){var D=T.split(""),$={hiLevel:y};return O||(O=[]),N(D,O,$),function(M,R,B){if(B.hiLevel!==0&&f)for(var U,W=0;W<M.length;W++)R[W]===1&&(U=p.indexOf(M[W]))>=0&&(M[W]=p[U+1])}(D,O,$),_(2,D,A,O,$),_(1,D,A,O,$),D.join("")};return this.__bidiEngine__.doBidiReorder=function(T,A,O){if(function($,M){if(M)for(var R=0;R<$.length;R++)M[R]=R;l===void 0&&(l=E($)),d===void 0&&(d=E($))}(T,A),o||!c||d)if(o&&c&&l^d)y=l?1:0,T=S(T,A,O);else if(!o&&c&&d)y=l?1:0,T=I(T,A,O),T=S(T,A);else if(!o||l||c||d){if(o&&!c&&l^d)T=S(T,A),l?(y=0,T=I(T,A,O)):(y=1,T=I(T,A,O),T=S(T,A));else if(o&&l&&!c&&d)y=1,T=I(T,A,O),T=S(T,A);else if(!o&&!c&&l^d){var D=f;l?(y=1,T=I(T,A,O),y=0,f=!1,T=I(T,A,O),f=D):(y=0,T=I(T,A,O),T=S(T,A),y=1,f=!1,T=I(T,A,O),f=D,T=S(T,A))}}else y=0,T=I(T,A,O);else y=l?1:0,T=I(T,A,O);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,l=T.isInputRtl,d=T.isOutputRtl,f=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var a=s.text,i=(s.x,s.y,s.options||{}),o=(s.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);s.text=o}else s.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Tt),Tt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new vd(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Afe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ffe(this.contents),this.head=new mfe(this),this.name=new yfe(this),this.cmap=new O9(this),this.toUnicode={},this.hhea=new pfe(this),this.maxp=new bfe(this),this.hmtx=new jfe(this),this.post=new gfe(this),this.os2=new vfe(this),this.loca=new Cfe(this),this.glyf=new wfe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var go,vd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,a;for(a=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,a,i;for(i=[],s=0,a=t.length;s<a;s++)r=t[s],i.push(this.writeByte(r));return i},e}(),ffe=function(){var e;function t(r){var s,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,a,i,o,l,c,d,f,u,h,m,v,g;for(g in m=Object.keys(r).length,c=Math.log(2),u=16*Math.floor(Math.log(m)/c),o=Math.floor(u/c),f=16*m-u,(a=new vd).writeInt(this.scalarType),a.writeShort(m),a.writeShort(u),a.writeShort(o),a.writeShort(f),i=16*m,d=a.pos+i,l=null,v=[],r)for(h=r[g],a.writeString(g),a.writeInt(e(h)),a.writeInt(d),a.writeInt(h.length),v=v.concat(h),g==="head"&&(l=d),d+=h.length;d%4;)v.push(0),d++;return a.write(v),s=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(s),a.data},e=function(r){var s,a,i,o;for(r=L9.call(r);r.length%4;)r.push(0);for(i=new vd(r),a=0,s=0,o=r.length;s<o;s=s+=4)a+=i.readUInt32();return 4294967295&a},t}(),hfe={}.hasOwnProperty,al=function(e,t){for(var r in t)hfe.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};go=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var mfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new vd).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t}(),Vk=function(){function e(t,r){var s,a,i,o,l,c,d,f,u,h,m,v,g,p,x,b,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var j,E;for(E=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)E.push(t.readUInt16());return E}(),t.pos+=2,g=function(){var j,E;for(E=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)E.push(t.readUInt16());return E}(),d=function(){var j,E;for(E=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)E.push(t.readUInt16());return E}(),f=function(){var j,E;for(E=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)E.push(t.readUInt16());return E}(),a=(this.length-t.pos+this.offset)/2,l=function(){var j,E;for(E=[],c=j=0;0<=a?j<a:j>a;c=0<=a?++j:--j)E.push(t.readUInt16());return E}(),c=x=0,y=i.length;x<y;c=++x)for(p=i[c],s=b=v=g[c];v<=p?b<=p:b>=p;s=v<=p?++b:--b)f[c]===0?o=s+d[c]:(o=l[f[c]/2+(s-v)-(h-c)]||0)!==0&&(o+=d[c]),this.codeMap[s]=65535&o}t.pos=u}return e.encode=function(t,r){var s,a,i,o,l,c,d,f,u,h,m,v,g,p,x,b,y,j,E,C,S,N,_,I,T,A,O,D,$,M,R,B,U,W,q,L,V,G,Z,te,he,me,oe,we,ve,ge;switch(D=new vd,o=Object.keys(t).sort(function(De,xe){return De-xe}),r){case"macroman":for(g=0,p=function(){var De=[];for(v=0;v<256;++v)De.push(0);return De}(),b={0:0},i={},$=0,U=o.length;$<U;$++)b[oe=t[a=o[$]]]==null&&(b[oe]=++g),i[a]={old:t[a],new:b[t[a]]},p[a]=b[t[a]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(p),{charMap:i,subtable:D.data,maxGlyphID:g+1};case"unicode":for(A=[],u=[],y=0,b={},s={},x=d=null,M=0,W=o.length;M<W;M++)b[E=t[a=o[M]]]==null&&(b[E]=++y),s[a]={old:E,new:b[E]},l=b[E]-a,x!=null&&l===d||(x&&u.push(x),A.push(a),d=l),x=a;for(x&&u.push(x),u.push(65535),A.push(65535),I=2*(_=A.length),N=2*Math.pow(Math.log(_)/Math.LN2,2),h=Math.log(N/2)/Math.LN2,S=2*_-N,c=[],C=[],m=[],v=R=0,q=A.length;R<q;v=++R){if(T=A[v],f=u[v],T===65535){c.push(0),C.push(0);break}if(T-(O=s[T].new)>=32768)for(c.push(0),C.push(2*(m.length+_-v)),a=B=T;T<=f?B<=f:B>=f;a=T<=f?++B:--B)m.push(s[a].new);else c.push(O-T),C.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*_+2*m.length),D.writeUInt16(0),D.writeUInt16(I),D.writeUInt16(N),D.writeUInt16(h),D.writeUInt16(S),he=0,L=u.length;he<L;he++)a=u[he],D.writeUInt16(a);for(D.writeUInt16(0),me=0,V=A.length;me<V;me++)a=A[me],D.writeUInt16(a);for(we=0,G=c.length;we<G;we++)l=c[we],D.writeUInt16(l);for(ve=0,Z=C.length;ve<Z;ve++)j=C[ve],D.writeUInt16(j);for(ge=0,te=m.length;ge<te;ge++)g=m[ge],D.writeUInt16(g);return{charMap:s,subtable:D.data,maxGlyphID:y+1}}},e}(),O9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)s=new Vk(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var a,i;return s==null&&(s="macroman"),a=Vk.encode(r,s),(i=new vd).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),pfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),vfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var s,a;for(a=[],s=0;s<10;++s)a.push(r.readByte());return a}(),this.charRange=function(){var s,a;for(a=[],s=0;s<4;++s)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var s,a;for(a=[],s=0;s<2;s=++s)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),gfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="post",t.prototype.parse=function(r){var s,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)s=r.readByte(),i.push(this.names.push(r.readString(s)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),xfe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},yfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="name",t.prototype.parse=function(r){var s,a,i,o,l,c,d,f,u,h,m;for(r.pos=this.offset,r.readShort(),s=r.readShort(),c=r.readShort(),a=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=u=0,h=a.length;u<h;o=++u)i=a[o],r.pos=i.offset,f=r.readString(i.length),l=new xfe(f,i),d[m=i.nameID]==null&&(d[m]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),bfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),jfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,a,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],s=0,c=this.file.hhea.numberOfMetrics;0<=c?s<c:s>c;s=0<=c?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,u;for(u=[],s=f=0;0<=i?f<i:f>i;s=0<=i?++f:--f)u.push(r.readInt16());return u}(),this.widths=(function(){var f,u,h,m;for(m=[],f=0,u=(h=this.metrics).length;f<u;f++)o=h[f],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],d=[],s=l=0;0<=i?l<i:l>i;s=0<=i?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),L9=[].slice,wfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,a,i,o,l,c,d,f,u,h;return r in this.cache?this.cache[r]:(o=this.file.loca,s=this.file.contents,a=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+a,l=(c=new vd(s.read(i))).readShort(),f=c.readShort(),h=c.readShort(),d=c.readShort(),u=c.readShort(),this.cache[r]=l===-1?new Sfe(c,f,h,d,u):new Nfe(c,l,f,h,d,u),this.cache[r]))},t.prototype.encode=function(r,s,a){var i,o,l,c,d;for(l=[],o=[],c=0,d=s.length;c<d;c++)i=r[s[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),Nfe=function(){function e(t,r,s,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Sfe=function(){function e(t,r,s,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new vd(L9.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Cfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,go),t.prototype.tag="loca",t.prototype.parse=function(r){var s,a;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<s.length&&s[o]==l){++o,a[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var f=new Array(4*a.length),u=0;u<a.length;++u)f[4*u+3]=255&a[u],f[4*u+2]=(65280&a[u])>>8,f[4*u+1]=(16711680&a[u])>>16,f[4*u]=(4278190080&a[u])>>24;return f},t}(),Afe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)s=i[r],t[r]=a[s];return t},e.prototype.glyphsFor=function(t){var r,s,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(s=a[i])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))s=c[i],a[i]=s;return a},e.prototype.encode=function(t,r){var s,a,i,o,l,c,d,f,u,h,m,v,g,p,x;for(a in s=O9.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},x=s.charMap)m[(c=x[a]).old]=c.new;for(v in h=s.maxGlyphID,o)v in m||(m[v]=h++);return f=function(b){var y,j;for(y in j={},b)j[b[y]]=y;return j}(m),u=Object.keys(f).sort(function(b,y){return b-y}),g=function(){var b,y,j;for(j=[],b=0,y=u.length;b<y;b++)l=u[b],j.push(f[l]);return j}(),i=this.font.glyf.encode(o,g,m),d=this.font.loca.encode(i.offsets,g),p={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();Tt.API.PDFObject=function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)s=r[l],d.push(t.convert(s));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();const Efe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:sfe,AcroFormAppearance:wt,AcroFormButton:Jn,AcroFormCheckBox:wv,AcroFormChoiceField:ju,AcroFormComboBox:Nu,AcroFormEditBox:bv,AcroFormListBox:wu,AcroFormPasswordField:Nv,AcroFormPushButton:jv,AcroFormRadioButton:Su,AcroFormTextField:sd,GState:ug,ShadingPattern:Oc,TilingPattern:du,default:Tt,jsPDF:Tt},Symbol.toStringTag,{value:"Module"}));var Pfe={exports:{}};const Tfe=bR(Efe);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(s,a){e.exports=a(function(){try{return Tfe}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Vn<"u"?Vn:typeof window<"u"?window:typeof self<"u"?self:Vn,function(r){return function(){var s={172:function(l,c){var d=this&&this.__extends||function(){var h=function(m,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(g[x]=p[x])},h(m,v)};return function(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");h(m,v);function g(){this.constructor=m}m.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var f=function(){function h(m,v,g){this.table=v,this.pageNumber=v.pageNumber,this.pageCount=this.pageNumber,this.settings=v.settings,this.cursor=g,this.doc=m.getDocument()}return h}();c.HookData=f;var u=function(h){d(m,h);function m(v,g,p,x,b,y){var j=h.call(this,v,g,y)||this;return j.cell=p,j.row=x,j.column=b,j.section=x.section,j}return m}(f);c.CellHookData=u},340:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0});var f=d(4),u=d(136),h=d(744),m=d(776),v=d(664),g=d(972);function p(x){x.API.autoTable=function(){for(var b=[],y=0;y<arguments.length;y++)b[y]=arguments[y];var j;b.length===1?j=b[0]:(console.error("Use of deprecated autoTable initiation"),j=b[2]||{},j.columns=b[0],j.body=b[1]);var E=(0,m.parseInput)(this,j),C=(0,g.createTable)(this,E);return(0,v.drawTable)(this,C),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(b,y,j,E){(0,u.default)(b,y,j,E,this)},x.API.autoTableSetDefaults=function(b){return h.DocHandler.setDefaults(b,this),this},x.autoTableSetDefaults=function(b,y){h.DocHandler.setDefaults(b,y)},x.API.autoTableHtmlToJson=function(b,y){var j;if(y===void 0&&(y=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var E=new h.DocHandler(this),C=(0,f.parseHtml)(E,b,window,y,!1),S=C.head,N=C.body,_=((j=S[0])===null||j===void 0?void 0:j.map(function(I){return I.content}))||[];return{columns:_,rows:N,data:N}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var b=this.lastAutoTable;return b&&b.finalY?b.finalY:0},x.API.autoTableAddPageContent=function(b){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=b,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=p},136:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(f,u,h,m,v){m=m||{};var g=1.15,p=v.internal.scaleFactor,x=v.internal.getFontSize()/p,b=v.getLineHeightFactor?v.getLineHeightFactor():g,y=x*b,j=/\r\n|\r|\n/g,E="",C=1;if((m.valign==="middle"||m.valign==="bottom"||m.halign==="center"||m.halign==="right")&&(E=typeof f=="string"?f.split(j):f,C=E.length||1),h+=x*(2-g),m.valign==="middle"?h-=C/2*y:m.valign==="bottom"&&(h-=C*y),m.halign==="center"||m.halign==="right"){var S=x;if(m.halign==="center"&&(S*=.5),E&&C>=1){for(var N=0;N<E.length;N++)v.text(E[N],u-v.getStringUnitWidth(E[N])*S,h),h+=y;return v}u-=v.getStringUnitWidth(f)*S}return m.halign==="justify"?v.text(f,u,h,{maxWidth:m.maxWidth||100,align:"justify"}):v.text(f,u,h),v}c.default=d},420:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function d(v,g,p){p.applyStyles(g,!0);var x=Array.isArray(v)?v:[v],b=x.map(function(y){return p.getTextWidth(y)}).reduce(function(y,j){return Math.max(y,j)},0);return b}c.getStringWidth=d;function f(v,g,p,x){var b=g.settings.tableLineWidth,y=g.settings.tableLineColor;v.applyStyles({lineWidth:b,lineColor:y});var j=u(b,!1);j&&v.rect(p.x,p.y,g.getWidth(v.pageSize().width),x.y-p.y,j)}c.addTableBorder=f;function u(v,g){var p=v>0,x=g||g===0;return p&&x?"DF":p?"S":x?"F":null}c.getFillStyle=u;function h(v,g){var p,x,b,y;if(v=v||g,Array.isArray(v)){if(v.length>=4)return{top:v[0],right:v[1],bottom:v[2],left:v[3]};if(v.length===3)return{top:v[0],right:v[1],bottom:v[2],left:v[1]};if(v.length===2)return{top:v[0],right:v[1],bottom:v[0],left:v[1]};v.length===1?v=v[0]:v=g}return typeof v=="object"?(typeof v.vertical=="number"&&(v.top=v.vertical,v.bottom=v.vertical),typeof v.horizontal=="number"&&(v.right=v.horizontal,v.left=v.horizontal),{left:(p=v.left)!==null&&p!==void 0?p:g,top:(x=v.top)!==null&&x!==void 0?x:g,right:(b=v.right)!==null&&b!==void 0?b:g,bottom:(y=v.bottom)!==null&&y!==void 0?y:g}):(typeof v!="number"&&(v=g),{top:v,right:v,bottom:v,left:v})}c.parseSpacing=h;function m(v,g){var p=h(g.settings.margin,0);return v.pageSize().width-(p.left+p.right)}c.getPageAvailableWidth=m},796:function(l,c){var d=this&&this.__extends||function(){var m=function(v,g){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,x){p.__proto__=x}||function(p,x){for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(p[b]=x[b])},m(v,g)};return function(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");m(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var f=function(m){d(v,m);function v(g){var p=m.call(this)||this;return p._element=g,p}return v}(Array);c.HtmlRowInput=f;function u(m){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/m,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=u;function h(m){var v={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return v[m]}c.getTheme=h},903:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var f=d(420);function u(p,x,b,y,j){var E={},C=1.3333333333333333,S=m(x,function(U){return j.getComputedStyle(U).backgroundColor});S!=null&&(E.fillColor=S);var N=m(x,function(U){return j.getComputedStyle(U).color});N!=null&&(E.textColor=N);var _=g(y,b);_&&(E.cellPadding=_);var I="borderTopColor",T=C*b,A=y.borderTopWidth;if(y.borderBottomWidth===A&&y.borderRightWidth===A&&y.borderLeftWidth===A){var O=(parseFloat(A)||0)/T;O&&(E.lineWidth=O)}else E.lineWidth={top:(parseFloat(y.borderTopWidth)||0)/T,right:(parseFloat(y.borderRightWidth)||0)/T,bottom:(parseFloat(y.borderBottomWidth)||0)/T,left:(parseFloat(y.borderLeftWidth)||0)/T},E.lineWidth.top||(E.lineWidth.right?I="borderRightColor":E.lineWidth.bottom?I="borderBottomColor":E.lineWidth.left&&(I="borderLeftColor"));var D=m(x,function(U){return j.getComputedStyle(U)[I]});D!=null&&(E.lineColor=D);var $=["left","right","center","justify"];$.indexOf(y.textAlign)!==-1&&(E.halign=y.textAlign),$=["middle","bottom","top"],$.indexOf(y.verticalAlign)!==-1&&(E.valign=y.verticalAlign);var M=parseInt(y.fontSize||"");isNaN(M)||(E.fontSize=M/C);var R=h(y);R&&(E.fontStyle=R);var B=(y.fontFamily||"").toLowerCase();return p.indexOf(B)!==-1&&(E.font=B),E}c.parseCss=u;function h(p){var x="";return(p.fontWeight==="bold"||p.fontWeight==="bolder"||parseInt(p.fontWeight)>=700)&&(x="bold"),(p.fontStyle==="italic"||p.fontStyle==="oblique")&&(x+="italic"),x}function m(p,x){var b=v(p,x);if(!b)return null;var y=b.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!y||!Array.isArray(y))return null;var j=[parseInt(y[1]),parseInt(y[2]),parseInt(y[3])],E=parseInt(y[4]);return E===0||isNaN(j[0])||isNaN(j[1])||isNaN(j[2])?null:j}function v(p,x){var b=x(p);return b==="rgba(0, 0, 0, 0)"||b==="transparent"||b==="initial"||b==="inherit"?p.parentElement==null?null:v(p.parentElement,x):b}function g(p,x){var b=[p.paddingTop,p.paddingRight,p.paddingBottom,p.paddingLeft],y=96/(72/x),j=(parseInt(p.lineHeight)-parseInt(p.fontSize))/x/2,E=b.map(function(S){return parseInt(S||"0")/y}),C=(0,f.parseSpacing)(E,0);return j>C.top&&(C.top=j),j>C.bottom&&(C.bottom=j),C}},744:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var d={},f=function(){function u(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return u.setDefaults=function(h,m){m===void 0&&(m=null),m?m.__autoTableDocumentDefaults=h:d=h},u.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},u.prototype.applyStyles=function(h,m){var v,g,p;m===void 0&&(m=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var x=this.jsPDFDocument.internal.getFont(),b=x.fontStyle,y=x.fontName;if(h.font&&(y=h.font),h.fontStyle){b=h.fontStyle;var j=this.getFontList()[y];j&&j.indexOf(b)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(j[0]),b=j[0])}if(this.jsPDFDocument.setFont(y,b),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!m){var E=u.unifyColor(h.fillColor);E&&(v=this.jsPDFDocument).setFillColor.apply(v,E),E=u.unifyColor(h.textColor),E&&(g=this.jsPDFDocument).setTextColor.apply(g,E),E=u.unifyColor(h.lineColor),E&&(p=this.jsPDFDocument).setDrawColor.apply(p,E),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},u.prototype.splitTextToSize=function(h,m,v){return this.jsPDFDocument.splitTextToSize(h,m,v)},u.prototype.rect=function(h,m,v,g,p){return this.jsPDFDocument.rect(h,m,v,g,p)},u.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},u.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},u.prototype.getDocument=function(){return this.jsPDFDocument},u.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},u.prototype.addPage=function(){return this.jsPDFDocument.addPage()},u.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},u.prototype.getGlobalOptions=function(){return d||{}},u.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},u.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},u.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},u.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},u.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},u.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},u}();c.DocHandler=f},4:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var f=d(903),u=d(796);function h(g,p,x,b,y){var j,E;b===void 0&&(b=!1),y===void 0&&(y=!1);var C;typeof p=="string"?C=x.document.querySelector(p):C=p;var S=Object.keys(g.getFontList()),N=g.scaleFactor(),_=[],I=[],T=[];if(!C)return console.error("Html table could not be found with input: ",p),{head:_,body:I,foot:T};for(var A=0;A<C.rows.length;A++){var O=C.rows[A],D=(E=(j=O==null?void 0:O.parentElement)===null||j===void 0?void 0:j.tagName)===null||E===void 0?void 0:E.toLowerCase(),$=m(S,N,x,O,b,y);$&&(D==="thead"?_.push($):D==="tfoot"?T.push($):I.push($))}return{head:_,body:I,foot:T}}c.parseHtml=h;function m(g,p,x,b,y,j){for(var E=new u.HtmlRowInput(b),C=0;C<b.cells.length;C++){var S=b.cells[C],N=x.getComputedStyle(S);if(y||N.display!=="none"){var _=void 0;j&&(_=(0,f.parseCss)(g,S,p,N,x)),E.push({rowSpan:S.rowSpan,colSpan:S.colSpan,styles:_,_element:S,content:v(S)})}}var I=x.getComputedStyle(b);if(E.length>0&&(y||I.display!=="none"))return E}function v(g){var p=g.cloneNode(!0);return p.innerHTML=p.innerHTML.replace(/\n/g,"").replace(/ +/g," "),p.innerHTML=p.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),p.innerText||p.textContent||""}},776:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var f=d(4),u=d(356),h=d(420),m=d(744),v=d(792);function g(C,S){var N=new m.DocHandler(C),_=N.getDocumentOptions(),I=N.getGlobalOptions();(0,v.default)(N,I,_,S);var T=(0,u.assign)({},I,_,S),A;typeof window<"u"&&(A=window);var O=p(I,_,S),D=x(I,_,S),$=b(N,T),M=j(N,T,A);return{id:S.tableId,content:M,hooks:D,styles:O,settings:$}}c.parseInput=g;function p(C,S,N){for(var _={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},I=function(D){if(D==="columnStyles"){var $=C[D],M=S[D],R=N[D];_.columnStyles=(0,u.assign)({},$,M,R)}else{var B=[C,S,N],U=B.map(function(W){return W[D]||{}});_[D]=(0,u.assign)({},U[0],U[1],U[2])}},T=0,A=Object.keys(_);T<A.length;T++){var O=A[T];I(O)}return _}function x(C,S,N){for(var _=[C,S,N],I={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},T=0,A=_;T<A.length;T++){var O=A[T];O.didParseCell&&I.didParseCell.push(O.didParseCell),O.willDrawCell&&I.willDrawCell.push(O.willDrawCell),O.didDrawCell&&I.didDrawCell.push(O.didDrawCell),O.willDrawPage&&I.willDrawPage.push(O.willDrawPage),O.didDrawPage&&I.didDrawPage.push(O.didDrawPage)}return I}function b(C,S){var N,_,I,T,A,O,D,$,M,R,B,U,W=(0,h.parseSpacing)(S.margin,40/C.scaleFactor()),q=(N=y(C,S.startY))!==null&&N!==void 0?N:W.top,L;S.showFoot===!0?L="everyPage":S.showFoot===!1?L="never":L=(_=S.showFoot)!==null&&_!==void 0?_:"everyPage";var V;S.showHead===!0?V="everyPage":S.showHead===!1?V="never":V=(I=S.showHead)!==null&&I!==void 0?I:"everyPage";var G=(T=S.useCss)!==null&&T!==void 0?T:!1,Z=S.theme||(G?"plain":"striped"),te=!!S.horizontalPageBreak,he=(A=S.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(O=S.includeHiddenHtml)!==null&&O!==void 0?O:!1,useCss:G,theme:Z,startY:q,margin:W,pageBreak:(D=S.pageBreak)!==null&&D!==void 0?D:"auto",rowPageBreak:($=S.rowPageBreak)!==null&&$!==void 0?$:"auto",tableWidth:(M=S.tableWidth)!==null&&M!==void 0?M:"auto",showHead:V,showFoot:L,tableLineWidth:(R=S.tableLineWidth)!==null&&R!==void 0?R:0,tableLineColor:(B=S.tableLineColor)!==null&&B!==void 0?B:200,horizontalPageBreak:te,horizontalPageBreakRepeat:he,horizontalPageBreakBehaviour:(U=S.horizontalPageBreakBehaviour)!==null&&U!==void 0?U:"afterAllRows"}}function y(C,S){var N=C.getLastAutoTable(),_=C.scaleFactor(),I=C.pageNumber(),T=!1;if(N&&N.startPageNumber){var A=N.startPageNumber+N.pageNumber-1;T=A===I}return typeof S=="number"?S:(S==null||S===!1)&&T&&(N==null?void 0:N.finalY)!=null?N.finalY+20/_:null}function j(C,S,N){var _=S.head||[],I=S.body||[],T=S.foot||[];if(S.html){var A=S.includeHiddenHtml;if(N){var O=(0,f.parseHtml)(C,S.html,N,A,S.useCss)||{};_=O.head||_,I=O.body||_,T=O.foot||_}else console.error("Cannot parse html in non browser environment")}var D=S.columns||E(_,I,T);return{columns:D,head:_,body:I,foot:T}}function E(C,S,N){var _=C[0]||S[0]||N[0]||[],I=[];return Object.keys(_).filter(function(T){return T!=="_element"}).forEach(function(T){var A=1,O;Array.isArray(_)?O=_[parseInt(T)]:O=_[T],typeof O=="object"&&!Array.isArray(O)&&(A=(O==null?void 0:O.colSpan)||1);for(var D=0;D<A;D++){var $=void 0;Array.isArray(_)?$=I.length:$=T+(D>0?"_".concat(D):"");var M={dataKey:$};I.push(M)}}),I}},792:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(u,h,m,v){for(var g=function(y){y&&typeof y!="object"&&console.error("The options parameter should be of type object, is: "+typeof y),typeof y.extendWidth<"u"&&(y.tableWidth=y.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof y.margins<"u"&&(typeof y.margin>"u"&&(y.margin=y.margins),console.error("Use of deprecated option: margins, use margin instead.")),y.startY&&typeof y.startY!="number"&&(console.error("Invalid value for startY option",y.startY),delete y.startY),!y.didDrawPage&&(y.afterPageContent||y.beforePageContent||y.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),y.didDrawPage=function(T){u.applyStyles(u.userStyles),y.beforePageContent&&y.beforePageContent(T),u.applyStyles(u.userStyles),y.afterPageContent&&y.afterPageContent(T),u.applyStyles(u.userStyles),y.afterPageAdd&&T.pageNumber>1&&T.afterPageAdd(T),u.applyStyles(u.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(T){y[T]&&console.error('The "'.concat(T,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(T){var A=T[0],O=T[1];y[O]&&(console.error("Use of deprecated option ".concat(O,". Use ").concat(A," instead")),y[A]=y[O])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(T){var A=typeof T=="string"?T:T[0],O=typeof T=="string"?T:T[1];typeof y[A]<"u"&&(typeof y.styles[O]>"u"&&(y.styles[O]=y[A]),console.error("Use of deprecated option: "+A+", use the style "+O+" instead."))});for(var j=0,E=["styles","bodyStyles","headStyles","footStyles"];j<E.length;j++){var C=E[j];f(y[C]||{})}for(var S=y.columnStyles||{},N=0,_=Object.keys(S);N<_.length;N++){var I=_[N];f(S[I]||{})}},p=0,x=[h,m,v];p<x.length;p++){var b=x[p];g(b)}}c.default=d;function f(u){u.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),u.minCellHeight||(u.minCellHeight=u.rowHeight)):u.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),u.cellWidth||(u.cellWidth=u.columnWidth))}},260:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var f=d(796),u=d(172),h=d(420),m=function(){function x(b,y){this.pageNumber=1,this.pageCount=1,this.id=b.id,this.settings=b.settings,this.styles=b.styles,this.hooks=b.hooks,this.columns=y.columns,this.head=y.head,this.body=y.body,this.foot=y.foot}return x.prototype.getHeadHeight=function(b){return this.head.reduce(function(y,j){return y+j.getMaxCellHeight(b)},0)},x.prototype.getFootHeight=function(b){return this.foot.reduce(function(y,j){return y+j.getMaxCellHeight(b)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(b,y,j,E,C,S){for(var N=0,_=y;N<_.length;N++){var I=_[N],T=new u.CellHookData(b,this,j,E,C,S),A=I(T)===!1;if(j.text=Array.isArray(j.text)?j.text:[j.text],A)return!1}return!0},x.prototype.callEndPageHooks=function(b,y){b.applyStyles(b.userStyles);for(var j=0,E=this.hooks.didDrawPage;j<E.length;j++){var C=E[j];C(new u.HookData(b,this,y))}},x.prototype.callWillDrawPageHooks=function(b,y){for(var j=0,E=this.hooks.willDrawPage;j<E.length;j++){var C=E[j];C(new u.HookData(b,this,y))}},x.prototype.getWidth=function(b){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var y=this.columns.reduce(function(E,C){return E+C.wrappedWidth},0);return y}else{var j=this.settings.margin;return b-j.left-j.right}},x}();c.Table=m;var v=function(){function x(b,y,j,E,C){C===void 0&&(C=!1),this.height=0,this.raw=b,b instanceof f.HtmlRowInput&&(this.raw=b._element,this.element=b._element),this.index=y,this.section=j,this.cells=E,this.spansMultiplePages=C}return x.prototype.getMaxCellHeight=function(b){var y=this;return b.reduce(function(j,E){var C;return Math.max(j,((C=y.cells[E.index])===null||C===void 0?void 0:C.height)||0)},0)},x.prototype.hasRowSpan=function(b){var y=this;return b.filter(function(j){var E=y.cells[j.index];return E?E.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(b,y){return this.getMaxCellHeight(y)<=b},x.prototype.getMinimumRowHeight=function(b,y){var j=this;return b.reduce(function(E,C){var S=j.cells[C.index];if(!S)return 0;var N=y.getLineHeight(S.styles.fontSize),_=S.padding("vertical"),I=_+N;return I>E?I:E},0)},x}();c.Row=v;var g=function(){function x(b,y,j){var E,C;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=y,this.section=j,this.raw=b;var S=b;b!=null&&typeof b=="object"&&!Array.isArray(b)?(this.rowSpan=b.rowSpan||1,this.colSpan=b.colSpan||1,S=(C=(E=b.content)!==null&&E!==void 0?E:b.title)!==null&&C!==void 0?C:b,b._element&&(this.raw=b._element)):(this.rowSpan=1,this.colSpan=1);var N=S!=null?""+S:"",_=/\r\n|\r|\n/g;this.text=N.split(_)}return x.prototype.getTextPos=function(){var b;if(this.styles.valign==="top")b=this.y+this.padding("top");else if(this.styles.valign==="bottom")b=this.y+this.height-this.padding("bottom");else{var y=this.height-this.padding("vertical");b=this.y+y/2+this.padding("top")}var j;if(this.styles.halign==="right")j=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var E=this.width-this.padding("horizontal");j=this.x+E/2+this.padding("left")}else j=this.x+this.padding("left");return{x:j,y:b}},x.prototype.getContentHeight=function(b,y){y===void 0&&(y=1.15);var j=Array.isArray(this.text)?this.text.length:1,E=this.styles.fontSize/b*y,C=j*E+this.padding("vertical");return Math.max(C,this.styles.minCellHeight)},x.prototype.padding=function(b){var y=(0,h.parseSpacing)(this.styles.cellPadding,0);return b==="vertical"?y.top+y.bottom:b==="horizontal"?y.left+y.right:y[b]},x}();c.Cell=g;var p=function(){function x(b,y,j){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=b,this.raw=y,this.index=j}return x.prototype.getMaxCustomCellWidth=function(b){for(var y=0,j=0,E=b.allRows();j<E.length;j++){var C=E[j],S=C.cells[this.index];S&&typeof S.styles.cellWidth=="number"&&(y=Math.max(y,S.styles.cellWidth))}return y},x}();c.Column=p},356:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function d(f,u,h,m,v){if(f==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(f),p=1;p<arguments.length;p++){var x=arguments[p];if(x!=null)for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(g[b]=x[b])}return g}c.assign=d},972:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var f=d(744),u=d(260),h=d(324),m=d(796),v=d(356);function g(C,S){var N=new f.DocHandler(C),_=p(S,N.scaleFactor()),I=new u.Table(S,_);return(0,h.calculateWidths)(N,I),N.applyStyles(N.userStyles),I}c.createTable=g;function p(C,S){var N=C.content,_=j(N.columns);if(N.head.length===0){var I=b(_,"head");I&&N.head.push(I)}if(N.foot.length===0){var I=b(_,"foot");I&&N.foot.push(I)}var T=C.settings.theme,A=C.styles;return{columns:_,head:x("head",N.head,_,A,T,S),body:x("body",N.body,_,A,T,S),foot:x("foot",N.foot,_,A,T,S)}}function x(C,S,N,_,I,T){var A={},O=S.map(function(D,$){for(var M=0,R={},B=0,U=0,W=0,q=N;W<q.length;W++){var L=q[W];if(A[L.index]==null||A[L.index].left===0)if(U===0){var V=void 0;Array.isArray(D)?V=D[L.index-B-M]:V=D[L.dataKey];var G={};typeof V=="object"&&!Array.isArray(V)&&(G=(V==null?void 0:V.styles)||{});var Z=E(C,L,$,I,_,T,G),te=new u.Cell(V,Z,C);R[L.dataKey]=te,R[L.index]=te,U=te.colSpan-1,A[L.index]={left:te.rowSpan-1,times:U}}else U--,B++;else A[L.index].left--,U=A[L.index].times,M++}return new u.Row(D,$,C,R)});return O}function b(C,S){var N={};return C.forEach(function(_){if(_.raw!=null){var I=y(S,_.raw);I!=null&&(N[_.dataKey]=I)}}),Object.keys(N).length>0?N:null}function y(C,S){if(C==="head"){if(typeof S=="object")return S.header||S.title||null;if(typeof S=="string"||typeof S=="number")return S}else if(C==="foot"&&typeof S=="object")return S.footer;return null}function j(C){return C.map(function(S,N){var _,I,T;return typeof S=="object"?T=(I=(_=S.dataKey)!==null&&_!==void 0?_:S.key)!==null&&I!==void 0?I:N:T=N,new u.Column(T,S,N)})}function E(C,S,N,_,I,T,A){var O=(0,m.getTheme)(_),D;C==="head"?D=I.headStyles:C==="body"?D=I.bodyStyles:C==="foot"&&(D=I.footStyles);var $=(0,v.assign)({},O.table,O[C],I.styles,D),M=I.columnStyles[S.dataKey]||I.columnStyles[S.index]||{},R=C==="body"?M:{},B=C==="body"&&N%2===0?(0,v.assign)({},O.alternateRow,I.alternateRowStyles):{},U=(0,m.defaultStyles)(T),W=(0,v.assign)({},U,$,B,R);return(0,v.assign)(W,A)}},664:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var f=d(420),u=d(260),h=d(744),m=d(356),v=d(136),g=d(224);function p(M,R){var B=R.settings,U=B.startY,W=B.margin,q={x:W.left,y:U},L=R.getHeadHeight(R.columns)+R.getFootHeight(R.columns),V=U+W.bottom+L;if(B.pageBreak==="avoid"){var G=R.body,Z=G.reduce(function(me,oe){return me+oe.height},0);V+=Z}var te=new h.DocHandler(M);(B.pageBreak==="always"||B.startY!=null&&V>te.pageSize().height)&&($(te),q.y=W.top),R.callWillDrawPageHooks(te,q);var he=(0,m.assign)({},q);R.startPageNumber=te.pageNumber(),B.horizontalPageBreak?x(te,R,he,q):(te.applyStyles(te.userStyles),(B.showHead==="firstPage"||B.showHead==="everyPage")&&R.head.forEach(function(me){return I(te,R,me,q,R.columns)}),te.applyStyles(te.userStyles),R.body.forEach(function(me,oe){var we=oe===R.body.length-1;_(te,R,me,we,he,q,R.columns)}),te.applyStyles(te.userStyles),(B.showFoot==="lastPage"||B.showFoot==="everyPage")&&R.foot.forEach(function(me){return I(te,R,me,q,R.columns)})),(0,f.addTableBorder)(te,R,he,q),R.callEndPageHooks(te,q),R.finalY=q.y,M.lastAutoTable=R,M.previousAutoTable=R,M.autoTable&&(M.autoTable.previous=R),te.applyStyles(te.userStyles)}c.drawTable=p;function x(M,R,B,U){var W=(0,g.calculateAllColumnsCanFitInPage)(M,R),q=R.settings;if(q.horizontalPageBreakBehaviour==="afterAllRows")W.forEach(function(Z,te){M.applyStyles(M.userStyles),te>0?D(M,R,B,U,Z.columns,!0):b(M,R,U,Z.columns),y(M,R,B,U,Z.columns),E(M,R,U,Z.columns)});else for(var L=-1,V=W[0],G=function(){var Z=L;if(V){M.applyStyles(M.userStyles);var te=V.columns;L>=0?D(M,R,B,U,te,!0):b(M,R,U,te),Z=j(M,R,L+1,U,te),E(M,R,U,te)}var he=Z-L;W.slice(1).forEach(function(me){M.applyStyles(M.userStyles),D(M,R,B,U,me.columns,!0),j(M,R,L+1,U,me.columns,he),E(M,R,U,me.columns)}),L=Z};L<R.body.length-1;)G()}function b(M,R,B,U){var W=R.settings;M.applyStyles(M.userStyles),(W.showHead==="firstPage"||W.showHead==="everyPage")&&R.head.forEach(function(q){return I(M,R,q,B,U)})}function y(M,R,B,U,W){M.applyStyles(M.userStyles),R.body.forEach(function(q,L){var V=L===R.body.length-1;_(M,R,q,V,B,U,W)})}function j(M,R,B,U,W,q){M.applyStyles(M.userStyles),q=q??R.body.length;var L=Math.min(B+q,R.body.length),V=-1;return R.body.slice(B,L).forEach(function(G,Z){var te=B+Z===R.body.length-1,he=O(M,R,te,U);G.canEntireRowFit(he,W)&&(I(M,R,G,U,W),V=B+Z)}),V}function E(M,R,B,U){var W=R.settings;M.applyStyles(M.userStyles),(W.showFoot==="lastPage"||W.showFoot==="everyPage")&&R.foot.forEach(function(q){return I(M,R,q,B,U)})}function C(M,R,B){var U=B.getLineHeight(M.styles.fontSize),W=M.padding("vertical"),q=Math.floor((R-W)/U);return Math.max(0,q)}function S(M,R,B,U){var W={};M.spansMultiplePages=!0,M.height=0;for(var q=0,L=0,V=B.columns;L<V.length;L++){var G=V[L],Z=M.cells[G.index];if(Z){Array.isArray(Z.text)||(Z.text=[Z.text]);var te=new u.Cell(Z.raw,Z.styles,Z.section);te=(0,m.assign)(te,Z),te.text=[];var he=C(Z,R,U);Z.text.length>he&&(te.text=Z.text.splice(he,Z.text.length));var me=U.scaleFactor(),oe=U.getLineHeightFactor();Z.contentHeight=Z.getContentHeight(me,oe),Z.contentHeight>=R&&(Z.contentHeight=R,te.styles.minCellHeight-=R),Z.contentHeight>M.height&&(M.height=Z.contentHeight),te.contentHeight=te.getContentHeight(me,oe),te.contentHeight>q&&(q=te.contentHeight),W[G.index]=te}}var we=new u.Row(M.raw,-1,M.section,W,!0);we.height=q;for(var ve=0,ge=B.columns;ve<ge.length;ve++){var G=ge[ve],te=we.cells[G.index];te&&(te.height=we.height);var Z=M.cells[G.index];Z&&(Z.height=M.height)}return we}function N(M,R,B,U){var W=M.pageSize().height,q=U.settings.margin,L=q.top+q.bottom,V=W-L;R.section==="body"&&(V-=U.getHeadHeight(U.columns)+U.getFootHeight(U.columns));var G=R.getMinimumRowHeight(U.columns,M),Z=G<B;if(G>V)return console.error("Will not be able to print row ".concat(R.index," correctly since it's minimum height is larger than page height")),!0;if(!Z)return!1;var te=R.hasRowSpan(U.columns),he=R.getMaxCellHeight(U.columns)>V;return he?(te&&console.error("The content of row ".concat(R.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||U.settings.rowPageBreak==="avoid")}function _(M,R,B,U,W,q,L){var V=O(M,R,U,q);if(B.canEntireRowFit(V,L))I(M,R,B,q,L);else if(N(M,B,V,R)){var G=S(B,V,R,M);I(M,R,B,q,L),D(M,R,W,q,L),_(M,R,G,U,W,q,L)}else D(M,R,W,q,L),_(M,R,B,U,W,q,L)}function I(M,R,B,U,W){U.x=R.settings.margin.left;for(var q=0,L=W;q<L.length;q++){var V=L[q],G=B.cells[V.index];if(!G){U.x+=V.width;continue}M.applyStyles(G.styles),G.x=U.x,G.y=U.y;var Z=R.callCellHooks(M,R.hooks.willDrawCell,G,B,V,U);if(Z===!1){U.x+=V.width;continue}T(M,G,U);var te=G.getTextPos();(0,v.default)(G.text,te.x,te.y,{halign:G.styles.halign,valign:G.styles.valign,maxWidth:Math.ceil(G.width-G.padding("left")-G.padding("right"))},M.getDocument()),R.callCellHooks(M,R.hooks.didDrawCell,G,B,V,U),U.x+=V.width}U.y+=B.height}function T(M,R,B){var U=R.styles;if(M.getDocument().setFillColor(M.getDocument().getFillColor()),typeof U.lineWidth=="number"){var W=(0,f.getFillStyle)(U.lineWidth,U.fillColor);W&&M.rect(R.x,B.y,R.width,R.height,W)}else typeof U.lineWidth=="object"&&(U.fillColor&&M.rect(R.x,B.y,R.width,R.height,"F"),A(M,R,B,U.lineWidth))}function A(M,R,B,U){var W,q,L,V;U.top&&(W=B.x,q=B.y,L=B.x+R.width,V=B.y,U.right&&(L+=.5*U.right),U.left&&(W-=.5*U.left),G(U.top,W,q,L,V)),U.bottom&&(W=B.x,q=B.y+R.height,L=B.x+R.width,V=B.y+R.height,U.right&&(L+=.5*U.right),U.left&&(W-=.5*U.left),G(U.bottom,W,q,L,V)),U.left&&(W=B.x,q=B.y,L=B.x,V=B.y+R.height,U.top&&(q-=.5*U.top),U.bottom&&(V+=.5*U.bottom),G(U.left,W,q,L,V)),U.right&&(W=B.x+R.width,q=B.y,L=B.x+R.width,V=B.y+R.height,U.top&&(q-=.5*U.top),U.bottom&&(V+=.5*U.bottom),G(U.right,W,q,L,V));function G(Z,te,he,me,oe){M.getDocument().setLineWidth(Z),M.getDocument().line(te,he,me,oe,"S")}}function O(M,R,B,U){var W=R.settings.margin.bottom,q=R.settings.showFoot;return(q==="everyPage"||q==="lastPage"&&B)&&(W+=R.getFootHeight(R.columns)),M.pageSize().height-U.y-W}function D(M,R,B,U,W,q){W===void 0&&(W=[]),q===void 0&&(q=!1),M.applyStyles(M.userStyles),R.settings.showFoot==="everyPage"&&!q&&R.foot.forEach(function(V){return I(M,R,V,U,W)}),R.callEndPageHooks(M,U);var L=R.settings.margin;(0,f.addTableBorder)(M,R,B,U),$(M),R.pageNumber++,R.pageCount++,U.x=L.left,U.y=L.top,B.y=L.top,R.callWillDrawPageHooks(M,U),R.settings.showHead==="everyPage"&&(R.head.forEach(function(V){return I(M,R,V,U,W)}),M.applyStyles(M.userStyles))}c.addPage=D;function $(M){var R=M.pageNumber();M.setPage(R+1);var B=M.pageNumber();return B===R?(M.addPage(),!0):!1}},224:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var f=d(420);function u(m,v,g){var p;g===void 0&&(g={});var x=(0,f.getPageAvailableWidth)(m,v),b=new Map,y=[],j=[],E=[];v.settings.horizontalPageBreakRepeat,Array.isArray(v.settings.horizontalPageBreakRepeat)?E=v.settings.horizontalPageBreakRepeat:(typeof v.settings.horizontalPageBreakRepeat=="string"||typeof v.settings.horizontalPageBreakRepeat=="number")&&(E=[v.settings.horizontalPageBreakRepeat]),E.forEach(function(_){var I=v.columns.find(function(T){return T.dataKey===_||T.index===_});I&&!b.has(I.index)&&(b.set(I.index,!0),y.push(I.index),j.push(v.columns[I.index]),x-=I.wrappedWidth)});for(var C=!0,S=(p=g==null?void 0:g.start)!==null&&p!==void 0?p:0;S<v.columns.length;){if(b.has(S)){S++;continue}var N=v.columns[S].wrappedWidth;if(C||x>=N)C=!1,y.push(S),j.push(v.columns[S]),x-=N;else break;S++}return{colIndexes:y,columns:j,lastIndex:S-1}}function h(m,v){for(var g=[],p=0;p<v.columns.length;p++){var x=u(m,v,{start:p});x.columns.length&&(g.push(x),p=x.lastIndex)}return g}c.calculateAllColumnsCanFitInPage=h},324:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var f=d(420);function u(y,j){h(y,j);var E=[],C=0;j.columns.forEach(function(N){var _=N.getMaxCustomCellWidth(j);_?N.width=_:(N.width=N.wrappedWidth,E.push(N)),C+=N.width});var S=j.getWidth(y.pageSize().width)-C;S&&(S=m(E,S,function(N){return Math.max(N.minReadableWidth,N.minWidth)})),S&&(S=m(E,S,function(N){return N.minWidth})),S=Math.abs(S),!j.settings.horizontalPageBreak&&S>.1/y.scaleFactor()&&(S=S<1?S:Math.round(S),console.warn("Of the table content, ".concat(S," units width could not fit page"))),g(j),p(j,y),v(j)}c.calculateWidths=u;function h(y,j){var E=y.scaleFactor(),C=j.settings.horizontalPageBreak,S=(0,f.getPageAvailableWidth)(y,j);j.allRows().forEach(function(N){for(var _=0,I=j.columns;_<I.length;_++){var T=I[_],A=N.cells[T.index];if(A){var O=j.hooks.didParseCell;j.callCellHooks(y,O,A,N,T,null);var D=A.padding("horizontal");A.contentWidth=(0,f.getStringWidth)(A.text,A.styles,y)+D;var $=(0,f.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,y);if(A.minReadableWidth=$+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||C===!0)A.contentWidth>S?(A.minWidth=S,A.wrappedWidth=S):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var M=10/E;A.minWidth=A.styles.minCellWidth||M,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),j.allRows().forEach(function(N){for(var _=0,I=j.columns;_<I.length;_++){var T=I[_],A=N.cells[T.index];if(A&&A.colSpan===1)T.wrappedWidth=Math.max(T.wrappedWidth,A.wrappedWidth),T.minWidth=Math.max(T.minWidth,A.minWidth),T.minReadableWidth=Math.max(T.minReadableWidth,A.minReadableWidth);else{var O=j.styles.columnStyles[T.dataKey]||j.styles.columnStyles[T.index]||{},D=O.cellWidth||O.minCellWidth;D&&typeof D=="number"&&(T.minWidth=D,T.wrappedWidth=D)}A&&(A.colSpan>1&&!T.minWidth&&(T.minWidth=A.minWidth),A.colSpan>1&&!T.wrappedWidth&&(T.wrappedWidth=A.minWidth))}})}function m(y,j,E){for(var C=j,S=y.reduce(function(M,R){return M+R.wrappedWidth},0),N=0;N<y.length;N++){var _=y[N],I=_.wrappedWidth/S,T=C*I,A=_.width+T,O=E(_),D=A<O?O:A;j-=D-_.width,_.width=D}if(j=Math.round(j*1e10)/1e10,j){var $=y.filter(function(M){return j<0?M.width>E(M):!0});$.length&&(j=m($,j,E))}return j}c.resizeColumns=m;function v(y){for(var j={},E=1,C=y.allRows(),S=0;S<C.length;S++)for(var N=C[S],_=0,I=y.columns;_<I.length;_++){var T=I[_],A=j[T.index];if(E>1)E--,delete N.cells[T.index];else if(A)A.cell.height+=N.height,E=A.cell.colSpan,delete N.cells[T.index],A.left--,A.left<=1&&delete j[T.index];else{var O=N.cells[T.index];if(!O)continue;if(O.height=N.height,O.rowSpan>1){var D=C.length-S,$=O.rowSpan>D?D:O.rowSpan;j[T.index]={cell:O,left:$,row:N}}}}}function g(y){for(var j=y.allRows(),E=0;E<j.length;E++)for(var C=j[E],S=null,N=0,_=0,I=0;I<y.columns.length;I++){var T=y.columns[I];if(_-=1,_>1&&y.columns[I+1])N+=T.width,delete C.cells[T.index];else if(S){var A=S;delete C.cells[T.index],S=null,A.width=T.width+N}else{var A=C.cells[T.index];if(!A)continue;if(_=A.colSpan,N=0,A.colSpan>1){S=A,N+=T.width;continue}A.width=T.width+N}}}function p(y,j){for(var E={count:0,height:0},C=0,S=y.allRows();C<S.length;C++){for(var N=S[C],_=0,I=y.columns;_<I.length;_++){var T=I[_],A=N.cells[T.index];if(A){j.applyStyles(A.styles,!0);var O=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=j.splitTextToSize(A.text,O+1/j.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=x(A.text,O,A.styles,j,"...");else if(A.styles.overflow==="hidden")A.text=x(A.text,O,A.styles,j,"");else if(typeof A.styles.overflow=="function"){var D=A.styles.overflow(A.text,O);typeof D=="string"?A.text=[D]:A.text=D}A.contentHeight=A.getContentHeight(j.scaleFactor(),j.getLineHeightFactor());var $=A.contentHeight/A.rowSpan;A.rowSpan>1&&E.count*E.height<$*A.rowSpan?E={height:$,count:A.rowSpan}:E&&E.count>0&&E.height>$&&($=E.height),$>N.height&&(N.height=$)}}E.count--}}function x(y,j,E,C,S){return y.map(function(N){return b(N,j,E,C,S)})}c.ellipsize=x;function b(y,j,E,C,S){var N=1e4*C.scaleFactor();if(j=Math.ceil(j*N)/N,j>=(0,f.getStringWidth)(y,E,C))return y;for(;j<(0,f.getStringWidth)(y+S,E,C)&&!(y.length<=1);)y=y.substring(0,y.length-1);return y.trim()+S}},964:function(l){if(typeof r>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}l.exports=r}},a={};function i(l){var c=a[l];if(c!==void 0)return c.exports;var d=a[l]={exports:{}};return s[l].call(d.exports,d,d.exports,i),d.exports}var o={};return function(){var l=o;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var c=i(340),d=i(776),f=i(664),u=i(972),h=i(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return h.Table}});var m=i(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return m.CellHookData}});var v=i(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return v.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return v.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return v.Row}});function g(j){(0,c.default)(j)}l.applyPlugin=g;function p(j,E){var C=(0,d.parseInput)(j,E),S=(0,u.createTable)(j,C);(0,f.drawTable)(j,S)}function x(j,E){var C=(0,d.parseInput)(j,E);return(0,u.createTable)(j,C)}l.__createTable=x;function b(j,E){(0,f.drawTable)(j,E)}l.__drawTable=b;try{var y=i(964);y.jsPDF&&(y=y.jsPDF),g(y)}catch{}l.default=p}(),o}()})})(Pfe);function _fe({ticket:e,onClose:t,onEdit:r}){var m,v,g,p,x,b;const{toast:s}=At(),[a,i]=w.useState("details"),o=y=>{switch(y){case lr.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case lr.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case lr.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case lr.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case lr.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},l=y=>{switch(y){case rn.LOW:return"bg-green-50 text-green-700 border-green-200";case rn.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case rn.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case rn.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},c=y=>{switch(y){case"covered":return"Covered by Warranty";case"partial":return"Partially Covered";case"not_covered":return"Not Covered";case"extended":return"Extended Warranty";case"expired":return"Warranty Expired";default:return"Unknown"}},d=y=>{switch(y){case"covered":return"bg-green-50 text-green-700 border-green-200";case"partial":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"not_covered":return"bg-red-50 text-red-700 border-red-200";case"extended":return"bg-blue-50 text-blue-700 border-blue-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=(()=>{const y=e.parts.reduce((E,C)=>E+C.total,0),j=e.labor.reduce((E,C)=>E+C.total,0);return{partsTotal:y,laborTotal:j,grandTotal:y+j}})(),h=()=>{try{const y=new Tt;y.setFontSize(20),y.text("Service Ticket",105,15,{align:"center"}),y.setFontSize(12),y.text(`Ticket #: ${e.id}`,20,30),y.text(`Date: ${ct(e.createdAt)}`,20,40),y.text(`Customer: ${e.customerId}`,20,50),y.text(`Status: ${e.status.replace("_"," ")}`,20,60),y.setFontSize(16),y.text("Service Details",20,75),y.setFontSize(12),y.text(`Title: ${e.title}`,20,85);const j=y.splitTextToSize(e.description,170);if(y.text(j,20,95),e.parts.length>0&&(y.setFontSize(16),y.text("Parts",20,120),y.autoTable({startY:125,head:[["Part Number","Description","Quantity","Unit Cost","Total"]],body:e.parts.map(C=>[C.partNumber,C.description,C.quantity,_e(C.unitCost),_e(C.total)]),foot:[["","","","Parts Total:",_e(u.partsTotal)]]})),e.labor.length>0){const C=y.lastAutoTable.finalY||125;y.setFontSize(16),y.text("Labor",20,C+15),y.autoTable({startY:C+20,head:[["Description","Hours","Rate","Total"]],body:e.labor.map(S=>[S.description,S.hours,_e(S.rate),_e(S.total)]),foot:[["","","Labor Total:",_e(u.laborTotal)]]})}const E=y.lastAutoTable.finalY||125;if(y.setFontSize(14),y.text(`Grand Total: ${_e(u.grandTotal)}`,150,E+20,{align:"right"}),e.notes){y.setFontSize(16),y.text("Notes",20,E+35),y.setFontSize(12);const C=y.splitTextToSize(e.notes,170);y.text(C,20,E+45)}y.save(`service-ticket-${e.id}.pdf`),s({title:"PDF Generated",description:"Service ticket PDF has been downloaded"})}catch(y){console.error("Error generating PDF:",y),s({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:e.title}),n.jsxs(Fe,{children:["Service Ticket #",e.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>r(e),size:"sm",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Ticket"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{children:[n.jsxs(xr,{value:a,onValueChange:i,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"details",children:"Details"}),n.jsx(Qe,{value:"parts-labor",children:"Parts & Labor"}),n.jsx(Qe,{value:"notes",children:"Notes"})]}),n.jsxs(et,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Re,{className:He("ri-badge-status",o(e.status)),children:e.status.replace("_"," ").toUpperCase()}),n.jsxs(Re,{className:He("ri-badge-status",l(e.priority)),children:[e.priority.toUpperCase()," PRIORITY"]}),((m=e.customFields)==null?void 0:m.warrantyStatus)&&n.jsx(Re,{className:He("ri-badge-status",d(e.customFields.warrantyStatus)),children:c(e.customFields.warrantyStatus)}),((v=e.customFields)==null?void 0:v.customerAuthorization)&&n.jsx(Re,{className:"bg-green-50 text-green-700 border-green-200",children:"AUTHORIZED"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),n.jsx("p",{className:"font-medium",children:e.vehicleId||"No Vehicle"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsx("p",{className:"font-medium",children:e.assignedTo||"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),n.jsx("p",{className:"font-medium",children:ct(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"font-medium",children:e.scheduledDate?ct(e.scheduledDate):"Not scheduled"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Completion"}),n.jsx("p",{className:"font-medium",children:((g=e.customFields)==null?void 0:g.estimatedCompletionDate)||"Not specified"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.description})})]}),n.jsxs("div",{className:"p-3 bg-blue-50 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(fs,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"font-medium text-blue-700",children:"Customer Portal Access:"}),n.jsx("span",{className:"text-blue-700",children:((p=e.customFields)==null?void 0:p.customerPortalAccess)!==!1?"Enabled":"Disabled"})]}),n.jsx("p",{className:"text-sm text-blue-600 mt-1",children:((x=e.customFields)==null?void 0:x.customerPortalAccess)!==!1?"Customer can view this ticket in the portal":"Customer cannot view this ticket in the portal"})]})]}),n.jsxs(et,{value:"parts-labor",className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Parts"}),e.parts.length>0?n.jsxs("div",{className:"space-y-3",children:[e.parts.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:y.description}),n.jsx(Re,{variant:"outline",children:y.partNumber})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",y.quantity," × ",_e(y.unitCost)]})]}),n.jsx("div",{className:"font-bold",children:_e(y.total)})]},y.id)),n.jsx("div",{className:"flex justify-end p-2",children:n.jsxs("span",{className:"font-medium",children:["Parts Total: ",_e(u.partsTotal)]})})]}):n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{children:"No parts added to this service ticket"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Labor"}),e.labor.length>0?n.jsxs("div",{className:"space-y-3",children:[e.labor.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:y.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[y.hours," hours × ",_e(y.rate),"/hr"]})]}),n.jsx("div",{className:"font-bold",children:_e(y.total)})]},y.id)),n.jsx("div",{className:"flex justify-end p-2",children:n.jsxs("span",{className:"font-medium",children:["Labor Total: ",_e(u.laborTotal)]})})]}):n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{children:"No labor added to this service ticket"})})]}),n.jsx(ue,{className:"bg-muted/30",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Parts Total:"}),n.jsx("span",{children:_e(u.partsTotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Labor Total:"}),n.jsx("span",{children:_e(u.laborTotal)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Grand Total:"}),n.jsx("span",{children:_e(u.grandTotal)})]})]})})})]}),n.jsxs(et,{value:"notes",className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Customer Notes"}),e.notes?n.jsx("div",{className:"p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})}):n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{children:"No customer notes for this service ticket"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Technician Notes"}),(b=e.customFields)!=null&&b.technicianNotes?n.jsx("div",{className:"p-3 bg-yellow-50 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap text-yellow-800",children:e.customFields.technicianNotes})}):n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{children:"No technician notes for this service ticket"})})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Close"}),n.jsxs(J,{variant:"outline",onClick:h,children:[n.jsx(qu,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),n.jsxs(J,{onClick:()=>r(e),children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Ticket"]})]})]})]})})}function Ife({ticket:e,onClose:t}){var l;const r=c=>{switch(c){case lr.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case lr.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case lr.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case lr.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case lr.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},s=c=>{switch(c){case rn.LOW:return"bg-green-50 text-green-700 border-green-200";case rn.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case rn.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case rn.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=(()=>{const c=e.parts.reduce((f,u)=>f+u.total,0),d=e.labor.reduce((f,u)=>f+u.total,0);return{partsTotal:c,laborTotal:d,grandTotal:c+d}})(),o=()=>{try{const c=new Tt;c.setFontSize(20),c.text("Service Ticket",105,15,{align:"center"}),c.setFontSize(12),c.text(`Ticket #: ${e.id}`,20,30),c.text(`Date: ${ct(e.createdAt)}`,20,40),c.text(`Status: ${e.status.replace("_"," ")}`,20,50),c.setFontSize(16),c.text("Service Details",20,65),c.setFontSize(12),c.text(`Title: ${e.title}`,20,75);const d=c.splitTextToSize(e.description,170);if(c.text(d,20,85),e.parts.length>0&&(c.setFontSize(16),c.text("Parts",20,110),c.autoTable({startY:115,head:[["Description","Quantity","Unit Cost","Total"]],body:e.parts.map(u=>[u.description,u.quantity,_e(u.unitCost),_e(u.total)]),foot:[["","","Parts Total:",_e(i.partsTotal)]]})),e.labor.length>0){const u=c.lastAutoTable.finalY||115;c.setFontSize(16),c.text("Labor",20,u+15),c.autoTable({startY:u+20,head:[["Description","Hours","Rate","Total"]],body:e.labor.map(h=>[h.description,h.hours,_e(h.rate),_e(h.total)]),foot:[["","","Labor Total:",_e(i.laborTotal)]]})}const f=c.lastAutoTable.finalY||115;if(c.setFontSize(14),c.text(`Grand Total: ${_e(i.grandTotal)}`,150,f+20,{align:"right"}),e.notes){c.setFontSize(16),c.text("Notes",20,f+35),c.setFontSize(12);const u=c.splitTextToSize(e.notes,170);c.text(u,20,f+45)}c.save(`service-ticket-${e.id}.pdf`)}catch(c){console.error("Error generating PDF:",c)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Service Ticket"}),n.jsxs(Fe,{children:["Ticket #",e.id]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(iu,{className:"h-5 w-5 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-blue-700",children:"Customer Portal View"})]}),n.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"This is how your service ticket appears in the customer portal"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:e.title}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[n.jsx(Re,{className:He("ri-badge-status",r(e.status)),children:e.status.replace("_"," ").toUpperCase()}),n.jsxs(Re,{className:He("ri-badge-status",s(e.priority)),children:[e.priority.toUpperCase()," PRIORITY"]})]})]}),n.jsxs(xr,{defaultValue:"details",className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"details",children:"Details"}),n.jsx(Qe,{value:"parts-labor",children:"Parts & Labor"}),n.jsx(Qe,{value:"timeline",children:"Timeline"})]}),n.jsxs(et,{value:"details",className:"space-y-4",children:[n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Description"})}),n.jsx(fe,{children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.description})})]}),n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Schedule Information"})}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:ct(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"font-medium",children:e.scheduledDate?ct(e.scheduledDate):"Not scheduled"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Completion"}),n.jsx("p",{className:"font-medium",children:((l=e.customFields)==null?void 0:l.estimatedCompletionDate)||"Not specified"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Completed Date"}),n.jsx("p",{className:"font-medium",children:e.completedDate?ct(e.completedDate):"Not completed"})]})]})})]}),e.notes&&n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Notes"})}),n.jsx(fe,{children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]})]}),n.jsxs(et,{value:"parts-labor",className:"space-y-6",children:[n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Parts"})}),n.jsx(fe,{children:e.parts.length>0?n.jsxs("div",{className:"space-y-3",children:[e.parts.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:c.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",c.quantity," × ",_e(c.unitCost)]})]}),n.jsx("div",{className:"font-bold",children:_e(c.total)})]},c.id)),n.jsx("div",{className:"flex justify-end p-2",children:n.jsxs("span",{className:"font-medium",children:["Parts Total: ",_e(i.partsTotal)]})})]}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:n.jsx("p",{children:"No parts added to this service ticket"})})})]}),n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Labor"})}),n.jsx(fe,{children:e.labor.length>0?n.jsxs("div",{className:"space-y-3",children:[e.labor.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:c.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.hours," hours × ",_e(c.rate),"/hr"]})]}),n.jsx("div",{className:"font-bold",children:_e(c.total)})]},c.id)),n.jsx("div",{className:"flex justify-end p-2",children:n.jsxs("span",{className:"font-medium",children:["Labor Total: ",_e(i.laborTotal)]})})]}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:n.jsx("p",{children:"No labor added to this service ticket"})})})]}),n.jsx(ue,{className:"bg-muted/30",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Parts Total:"}),n.jsx("span",{children:_e(i.partsTotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Labor Total:"}),n.jsx("span",{children:_e(i.laborTotal)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Grand Total:"}),n.jsx("span",{children:_e(i.grandTotal)})]})]})})})]}),n.jsx(et,{value:"timeline",className:"space-y-4",children:n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Service Timeline"})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),n.jsx("div",{className:"font-medium",children:"Ticket Created"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ct(e.createdAt)})]}),e.status!==lr.OPEN&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),n.jsx("div",{className:"font-medium",children:"Work Started"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt.getTime()+864e5).toLocaleDateString()})]}),e.status===lr.WAITING_PARTS&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-orange-500"}),n.jsx("div",{className:"font-medium",children:"Waiting for Parts"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt.getTime()+1728e5).toLocaleDateString()})]}),e.status===lr.COMPLETED&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),n.jsx("div",{className:"font-medium",children:"Service Completed"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:e.completedDate?ct(e.completedDate):"Date not recorded"})]})]})})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Close"}),n.jsxs(J,{variant:"outline",onClick:o,children:[n.jsx(qu,{className:"h-4 w-4 mr-2"}),"Print PDF"]})]})]})})]})})}function kfe(){const{tickets:e,createTicket:t,updateTicket:r,deleteTicket:s,updateTicketStatus:a}=m9(),{toast:i}=At(),[o,l]=w.useState(""),[c,d]=w.useState("all"),[f,u]=w.useState("all"),[h,m]=w.useState(!1),[v,g]=w.useState(!1),[p,x]=w.useState(!1),[b,y]=w.useState(!1),[j,E]=w.useState(null),C=$=>{switch($){case lr.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case lr.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case lr.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case lr.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case lr.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=$=>{switch($){case rn.LOW:return"bg-green-50 text-green-700 border-green-200";case rn.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case rn.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case rn.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},N=e.filter($=>$.title.toLowerCase().includes(o.toLowerCase())||$.description.toLowerCase().includes(o.toLowerCase())||$.customerId.toLowerCase().includes(o.toLowerCase())||$.id.toLowerCase().includes(o.toLowerCase())).filter($=>c==="all"||$.status===c).filter($=>f==="all"||$.priority===f),_=()=>{E(null),m(!0)},I=$=>{E($),m(!0),g(!1)},T=$=>{E($),g(!0)},A=$=>{E($),x(!0)},O=async $=>{try{j?(await r(j.id,$),i({title:"Success",description:"Service ticket updated successfully"})):(await t($),i({title:"Success",description:"Service ticket created successfully"})),m(!1),E(null)}catch{i({title:"Error",description:`Failed to ${j?"update":"create"} service ticket`,variant:"destructive"})}},D=$=>{i({title:"Customer Added",description:`${$.firstName} ${$.lastName} has been added.`}),E(null),y(!1),m(!0)};return n.jsxs("div",{className:"space-y-8",children:[b&&n.jsx(Xu,{onClose:()=>y(!1),onSuccess:D}),h&&n.jsx(Aue,{ticket:j||void 0,onSave:O,onCancel:()=>{m(!1),E(null)}}),v&&j&&n.jsx(_fe,{ticket:j,onClose:()=>g(!1),onEdit:I}),p&&j&&n.jsx(Ife,{ticket:j,onClose:()=>x(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Service Operations"}),n.jsx("p",{className:"ri-page-description",children:"Manage service tickets and maintenance schedules"})]}),n.jsxs(J,{className:"shadow-sm",onClick:_,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Service Ticket"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Tickets"}),n.jsx(iu,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"All service requests"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),n.jsx(iu,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter($=>$.status===lr.IN_PROGRESS).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(sr,{className:"h-3 w-3 mr-1"}),"Currently working"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Waiting Parts"}),n.jsx(iu,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.filter($=>$.status===lr.WAITING_PARTS).length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(sr,{className:"h-3 w-3 mr-1"}),"Parts on order"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Revenue"}),n.jsx(It,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:_e(e.reduce(($,M)=>$+M.parts.reduce((R,B)=>R+B.total,0)+M.labor.reduce((R,B)=>R+B.total,0),0))}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Service revenue"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search service tickets...",value:o,onChange:$=>l($.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ve,{value:c,onValueChange:d,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:lr.OPEN,children:"Open"}),n.jsx(K,{value:lr.IN_PROGRESS,children:"In Progress"}),n.jsx(K,{value:lr.WAITING_PARTS,children:"Waiting Parts"}),n.jsx(K,{value:lr.COMPLETED,children:"Completed"}),n.jsx(K,{value:lr.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(Ve,{value:f,onValueChange:u,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Priority"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Priorities"}),n.jsx(K,{value:rn.LOW,children:"Low"}),n.jsx(K,{value:rn.MEDIUM,children:"Medium"}),n.jsx(K,{value:rn.HIGH,children:"High"}),n.jsx(K,{value:rn.URGENT,children:"Urgent"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Service Tickets"}),n.jsx(Fe,{children:"Manage service requests and maintenance schedules"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[N.map($=>{var M;return n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:$.title}),n.jsx(Re,{className:He("ri-badge-status",S($.priority)),children:$.priority.toUpperCase()}),n.jsx(Re,{className:He("ri-badge-status",C($.status)),children:$.status.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(fs,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:$.customerId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(fs,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Assigned:"}),n.jsx("span",{className:"ml-1",children:$.assignedTo||"Unassigned"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lr,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Scheduled:"}),n.jsx("span",{className:"ml-1",children:$.scheduledDate?ct($.scheduledDate):"Not scheduled"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(sr,{className:"h-3 w-3 mr-2 text-orange-500"}),n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{className:"ml-1",children:ct($.createdAt)})]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:$.description}),$.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",$.notes]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm",children:[n.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Parts:"})," ",_e($.parts.reduce((R,B)=>R+B.total,0))]}),n.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Labor:"})," ",_e($.labor.reduce((R,B)=>R+B.total,0))]}),n.jsxs("span",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded-md font-semibold",children:[n.jsx("span",{className:"font-medium",children:"Total:"})," ",_e($.parts.reduce((R,B)=>R+B.total,0)+$.labor.reduce((R,B)=>R+B.total,0))]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>T($),children:"View"}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I($),children:"Edit"}),((M=$.customFields)==null?void 0:M.customerPortalAccess)!==!1&&n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A($),children:"Customer View"})]})]},$.id)}),N.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(iu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No service tickets found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function Dfe(){return n.jsx(Ts,{children:n.jsx($t,{path:"/*",element:n.jsx(kfe,{})})})}function R9(){const[e,t]=w.useState([]),[r,s]=w.useState(!1);w.useEffect(()=>{a()},[]);const a=()=>{const p=pn("renter-insight-deliveries",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",status:Ut.SCHEDULED,scheduledDate:new Date("2024-01-25"),address:{street:"123 Main St",city:"Springfield",state:"IL",zipCode:"62701",country:"USA"},driver:"Driver-001",notes:"Customer prefers morning delivery",customFields:{contactPhone:"(555) 123-4567",contactEmail:"customer@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"10:00"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",status:Ut.IN_TRANSIT,scheduledDate:new Date("2024-01-20"),deliveredDate:void 0,address:{street:"456 Oak Ave",city:"Chicago",state:"IL",zipCode:"60601",country:"USA"},driver:"Driver-002",notes:"Call customer 30 minutes before arrival",customFields:{contactPhone:"(555) 987-6543",contactEmail:"customer2@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"14:30",departureTime:"2024-01-20T08:00:00",departureNotes:"Left dealership on schedule",customerNotified:"2024-01-20T08:15:00",notificationMethod:"SMS",etaUpdated:"2024-01-20T10:30:00"},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-20")}]);t(p)},i=p=>{Gr("renter-insight-deliveries",p)};return{deliveries:e,loading:r,getDeliveriesByCustomerId:p=>e.filter(x=>x.customerId===p),getDeliveriesByVehicleId:p=>e.filter(x=>x.vehicleId===p),getDeliveryById:p=>e.find(x=>x.id===p),createDelivery:async p=>{s(!0);try{const x={id:Math.random().toString(36).substr(2,9),customerId:p.customerId||"",vehicleId:p.vehicleId||"",status:p.status||Ut.SCHEDULED,scheduledDate:p.scheduledDate||new Date,deliveredDate:p.deliveredDate,address:p.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:p.driver||"",notes:p.notes||"",customFields:p.customFields||{},createdAt:new Date,updatedAt:new Date},b=[...e,x];return t(b),i(b),x}finally{s(!1)}},updateDelivery:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,...x,updatedAt:new Date}:y);t(b),i(b)},deleteDelivery:async p=>{const x=e.filter(b=>b.id!==p);t(x),i(x)},updateDeliveryStatus:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,status:x,deliveredDate:x===Ut.DELIVERED?new Date:y.deliveredDate,updatedAt:new Date}:y);t(b),i(b)},sendNotification:async(p,x,b)=>{if(!e.find(E=>E.id===p))return;const j=e.map(E=>E.id===p?{...E,customFields:{...E.customFields,customerNotified:new Date().toISOString(),notificationMethod:x==="sms"?"SMS":"Email",lastNotificationMessage:b},updatedAt:new Date}:E);return t(j),i(j),await new Promise(E=>setTimeout(E,1e3)),!0},updateETA:async(p,x)=>{if(!e.find(j=>j.id===p))return;const y=e.map(j=>j.id===p?{...j,customFields:{...j.customFields,estimatedArrival:x,etaUpdated:new Date().toISOString()},updatedAt:new Date}:j);t(y),i(y)},addDeliveryPhotos:async(p,x,b)=>{if(!e.find(C=>C.id===p))return;const j=x.map((C,S)=>({url:C,caption:b[S]||""})),E=e.map(C=>{var S,N;return C.id===p?{...C,customFields:{...C.customFields,deliveryPhotos:[...((S=C.customFields)==null?void 0:S.deliveryPhotos)||[],...x],photoDetails:[...((N=C.customFields)==null?void 0:N.photoDetails)||[],...j]},updatedAt:new Date}:C});t(E),i(E)}}}function $9({delivery:e,vehicles:t,customers:r,onSave:s,onCancel:a}){var b,y,j,E,C,S,N,_,I,T,A,O,D;const{toast:i}=At(),[o,l]=w.useState(!1),[c,d]=w.useState(!1),[f,u]=w.useState({customerId:"",vehicleId:"",status:Ut.SCHEDULED,scheduledDate:new Date,address:{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:"",notes:"",customFields:{contactPhone:"",contactEmail:"",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"",departureTime:"",departureNotes:"",deliveryNotes:"",deliveryPhotos:[]}});w.useEffect(()=>{var $,M,R,B,U,W,q,L,V;e&&u({...e,customFields:{...e.customFields,contactPhone:(($=e.customFields)==null?void 0:$.contactPhone)||"",contactEmail:((M=e.customFields)==null?void 0:M.contactEmail)||"",sendSMSUpdates:((R=e.customFields)==null?void 0:R.sendSMSUpdates)!==!1,sendEmailUpdates:((B=e.customFields)==null?void 0:B.sendEmailUpdates)!==!1,estimatedArrival:((U=e.customFields)==null?void 0:U.estimatedArrival)||"",departureTime:((W=e.customFields)==null?void 0:W.departureTime)||"",departureNotes:((q=e.customFields)==null?void 0:q.departureNotes)||"",deliveryNotes:((L=e.customFields)==null?void 0:L.deliveryNotes)||"",deliveryPhotos:((V=e.customFields)==null?void 0:V.deliveryPhotos)||[]}})},[e]);const{getRootProps:h,getInputProps:m}=ix({accept:{"image/*":[]},onDrop:$=>{const M=$.map(R=>URL.createObjectURL(R));u(R=>{var B;return{...R,customFields:{...R.customFields,deliveryPhotos:[...((B=R.customFields)==null?void 0:B.deliveryPhotos)||[],...M]}}}),i({title:"Photos Added",description:`Added ${$.length} delivery photos`})}}),v=$=>{$==="__add_new_customer__"?d(!0):u(M=>({...M,customerId:$}))},g=$=>{u(M=>({...M,customerId:$.id})),d(!1),i({title:"Customer Added",description:`${$.firstName} ${$.lastName} has been added as a customer.`})},p=async $=>{var M,R,B,U;if($.preventDefault(),!f.customerId||!f.vehicleId||!f.scheduledDate){i({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!((M=f.address)!=null&&M.street)||!((R=f.address)!=null&&R.city)||!((B=f.address)!=null&&B.state)||!((U=f.address)!=null&&U.zipCode)){i({title:"Validation Error",description:"Please provide a complete delivery address",variant:"destructive"});return}l(!0);try{await s(f),i({title:"Success",description:`Delivery ${e?"updated":"scheduled"} successfully`})}catch{i({title:"Error",description:`Failed to ${e?"update":"schedule"} delivery`,variant:"destructive"})}finally{l(!1)}},x=$=>{u(M=>{var R,B;return{...M,customFields:{...M.customFields,deliveryPhotos:((B=(R=M.customFields)==null?void 0:R.deliveryPhotos)==null?void 0:B.filter(U=>U!==$))||[]}}})};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&n.jsx(Xu,{onClose:()=>d(!1),onSuccess:g}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Delivery":"Schedule Delivery"}),n.jsx(Fe,{children:e?"Update delivery details":"Schedule a new delivery"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(Ve,{value:f.customerId,onValueChange:v,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsxs(Ue,{className:"z-50",children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>v("__add_new_customer__"),children:[n.jsx(Nt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),r.map($=>n.jsx(K,{value:$.id,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("span",{children:[$.firstName," ",$.lastName]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:$.phone})]})},$.id)),r.length===0&&n.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:"No customers found"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle *"}),n.jsxs(Ve,{value:f.vehicleId,onValueChange:$=>u(M=>({...M,vehicleId:$})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select vehicle"})}),n.jsx(Ue,{className:"z-50",children:t.map($=>n.jsxs(K,{value:$.id,children:[$.year," ",$.make," ",$.model]},$.id))})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"scheduledDate",children:"Scheduled Date *"}),n.jsx(Pe,{id:"scheduledDate",type:"date",value:f.scheduledDate?new Date(f.scheduledDate).toISOString().split("T")[0]:"",onChange:$=>u(M=>({...M,scheduledDate:$.target.value?new Date($.target.value):new Date}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"estimatedArrival",children:"Estimated Arrival Time"}),n.jsx(Pe,{id:"estimatedArrival",type:"time",value:((b=f.customFields)==null?void 0:b.estimatedArrival)||"",onChange:$=>u(M=>({...M,customFields:{...M.customFields,estimatedArrival:$.target.value}}))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(Ve,{value:f.status,onValueChange:$=>u(M=>({...M,status:$})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{className:"z-50",children:[n.jsx(K,{value:Ut.SCHEDULED,children:"Scheduled"}),n.jsx(K,{value:Ut.IN_TRANSIT,children:"In Transit"}),n.jsx(K,{value:Ut.DELIVERED,children:"Delivered"}),n.jsx(K,{value:Ut.CANCELLED,children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"driver",children:"Driver"}),n.jsx(Pe,{id:"driver",value:f.driver||"",onChange:$=>u(M=>({...M,driver:$.target.value})),placeholder:"Driver name"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Address"}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"street",children:"Street Address *"}),n.jsx(Pe,{id:"street",value:((y=f.address)==null?void 0:y.street)||"",onChange:$=>u(M=>({...M,address:{...M.address,street:$.target.value}})),placeholder:"123 Main St"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"city",children:"City *"}),n.jsx(Pe,{id:"city",value:((j=f.address)==null?void 0:j.city)||"",onChange:$=>u(M=>({...M,address:{...M.address,city:$.target.value}})),placeholder:"City"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"state",children:"State *"}),n.jsx(Pe,{id:"state",value:((E=f.address)==null?void 0:E.state)||"",onChange:$=>u(M=>({...M,address:{...M.address,state:$.target.value}})),placeholder:"State"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"zipCode",children:"Zip Code *"}),n.jsx(Pe,{id:"zipCode",value:((C=f.address)==null?void 0:C.zipCode)||"",onChange:$=>u(M=>({...M,address:{...M.address,zipCode:$.target.value}})),placeholder:"Zip Code"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"country",children:"Country"}),n.jsx(Pe,{id:"country",value:((S=f.address)==null?void 0:S.country)||"USA",onChange:$=>u(M=>({...M,address:{...M.address,country:$.target.value}})),placeholder:"Country"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"contactPhone",children:"Contact Phone"}),n.jsx(Pe,{id:"contactPhone",value:((N=f.customFields)==null?void 0:N.contactPhone)||"",onChange:$=>u(M=>({...M,customFields:{...M.customFields,contactPhone:$.target.value}})),placeholder:"(555) 123-4567"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"contactEmail",children:"Contact Email"}),n.jsx(Pe,{id:"contactEmail",type:"email",value:((_=f.customFields)==null?void 0:_.contactEmail)||"",onChange:$=>u(M=>({...M,customFields:{...M.customFields,contactEmail:$.target.value}})),placeholder:"customer@example.com"})]})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"sendSMSUpdates",checked:((I=f.customFields)==null?void 0:I.sendSMSUpdates)!==!1,onCheckedChange:$=>u(M=>({...M,customFields:{...M.customFields,sendSMSUpdates:!!$}}))}),n.jsx(ae,{htmlFor:"sendSMSUpdates",children:"Send SMS updates"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"sendEmailUpdates",checked:((T=f.customFields)==null?void 0:T.sendEmailUpdates)!==!1,onCheckedChange:$=>u(M=>({...M,customFields:{...M.customFields,sendEmailUpdates:!!$}}))}),n.jsx(ae,{htmlFor:"sendEmailUpdates",children:"Send email updates"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),(f.status===Ut.IN_TRANSIT||f.status===Ut.DELIVERED)&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"departureTime",children:"Departure Time"}),n.jsx(Pe,{id:"departureTime",type:"datetime-local",value:((A=f.customFields)==null?void 0:A.departureTime)||"",onChange:$=>u(M=>({...M,customFields:{...M.customFields,departureTime:$.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"departureNotes",children:"Departure Notes"}),n.jsx(Pe,{id:"departureNotes",value:((O=f.customFields)==null?void 0:O.departureNotes)||"",onChange:$=>u(M=>({...M,customFields:{...M.customFields,departureNotes:$.target.value}})),placeholder:"Notes about departure"})]})]}),f.status===Ut.DELIVERED&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"deliveredDate",children:"Delivery Date"}),n.jsx(Pe,{id:"deliveredDate",type:"datetime-local",value:f.deliveredDate?new Date(f.deliveredDate).toISOString().slice(0,16):"",onChange:$=>u(M=>({...M,deliveredDate:$.target.value?new Date($.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Delivery Notes"}),n.jsx(tr,{id:"notes",value:f.notes||"",onChange:$=>u(M=>({...M,notes:$.target.value})),placeholder:"Add any notes about this delivery",rows:3})]})]}),(f.status===Ut.DELIVERED||f.status===Ut.IN_TRANSIT)&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),n.jsxs("div",{...h(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[n.jsx("input",{...m()}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(Camera,{className:"h-8 w-8 mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop photos here, or click to select files"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload photos for delivery verification"})]})]}),((D=f.customFields)==null?void 0:D.deliveryPhotos)&&f.customFields.deliveryPhotos.length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:f.customFields.deliveryPhotos.map(($,M)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:$,alt:`Delivery photo ${M+1}`,className:"h-24 w-full object-cover rounded-md"}),n.jsx(J,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>x($),children:n.jsx(Bt,{className:"h-3 w-3"})})]},M))})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:a,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Scheduling..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Schedule"," Delivery"]})})]})]})})]})]})}function Ofe({delivery:e,onAddMilestone:t}){const s=(()=>{try{const a=[],i=e.customFields||{},o=c=>c?new Date(c):new Date;return a.push({id:"scheduled",title:"Delivery Scheduled",description:`Scheduled for ${ct(e.scheduledDate)}`,date:o(e.createdAt),icon:Lr}),[Ut.IN_TRANSIT,Ut.DELIVERED].includes(e.status)&&(a.push({id:"preparation",title:"Preparation Complete",description:"Vehicle prepared and ready for delivery",date:new Date(new Date(e.scheduledDate).getTime()-864e5),icon:Xr}),a.push({id:"in_transit",title:"In Transit",description:i.departureNotes||"Vehicle has left the dealership",date:o(i.departureTime),icon:va})),i.etaUpdated&&i.estimatedArrival&&a.push({id:"eta_update",title:"ETA Updated",description:`New estimated arrival: ${i.estimatedArrival}`,date:o(i.etaUpdated),icon:sr}),i.customerNotified&&a.push({id:"customer_notified",title:"Customer Notified",description:`${i.notificationMethod||"SMS"} notification sent to customer`,date:o(i.customerNotified),icon:ln}),e.status===Ut.DELIVERED&&(a.push({id:"arrived",title:"Arrived at Destination",description:"Vehicle arrived at delivery location",date:o(e.deliveredDate),icon:Hl}),a.push({id:"delivered",title:"Delivery Confirmed",description:i.deliveryNotes||"Delivery completed successfully",date:o(e.deliveredDate),icon:Xr}),Array.isArray(i.deliveryPhotos)&&i.deliveryPhotos.length>0&&a.push({id:"photos",title:"Delivery Photos",description:`${i.deliveryPhotos.length} photo(s) captured`,date:o(e.deliveredDate),icon:Tl})),Array.from(new Map(a.map(c=>[c.id,c])).values()).sort((c,d)=>c.date.getTime()-d.date.getTime())}catch(a){return console.error("Failed to generate milestones:",a),[]}})();return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(va,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Timeline"]}),n.jsx(Fe,{children:"Track the progress of this delivery"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"relative pl-8 space-y-8",children:[n.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-px bg-border"}),s.map((a,i)=>{var l;const o=a.icon;return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:He("absolute left-[-21px] w-6 h-6 rounded-full flex items-center justify-center","bg-primary text-primary-foreground"),children:n.jsx(o,{className:"h-3 w-3"})}),n.jsxs("div",{className:"mb-1 flex items-center",children:[n.jsx("h3",{className:"text-base font-semibold",children:a.title}),n.jsx(Re,{className:"ml-2 text-xs",variant:"outline",children:ct(a.date)})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),a.id==="photos"&&((l=e.customFields)==null?void 0:l.deliveryPhotos)&&n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:e.customFields.deliveryPhotos.map((c,d)=>n.jsx("img",{src:c,alt:`Delivery photo ${d+1}`,className:"h-20 w-full object-cover rounded-md"},d))})]},a.id)})]})})]})}function Lfe({delivery:e,vehicle:t,onClose:r,onEdit:s,onSendNotification:a}){var m,v,g,p,x,b,y,j,E;const{toast:i}=At(),[o,l]=w.useState("details"),[c,d]=w.useState(!1),f=C=>{switch(C){case Ut.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case Ut.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ut.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case Ut.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=async C=>{if(a){d(!0);try{await a(e.id,C),i({title:"Notification Sent",description:`${C==="sms"?"SMS":"Email"} notification sent successfully`})}catch{i({title:"Error",description:`Failed to send ${C==="sms"?"SMS":"email"} notification`,variant:"destructive"})}finally{d(!1)}}},h=()=>{var C,S;try{const N=new Tt;if(N.setFontSize(20),N.text("Delivery Information Sheet",105,15,{align:"center"}),N.setFontSize(12),N.text(`Delivery #: ${e.id}`,20,30),N.text(`Status: ${e.status.replace("_"," ")}`,20,40),N.text(`Scheduled Date: ${ct(e.scheduledDate)}`,20,50),N.setFontSize(16),N.text("Vehicle Information",20,65),N.setFontSize(12),t?(N.text(`Vehicle: ${t.year} ${t.make} ${t.model}`,20,75),N.text(`VIN: ${t.vin}`,20,85)):N.text(`Vehicle ID: ${e.vehicleId}`,20,75),N.setFontSize(16),N.text("Delivery Address",20,105),N.setFontSize(12),N.text(`${e.address.street}`,20,115),N.text(`${e.address.city}, ${e.address.state} ${e.address.zipCode}`,20,125),N.text(`${e.address.country}`,20,135),N.setFontSize(16),N.text("Contact Information",20,155),N.setFontSize(12),N.text(`Customer ID: ${e.customerId}`,20,165),(C=e.customFields)!=null&&C.contactPhone&&N.text(`Phone: ${e.customFields.contactPhone}`,20,175),(S=e.customFields)!=null&&S.contactEmail&&N.text(`Email: ${e.customFields.contactEmail}`,20,185),e.notes){N.setFontSize(16),N.text("Delivery Notes",20,205),N.setFontSize(12);const _=N.splitTextToSize(e.notes,170);N.text(_,20,215)}N.setFontSize(16),N.text("Signatures",20,245),N.setFontSize(12),N.text("Driver: _______________________________",20,255),N.text("Customer: _____________________________",20,270),N.save(`delivery-${e.id}.pdf`),i({title:"PDF Generated",description:"Delivery information sheet has been downloaded"})}catch(N){console.error("Error generating PDF:",N),i({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Delivery Details"}),n.jsxs(Fe,{children:["Delivery #",e.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>s(e),size:"sm",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{children:[n.jsxs(xr,{value:o,onValueChange:l,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"details",children:"Details"}),n.jsx(Qe,{value:"timeline",children:"Timeline"}),n.jsx(Qe,{value:"photos",children:"Photos"})]}),n.jsxs(et,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Re,{className:He("ri-badge-status",f(e.status)),children:e.status.replace("_"," ").toUpperCase()}),e.driver&&n.jsxs(Re,{variant:"outline",children:["Driver: ",e.driver]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),n.jsx("p",{className:"font-medium",children:t?`${t.year} ${t.make} ${t.model}`:e.vehicleId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"font-medium",children:ct(e.scheduledDate)})]}),e.deliveredDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivered Date"}),n.jsx("p",{className:"font-medium",children:ct(e.deliveredDate)})]}),((m=e.customFields)==null?void 0:m.estimatedArrival)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Arrival"}),n.jsx("p",{className:"font-medium",children:e.customFields.estimatedArrival})]}),((v=e.customFields)==null?void 0:v.departureTime)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Departure Time"}),n.jsx("p",{className:"font-medium",children:new Date(e.customFields.departureTime).toLocaleString()})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivery Address"}),n.jsxs("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:[n.jsx("p",{children:e.address.street}),n.jsxs("p",{children:[e.address.city,", ",e.address.state," ",e.address.zipCode]}),n.jsx("p",{children:e.address.country})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Contact Information"}),n.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[((g=e.customFields)==null?void 0:g.contactPhone)&&n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(wm,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:e.customFields.contactPhone})]}),((p=e.customFields)==null?void 0:p.contactEmail)&&n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(Qr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:e.customFields.contactEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notification Preferences"}),n.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["SMS Updates: ",((x=e.customFields)==null?void 0:x.sendSMSUpdates)!==!1?"Enabled":"Disabled"]})]}),n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(Qr,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Email Updates: ",((b=e.customFields)==null?void 0:b.sendEmailUpdates)!==!1?"Enabled":"Disabled"]})]})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]}),(e.status===Ut.SCHEDULED||e.status===Ut.IN_TRANSIT)&&n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>u("sms"),disabled:c||!((y=e.customFields)!=null&&y.contactPhone),children:[n.jsx(ln,{className:"h-4 w-4 mr-2"}),"Send SMS Update"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>u("email"),disabled:c||!((j=e.customFields)!=null&&j.contactEmail),children:[n.jsx(Qr,{className:"h-4 w-4 mr-2"}),"Send Email Update"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:h,children:[n.jsx(qu,{className:"h-4 w-4 mr-2"}),"Print Delivery Sheet"]})]})]}),n.jsx(et,{value:"timeline",children:n.jsx(Ofe,{delivery:e})}),n.jsxs(et,{value:"photos",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),(E=e.customFields)!=null&&E.deliveryPhotos&&e.customFields.deliveryPhotos.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.customFields.deliveryPhotos.map((C,S)=>n.jsx("div",{className:"overflow-hidden rounded-md",children:n.jsx("img",{src:C,alt:`Delivery photo ${S+1}`,className:"w-full h-auto object-cover"})},S))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Tl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No delivery photos available"}),e.status!==Ut.DELIVERED&&n.jsx("p",{className:"text-sm",children:"Photos will be added during delivery"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(J,{onClick:()=>s(e),children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]})]})]})]})})}function Rfe({delivery:e,onSend:t,onCancel:r}){var j,E,C;const{toast:s}=At(),[a,i]=w.useState(!1),[o,l]=w.useState("sms"),[c,d]=w.useState(""),[f,u]=w.useState(""),[h,m]=w.useState(""),v=((j=e.customer)==null?void 0:j.name)||"Customer",g=e.vehicle?`${e.vehicle.year||""} ${e.vehicle.make||""} ${e.vehicle.model||""}`.trim():"your Home/RV",p=!!((E=e.customer)!=null&&E.phone),x=!!((C=e.customer)!=null&&C.email),b=()=>{try{const S=f||new Date(e.scheduledDate).toLocaleDateString(),N=c||"the scheduled time";return o==="sms"?`Hi ${v}, your delivery of ${g} is scheduled for ${S} at ${N}. Reply HELP for assistance or STOP to opt out.`:`Dear ${v},

We're writing to confirm the delivery of ${g} scheduled for ${S} at ${N}.

If you have any questions or need to reschedule, please contact our delivery team.

Thank you,
The Delivery Team`}catch(S){return console.error("Failed to generate default message:",S),""}};w.useEffect(()=>{try{const S=b();m(S)}catch(S){console.error("Message generation error:",S)}},[o,c,f]);const y=async S=>{if(S.preventDefault(),!h.trim()){s({title:"Validation Error",description:"Please enter a message",variant:"destructive"});return}if(!f||!c){s({title:"Missing ETA",description:"Please select both a date and time for estimated arrival.",variant:"destructive"});return}if(o==="sms"&&!p){s({title:"Missing Phone Number",description:"Customer does not have a valid phone number for SMS.",variant:"destructive"});return}if(o==="email"&&!x){s({title:"Missing Email Address",description:"Customer does not have a valid email address.",variant:"destructive"});return}i(!0);try{await t(e.id,{type:o,estimatedArrival:`${f}T${c}`,message:h,updateDelivery:!0}),s({title:"Notification Sent",description:`${o.toUpperCase()} sent successfully.`}),r()}catch(N){console.error("Notification send failed:",N),s({title:"Error",description:`Failed to send ${o==="sms"?"SMS":"Email"} notification`,variant:"destructive"})}finally{i(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Send ETA Notification"}),n.jsx(Fe,{children:"Notify the customer about delivery status"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-sm mb-4 text-muted-foreground",children:["Delivering to: ",n.jsx("strong",{children:v}),n.jsx("br",{}),"Home/RV: ",n.jsx("strong",{children:g}),n.jsx("br",{}),o==="sms"&&!p&&n.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid phone number on file"}),o==="email"&&!x&&n.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid email address on file"})]}),n.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notificationType",children:"Notification Type"}),n.jsxs(Ve,{value:o,onValueChange:S=>l(S),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{className:"z-50",children:[n.jsx(K,{value:"sms",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(ln,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:"SMS"})]})}),n.jsx(K,{value:"email",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Qr,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:"Email"})]})})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"w-1/2",children:[n.jsx(ae,{htmlFor:"arrivalDate",children:"Arrival Date"}),n.jsx(Pe,{id:"arrivalDate",type:"date",value:f,onChange:S=>u(S.target.value)})]}),n.jsxs("div",{className:"w-1/2",children:[n.jsx(ae,{htmlFor:"arrivalTime",children:"Arrival Time"}),n.jsx(Pe,{id:"arrivalTime",type:"time",value:c,onChange:S=>d(S.target.value)})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"message",children:"Message"}),n.jsx(tr,{id:"message",value:h,onChange:S=>m(S.target.value),rows:o==="sms"?3:6,maxLength:o==="sms"?160:void 0}),o==="sms"&&n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[n.jsxs("span",{children:[h.length," characters"]}),n.jsxs("span",{children:[160-h.length," remaining"]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wo,{className:"h-4 w-4 mr-2"}),"Send Notification"]})})]})]})]})]})})}function $fe({onCapture:e,onCancel:t}){const{toast:r}=At(),[s,a]=w.useState(!1),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,f]=w.useState([]),[u,h]=w.useState(!1),m=w.useRef(null);w.useRef(null);const v=async j=>new Promise(E=>{const C=new Image;C.onload=()=>{const S=document.createElement("canvas"),N=S.getContext("2d"),_=800,I=_/C.width;S.width=_,S.height=C.height*I,N==null||N.drawImage(C,0,0,S.width,S.height),E(S.toDataURL("image/jpeg",.7))},C.src=j});ix({accept:{"image/*":[]},multiple:!0,maxFiles:10,onDrop:async j=>{try{const E=j.map(S=>new Promise(N=>{const _=new FileReader;_.onload=async()=>{const I=await v(_.result);N(I)},_.readAsDataURL(S)})),C=await Promise.all(E);o(S=>[...S,...C]),c(S=>[...S,...C.map(()=>"")]),f(S=>[...S,...C.map(()=>[])]),r({title:"Upload Successful",description:`${j.length} photo(s) added.`})}catch(E){console.error("File processing error:",E),r({title:"Upload Error",description:"An error occurred while processing files.",variant:"destructive"})}},onError:j=>{r({title:"Upload Failed",description:j.message,variant:"destructive"})}});const g=()=>{var j;(j=m.current)!=null&&j.srcObject&&(m.current.srcObject.getTracks().forEach(E=>E.stop()),m.current.srcObject=null,h(!1),r({title:"Camera Stopped"}))},p=(j,E)=>{c(C=>{const S=[...C];return S[j]=E,S})},x=(j,E)=>{const C=E.split(",").map(S=>S.trim()).filter(Boolean);f(S=>{const N=[...S];return N[j]=C,N})},b=j=>{o(E=>E.filter((C,S)=>S!==j)),c(E=>E.filter((C,S)=>S!==j)),f(E=>E.filter((C,S)=>S!==j))},y=async()=>{if(!i.length){r({title:"No Photos",description:"Please add or take at least one photo.",variant:"destructive"});return}a(!0);try{await e(i,l,d),r({title:"Photos Saved",description:`${i.length} photo(s) saved.`})}catch(j){console.error("Save error:",j),r({title:"Save Failed",description:"Unable to save photos.",variant:"destructive"})}finally{a(!1),g()}};return w.useEffect(()=>()=>{g()},[]),n.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex justify-center items-center p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(be,{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Delivery Photo Capture"}),n.jsx(Fe,{children:"Take or upload photos and add optional captions & tags"})]}),n.jsx(J,{size:"sm",variant:"ghost",onClick:t,children:n.jsx(Bt,{className:"w-4 h-4"})})]}),n.jsxs(fe,{className:"space-y-6",children:[i.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"font-semibold text-lg",children:["Photos (",i.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map((j,E)=>{var C;return n.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:j,className:"w-full h-40 object-cover rounded-md",alt:`Photo ${E+1}`}),n.jsx(J,{size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>b(E),children:n.jsx(Bt,{className:"w-4 h-4"})})]}),n.jsx(ae,{htmlFor:`caption-${E}`,children:"Caption"}),n.jsx(Pe,{id:`caption-${E}`,value:l[E]||"",placeholder:"Optional caption",onChange:S=>p(E,S.target.value)}),n.jsx(ae,{htmlFor:`tags-${E}`,children:"Tags (comma-separated)"}),n.jsx(Pe,{id:`tags-${E}`,value:((C=d[E])==null?void 0:C.join(", "))||"",placeholder:"e.g. front, side, receipt",onChange:S=>x(E,S.target.value)})]},E)})})]}),n.jsxs("div",{className:"flex justify-end space-x-2 border-t pt-4",children:[n.jsx(J,{onClick:t,variant:"outline",disabled:s,children:"Cancel"}),n.jsxs(J,{onClick:y,disabled:s||i.length===0,children:[s?n.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-white rounded-full mr-2"}):n.jsx(dj,{className:"w-4 h-4 mr-2"}),s?"Saving...":"Save Photos"]})]})]})]})})}function Ffe({delivery:e,className:t}){const r=w.useRef(null);return w.useEffect(()=>{if(r.current){const s=r.current;s.innerHTML="";const a=document.createElement("div");a.className="relative w-full h-full bg-muted/30 rounded-lg overflow-hidden",a.innerHTML=`
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-center">
            <div class="text-muted-foreground mb-2">Map would display here in a real application</div>
            <div class="flex flex-col items-center">
              <div class="text-sm font-medium">Delivery Address:</div>
              <div class="text-sm">${e.address.street}</div>
              <div class="text-sm">${e.address.city}, ${e.address.state} ${e.address.zipCode}</div>
            </div>
          </div>
        </div>
        
        <!-- Simulated map markers -->
        <div class="absolute bottom-4 right-4 bg-background p-2 rounded-md shadow-sm">
          <div class="flex items-center space-x-2 text-xs">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-green-500 mr-1"></div>
              <span>Origin</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-red-500 mr-1"></div>
              <span>Destination</span>
            </div>
            ${e.status==="in_transit"?`
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-blue-500 mr-1"></div>
                <span>Current Location</span>
              </div>
            `:""}
          </div>
        </div>
        
        <!-- Simulated route -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
          <svg width="200" height="100" viewBox="0 0 200 100">
            <path d="M20,80 Q100,20 180,80" stroke="#3b82f6" stroke-width="3" fill="none" stroke-dasharray="5,5" />
            ${e.status==="in_transit"?`
              <circle cx="100" cy="50" r="5" fill="#3b82f6" />
            `:""}
            <circle cx="20" cy="80" r="5" fill="#22c55e" />
            <circle cx="180" cy="80" r="5" fill="#ef4444" />
          </svg>
        </div>
      `,s.appendChild(a)}},[e]),n.jsxs(ue,{className:t,children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Hl,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),n.jsx(Fe,{children:"Track delivery location and route"})]}),n.jsx(fe,{children:n.jsx("div",{ref:r,className:"h-64 w-full",children:n.jsx("div",{className:"flex items-center justify-center h-full bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx(va,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading map..."})]})})})})]})}function Mfe({deliveries:e,onScheduleDelivery:t}){const r=e.length,s=e.filter(h=>h.status===Ut.SCHEDULED).length,a=e.filter(h=>h.status===Ut.IN_TRANSIT).length,i=e.filter(h=>h.status===Ut.DELIVERED).length,o=new Date,l=new Date(o.getTime()+7*24*60*60*1e3),c=e.filter(h=>h.status===Ut.SCHEDULED&&h.scheduledDate>=o&&h.scheduledDate<=l).sort((h,m)=>h.scheduledDate.getTime()-m.scheduledDate.getTime()),d=e.filter(h=>h.status===Ut.IN_TRANSIT).sort((h,m)=>h.scheduledDate.getTime()-m.scheduledDate.getTime()),f=new Date(o.getTime()-30*24*60*60*1e3),u=e.filter(h=>h.status===Ut.DELIVERED&&h.deliveredDate&&h.deliveredDate>=f).sort((h,m)=>{var v,g;return(((v=m.deliveredDate)==null?void 0:v.getTime())||0)-(((g=h.deliveredDate)==null?void 0:g.getTime())||0)}).slice(0,5);return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[{title:"Total Deliveries",count:r,icon:n.jsx(va,{className:"h-4 w-4 text-blue-800"}),description:"All time",bg:"bg-blue-100"},{title:"Scheduled",count:s,icon:n.jsx(Lr,{className:"h-4 w-4 text-yellow-700"}),description:"Upcoming deliveries",bg:"bg-yellow-100"},{title:"In Transit",count:a,icon:n.jsx(va,{className:"h-4 w-4 text-orange-700"}),description:"Currently in transit",bg:"bg-orange-100"},{title:"Completed",count:i,icon:n.jsx(Xr,{className:"h-4 w-4 text-green-700"}),description:"Successful deliveries",bg:"bg-green-100"}].map((h,m)=>n.jsxs(ue,{className:`${h.bg} border-0 shadow-sm`,children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:h.title}),h.icon]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:h.count}),n.jsxs("p",{className:"text-xs text-gray-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),h.description]})]})]},m))}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(je,{children:"Upcoming Deliveries"}),n.jsxs(J,{size:"sm",onClick:t,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Schedule"]})]}),n.jsx(Fe,{children:"Deliveries scheduled for the next 7 days"})]}),n.jsx(fe,{children:c.length>0?n.jsx("div",{className:"space-y-4",children:c.map(h=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(Lr,{className:"h-5 w-5 text-blue-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:ct(h.scheduledDate)})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",h.customerId]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[h.address.city,", ",h.address.state]})]})]},h.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Lr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No upcoming deliveries"}),n.jsx("p",{className:"text-sm",children:"Schedule a new delivery to get started"})]})})]}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"In-Transit Deliveries"}),n.jsx(Fe,{children:"Deliveries currently on the road"})]}),n.jsx(fe,{children:d.length>0?n.jsx("div",{className:"space-y-4",children:d.map(h=>{var m;return n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(va,{className:"h-5 w-5 text-yellow-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["ETA: ",((m=h.customFields)==null?void 0:m.estimatedArrival)||"Unknown"]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Driver: ",h.driver||"Unassigned"]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[h.address.city,", ",h.address.state]})]})]},h.id)})}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(va,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No deliveries in transit"})]})})]})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsx("div",{className:"md:col-span-2",children:d.length>0?n.jsx(Ffe,{delivery:d[0]}):n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Hl,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),n.jsx(Fe,{children:"No active deliveries to display"})]}),n.jsx(fe,{children:n.jsx("div",{className:"h-64 w-full flex items-center justify-center bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Hl,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"No active deliveries to track"})]})})})]})}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Recent Deliveries"}),n.jsx(Fe,{children:"Recently completed deliveries"})]}),n.jsx(fe,{children:u.length>0?n.jsx("div",{className:"space-y-4",children:u.map(h=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(Xr,{className:"h-5 w-5 text-green-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.deliveredDate?ct(h.deliveredDate):"Unknown"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",h.customerId]})]})]},h.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Xr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No recent deliveries"})]})})]})]})]})}function qk(){const{deliveries:e,createDelivery:t,updateDelivery:r,deleteDelivery:s,updateDeliveryStatus:a,sendNotification:i,updateETA:o,addDeliveryPhotos:l}=R9(),{vehicles:c}=wd(),{leads:d}=mo(),{toast:f}=At(),[u,h]=w.useState(""),[m,v]=w.useState("all"),[g,p]=w.useState(!1),[x,b]=w.useState(!1),[y,j]=w.useState(!1),[E,C]=w.useState(!1),[S,N]=w.useState(null),_=B=>{switch(B){case Ut.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case Ut.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ut.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case Ut.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},I=e.filter(B=>B.id.toLowerCase().includes(u.toLowerCase())||B.customerId.toLowerCase().includes(u.toLowerCase())||B.address.city.toLowerCase().includes(u.toLowerCase())).filter(B=>m==="all"||B.status===m),T=()=>{N(null),p(!0)},A=B=>{N(B),p(!0),b(!1)},O=B=>{N(B),b(!0)},D=async B=>{try{S?(await r(S.id,B),f({title:"Success",description:"Delivery updated successfully"})):(await t(B),f({title:"Success",description:"Delivery scheduled successfully"})),p(!1),N(null)}catch{f({title:"Error",description:`Failed to ${S?"update":"schedule"} delivery`,variant:"destructive"})}},$=async(B,U)=>{try{return U.estimatedArrival&&await o(B,U.estimatedArrival),await i(B,U.type,U.message),!0}catch(W){throw console.error("Error sending notification:",W),W}},M=async(B,U)=>{if(S)try{await l(S.id,B,U),S.status===Ut.IN_TRANSIT&&await a(S.id,Ut.DELIVERED),C(!1),f({title:"Photos Added",description:`${B.length} photos added to delivery`})}catch{f({title:"Error",description:"Failed to add photos",variant:"destructive"})}},R=B=>c.find(U=>U.id===B);return n.jsxs("div",{className:"space-y-8",children:[g&&n.jsx($9,{delivery:S||void 0,vehicles:c,customers:d,onSave:D,onCancel:()=>{p(!1),N(null)}}),x&&S&&n.jsx(Lfe,{delivery:S,vehicle:R(S.vehicleId),onClose:()=>b(!1),onEdit:A,onSendNotification:async(B,U)=>{b(!1),j(!0)}}),y&&S&&n.jsx(Rfe,{delivery:S,onSend:$,onCancel:()=>{j(!1),b(!0)}}),E&&S&&n.jsx($fe,{onCapture:M,onCancel:()=>{C(!1),b(!0)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Delivery Tracker"}),n.jsx("p",{className:"ri-page-description",children:"Track vehicle deliveries and logistics"})]}),n.jsxs(J,{className:"shadow-sm",onClick:T,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Schedule Delivery"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Deliveries"}),n.jsx(va,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"All deliveries"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Scheduled"}),n.jsx(va,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.filter(B=>B.status===Ut.SCHEDULED).length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lr,{className:"h-3 w-3 mr-1"}),"Upcoming deliveries"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"In Transit"}),n.jsx(va,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(B=>B.status===Ut.IN_TRANSIT).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(va,{className:"h-3 w-3 mr-1"}),"On the road"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Delivered"}),n.jsx(va,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(B=>B.status===Ut.DELIVERED).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Completed"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Notifications"}),n.jsx(ln,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.filter(B=>{var U;return(U=B.customFields)==null?void 0:U.customerNotified}).length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(ln,{className:"h-3 w-3 mr-1"}),"Sent to customers"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search deliveries...",value:u,onChange:B=>h(B.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("select",{value:m,onChange:B=>v(B.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:Ut.SCHEDULED,children:"Scheduled"}),n.jsx("option",{value:Ut.IN_TRANSIT,children:"In Transit"}),n.jsx("option",{value:Ut.DELIVERED,children:"Delivered"}),n.jsx("option",{value:Ut.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Deliveries"}),n.jsx(Fe,{children:"Track and manage vehicle deliveries"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[I.map(B=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Delivery #",B.id]}),n.jsx(Re,{className:He("ri-badge-status",_(B.status)),children:B.status.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(fs,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:B.customerId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(fs,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Driver:"}),n.jsx("span",{className:"ml-1",children:B.driver||"Not assigned"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lr,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Scheduled:"}),n.jsx("span",{className:"ml-1",children:ct(B.scheduledDate)})]}),B.deliveredDate&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lr,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Delivered:"}),n.jsx("span",{className:"ml-1",children:ct(B.deliveredDate)})]})]}),n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"flex items-start bg-muted/30 p-2 rounded-md",children:[n.jsx(Hl,{className:"h-3 w-3 mr-2 mt-0.5 text-red-500"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[B.address.street,", ",B.address.city,", ",B.address.state," ",B.address.zipCode]})]}),B.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-2 bg-blue-50 p-2 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",B.notes]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>O(B),children:[n.jsx(Wl,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(B),children:"Edit"}),B.status===Ut.IN_TRANSIT&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{N(B),C(!0)},children:[n.jsx(Tl,{className:"h-3 w-3 mr-1"}),"Photos"]}),(B.status===Ut.SCHEDULED||B.status===Ut.IN_TRANSIT)&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{N(B),j(!0)},children:[n.jsx(ln,{className:"h-3 w-3 mr-1"}),"Notify"]})]})]},B.id)),I.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(va,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No deliveries found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function Bfe(){const{deliveries:e}=R9(),[t,r]=w.useState(!1);return n.jsxs(n.Fragment,{children:[t&&n.jsx($9,{vehicles:[],customers:[],onSave:async()=>{},onCancel:()=>r(!1)}),n.jsx(Mfe,{deliveries:e,onScheduleDelivery:()=>r(!0)})]})}function zfe(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(Bfe,{})}),n.jsx($t,{path:"/list",element:n.jsx(qk,{})}),n.jsx($t,{path:"/*",element:n.jsx(qk,{})})]})}var hn=(e=>(e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.APPROVED="approved",e.REJECTED="rejected",e))(hn||{}),fr=(e=>(e.PENDING="pending",e.PASSED="passed",e.FAILED="failed",e.NA="na",e))(fr||{}),Ns=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(Ns||{}),Vy=(e=>(e.OPEN="open",e.IN_PROGRESS="in_progress",e.RESOLVED="resolved",e.VERIFIED="verified",e))(Vy||{}),uu=(e=>(e.INSPECTOR="inspector",e.MANAGER="manager",e.QUALITY_CONTROL="quality_control",e))(uu||{});function Ufe(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState(!1);w.useEffect(()=>{o()},[]);const o=()=>{const T=pn("renter-insight-pdi-templates",[{id:"1",name:"RV Pre-Delivery Inspection",description:"Standard PDI checklist for recreational vehicles",vehicleType:vt.RV,isActive:!0,sections:[{id:"1-1",templateId:"1",name:"Exterior",description:"Exterior inspection items",orderIndex:1,items:[{id:"1-1-1",sectionId:"1-1",name:"Exterior Body Condition",description:"Check for scratches, dents, or damage",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-1-2",sectionId:"1-1",name:"Roof Inspection",description:"Check roof seals, vents, and AC units",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")},{id:"1-1-3",sectionId:"1-1",name:"Exterior Photos",description:"Take photos of all sides of the vehicle",itemType:"photo",isRequired:!0,orderIndex:3,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")},{id:"1-2",templateId:"1",name:"Interior",description:"Interior inspection items",orderIndex:2,items:[{id:"1-2-1",sectionId:"1-2",name:"Interior Cleanliness",description:"Verify interior is clean and free of debris",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-2-2",sectionId:"1-2",name:"Furniture Condition",description:"Check all furniture for damage or defects",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Motorhome Pre-Delivery Inspection",description:"Comprehensive PDI checklist for motorhomes",vehicleType:vt.MOTORHOME,isActive:!0,sections:[],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),A=pn("renter-insight-pdi-inspections",[{id:"1",templateId:"1",vehicleId:"1",inspectorId:"user-001",status:hn.IN_PROGRESS,startedAt:new Date("2024-01-15"),notes:"Initial inspection for new RV",items:[{id:"1-1",inspectionId:"1",templateItemId:"1-1-1",status:fr.PASSED,notes:"No exterior damage found",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"1-2",inspectionId:"1",templateItemId:"1-1-2",status:fr.FAILED,notes:"Roof seal damaged near AC unit",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],defects:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",title:"Roof Seal Damage",description:"Damaged roof seal near AC unit on passenger side",severity:Ns.MEDIUM,status:Vy.OPEN,assignedTo:"user-002",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],photos:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",defectId:"1-1",url:"https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg",caption:"Damaged roof seal",createdAt:new Date("2024-01-15")}],signoffs:[],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);t(T),s(A)},l=T=>{Gr("renter-insight-pdi-templates",T)},c=T=>{Gr("renter-insight-pdi-inspections",T)};return{templates:e,inspections:r,loading:a,getTemplatesByVehicleType:T=>e.filter(A=>A.vehicleType===T&&A.isActive),getTemplateById:T=>e.find(A=>A.id===T),createTemplate:async T=>{i(!0);try{const A={id:Math.random().toString(36).substr(2,9),name:T.name||"",description:T.description||"",vehicleType:T.vehicleType||vt.RV,isActive:T.isActive??!0,sections:T.sections||[],createdAt:new Date,updatedAt:new Date},O=[...e,A];return t(O),l(O),A}finally{i(!1)}},updateTemplate:async(T,A)=>{const O=e.map(D=>D.id===T?{...D,...A,updatedAt:new Date}:D);t(O),l(O)},deleteTemplate:async T=>{const A=e.filter(O=>O.id!==T);t(A),l(A)},createTemplateSection:async(T,A)=>{const O=e.find(R=>R.id===T);if(!O)return null;const D={id:Math.random().toString(36).substr(2,9),templateId:T,name:A.name||"",description:A.description||"",orderIndex:A.orderIndex||O.sections.length+1,items:A.items||[],createdAt:new Date},$={...O,sections:[...O.sections,D],updatedAt:new Date},M=e.map(R=>R.id===T?$:R);return t(M),l(M),D},createTemplateItem:async(T,A)=>{const O=e.findIndex(L=>L.sections.some(V=>V.id===T));if(O===-1)return null;const D=e[O],$=D.sections.findIndex(L=>L.id===T);if($===-1)return null;const M=D.sections[$],R={id:Math.random().toString(36).substr(2,9),sectionId:T,name:A.name||"",description:A.description||"",itemType:A.itemType||"checkbox",isRequired:A.isRequired??!0,orderIndex:A.orderIndex||M.items.length+1,createdAt:new Date},B={...M,items:[...M.items,R]},U=[...D.sections];U[$]=B;const W={...D,sections:U,updatedAt:new Date},q=[...e];return q[O]=W,t(q),l(q),R},getInspectionsByVehicleId:T=>r.filter(A=>A.vehicleId===T),getInspectionById:T=>r.find(A=>A.id===T),createInspection:async T=>{i(!0);try{const A=e.find(M=>M.id===T.templateId);if(!A)throw new Error("Template not found");const O=[];A.sections.forEach(M=>{M.items.forEach(R=>{O.push({id:Math.random().toString(36).substr(2,9),inspectionId:"",templateItemId:R.id,templateItem:R,status:fr.PENDING,createdAt:new Date,updatedAt:new Date})})});const D={id:Math.random().toString(36).substr(2,9),templateId:T.templateId||"",template:A||void 0,vehicleId:T.vehicleId||"",inspectorId:T.inspectorId||"",status:hn.IN_PROGRESS,startedAt:new Date,notes:T.notes||"",items:[],defects:[],photos:[],signoffs:[],createdAt:new Date,updatedAt:new Date};O.forEach(M=>{M.inspectionId=D.id}),D.items=O;const $=[...r,D];return s($),c($),D}finally{i(!1)}},updateInspection:async(T,A)=>{const O=r.map(D=>D.id===T?{...D,...A,updatedAt:new Date}:D);s(O),c(O)},updateInspectionItem:async(T,A,O)=>{const D=r.findIndex(W=>W.id===T);if(D===-1)return;const $=r[D],M=$.items.findIndex(W=>W.id===A);if(M===-1)return;const R=[...$.items];R[M]={...R[M],...O,updatedAt:new Date};const B={...$,items:R,updatedAt:new Date},U=[...r];U[D]=B,s(U),c(U)},completeInspection:async(T,A)=>{const O=r.findIndex(B=>B.id===T);if(O===-1)return;const D=r[O];if(!D.items.every(B=>{const U=e.flatMap(W=>W.sections).flatMap(W=>W.items).find(W=>W.id===B.templateItemId);return!(U!=null&&U.isRequired)||B.status!==fr.PENDING}))throw new Error("All required items must be completed");const M={...D,status:hn.COMPLETED,completedAt:new Date,notes:A||D.notes,updatedAt:new Date},R=[...r];R[O]=M,s(R),c(R)},createDefect:async(T,A)=>{const O=r.findIndex(B=>B.id===T);if(O===-1)return null;const D=r[O],$={id:Math.random().toString(36).substr(2,9),inspectionId:T,inspectionItemId:A.inspectionItemId,title:A.title||"",description:A.description||"",severity:A.severity||Ns.MEDIUM,status:Vy.OPEN,assignedTo:A.assignedTo,photos:[],createdAt:new Date,updatedAt:new Date},M={...D,defects:[...D.defects,$],updatedAt:new Date},R=[...r];return R[O]=M,s(R),c(R),$},updateDefect:async(T,A,O)=>{const D=r.findIndex(W=>W.id===T);if(D===-1)return;const $=r[D],M=$.defects.findIndex(W=>W.id===A);if(M===-1)return;const R=[...$.defects];R[M]={...R[M],...O,updatedAt:new Date};const B={...$,defects:R,updatedAt:new Date},U=[...r];U[D]=B,s(U),c(U)},resolveDefect:async(T,A,O)=>{const D=r.findIndex(W=>W.id===T);if(D===-1)return;const $=r[D],M=$.defects.findIndex(W=>W.id===A);if(M===-1)return;const R=[...$.defects];R[M]={...R[M],status:Vy.RESOLVED,resolvedAt:new Date,resolutionNotes:O,updatedAt:new Date};const B={...$,defects:R,updatedAt:new Date},U=[...r];U[D]=B,s(U),c(U)},addPhoto:async(T,A)=>{const O=r.findIndex(B=>B.id===T);if(O===-1)return null;const D=r[O],$={id:Math.random().toString(36).substr(2,9),inspectionId:T,inspectionItemId:A.inspectionItemId,defectId:A.defectId,url:A.url||"",caption:A.caption,createdAt:new Date},M={...D,photos:[...D.photos,$],updatedAt:new Date},R=[...r];return R[O]=M,s(R),c(R),$},addSignoff:async(T,A)=>{const O=r.findIndex(U=>U.id===T);if(O===-1)return null;const D=r[O],$={id:Math.random().toString(36).substr(2,9),inspectionId:T,userId:A.userId||"",role:A.role||uu.INSPECTOR,signatureUrl:A.signatureUrl,notes:A.notes,signedAt:new Date,createdAt:new Date};let M=D.status;A.role===uu.MANAGER&&(M=hn.APPROVED);const R={...D,signoffs:[...D.signoffs,$],status:M,updatedAt:new Date},B=[...r];return B[O]=R,s(B),c(B),$}}}function Vfe({templates:e,onCreateTemplate:t,onEditTemplate:r,onDeleteTemplate:s,onDuplicateTemplate:a,onViewTemplate:i}){const[o,l]=w.useState(""),[c,d]=w.useState("all"),f=e.filter(h=>{var g;const m=h.name.toLowerCase().includes(o.toLowerCase())||((g=h.description)==null?void 0:g.toLowerCase().includes(o.toLowerCase())),v=c==="all"||h.vehicleType===c;return m&&v}),u=h=>h.replace("_"," ").toUpperCase();return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search templates...",value:o,onChange:h=>l(h.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"rv",children:"RV"}),n.jsx("option",{value:"motorhome",children:"Motorhome"}),n.jsx("option",{value:"travel_trailer",children:"Travel Trailer"}),n.jsx("option",{value:"fifth_wheel",children:"Fifth Wheel"}),n.jsx("option",{value:"toy_hauler",children:"Toy Hauler"})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs(J,{onClick:t,className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["PDI Templates (",f.length,")"]}),n.jsx(Fe,{children:"Manage pre-delivery inspection templates for different vehicle types"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[f.map(h=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:h.name}),n.jsx(Re,{variant:"outline",children:u(h.vehicleType)}),h.isActive?n.jsx(Re,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):n.jsx(Re,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:h.description}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(_S,{className:"h-3 w-3 mr-1 text-blue-500"}),h.sections.length," sections"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(dE,{className:"h-3 w-3 mr-1 text-green-500"}),h.sections.reduce((m,v)=>m+v.items.length,0)," items"]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>i(h),children:"View"}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(h),children:[n.jsx(zr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>a(h),children:[n.jsx(uE,{className:"h-3 w-3 mr-1"}),"Duplicate"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>s(h.id),children:n.jsx(Cn,{className:"h-3 w-3"})})]})]},h.id)),f.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(_S,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No templates found"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})})]})]})}function qfe({template:e,onSave:t,onCancel:r}){var T;const{toast:s}=At(),[a,i]=w.useState(!1),[o,l]=w.useState({name:"",description:"",vehicleType:vt.RV,isActive:!0,sections:[]}),[c,d]=w.useState(!1),[f,u]=w.useState({name:"",description:"",items:[]}),[h,m]=w.useState(null),[v,g]=w.useState(!1),[p,x]=w.useState({name:"",description:"",itemType:"checkbox",isRequired:!0});w.useEffect(()=>{e&&l({...e})},[e]);const b=async A=>{if(A.preventDefault(),!o.name){s({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!o.vehicleType){s({title:"Validation Error",description:"Vehicle type is required",variant:"destructive"});return}if(!o.sections||o.sections.length===0){s({title:"Validation Error",description:"At least one section is required",variant:"destructive"});return}const O=o.sections.filter(D=>!D.items||D.items.length===0);if(O.length>0){s({title:"Validation Error",description:`Section "${O[0].name}" must have at least one item`,variant:"destructive"});return}i(!0);try{await t(o),s({title:"Success",description:`Template ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} template`,variant:"destructive"})}finally{i(!1)}},y=()=>{var O;if(!f.name){s({title:"Validation Error",description:"Section name is required",variant:"destructive"});return}const A={id:Math.random().toString(36).substr(2,9),templateId:(e==null?void 0:e.id)||"",name:f.name,description:f.description||"",orderIndex:(((O=o.sections)==null?void 0:O.length)||0)+1,items:[],createdAt:new Date};l(D=>({...D,sections:[...D.sections||[],A]})),u({name:"",description:"",items:[]}),d(!1)},j=A=>{l(O=>{var D;return{...O,sections:((D=O.sections)==null?void 0:D.filter($=>$.id!==A))||[]}})},E=A=>{const O=[...o.sections||[]],D=O.findIndex($=>$.id===A);D<=0||([O[D-1],O[D]]=[O[D],O[D-1]],O.forEach(($,M)=>{$.orderIndex=M+1}),l($=>({...$,sections:O})))},C=A=>{const O=[...o.sections||[]],D=O.findIndex($=>$.id===A);D===-1||D>=O.length-1||([O[D],O[D+1]]=[O[D+1],O[D]],O.forEach(($,M)=>{$.orderIndex=M+1}),l($=>({...$,sections:O})))},S=A=>{var R;if(!p.name){s({title:"Validation Error",description:"Item name is required",variant:"destructive"});return}const O=[...o.sections||[]],D=O.findIndex(B=>B.id===A);if(D===-1)return;const $=O[D],M={id:Math.random().toString(36).substr(2,9),sectionId:A,name:p.name,description:p.description||"",itemType:p.itemType||"checkbox",isRequired:p.isRequired??!0,orderIndex:(((R=$.items)==null?void 0:R.length)||0)+1,createdAt:new Date};$.items=[...$.items||[],M],O[D]=$,l(B=>({...B,sections:O})),x({name:"",description:"",itemType:"checkbox",isRequired:!0}),g(!1)},N=(A,O)=>{const D=[...o.sections||[]],$=D.findIndex(R=>R.id===A);if($===-1)return;const M=D[$];M.items=M.items.filter(R=>R.id!==O),D[$]=M,l(R=>({...R,sections:D}))},_=(A,O)=>{const D=[...o.sections||[]],$=D.findIndex(U=>U.id===A);if($===-1)return;const M=D[$],R=[...M.items],B=R.findIndex(U=>U.id===O);B<=0||([R[B-1],R[B]]=[R[B],R[B-1]],R.forEach((U,W)=>{U.orderIndex=W+1}),M.items=R,D[$]=M,l(U=>({...U,sections:D})))},I=(A,O)=>{const D=[...o.sections||[]],$=D.findIndex(U=>U.id===A);if($===-1)return;const M=D[$],R=[...M.items],B=R.findIndex(U=>U.id===O);B===-1||B>=R.length-1||([R[B],R[B+1]]=[R[B+1],R[B]],R.forEach((U,W)=>{U.orderIndex=W+1}),M.items=R,D[$]=M,l(U=>({...U,sections:D})))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Template":"Create Template"}),n.jsx(Fe,{children:e?"Update PDI template details":"Create a new PDI template"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Template Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Template Name *"}),n.jsx(Pe,{id:"name",value:o.name,onChange:A=>l(O=>({...O,name:A.target.value})),placeholder:"e.g., RV Pre-Delivery Inspection"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicleType",children:"Home/Vehicle Type *"}),n.jsxs(Ve,{value:o.vehicleType,onValueChange:A=>l(O=>({...O,vehicleType:A})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:vt.RV,children:"RV"}),n.jsx(K,{value:vt.MOTORHOME,children:"Motorhome"}),n.jsx(K,{value:vt.TRAVEL_TRAILER,children:"Travel Trailer"}),n.jsx(K,{value:vt.FIFTH_WHEEL,children:"Fifth Wheel"}),n.jsx(K,{value:vt.TOY_HAULER,children:"Toy Hauler"}),n.jsx(K,{value:vt.SINGLE_WIDE,children:"Single Wide MH"}),n.jsx(K,{value:vt.DOUBLE_WIDE,children:"Double Wide MH"}),n.jsx(K,{value:vt.TRIPLE_WIDE,children:"Triple Wide MH"}),n.jsx(K,{value:vt.PARK_MODEL,children:"Park Model"}),n.jsx(K,{value:vt.MODULAR_HOME,children:"Modular Home"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"description",children:"Description"}),n.jsx(tr,{id:"description",value:o.description,onChange:A=>l(O=>({...O,description:A.target.value})),placeholder:"Describe the purpose and scope of this template",rows:3})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isActive",checked:o.isActive,onCheckedChange:A=>l(O=>({...O,isActive:!!A}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active template"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),n.jsxs(J,{type:"button",onClick:()=>d(!0),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),c&&n.jsx(ue,{className:"border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"sectionName",children:"Section Name *"}),n.jsx(Pe,{id:"sectionName",value:f.name,onChange:A=>u(O=>({...O,name:A.target.value})),placeholder:"e.g., Exterior Inspection"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"sectionDescription",children:"Description"}),n.jsx(tr,{id:"sectionDescription",value:f.description,onChange:A=>u(O=>({...O,description:A.target.value})),placeholder:"Describe this section",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),n.jsx(J,{type:"button",onClick:y,children:"Add Section"})]})]})})}),n.jsxs("div",{className:"space-y-6",children:[(T=o.sections)==null?void 0:T.map(A=>{var O;return n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:A.name}),A.description&&n.jsx(Fe,{children:A.description})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(A.id),disabled:A.orderIndex<=1,children:n.jsx(Oo,{className:"h-4 w-4"})}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(A.id),disabled:A.orderIndex>=(((O=o.sections)==null?void 0:O.length)||0),children:n.jsx(Do,{className:"h-4 w-4"})}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(A.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"text-sm font-semibold",children:["Items (",A.items.length,")"]}),n.jsxs(J,{type:"button",size:"sm",variant:"outline",onClick:()=>{m(A.id),g(!0)},children:[n.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Add Item"]})]}),v&&h===A.id&&n.jsx(ue,{className:"border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"itemName",children:"Item Name *"}),n.jsx(Pe,{id:"itemName",value:p.name,onChange:D=>x($=>({...$,name:D.target.value})),placeholder:"e.g., Check Exterior Body Condition"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"itemType",children:"Item Type"}),n.jsxs(Ve,{value:p.itemType,onValueChange:D=>x($=>({...$,itemType:D})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"checkbox",children:"Checkbox"}),n.jsx(K,{value:"text",children:"Text Input"}),n.jsx(K,{value:"number",children:"Number Input"}),n.jsx(K,{value:"photo",children:"Photo Upload"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"itemDescription",children:"Description"}),n.jsx(tr,{id:"itemDescription",value:p.description,onChange:D=>x($=>({...$,description:D.target.value})),placeholder:"Describe this inspection item",rows:2})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isRequired",checked:p.isRequired,onCheckedChange:D=>x($=>({...$,isRequired:!!D}))}),n.jsx(ae,{htmlFor:"isRequired",children:"Required item"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>{g(!1),m(null)},children:"Cancel"}),n.jsx(J,{type:"button",onClick:()=>S(A.id),children:"Add Item"})]})]})})}),n.jsxs("div",{className:"space-y-2",children:[A.items.map(D=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:D.name}),n.jsx(Re,{variant:"outline",className:"text-xs",children:D.itemType}),D.isRequired&&n.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"})]}),D.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:D.description})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(A.id,D.id),disabled:D.orderIndex<=1,children:n.jsx(Oo,{className:"h-3 w-3"})}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(A.id,D.id),disabled:D.orderIndex>=A.items.length,children:n.jsx(Do,{className:"h-3 w-3"})}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(A.id,D.id),children:n.jsx(Cn,{className:"h-3 w-3 text-red-500"})})]})]},D.id)),A.items.length===0&&n.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(dE,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),n.jsx("p",{children:"No items added yet"}),n.jsx("p",{className:"text-xs",children:"Add items to this section"})]})]})]})})]},A.id)}),(!o.sections||o.sections.length===0)&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(_S,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No sections added yet"}),n.jsx("p",{className:"text-sm",children:"Add sections to organize your checklist"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Template"]})})]})]})})]})})}function Wfe({inspections:e,onCreateInspection:t,onViewInspection:r,onContinueInspection:s}){const[a,i]=w.useState(""),[o,l]=w.useState("all"),c=e.filter(u=>{const h=u.id.toLowerCase().includes(a.toLowerCase())||u.vehicleId.toLowerCase().includes(a.toLowerCase()),m=o==="all"||u.status===o;return h&&m}),d=u=>{switch(u){case hn.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case hn.COMPLETED:return"bg-blue-50 text-blue-700 border-blue-200";case hn.APPROVED:return"bg-green-50 text-green-700 border-green-200";case hn.REJECTED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=u=>{switch(u){case hn.IN_PROGRESS:return n.jsx(sr,{className:"h-4 w-4 text-yellow-500"});case hn.COMPLETED:return n.jsx(Xr,{className:"h-4 w-4 text-blue-500"});case hn.APPROVED:return n.jsx(Xr,{className:"h-4 w-4 text-green-500"});case hn.REJECTED:return n.jsx(yh,{className:"h-4 w-4 text-red-500"});default:return n.jsx(sr,{className:"h-4 w-4 text-gray-500"})}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search inspections...",value:a,onChange:u=>i(u.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:o,onChange:u=>l(u.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"in_progress",children:"In Progress"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs(J,{onClick:t,className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Home/Vehicle PDI Inspections (",c.length,")"]}),n.jsx(Fe,{children:"Manage pre-delivery inspections for homes and vehicles"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[c.map(u=>{var h,m,v;return n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Inspection #",u.id.substring(0,8)]}),n.jsxs(Re,{className:He("ri-badge-status",d(u.status)),children:[f(u.status),n.jsx("span",{className:"ml-1",children:u.status.replace("_"," ").toUpperCase()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle:"}),n.jsxs("span",{className:"ml-1",children:[(h=u.vehicle)==null?void 0:h.make," ",(m=u.vehicle)==null?void 0:m.model," (",u.vehicleId,")"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Inspector:"}),n.jsx("span",{className:"ml-1",children:((v=u.inspector)==null?void 0:v.name)||u.inspectorId})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Started:"}),n.jsx("span",{className:"ml-1",children:ct(u.startedAt)})]}),u.completedAt&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Completed:"}),n.jsx("span",{className:"ml-1",children:ct(u.completedAt)})]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Xr,{className:"h-3 w-3 mr-1 text-green-500"}),u.items.filter(g=>g.status==="passed").length," passed"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(yh,{className:"h-3 w-3 mr-1 text-red-500"}),u.items.filter(g=>g.status==="failed").length," failed"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(sr,{className:"h-3 w-3 mr-1 text-yellow-500"}),u.items.filter(g=>g.status==="pending").length," pending"]})]}),u.defects.length>0&&n.jsx("div",{className:"mt-2 bg-red-50 p-2 rounded-md",children:n.jsxs("p",{className:"text-sm text-red-700 flex items-center",children:[n.jsx(yh,{className:"h-3 w-3 mr-1"}),u.defects.length," defect",u.defects.length!==1?"s":""," found"]})})]})}),n.jsx("div",{className:"ri-action-buttons",children:u.status===hn.IN_PROGRESS?n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>s(u),children:[n.jsx(Du,{className:"h-3 w-3 mr-1"}),"Continue"]}):n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(u),children:[n.jsx(Wl,{className:"h-3 w-3 mr-1"}),"View"]})})]},u.id)}),c.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Du,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No inspections found"}),n.jsx("p",{className:"text-sm",children:"Create your first inspection to get started"})]})]})})]})]})}function Hfe({inspection:e,vehicles:t,onSave:r,onComplete:s,onUpdateItem:a,onAddDefect:i,onAddPhoto:o,onCancel:l}){var U;const{toast:c}=At(),[d,f]=w.useState(!1),[u,h]=w.useState("checklist"),[m,v]=w.useState(e.notes||""),[g,p]=w.useState(!1),[x,b]=w.useState(null),[y,j]=w.useState({title:"",description:"",severity:Ns.MEDIUM}),[E,C]=w.useState(!1),[S,N]=w.useState("");w.useEffect(()=>{v(e.notes||"")},[e]);const{getRootProps:_,getInputProps:I}=ix({accept:{"image/*":[]},onDrop:W=>{if(W.length===0)return;const q=W[0],L=URL.createObjectURL(q);$(L)}}),T=async()=>{f(!0);try{await r({notes:m}),c({title:"Success",description:"Inspection saved successfully"})}catch{c({title:"Error",description:"Failed to save inspection",variant:"destructive"})}finally{f(!1)}},A=async()=>{const W=e.items.filter(q=>{const L=q.templateItem;return(L==null?void 0:L.isRequired)&&q.status===fr.PENDING});if(W.length>0){c({title:"Incomplete Inspection",description:`${W.length} required items are still pending`,variant:"destructive"});return}f(!0);try{await s(e.id,m),c({title:"Success",description:"Inspection completed successfully"}),l()}catch{c({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}finally{f(!1)}},O=async(W,q,L,V)=>{try{await a(e.id,W,{status:q,value:L,notes:V}),q===fr.FAILED&&(b(W),p(!0))}catch{c({title:"Error",description:"Failed to update item",variant:"destructive"})}},D=async()=>{if(!y.title||!y.description){c({title:"Validation Error",description:"Title and description are required",variant:"destructive"});return}try{await i(e.id,{...y,inspectionItemId:x||void 0}),j({title:"",description:"",severity:Ns.MEDIUM}),b(null),p(!1),c({title:"Success",description:"Defect added successfully"})}catch{c({title:"Error",description:"Failed to add defect",variant:"destructive"})}},$=async W=>{try{await o(e.id,{url:W,inspectionItemId:x||void 0,caption:S}),N(""),C(!1),c({title:"Success",description:"Photo added successfully"})}catch{c({title:"Error",description:"Failed to add photo",variant:"destructive"})}},M=W=>{switch(W){case fr.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case fr.PASSED:return"bg-green-50 text-green-700 border-green-200";case fr.FAILED:return"bg-red-50 text-red-700 border-red-200";case fr.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},R=W=>{switch(W){case Ns.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case Ns.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ns.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Ns.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},B=t.find(W=>W.id===e.vehicleId);return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"PDI Inspection"}),n.jsx(Fe,{children:B?`${B.year} ${B.make} ${B.model}`:e.vehicleId})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Re,{className:He("ri-badge-status",e.status===hn.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":e.status===hn.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":e.status===hn.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:e.status.replace("_"," ").toUpperCase()}),n.jsx(J,{variant:"ghost",size:"sm",onClick:l,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsx(fe,{children:n.jsxs(xr,{value:u,onValueChange:h,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"checklist",children:"Checklist"}),n.jsxs(Qe,{value:"defects",children:["Defects",e.defects.length>0&&n.jsx(Re,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:e.defects.length})]}),n.jsxs(Qe,{value:"photos",children:["Photos",e.photos.length>0&&n.jsx(Re,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:e.photos.length})]})]}),n.jsxs(et,{value:"checklist",className:"space-y-6",children:[g&&n.jsxs(ue,{className:"border-2 border-red-200",children:[n.jsxs(be,{className:"bg-red-50",children:[n.jsxs(je,{className:"text-lg text-red-700 flex items-center",children:[n.jsx(ro,{className:"h-5 w-5 mr-2"}),"Report Defect"]}),n.jsx(Fe,{className:"text-red-600",children:"Record details about the issue found"})]}),n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"defectTitle",children:"Defect Title *"}),n.jsx(Pe,{id:"defectTitle",value:y.title,onChange:W=>j(q=>({...q,title:W.target.value})),placeholder:"e.g., Damaged Roof Seal"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"defectDescription",children:"Description *"}),n.jsx(tr,{id:"defectDescription",value:y.description,onChange:W=>j(q=>({...q,description:W.target.value})),placeholder:"Describe the defect in detail",rows:3})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"defectSeverity",children:"Severity"}),n.jsxs(Ve,{value:y.severity,onValueChange:W=>j(q=>({...q,severity:W})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Ns.LOW,children:"Low"}),n.jsx(K,{value:Ns.MEDIUM,children:"Medium"}),n.jsx(K,{value:Ns.HIGH,children:"High"}),n.jsx(K,{value:Ns.CRITICAL,children:"Critical"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>{p(!1),b(null)},children:"Cancel"}),n.jsx(J,{type:"button",onClick:D,children:"Add Defect"})]})]})]}),E&&n.jsxs(ue,{className:"border-2 border-blue-200",children:[n.jsxs(be,{className:"bg-blue-50",children:[n.jsxs(je,{className:"text-lg text-blue-700 flex items-center",children:[n.jsx(Tl,{className:"h-5 w-5 mr-2"}),"Add Photo"]}),n.jsx(Fe,{className:"text-blue-600",children:"Upload a photo for documentation"})]}),n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{..._(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[n.jsx("input",{...I()}),n.jsx(Rh,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop an image here, or click to select a file"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"photoCaption",children:"Caption (Optional)"}),n.jsx(Pe,{id:"photoCaption",value:S,onChange:W=>N(W.target.value),placeholder:"e.g., Front view of vehicle"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>{C(!1),b(null),N("")},children:"Cancel"}),n.jsx(J,{type:"button",onClick:()=>{$("https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg")},children:"Simulate Upload"})]})]})]}),(U=e.template)==null?void 0:U.sections.map(W=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:W.name}),W.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:W.description}),n.jsx("div",{className:"space-y-3",children:W.items.map(q=>{const L=e.items.find(V=>V.templateItemId===q.id);return L?n.jsx(ue,{className:"shadow-sm",children:n.jsx(fe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("h4",{className:"font-medium",children:q.name}),q.isRequired&&n.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),n.jsx(Re,{className:He("ri-badge-status text-xs",M(L.status)),children:L.status.toUpperCase()})]}),q.description&&n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:q.description}),q.itemType==="text"&&n.jsx("div",{className:"mb-3",children:n.jsx(Pe,{value:L.value||"",onChange:V=>O(L.id,fr.PASSED,V.target.value),placeholder:"Enter text"})}),q.itemType==="number"&&n.jsx("div",{className:"mb-3",children:n.jsx(Pe,{type:"number",value:L.value||"",onChange:V=>O(L.id,fr.PASSED,V.target.value),placeholder:"Enter number"})}),q.itemType==="photo"&&n.jsxs("div",{className:"mb-3",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>{b(L.id),C(!0)},children:[n.jsx(Tl,{className:"h-4 w-4 mr-2"}),"Add Photo"]}),e.photos.filter(V=>V.inspectionItemId===L.id).length>0&&n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:e.photos.filter(V=>V.inspectionItemId===L.id).map(V=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:V.url,alt:V.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),V.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:V.caption})]},V.id))})]}),L.notes&&n.jsx("div",{className:"mb-3 p-2 bg-muted/30 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",L.notes]})}),L.status!==fr.PENDING&&n.jsx("div",{className:"mb-3",children:n.jsx(tr,{value:L.notes||"",onChange:V=>O(L.id,L.status,L.value,V.target.value),placeholder:"Add notes (optional)",rows:2})})]}),q.itemType==="checkbox"&&n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.jsxs(J,{variant:L.status===fr.PASSED?"default":"outline",size:"sm",onClick:()=>O(L.id,fr.PASSED),className:L.status===fr.PASSED?"":"border-green-200 text-green-700",children:[n.jsx(Xr,{className:"h-4 w-4 mr-1"}),"Pass"]}),n.jsxs(J,{variant:L.status===fr.FAILED?"default":"outline",size:"sm",onClick:()=>O(L.id,fr.FAILED),className:L.status===fr.FAILED?"":"border-red-200 text-red-700",children:[n.jsx(oo,{className:"h-4 w-4 mr-1"}),"Fail"]}),n.jsx(J,{variant:L.status===fr.NA?"default":"outline",size:"sm",onClick:()=>O(L.id,fr.NA),className:L.status===fr.NA?"":"border-gray-200 text-gray-700",children:"N/A"})]})]})})},q.id):null})})]},W.id)),n.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"inspectionNotes",children:"Inspection Notes"}),n.jsx(tr,{id:"inspectionNotes",value:m,onChange:W=>v(W.target.value),placeholder:"Add general notes about this inspection",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(J,{type:"button",variant:"outline",onClick:l,disabled:d,children:"Cancel"}),n.jsxs(J,{type:"button",onClick:T,disabled:d,children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Progress"]}),n.jsxs(J,{type:"button",onClick:A,disabled:d||e.status!=="in_progress",children:[n.jsx(Du,{className:"h-4 w-4 mr-2"}),"Complete Inspection"]})]})]})]}),n.jsxs(et,{value:"defects",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),n.jsxs(J,{size:"sm",onClick:()=>{b(null),p(!0)},children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Defect"]})]}),e.defects.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ro,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No defects reported"}),n.jsx("p",{className:"text-sm",children:"Add defects when issues are found"})]}):n.jsx("div",{className:"space-y-4",children:e.defects.map(W=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{className:"pb-3",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-semibold",children:W.title}),n.jsx(Re,{className:He("ri-badge-status",R(W.severity)),children:W.severity.toUpperCase()}),n.jsx(Re,{className:W.status==="open"?"bg-red-50 text-red-700 border-red-200":W.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":W.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:W.status.replace("_"," ").toUpperCase()})]})})}),n.jsxs(fe,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:W.description}),e.photos.filter(q=>q.defectId===W.id).length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(q=>q.defectId===W.id).map(q=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:q.url,alt:q.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),q.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:q.caption})]},q.id))})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:W.assignedTo?n.jsxs("span",{children:["Assigned to: ",W.assignedTo]}):n.jsx("span",{children:"Unassigned"})}),n.jsx("div",{className:"flex space-x-2",children:n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>{b(null),C(!0)},children:[n.jsx(Tl,{className:"h-3 w-3 mr-1"}),"Add Photo"]})})]})]})]},W.id))})]}),n.jsxs(et,{value:"photos",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Photos"}),n.jsxs(J,{size:"sm",onClick:()=>{b(null),C(!0)},children:[n.jsx(Tl,{className:"h-4 w-4 mr-2"}),"Add Photo"]})]}),e.photos.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Rh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No photos added"}),n.jsx("p",{className:"text-sm",children:"Add photos to document the inspection"})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.photos.map(W=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:W.url,alt:W.caption||"Inspection photo",className:"h-40 w-full object-cover rounded-md"}),W.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:W.caption})]},W.id))})]})]})})]})})}function Gfe({inspection:e,vehicles:t,onAddSignoff:r,onClose:s}){var C,S;const{toast:a}=At(),[i,o]=w.useState("summary"),[l,c]=w.useState(!1),[d,f]=w.useState(""),[u,h]=w.useState(uu.INSPECTOR),m=async()=>{try{await r(e.id,{role:u,notes:d,signatureUrl:"https://via.placeholder.com/200x100?text=Signature"}),c(!1),f(""),a({title:"Success",description:"Signoff added successfully"})}catch{a({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},v=N=>{switch(N){case fr.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case fr.PASSED:return"bg-green-50 text-green-700 border-green-200";case fr.FAILED:return"bg-red-50 text-red-700 border-red-200";case fr.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=N=>{switch(N){case Ns.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case Ns.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ns.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Ns.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},p=t.find(N=>N.id===e.vehicleId),x=e.items.filter(N=>N.status===fr.PASSED).length,b=e.items.filter(N=>N.status===fr.FAILED).length,y=e.items.filter(N=>N.status===fr.NA).length,j=e.items.length,E=Math.round((x+b+y)/j*100);return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"PDI Inspection Report"}),n.jsx(Fe,{children:p?`${p.year} ${p.make} ${p.model}`:e.vehicleId})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Re,{className:He("ri-badge-status",e.status===hn.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":e.status===hn.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":e.status===hn.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:e.status.replace("_"," ").toUpperCase()}),n.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsx(fe,{children:n.jsxs(xr,{value:i,onValueChange:o,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-4",children:[n.jsx(Qe,{value:"summary",children:"Summary"}),n.jsx(Qe,{value:"checklist",children:"Checklist"}),n.jsxs(Qe,{value:"defects",children:["Defects",e.defects.length>0&&n.jsx(Re,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:e.defects.length})]}),n.jsxs(Qe,{value:"signoffs",children:["Signoffs",e.signoffs.length>0&&n.jsx(Re,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:e.signoffs.length})]})]}),n.jsxs(et,{value:"summary",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Inspection Details"})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx("p",{className:"font-medium",children:e.status.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Inspector"}),n.jsx("p",{className:"font-medium",children:((C=e.inspector)==null?void 0:C.name)||e.inspectorId})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Started"}),n.jsx("p",{className:"font-medium",children:ct(e.startedAt)})]}),e.completedAt&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),n.jsx("p",{className:"font-medium",children:ct(e.completedAt)})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"text-sm mt-1 p-3 bg-muted/30 rounded-md",children:e.notes})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Inspection Results"})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Completion"}),n.jsxs("span",{className:"text-sm font-bold",children:[E,"%"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:n.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${E}%`}})}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-green-700",children:x}),n.jsx("p",{className:"text-xs text-green-600",children:"Passed"})]}),n.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-red-700",children:b}),n.jsx("p",{className:"text-xs text-red-600",children:"Failed"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-gray-700",children:y}),n.jsx("p",{className:"text-xs text-gray-600",children:"N/A"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Defects"}),n.jsx("span",{className:"text-sm font-bold text-red-600",children:e.defects.length})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Photos"}),n.jsx("span",{className:"text-sm font-bold",children:e.photos.length})]})]})})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(J,{variant:"outline",onClick:s,children:"Close"}),n.jsxs(J,{variant:"outline",children:[n.jsx(qu,{className:"h-4 w-4 mr-2"}),"Print Report"]}),n.jsxs(J,{variant:"outline",children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),e.status==="completed"&&n.jsxs(J,{onClick:()=>c(!0),children:[n.jsx($0,{className:"h-4 w-4 mr-2"}),"Add Signoff"]})]})]}),n.jsx(et,{value:"checklist",className:"space-y-6",children:(S=e.template)==null?void 0:S.sections.map(N=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:N.name}),N.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:N.description}),n.jsx("div",{className:"space-y-3",children:N.items.map(_=>{const I=e.items.find(T=>T.templateItemId===_.id);return I?n.jsx(ue,{className:"shadow-sm",children:n.jsx(fe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("h4",{className:"font-medium",children:_.name}),_.isRequired&&n.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),n.jsx(Re,{className:He("ri-badge-status text-xs",v(I.status)),children:I.status.toUpperCase()})]}),_.description&&n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:_.description}),I.value&&n.jsx("div",{className:"mb-2 p-2 bg-muted/30 rounded-md",children:n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Value:"})," ",I.value]})}),I.notes&&n.jsx("div",{className:"mb-2 p-2 bg-muted/30 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",I.notes]})}),e.photos.filter(T=>T.inspectionItemId===I.id).length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Photos"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(T=>T.inspectionItemId===I.id).map(T=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:T.url,alt:T.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),T.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:T.caption})]},T.id))})]}),e.defects.filter(T=>T.inspectionItemId===I.id).length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("h5",{className:"text-sm font-medium mb-1 text-red-600",children:"Defects"}),e.defects.filter(T=>T.inspectionItemId===I.id).map(T=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-md mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-red-700",children:T.title}),n.jsx(Re,{className:He("ri-badge-status text-xs",g(T.severity)),children:T.severity.toUpperCase()})]}),n.jsx("p",{className:"text-sm text-red-600 mt-1",children:T.description})]},T.id))]})]}),n.jsxs("div",{className:"ml-4",children:[I.status===fr.PASSED&&n.jsx(Xr,{className:"h-6 w-6 text-green-500"}),I.status===fr.FAILED&&n.jsx(oo,{className:"h-6 w-6 text-red-500"}),I.status===fr.PENDING&&n.jsx(sr,{className:"h-6 w-6 text-yellow-500"}),I.status===fr.NA&&n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"N/A"})]})]})})},_.id):null})})]},N.id))}),n.jsxs(et,{value:"defects",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),e.defects.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Xr,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),n.jsx("p",{children:"No defects reported"}),n.jsx("p",{className:"text-sm",children:"This vehicle passed inspection without issues"})]}):n.jsx("div",{className:"space-y-4",children:e.defects.map(N=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{className:"pb-3",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-semibold",children:N.title}),n.jsx(Re,{className:He("ri-badge-status",g(N.severity)),children:N.severity.toUpperCase()}),n.jsx(Re,{className:N.status==="open"?"bg-red-50 text-red-700 border-red-200":N.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":N.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:N.status.replace("_"," ").toUpperCase()})]})})}),n.jsxs(fe,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:N.description}),e.photos.filter(_=>_.defectId===N.id).length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(_=>_.defectId===N.id).map(_=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:_.url,alt:_.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),_.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:_.caption})]},_.id))})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:N.assignedTo?n.jsxs("span",{children:["Assigned to: ",N.assignedTo]}):n.jsx("span",{children:"Unassigned"})}),N.resolvedAt&&n.jsxs("div",{className:"text-sm text-green-600",children:["Resolved: ",ct(N.resolvedAt)]})]}),N.resolutionNotes&&n.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-md",children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-medium",children:"Resolution:"})," ",N.resolutionNotes]})})]})]},N.id))})]}),n.jsxs(et,{value:"signoffs",className:"space-y-4",children:[l&&n.jsxs(ue,{className:"border-2 border-green-200 mb-6",children:[n.jsxs(be,{className:"bg-green-50",children:[n.jsxs(je,{className:"text-lg text-green-700 flex items-center",children:[n.jsx($0,{className:"h-5 w-5 mr-2"}),"Add Signoff"]}),n.jsx(Fe,{className:"text-green-600",children:"Sign off on the completed inspection"})]}),n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"signoffRole",children:"Role"}),n.jsxs("select",{id:"signoffRole",value:u,onChange:N=>h(N.target.value),className:"w-full p-2 border rounded-md",children:[n.jsx("option",{value:uu.INSPECTOR,children:"Inspector"}),n.jsx("option",{value:uu.MANAGER,children:"Manager"}),n.jsx("option",{value:uu.QUALITY_CONTROL,children:"Quality Control"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"signoffNotes",children:"Notes (Optional)"}),n.jsx(tr,{id:"signoffNotes",value:d,onChange:N=>f(N.target.value),placeholder:"Add any notes about this signoff",rows:3})]}),n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Signature Capture"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"In a real app, this would be a signature pad"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>{c(!1),f("")},children:"Cancel"}),n.jsx(J,{type:"button",onClick:m,children:"Add Signoff"})]})]})]}),n.jsx("h3",{className:"text-lg font-semibold",children:"Signoffs"}),e.signoffs.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx($0,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No signoffs yet"}),n.jsx("p",{className:"text-sm",children:"Add signoffs to approve the inspection"})]}):n.jsx("div",{className:"space-y-4",children:e.signoffs.map(N=>{var _;return n.jsx(ue,{className:"shadow-sm",children:n.jsx(fe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("h4",{className:"font-medium",children:((_=N.user)==null?void 0:_.name)||N.userId}),n.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200",children:N.role.replace("_"," ").toUpperCase()})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Signed: ",ct(N.signedAt)]}),N.notes&&n.jsx("p",{className:"text-sm text-muted-foreground p-2 bg-muted/30 rounded-md",children:N.notes})]}),n.jsx("div",{className:"ml-4",children:N.signatureUrl?n.jsx("img",{src:N.signatureUrl,alt:"Signature",className:"h-12 object-contain"}):n.jsx("div",{className:"h-12 w-32 border-2 border-dashed rounded flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-muted-foreground",children:"No signature"})})})]})})},N.id)})}),e.status==="completed"&&!l&&n.jsx("div",{className:"flex justify-end mt-4",children:n.jsxs(J,{onClick:()=>c(!0),children:[n.jsx($0,{className:"h-4 w-4 mr-2"}),"Add Signoff"]})})]})]})})]})})}function Kfe({templates:e,vehicles:t,currentUserId:r,onCreateInspection:s,onCancel:a}){const{toast:i}=At(),[o,l]=w.useState(!1),[c,d]=w.useState(""),[f,u]=w.useState(""),[h,m]=w.useState(""),[v,g]=w.useState([]);w.useEffect(()=>{if(c){const x=t.find(b=>b.id===c);if(x){const b=x.type,y=e.filter(j=>j.isActive&&j.vehicleType===b);g(y),y.length===1?u(y[0].id):u("")}}else g([]),u("")},[c,e,t]);const p=async x=>{if(x.preventDefault(),!c){i({title:"Validation Error",description:"Please select a vehicle",variant:"destructive"});return}if(!f){i({title:"Validation Error",description:"Please select a template",variant:"destructive"});return}l(!0);try{await s({templateId:f,vehicleId:c,inspectorId:r,notes:h}),i({title:"Success",description:"Inspection created successfully"})}catch{i({title:"Error",description:"Failed to create inspection",variant:"destructive"})}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"New PDI Inspection"}),n.jsx(Fe,{children:"Create a new pre-delivery inspection"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:p,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicle",children:"Vehicle *"}),n.jsxs(Ve,{value:c,onValueChange:d,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select a home/vehicle"})}),n.jsx(Ue,{children:t.map(x=>n.jsxs(K,{value:x.id,children:[x.year," ",x.make," ",x.model," - ",x.vin]},x.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"template",children:"Inspection Template *"}),n.jsxs(Ve,{value:f,onValueChange:u,disabled:v.length===0,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:v.length===0?"Select a home/vehicle first":"Select a template"})}),n.jsx(Ue,{children:v.map(x=>n.jsx(K,{value:x.id,children:x.name},x.id))})]}),v.length===0&&c&&n.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No templates available for this vehicle type"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(tr,{id:"notes",value:h,onChange:x=>m(x.target.value),placeholder:"Add any initial notes about this inspection",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:a,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o||!c||!f,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Du,{className:"h-4 w-4 mr-2"}),"Start Inspection"]})})]})]})})]})})}function Wk(){const{templates:e,inspections:t,createTemplate:r,updateTemplate:s,deleteTemplate:a,createInspection:i,updateInspection:o,updateInspectionItem:l,completeInspection:c,createDefect:d,addPhoto:f,addSignoff:u}=Ufe(),{vehicles:h}=wd(),{user:m}=Nm(),{toast:v}=At(),[g,p]=w.useState("inspections"),[x,b]=w.useState(!1),[y,j]=w.useState(!1),[E,C]=w.useState(!1),[S,N]=w.useState(!1),[_,I]=w.useState(null),[T,A]=w.useState(null),O=()=>{I(null),b(!0)},D=re=>{I(re),b(!0)},$=re=>{I(re),b(!0)},M=async re=>{if(window.confirm("Are you sure you want to delete this template?"))try{await a(re),v({title:"Success",description:"Template deleted successfully"})}catch{v({title:"Error",description:"Failed to delete template",variant:"destructive"})}},R=async re=>{try{const Ce={...re,id:void 0,name:`${re.name} (Copy)`};await r(Ce),v({title:"Success",description:"Template duplicated successfully"})}catch{v({title:"Error",description:"Failed to duplicate template",variant:"destructive"})}},B=async re=>{try{_?await s(_.id,re):await r(re),b(!1),I(null)}catch{v({title:"Error",description:`Failed to ${_?"update":"create"} template`,variant:"destructive"})}},U=()=>{C(!0)},W=async re=>{try{const Ce=await i(re);C(!1),A(Ce),j(!0)}catch{v({title:"Error",description:"Failed to create inspection",variant:"destructive"})}},q=re=>{A(re),N(!0)},L=re=>{A(re),j(!0)},V=async re=>{if(T)try{await o(T.id,re),v({title:"Success",description:"Inspection saved successfully"})}catch{v({title:"Error",description:"Failed to save inspection",variant:"destructive"})}},G=async(re,Ce)=>{try{await c(re,Ce),j(!1),A(null),v({title:"Success",description:"Inspection completed successfully"})}catch{v({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}},Z=async(re,Ce,Ne)=>{try{await l(re,Ce,Ne)}catch{v({title:"Error",description:"Failed to update item",variant:"destructive"})}},te=async(re,Ce)=>{try{await d(re,Ce)}catch{v({title:"Error",description:"Failed to add defect",variant:"destructive"})}},he=async(re,Ce)=>{try{await f(re,Ce)}catch{v({title:"Error",description:"Failed to add photo",variant:"destructive"})}},me=async(re,Ce)=>{try{await u(re,{...Ce,userId:(m==null?void 0:m.id)||"current-user"})}catch{v({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},oe=e.length,we=e.filter(re=>re.isActive).length,ve=t.length,ge=t.filter(re=>re.status===hn.COMPLETED||re.status===hn.APPROVED).length,De=t.filter(re=>re.status===hn.IN_PROGRESS).length,xe=t.reduce((re,Ce)=>re+Ce.defects.length,0),le=t.reduce((re,Ce)=>re+Ce.defects.filter(Ne=>Ne.status==="open"||Ne.status==="in_progress").length,0);return t.reduce((re,Ce)=>re+Ce.photos.length,0),n.jsxs("div",{className:"space-y-8",children:[x&&n.jsx(qfe,{template:_||void 0,onSave:B,onCancel:()=>{b(!1),I(null)}}),E&&n.jsx(Kfe,{templates:e,vehicles:h,currentUserId:(m==null?void 0:m.id)||"current-user",onCreateInspection:W,onCancel:()=>C(!1)}),y&&T&&n.jsx(Hfe,{inspection:T,vehicles:h,onSave:V,onComplete:G,onUpdateItem:Z,onAddDefect:te,onAddPhoto:he,onCancel:()=>{j(!1),A(null)}}),S&&T&&n.jsx(Gfe,{inspection:T,vehicles:h,onAddSignoff:me,onClose:()=>{N(!1),A(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"PDI Checklist - Home/Vehicle"}),n.jsx("p",{className:"ri-page-description",children:"Manage pre-delivery inspections and quality control for homes and vehicles"})]}),n.jsxs(J,{className:"shadow-sm",onClick:U,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Inspections"}),n.jsx(Du,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:ve}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),ge," completed"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),n.jsx(Du,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:De}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Active inspections"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-red-900",children:"Open Defects"}),n.jsx(ro,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:le}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),xe," total defects"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Templates"}),n.jsx(dE,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:oe}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),we," active"]})]})]})]}),n.jsxs(xr,{value:g,onValueChange:p,className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-2",children:[n.jsx(Qe,{value:"inspections",children:"Inspections"}),n.jsx(Qe,{value:"templates",children:"Templates"})]}),n.jsx(et,{value:"inspections",children:n.jsx(Wfe,{inspections:t,onCreateInspection:U,onViewInspection:q,onContinueInspection:L})}),n.jsx(et,{value:"templates",children:n.jsx(Vfe,{templates:e,onCreateTemplate:O,onEditTemplate:D,onDeleteTemplate:M,onDuplicateTemplate:R,onViewTemplate:$})})]})]})}function Yfe(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(Wk,{})}),n.jsx($t,{path:"/*",element:n.jsx(Wk,{})})]})}function Xfe(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(!1);w.useEffect(()=>{c()},[]);const c=()=>{const A=pn("renter-insight-commissions",[{id:"1",salesPersonId:"sales-001",dealId:"deal-001",type:pr.PERCENTAGE,rate:.05,amount:6875,status:Rt.APPROVED,paidDate:new Date("2024-01-20"),notes:"Commission for Georgetown sale",customFields:{},createdAt:new Date("2024-01-18"),updatedAt:new Date("2024-01-20")},{id:"2",salesPersonId:"sales-002",dealId:"deal-002",type:pr.FLAT,rate:0,amount:2500,status:Rt.PENDING,notes:"Flat commission for service contract",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]),O=pn("renter-insight-commission-rules",[{id:"1",name:"Standard Sales Commission",type:"percentage",rate:.05,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Service Contract Bonus",type:"flat",amount:500,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"3",name:"Tiered Sales Commission",type:"tiered",tiers:[{id:"1",ruleId:"3",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"3",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"3",minAmount:1e5,rate:.07}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),D=pn("renter-insight-commission-audit",[{id:"1",commissionId:"1",userId:"user-001",userName:"Admin User",action:"created",newValue:{salesPersonId:"sales-001",dealId:"deal-001",type:pr.PERCENTAGE,rate:.05,amount:6875,status:Rt.PENDING},timestamp:new Date("2024-01-18")},{id:"2",commissionId:"1",userId:"user-001",userName:"Admin User",action:"approved",previousValue:{status:Rt.PENDING},newValue:{status:Rt.APPROVED},notes:"Approved after deal verification",timestamp:new Date("2024-01-19")}]);t(A),s(O),i(D)},d=A=>{Gr("renter-insight-commissions",A)},f=A=>{Gr("renter-insight-commission-rules",A)},u=A=>{Gr("renter-insight-commission-audit",A)},h=A=>e.filter(O=>O.salesPersonId===A),m=A=>e.filter(O=>O.dealId===A),v=A=>e.find(O=>O.id===A),g=A=>r.find(O=>O.id===A),p=A=>a.filter(O=>O.commissionId===A).sort((O,D)=>D.timestamp.getTime()-O.timestamp.getTime()),x=async(A,O,D)=>{l(!0);try{const $={id:Math.random().toString(36).substr(2,9),salesPersonId:A.salesPersonId||"",dealId:A.dealId||"",type:A.type||pr.PERCENTAGE,rate:A.rate||0,amount:A.amount||0,status:Rt.PENDING,notes:A.notes||"",customFields:A.customFields||{},createdAt:new Date,updatedAt:new Date},M=[...e,$];t(M),d(M);const R={id:Math.random().toString(36).substr(2,9),commissionId:$.id,userId:O,userName:D,action:"created",newValue:{...$},timestamp:new Date},B=[...a,R];return i(B),u(B),$}finally{l(!1)}},b=async(A,O,D,$,M)=>{const R=e.find(L=>L.id===A);if(!R)return null;const B={...R,...O,updatedAt:new Date},U=e.map(L=>L.id===A?B:L);t(U),d(U);const W={id:Math.random().toString(36).substr(2,9),commissionId:A,userId:D,userName:$,action:"updated",previousValue:{...R},newValue:O,notes:M,timestamp:new Date},q=[...a,W];return i(q),u(q),B};return{commissions:e,rules:r,auditTrail:a,loading:o,getCommissionsBySalesPerson:h,getCommissionsByDeal:m,getCommissionById:v,getRuleById:g,getAuditTrailByCommission:p,createCommission:x,updateCommission:b,approveCommission:async(A,O,D,$)=>b(A,{status:Rt.APPROVED},O,D,$),rejectCommission:async(A,O,D,$)=>b(A,{status:Rt.CANCELLED},O,D,$),markCommissionPaid:async(A,O,D,$)=>b(A,{status:Rt.PAID,paidDate:new Date},O,D,$),createRule:async A=>{l(!0);try{let O;switch(A.type){case"flat":O={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"flat",amount:A.amount||0,isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"percentage":O={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"percentage",rate:A.rate||0,isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"tiered":O={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"tiered",tiers:A.tiers||[],isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;default:throw new Error("Invalid commission rule type")}const D=[...r,O];return s(D),f(D),O}finally{l(!1)}},updateRule:async(A,O)=>{const D=r.find(R=>R.id===A);if(!D)return null;const $={...D,...O,updatedAt:new Date},M=r.map(R=>R.id===A?$:R);return s(M),f(M),$},deleteRule:async A=>{const O=r.filter(D=>D.id!==A);s(O),f(O)},calculateCommission:(A,O)=>{const D=r.find($=>$.id===O);if(!D)return 0;switch(D.type){case"flat":return D.amount;case"percentage":return A*D.rate;case"tiered":const M=D.tiers.find(R=>A>=R.minAmount&&(R.maxAmount===void 0||A<R.maxAmount));return M?A*M.rate:0;default:return 0}},generateCommissionReport:A=>{let O=[...e];A.startDate&&(O=O.filter($=>new Date($.createdAt)>=new Date(A.startDate))),A.endDate&&(O=O.filter($=>new Date($.createdAt)<=new Date(A.endDate))),A.salesPersonId&&(O=O.filter($=>$.salesPersonId===A.salesPersonId)),A.status&&(O=O.filter($=>$.status===A.status)),A.type&&(O=O.filter($=>$.type===A.type));const D={totalCommissions:O.length,totalAmount:O.reduce(($,M)=>$+M.amount,0),pendingAmount:O.filter($=>$.status===Rt.PENDING).reduce(($,M)=>$+M.amount,0),approvedAmount:O.filter($=>$.status===Rt.APPROVED).reduce(($,M)=>$+M.amount,0),paidAmount:O.filter($=>$.status===Rt.PAID).reduce(($,M)=>$+M.amount,0),byType:{flat:O.filter($=>$.type===pr.FLAT).reduce(($,M)=>$+M.amount,0),percentage:O.filter($=>$.type===pr.PERCENTAGE).reduce(($,M)=>$+M.amount,0),tiered:O.filter($=>$.type===pr.TIERED).reduce(($,M)=>$+M.amount,0)}};return{commissions:O,summary:D}},exportCommissionsToCSV:A=>{const O=["ID","Sales Person","Deal ID","Type","Rate","Amount","Status","Paid Date","Notes","Created At"],D=A.map($=>[$.id,$.salesPersonId,$.dealId,$.type,$.rate,$.amount,$.status,$.paidDate?$.paidDate.toISOString():"",$.notes,$.createdAt.toISOString()]);return[O,...D]}}}function Qfe({commission:e,salesReps:t,deals:r,rules:s,onSave:a,onCancel:i}){const{toast:o}=At(),[l,c]=w.useState(!1),[d,f]=w.useState({salesPersonId:"",dealId:"",type:pr.PERCENTAGE,rate:.05,amount:0,notes:""}),[u,h]=w.useState(""),[m,v]=w.useState(0),[g,p]=w.useState("");w.useEffect(()=>{if(e){f({...e}),p("");const j=r.find(E=>E.id===e.dealId);j&&v(j.value)}},[e,r]),w.useEffect(()=>{if(d.dealId){const j=r.find(E=>E.id===d.dealId);j&&v(j.value)}},[d.dealId,r]),w.useEffect(()=>{if(u){const j=s.find(C=>C.id===u);if(!j)return;let E=0;switch(j.type){case"flat":E=j.amount,f(_=>({..._,type:pr.FLAT,rate:0,amount:E}));break;case"percentage":const C=j.rate;E=m*C,f(_=>({..._,type:pr.PERCENTAGE,rate:C,amount:E}));break;case"tiered":const N=j.tiers.find(_=>m>=_.minAmount&&(_.maxAmount===void 0||m<_.maxAmount));N&&(E=m*N.rate,f(_=>({..._,type:pr.TIERED,rate:N.rate,amount:E})));break}}else if(d.type===pr.PERCENTAGE){const j=m*(d.rate||0);f(E=>({...E,amount:j}))}},[u,m,d.rate,d.type,s]);const x=async j=>{if(j.preventDefault(),!d.salesPersonId||!d.dealId){o({title:"Validation Error",description:"Sales rep and deal are required",variant:"destructive"});return}if(d.amount<=0){o({title:"Validation Error",description:"Commission amount must be greater than zero",variant:"destructive"});return}c(!0);try{await a(d,g),o({title:"Success",description:`Commission ${e?"updated":"created"} successfully`})}catch{o({title:"Error",description:`Failed to ${e?"update":"create"} commission`,variant:"destructive"})}finally{c(!1)}},b=j=>{h(j)},y=()=>{if(d.type===pr.PERCENTAGE){const j=m*(d.rate||0);f(E=>({...E,amount:j}))}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Commission":"Create Commission"}),n.jsx(Fe,{children:e?"Update commission details":"Create a new commission record"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:i,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"salesPersonId",children:"Sales Rep *"}),n.jsxs(Ve,{value:d.salesPersonId,onValueChange:j=>f(E=>({...E,salesPersonId:j})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select sales rep"})}),n.jsx(Ue,{className:"z-50",children:t.map(j=>n.jsx(K,{value:j.id,children:j.name},j.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dealId",children:"Deal *"}),n.jsxs(Ve,{value:d.dealId,onValueChange:j=>f(E=>({...E,dealId:j})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select deal"})}),n.jsx(Ue,{className:"z-50",children:r.map(j=>n.jsxs(K,{value:j.id,children:[j.name," - ",_e(j.value)]},j.id))})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"commissionRule",children:"Commission Rule"}),n.jsxs(Ve,{value:u,onValueChange:b,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select rule or enter manually"})}),n.jsxs(Ue,{className:"z-50",children:[n.jsx(K,{value:"",children:"Manual Entry"}),s.filter(j=>j.isActive).map(j=>n.jsxs(K,{value:j.id,children:[j.name," (",j.type,")"]},j.id))]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dealValue",children:"Deal Value"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"dealValue",type:"number",value:m,onChange:j=>v(parseFloat(j.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"commissionType",children:"Commission Type"}),n.jsxs(Ve,{value:d.type,onValueChange:j=>f(E=>({...E,type:j})),disabled:!!u,children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{className:"z-50",children:[n.jsx(K,{value:pr.FLAT,children:"Flat"}),n.jsx(K,{value:pr.PERCENTAGE,children:"Percentage"}),n.jsx(K,{value:pr.TIERED,children:"Tiered"})]})]})]})]}),d.type===pr.PERCENTAGE&&!u&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"rate",children:"Commission Rate (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx(eg,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"rate",type:"number",value:d.rate?d.rate*100:"",onChange:j=>f(E=>({...E,rate:parseFloat(j.target.value)/100||0})),className:"pl-10",min:"0",max:"100",step:"0.01"})]})]}),d.type===pr.FLAT&&!u&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"amount",children:"Flat Commission Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"amount",type:"number",value:d.amount||"",onChange:j=>f(E=>({...E,amount:parseFloat(j.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]}),!u&&d.type===pr.PERCENTAGE&&n.jsx("div",{className:"flex justify-end",children:n.jsxs(J,{type:"button",variant:"outline",onClick:y,size:"sm",children:[n.jsx(ql,{className:"h-4 w-4 mr-2"}),"Calculate"]})}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"commissionAmount",children:"Commission Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"commissionAmount",type:"number",value:d.amount||"",onChange:j=>f(E=>({...E,amount:parseFloat(j.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Commission Notes"}),n.jsx(tr,{id:"notes",value:d.notes||"",onChange:j=>f(E=>({...E,notes:j.target.value})),placeholder:"Add any notes about this commission",rows:3})]}),e&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"auditNotes",children:"Audit Notes"}),n.jsx(tr,{id:"auditNotes",value:g,onChange:j=>p(j.target.value),placeholder:"Add notes about this update (for audit trail)",rows:2})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:i,disabled:l,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Commission"]})})]})]})})]})})}function Jfe({auditEntries:e}){const t=a=>{switch(a){case"created":return n.jsx(Nt,{className:"h-4 w-4 text-blue-500"});case"updated":return n.jsx(zr,{className:"h-4 w-4 text-yellow-500"});case"approved":return n.jsx(Xr,{className:"h-4 w-4 text-green-500"});case"rejected":return n.jsx(oo,{className:"h-4 w-4 text-red-500"});case"paid":return n.jsx(It,{className:"h-4 w-4 text-green-500"});default:return n.jsx(nN,{className:"h-4 w-4 text-gray-500"})}},r=a=>{switch(a){case"created":return"bg-blue-50 text-blue-700 border-blue-200";case"updated":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"paid":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},s=a=>{if(!a.previousValue&&!a.newValue)return null;const i=[];if(a.action==="created"&&a.newValue)return n.jsx("div",{className:"text-sm text-muted-foreground",children:n.jsx("p",{children:"Commission created with initial values"})});if(a.previousValue&&a.newValue)for(const[o,l]of Object.entries(a.newValue)){const c=a.previousValue[o];c!==l&&i.push(n.jsxs("div",{className:"text-sm",children:[n.jsxs("span",{className:"font-medium capitalize",children:[o.replace(/([A-Z])/g," $1").trim(),": "]}),n.jsx("span",{className:"line-through text-red-600 mr-2",children:c}),n.jsx("span",{className:"text-green-600",children:l})]},o))}return i.length>0?n.jsx("div",{className:"space-y-1",children:i}):null};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(nN,{className:"h-5 w-5 mr-2 text-primary"}),"Audit Trail"]}),n.jsx(Fe,{children:"History of changes to this commission"})]}),n.jsx(fe,{children:e.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(nN,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No audit history available"})]}):n.jsx("div",{className:"space-y-4",children:e.map(a=>n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-0 top-1.5",children:t(a.action)}),n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx(Re,{className:He("ri-badge-status",r(a.action)),children:a.action.toUpperCase()}),n.jsx("span",{className:"text-sm text-muted-foreground",children:ct(a.timestamp)})]}),n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:a.userName})," ",a.action," this commission"]}),s(a),a.notes&&n.jsx("div",{className:"mt-2 p-2 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:a.notes})})]},a.id))})})]})}function Zfe({commission:e,salesReps:t,deals:r,auditTrail:s,onClose:a,onEdit:i,onApprove:o,onReject:l,onMarkPaid:c}){const{toast:d}=At(),[f,u]=w.useState("details"),[h,m]=w.useState(""),[v,g]=w.useState(!1),p=S=>{switch(S){case Rt.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rt.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Rt.PAID:return"bg-green-50 text-green-700 border-green-200";case Rt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},x=S=>{switch(S){case pr.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case pr.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case pr.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},b=async()=>{g(!0);try{await o(e.id,h),m(""),d({title:"Commission Approved",description:"The commission has been approved successfully"})}catch{d({title:"Error",description:"Failed to approve commission",variant:"destructive"})}finally{g(!1)}},y=async()=>{g(!0);try{await l(e.id,h),m(""),d({title:"Commission Rejected",description:"The commission has been rejected"})}catch{d({title:"Error",description:"Failed to reject commission",variant:"destructive"})}finally{g(!1)}},j=async()=>{g(!0);try{await c(e.id,h),m(""),d({title:"Commission Marked as Paid",description:"The commission has been marked as paid"})}catch{d({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}finally{g(!1)}},E=t.find(S=>S.id===e.salesPersonId),C=r.find(S=>S.id===e.dealId);return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Commission Details"}),n.jsxs(Fe,{children:["Commission #",e.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>i(e),size:"sm",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Commission"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{children:[n.jsxs(xr,{value:f,onValueChange:u,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-2",children:[n.jsx(Qe,{value:"details",children:"Details"}),n.jsxs(Qe,{value:"audit",children:["Audit Trail",s.length>0&&n.jsx(Re,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:s.length})]})]}),n.jsxs(et,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Re,{className:He("ri-badge-status",p(e.status)),children:e.status.toUpperCase()}),n.jsx(Re,{className:He("ri-badge-status",x(e.type)),children:e.type.toUpperCase()}),n.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:_e(e.amount)})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sales Rep"}),n.jsx("p",{className:"font-medium",children:(E==null?void 0:E.name)||e.salesPersonId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Deal"}),n.jsx("p",{className:"font-medium",children:(C==null?void 0:C.name)||e.dealId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Commission Type"}),n.jsx("p",{className:"font-medium",children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),n.jsx("p",{className:"font-medium text-primary",children:_e(e.amount)})]}),e.type===pr.PERCENTAGE&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Rate"}),n.jsxs("p",{className:"font-medium",children:[(e.rate*100).toFixed(2),"%"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),n.jsx("p",{className:"font-medium",children:ct(e.createdAt)})]}),e.paidDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),n.jsx("p",{className:"font-medium",children:ct(e.paidDate)})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]}),(e.status===Rt.PENDING||e.status===Rt.APPROVED)&&n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"actionNotes",children:"Action Notes"}),n.jsx(tr,{id:"actionNotes",value:h,onChange:S=>m(S.target.value),placeholder:"Add notes about this action (for audit trail)",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[e.status===Rt.PENDING&&n.jsxs(n.Fragment,{children:[n.jsxs(J,{variant:"outline",onClick:y,disabled:v,children:[n.jsx(oo,{className:"h-4 w-4 mr-2"}),"Reject"]}),n.jsxs(J,{onClick:b,disabled:v,children:[n.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Approve"]})]}),e.status===Rt.APPROVED&&n.jsxs(J,{onClick:j,disabled:v,children:[n.jsx(It,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]})]})]})]}),n.jsx(et,{value:"audit",children:n.jsx(Jfe,{auditEntries:s})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:a,children:"Close"}),n.jsxs(J,{onClick:()=>i(e),children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Commission"]})]})]})]})})}function ehe({rules:e,onCreateRule:t,onEditRule:r,onDeleteRule:s}){const[a,i]=w.useState(""),[o,l]=w.useState("all"),c=u=>{switch(u){case"flat":return"bg-blue-50 text-blue-700 border-blue-200";case"percentage":return"bg-green-50 text-green-700 border-green-200";case"tiered":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=e.filter(u=>{const h=u.name.toLowerCase().includes(a.toLowerCase()),m=o==="all"||u.type===o;return h&&m}),f=u=>{switch(u.type){case"flat":return`${_e(u.amount)} flat rate`;case"percentage":return`${(u.rate*100).toFixed(2)}% of deal value`;case"tiered":const h=u.tiers;return h.length===0?"No tiers defined":`${h.length} tiers, ${(h[0].rate*100).toFixed(2)}% to ${(h[h.length-1].rate*100).toFixed(2)}%`;default:return""}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search rules...",value:a,onChange:u=>i(u.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:o,onChange:u=>l(u.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"flat",children:"Flat"}),n.jsx("option",{value:"percentage",children:"Percentage"}),n.jsx("option",{value:"tiered",children:"Tiered"})]}),n.jsxs(J,{onClick:t,className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Rule"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Commission Rules (",d.length,")"]}),n.jsx(Fe,{children:"Define how commissions are calculated for different scenarios"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[d.map(u=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:u.name}),n.jsx(Re,{className:He("ri-badge-status",c(u.type)),children:u.type.toUpperCase()}),u.isActive?n.jsx(Re,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):n.jsx(Re,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),n.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:u.type==="flat"?n.jsxs("span",{className:"flex items-center",children:[n.jsx(It,{className:"h-3 w-3 mr-1 text-blue-500"}),f(u)]}):u.type==="percentage"?n.jsxs("span",{className:"flex items-center",children:[n.jsx(eg,{className:"h-3 w-3 mr-1 text-green-500"}),f(u)]}):n.jsxs("span",{className:"flex items-center",children:[n.jsx(ql,{className:"h-3 w-3 mr-1 text-purple-500"}),f(u)]})}),u.type==="tiered"&&n.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:u.tiers.map((h,m)=>n.jsxs("div",{className:"text-xs p-1 bg-muted/30 rounded",children:[_e(h.minAmount),h.maxAmount?` - ${_e(h.maxAmount)}`:"+",":",n.jsxs("span",{className:"font-semibold ml-1",children:[(h.rate*100).toFixed(2),"%"]})]},h.id))})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(u),children:[n.jsx(zr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>s(u.id),children:n.jsx(Cn,{className:"h-3 w-3"})})]})]},u.id)),d.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(ql,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No commission rules found"}),n.jsx("p",{className:"text-sm",children:"Create your first rule to get started"})]})]})})]})]})}function the({rule:e,onSave:t,onCancel:r}){const{toast:s}=At(),[a,i]=w.useState(!1),[o,l]=w.useState((e==null?void 0:e.type)||"percentage"),[c,d]=w.useState((e==null?void 0:e.name)||""),[f,u]=w.useState((e==null?void 0:e.isActive)!==!1),[h,m]=w.useState((e==null?void 0:e.type)==="flat"?e.amount:500),[v,g]=w.useState((e==null?void 0:e.type)==="percentage"?e.rate:.05),[p,x]=w.useState((e==null?void 0:e.type)==="tiered"?e.tiers:[{id:"1",ruleId:"",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"",minAmount:1e5,rate:.07}]),b=async C=>{if(C.preventDefault(),!c){s({title:"Validation Error",description:"Rule name is required",variant:"destructive"});return}i(!0);try{let S;switch(o){case"flat":S={name:c,type:"flat",amount:h,isActive:f};break;case"percentage":S={name:c,type:"percentage",rate:v,isActive:f};break;case"tiered":for(let N=0;N<p.length;N++)if(N<p.length-1&&p[N].maxAmount!==p[N+1].minAmount){s({title:"Validation Error",description:"Tier ranges must be continuous without gaps",variant:"destructive"});return}S={name:c,type:"tiered",tiers:p,isActive:f};break;default:throw new Error("Invalid rule type")}await t(S)}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} commission rule`,variant:"destructive"})}finally{i(!1)}},y=()=>{if(p.length===0){x([{id:"1",ruleId:"",minAmount:0,rate:.03}]);return}const C=p[p.length-1],S={id:Math.random().toString(36).substr(2,9),ruleId:"",minAmount:C.maxAmount||C.minAmount+5e4,rate:C.rate+.01};x([...p,S])},j=C=>{x(p.filter(S=>S.id!==C))},E=(C,S)=>{x(p.map(N=>N.id===C?{...N,...S}:N))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Commission Rule":"Create Commission Rule"}),n.jsx(Fe,{children:e?"Update commission rule details":"Define a new commission calculation rule"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Rule Name *"}),n.jsx(Pe,{id:"name",value:c,onChange:C=>d(C.target.value),placeholder:"e.g., Standard Sales Commission"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Commission Type"}),n.jsxs(Ve,{value:o,onValueChange:C=>l(C),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"flat",children:"Flat Amount"}),n.jsx(K,{value:"percentage",children:"Percentage"}),n.jsx(K,{value:"tiered",children:"Tiered Percentage"})]})]})]})]}),o==="flat"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(ae,{htmlFor:"flatAmount",children:"Flat Commission Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"flatAmount",type:"number",value:h,onChange:C=>m(parseFloat(C.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"A fixed amount will be paid regardless of the deal value"})]}),o==="percentage"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(ae,{htmlFor:"percentageRate",children:"Commission Rate (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx(eg,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"percentageRate",type:"number",value:v*100,onChange:C=>g(parseFloat(C.target.value)/100||0),className:"pl-10",min:"0",max:"100",step:"0.01"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"A percentage of the deal value will be paid as commission"})]}),o==="tiered"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ae,{children:"Tiered Commission Rates"}),n.jsxs(J,{type:"button",onClick:y,size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Tier"]})]}),n.jsxs("div",{className:"space-y-3",children:[p.map((C,S)=>n.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[n.jsxs("div",{children:[n.jsx(ae,{className:"text-xs",children:"Min Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),n.jsx(Pe,{type:"number",value:C.minAmount,onChange:N=>E(C.id,{minAmount:parseFloat(N.target.value)||0}),className:"pl-7 h-9 text-sm",min:"0",step:"1000"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{className:"text-xs",children:"Max Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),n.jsx(Pe,{type:"number",value:C.maxAmount,onChange:N=>{const _=N.target.value?parseFloat(N.target.value):void 0;E(C.id,{maxAmount:_})},className:"pl-7 h-9 text-sm",min:C.minAmount,step:"1000",placeholder:S===p.length-1?"No limit":""})]})]}),n.jsxs("div",{children:[n.jsx(ae,{className:"text-xs",children:"Rate (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx(eg,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),n.jsx(Pe,{type:"number",value:C.rate*100,onChange:N=>E(C.id,{rate:parseFloat(N.target.value)/100||0}),className:"pl-7 h-9 text-sm",min:"0",max:"100",step:"0.01"})]})]})]}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(C.id),disabled:p.length<=1,children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]},C.id)),p.length===0&&n.jsxs("div",{className:"text-center py-4 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx("p",{children:"No tiers defined"}),n.jsx("p",{className:"text-sm",children:'Click "Add Tier" to create commission tiers'})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Different commission rates will apply based on the deal value tiers"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isActive",checked:f,onCheckedChange:C=>u(!!C)}),n.jsx(ae,{htmlFor:"isActive",children:"Active rule"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Rule"]})})]})]})})]})})}function rhe({salesReps:e,onGenerateReport:t,onExportCSV:r}){const{toast:s}=At(),[a,i]=w.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,salesPersonId:"",status:"",type:""}),[o,l]=w.useState(!1),[c,d]=w.useState(null),[f,u]=w.useState("none"),h=()=>{try{const b=t(a);d(b),s({title:"Report Generated",description:`Generated report with ${b.commissions.length} commissions`})}catch{s({title:"Error",description:"Failed to generate report",variant:"destructive"})}},m=()=>{if(c)try{const b=r(c.commissions),y=Bh.unparse(b),j=new Blob([y],{type:"text/csv;charset=utf-8;"}),E=URL.createObjectURL(j),C=document.createElement("a");C.href=E,C.setAttribute("download",`commission_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(C),C.click(),document.body.removeChild(C),s({title:"Export Successful",description:"Commission report exported to CSV"})}catch{s({title:"Export Failed",description:"Failed to export report to CSV",variant:"destructive"})}},v=b=>{if(f==="none")return{"All Commissions":b};const y={};return b.forEach(j=>{let E="";switch(f){case"salesPerson":E=j.salesPersonId;break;case"status":E=j.status;break;case"type":E=j.type;break}y[E]||(y[E]=[]),y[E].push(j)}),y},g=b=>{switch(f){case"salesPerson":const y=e.find(j=>j.id===b);return y?y.name:b;case"status":return b.charAt(0).toUpperCase()+b.slice(1);case"type":return b.charAt(0).toUpperCase()+b.slice(1);default:return b}},p=b=>{switch(b){case Rt.PENDING:return"Pending";case Rt.APPROVED:return"Approved";case Rt.PAID:return"Paid";case Rt.CANCELLED:return"Cancelled";default:return b}},x=b=>{switch(b){case pr.FLAT:return"Flat";case pr.PERCENTAGE:return"Percentage";case pr.TIERED:return"Tiered";default:return b}};return n.jsx("div",{className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(zn,{className:"h-5 w-5 mr-2 text-primary"}),"Commission Report Generator"]}),n.jsx(Fe,{children:"Generate detailed commission reports with custom filters"})]}),n.jsxs(J,{variant:"outline",onClick:()=>l(!o),className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),o?"Hide Filters":"Show Filters"]})]})}),n.jsxs(fe,{children:[o&&n.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-muted/30 rounded-lg",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"startDate",children:"Start Date"}),n.jsx(Pe,{id:"startDate",type:"date",value:a.startDate?new Date(a.startDate).toISOString().split("T")[0]:"",onChange:b=>i(y=>({...y,startDate:b.target.value?new Date(b.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"endDate",children:"End Date"}),n.jsx(Pe,{id:"endDate",type:"date",value:a.endDate?new Date(a.endDate).toISOString().split("T")[0]:"",onChange:b=>i(y=>({...y,endDate:b.target.value?new Date(b.target.value):void 0}))})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"salesPersonId",children:"Sales Rep"}),n.jsxs(Ve,{value:a.salesPersonId||"",onValueChange:b=>i(y=>({...y,salesPersonId:b})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"All Sales Reps"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"All Sales Reps"}),e.map(b=>n.jsx(K,{value:b.id,children:b.name},b.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(Ve,{value:a.status||"",onValueChange:b=>i(y=>({...y,status:b})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"All Statuses"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"All Statuses"}),n.jsx(K,{value:Rt.PENDING,children:"Pending"}),n.jsx(K,{value:Rt.APPROVED,children:"Approved"}),n.jsx(K,{value:Rt.PAID,children:"Paid"}),n.jsx(K,{value:Rt.CANCELLED,children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Commission Type"}),n.jsxs(Ve,{value:a.type||"",onValueChange:b=>i(y=>({...y,type:b})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"All Types"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"All Types"}),n.jsx(K,{value:pr.FLAT,children:"Flat"}),n.jsx(K,{value:pr.PERCENTAGE,children:"Percentage"}),n.jsx(K,{value:pr.TIERED,children:"Tiered"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(J,{onClick:h,children:[n.jsx(zn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}),!o&&n.jsx("div",{className:"flex justify-end mb-6",children:n.jsxs(J,{onClick:h,children:[n.jsx(zn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})}),c&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsx(ue,{className:"shadow-sm bg-blue-50",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Commissions"}),n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:c.summary.totalCommissions}),n.jsx("div",{className:"text-sm text-blue-700 mt-1",children:_e(c.summary.totalAmount)})]})})}),n.jsx(ue,{className:"shadow-sm bg-yellow-50",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-yellow-700 mb-1",children:"Pending"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:_e(c.summary.pendingAmount)}),n.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"Awaiting approval"})]})})}),n.jsx(ue,{className:"shadow-sm bg-green-50",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"Paid"}),n.jsx("div",{className:"text-2xl font-bold text-green-900",children:_e(c.summary.paidAmount)}),n.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Commissions paid"})]})})}),n.jsx(ue,{className:"shadow-sm bg-purple-50",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Approved"}),n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_e(c.summary.approvedAmount)}),n.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"Ready for payment"})]})})})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(ae,{htmlFor:"groupBy",className:"whitespace-nowrap",children:"Group By:"}),n.jsxs(Ve,{value:f,onValueChange:b=>u(b),children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"none",children:"No Grouping"}),n.jsx(K,{value:"salesPerson",children:"Sales Rep"}),n.jsx(K,{value:"status",children:"Status"}),n.jsx(K,{value:"type",children:"Commission Type"})]})]})]}),n.jsxs(J,{variant:"outline",onClick:m,disabled:!c,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsx("div",{className:"space-y-6",children:Object.entries(v(c.commissions)).map(([b,y])=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[f==="salesPerson"&&n.jsx(fs,{className:"h-4 w-4 mr-2 text-blue-500"}),f==="status"&&n.jsx(cs,{className:"h-4 w-4 mr-2 text-yellow-500"}),f==="type"&&n.jsx(zn,{className:"h-4 w-4 mr-2 text-purple-500"}),g(b),n.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",y.length," commissions, ",_e(y.reduce((j,E)=>j+E.amount,0)),")"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Sales Rep"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Deal"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Type"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Amount"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Status"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Created"})]})}),n.jsx("tbody",{children:y.map(j=>{const E=e.find(C=>C.id===j.salesPersonId);return n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:(E==null?void 0:E.name)||j.salesPersonId}),n.jsx("td",{className:"p-2",children:j.dealId}),n.jsx("td",{className:"p-2",children:x(j.type)}),n.jsx("td",{className:"p-2 font-medium",children:_e(j.amount)}),n.jsx("td",{className:"p-2",children:p(j.status)}),n.jsx("td",{className:"p-2",children:new Date(j.createdAt).toLocaleDateString()})]},j.id)})})]})})]},b))})]}),!c&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(zn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No report generated yet"}),n.jsx("p",{className:"text-sm",children:"Use the filters above to generate a commission report"})]})]})]})})}const ny=[{id:"sales-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"sales-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"sales-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],YN=[{id:"deal-001",name:"Georgetown Class A Sale - Smith Family",customerName:"John & Mary Smith",value:137500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-15")},{id:"deal-002",name:"Travel Trailer - Johnson Family",customerName:"Sarah Johnson",value:75e3,stage:"closed_won",status:"active",createdAt:new Date("2024-01-10")},{id:"deal-003",name:"Service Contract - Davis",customerName:"Mike Davis",value:2500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-20")}];function Hk(){const{commissions:e,rules:t,auditTrail:r,createCommission:s,updateCommission:a,approveCommission:i,rejectCommission:o,markCommissionPaid:l,createRule:c,updateRule:d,deleteRule:f,getAuditTrailByCommission:u,generateCommissionReport:h,exportCommissionsToCSV:m}=Xfe(),{user:v}=Nm(),{toast:g}=At(),[p,x]=w.useState(""),[b,y]=w.useState("all"),[j,E]=w.useState("commissions"),[C,S]=w.useState(!1),[N,_]=w.useState(!1),[I,T]=w.useState(!1),[A,O]=w.useState(null),[D,$]=w.useState(null),M=ye=>{switch(ye){case Rt.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rt.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Rt.PAID:return"bg-green-50 text-green-700 border-green-200";case Rt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},R=ye=>{switch(ye){case pr.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case pr.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case pr.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},B=ye=>{switch(ye){case Rt.PENDING:return n.jsx(sr,{className:"h-4 w-4 text-yellow-500"});case Rt.APPROVED:return n.jsx(Xr,{className:"h-4 w-4 text-blue-500"});case Rt.PAID:return n.jsx(It,{className:"h-4 w-4 text-green-500"});case Rt.CANCELLED:return n.jsx(oo,{className:"h-4 w-4 text-red-500"});default:return null}},U=e.filter(ye=>{const $e=ye.salesPersonId.toLowerCase().includes(p.toLowerCase())||ye.dealId.toLowerCase().includes(p.toLowerCase())||ye.id.toLowerCase().includes(p.toLowerCase()),nt=b==="all"||ye.status===b;return $e&&nt}),W=()=>{O(null),S(!0)},q=ye=>{O(ye),S(!0),_(!1)},L=ye=>{O(ye),_(!0)},V=async(ye,$e)=>{try{A?(await a(A.id,ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",$e),g({title:"Success",description:"Commission updated successfully"})):(await s(ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User"),g({title:"Success",description:"Commission created successfully"})),S(!1),O(null)}catch{g({title:"Error",description:`Failed to ${A?"update":"create"} commission`,variant:"destructive"})}},G=async(ye,$e)=>{try{await i(ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",$e),g({title:"Success",description:"Commission approved successfully"})}catch{g({title:"Error",description:"Failed to approve commission",variant:"destructive"})}},Z=async(ye,$e)=>{try{await o(ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",$e),g({title:"Success",description:"Commission rejected successfully"})}catch{g({title:"Error",description:"Failed to reject commission",variant:"destructive"})}},te=async(ye,$e)=>{try{await l(ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",$e),g({title:"Success",description:"Commission marked as paid successfully"})}catch{g({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}},he=()=>{$(null),T(!0)},me=ye=>{$(ye),T(!0)},oe=async ye=>{try{D?(await d(D.id,ye),g({title:"Success",description:"Commission rule updated successfully"})):(await c(ye),g({title:"Success",description:"Commission rule created successfully"})),T(!1),$(null)}catch{g({title:"Error",description:`Failed to ${D?"update":"create"} commission rule`,variant:"destructive"})}},we=async ye=>{if(window.confirm("Are you sure you want to delete this commission rule?"))try{await f(ye),g({title:"Success",description:"Commission rule deleted successfully"})}catch{g({title:"Error",description:"Failed to delete commission rule",variant:"destructive"})}},ve=e.length,ge=e.filter(ye=>ye.status===Rt.PENDING).length,De=e.filter(ye=>ye.status===Rt.APPROVED).length,xe=e.filter(ye=>ye.status===Rt.PAID).length,le=e.reduce((ye,$e)=>ye+$e.amount,0),re=e.filter(ye=>ye.status===Rt.PENDING).reduce((ye,$e)=>ye+$e.amount,0),Ce=e.filter(ye=>ye.status===Rt.APPROVED).reduce((ye,$e)=>ye+$e.amount,0),Ne=e.filter(ye=>ye.status===Rt.PAID).reduce((ye,$e)=>ye+$e.amount,0);return n.jsxs("div",{className:"space-y-8",children:[C&&n.jsx(Qfe,{commission:A||void 0,salesReps:ny,deals:YN,rules:t,onSave:V,onCancel:()=>{S(!1),O(null)}}),N&&A&&n.jsx(Zfe,{commission:A,salesReps:ny,deals:YN,auditTrail:u(A.id),onClose:()=>_(!1),onEdit:q,onApprove:G,onReject:Z,onMarkPaid:te}),I&&n.jsx(the,{rule:D||void 0,onSave:oe,onCancel:()=>{T(!1),$(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),n.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),n.jsxs(J,{className:"shadow-sm",onClick:W,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),n.jsx(It,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:_e(le)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(fs,{className:"h-3 w-3 mr-1"}),ve," commissions"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(sr,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:_e(re)}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(sr,{className:"h-3 w-3 mr-1"}),ge," pending approval"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Approved"}),n.jsx(Xr,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:_e(Ce)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Xr,{className:"h-3 w-3 mr-1"}),De," approved"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Paid"}),n.jsx(It,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:_e(Ne)}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(It,{className:"h-3 w-3 mr-1"}),xe," paid out"]})]})]})]}),n.jsxs(xr,{value:j,onValueChange:E,className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"commissions",children:"Commissions"}),n.jsx(Qe,{value:"rules",children:"Commission Rules"}),n.jsx(Qe,{value:"reports",children:"Reports"})]}),n.jsxs(et,{value:"commissions",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search commissions...",value:p,onChange:ye=>x(ye.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(Ve,{value:b,onValueChange:y,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:Rt.PENDING,children:"Pending"}),n.jsx(K,{value:Rt.APPROVED,children:"Approved"}),n.jsx(K,{value:Rt.PAID,children:"Paid"}),n.jsx(K,{value:Rt.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs(J,{onClick:W,className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Commissions"}),n.jsx(Fe,{children:"Track and manage sales commissions"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[U.map(ye=>{const $e=ny.find(rt=>rt.id===ye.salesPersonId),nt=YN.find(rt=>rt.id===ye.dealId);return n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Commission #",ye.id]}),n.jsx(Re,{className:He("ri-badge-status",R(ye.type)),children:ye.type.toUpperCase()}),n.jsxs(Re,{className:He("ri-badge-status",M(ye.status)),children:[B(ye.status),n.jsx("span",{className:"ml-1",children:ye.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(fs,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Sales Rep:"}),n.jsx("span",{className:"ml-1",children:($e==null?void 0:$e.name)||ye.salesPersonId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(It,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Deal:"}),n.jsx("span",{className:"ml-1",children:(nt==null?void 0:nt.name)||ye.dealId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(It,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Amount:"}),n.jsx("span",{className:"ml-1 font-bold text-primary",children:_e(ye.amount)})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lr,{className:"h-3 w-3 mr-2 text-orange-500"}),n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{className:"ml-1",children:ct(ye.createdAt)})]})]}),ye.notes&&n.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",ye.notes]})})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>L(ye),children:"View"}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>q(ye),children:"Edit"}),ye.status===Rt.PENDING&&n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>G(ye.id),children:"Approve"}),ye.status===Rt.APPROVED&&n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>te(ye.id),children:"Mark Paid"})]})]},ye.id)}),U.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(It,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No commissions found"}),n.jsx("p",{className:"text-sm",children:"Create your first commission to get started"})]})]})})]})]}),n.jsx(et,{value:"rules",children:n.jsx(ehe,{rules:t,onCreateRule:he,onEditRule:me,onDeleteRule:we})}),n.jsx(et,{value:"reports",children:n.jsx(rhe,{salesReps:ny,onGenerateReport:h,onExportCSV:m})})]})]})}function nhe(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(Hk,{})}),n.jsx($t,{path:"/*",element:n.jsx(Hk,{})})]})}function she({user:e,onSave:t,onCancel:r}){const{toast:s}=At(),[a,i]=w.useState(!1),[o,l]=w.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",sendInvite:!0,inviteMethod:"email",notes:(e==null?void 0:e.notes)||"",status:(e==null?void 0:e.status)||"active"}),c=async d=>{if(d.preventDefault(),!o.firstName||!o.lastName||!o.email){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}i(!0);try{await new Promise(f=>setTimeout(f,1e3)),t({...o,id:(e==null?void 0:e.id)||Math.random().toString(36).substring(2,9)}),s({title:"Success",description:`Portal user ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} portal user`,variant:"destructive"})}finally{i(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Portal User":"Add Portal User"}),n.jsx(Fe,{children:e?"Update user details":"Create a new portal user account"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"firstName",children:"First Name *"}),n.jsx(Pe,{id:"firstName",value:o.firstName,onChange:d=>l(f=>({...f,firstName:d.target.value})),placeholder:"Enter first name"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"lastName",children:"Last Name *"}),n.jsx(Pe,{id:"lastName",value:o.lastName,onChange:d=>l(f=>({...f,lastName:d.target.value})),placeholder:"Enter last name"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"email",children:"Email Address *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Qr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"email",type:"email",value:o.email,onChange:d=>l(f=>({...f,email:d.target.value})),placeholder:"Enter email address",className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"phone",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(wm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"phone",type:"tel",value:o.phone,onChange:d=>l(f=>({...f,phone:d.target.value})),placeholder:"Enter phone number",className:"pl-10"})]})]}),!e&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"sendInvite",checked:o.sendInvite,onCheckedChange:d=>l(f=>({...f,sendInvite:!!d}))}),n.jsx(ae,{htmlFor:"sendInvite",children:"Send invitation to user"})]}),o.sendInvite&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"inviteMethod",children:"Invitation Method"}),n.jsxs(Ve,{value:o.inviteMethod,onValueChange:d=>l(f=>({...f,inviteMethod:d})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"sms",children:"SMS"}),n.jsx(K,{value:"both",children:"Both Email & SMS"})]})]})]})]}),e&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Account Status"}),n.jsxs(Ve,{value:o.status,onValueChange:d=>l(f=>({...f,status:d})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"active",children:"Active"}),n.jsx(K,{value:"inactive",children:"Inactive"}),n.jsx(K,{value:"suspended",children:"Suspended"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(tr,{id:"notes",value:o.notes,onChange:d=>l(f=>({...f,notes:d.target.value})),placeholder:"Add any notes about this user",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," User"]})})]})]})})]})})}const ahe=[{id:"user-1",firstName:"John",lastName:"Smith",email:"john.smith@example.com",phone:"(555) 123-4567",status:"active",lastLogin:new Date("2024-01-18"),createdAt:new Date("2023-12-15")},{id:"user-2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@example.com",phone:"(555) 987-6543",status:"active",lastLogin:new Date("2024-01-16"),createdAt:new Date("2023-12-10")},{id:"user-3",firstName:"Michael",lastName:"Davis",email:"michael.d@example.com",phone:"(555) 456-7890",status:"inactive",lastLogin:new Date("2023-12-05"),createdAt:new Date("2023-11-20")}];function ihe({onImpersonate:e}){const{toast:t}=At(),[r,s]=w.useState(ahe),[a,i]=w.useState(""),[o,l]=w.useState("all"),c=h=>{switch(h){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=r.filter(h=>{const m=`${h.firstName} ${h.lastName}`.toLowerCase().includes(a.toLowerCase())||h.email.toLowerCase().includes(a.toLowerCase())||h.phone.includes(a),v=o==="all"||h.status===o;return m&&v}),f=h=>{t({title:"Password Reset Link Sent",description:"A password reset link has been sent to the user's email address."})},u=h=>{console.log("Edit user:",h)};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search users...",value:a,onChange:h=>i(h.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ve,{value:o,onValueChange:l,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:"active",children:"Active"}),n.jsx(K,{value:"inactive",children:"Inactive"}),n.jsx(K,{value:"suspended",children:"Suspended"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Portal Users"}),n.jsx(Fe,{children:"Manage customer portal access and permissions"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[d.map(h=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:[h.firstName," ",h.lastName]}),n.jsx(Re,{className:He("ri-badge-status",c(h.status)),children:h.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Qr,{className:"h-3 w-3 mr-2 text-blue-500"}),h.email]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(wm,{className:"h-3 w-3 mr-2 text-green-500"}),h.phone]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lr,{className:"h-3 w-3 mr-2 text-purple-500"}),"Last login: ",h.lastLogin.toLocaleDateString()]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>u(h),children:[n.jsx(zr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>f(h.id),children:"Reset Password"}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>e(h.id,`${h.firstName} ${h.lastName}`),children:[n.jsx(YY,{className:"h-3 w-3 mr-1"}),"Proxy as Client"]})]})]},h.id)),d.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Users,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No users found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function ohe(){const{toast:e}=At(),[t,r]=w.useState("general"),[s,a]=w.useState("Customer Self-Service Portal"),[i,o]=w.useState("Access your quotes, service history, and more"),[l,c]=w.useState(""),[d,f]=w.useState("Welcome to your customer portal. Here you can view your quotes, track deliveries, and request service."),[u,h]=w.useState(!0),[m,v]=w.useState(!0),[g,p]=w.useState(!0),[x,b]=w.useState(!0),[y,j]=w.useState(!0),[E,C]=w.useState(!0),[S,N]=w.useState(90),[_,I]=w.useState(5),[T,A]=w.useState(30),[O,D]=w.useState(!1),$=()=>{e({title:"Settings Saved",description:"Portal settings have been updated successfully."})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(xr,{value:t,onValueChange:r,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"general",children:"General"}),n.jsx(Qe,{value:"notifications",children:"Notifications"}),n.jsx(Qe,{value:"security",children:"Security"})]}),n.jsxs(et,{value:"general",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(ex,{className:"h-5 w-5 mr-2 text-primary"}),"Portal Configuration"]}),n.jsx(Fe,{children:"Configure general portal settings and appearance"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"portalName",children:"Portal Name"}),n.jsx(Pe,{id:"portalName",value:s,onChange:M=>a(M.target.value)})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"portalDescription",children:"Portal Description"}),n.jsx(Pe,{id:"portalDescription",value:i,onChange:M=>o(M.target.value)})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"portalLogo",children:"Logo URL (Optional)"}),n.jsx(Pe,{id:"portalLogo",value:l,onChange:M=>c(M.target.value),placeholder:"https://example.com/logo.png"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"welcomeMessage",children:"Welcome Message"}),n.jsx(tr,{id:"welcomeMessage",value:d,onChange:M=>f(M.target.value),rows:3})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-lg",children:"Portal Features"}),n.jsx(Fe,{children:"Enable or disable portal features"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"enableQuotes",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableQuotes",children:"Enable Quotes"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"enableService",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableService",children:"Enable Service Requests"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"enableDelivery",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableDelivery",children:"Enable Delivery Tracking"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"enableDocuments",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableDocuments",children:"Enable Document Signing"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"enableSurveys",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableSurveys",children:"Enable Satisfaction Surveys"})]})]})})]})]}),n.jsxs(et,{value:"notifications",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(vM,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Settings"]}),n.jsx(Fe,{children:"Configure how and when notifications are sent"})]}),n.jsx(fe,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{className:"text-base",children:"Notification Channels"}),n.jsxs("div",{className:"mt-2 space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"emailNotifications",checked:u,onCheckedChange:M=>h(!!M)}),n.jsxs(ae,{htmlFor:"emailNotifications",className:"flex items-center",children:[n.jsx(Qr,{className:"h-4 w-4 mr-2 text-blue-500"}),"Email Notifications"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"smsNotifications",checked:m,onCheckedChange:M=>v(!!M)}),n.jsxs(ae,{htmlFor:"smsNotifications",className:"flex items-center",children:[n.jsx(ln,{className:"h-4 w-4 mr-2 text-green-500"}),"SMS Notifications"]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{className:"text-base",children:"Notification Events"}),n.jsxs("div",{className:"mt-2 space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"notifyOnQuoteViewed",checked:g,onCheckedChange:M=>p(!!M)}),n.jsx(ae,{htmlFor:"notifyOnQuoteViewed",children:"Quote Viewed by Customer"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"notifyOnQuoteAccepted",checked:x,onCheckedChange:M=>b(!!M)}),n.jsx(ae,{htmlFor:"notifyOnQuoteAccepted",children:"Quote Accepted by Customer"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"notifyOnServiceRequest",checked:y,onCheckedChange:M=>j(!!M)}),n.jsx(ae,{htmlFor:"notifyOnServiceRequest",children:"New Service Request Submitted"})]})]})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-lg",children:"Email Templates"}),n.jsx(Fe,{children:"Customize notification email templates"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"welcomeEmailTemplate",children:"Welcome Email"}),n.jsxs(Ve,{defaultValue:"default",children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"default",children:"Default Welcome Template"}),n.jsx(K,{value:"minimal",children:"Minimal Welcome Template"}),n.jsx(K,{value:"branded",children:"Branded Welcome Template"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"passwordResetTemplate",children:"Password Reset Email"}),n.jsxs(Ve,{defaultValue:"default",children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"default",children:"Default Password Reset Template"}),n.jsx(K,{value:"minimal",children:"Minimal Password Reset Template"}),n.jsx(K,{value:"secure",children:"Secure Password Reset Template"})]})]})]})]})})]})]}),n.jsxs(et,{value:"security",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(eX,{className:"h-5 w-5 mr-2 text-primary"}),"Security Settings"]}),n.jsx(Fe,{children:"Configure portal security and access controls"})]}),n.jsx(fe,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"requireStrongPasswords",checked:E,onCheckedChange:M=>C(!!M)}),n.jsx(ae,{htmlFor:"requireStrongPasswords",children:"Require Strong Passwords"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"passwordExpiryDays",children:"Password Expiry (Days)"}),n.jsx(Pe,{id:"passwordExpiryDays",type:"number",min:"0",value:S,onChange:M=>N(parseInt(M.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for no expiration"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),n.jsx(Pe,{id:"maxLoginAttempts",type:"number",min:"1",value:_,onChange:M=>I(parseInt(M.target.value)||5)})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"sessionTimeoutMinutes",children:"Session Timeout (Minutes)"}),n.jsx(Pe,{id:"sessionTimeoutMinutes",type:"number",min:"5",value:T,onChange:M=>A(parseInt(M.target.value)||30)})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"twoFactorAuth",checked:O,onCheckedChange:M=>D(!!M)}),n.jsx(ae,{htmlFor:"twoFactorAuth",children:"Enable Two-Factor Authentication"})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-lg",children:"Access Controls"}),n.jsx(Fe,{children:"Configure IP restrictions and access limits"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"ipWhitelist",children:"IP Whitelist (Optional)"}),n.jsx(tr,{id:"ipWhitelist",placeholder:"Enter IP addresses, one per line",rows:3}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty to allow access from any IP address"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"limitConcurrentSessions",defaultChecked:!0}),n.jsx(ae,{htmlFor:"limitConcurrentSessions",children:"Limit to One Active Session Per User"})]})]})})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(J,{onClick:$,children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})}function Gk(){const[e,t]=w.useState("users"),[r,s]=w.useState(!1),a=()=>{s(!0)},i=(o,l)=>{const c=`/customer-portal?impersonateClientId=${o}`;window.open(c,"_blank")};return n.jsxs("div",{className:"space-y-8",children:[r&&n.jsx(she,{onSave:()=>{s(!1)},onCancel:()=>s(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Client Portal Management"}),n.jsx("p",{className:"ri-page-description",children:"Manage customer portal access and self-service features"})]}),n.jsxs(J,{className:"shadow-sm",onClick:a,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Portal User"]})]})}),n.jsxs(xr,{value:e,onValueChange:t,className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"users",children:"Portal Users"}),n.jsx(Qe,{value:"settings",children:"Portal Settings"}),n.jsx(Qe,{value:"activity",children:"User Activity"})]}),n.jsx(et,{value:"users",children:n.jsx(ihe,{onImpersonate:i})}),n.jsx(et,{value:"settings",children:n.jsx(ohe,{})}),n.jsx(et,{value:"activity",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Portal Activity"}),n.jsx(Fe,{children:"Recent user activity in the customer portal"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(ex,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No recent activity to display"})]})})})]})})]})]})}function lhe(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(Gk,{})}),n.jsx($t,{path:"/*",element:n.jsx(Gk,{})})]})}function F9(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState(!1);w.useEffect(()=>{o()},[]);const o=()=>{const j=pn("renter-insight-invoices",[{id:"1",customerId:"cust-1",number:"INV-2024-001",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:Mt.PAID,dueDate:new Date("2024-02-15"),paidDate:new Date("2024-01-20"),paymentMethod:"Credit Card",notes:"Payment received via Zego",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",customerId:"cust-2",number:"INV-2024-002",items:[{id:"3",description:"Service - AC Repair",quantity:1,unitPrice:620,total:620}],subtotal:620,tax:49.6,total:669.6,status:Mt.SENT,dueDate:new Date("2024-02-20"),notes:"Service invoice for AC repair",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}]),E=pn("renter-insight-payments",[{id:"1",invoiceId:"1",amount:137700,method:Al.CREDIT_CARD,status:Bc.COMPLETED,transactionId:"txn_1234567890",processedDate:new Date("2024-01-20"),notes:"Processed via Zego payment gateway",customFields:{},createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20")}]);t(j),s(E)},l=j=>{Gr("renter-insight-invoices",j)},c=j=>{Gr("renter-insight-payments",j)},d=j=>e.filter(E=>E.customerId===j),f=j=>e.find(E=>E.id===j),u=j=>r.filter(E=>E.invoiceId===j),h=async j=>{i(!0);try{const E={id:Math.random().toString(36).substr(2,9),customerId:j.customerId||"",number:j.number||"",items:j.items||[],subtotal:j.subtotal||0,tax:j.tax||0,total:j.total||0,status:j.status||Mt.DRAFT,dueDate:j.dueDate||new Date,notes:j.notes||"",customFields:j.customFields||{},createdAt:new Date,updatedAt:new Date},C=[...e,E];return t(C),l(C),E}finally{i(!1)}},m=async(j,E)=>{const C=e.map(S=>S.id===j?{...S,...E,updatedAt:new Date}:S);t(C),l(C)},v=async j=>{const E=e.filter(C=>C.id!==j);t(E),l(E)},g=async(j,E)=>{const C=e.map(S=>S.id===j?{...S,status:E,updatedAt:new Date}:S);t(C),l(C)},p=async(j,E)=>{const C=e.map(S=>S.id===j?{...S,status:Mt.PAID,paidDate:new Date,paymentMethod:E,updatedAt:new Date}:S);t(C),l(C)};return{invoices:e,payments:r,loading:a,getInvoicesByCustomerId:d,getInvoiceById:f,getPaymentsByInvoiceId:u,createInvoice:h,updateInvoice:m,deleteInvoice:v,updateInvoiceStatus:g,markInvoiceAsPaid:p,sendInvoice:async j=>{const E=e.map(C=>C.id===j?{...C,status:Mt.SENT,updatedAt:new Date}:C);t(E),l(E)},recordPayment:async j=>{i(!0);try{const E={id:Math.random().toString(36).substr(2,9),invoiceId:j.invoiceId||"",amount:j.amount||0,method:j.method||Al.CREDIT_CARD,status:j.status||Bc.COMPLETED,transactionId:j.transactionId,processedDate:j.processedDate||new Date,notes:j.notes||"",customFields:j.customFields||{},createdAt:new Date,updatedAt:new Date},C=[...r,E];return s(C),c(C),E.status===Bc.COMPLETED&&await p(E.invoiceId,E.method),E}finally{i(!1)}},sendPaymentRequest:async j=>(await g(j,Mt.SENT),await new Promise(E=>setTimeout(E,1e3)),!0)}}function che({invoice:e,onSave:t,onCancel:r}){const{toast:s}=At(),{leads:a}=mo(),[i,o]=w.useState(!1),[l,c]=w.useState({customerId:"",number:`INV-${new Date().getFullYear()}-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`,items:[],subtotal:0,tax:0,total:0,status:Mt.DRAFT,dueDate:new Date(Date.now()+30*24*60*60*1e3),notes:"",customFields:{}}),[d,f]=w.useState({description:"",quantity:1,unitPrice:0,total:0}),[u,h]=w.useState(.08);w.useEffect(()=>{e&&(c({...e,dueDate:new Date(e.dueDate)}),e.subtotal>0&&h(e.tax/e.subtotal))},[e]),w.useEffect(()=>{const p=d.quantity||1,x=d.unitPrice||0;f(b=>({...b,total:p*x}))},[d.quantity,d.unitPrice]),w.useEffect(()=>{if(l.items&&l.items.length>0){const p=l.items.reduce((y,j)=>y+j.total,0),x=p*u,b=p+x;c(y=>({...y,subtotal:p,tax:x,total:b}))}else c(p=>({...p,subtotal:0,tax:0,total:0}))},[l.items,u]);const m=async p=>{if(p.preventDefault(),!l.customerId||!l.number||!l.dueDate){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!l.items||l.items.length===0){s({title:"Validation Error",description:"Please add at least one item to the invoice",variant:"destructive"});return}o(!0);try{await t(l),s({title:"Success",description:`Invoice ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} invoice`,variant:"destructive"})}finally{o(!1)}},v=()=>{if(!d.description||!d.unitPrice){s({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const p={id:Math.random().toString(36).substr(2,9),description:d.description||"",quantity:d.quantity||1,unitPrice:d.unitPrice||0,total:d.total||0};c(x=>({...x,items:[...x.items||[],p]})),f({description:"",quantity:1,unitPrice:0,total:0})},g=p=>{c(x=>{var b;return{...x,items:((b=x.items)==null?void 0:b.filter(y=>y.id!==p))||[]}})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Invoice":"Create Invoice"}),n.jsx(Fe,{children:e?"Update invoice details":"Create a new invoice"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(Ve,{value:l.customerId,onValueChange:p=>c(x=>({...x,customerId:p})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsx(Ue,{children:a.map(p=>n.jsxs(K,{value:p.id,children:[p.firstName," ",p.lastName]},p.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"invoiceNumber",children:"Invoice Number *"}),n.jsx(Pe,{id:"invoiceNumber",value:l.number,onChange:p=>c(x=>({...x,number:p.target.value})),placeholder:"e.g., INV-2024-001"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dueDate",children:"Due Date *"}),n.jsx(Pe,{id:"dueDate",type:"date",value:l.dueDate?new Date(l.dueDate).toISOString().split("T")[0]:"",onChange:p=>c(x=>({...x,dueDate:p.target.value?new Date(p.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(Ve,{value:l.status,onValueChange:p=>c(x=>({...x,status:p})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Mt.DRAFT,children:"Draft"}),n.jsx(K,{value:Mt.SENT,children:"Sent"}),n.jsx(K,{value:Mt.VIEWED,children:"Viewed"}),n.jsx(K,{value:Mt.PAID,children:"Paid"}),n.jsx(K,{value:Mt.OVERDUE,children:"Overdue"}),n.jsx(K,{value:Mt.CANCELLED,children:"Cancelled"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Items"}),n.jsxs(J,{type:"button",onClick:v,size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(ae,{htmlFor:"description",children:"Description *"}),n.jsx(Pe,{id:"description",value:d.description,onChange:p=>f(x=>({...x,description:p.target.value})),placeholder:"e.g., Service Labor"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"quantity",children:"Quantity"}),n.jsx(Pe,{id:"quantity",type:"number",min:"1",value:d.quantity,onChange:p=>f(x=>({...x,quantity:parseInt(p.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"unitPrice",children:"Unit Price"}),n.jsx(Pe,{id:"unitPrice",type:"number",step:"0.01",min:"0",value:d.unitPrice,onChange:p=>f(x=>({...x,unitPrice:parseFloat(p.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:_e(d.total||0)})]}),n.jsx(J,{type:"button",onClick:v,children:"Add Item"})]})]})}),n.jsx("div",{className:"space-y-3",children:l.items&&l.items.length>0?l.items.map(p=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:p.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",p.quantity," × ",_e(p.unitPrice)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:_e(p.total)}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(p.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]})]},p.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Js,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No items added yet"}),n.jsx("p",{className:"text-sm",children:"Add items to this invoice"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Totals"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Pe,{id:"taxRate",type:"number",step:"0.01",min:"0",max:"100",value:u*100,onChange:p=>h(parseFloat(p.target.value)/100||0)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:_e(l.subtotal||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",(u*100).toFixed(2),"%):"]}),n.jsx("span",{children:_e(l.tax||0)})]}),n.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:_e(l.total||0)})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes"}),n.jsx(tr,{id:"notes",value:l.notes,onChange:p=>c(x=>({...x,notes:p.target.value})),placeholder:"Add any additional notes about this invoice",rows:3})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Invoice"]})})]})]})})]})})}function dhe({invoiceId:e,invoiceTotal:t,remainingBalance:r,onSave:s,onCancel:a}){const{toast:i}=At(),[o,l]=w.useState(!1),[c,d]=w.useState({invoiceId:e,amount:r,method:Al.CREDIT_CARD,status:Bc.COMPLETED,processedDate:new Date,notes:""}),f=async u=>{if(u.preventDefault(),!c.amount||c.amount<=0){i({title:"Validation Error",description:"Payment amount must be greater than zero",variant:"destructive"});return}if(c.amount>r){i({title:"Validation Error",description:"Payment amount cannot exceed the remaining balance",variant:"destructive"});return}l(!0);try{await s(c),i({title:"Success",description:"Payment recorded successfully"})}catch{i({title:"Error",description:"Failed to record payment",variant:"destructive"})}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(xi,{className:"h-5 w-5 mr-2 text-primary"}),"Record Payment"]}),n.jsxs(Fe,{children:["Record a payment for invoice #",e]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"amount",children:"Payment Amount *"}),n.jsxs("div",{className:"relative",children:[n.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"amount",type:"number",step:"0.01",min:"0.01",max:r,value:c.amount,onChange:u=>d(h=>({...h,amount:parseFloat(u.target.value)||0})),className:"pl-10"})]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Remaining balance: ",_e(r)]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"method",children:"Payment Method *"}),n.jsxs(Ve,{value:c.method,onValueChange:u=>d(h=>({...h,method:u})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Al.CREDIT_CARD,children:"Credit Card"}),n.jsx(K,{value:Al.BANK_TRANSFER,children:"Bank Transfer"}),n.jsx(K,{value:Al.CASH,children:"Cash"}),n.jsx(K,{value:Al.CHECK,children:"Check"}),n.jsx(K,{value:Al.FINANCING,children:"Financing"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Payment Status *"}),n.jsxs(Ve,{value:c.status,onValueChange:u=>d(h=>({...h,status:u})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Bc.COMPLETED,children:"Completed"}),n.jsx(K,{value:Bc.PENDING,children:"Pending"}),n.jsx(K,{value:Bc.PROCESSING,children:"Processing"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"processedDate",children:"Payment Date *"}),n.jsx(Pe,{id:"processedDate",type:"date",value:c.processedDate?new Date(c.processedDate).toISOString().split("T")[0]:"",onChange:u=>d(h=>({...h,processedDate:u.target.value?new Date(u.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"transactionId",children:"Transaction ID"}),n.jsx(Pe,{id:"transactionId",value:c.transactionId||"",onChange:u=>d(h=>({...h,transactionId:u.target.value})),placeholder:"e.g., txn_1234567890"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes"}),n.jsx(tr,{id:"notes",value:c.notes||"",onChange:u=>d(h=>({...h,notes:u.target.value})),placeholder:"Add any notes about this payment",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:a,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Recording..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Record Payment"]})})]})]})})]})})}function uhe({invoice:e,payments:t,onClose:r,onEdit:s,onSendPaymentRequest:a,onRecordPayment:i}){const{toast:o}=At(),[l,c]=w.useState("details"),[d,f]=w.useState(!1),[u,h]=w.useState(!1),m=C=>{switch(C){case Mt.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Mt.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Mt.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Mt.PAID:return"bg-green-50 text-green-700 border-green-200";case Mt.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Mt.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},v=C=>{switch(C){case"completed":return n.jsx(Xr,{className:"h-4 w-4 text-green-500"});case"pending":return n.jsx(sr,{className:"h-4 w-4 text-yellow-500"});case"processing":return n.jsx(sr,{className:"h-4 w-4 text-blue-500"});case"failed":return n.jsx(oo,{className:"h-4 w-4 text-red-500"});case"refunded":return n.jsx(yh,{className:"h-4 w-4 text-purple-500"});default:return null}},g=C=>{switch(C){case"credit_card":return n.jsx(xi,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return n.jsx(It,{className:"h-4 w-4 text-green-500"});case"cash":return n.jsx(It,{className:"h-4 w-4 text-green-500"});case"check":return n.jsx(Js,{className:"h-4 w-4 text-blue-500"});case"financing":return n.jsx(It,{className:"h-4 w-4 text-purple-500"});default:return n.jsx(It,{className:"h-4 w-4 text-gray-500"})}},p=()=>{try{const C=new Tt;if(C.setFontSize(20),C.text("INVOICE",105,15,{align:"center"}),C.setFontSize(12),C.text(`Invoice #: ${e.number}`,20,30),C.text(`Date: ${ct(e.createdAt)}`,20,40),C.text(`Due Date: ${ct(e.dueDate)}`,20,50),C.text(`Status: ${e.status.toUpperCase()}`,20,60),C.setFontSize(14),C.text("Bill To:",20,75),C.setFontSize(12),C.text(`Customer ID: ${e.customerId}`,20,85),C.setFontSize(14),C.text("Invoice Items",20,105),C.autoTable({startY:110,head:[["Description","Quantity","Unit Price","Total"]],body:e.items.map(S=>[S.description,S.quantity,_e(S.unitPrice),_e(S.total)]),foot:[["","","Subtotal:",_e(e.subtotal)],["","","Tax:",_e(e.tax)],["","","Total:",_e(e.total)]],theme:"striped",headStyles:{fillColor:[66,139,202]}}),e.notes){const S=C.lastAutoTable.finalY||110;C.setFontSize(14),C.text("Notes",20,S+20),C.setFontSize(12);const N=C.splitTextToSize(e.notes,170);C.text(N,20,S+30)}C.save(`invoice-${e.number}.pdf`),o({title:"PDF Generated",description:"Invoice PDF has been downloaded"})}catch(C){console.error("Error generating PDF:",C),o({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},x=async()=>{if(a){f(!0);try{await a(e.id),o({title:"Payment Request Sent",description:"Payment request has been sent to the customer"})}catch{o({title:"Error",description:"Failed to send payment request",variant:"destructive"})}finally{f(!1)}}},b=async C=>{if(i)try{await i(C),h(!1)}catch(S){throw S}},y=t.filter(C=>C.invoiceId===e.id),j=y.reduce((C,S)=>C+S.amount,0),E=e.total-j;return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[u&&n.jsx(dhe,{invoiceId:e.id,invoiceTotal:e.total,remainingBalance:E,onSave:b,onCancel:()=>h(!1)}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Invoice #",e.number]}),n.jsx(Fe,{children:"Invoice details and payment information"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>s(e),size:"sm",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Edit Invoice"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{children:[n.jsxs(xr,{value:l,onValueChange:c,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"details",children:"Details"}),n.jsxs(Qe,{value:"payments",children:["Payments",y.length>0&&n.jsx(Re,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:y.length})]}),n.jsx(Qe,{value:"history",children:"History"})]}),n.jsxs(et,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Re,{className:He("ri-badge-status",m(e.status)),children:e.status.toUpperCase()}),e.paidDate&&n.jsxs(Re,{className:"bg-green-50 text-green-700 border-green-200",children:["PAID ON ",ct(e.paidDate)]}),e.status===Mt.OVERDUE&&n.jsx(Re,{className:"bg-red-50 text-red-700 border-red-200",children:"OVERDUE"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Invoice Number"}),n.jsx("p",{className:"font-medium",children:e.number})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:ct(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),n.jsx("p",{className:"font-medium",children:ct(e.dueDate)})]}),e.paidDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),n.jsx("p",{className:"font-medium",children:ct(e.paidDate)})]}),e.paymentMethod&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),n.jsx("p",{className:"font-medium",children:e.paymentMethod})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),n.jsx("div",{className:"space-y-3",children:e.items.map((C,S)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:C.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",C.quantity," × ",_e(C.unitPrice)]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg",children:_e(C.total)})})]},C.id))})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:_e(e.subtotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:_e(e.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:_e(e.total)})]}),y.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between text-green-600",children:[n.jsx("span",{children:"Paid:"}),n.jsx("span",{children:_e(j)})]}),n.jsxs("div",{className:"flex justify-between font-bold",children:[n.jsx("span",{children:"Balance Due:"}),n.jsx("span",{children:_e(E)})]})]})]})}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:e.notes})})]})]}),n.jsxs(et,{value:"payments",className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Payment History"}),n.jsx("div",{className:"flex space-x-2",children:e.status!==Mt.PAID&&e.status!==Mt.CANCELLED&&n.jsxs(n.Fragment,{children:[n.jsxs(J,{onClick:x,disabled:d,size:"sm",variant:"outline",children:[n.jsx(Wo,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Send Payment Request"]}),i&&E>0&&n.jsxs(J,{onClick:()=>h(!0),size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})})]}),y.length>0?n.jsxs("div",{className:"space-y-4",children:[y.map(C=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsxs("h4",{className:"font-medium",children:["Payment #",C.id.substring(0,8)]}),n.jsx(Re,{className:C.status==="completed"?"bg-green-50 text-green-700 border-green-200":C.status==="pending"?"bg-yellow-50 text-yellow-700 border-yellow-200":C.status==="processing"?"bg-blue-50 text-blue-700 border-blue-200":C.status==="failed"?"bg-red-50 text-red-700 border-red-200":C.status==="refunded"?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200",children:n.jsxs("span",{className:"flex items-center",children:[v(C.status),n.jsx("span",{className:"ml-1",children:C.status.toUpperCase()})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lr,{className:"h-3 w-3 mr-1 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Date:"}),n.jsx("span",{className:"ml-1",children:ct(C.processedDate)})]}),n.jsxs("div",{className:"flex items-center",children:[g(C.method),n.jsx("span",{className:"font-medium ml-1",children:"Method:"}),n.jsx("span",{className:"ml-1",children:C.method.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase())})]}),C.transactionId&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Js,{className:"h-3 w-3 mr-1 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Transaction ID:"}),n.jsx("span",{className:"ml-1 font-mono text-xs",children:C.transactionId})]})]}),C.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/20 p-2 rounded-md",children:C.notes})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg text-green-600",children:_e(C.amount)})})]},C.id)),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Invoice Total:"}),n.jsx("span",{children:_e(e.total)})]}),n.jsxs("div",{className:"flex justify-between text-green-700",children:[n.jsx("span",{className:"font-medium",children:"Total Paid:"}),n.jsx("span",{children:_e(j)})]}),n.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[n.jsx("span",{className:E>0?"text-red-700":"text-green-700",children:"Balance Due:"}),n.jsx("span",{className:E>0?"text-red-700":"text-green-700",children:_e(E)})]})]})})]}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(xi,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No payments recorded for this invoice"}),e.status!==Mt.PAID&&e.status!==Mt.CANCELLED&&i&&n.jsxs(J,{onClick:()=>h(!0),className:"mt-4",size:"sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]}),n.jsxs(ue,{className:"bg-blue-50 border-blue-200",children:[n.jsxs(be,{className:"pb-2",children:[n.jsx(je,{className:"text-lg text-blue-800",children:"Zego Payment Integration"}),n.jsx(Fe,{className:"text-blue-700",children:"Secure payment processing for your customers"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-3 text-blue-700",children:[n.jsx("p",{className:"text-sm",children:"When you send a payment request, your customer will receive an email with a secure link to make their payment online."}),n.jsx("p",{className:"text-sm",children:"Payments are processed securely through Zego's payment gateway, supporting credit cards, ACH transfers, and more."}),n.jsx("p",{className:"text-sm font-medium",children:"Processing fee: 2.9% + $0.30 per transaction"})]})})]})]}),n.jsxs(et,{value:"history",className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice History"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Created"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ct(e.createdAt)})]}),e.status!==Mt.DRAFT&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Sent"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ct(e.updatedAt)})]}),e.status===Mt.VIEWED&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-purple-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Viewed by Customer"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ct(e.updatedAt)})]}),e.status===Mt.PAID&&e.paidDate&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),n.jsx("div",{className:"font-medium",children:"Payment Received"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ct(e.paidDate)})]}),e.status===Mt.OVERDUE&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-red-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Overdue"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ct(e.dueDate)})]}),e.status===Mt.CANCELLED&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-gray-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Cancelled"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ct(e.updatedAt)})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(J,{variant:"outline",onClick:p,children:[n.jsx(qu,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),n.jsxs("div",{className:"flex space-x-2",children:[e.status===Mt.DRAFT&&n.jsxs(J,{children:[n.jsx(Wo,{className:"h-4 w-4 mr-2"}),"Send Invoice"]}),e.status!==Mt.PAID&&e.status!==Mt.CANCELLED&&n.jsxs(n.Fragment,{children:[n.jsxs(J,{onClick:x,disabled:d,variant:"outline",children:[n.jsx(Wo,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Request Payment"]}),i&&E>0&&n.jsxs(J,{onClick:()=>h(!0),children:[n.jsx(xi,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})]})]})]})]})]})}function fhe({payments:e,onViewPaymentDetails:t}){const{toast:r}=At(),[s,a]=w.useState(""),[i,o]=w.useState("all"),[l,c]=w.useState("all"),[d,f]=w.useState("all"),u=S=>{switch(S){case"completed":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"processing":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"refunded":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},h=S=>{switch(S){case"completed":return n.jsx(Xr,{className:"h-4 w-4 text-green-500"});case"pending":return n.jsx(sr,{className:"h-4 w-4 text-yellow-500"});case"processing":return n.jsx(sr,{className:"h-4 w-4 text-blue-500"});case"failed":return n.jsx(oo,{className:"h-4 w-4 text-red-500"});case"refunded":return n.jsx(Js,{className:"h-4 w-4 text-purple-500"});default:return null}},m=S=>{switch(S){case"credit_card":return"Credit Card";case"bank_transfer":return"Bank Transfer";case"cash":return"Cash";case"check":return"Check";case"financing":return"Financing";default:return S}},v=S=>{switch(S){case"credit_card":return n.jsx(xi,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return n.jsx(Js,{className:"h-4 w-4 text-green-500"});case"cash":return n.jsx(Js,{className:"h-4 w-4 text-green-500"});case"check":return n.jsx(Js,{className:"h-4 w-4 text-blue-500"});case"financing":return n.jsx(Js,{className:"h-4 w-4 text-purple-500"});default:return n.jsx(Js,{className:"h-4 w-4 text-gray-500"})}},g=e.filter(S=>{const N=S.invoiceId.toLowerCase().includes(s.toLowerCase())||S.id.toLowerCase().includes(s.toLowerCase())||S.transactionId&&S.transactionId.toLowerCase().includes(s.toLowerCase()),_=i==="all"||S.status===i,I=l==="all"||S.method===l;let T=!0;const A=new Date,O=S.processedDate;if(d==="today")T=O.toDateString()===A.toDateString();else if(d==="this_week"){const D=new Date(A);D.setDate(A.getDate()-A.getDay());const $=new Date(D);$.setDate(D.getDate()+6),T=O>=D&&O<=$}else d==="this_month"&&(T=O.getMonth()===A.getMonth()&&O.getFullYear()===A.getFullYear());return N&&_&&I&&T}),p=()=>{const N=[["ID","Invoice ID","Amount","Method","Status","Transaction ID","Date","Notes"].join(","),...g.map(A=>[A.id,A.invoiceId,A.amount.toFixed(2),A.method,A.status,A.transactionId||"",A.processedDate.toISOString().split("T")[0],A.notes||""].join(","))].join(`
`),_=new Blob([N],{type:"text/csv;charset=utf-8;"}),I=URL.createObjectURL(_),T=document.createElement("a");T.href=I,T.setAttribute("download","payment_history.csv"),document.body.appendChild(T),T.click(),document.body.removeChild(T),r({title:"Export Successful",description:"Payment history exported to CSV"})},x=e.length,b=e.reduce((S,N)=>S+N.amount,0),y=e.filter(S=>S.status==="completed").length,j=e.filter(S=>S.status==="pending"||S.status==="processing").length,E=e.filter(S=>S.status==="failed").length,C=e.reduce((S,N)=>{const _=N.method;return S[_]||(S[_]=0),N.status==="completed"&&(S[_]+=N.amount),S},{});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Payments"}),n.jsx(xi,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:x}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[_e(b)," processed"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Completed"}),n.jsx(Xr,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:y}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(y/x*100||0).toFixed(1),"% success rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(sr,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:j}),n.jsx("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:"Awaiting processing"})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-red-900",children:"Failed"}),n.jsx(oo,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:E}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[(E/x*100||0).toFixed(1),"% failure rate"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-lg",children:"Payment Methods"}),n.jsx(Fe,{children:"Breakdown of payments by method"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[Object.entries(C).map(([S,N])=>n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v(S),n.jsx("span",{className:"font-medium",children:m(S)})]}),n.jsx("div",{className:"text-2xl font-bold text-primary",children:_e(N)}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.filter(_=>_.method===S&&_.status==="completed").length," payments"]})]},S)),Object.keys(C).length===0&&n.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"No payment data available"})})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{placeholder:"Search payments...",value:s,onChange:S=>a(S.target.value),className:"pl-10"})]}),n.jsxs(Ve,{value:i,onValueChange:o,children:[n.jsx(ze,{className:"w-[150px]",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:"completed",children:"Completed"}),n.jsx(K,{value:"pending",children:"Pending"}),n.jsx(K,{value:"processing",children:"Processing"}),n.jsx(K,{value:"failed",children:"Failed"}),n.jsx(K,{value:"refunded",children:"Refunded"})]})]}),n.jsxs(Ve,{value:l,onValueChange:c,children:[n.jsx(ze,{className:"w-[150px]",children:n.jsx(qe,{placeholder:"Method"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Methods"}),n.jsx(K,{value:"credit_card",children:"Credit Card"}),n.jsx(K,{value:"bank_transfer",children:"Bank Transfer"}),n.jsx(K,{value:"cash",children:"Cash"}),n.jsx(K,{value:"check",children:"Check"}),n.jsx(K,{value:"financing",children:"Financing"})]})]}),n.jsxs(Ve,{value:d,onValueChange:f,children:[n.jsx(ze,{className:"w-[150px]",children:n.jsx(qe,{placeholder:"Date"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Dates"}),n.jsx(K,{value:"today",children:"Today"}),n.jsx(K,{value:"this_week",children:"This Week"}),n.jsx(K,{value:"this_month",children:"This Month"})]})]}),n.jsxs(J,{variant:"outline",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Payment History"}),n.jsx(Fe,{children:"Track and manage customer payments"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:p,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs(J,{variant:"outline",size:"sm",children:[n.jsx(qu,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),n.jsx(fe,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Invoice"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Amount"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Method"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Status"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Date"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Transaction ID"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Actions"})]})}),n.jsxs("tbody",{children:[g.map(S=>n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"font-medium",children:["#",S.invoiceId.substring(0,8)]})}),n.jsx("td",{className:"p-3 font-medium",children:_e(S.amount)}),n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[v(S.method),n.jsx("span",{children:m(S.method)})]})}),n.jsx("td",{className:"p-3",children:n.jsxs(Re,{className:He("flex items-center space-x-1",u(S.status)),children:[h(S.status),n.jsx("span",{children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]})}),n.jsx("td",{className:"p-3",children:ct(S.processedDate)}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:"font-mono text-xs",children:S.transactionId?S.transactionId:"-"})}),n.jsx("td",{className:"p-3",children:n.jsx("div",{className:"flex space-x-2",children:n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>t==null?void 0:t(S),children:"View"})})})]},S.id)),g.length===0&&n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:[n.jsx(xi,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No payments found matching your filters"})]})})]})]})})})]})]})}function Kk(){const{invoices:e,payments:t,createInvoice:r,updateInvoice:s,deleteInvoice:a,updateInvoiceStatus:i,sendInvoice:o,sendPaymentRequest:l,recordPayment:c}=F9(),{toast:d}=At(),[f,u]=w.useState(""),[h,m]=w.useState("all"),[v,g]=w.useState("invoices"),[p,x]=w.useState(!1),[b,y]=w.useState(!1),[j,E]=w.useState(null),C=D=>{switch(D){case Mt.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Mt.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Mt.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Mt.PAID:return"bg-green-50 text-green-700 border-green-200";case Mt.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Mt.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=e.filter(D=>D.number.toLowerCase().includes(f.toLowerCase())||D.customerId.toLowerCase().includes(f.toLowerCase())).filter(D=>h==="all"||D.status===h),N=()=>{E(null),x(!0)},_=D=>{E(D),x(!0),y(!1)},I=D=>{E(D),y(!0)},T=async D=>{try{j?(await s(j.id,D),d({title:"Success",description:"Invoice updated successfully"})):(await r(D),d({title:"Success",description:"Invoice created successfully"})),x(!1),E(null)}catch{d({title:"Error",description:`Failed to ${j?"update":"create"} invoice`,variant:"destructive"})}},A=async D=>{try{return await l(D),!0}catch($){throw console.error("Error sending payment request:",$),$}},O=async D=>{try{return await c(D),d({title:"Success",description:"Payment recorded successfully"}),!0}catch($){throw d({title:"Error",description:"Failed to record payment",variant:"destructive"}),$}};return n.jsxs("div",{className:"space-y-8",children:[p&&n.jsx(che,{invoice:j||void 0,onSave:T,onCancel:()=>{x(!1),E(null)}}),b&&j&&n.jsx(uhe,{invoice:j,payments:t.filter(D=>D.invoiceId===j.id),onClose:()=>y(!1),onEdit:_,onSendPaymentRequest:A,onRecordPayment:O}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Invoice & Payments"}),n.jsx("p",{className:"ri-page-description",children:"Manage invoices and process payments via Zego integration"})]}),n.jsxs(J,{className:"shadow-sm",onClick:N,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Invoice"]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Invoices"}),n.jsx(Js,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"All invoices"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Outstanding"}),n.jsx(Js,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:_e(e.filter(D=>D.status!==Mt.PAID).reduce((D,$)=>D+$.total,0))}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(It,{className:"h-3 w-3 mr-1"}),"Unpaid invoices"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Paid This Month"}),n.jsx(Js,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:_e(e.filter(D=>D.status===Mt.PAID).reduce((D,$)=>D+$.total,0))}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Revenue collected"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Payment Success Rate"}),n.jsx(xi,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"98.5%"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Xr,{className:"h-3 w-3 mr-1"}),t.filter(D=>D.status==="completed").length," successful payments"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center space-x-2 text-blue-900",children:[n.jsx(xi,{className:"h-5 w-5 text-blue-600"}),n.jsx("span",{children:"Zego Payment Integration"})]}),n.jsx(Fe,{className:"text-blue-700",children:"Seamlessly process payments and send payment requests to customers"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"99.9%"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Uptime"})]}),n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"2.9%"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Processing Fee"})]}),n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"24/7"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Support"})]})]})})]}),n.jsxs(xr,{value:v,onValueChange:g,className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-2",children:[n.jsxs(Qe,{value:"invoices",className:"flex items-center",children:[n.jsx(Js,{className:"h-4 w-4 mr-2"}),"Invoices"]}),n.jsxs(Qe,{value:"payments",className:"flex items-center",children:[n.jsx(xi,{className:"h-4 w-4 mr-2"}),"Payments"]})]}),n.jsxs(et,{value:"invoices",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search invoices...",value:f,onChange:D=>u(D.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(Ve,{value:h,onValueChange:m,children:[n.jsx(ze,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:Mt.DRAFT,children:"Draft"}),n.jsx(K,{value:Mt.SENT,children:"Sent"}),n.jsx(K,{value:Mt.VIEWED,children:"Viewed"}),n.jsx(K,{value:Mt.PAID,children:"Paid"}),n.jsx(K,{value:Mt.OVERDUE,children:"Overdue"}),n.jsx(K,{value:Mt.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Invoices"}),n.jsx(Fe,{children:"Manage invoices and track payments"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[S.map(D=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:D.number}),n.jsx(Re,{className:He("ri-badge-status",C(D.status)),children:D.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:D.customerId})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"}),n.jsx("span",{className:"ml-1 font-bold text-primary",children:_e(D.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Due Date:"}),n.jsx("span",{className:"ml-1",children:ct(D.dueDate)})]}),D.paidDate&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Paid Date:"}),n.jsx("span",{className:"ml-1",children:ct(D.paidDate)})]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[D.items.length," item(s) - ",D.notes]}),D.paymentMethod&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",D.paymentMethod]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(D),children:[n.jsx(Wl,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>_(D),children:"Edit"}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(Sa,{className:"h-3 w-3 mr-1"}),"PDF"]}),D.status!==Mt.PAID&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(D.id),children:[n.jsx(Wo,{className:"h-3 w-3 mr-1"}),"Send Payment Request"]})]})]},D.id)),S.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Js,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No invoices found"}),n.jsx("p",{className:"text-sm",children:"Create your first invoice to get started"})]})]})})]})]}),n.jsx(et,{value:"payments",children:n.jsx(fhe,{payments:t,onViewPaymentDetails:D=>{const $=e.find(M=>M.id===D.invoiceId);$&&(E($),y(!0),setTimeout(()=>{const M=document.querySelector('[role="tablist"]');if(M){const R=Array.from(M.children).find(B=>{var U;return(U=B.textContent)==null?void 0:U.includes("Payments")});R&&R.click()}},100))}})})]})]})}function hhe(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(Kk,{})}),n.jsx($t,{path:"/*",element:n.jsx(Kk,{})})]})}function mhe({field:e,onSave:t,onCancel:r,modules:s}){var g;const{toast:a}=At(),[i,o]=w.useState(!1),[l,c]=w.useState({name:"",type:di.TEXT,required:!1,options:[],module:"",section:""}),[d,f]=w.useState("");w.useEffect(()=>{e&&c({...e})},[e]);const u=async p=>{if(p.preventDefault(),!l.name||!l.module||!l.section){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if((l.type===di.SELECT||l.type===di.MULTISELECT)&&(!l.options||l.options.length===0)){a({title:"Validation Error",description:"Please add at least one option for select fields",variant:"destructive"});return}o(!0);try{await t(l),a({title:"Success",description:`Custom field ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} custom field`,variant:"destructive"})}finally{o(!1)}},h=()=>{var p;d.trim()&&!((p=l.options)!=null&&p.includes(d.trim()))&&(c(x=>({...x,options:[...x.options||[],d.trim()]})),f(""))},m=p=>{c(x=>{var b;return{...x,options:((b=x.options)==null?void 0:b.filter(y=>y!==p))||[]}})},v=p=>{switch(p){case"crm":return["Lead Information","Contact Details","Preferences","Notes"];case"inventory":return["Vehicle Details","Specifications","Pricing","Features"];case"quotes":return["Quote Details","Terms","Pricing"];case"agreements":return["Agreement Details","Terms","Conditions"];case"service":return["Service Details","Customer Requirements","Technical Notes"];case"delivery":return["Delivery Details","Customer Instructions","Logistics"];case"invoices":return["Invoice Details","Payment Terms","Additional Charges"];default:return["General","Details","Other"]}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Custom Field":"Add Custom Field"}),n.jsx(Fe,{children:e?"Update custom field details":"Create a new custom field"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Field Name *"}),n.jsx(Pe,{id:"name",value:l.name,onChange:p=>c(x=>({...x,name:p.target.value})),placeholder:"e.g., Customer Budget"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"module",children:"Module *"}),n.jsxs(Ve,{value:l.module,onValueChange:p=>{c(x=>({...x,module:p,section:""}))},children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"Select module"})}),n.jsx(Ue,{children:s.map(p=>n.jsx(K,{value:p,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"section",children:"Section *"}),n.jsxs(Ve,{value:l.section,onValueChange:p=>c(x=>({...x,section:p})),disabled:!l.module,children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:l.module?"Select section":"Select module first"})}),n.jsx(Ue,{children:l.module&&v(l.module).map(p=>n.jsx(K,{value:p,children:p},p))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Field Type *"}),n.jsxs(Ve,{value:l.type,onValueChange:p=>c(x=>({...x,type:p})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:di.TEXT,children:"Text"}),n.jsx(K,{value:di.NUMBER,children:"Number"}),n.jsx(K,{value:di.DATE,children:"Date"}),n.jsx(K,{value:di.BOOLEAN,children:"Boolean"}),n.jsx(K,{value:di.SELECT,children:"Select"}),n.jsx(K,{value:di.MULTISELECT,children:"Multi-select"})]})]})]}),(l.type===di.SELECT||l.type===di.MULTISELECT)&&n.jsxs("div",{children:[n.jsx(ae,{children:"Options"}),n.jsxs("div",{className:"flex space-x-2 mb-2",children:[n.jsx(Pe,{value:d,onChange:p=>f(p.target.value),placeholder:"Add an option",onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),h())}}),n.jsx(J,{type:"button",onClick:h,children:n.jsx(Nt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(g=l.options)==null?void 0:g.map((p,x)=>n.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[n.jsx("span",{className:"mr-2",children:p}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>m(p),children:n.jsx(Cn,{className:"h-3 w-3"})})]},x)),(!l.options||l.options.length===0)&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No options added yet"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"required",checked:l.required,onCheckedChange:p=>c(x=>({...x,required:!!p}))}),n.jsx(ae,{htmlFor:"required",children:"Required field"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Field"]})})]})]})})]})})}function phe(){const{tenant:e,updateTenantSettings:t}=Sm(),{toast:r}=At(),[s,a]=w.useState(!1),[i,o]=w.useState((e==null?void 0:e.branding.primaryColor)||"#3b82f6"),[l,c]=w.useState((e==null?void 0:e.branding.secondaryColor)||"#64748b"),[d,f]=w.useState((e==null?void 0:e.branding.fontFamily)||"Inter"),[u,h]=w.useState((e==null?void 0:e.branding.logo)||""),[m,v]=w.useState((e==null?void 0:e.branding.logo)||""),g=w.useRef(null),p=[{value:"Inter",label:"Inter"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Montserrat",label:"Montserrat"},{value:"Lato",label:"Lato"},{value:"Poppins",label:"Poppins"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Oswald",label:"Oswald"}],x=y=>{var E;const j=(E=y.target.files)==null?void 0:E[0];if(j){const C=URL.createObjectURL(j);v(C),h(C)}},b=async()=>{a(!0);try{await t({branding:{primaryColor:i,secondaryColor:l,fontFamily:d,logo:u}}),r({title:"Branding Updated",description:"Your branding settings have been saved successfully."})}catch{r({title:"Error",description:"Failed to update branding settings.",variant:"destructive"})}finally{a(!1)}};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(yM,{className:"h-5 w-5 mr-2 text-primary"}),"Branding & Appearance"]}),n.jsx(Fe,{children:"Customize your dealership's visual identity"})]}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx(ae,{children:"Company Logo"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:m?n.jsx("img",{src:m,alt:"Company Logo",className:"max-w-full max-h-full object-contain"}):n.jsx(Rh,{className:"h-12 w-12 text-muted-foreground"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{variant:"outline",onClick:()=>{var y;return(y=g.current)==null?void 0:y.click()},children:[n.jsx(hE,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),n.jsx(Pe,{type:"file",ref:g,className:"hidden",accept:"image/*",onChange:x}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Recommended size: 200x200px. Max file size: 2MB.",n.jsx("br",{}),"Supported formats: PNG, JPG, SVG"]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"primaryColor",children:"Primary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"primaryColor",value:i,onChange:y=>o(y.target.value),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:i,onChange:y=>o(y.target.value),className:"shadow-sm"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for buttons, links, and primary actions"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"secondaryColor",children:"Secondary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"secondaryColor",value:l,onChange:y=>c(y.target.value),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:l,onChange:y=>c(y.target.value),className:"shadow-sm"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for secondary elements and accents"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"fontFamily",children:"Font Family"}),n.jsxs(Ve,{value:d,onValueChange:f,children:[n.jsx(ze,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select font family"})}),n.jsx(Ue,{children:p.map(y=>n.jsx(K,{value:y.value,children:y.label},y.value))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The primary font used throughout your application"})]}),n.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),n.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:d},children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Text Preview"}),n.jsx("p",{children:"This is how your text will appear with the selected font."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Color Preview"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:i},children:"Primary"}),n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:l},children:"Secondary"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Button Preview"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("button",{className:"px-4 py-2 rounded-md text-white",style:{backgroundColor:i},children:"Primary Button"}),n.jsx("button",{className:"px-4 py-2 rounded-md border",style:{borderColor:l,color:l},children:"Secondary Button"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:b,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Branding"]})})})]})]})}function vhe(){var p,x;const{tenant:e,updateTenantSettings:t}=Sm(),{toast:r}=At(),[s,a]=w.useState(!1),[i,o]=w.useState("general"),[l,c]=w.useState(((p=e==null?void 0:e.settings)==null?void 0:p.labelOverrides)||{}),[d,f]=w.useState(((x=e==null?void 0:e.settings)==null?void 0:x.platformType)||"both"),u={general:{vehicle:"Home/RV",customer:"Customer",deal:"Deal",quote:"Quote",service:"Service",inventory:"Inventory"},crm:{lead:"Lead",prospect:"Prospect",contact:"Contact",activity:"Activity",source:"Source"},inventory:{vin:"VIN",make:"Make",model:"Model",year:"Year",type:"Type",price:"Price",cost:"Cost",features:"Features"},sales:{salesperson:"Sales Rep",commission:"Commission",deal_stage:"Deal Stage",close_date:"Close Date",financing:"Financing"},service:{technician:"Technician",service_ticket:"Service Ticket",parts:"Parts",labor:"Labor",warranty:"Warranty"}},h=(b,y,j)=>{c({...l,[`${b}.${y}`]:j})},m=(b,y)=>l[`${b}.${y}`]||"",v=b=>{const y={...l};Object.keys(y).forEach(j=>{j.startsWith(`${b}.`)&&delete y[j]}),c(y),r({title:"Labels Reset",description:`Default labels restored for ${b} module.`})},g=async()=>{a(!0);try{await t({labelOverrides:l,platformType:d}),r({title:"Labels Updated",description:"Your label overrides have been saved successfully."})}catch{r({title:"Error",description:"Failed to update label overrides.",variant:"destructive"})}finally{a(!1)}};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(fE,{className:"h-5 w-5 mr-2 text-primary"}),"Label Overrides"]}),n.jsx(Fe,{children:"Customize terminology throughout the platform"})]}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"platformType",children:"Platform Type"}),n.jsxs(Ve,{value:d,onValueChange:f,children:[n.jsx(ze,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select platform type"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"rv",children:"RV Dealership"}),n.jsx(K,{value:"mh",children:"Manufactured Housing"}),n.jsx(K,{value:"both",children:"Both RV & Manufactured Housing"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This setting affects terminology and features throughout the platform"})]}),n.jsxs(xr,{value:i,onValueChange:o,className:"space-y-4",children:[n.jsxs(hr,{className:"grid grid-cols-5",children:[n.jsx(Qe,{value:"general",children:"General"}),n.jsx(Qe,{value:"crm",children:"CRM"}),n.jsx(Qe,{value:"inventory",children:"Inventory"}),n.jsx(Qe,{value:"sales",children:"Sales"}),n.jsx(Qe,{value:"service",children:"Service"})]}),Object.entries(u).map(([b,y])=>n.jsxs(et,{value:b,className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[b," Labels"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>v(b),children:[n.jsx($h,{className:"h-3 w-3 mr-2"}),"Reset to Defaults"]})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(y).map(([j,E])=>{let C=E;return j==="vehicle"&&(d==="rv"?C="RV":d==="mh"?C="Home":C="Home/RV"),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ae,{htmlFor:`${b}-${j}`,className:"capitalize",children:j.replace(/_/g," ")}),n.jsx("div",{className:"flex space-x-2",children:n.jsx(Pe,{id:`${b}-${j}`,value:m(b,j),onChange:S=>h(b,j,S.target.value),placeholder:C,className:"shadow-sm"})}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default: ",n.jsx("span",{className:"font-medium",children:C})]})]},j)})})]},b))]}),n.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm",children:"Here's how your customized labels will appear in the application:"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(u.general).map(([b,y])=>{const j=m("general",b);let C=j||y;return b==="vehicle"&&!j&&(d==="rv"?C="RV":d==="mh"?C="Home":C="Home/RV"),n.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[n.jsxs("span",{className:"font-medium capitalize",children:[b.replace(/_/g," "),":"]})," ",n.jsx("span",{children:C})]},b)})})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:g,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Labels"]})})})]})]})}function ghe(){var le,re;const{tenant:e,updateTenantSettings:t}=Sm(),{toast:r}=At(),[s,a]=w.useState(!1),[i,o]=w.useState("email"),[l,c]=w.useState(((le=e==null?void 0:e.settings)==null?void 0:le.emailTemplates)||[]),[d,f]=w.useState(null),[u,h]=w.useState(""),[m,v]=w.useState(""),[g,p]=w.useState(""),[x,b]=w.useState("welcome"),[y,j]=w.useState(((re=e==null?void 0:e.settings)==null?void 0:re.smsTemplates)||[]),[E,C]=w.useState(null),[S,N]=w.useState(""),[_,I]=w.useState(""),[T,A]=w.useState("welcome"),[O,D]=w.useState(!1),[$,M]=w.useState("email"),[R,B]=w.useState(null),U=[{value:"welcome",label:"Welcome Email"},{value:"quote",label:"Quote Email"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"invoice",label:"Invoice Email"},{value:"password_reset",label:"Password Reset"},{value:"custom",label:"Custom Email"}],W=[{value:"welcome",label:"Welcome SMS"},{value:"quote",label:"Quote SMS"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"appointment",label:"Appointment Reminder"},{value:"custom",label:"Custom SMS"}],q=["{{first_name}}","{{last_name}}","{{company_name}}","{{quote_number}}","{{invoice_number}}","{{service_ticket}}","{{delivery_date}}","{{appointment_date}}","{{appointment_time}}","{{login_url}}","{{reset_url}}"],L=()=>{f(null),h(""),v(""),p(""),b("welcome")},V=()=>{C(null),N(""),I(""),A("welcome")},G=Ce=>{f(Ce),h(Ce.name),v(Ce.subject),p(Ce.body),b(Ce.type)},Z=Ce=>{C(Ce),N(Ce.name),I(Ce.message),A(Ce.type)},te=()=>{if(!u||!m||!g){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Ce=/\{\{([^}]+)\}\}/g,Ne=[];let ye;for(;(ye=Ce.exec(m+g))!==null;)Ne.includes(ye[1])||Ne.push(ye[1]);c(d?l.map($e=>$e.id===d.id?{...$e,name:u,subject:m,body:g,type:x,variables:Ne}:$e):[...l,{id:Math.random().toString(36).substring(2,9),name:u,subject:m,body:g,type:x,variables:Ne,isActive:!0}]),L()},he=()=>{if(!S||!_){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Ce=/\{\{([^}]+)\}\}/g,Ne=[];let ye;for(;(ye=Ce.exec(_))!==null;)Ne.includes(ye[1])||Ne.push(ye[1]);j(E?y.map($e=>$e.id===E.id?{...$e,name:S,message:_,type:T,variables:Ne}:$e):[...y,{id:Math.random().toString(36).substring(2,9),name:S,message:_,type:T,variables:Ne,isActive:!0}]),V()},me=Ce=>{c(l.filter(Ne=>Ne.id!==Ce))},oe=Ce=>{j(y.filter(Ne=>Ne.id!==Ce))},we=Ce=>{c(l.map(Ne=>Ne.id===Ce?{...Ne,isActive:!Ne.isActive}:Ne))},ve=Ce=>{j(y.map(Ne=>Ne.id===Ce?{...Ne,isActive:!Ne.isActive}:Ne))},ge=(Ce,Ne)=>{M(Ce),B(Ne),D(!0)},De=Ce=>{i==="email"?p(g+Ce):I(_+Ce)},xe=async()=>{a(!0);try{await t({emailTemplates:l,smsTemplates:y}),r({title:"Templates Updated",description:"Your notification templates have been saved successfully."})}catch{r({title:"Error",description:"Failed to update notification templates.",variant:"destructive"})}finally{a(!1)}};return n.jsxs(n.Fragment,{children:[O&&R&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Template Preview"}),n.jsx(Fe,{children:R.name})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>D(!1),children:n.jsx(X,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-4",children:[$==="email"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Subject"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:R.subject})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Body"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1 whitespace-pre-wrap",children:R.body})]})]}),$==="sms"&&n.jsxs("div",{children:[n.jsx(ae,{children:"Message"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:R.message})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Variables"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[R.variables.map((Ce,Ne)=>n.jsx(Re,{variant:"secondary",children:`{{${Ce}}}`},Ne)),R.variables.length===0&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No variables used"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:()=>D(!1),children:"Close Preview"})})]})]})}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Qr,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Templates"]}),n.jsx(Fe,{children:"Customize email and SMS notification templates"})]}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs(xr,{value:i,onValueChange:o,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-2",children:[n.jsx(Qe,{value:"email",children:"Email Templates"}),n.jsx(Qe,{value:"sms",children:"SMS Templates"})]}),n.jsx(et,{value:"email",className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Email Templates"}),n.jsxs(J,{variant:"outline",size:"sm",onClick:L,disabled:!d,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailName",children:"Template Name *"}),n.jsx(Pe,{id:"emailName",value:u,onChange:Ce=>h(Ce.target.value),placeholder:"e.g., Welcome Email",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailType",children:"Template Type"}),n.jsxs(Ve,{value:x,onValueChange:b,children:[n.jsx(ze,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select template type"})}),n.jsx(Ue,{children:U.map(Ce=>n.jsx(K,{value:Ce.value,children:Ce.label},Ce.value))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailSubject",children:"Subject Line *"}),n.jsx(Pe,{id:"emailSubject",value:m,onChange:Ce=>v(Ce.target.value),placeholder:"e.g., Welcome to {{company_name}}!",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ae,{htmlFor:"emailBody",children:"Email Body *"}),n.jsxs(Ve,{value:"",onValueChange:Ce=>De(Ce),children:[n.jsx(ze,{className:"w-[200px] shadow-sm",children:n.jsx(qe,{placeholder:"Insert variable"})}),n.jsx(Ue,{children:q.map(Ce=>n.jsx(K,{value:Ce,children:Ce},Ce))})]})]}),n.jsx(tr,{id:"emailBody",value:g,onChange:Ce=>p(Ce.target.value),placeholder:"Enter your email content here...",className:"shadow-sm",rows:10})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:L,children:"Cancel"}),n.jsx(J,{type:"button",onClick:te,children:d?"Update Template":"Add Template"})]})]})}),n.jsxs("div",{className:"space-y-3 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),l.length>0?l.map(Ce=>{var Ne;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium",children:Ce.name}),n.jsx(Re,{variant:"outline",children:((Ne=U.find(ye=>ye.value===Ce.type))==null?void 0:Ne.label)||Ce.type}),!Ce.isActive&&n.jsx(Re,{variant:"secondary",children:"Inactive"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Subject: ",Ce.subject]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>we(Ce.id),children:Ce.isActive?"Disable":"Enable"}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ge("email",Ce),children:n.jsx(Wl,{className:"h-4 w-4"})}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>G(Ce),children:"Edit"}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>me(Ce.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]})]},Ce.id)}):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Qr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No email templates created yet"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})}),n.jsx(et,{value:"sms",className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"SMS Templates"}),n.jsxs(J,{variant:"outline",size:"sm",onClick:V,disabled:!E,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsName",children:"Template Name *"}),n.jsx(Pe,{id:"smsName",value:S,onChange:Ce=>N(Ce.target.value),placeholder:"e.g., Appointment Reminder",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsType",children:"Template Type"}),n.jsxs(Ve,{value:T,onValueChange:A,children:[n.jsx(ze,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select template type"})}),n.jsx(Ue,{children:W.map(Ce=>n.jsx(K,{value:Ce.value,children:Ce.label},Ce.value))})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ae,{htmlFor:"smsMessage",children:"Message *"}),n.jsxs(Ve,{value:"",onValueChange:Ce=>De(Ce),children:[n.jsx(ze,{className:"w-[200px] shadow-sm",children:n.jsx(qe,{placeholder:"Insert variable"})}),n.jsx(Ue,{children:q.map(Ce=>n.jsx(K,{value:Ce,children:Ce},Ce))})]})]}),n.jsx(tr,{id:"smsMessage",value:_,onChange:Ce=>I(Ce.target.value),placeholder:"Enter your SMS message here...",className:"shadow-sm",rows:4}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[n.jsxs("span",{children:[_.length," characters"]}),n.jsxs("span",{children:[160-_.length," remaining"]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:V,children:"Cancel"}),n.jsx(J,{type:"button",onClick:he,children:E?"Update Template":"Add Template"})]})]})}),n.jsxs("div",{className:"space-y-3 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),y.length>0?y.map(Ce=>{var Ne;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium",children:Ce.name}),n.jsx(Re,{variant:"outline",children:((Ne=W.find(ye=>ye.value===Ce.type))==null?void 0:Ne.label)||Ce.type}),!Ce.isActive&&n.jsx(Re,{variant:"secondary",children:"Inactive"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:Ce.message})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ve(Ce.id),children:Ce.isActive?"Disable":"Enable"}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ge("sms",Ce),children:n.jsx(Wl,{className:"h-4 w-4"})}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>Z(Ce),children:"Edit"}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>oe(Ce.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]})]},Ce.id)}):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ln,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No SMS templates created yet"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:xe,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Templates"]})})})]})]})]})}function xhe(){var he,me,oe,we,ve,ge,De,xe,le,re,Ce;const{tenant:e,updateTenantSettings:t}=Sm(),{toast:r}=At(),[s,a]=w.useState(!1),[i,o]=w.useState(((he=e==null?void 0:e.settings)==null?void 0:he.emailProvider)||"default"),[l,c]=w.useState(((me=e==null?void 0:e.settings)==null?void 0:me.emailApiKey)||""),[d,f]=w.useState(((oe=e==null?void 0:e.settings)==null?void 0:oe.emailFromAddress)||""),[u,h]=w.useState(((we=e==null?void 0:e.settings)==null?void 0:we.emailFromName)||""),[m,v]=w.useState(((ve=e==null?void 0:e.settings)==null?void 0:ve.smsProvider)||"default"),[g,p]=w.useState(((ge=e==null?void 0:e.settings)==null?void 0:ge.smsApiKey)||""),[x,b]=w.useState(((De=e==null?void 0:e.settings)==null?void 0:De.smsFromNumber)||""),[y,j]=w.useState(((xe=e==null?void 0:e.settings)==null?void 0:xe.webhooks)||[]),[E,C]=w.useState(""),[S,N]=w.useState(""),[_,I]=w.useState(((le=e==null?void 0:e.settings)==null?void 0:le.apiEnabled)||!1),[T,A]=w.useState(((re=e==null?void 0:e.settings)==null?void 0:re.apiKey)||""),[O,D]=w.useState(((Ce=e==null?void 0:e.settings)==null?void 0:Ce.allowedOrigins)||[]),[$,M]=w.useState(""),R=[{value:"default",label:"Default (Platform)"},{value:"sendgrid",label:"SendGrid"},{value:"mailchimp",label:"Mailchimp"},{value:"mailgun",label:"Mailgun"},{value:"smtp",label:"Custom SMTP"}],B=[{value:"default",label:"Default (Platform)"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}],U=[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"quote.created",label:"Quote Created"},{value:"quote.accepted",label:"Quote Accepted"},{value:"service.created",label:"Service Ticket Created"},{value:"service.completed",label:"Service Completed"},{value:"vehicle.created",label:"Home/RV Created"},{value:"vehicle.sold",label:"Home/RV Sold"}],W=()=>{!E||!S||(j([...y,{id:Math.random().toString(36).substring(2,9),event:E,url:S,active:!0}]),C(""),N(""))},q=Ne=>{j(y.filter(ye=>ye.id!==Ne))},L=Ne=>{j(y.map(ye=>ye.id===Ne?{...ye,active:!ye.active}:ye))},V=()=>{$&&(D([...O,$]),M(""))},G=Ne=>{D(O.filter(ye=>ye!==Ne))},Z=()=>{const Ne=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(ye=>ye.toString(16).padStart(2,"0")).join("");A(Ne)},te=async()=>{a(!0);try{await t({emailProvider:i,emailApiKey:l,emailFromAddress:d,emailFromName:u,smsProvider:m,smsApiKey:g,smsFromNumber:x,webhooks:y,apiEnabled:_,apiKey:T,allowedOrigins:O}),r({title:"Integrations Updated",description:"Your integration settings have been saved successfully."})}catch{r({title:"Error",description:"Failed to update integration settings.",variant:"destructive"})}finally{a(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Qr,{className:"h-5 w-5 mr-2 text-primary"}),"Email Provider"]}),n.jsx(Fe,{children:"Configure your email delivery service"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailProvider",children:"Provider"}),n.jsxs(Ve,{value:i,onValueChange:o,children:[n.jsx(ze,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select email provider"})}),n.jsx(Ue,{children:R.map(Ne=>n.jsx(K,{value:Ne.value,children:Ne.label},Ne.value))})]})]}),i!=="default"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailApiKey",children:"API Key"}),n.jsx(Pe,{id:"emailApiKey",type:"password",value:l,onChange:Ne=>c(Ne.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailFromAddress",children:"From Email Address"}),n.jsx(Pe,{id:"emailFromAddress",type:"email",value:d,onChange:Ne=>f(Ne.target.value),className:"shadow-sm",placeholder:"noreply@yourdomain.com"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailFromName",children:"From Name"}),n.jsx(Pe,{id:"emailFromName",value:u,onChange:Ne=>h(Ne.target.value),className:"shadow-sm",placeholder:"Your Company Name"})]})]})]}),i==="default"&&n.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:n.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform email provider. No additional configuration needed."})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(ln,{className:"h-5 w-5 mr-2 text-primary"}),"SMS Provider"]}),n.jsx(Fe,{children:"Configure your SMS delivery service"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsProvider",children:"Provider"}),n.jsxs(Ve,{value:m,onValueChange:v,children:[n.jsx(ze,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select SMS provider"})}),n.jsx(Ue,{children:B.map(Ne=>n.jsx(K,{value:Ne.value,children:Ne.label},Ne.value))})]})]}),m!=="default"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsApiKey",children:"API Key"}),n.jsx(Pe,{id:"smsApiKey",type:"password",value:g,onChange:Ne=>p(Ne.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsFromNumber",children:"From Number"}),n.jsx(Pe,{id:"smsFromNumber",value:x,onChange:Ne=>b(Ne.target.value),className:"shadow-sm",placeholder:"+1234567890"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +1234567890)"})]})]}),m==="default"&&n.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:n.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform SMS provider. No additional configuration needed."})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(E_,{className:"h-5 w-5 mr-2 text-primary"}),"Webhooks"]}),n.jsx(Fe,{children:"Configure webhooks to receive event notifications"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"webhookEvent",children:"Event"}),n.jsxs(Ve,{value:E,onValueChange:C,children:[n.jsx(ze,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select event"})}),n.jsx(Ue,{children:U.map(Ne=>n.jsx(K,{value:Ne.value,children:Ne.label},Ne.value))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"webhookUrl",children:"Webhook URL"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{id:"webhookUrl",value:S,onChange:Ne=>N(Ne.target.value),className:"shadow-sm flex-1",placeholder:"https://your-endpoint.com/webhook"}),n.jsx(J,{type:"button",onClick:W,children:n.jsx(Nt,{className:"h-4 w-4"})})]})]})]}),n.jsx("div",{className:"space-y-3 mt-4",children:y.length>0?y.map(Ne=>{var ye;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Vt,{checked:Ne.active,onCheckedChange:()=>L(Ne.id)}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:((ye=U.find($e=>$e.value===Ne.event))==null?void 0:ye.label)||Ne.event}),n.jsx("div",{className:"text-sm text-muted-foreground",children:Ne.url})]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>q(Ne.id),children:n.jsx(Cn,{className:"h-4 w-4 text-red-500"})})]},Ne.id)}):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(E_,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No webhooks configured"}),n.jsx("p",{className:"text-sm",children:"Add webhooks to receive event notifications"})]})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(ex,{className:"h-5 w-5 mr-2 text-primary"}),"API Access"]}),n.jsx(Fe,{children:"Configure API access for external integrations"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"apiEnabled",checked:_,onCheckedChange:Ne=>I(!!Ne)}),n.jsx(ae,{htmlFor:"apiEnabled",children:"Enable API access"})]}),_&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"apiKey",children:"API Key"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{id:"apiKey",type:"password",value:T,onChange:Ne=>A(Ne.target.value),className:"shadow-sm flex-1",placeholder:"API key will appear here",readOnly:!0}),n.jsx(J,{type:"button",onClick:Z,children:"Generate"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keep this key secure. It provides full access to your account."})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"allowedOrigins",children:"Allowed Origins (CORS)"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{id:"allowedOrigins",value:$,onChange:Ne=>M(Ne.target.value),className:"shadow-sm flex-1",placeholder:"https://your-domain.com"}),n.jsx(J,{type:"button",onClick:V,children:n.jsx(Nt,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Domains that are allowed to make API requests"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[O.map((Ne,ye)=>n.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[n.jsx("span",{className:"mr-2",children:Ne}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>G(Ne),children:n.jsx(Cn,{className:"h-3 w-3"})})]},ye)),O.length===0&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No origins added yet"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:te,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Integrations"]})})})]})}function Yk(){const{tenant:e,customFields:t,updateTenantSettings:r,addCustomField:s,updateCustomField:a,deleteCustomField:i}=Sm(),{toast:o}=At(),[l,c]=w.useState("general"),[d,f]=w.useState(!1),u=[{id:"general",name:"General",icon:Zv},{id:"branding",name:"Branding",icon:yM},{id:"labels",name:"Labels",icon:fE},{id:"notifications",name:"Notifications",icon:Qr},{id:"integrations",name:"Integrations",icon:ex},{id:"users",name:"Users",icon:Ln},{id:"custom-fields",name:"Custom Fields",icon:tg}],h=["crm","inventory","quotes","agreements","service","delivery","invoices"],m=()=>{setSelectedCustomField(null),f(!0)},v=N=>{setSelectedCustomField(N),f(!0)},g=async N=>{if(window.confirm("Are you sure you want to delete this custom field?"))try{await i(N),o({title:"Success",description:"Custom field deleted successfully"})}catch{o({title:"Error",description:"Failed to delete custom field",variant:"destructive"})}},p=async N=>{try{return selectedCustomField?await a(selectedCustomField.id,N):await s(N),f(!1),!0}catch{return!1}},x=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Company Information"}),n.jsx(Fe,{children:"Basic information about your dealership"})]}),n.jsx(fe,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Company Name"}),n.jsx(Pe,{defaultValue:e==null?void 0:e.name,className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Domain"}),n.jsx(Pe,{defaultValue:e==null?void 0:e.domain,className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Timezone"}),n.jsx(Pe,{defaultValue:e==null?void 0:e.settings.timezone,className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Currency"}),n.jsx(Pe,{defaultValue:e==null?void 0:e.settings.currency,className:"mt-1 shadow-sm"})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Business Hours"}),n.jsx(Fe,{children:"Set your dealership operating hours"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:(e==null?void 0:e.settings.businessHours)&&Object.entries(e.settings.businessHours).map(([N,_])=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[n.jsx("div",{className:"w-24 capitalize font-medium",children:N}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Pe,{type:"time",defaultValue:_.open,disabled:_.closed,className:"w-32 shadow-sm"}),n.jsx("span",{className:"text-muted-foreground",children:"to"}),n.jsx(Pe,{type:"time",defaultValue:_.close,disabled:_.closed,className:"w-32 shadow-sm"}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",defaultChecked:_.closed,className:"rounded"}),n.jsx("span",{className:"text-sm",children:"Closed"})]})]})]},N))})})]})]}),b=()=>n.jsx(phe,{}),y=()=>n.jsx(vhe,{}),j=()=>n.jsx(ghe,{}),E=()=>n.jsx(xhe,{}),C=()=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"User Management"}),n.jsx(Fe,{children:"Manage user accounts and permissions"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage users, roles, and permissions for your dealership"}),n.jsxs(J,{className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:"Admin User"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"admin@renterinsight.com"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200",children:"Admin"}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",children:n.jsx(zr,{className:"h-3 w-3"})})]})]})})]})]}),S=()=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Custom Fields"}),n.jsx(Fe,{children:"Add custom fields to capture additional information"})]}),n.jsxs(J,{className:"shadow-sm",onClick:m,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Custom Field"]})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[t.map(N=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:N.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[N.module," - ",N.section," - ",N.type,N.required&&n.jsx(Re,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",variant:"secondary",children:"Required"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>v(N),children:"Edit"}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>g(N.id),children:"Delete"})]})]},N.id)),t.length===0&&n.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/30 rounded-lg",children:"No custom fields configured yet"})]})})]});return n.jsxs("div",{className:"space-y-8",children:[d&&n.jsx(mhe,{field:selectedCustomField||void 0,onSave:p,onCancel:()=>f(!1),modules:h}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Company Settings"}),n.jsx("p",{className:"ri-page-description",children:"Configure your dealership settings and preferences"})]}),n.jsxs(J,{onClick:yhe,className:"shadow-sm",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})}),n.jsx("div",{className:"border-b",children:n.jsx("nav",{className:"-mb-px flex flex-wrap space-x-4 md:space-x-8",children:u.map(N=>n.jsxs("button",{onClick:()=>c(N.id),className:He("flex items-center space-x-2 py-3 px-1 border-b-2 font-medium text-sm transition-colors",l===N.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"),children:[n.jsx(N.icon,{className:"h-4 w-4"}),n.jsx("span",{children:N.name})]},N.id))})}),n.jsxs("div",{children:[l==="general"&&x(),l==="branding"&&b(),l==="labels"&&y(),l==="notifications"&&j(),l==="integrations"&&E(),l==="users"&&C(),l==="custom-fields"&&S()]})]})}const yhe=async()=>{console.log("Saving settings...")};function bhe(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(Yk,{})}),n.jsx($t,{path:"/*",element:n.jsx(Yk,{})})]})}function M9(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=M9(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function cr(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=M9(e))&&(s&&(s+=" "),s+=t);return s}var jhe=Array.isArray,Ea=jhe,whe=typeof Vn=="object"&&Vn&&Vn.Object===Object&&Vn,B9=whe,Nhe=B9,She=typeof self=="object"&&self&&self.Object===Object&&self,Che=Nhe||She||Function("return this")(),il=Che,Ahe=il,Ehe=Ahe.Symbol,xx=Ehe,Xk=xx,z9=Object.prototype,Phe=z9.hasOwnProperty,The=z9.toString,Vp=Xk?Xk.toStringTag:void 0;function _he(e){var t=Phe.call(e,Vp),r=e[Vp];try{e[Vp]=void 0;var s=!0}catch{}var a=The.call(e);return s&&(t?e[Vp]=r:delete e[Vp]),a}var Ihe=_he,khe=Object.prototype,Dhe=khe.toString;function Ohe(e){return Dhe.call(e)}var Lhe=Ohe,Qk=xx,Rhe=Ihe,$he=Lhe,Fhe="[object Null]",Mhe="[object Undefined]",Jk=Qk?Qk.toStringTag:void 0;function Bhe(e){return e==null?e===void 0?Mhe:Fhe:Jk&&Jk in Object(e)?Rhe(e):$he(e)}var ec=Bhe;function zhe(e){return e!=null&&typeof e=="object"}var tc=zhe,Uhe=ec,Vhe=tc,qhe="[object Symbol]";function Whe(e){return typeof e=="symbol"||Vhe(e)&&Uhe(e)==qhe}var Dm=Whe,Hhe=Ea,Ghe=Dm,Khe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yhe=/^\w*$/;function Xhe(e,t){if(Hhe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Ghe(e)?!0:Yhe.test(e)||!Khe.test(e)||t!=null&&e in Object(t)}var mP=Xhe;function Qhe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Sd=Qhe;const Om=Cr(Sd);var Jhe=ec,Zhe=Sd,eme="[object AsyncFunction]",tme="[object Function]",rme="[object GeneratorFunction]",nme="[object Proxy]";function sme(e){if(!Zhe(e))return!1;var t=Jhe(e);return t==tme||t==rme||t==eme||t==nme}var pP=sme;const Zt=Cr(pP);var ame=il,ime=ame["__core-js_shared__"],ome=ime,XN=ome,Zk=function(){var e=/[^.]+$/.exec(XN&&XN.keys&&XN.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function lme(e){return!!Zk&&Zk in e}var cme=lme,dme=Function.prototype,ume=dme.toString;function fme(e){if(e!=null){try{return ume.call(e)}catch{}try{return e+""}catch{}}return""}var U9=fme,hme=pP,mme=cme,pme=Sd,vme=U9,gme=/[\\^$.*+?()[\]{}|]/g,xme=/^\[object .+?Constructor\]$/,yme=Function.prototype,bme=Object.prototype,jme=yme.toString,wme=bme.hasOwnProperty,Nme=RegExp("^"+jme.call(wme).replace(gme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sme(e){if(!pme(e)||mme(e))return!1;var t=hme(e)?Nme:xme;return t.test(vme(e))}var Cme=Sme;function Ame(e,t){return e==null?void 0:e[t]}var Eme=Ame,Pme=Cme,Tme=Eme;function _me(e,t){var r=Tme(e,t);return Pme(r)?r:void 0}var Ju=_me,Ime=Ju,kme=Ime(Object,"create"),Gj=kme,eD=Gj;function Dme(){this.__data__=eD?eD(null):{},this.size=0}var Ome=Dme;function Lme(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Rme=Lme,$me=Gj,Fme="__lodash_hash_undefined__",Mme=Object.prototype,Bme=Mme.hasOwnProperty;function zme(e){var t=this.__data__;if($me){var r=t[e];return r===Fme?void 0:r}return Bme.call(t,e)?t[e]:void 0}var Ume=zme,Vme=Gj,qme=Object.prototype,Wme=qme.hasOwnProperty;function Hme(e){var t=this.__data__;return Vme?t[e]!==void 0:Wme.call(t,e)}var Gme=Hme,Kme=Gj,Yme="__lodash_hash_undefined__";function Xme(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Kme&&t===void 0?Yme:t,this}var Qme=Xme,Jme=Ome,Zme=Rme,epe=Ume,tpe=Gme,rpe=Qme;function Lm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Lm.prototype.clear=Jme;Lm.prototype.delete=Zme;Lm.prototype.get=epe;Lm.prototype.has=tpe;Lm.prototype.set=rpe;var npe=Lm;function spe(){this.__data__=[],this.size=0}var ape=spe;function ipe(e,t){return e===t||e!==e&&t!==t}var vP=ipe,ope=vP;function lpe(e,t){for(var r=e.length;r--;)if(ope(e[r][0],t))return r;return-1}var Kj=lpe,cpe=Kj,dpe=Array.prototype,upe=dpe.splice;function fpe(e){var t=this.__data__,r=cpe(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():upe.call(t,r,1),--this.size,!0}var hpe=fpe,mpe=Kj;function ppe(e){var t=this.__data__,r=mpe(t,e);return r<0?void 0:t[r][1]}var vpe=ppe,gpe=Kj;function xpe(e){return gpe(this.__data__,e)>-1}var ype=xpe,bpe=Kj;function jpe(e,t){var r=this.__data__,s=bpe(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var wpe=jpe,Npe=ape,Spe=hpe,Cpe=vpe,Ape=ype,Epe=wpe;function Rm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Rm.prototype.clear=Npe;Rm.prototype.delete=Spe;Rm.prototype.get=Cpe;Rm.prototype.has=Ape;Rm.prototype.set=Epe;var Yj=Rm,Ppe=Ju,Tpe=il,_pe=Ppe(Tpe,"Map"),gP=_pe,tD=npe,Ipe=Yj,kpe=gP;function Dpe(){this.size=0,this.__data__={hash:new tD,map:new(kpe||Ipe),string:new tD}}var Ope=Dpe;function Lpe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Rpe=Lpe,$pe=Rpe;function Fpe(e,t){var r=e.__data__;return $pe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Xj=Fpe,Mpe=Xj;function Bpe(e){var t=Mpe(this,e).delete(e);return this.size-=t?1:0,t}var zpe=Bpe,Upe=Xj;function Vpe(e){return Upe(this,e).get(e)}var qpe=Vpe,Wpe=Xj;function Hpe(e){return Wpe(this,e).has(e)}var Gpe=Hpe,Kpe=Xj;function Ype(e,t){var r=Kpe(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var Xpe=Ype,Qpe=Ope,Jpe=zpe,Zpe=qpe,eve=Gpe,tve=Xpe;function $m(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}$m.prototype.clear=Qpe;$m.prototype.delete=Jpe;$m.prototype.get=Zpe;$m.prototype.has=eve;$m.prototype.set=tve;var xP=$m,V9=xP,rve="Expected a function";function yP(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(rve);var r=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,s);return r.cache=i.set(a,o)||i,o};return r.cache=new(yP.Cache||V9),r}yP.Cache=V9;var q9=yP;const nve=Cr(q9);var sve=q9,ave=500;function ive(e){var t=sve(e,function(s){return r.size===ave&&r.clear(),s}),r=t.cache;return t}var ove=ive,lve=ove,cve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dve=/\\(\\)?/g,uve=lve(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(cve,function(r,s,a,i){t.push(a?i.replace(dve,"$1"):s||r)}),t}),fve=uve;function hve(e,t){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=t(e[r],r,e);return a}var bP=hve,rD=xx,mve=bP,pve=Ea,vve=Dm,gve=1/0,nD=rD?rD.prototype:void 0,sD=nD?nD.toString:void 0;function W9(e){if(typeof e=="string")return e;if(pve(e))return mve(e,W9)+"";if(vve(e))return sD?sD.call(e):"";var t=e+"";return t=="0"&&1/e==-gve?"-0":t}var xve=W9,yve=xve;function bve(e){return e==null?"":yve(e)}var H9=bve,jve=Ea,wve=mP,Nve=fve,Sve=H9;function Cve(e,t){return jve(e)?e:wve(e,t)?[e]:Nve(Sve(e))}var G9=Cve,Ave=Dm,Eve=1/0;function Pve(e){if(typeof e=="string"||Ave(e))return e;var t=e+"";return t=="0"&&1/e==-Eve?"-0":t}var Qj=Pve,Tve=G9,_ve=Qj;function Ive(e,t){t=Tve(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[_ve(t[r++])];return r&&r==s?e:void 0}var jP=Ive,kve=jP;function Dve(e,t,r){var s=e==null?void 0:kve(e,t);return s===void 0?r:s}var K9=Dve;const bi=Cr(K9);function Ove(e){return e==null}var Lve=Ove;const rr=Cr(Lve);var Rve=ec,$ve=Ea,Fve=tc,Mve="[object String]";function Bve(e){return typeof e=="string"||!$ve(e)&&Fve(e)&&Rve(e)==Mve}var zve=Bve;const Ru=Cr(zve);var Y9={exports:{}},Ir={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wP=Symbol.for("react.element"),NP=Symbol.for("react.portal"),Jj=Symbol.for("react.fragment"),Zj=Symbol.for("react.strict_mode"),ew=Symbol.for("react.profiler"),tw=Symbol.for("react.provider"),rw=Symbol.for("react.context"),Uve=Symbol.for("react.server_context"),nw=Symbol.for("react.forward_ref"),sw=Symbol.for("react.suspense"),aw=Symbol.for("react.suspense_list"),iw=Symbol.for("react.memo"),ow=Symbol.for("react.lazy"),Vve=Symbol.for("react.offscreen"),X9;X9=Symbol.for("react.module.reference");function Pi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wP:switch(e=e.type,e){case Jj:case ew:case Zj:case sw:case aw:return e;default:switch(e=e&&e.$$typeof,e){case Uve:case rw:case nw:case ow:case iw:case tw:return e;default:return t}}case NP:return t}}}Ir.ContextConsumer=rw;Ir.ContextProvider=tw;Ir.Element=wP;Ir.ForwardRef=nw;Ir.Fragment=Jj;Ir.Lazy=ow;Ir.Memo=iw;Ir.Portal=NP;Ir.Profiler=ew;Ir.StrictMode=Zj;Ir.Suspense=sw;Ir.SuspenseList=aw;Ir.isAsyncMode=function(){return!1};Ir.isConcurrentMode=function(){return!1};Ir.isContextConsumer=function(e){return Pi(e)===rw};Ir.isContextProvider=function(e){return Pi(e)===tw};Ir.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wP};Ir.isForwardRef=function(e){return Pi(e)===nw};Ir.isFragment=function(e){return Pi(e)===Jj};Ir.isLazy=function(e){return Pi(e)===ow};Ir.isMemo=function(e){return Pi(e)===iw};Ir.isPortal=function(e){return Pi(e)===NP};Ir.isProfiler=function(e){return Pi(e)===ew};Ir.isStrictMode=function(e){return Pi(e)===Zj};Ir.isSuspense=function(e){return Pi(e)===sw};Ir.isSuspenseList=function(e){return Pi(e)===aw};Ir.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Jj||e===ew||e===Zj||e===sw||e===aw||e===Vve||typeof e=="object"&&e!==null&&(e.$$typeof===ow||e.$$typeof===iw||e.$$typeof===tw||e.$$typeof===rw||e.$$typeof===nw||e.$$typeof===X9||e.getModuleId!==void 0)};Ir.typeOf=Pi;Y9.exports=Ir;var qve=Y9.exports,Wve=ec,Hve=tc,Gve="[object Number]";function Kve(e){return typeof e=="number"||Hve(e)&&Wve(e)==Gve}var Q9=Kve;const Yve=Cr(Q9);var Xve=Q9;function Qve(e){return Xve(e)&&e!=+e}var Jve=Qve;const Fm=Cr(Jve);var so=function(t){return t===0?0:t>0?1:-1},fu=function(t){return Ru(t)&&t.indexOf("%")===t.length-1},it=function(t){return Yve(t)&&!Fm(t)},Zve=function(t){return rr(t)},es=function(t){return it(t)||Ru(t)},ege=0,Mm=function(t){var r=++ege;return"".concat(t||"").concat(r)},$u=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!it(t)&&!Ru(t))return s;var i;if(fu(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Fm(i)&&(i=s),a&&i>r&&(i=r),i},Lc=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},tge=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,s={},a=0;a<r;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},Ss=function(t,r){return it(t)&&it(r)?function(s){return t+s*(r-t)}:function(){return r}};function Bb(e,t,r){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):bi(s,t))===r})}var rge=function(t,r){return it(t)&&it(r)?t-r:Ru(t)&&Ru(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Nh(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function CC(e){"@babel/helpers - typeof";return CC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CC(e)}var nge=["viewBox","children"],sge=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],aD=["points","pathLength"],QN={svg:nge,polygon:aD,polyline:aD},SP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],zb=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(w.isValidElement(t)&&(s=t.props),!Om(s))return null;var a={};return Object.keys(s).forEach(function(i){SP.includes(i)&&(a[i]=r||function(o){return s[i](s,o)})}),a},age=function(t,r,s){return function(a){return t(r,s,a),null}},Ub=function(t,r,s){if(!Om(t)||CC(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];SP.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=age(o,r,s))}),a},ige=["children"],oge=["children"];function iD(e,t){if(e==null)return{};var r=lge(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function lge(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function AC(e){"@babel/helpers - typeof";return AC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AC(e)}var oD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Rl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},lD=null,JN=null,CP=function e(t){if(t===lD&&Array.isArray(JN))return JN;var r=[];return w.Children.forEach(t,function(s){rr(s)||(qve.isFragment(s)?r=r.concat(e(s.props.children)):r.push(s))}),JN=r,lD=t,r};function ji(e,t){var r=[],s=[];return Array.isArray(t)?s=t.map(function(a){return Rl(a)}):s=[Rl(t)],CP(e).forEach(function(a){var i=bi(a,"type.displayName")||bi(a,"type.name");s.indexOf(i)!==-1&&r.push(a)}),r}function Ra(e,t){var r=ji(e,t);return r&&r[0]}var cD=function(t){if(!t||!t.props)return!1;var r=t.props,s=r.width,a=r.height;return!(!it(s)||s<=0||!it(a)||a<=0)},cge=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],dge=function(t){return t&&t.type&&Ru(t.type)&&cge.indexOf(t.type)>=0},J9=function(t){return t&&AC(t)==="object"&&"clipDot"in t},uge=function(t,r,s,a){var i,o=(i=QN==null?void 0:QN[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Zt(t)&&(a&&o.includes(r)||sge.includes(r))||s&&SP.includes(r)},er=function(t,r,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(w.isValidElement(t)&&(a=t.props),!Om(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;uge((l=a)===null||l===void 0?void 0:l[o],o,r,s)&&(i[o]=a[o])}),i},EC=function e(t,r){if(t===r)return!0;var s=w.Children.count(t);if(s!==w.Children.count(r))return!1;if(s===0)return!0;if(s===1)return dD(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<s;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!dD(i,o))return!1}return!0},dD=function(t,r){if(rr(t)&&rr(r))return!0;if(!rr(t)&&!rr(r)){var s=t.props||{},a=s.children,i=iD(s,ige),o=r.props||{},l=o.children,c=iD(o,oge);return a&&l?Nh(i,c)&&EC(a,l):!a&&!l?Nh(i,c):!1}return!1},uD=function(t,r){var s=[],a={};return CP(t).forEach(function(i,o){if(dge(i))s.push(i);else if(i){var l=Rl(i.type),c=r[l]||{},d=c.handler,f=c.once;if(d&&(!f||!a[l])){var u=d(i,l,o);s.push(u),a[l]=!0}}}),s},fge=function(t){var r=t&&t.type;return r&&oD[r]?oD[r]:null},hge=function(t,r){return CP(r).indexOf(t)},mge=["children","width","height","viewBox","className","style","title","desc"];function PC(){return PC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},PC.apply(this,arguments)}function pge(e,t){if(e==null)return{};var r=vge(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function vge(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function TC(e){var t=e.children,r=e.width,s=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=pge(e,mge),f=a||{width:r,height:s,x:0,y:0},u=cr("recharts-surface",i);return ce.createElement("svg",PC({},er(d,!0,"svg"),{className:u,width:r,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ce.createElement("title",null,l),ce.createElement("desc",null,c),t)}var gge=["children","className"];function _C(){return _C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_C.apply(this,arguments)}function xge(e,t){if(e==null)return{};var r=yge(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function yge(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var Yr=ce.forwardRef(function(e,t){var r=e.children,s=e.className,a=xge(e,gge),i=cr("recharts-layer",s);return ce.createElement("g",_C({className:i},er(a,!0),{ref:t}),r)}),$l=function(t,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function bge(e,t,r){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var jge=bge,wge=jge;function Nge(e,t,r){var s=e.length;return r=r===void 0?s:r,!t&&r>=s?e:wge(e,t,r)}var Sge=Nge,Cge="\\ud800-\\udfff",Age="\\u0300-\\u036f",Ege="\\ufe20-\\ufe2f",Pge="\\u20d0-\\u20ff",Tge=Age+Ege+Pge,_ge="\\ufe0e\\ufe0f",Ige="\\u200d",kge=RegExp("["+Ige+Cge+Tge+_ge+"]");function Dge(e){return kge.test(e)}var Z9=Dge;function Oge(e){return e.split("")}var Lge=Oge,ez="\\ud800-\\udfff",Rge="\\u0300-\\u036f",$ge="\\ufe20-\\ufe2f",Fge="\\u20d0-\\u20ff",Mge=Rge+$ge+Fge,Bge="\\ufe0e\\ufe0f",zge="["+ez+"]",IC="["+Mge+"]",kC="\\ud83c[\\udffb-\\udfff]",Uge="(?:"+IC+"|"+kC+")",tz="[^"+ez+"]",rz="(?:\\ud83c[\\udde6-\\uddff]){2}",nz="[\\ud800-\\udbff][\\udc00-\\udfff]",Vge="\\u200d",sz=Uge+"?",az="["+Bge+"]?",qge="(?:"+Vge+"(?:"+[tz,rz,nz].join("|")+")"+az+sz+")*",Wge=az+sz+qge,Hge="(?:"+[tz+IC+"?",IC,rz,nz,zge].join("|")+")",Gge=RegExp(kC+"(?="+kC+")|"+Hge+Wge,"g");function Kge(e){return e.match(Gge)||[]}var Yge=Kge,Xge=Lge,Qge=Z9,Jge=Yge;function Zge(e){return Qge(e)?Jge(e):Xge(e)}var exe=Zge,txe=Sge,rxe=Z9,nxe=exe,sxe=H9;function axe(e){return function(t){t=sxe(t);var r=rxe(t)?nxe(t):void 0,s=r?r[0]:t.charAt(0),a=r?txe(r,1).join(""):t.slice(1);return s[e]()+a}}var ixe=axe,oxe=ixe,lxe=oxe("toUpperCase"),cxe=lxe;const lw=Cr(cxe);function Hr(e){return function(){return e}}const iz=Math.cos,Vb=Math.sin,xo=Math.sqrt,qb=Math.PI,cw=2*qb,DC=Math.PI,OC=2*DC,Xd=1e-6,dxe=OC-Xd;function oz(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function uxe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return oz;const r=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class fxe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?oz:uxe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,s,a){this._append`Q${+t},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,r,s,a,i,o){this._append`C${+t},${+r},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,s,a,i){if(t=+t,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=a-r,f=o-t,u=l-r,h=f*f+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Xd)if(!(Math.abs(u*c-d*f)>Xd)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=s-o,v=a-l,g=c*c+d*d,p=m*m+v*v,x=Math.sqrt(g),b=Math.sqrt(h),y=i*Math.tan((DC-Math.acos((g+h-p)/(2*x*b)))/2),j=y/b,E=y/x;Math.abs(j-1)>Xd&&this._append`L${t+j*f},${r+j*u}`,this._append`A${i},${i},0,0,${+(u*m>f*v)},${this._x1=t+E*c},${this._y1=r+E*d}`}}arc(t,r,s,a,i,o){if(t=+t,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),c=s*Math.sin(a),d=t+l,f=r+c,u=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Xd||Math.abs(this._y1-f)>Xd)&&this._append`L${d},${f}`,s&&(h<0&&(h=h%OC+OC),h>dxe?this._append`A${s},${s},0,1,${u},${t-l},${r-c}A${s},${s},0,1,${u},${this._x1=d},${this._y1=f}`:h>Xd&&this._append`A${s},${s},0,${+(h>=DC)},${u},${this._x1=t+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(t,r,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function AP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);t=s}return e},()=>new fxe(t)}function EP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lz(e){this._context=e}lz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function dw(e){return new lz(e)}function cz(e){return e[0]}function dz(e){return e[1]}function uz(e,t){var r=Hr(!0),s=null,a=dw,i=null,o=AP(l);e=typeof e=="function"?e:e===void 0?cz:Hr(e),t=typeof t=="function"?t:t===void 0?dz:Hr(t);function l(c){var d,f=(c=EP(c)).length,u,h=!1,m;for(s==null&&(i=a(m=o())),d=0;d<=f;++d)!(d<f&&r(u=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(u,d,c),+t(u,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Hr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Hr(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Hr(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),l):s},l}function sy(e,t,r){var s=null,a=Hr(!0),i=null,o=dw,l=null,c=AP(d);e=typeof e=="function"?e:e===void 0?cz:Hr(+e),t=typeof t=="function"?t:Hr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?dz:Hr(+r);function d(u){var h,m,v,g=(u=EP(u)).length,p,x=!1,b,y=new Array(g),j=new Array(g);for(i==null&&(l=o(b=c())),h=0;h<=g;++h){if(!(h<g&&a(p=u[h],h,u))===x)if(x=!x)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=h-1;v>=m;--v)l.point(y[v],j[v]);l.lineEnd(),l.areaEnd()}x&&(y[h]=+e(p,h,u),j[h]=+t(p,h,u),l.point(s?+s(p,h,u):y[h],r?+r(p,h,u):j[h]))}if(b)return l=null,b+""||null}function f(){return uz().defined(a).curve(o).context(i)}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:Hr(+u),s=null,d):e},d.x0=function(u){return arguments.length?(e=typeof u=="function"?u:Hr(+u),d):e},d.x1=function(u){return arguments.length?(s=u==null?null:typeof u=="function"?u:Hr(+u),d):s},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:Hr(+u),r=null,d):t},d.y0=function(u){return arguments.length?(t=typeof u=="function"?u:Hr(+u),d):t},d.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Hr(+u),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(s).y(t)},d.defined=function(u){return arguments.length?(a=typeof u=="function"?u:Hr(!!u),d):a},d.curve=function(u){return arguments.length?(o=u,i!=null&&(l=o(i)),d):o},d.context=function(u){return arguments.length?(u==null?i=l=null:l=o(i=u),d):i},d}class fz{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function hxe(e){return new fz(e,!0)}function mxe(e){return new fz(e,!1)}const PP={draw(e,t){const r=xo(t/qb);e.moveTo(r,0),e.arc(0,0,r,0,cw)}},pxe={draw(e,t){const r=xo(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},hz=xo(1/3),vxe=hz*2,gxe={draw(e,t){const r=xo(t/vxe),s=r*hz;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},xxe={draw(e,t){const r=xo(t),s=-r/2;e.rect(s,s,r,r)}},yxe=.8908130915292852,mz=Vb(qb/10)/Vb(7*qb/10),bxe=Vb(cw/10)*mz,jxe=-iz(cw/10)*mz,wxe={draw(e,t){const r=xo(t*yxe),s=bxe*r,a=jxe*r;e.moveTo(0,-r),e.lineTo(s,a);for(let i=1;i<5;++i){const o=cw*i/5,l=iz(o),c=Vb(o);e.lineTo(c*r,-l*r),e.lineTo(l*s-c*a,c*s+l*a)}e.closePath()}},ZN=xo(3),Nxe={draw(e,t){const r=-xo(t/(ZN*3));e.moveTo(0,r*2),e.lineTo(-ZN*r,-r),e.lineTo(ZN*r,-r),e.closePath()}},oi=-.5,li=xo(3)/2,LC=1/xo(12),Sxe=(LC/2+1)*3,Cxe={draw(e,t){const r=xo(t/Sxe),s=r/2,a=r*LC,i=s,o=r*LC+r,l=-i,c=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(oi*s-li*a,li*s+oi*a),e.lineTo(oi*i-li*o,li*i+oi*o),e.lineTo(oi*l-li*c,li*l+oi*c),e.lineTo(oi*s+li*a,oi*a-li*s),e.lineTo(oi*i+li*o,oi*o-li*i),e.lineTo(oi*l+li*c,oi*c-li*l),e.closePath()}};function Axe(e,t){let r=null,s=AP(a);e=typeof e=="function"?e:Hr(e||PP),t=typeof t=="function"?t:Hr(t===void 0?64:+t);function a(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Hr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Hr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Wb(){}function Hb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function pz(e){this._context=e}pz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Hb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Exe(e){return new pz(e)}function vz(e){this._context=e}vz.prototype={areaStart:Wb,areaEnd:Wb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Hb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Pxe(e){return new vz(e)}function gz(e){this._context=e}gz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:Hb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Txe(e){return new gz(e)}function xz(e){this._context=e}xz.prototype={areaStart:Wb,areaEnd:Wb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _xe(e){return new xz(e)}function fD(e){return e<0?-1:1}function hD(e,t,r){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(r-e._y1)/(a||s<0&&-0),l=(i*a+o*s)/(s+a);return(fD(i)+fD(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function mD(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function e5(e,t,r){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,a+l*t,i-l,o-l*r,i,o)}function Gb(e){this._context=e}Gb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:e5(this,this._t0,mD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,e5(this,mD(this,r=hD(this,e,t)),r);break;default:e5(this,this._t0,r=hD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function yz(e){this._context=new bz(e)}(yz.prototype=Object.create(Gb.prototype)).point=function(e,t){Gb.prototype.point.call(this,t,e)};function bz(e){this._context=e}bz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,a,i){this._context.bezierCurveTo(t,e,s,r,i,a)}};function Ixe(e){return new Gb(e)}function kxe(e){return new yz(e)}function jz(e){this._context=e}jz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var s=pD(e),a=pD(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function pD(e){var t,r=e.length-1,s,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=a[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Dxe(e){return new jz(e)}function uw(e,t){this._context=e,this._t=t}uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Oxe(e){return new uw(e,.5)}function Lxe(e){return new uw(e,0)}function Rxe(e){return new uw(e,1)}function Wh(e,t){if((o=e.length)>1)for(var r=1,s,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function RC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function $xe(e,t){return e[t]}function Fxe(e){const t=[];return t.key=e,t}function Mxe(){var e=Hr([]),t=RC,r=Wh,s=$xe;function a(i){var o=Array.from(e.apply(this,arguments),Fxe),l,c=o.length,d=-1,f;for(const u of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(u,o[l].key,d,i)]).data=u;for(l=0,f=EP(t(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Hr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:Hr(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?RC:typeof i=="function"?i:Hr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Wh,a):r},a}function Bxe(e,t){if((s=e.length)>0){for(var r,s,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<s;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<s;++r)e[r][a][1]/=o}Wh(e,t)}}function zxe(e,t){if((a=e.length)>0){for(var r=0,s=e[t[0]],a,i=s.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;s[r][1]+=s[r][0]=-l/2}Wh(e,t)}}function Uxe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,s=1,a,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var f=e[t[l]],u=f[s][1]||0,h=f[s-1][1]||0,m=(u-h)/2,v=0;v<l;++v){var g=e[t[v]],p=g[s][1]||0,x=g[s-1][1]||0;m+=p-x}c+=u,d+=m*u}a[s-1][1]+=a[s-1][0]=r,c&&(r-=d/c)}a[s-1][1]+=a[s-1][0]=r,Wh(e,t)}}function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}var Vxe=["type","size","sizeType"];function $C(){return $C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$C.apply(this,arguments)}function vD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function gD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vD(Object(r),!0).forEach(function(s){qxe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function qxe(e,t,r){return t=Wxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wxe(e){var t=Hxe(e,"string");return fg(t)=="symbol"?t:t+""}function Hxe(e,t){if(fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(fg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gxe(e,t){if(e==null)return{};var r=Kxe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Kxe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var wz={symbolCircle:PP,symbolCross:pxe,symbolDiamond:gxe,symbolSquare:xxe,symbolStar:wxe,symbolTriangle:Nxe,symbolWye:Cxe},Yxe=Math.PI/180,Xxe=function(t){var r="symbol".concat(lw(t));return wz[r]||PP},Qxe=function(t,r,s){if(r==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Yxe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Jxe=function(t,r){wz["symbol".concat(lw(t))]=r},TP=function(t){var r=t.type,s=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Gxe(t,Vxe),d=gD(gD({},c),{},{type:s,size:i,sizeType:l}),f=function(){var p=Xxe(s),x=Axe().type(p).size(Qxe(i,l,s));return x()},u=d.className,h=d.cx,m=d.cy,v=er(d,!0);return h===+h&&m===+m&&i===+i?ce.createElement("path",$C({},v,{className:cr("recharts-symbols",u),transform:"translate(".concat(h,", ").concat(m,")"),d:f()})):null};TP.registerSymbol=Jxe;function Hh(e){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hh(e)}function FC(){return FC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},FC.apply(this,arguments)}function xD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Zxe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xD(Object(r),!0).forEach(function(s){hg(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function e0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yD(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Sz(s.key),s)}}function t0e(e,t,r){return t&&yD(e.prototype,t),r&&yD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r0e(e,t,r){return t=Kb(t),n0e(e,Nz()?Reflect.construct(t,r||[],Kb(e).constructor):t.apply(e,r))}function n0e(e,t){if(t&&(Hh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s0e(e)}function s0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nz=function(){return!!e})()}function Kb(e){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(e)}function a0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MC(e,t)}function MC(e,t){return MC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},MC(e,t)}function hg(e,t,r){return t=Sz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sz(e){var t=i0e(e,"string");return Hh(t)=="symbol"?t:t+""}function i0e(e,t){if(Hh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Hh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ci=32,_P=function(e){function t(){return e0e(this,t),r0e(this,t,arguments)}return a0e(t,e),t0e(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=ci/2,o=ci/6,l=ci/3,c=s.inactive?a:s.color;if(s.type==="plainline")return ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:ci,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ci,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ci/8,"h").concat(ci,"v").concat(ci*3/4,"h").concat(-ci,"z"),className:"recharts-legend-icon"});if(ce.isValidElement(s.legendIcon)){var d=Zxe({},s);return delete d.legendIcon,ce.cloneElement(s.legendIcon,d)}return ce.createElement(TP,{fill:c,cx:i,cy:i,size:ci,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,f={x:0,y:0,width:ci,height:ci},u={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,v){var g=m.formatter||c,p=cr(hg(hg({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=Zt(m.value)?null:m.value;$l(!Zt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?d:m.color;return ce.createElement("li",FC({className:p,style:u,key:"legend-item-".concat(v)},Ub(s.props,m,v)),ce.createElement(TC,{width:o,height:o,viewBox:f,style:h},s.renderIcon(m)),ce.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(x,m,v):x))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,o=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ce.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(w.PureComponent);hg(_P,"displayName","Legend");hg(_P,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var o0e=Yj;function l0e(){this.__data__=new o0e,this.size=0}var c0e=l0e;function d0e(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var u0e=d0e;function f0e(e){return this.__data__.get(e)}var h0e=f0e;function m0e(e){return this.__data__.has(e)}var p0e=m0e,v0e=Yj,g0e=gP,x0e=xP,y0e=200;function b0e(e,t){var r=this.__data__;if(r instanceof v0e){var s=r.__data__;if(!g0e||s.length<y0e-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new x0e(s)}return r.set(e,t),this.size=r.size,this}var j0e=b0e,w0e=Yj,N0e=c0e,S0e=u0e,C0e=h0e,A0e=p0e,E0e=j0e;function Bm(e){var t=this.__data__=new w0e(e);this.size=t.size}Bm.prototype.clear=N0e;Bm.prototype.delete=S0e;Bm.prototype.get=C0e;Bm.prototype.has=A0e;Bm.prototype.set=E0e;var Cz=Bm,P0e="__lodash_hash_undefined__";function T0e(e){return this.__data__.set(e,P0e),this}var _0e=T0e;function I0e(e){return this.__data__.has(e)}var k0e=I0e,D0e=xP,O0e=_0e,L0e=k0e;function Yb(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new D0e;++t<r;)this.add(e[t])}Yb.prototype.add=Yb.prototype.push=O0e;Yb.prototype.has=L0e;var Az=Yb;function R0e(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}var Ez=R0e;function $0e(e,t){return e.has(t)}var Pz=$0e,F0e=Az,M0e=Ez,B0e=Pz,z0e=1,U0e=2;function V0e(e,t,r,s,a,i){var o=r&z0e,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var u=-1,h=!0,m=r&U0e?new F0e:void 0;for(i.set(e,t),i.set(t,e);++u<l;){var v=e[u],g=t[u];if(s)var p=o?s(g,v,u,t,e,i):s(v,g,u,e,t,i);if(p!==void 0){if(p)continue;h=!1;break}if(m){if(!M0e(t,function(x,b){if(!B0e(m,b)&&(v===x||a(v,x,r,s,i)))return m.push(b)})){h=!1;break}}else if(!(v===g||a(v,g,r,s,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var Tz=V0e,q0e=il,W0e=q0e.Uint8Array,H0e=W0e;function G0e(e){var t=-1,r=Array(e.size);return e.forEach(function(s,a){r[++t]=[a,s]}),r}var K0e=G0e;function Y0e(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var IP=Y0e,bD=xx,jD=H0e,X0e=vP,Q0e=Tz,J0e=K0e,Z0e=IP,eye=1,tye=2,rye="[object Boolean]",nye="[object Date]",sye="[object Error]",aye="[object Map]",iye="[object Number]",oye="[object RegExp]",lye="[object Set]",cye="[object String]",dye="[object Symbol]",uye="[object ArrayBuffer]",fye="[object DataView]",wD=bD?bD.prototype:void 0,t5=wD?wD.valueOf:void 0;function hye(e,t,r,s,a,i,o){switch(r){case fye:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case uye:return!(e.byteLength!=t.byteLength||!i(new jD(e),new jD(t)));case rye:case nye:case iye:return X0e(+e,+t);case sye:return e.name==t.name&&e.message==t.message;case oye:case cye:return e==t+"";case aye:var l=J0e;case lye:var c=s&eye;if(l||(l=Z0e),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=tye,o.set(e,t);var f=Q0e(l(e),l(t),s,a,i,o);return o.delete(e),f;case dye:if(t5)return t5.call(e)==t5.call(t)}return!1}var mye=hye;function pye(e,t){for(var r=-1,s=t.length,a=e.length;++r<s;)e[a+r]=t[r];return e}var _z=pye,vye=_z,gye=Ea;function xye(e,t,r){var s=t(e);return gye(e)?s:vye(s,r(e))}var yye=xye;function bye(e,t){for(var r=-1,s=e==null?0:e.length,a=0,i=[];++r<s;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var jye=bye;function wye(){return[]}var Nye=wye,Sye=jye,Cye=Nye,Aye=Object.prototype,Eye=Aye.propertyIsEnumerable,ND=Object.getOwnPropertySymbols,Pye=ND?function(e){return e==null?[]:(e=Object(e),Sye(ND(e),function(t){return Eye.call(e,t)}))}:Cye,Tye=Pye;function _ye(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var Iye=_ye,kye=ec,Dye=tc,Oye="[object Arguments]";function Lye(e){return Dye(e)&&kye(e)==Oye}var Rye=Lye,SD=Rye,$ye=tc,Iz=Object.prototype,Fye=Iz.hasOwnProperty,Mye=Iz.propertyIsEnumerable,Bye=SD(function(){return arguments}())?SD:function(e){return $ye(e)&&Fye.call(e,"callee")&&!Mye.call(e,"callee")},kP=Bye,Xb={exports:{}};function zye(){return!1}var Uye=zye;Xb.exports;(function(e,t){var r=il,s=Uye,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(Xb,Xb.exports);var kz=Xb.exports,Vye=9007199254740991,qye=/^(?:0|[1-9]\d*)$/;function Wye(e,t){var r=typeof e;return t=t??Vye,!!t&&(r=="number"||r!="symbol"&&qye.test(e))&&e>-1&&e%1==0&&e<t}var DP=Wye,Hye=9007199254740991;function Gye(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Hye}var OP=Gye,Kye=ec,Yye=OP,Xye=tc,Qye="[object Arguments]",Jye="[object Array]",Zye="[object Boolean]",ebe="[object Date]",tbe="[object Error]",rbe="[object Function]",nbe="[object Map]",sbe="[object Number]",abe="[object Object]",ibe="[object RegExp]",obe="[object Set]",lbe="[object String]",cbe="[object WeakMap]",dbe="[object ArrayBuffer]",ube="[object DataView]",fbe="[object Float32Array]",hbe="[object Float64Array]",mbe="[object Int8Array]",pbe="[object Int16Array]",vbe="[object Int32Array]",gbe="[object Uint8Array]",xbe="[object Uint8ClampedArray]",ybe="[object Uint16Array]",bbe="[object Uint32Array]",en={};en[fbe]=en[hbe]=en[mbe]=en[pbe]=en[vbe]=en[gbe]=en[xbe]=en[ybe]=en[bbe]=!0;en[Qye]=en[Jye]=en[dbe]=en[Zye]=en[ube]=en[ebe]=en[tbe]=en[rbe]=en[nbe]=en[sbe]=en[abe]=en[ibe]=en[obe]=en[lbe]=en[cbe]=!1;function jbe(e){return Xye(e)&&Yye(e.length)&&!!en[Kye(e)]}var wbe=jbe;function Nbe(e){return function(t){return e(t)}}var Dz=Nbe,Qb={exports:{}};Qb.exports;(function(e,t){var r=B9,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Qb,Qb.exports);var Sbe=Qb.exports,Cbe=wbe,Abe=Dz,CD=Sbe,AD=CD&&CD.isTypedArray,Ebe=AD?Abe(AD):Cbe,Oz=Ebe,Pbe=Iye,Tbe=kP,_be=Ea,Ibe=kz,kbe=DP,Dbe=Oz,Obe=Object.prototype,Lbe=Obe.hasOwnProperty;function Rbe(e,t){var r=_be(e),s=!r&&Tbe(e),a=!r&&!s&&Ibe(e),i=!r&&!s&&!a&&Dbe(e),o=r||s||a||i,l=o?Pbe(e.length,String):[],c=l.length;for(var d in e)(t||Lbe.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||kbe(d,c)))&&l.push(d);return l}var $be=Rbe,Fbe=Object.prototype;function Mbe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Fbe;return e===r}var Bbe=Mbe;function zbe(e,t){return function(r){return e(t(r))}}var Lz=zbe,Ube=Lz,Vbe=Ube(Object.keys,Object),qbe=Vbe,Wbe=Bbe,Hbe=qbe,Gbe=Object.prototype,Kbe=Gbe.hasOwnProperty;function Ybe(e){if(!Wbe(e))return Hbe(e);var t=[];for(var r in Object(e))Kbe.call(e,r)&&r!="constructor"&&t.push(r);return t}var Xbe=Ybe,Qbe=pP,Jbe=OP;function Zbe(e){return e!=null&&Jbe(e.length)&&!Qbe(e)}var yx=Zbe,e1e=$be,t1e=Xbe,r1e=yx;function n1e(e){return r1e(e)?e1e(e):t1e(e)}var fw=n1e,s1e=yye,a1e=Tye,i1e=fw;function o1e(e){return s1e(e,i1e,a1e)}var l1e=o1e,ED=l1e,c1e=1,d1e=Object.prototype,u1e=d1e.hasOwnProperty;function f1e(e,t,r,s,a,i){var o=r&c1e,l=ED(e),c=l.length,d=ED(t),f=d.length;if(c!=f&&!o)return!1;for(var u=c;u--;){var h=l[u];if(!(o?h in t:u1e.call(t,h)))return!1}var m=i.get(e),v=i.get(t);if(m&&v)return m==t&&v==e;var g=!0;i.set(e,t),i.set(t,e);for(var p=o;++u<c;){h=l[u];var x=e[h],b=t[h];if(s)var y=o?s(b,x,h,t,e,i):s(x,b,h,e,t,i);if(!(y===void 0?x===b||a(x,b,r,s,i):y)){g=!1;break}p||(p=h=="constructor")}if(g&&!p){var j=e.constructor,E=t.constructor;j!=E&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof E=="function"&&E instanceof E)&&(g=!1)}return i.delete(e),i.delete(t),g}var h1e=f1e,m1e=Ju,p1e=il,v1e=m1e(p1e,"DataView"),g1e=v1e,x1e=Ju,y1e=il,b1e=x1e(y1e,"Promise"),j1e=b1e,w1e=Ju,N1e=il,S1e=w1e(N1e,"Set"),Rz=S1e,C1e=Ju,A1e=il,E1e=C1e(A1e,"WeakMap"),P1e=E1e,BC=g1e,zC=gP,UC=j1e,VC=Rz,qC=P1e,$z=ec,zm=U9,PD="[object Map]",T1e="[object Object]",TD="[object Promise]",_D="[object Set]",ID="[object WeakMap]",kD="[object DataView]",_1e=zm(BC),I1e=zm(zC),k1e=zm(UC),D1e=zm(VC),O1e=zm(qC),Qd=$z;(BC&&Qd(new BC(new ArrayBuffer(1)))!=kD||zC&&Qd(new zC)!=PD||UC&&Qd(UC.resolve())!=TD||VC&&Qd(new VC)!=_D||qC&&Qd(new qC)!=ID)&&(Qd=function(e){var t=$z(e),r=t==T1e?e.constructor:void 0,s=r?zm(r):"";if(s)switch(s){case _1e:return kD;case I1e:return PD;case k1e:return TD;case D1e:return _D;case O1e:return ID}return t});var L1e=Qd,r5=Cz,R1e=Tz,$1e=mye,F1e=h1e,DD=L1e,OD=Ea,LD=kz,M1e=Oz,B1e=1,RD="[object Arguments]",$D="[object Array]",ay="[object Object]",z1e=Object.prototype,FD=z1e.hasOwnProperty;function U1e(e,t,r,s,a,i){var o=OD(e),l=OD(t),c=o?$D:DD(e),d=l?$D:DD(t);c=c==RD?ay:c,d=d==RD?ay:d;var f=c==ay,u=d==ay,h=c==d;if(h&&LD(e)){if(!LD(t))return!1;o=!0,f=!1}if(h&&!f)return i||(i=new r5),o||M1e(e)?R1e(e,t,r,s,a,i):$1e(e,t,c,r,s,a,i);if(!(r&B1e)){var m=f&&FD.call(e,"__wrapped__"),v=u&&FD.call(t,"__wrapped__");if(m||v){var g=m?e.value():e,p=v?t.value():t;return i||(i=new r5),a(g,p,r,s,i)}}return h?(i||(i=new r5),F1e(e,t,r,s,a,i)):!1}var V1e=U1e,q1e=V1e,MD=tc;function Fz(e,t,r,s,a){return e===t?!0:e==null||t==null||!MD(e)&&!MD(t)?e!==e&&t!==t:q1e(e,t,r,s,Fz,a)}var LP=Fz,W1e=Cz,H1e=LP,G1e=1,K1e=2;function Y1e(e,t,r,s){var a=r.length,i=a,o=!s;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],d=e[c],f=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var u=new W1e;if(s)var h=s(d,f,c,e,t,u);if(!(h===void 0?H1e(f,d,G1e|K1e,s,u):h))return!1}}return!0}var X1e=Y1e,Q1e=Sd;function J1e(e){return e===e&&!Q1e(e)}var Mz=J1e,Z1e=Mz,eje=fw;function tje(e){for(var t=eje(e),r=t.length;r--;){var s=t[r],a=e[s];t[r]=[s,a,Z1e(a)]}return t}var rje=tje;function nje(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Bz=nje,sje=X1e,aje=rje,ije=Bz;function oje(e){var t=aje(e);return t.length==1&&t[0][2]?ije(t[0][0],t[0][1]):function(r){return r===e||sje(r,e,t)}}var lje=oje;function cje(e,t){return e!=null&&t in Object(e)}var dje=cje,uje=G9,fje=kP,hje=Ea,mje=DP,pje=OP,vje=Qj;function gje(e,t,r){t=uje(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var o=vje(t[s]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&pje(a)&&mje(o,a)&&(hje(e)||fje(e)))}var xje=gje,yje=dje,bje=xje;function jje(e,t){return e!=null&&bje(e,t,yje)}var wje=jje,Nje=LP,Sje=K9,Cje=wje,Aje=mP,Eje=Mz,Pje=Bz,Tje=Qj,_je=1,Ije=2;function kje(e,t){return Aje(e)&&Eje(t)?Pje(Tje(e),t):function(r){var s=Sje(r,e);return s===void 0&&s===t?Cje(r,e):Nje(t,s,_je|Ije)}}var Dje=kje;function Oje(e){return e}var Um=Oje;function Lje(e){return function(t){return t==null?void 0:t[e]}}var Rje=Lje,$je=jP;function Fje(e){return function(t){return $je(t,e)}}var Mje=Fje,Bje=Rje,zje=Mje,Uje=mP,Vje=Qj;function qje(e){return Uje(e)?Bje(Vje(e)):zje(e)}var Wje=qje,Hje=lje,Gje=Dje,Kje=Um,Yje=Ea,Xje=Wje;function Qje(e){return typeof e=="function"?e:e==null?Kje:typeof e=="object"?Yje(e)?Gje(e[0],e[1]):Hje(e):Xje(e)}var Cd=Qje;function Jje(e,t,r,s){for(var a=e.length,i=r+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var zz=Jje;function Zje(e){return e!==e}var ewe=Zje;function twe(e,t,r){for(var s=r-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var rwe=twe,nwe=zz,swe=ewe,awe=rwe;function iwe(e,t,r){return t===t?awe(e,t,r):nwe(e,swe,r)}var owe=iwe,lwe=owe;function cwe(e,t){var r=e==null?0:e.length;return!!r&&lwe(e,t,0)>-1}var dwe=cwe;function uwe(e,t,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(t,e[s]))return!0;return!1}var fwe=uwe;function hwe(){}var mwe=hwe,n5=Rz,pwe=mwe,vwe=IP,gwe=1/0,xwe=n5&&1/vwe(new n5([,-0]))[1]==gwe?function(e){return new n5(e)}:pwe,ywe=xwe,bwe=Az,jwe=dwe,wwe=fwe,Nwe=Pz,Swe=ywe,Cwe=IP,Awe=200;function Ewe(e,t,r){var s=-1,a=jwe,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=wwe;else if(i>=Awe){var d=t?null:Swe(e);if(d)return Cwe(d);o=!1,a=Nwe,c=new bwe}else c=t?[]:l;e:for(;++s<i;){var f=e[s],u=t?t(f):f;if(f=r||f!==0?f:0,o&&u===u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),l.push(f)}else a(c,u,r)||(c!==l&&c.push(u),l.push(f))}return l}var Pwe=Ewe,Twe=Cd,_we=Pwe;function Iwe(e,t){return e&&e.length?_we(e,Twe(t)):[]}var kwe=Iwe;const BD=Cr(kwe);function Uz(e,t,r){return t===!0?BD(e,r):Zt(t)?BD(e,t):e}function Gh(e){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(e)}var Dwe=["ref"];function zD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zD(Object(r),!0).forEach(function(s){hw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Owe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UD(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,qz(s.key),s)}}function Lwe(e,t,r){return t&&UD(e.prototype,t),r&&UD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rwe(e,t,r){return t=Jb(t),$we(e,Vz()?Reflect.construct(t,r||[],Jb(e).constructor):t.apply(e,r))}function $we(e,t){if(t&&(Gh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fwe(e)}function Fwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vz=function(){return!!e})()}function Jb(e){return Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jb(e)}function Mwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WC(e,t)}function WC(e,t){return WC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},WC(e,t)}function hw(e,t,r){return t=qz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qz(e){var t=Bwe(e,"string");return Gh(t)=="symbol"?t:t+""}function Bwe(e,t){if(Gh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Gh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zwe(e,t){if(e==null)return{};var r=Uwe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Uwe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Vwe(e){return e.value}function qwe(e,t){if(ce.isValidElement(e))return ce.cloneElement(e,t);if(typeof e=="function")return ce.createElement(e,t);t.ref;var r=zwe(t,Dwe);return ce.createElement(_P,r)}var VD=1,Sh=function(e){function t(){var r;Owe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=Rwe(this,t,[].concat(a)),hw(r,"lastBoundingBox",{width:-1,height:-1}),r}return Mwe(t,e),Lwe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>VD||Math.abs(a.height-this.lastBoundingBox.height)>VD)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?bl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,f=a.chartHeight,u,h;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();u={left:((d||0)-m.width)/2}}else u=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();h={top:((f||0)-v.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return bl(bl({},u),h)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,f=a.payload,u=bl(bl({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ce.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(m){s.wrapperNode=m}},qwe(i,bl(bl({},this.props),{},{payload:Uz(f,d,Vwe)})))}}],[{key:"getWithHeight",value:function(s,a){var i=bl(bl({},this.defaultProps),s.props),o=i.layout;return o==="vertical"&&it(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||a}:null}}])}(w.PureComponent);hw(Sh,"displayName","Legend");hw(Sh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var qD=xx,Wwe=kP,Hwe=Ea,WD=qD?qD.isConcatSpreadable:void 0;function Gwe(e){return Hwe(e)||Wwe(e)||!!(WD&&e&&e[WD])}var Kwe=Gwe,Ywe=_z,Xwe=Kwe;function Wz(e,t,r,s,a){var i=-1,o=e.length;for(r||(r=Xwe),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?Wz(l,t-1,r,s,a):Ywe(a,l):s||(a[a.length]=l)}return a}var Hz=Wz;function Qwe(e){return function(t,r,s){for(var a=-1,i=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var Jwe=Qwe,Zwe=Jwe,e2e=Zwe(),t2e=e2e,r2e=t2e,n2e=fw;function s2e(e,t){return e&&r2e(e,t,n2e)}var Gz=s2e,a2e=yx;function i2e(e,t){return function(r,s){if(r==null)return r;if(!a2e(r))return e(r,s);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&s(o[i],i,o)!==!1;);return r}}var o2e=i2e,l2e=Gz,c2e=o2e,d2e=c2e(l2e),RP=d2e,u2e=RP,f2e=yx;function h2e(e,t){var r=-1,s=f2e(e)?Array(e.length):[];return u2e(e,function(a,i,o){s[++r]=t(a,i,o)}),s}var Kz=h2e;function m2e(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var p2e=m2e,HD=Dm;function v2e(e,t){if(e!==t){var r=e!==void 0,s=e===null,a=e===e,i=HD(e),o=t!==void 0,l=t===null,c=t===t,d=HD(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||s&&o&&c||!r&&c||!a)return 1;if(!s&&!i&&!d&&e<t||d&&r&&a&&!s&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var g2e=v2e,x2e=g2e;function y2e(e,t,r){for(var s=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++s<o;){var c=x2e(a[s],i[s]);if(c){if(s>=l)return c;var d=r[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var b2e=y2e,s5=bP,j2e=jP,w2e=Cd,N2e=Kz,S2e=p2e,C2e=Dz,A2e=b2e,E2e=Um,P2e=Ea;function T2e(e,t,r){t.length?t=s5(t,function(i){return P2e(i)?function(o){return j2e(o,i.length===1?i[0]:i)}:i}):t=[E2e];var s=-1;t=s5(t,C2e(w2e));var a=N2e(e,function(i,o,l){var c=s5(t,function(d){return d(i)});return{criteria:c,index:++s,value:i}});return S2e(a,function(i,o){return A2e(i,o,r)})}var _2e=T2e;function I2e(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var k2e=I2e,D2e=k2e,GD=Math.max;function O2e(e,t,r){return t=GD(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=GD(s.length-t,0),o=Array(i);++a<i;)o[a]=s[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=s[a];return l[t]=r(o),D2e(e,this,l)}}var L2e=O2e;function R2e(e){return function(){return e}}var $2e=R2e,F2e=Ju,M2e=function(){try{var e=F2e(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Yz=M2e,B2e=$2e,KD=Yz,z2e=Um,U2e=KD?function(e,t){return KD(e,"toString",{configurable:!0,enumerable:!1,value:B2e(t),writable:!0})}:z2e,V2e=U2e,q2e=800,W2e=16,H2e=Date.now;function G2e(e){var t=0,r=0;return function(){var s=H2e(),a=W2e-(s-r);if(r=s,a>0){if(++t>=q2e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var K2e=G2e,Y2e=V2e,X2e=K2e,Q2e=X2e(Y2e),J2e=Q2e,Z2e=Um,eNe=L2e,tNe=J2e;function rNe(e,t){return tNe(eNe(e,t,Z2e),e+"")}var nNe=rNe,sNe=vP,aNe=yx,iNe=DP,oNe=Sd;function lNe(e,t,r){if(!oNe(r))return!1;var s=typeof t;return(s=="number"?aNe(r)&&iNe(t,r.length):s=="string"&&t in r)?sNe(r[t],e):!1}var mw=lNe,cNe=Hz,dNe=_2e,uNe=nNe,YD=mw,fNe=uNe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&YD(e,t[0],t[1])?t=[]:r>2&&YD(t[0],t[1],t[2])&&(t=[t[0]]),dNe(e,cNe(t,1),[])}),hNe=fNe;const $P=Cr(hNe);function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function HC(){return HC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},HC.apply(this,arguments)}function mNe(e,t){return xNe(e)||gNe(e,t)||vNe(e,t)||pNe()}function pNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vNe(e,t){if(e){if(typeof e=="string")return XD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XD(e,t)}}function XD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function gNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function xNe(e){if(Array.isArray(e))return e}function QD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function a5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QD(Object(r),!0).forEach(function(s){yNe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yNe(e,t,r){return t=bNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bNe(e){var t=jNe(e,"string");return mg(t)=="symbol"?t:t+""}function jNe(e,t){if(mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(mg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wNe(e){return Array.isArray(e)&&es(e[0])&&es(e[1])?e.join(" ~ "):e}var NNe=function(t){var r=t.separator,s=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,f=t.payload,u=t.formatter,h=t.itemSorter,m=t.wrapperClassName,v=t.labelClassName,g=t.label,p=t.labelFormatter,x=t.accessibilityLayer,b=x===void 0?!1:x,y=function(){if(f&&f.length){var A={padding:0,margin:0},O=(h?$P(f,h):f).map(function(D,$){if(D.type==="none")return null;var M=a5({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},l),R=D.formatter||u||wNe,B=D.value,U=D.name,W=B,q=U;if(R&&W!=null&&q!=null){var L=R(B,U,D,$,f);if(Array.isArray(L)){var V=mNe(L,2);W=V[0],q=V[1]}else W=L}return ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:M},es(q)?ce.createElement("span",{className:"recharts-tooltip-item-name"},q):null,es(q)?ce.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,ce.createElement("span",{className:"recharts-tooltip-item-value"},W),ce.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return ce.createElement("ul",{className:"recharts-tooltip-item-list",style:A},O)}return null},j=a5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),E=a5({margin:0},d),C=!rr(g),S=C?g:"",N=cr("recharts-default-tooltip",m),_=cr("recharts-tooltip-label",v);C&&p&&f!==void 0&&f!==null&&(S=p(g,f));var I=b?{role:"status","aria-live":"assertive"}:{};return ce.createElement("div",HC({className:N,style:j},I),ce.createElement("p",{className:_,style:E},ce.isValidElement(S)?S:"".concat(S)),y())};function pg(e){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pg(e)}function iy(e,t,r){return t=SNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SNe(e){var t=CNe(e,"string");return pg(t)=="symbol"?t:t+""}function CNe(e,t){if(pg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(pg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qp="recharts-tooltip-wrapper",ANe={visibility:"hidden"};function ENe(e){var t=e.coordinate,r=e.translateX,s=e.translateY;return cr(qp,iy(iy(iy(iy({},"".concat(qp,"-right"),it(r)&&t&&it(t.x)&&r>=t.x),"".concat(qp,"-left"),it(r)&&t&&it(t.x)&&r<t.x),"".concat(qp,"-bottom"),it(s)&&t&&it(t.y)&&s>=t.y),"".concat(qp,"-top"),it(s)&&t&&it(t.y)&&s<t.y))}function JD(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&it(i[s]))return i[s];var f=r[s]-l-a,u=r[s]+a;if(t[s])return o[s]?f:u;if(o[s]){var h=f,m=c[s];return h<m?Math.max(u,c[s]):Math.max(f,c[s])}var v=u+l,g=c[s]+d;return v>g?Math.max(f,c[s]):Math.max(u,c[s])}function PNe(e){var t=e.translateX,r=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function TNe(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,f,u;return o.height>0&&o.width>0&&r?(f=JD({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),u=JD({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=PNe({translateX:f,translateY:u,useTranslate3d:l})):d=ANe,{cssProperties:d,cssClasses:ENe({translateX:f,translateY:u,coordinate:r})}}function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function ZD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZD(Object(r),!0).forEach(function(s){KC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function _Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Qz(s.key),s)}}function INe(e,t,r){return t&&tO(e.prototype,t),r&&tO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kNe(e,t,r){return t=Zb(t),DNe(e,Xz()?Reflect.construct(t,r||[],Zb(e).constructor):t.apply(e,r))}function DNe(e,t){if(t&&(Kh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ONe(e)}function ONe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xz=function(){return!!e})()}function Zb(e){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zb(e)}function LNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GC(e,t)}function GC(e,t){return GC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},GC(e,t)}function KC(e,t,r){return t=Qz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qz(e){var t=RNe(e,"string");return Kh(t)=="symbol"?t:t+""}function RNe(e,t){if(Kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Kh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rO=1,$Ne=function(e){function t(){var r;_Ne(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=kNe(this,t,[].concat(a)),KC(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),KC(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),r}return LNe(t,e),INe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>rO||Math.abs(s.height-this.state.lastBoundingBox.height)>rO)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,f=a.coordinate,u=a.hasPayload,h=a.isAnimationActive,m=a.offset,v=a.position,g=a.reverseDirection,p=a.useTranslate3d,x=a.viewBox,b=a.wrapperStyle,y=TNe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:x}),j=y.cssClasses,E=y.cssProperties,C=eO(eO({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return ce.createElement("div",{tabIndex:-1,className:j,style:C,ref:function(N){s.wrapperNode=N}},d)}}])}(w.PureComponent),FNe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ko={isSsr:FNe(),get:function(t){return Ko[t]},set:function(t,r){if(typeof t=="string")Ko[t]=r;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(a){Ko[a]=t[a]})}}};function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function nO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function sO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(r),!0).forEach(function(s){FP(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function MNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Zz(s.key),s)}}function BNe(e,t,r){return t&&aO(e.prototype,t),r&&aO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zNe(e,t,r){return t=e1(t),UNe(e,Jz()?Reflect.construct(t,r||[],e1(e).constructor):t.apply(e,r))}function UNe(e,t){if(t&&(Yh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VNe(e)}function VNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jz=function(){return!!e})()}function e1(e){return e1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e1(e)}function qNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YC(e,t)}function YC(e,t){return YC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},YC(e,t)}function FP(e,t,r){return t=Zz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zz(e){var t=WNe(e,"string");return Yh(t)=="symbol"?t:t+""}function WNe(e,t){if(Yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Yh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HNe(e){return e.dataKey}function GNe(e,t){return ce.isValidElement(e)?ce.cloneElement(e,t):typeof e=="function"?ce.createElement(e,t):ce.createElement(NNe,t)}var ma=function(e){function t(){return MNe(this,t),zNe(this,t,arguments)}return qNe(t,e),BNe(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,f=a.coordinate,u=a.filterNull,h=a.isAnimationActive,m=a.offset,v=a.payload,g=a.payloadUniqBy,p=a.position,x=a.reverseDirection,b=a.useTranslate3d,y=a.viewBox,j=a.wrapperStyle,E=v??[];u&&E.length&&(E=Uz(v.filter(function(S){return S.value!=null&&(S.hide!==!0||s.props.includeHidden)}),g,HNe));var C=E.length>0;return ce.createElement($Ne,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:f,hasPayload:C,offset:m,position:p,reverseDirection:x,useTranslate3d:b,viewBox:y,wrapperStyle:j},GNe(d,sO(sO({},this.props),{},{payload:E})))}}])}(w.PureComponent);FP(ma,"displayName","Tooltip");FP(ma,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ko.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var KNe=il,YNe=function(){return KNe.Date.now()},XNe=YNe,QNe=/\s/;function JNe(e){for(var t=e.length;t--&&QNe.test(e.charAt(t)););return t}var ZNe=JNe,e5e=ZNe,t5e=/^\s+/;function r5e(e){return e&&e.slice(0,e5e(e)+1).replace(t5e,"")}var n5e=r5e,s5e=n5e,iO=Sd,a5e=Dm,oO=0/0,i5e=/^[-+]0x[0-9a-f]+$/i,o5e=/^0b[01]+$/i,l5e=/^0o[0-7]+$/i,c5e=parseInt;function d5e(e){if(typeof e=="number")return e;if(a5e(e))return oO;if(iO(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=iO(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=s5e(e);var r=o5e.test(e);return r||l5e.test(e)?c5e(e.slice(2),r?2:8):i5e.test(e)?oO:+e}var eU=d5e,u5e=Sd,i5=XNe,lO=eU,f5e="Expected a function",h5e=Math.max,m5e=Math.min;function p5e(e,t,r){var s,a,i,o,l,c,d=0,f=!1,u=!1,h=!0;if(typeof e!="function")throw new TypeError(f5e);t=lO(t)||0,u5e(r)&&(f=!!r.leading,u="maxWait"in r,i=u?h5e(lO(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(C){var S=s,N=a;return s=a=void 0,d=C,o=e.apply(N,S),o}function v(C){return d=C,l=setTimeout(x,t),f?m(C):o}function g(C){var S=C-c,N=C-d,_=t-S;return u?m5e(_,i-N):_}function p(C){var S=C-c,N=C-d;return c===void 0||S>=t||S<0||u&&N>=i}function x(){var C=i5();if(p(C))return b(C);l=setTimeout(x,g(C))}function b(C){return l=void 0,h&&s?m(C):(s=a=void 0,o)}function y(){l!==void 0&&clearTimeout(l),d=0,s=c=a=l=void 0}function j(){return l===void 0?o:b(i5())}function E(){var C=i5(),S=p(C);if(s=arguments,a=this,c=C,S){if(l===void 0)return v(c);if(u)return clearTimeout(l),l=setTimeout(x,t),m(c)}return l===void 0&&(l=setTimeout(x,t)),o}return E.cancel=y,E.flush=j,E}var v5e=p5e,g5e=v5e,x5e=Sd,y5e="Expected a function";function b5e(e,t,r){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(y5e);return x5e(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),g5e(e,t,{leading:s,maxWait:t,trailing:a})}var j5e=b5e;const tU=Cr(j5e);function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function oy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(s){w5e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function w5e(e,t,r){return t=N5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N5e(e){var t=S5e(e,"string");return vg(t)=="symbol"?t:t+""}function S5e(e,t){if(vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(vg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C5e(e,t){return T5e(e)||P5e(e,t)||E5e(e,t)||A5e()}function A5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5e(e,t){if(e){if(typeof e=="string")return dO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dO(e,t)}}function dO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function P5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function T5e(e){if(Array.isArray(e))return e}var Sv=w.forwardRef(function(e,t){var r=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,f=d===void 0?0:d,u=e.minHeight,h=e.maxHeight,m=e.children,v=e.debounce,g=v===void 0?0:v,p=e.id,x=e.className,b=e.onResize,y=e.style,j=y===void 0?{}:y,E=w.useRef(null),C=w.useRef();C.current=b,w.useImperativeHandle(t,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var S=w.useState({containerWidth:a.width,containerHeight:a.height}),N=C5e(S,2),_=N[0],I=N[1],T=w.useCallback(function(O,D){I(function($){var M=Math.round(O),R=Math.round(D);return $.containerWidth===M&&$.containerHeight===R?$:{containerWidth:M,containerHeight:R}})},[]);w.useEffect(function(){var O=function(U){var W,q=U[0].contentRect,L=q.width,V=q.height;T(L,V),(W=C.current)===null||W===void 0||W.call(C,L,V)};g>0&&(O=tU(O,g,{trailing:!0,leading:!1}));var D=new ResizeObserver(O),$=E.current.getBoundingClientRect(),M=$.width,R=$.height;return T(M,R),D.observe(E.current),function(){D.disconnect()}},[T,g]);var A=w.useMemo(function(){var O=_.containerWidth,D=_.containerHeight;if(O<0||D<0)return null;$l(fu(o)||fu(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),$l(!r||r>0,"The aspect(%s) must be greater than zero.",r);var $=fu(o)?O:o,M=fu(c)?D:c;r&&r>0&&($?M=$/r:M&&($=M*r),h&&M>h&&(M=h)),$l($>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,M,o,c,f,u,r);var R=!Array.isArray(m)&&Rl(m.type).endsWith("Chart");return ce.Children.map(m,function(B){return ce.isValidElement(B)?w.cloneElement(B,oy({width:$,height:M},R?{style:oy({height:"100%",width:"100%",maxHeight:M,maxWidth:$},B.props.style)}:{})):B})},[r,m,c,h,u,f,_,o]);return ce.createElement("div",{id:p?"".concat(p):void 0,className:cr("recharts-responsive-container",x),style:oy(oy({},j),{},{width:o,height:c,minWidth:f,minHeight:u,maxHeight:h}),ref:E},A)}),rU=function(t){return null};rU.displayName="Cell";function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function uO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function XC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(r),!0).forEach(function(s){_5e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function _5e(e,t,r){return t=I5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I5e(e){var t=k5e(e,"string");return gg(t)=="symbol"?t:t+""}function k5e(e,t){if(gg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(gg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bf={widthCache:{},cacheCount:0},D5e=2e3,O5e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},fO="recharts_measurement_span";function L5e(e){var t=XC({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Cv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ko.isSsr)return{width:0,height:0};var s=L5e(r),a=JSON.stringify({text:t,copyStyle:s});if(Bf.widthCache[a])return Bf.widthCache[a];try{var i=document.getElementById(fO);i||(i=document.createElement("span"),i.setAttribute("id",fO),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=XC(XC({},O5e),s);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Bf.widthCache[a]=c,++Bf.cacheCount>D5e&&(Bf.cacheCount=0,Bf.widthCache={}),c}catch{return{width:0,height:0}}},R5e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function t1(e,t){return B5e(e)||M5e(e,t)||F5e(e,t)||$5e()}function $5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F5e(e,t){if(e){if(typeof e=="string")return hO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hO(e,t)}}function hO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function M5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function B5e(e){if(Array.isArray(e))return e}function z5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,V5e(s.key),s)}}function U5e(e,t,r){return t&&mO(e.prototype,t),r&&mO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V5e(e){var t=q5e(e,"string");return xg(t)=="symbol"?t:t+""}function q5e(e,t){if(xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(xg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W5e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,H5e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},G5e=Object.keys(nU),dh="NaN";function K5e(e,t){return e*nU[t]}var ly=function(){function e(t,r){z5e(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!W5e.test(r)&&(this.num=NaN,this.unit=""),G5e.includes(r)&&(this.num=K5e(t,r),this.unit="px")}return U5e(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,a=(s=H5e.exec(r))!==null&&s!==void 0?s:[],i=t1(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function sU(e){if(e.includes(dh))return dh;for(var t=e;t.includes("*")||t.includes("/");){var r,s=(r=pO.exec(t))!==null&&r!==void 0?r:[],a=t1(s,4),i=a[1],o=a[2],l=a[3],c=ly.parse(i??""),d=ly.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return dh;t=t.replace(pO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,h=(u=vO.exec(t))!==null&&u!==void 0?u:[],m=t1(h,4),v=m[1],g=m[2],p=m[3],x=ly.parse(v??""),b=ly.parse(p??""),y=g==="+"?x.add(b):x.subtract(b);if(y.isNaN())return dh;t=t.replace(vO,y.toString())}return t}var gO=/\(([^()]*)\)/;function Y5e(e){for(var t=e;t.includes("(");){var r=gO.exec(t),s=t1(r,2),a=s[1];t=t.replace(gO,sU(a))}return t}function X5e(e){var t=e.replace(/\s+/g,"");return t=Y5e(t),t=sU(t),t}function Q5e(e){try{return X5e(e)}catch{return dh}}function o5(e){var t=Q5e(e.slice(5,-1));return t===dh?"":t}var J5e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Z5e=["dx","dy","angle","className","breakAll"];function QC(){return QC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},QC.apply(this,arguments)}function xO(e,t){if(e==null)return{};var r=eSe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function eSe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function yO(e,t){return sSe(e)||nSe(e,t)||rSe(e,t)||tSe()}function tSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rSe(e,t){if(e){if(typeof e=="string")return bO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bO(e,t)}}function bO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function nSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sSe(e){if(Array.isArray(e))return e}var aU=/[ \f\n\r\t\v\u2028\u2029]+/,iU=function(t){var r=t.children,s=t.breakAll,a=t.style;try{var i=[];rr(r)||(s?i=r.toString().split(""):i=r.toString().split(aU));var o=i.map(function(c){return{word:c,width:Cv(c,a).width}}),l=s?0:Cv(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},aSe=function(t,r,s,a,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,f=it(o),u=l,h=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce(function(M,R){var B=R.word,U=R.width,W=M[M.length-1];if(W&&(a==null||i||W.width+U+s<Number(a)))W.words.push(B),W.width+=U+s;else{var q={words:[B],width:U};M.push(q)}return M},[])},m=h(r),v=function($){return $.reduce(function(M,R){return M.width>R.width?M:R})};if(!f)return m;for(var g="…",p=function($){var M=u.slice(0,$),R=iU({breakAll:d,style:c,children:M+g}).wordsWithComputedWidth,B=h(R),U=B.length>o||v(B).width>Number(a);return[U,B]},x=0,b=u.length-1,y=0,j;x<=b&&y<=u.length-1;){var E=Math.floor((x+b)/2),C=E-1,S=p(C),N=yO(S,2),_=N[0],I=N[1],T=p(E),A=yO(T,1),O=A[0];if(!_&&!O&&(x=E+1),_&&O&&(b=E-1),!_&&O){j=I;break}y++}return j||m},jO=function(t){var r=rr(t)?[]:t.toString().split(aU);return[{words:r}]},iSe=function(t){var r=t.width,s=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||s)&&!Ko.isSsr){var c,d,f=iU({breakAll:o,children:a,style:i});if(f){var u=f.wordsWithComputedWidth,h=f.spaceWidth;c=u,d=h}else return jO(a);return aSe({breakAll:o,children:a,maxLines:l,style:i},c,d,r,s)}return jO(a)},wO="#808080",r1=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,f=t.scaleToFit,u=f===void 0?!1:f,h=t.textAnchor,m=h===void 0?"start":h,v=t.verticalAnchor,g=v===void 0?"end":v,p=t.fill,x=p===void 0?wO:p,b=xO(t,J5e),y=w.useMemo(function(){return iSe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),j=b.dx,E=b.dy,C=b.angle,S=b.className,N=b.breakAll,_=xO(b,Z5e);if(!es(s)||!es(i))return null;var I=s+(it(j)?j:0),T=i+(it(E)?E:0),A;switch(g){case"start":A=o5("calc(".concat(d,")"));break;case"middle":A=o5("calc(".concat((y.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:A=o5("calc(".concat(y.length-1," * -").concat(l,")"));break}var O=[];if(u){var D=y[0].width,$=b.width;O.push("scale(".concat((it($)?$/D:1)/D,")"))}return C&&O.push("rotate(".concat(C,", ").concat(I,", ").concat(T,")")),O.length&&(_.transform=O.join(" ")),ce.createElement("text",QC({},er(_,!0),{x:I,y:T,className:cr("recharts-text",S),textAnchor:m,fill:x.includes("url")?wO:x}),y.map(function(M,R){var B=M.words.join(N?"":" ");return ce.createElement("tspan",{x:I,dy:R===0?A:l,key:"".concat(B,"-").concat(R)},B)}))};function ad(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oSe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function MP(e){let t,r,s;e.length!==2?(t=ad,r=(l,c)=>ad(e(l),c),s=(l,c)=>e(l)-c):(t=e===ad||e===oSe?e:lSe,r=e,s=e);function a(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const u=d+f>>>1;r(l[u],c)<0?d=u+1:f=u}while(d<f)}return d}function i(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const u=d+f>>>1;r(l[u],c)<=0?d=u+1:f=u}while(d<f)}return d}function o(l,c,d=0,f=l.length){const u=a(l,c,d,f-1);return u>d&&s(l[u-1],c)>-s(l[u],c)?u-1:u}return{left:a,center:o,right:i}}function lSe(){return 0}function oU(e){return e===null?NaN:+e}function*cSe(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(yield s)}}const dSe=MP(ad),uSe=dSe.right;MP(oU).center;const bx=uSe;class NO extends Map{constructor(t,r=mSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(SO(this,t))}has(t){return super.has(SO(this,t))}set(t,r){return super.set(fSe(this,t),r)}delete(t){return super.delete(hSe(this,t))}}function SO({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function fSe({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function hSe({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function mSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pSe(e=ad){if(e===ad)return lU;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||s===0?s:(e(r,r)===0)-(e(t,t)===0)}}function lU(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const vSe=Math.sqrt(50),gSe=Math.sqrt(10),xSe=Math.sqrt(2);function n1(e,t,r){const s=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=vSe?10:i>=gSe?5:i>=xSe?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?n1(e,t,r*2):[l,c,d]}function JC(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[a,i,o]=s?n1(t,e,r):n1(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function ZC(e,t,r){return t=+t,e=+e,r=+r,n1(e,t,r)[2]}function eA(e,t,r){t=+t,e=+e,r=+r;const s=t<e,a=s?ZC(t,e,r):ZC(e,t,r);return(s?-1:1)*(a<0?1/-a:a)}function CO(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function AO(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function cU(e,t,r=0,s=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(a=a===void 0?lU:pSe(a);s>r;){if(s-r>600){const c=s-r+1,d=t-r+1,f=Math.log(c),u=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*u*(c-u)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*u/c+h)),v=Math.min(s,Math.floor(t+(c-d)*u/c+h));cU(e,t,m,v,a)}const i=e[t];let o=r,l=s;for(Wp(e,r,t),a(e[s],i)>0&&Wp(e,r,s);o<l;){for(Wp(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Wp(e,r,l):(++l,Wp(e,l,s)),l<=t&&(r=l+1),t<=l&&(s=l-1)}return e}function Wp(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function ySe(e,t,r){if(e=Float64Array.from(cSe(e,r)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return AO(e);if(t>=1)return CO(e);var s,a=(s-1)*t,i=Math.floor(a),o=CO(cU(e,i).subarray(0,i+1)),l=AO(e.subarray(i+1));return o+(l-o)*(a-i)}}function bSe(e,t,r=oU){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function jSe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++s<a;)i[s]=e+s*r;return i}function Ti(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tA=Symbol("implicit");function BP(){var e=new NO,t=[],r=[],s=tA;function a(i){let o=e.get(i);if(o===void 0){if(s!==tA)return s;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new NO;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return BP(t,r).unknown(s)},Ti.apply(a,arguments),a}function yg(){var e=BP().unknown(void 0),t=e.domain,r=e.range,s=0,a=1,i,o,l=!1,c=0,d=0,f=.5;delete e.unknown;function u(){var h=t().length,m=a<s,v=m?a:s,g=m?s:a;i=(g-v)/Math.max(1,h-c+d*2),l&&(i=Math.floor(i)),v+=(g-v-i*(h-c))*f,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var p=jSe(h).map(function(x){return v+i*x});return r(m?p.reverse():p)}return e.domain=function(h){return arguments.length?(t(h),u()):t()},e.range=function(h){return arguments.length?([s,a]=h,s=+s,a=+a,u()):[s,a]},e.rangeRound=function(h){return[s,a]=h,s=+s,a=+a,l=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,u()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),u()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),u()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,u()):d},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),u()):f},e.copy=function(){return yg(t(),[s,a]).round(l).paddingInner(c).paddingOuter(d).align(f)},Ti.apply(u(),arguments)}function dU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return dU(t())},e}function Av(){return dU(yg.apply(null,arguments).paddingInner(1))}function zP(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function uU(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function jx(){}var bg=.7,s1=1/bg,Ch="\\s*([+-]?\\d+)\\s*",jg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wSe=/^#([0-9a-f]{3,8})$/,NSe=new RegExp(`^rgb\\(${Ch},${Ch},${Ch}\\)$`),SSe=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),CSe=new RegExp(`^rgba\\(${Ch},${Ch},${Ch},${jg}\\)$`),ASe=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${jg}\\)$`),ESe=new RegExp(`^hsl\\(${jg},${Yo},${Yo}\\)$`),PSe=new RegExp(`^hsla\\(${jg},${Yo},${Yo},${jg}\\)$`),EO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zP(jx,wg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:PO,formatHex:PO,formatHex8:TSe,formatHsl:_Se,formatRgb:TO,toString:TO});function PO(){return this.rgb().formatHex()}function TSe(){return this.rgb().formatHex8()}function _Se(){return fU(this).formatHsl()}function TO(){return this.rgb().formatRgb()}function wg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=wSe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?_O(t):r===3?new ya(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?cy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?cy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=NSe.exec(e))?new ya(t[1],t[2],t[3],1):(t=SSe.exec(e))?new ya(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=CSe.exec(e))?cy(t[1],t[2],t[3],t[4]):(t=ASe.exec(e))?cy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ESe.exec(e))?DO(t[1],t[2]/100,t[3]/100,1):(t=PSe.exec(e))?DO(t[1],t[2]/100,t[3]/100,t[4]):EO.hasOwnProperty(e)?_O(EO[e]):e==="transparent"?new ya(NaN,NaN,NaN,0):null}function _O(e){return new ya(e>>16&255,e>>8&255,e&255,1)}function cy(e,t,r,s){return s<=0&&(e=t=r=NaN),new ya(e,t,r,s)}function ISe(e){return e instanceof jx||(e=wg(e)),e?(e=e.rgb(),new ya(e.r,e.g,e.b,e.opacity)):new ya}function rA(e,t,r,s){return arguments.length===1?ISe(e):new ya(e,t,r,s??1)}function ya(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}zP(ya,rA,uU(jx,{brighter(e){return e=e==null?s1:Math.pow(s1,e),new ya(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bg:Math.pow(bg,e),new ya(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ya(Cu(this.r),Cu(this.g),Cu(this.b),a1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IO,formatHex:IO,formatHex8:kSe,formatRgb:kO,toString:kO}));function IO(){return`#${hu(this.r)}${hu(this.g)}${hu(this.b)}`}function kSe(){return`#${hu(this.r)}${hu(this.g)}${hu(this.b)}${hu((isNaN(this.opacity)?1:this.opacity)*255)}`}function kO(){const e=a1(this.opacity);return`${e===1?"rgb(":"rgba("}${Cu(this.r)}, ${Cu(this.g)}, ${Cu(this.b)}${e===1?")":`, ${e})`}`}function a1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Cu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hu(e){return e=Cu(e),(e<16?"0":"")+e.toString(16)}function DO(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new to(e,t,r,s)}function fU(e){if(e instanceof to)return new to(e.h,e.s,e.l,e.opacity);if(e instanceof jx||(e=wg(e)),!e)return new to;if(e instanceof to)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(t,r,s),i=Math.max(t,r,s),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-s)/l+(r<s)*6:r===i?o=(s-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new to(o,l,c,e.opacity)}function DSe(e,t,r,s){return arguments.length===1?fU(e):new to(e,t,r,s??1)}function to(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}zP(to,DSe,uU(jx,{brighter(e){return e=e==null?s1:Math.pow(s1,e),new to(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bg:Math.pow(bg,e),new to(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,a=2*r-s;return new ya(l5(e>=240?e-240:e+120,a,s),l5(e,a,s),l5(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new to(OO(this.h),dy(this.s),dy(this.l),a1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=a1(this.opacity);return`${e===1?"hsl(":"hsla("}${OO(this.h)}, ${dy(this.s)*100}%, ${dy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function OO(e){return e=(e||0)%360,e<0?e+360:e}function dy(e){return Math.max(0,Math.min(1,e||0))}function l5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const UP=e=>()=>e;function OSe(e,t){return function(r){return e+r*t}}function LSe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function RSe(e){return(e=+e)==1?hU:function(t,r){return r-t?LSe(t,r,e):UP(isNaN(t)?r:t)}}function hU(e,t){var r=t-e;return r?OSe(e,r):UP(isNaN(e)?t:e)}const LO=function e(t){var r=RSe(t);function s(a,i){var o=r((a=rA(a)).r,(i=rA(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),d=hU(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=d(f),a+""}}return s.gamma=e,s}(1);function $Se(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function FSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function MSe(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)a[o]=Vm(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=a[o](l);return i}}function BSe(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function i1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function zSe(e,t){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Vm(e[a],t[a]):s[a]=t[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var nA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,c5=new RegExp(nA.source,"g");function USe(e){return function(){return e}}function VSe(e){return function(t){return e(t)+""}}function qSe(e,t){var r=nA.lastIndex=c5.lastIndex=0,s,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=nA.exec(e))&&(a=c5.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:i1(s,a)})),r=c5.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?VSe(c[0].x):USe(t):(t=c.length,function(d){for(var f=0,u;f<t;++f)l[(u=c[f]).i]=u.x(d);return l.join("")})}function Vm(e,t){var r=typeof t,s;return t==null||r==="boolean"?UP(t):(r==="number"?i1:r==="string"?(s=wg(t))?(t=s,LO):qSe:t instanceof wg?LO:t instanceof Date?BSe:FSe(t)?$Se:Array.isArray(t)?MSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zSe:i1)(e,t)}function VP(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function WSe(e,t){t===void 0&&(t=e,e=Vm);for(var r=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);r<s;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function HSe(e){return function(){return e}}function o1(e){return+e}var RO=[0,1];function ea(e){return e}function sA(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:HSe(isNaN(t)?NaN:.5)}function GSe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function KSe(e,t,r){var s=e[0],a=e[1],i=t[0],o=t[1];return a<s?(s=sA(a,s),i=r(o,i)):(s=sA(s,a),i=r(i,o)),function(l){return i(s(l))}}function YSe(e,t,r){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)a[o]=sA(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=bx(e,l,1,s)-1;return i[c](a[c](l))}}function wx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pw(){var e=RO,t=RO,r=Vm,s,a,i,o=ea,l,c,d;function f(){var h=Math.min(e.length,t.length);return o!==ea&&(o=GSe(e[0],e[h-1])),l=h>2?YSe:KSe,c=d=null,u}function u(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(s),t,r)))(s(o(h)))}return u.invert=function(h){return o(a((d||(d=l(t,e.map(s),i1)))(h)))},u.domain=function(h){return arguments.length?(e=Array.from(h,o1),f()):e.slice()},u.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},u.rangeRound=function(h){return t=Array.from(h),r=VP,f()},u.clamp=function(h){return arguments.length?(o=h?!0:ea,f()):o!==ea},u.interpolate=function(h){return arguments.length?(r=h,f()):r},u.unknown=function(h){return arguments.length?(i=h,u):i},function(h,m){return s=h,a=m,f()}}function qP(){return pw()(ea,ea)}function XSe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function l1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Xh(e){return e=l1(Math.abs(e)),e?e[1]:NaN}function QSe(e,t){return function(r,s){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function JSe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var ZSe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ng(e){if(!(t=ZSe.exec(e)))throw new Error("invalid format: "+e);var t;return new WP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ng.prototype=WP.prototype;function WP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}WP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eCe(e){e:for(var t=e.length,r=1,s=-1,a;r<t;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var mU;function tCe(e,t){var r=l1(e,t);if(!r)return e+"";var s=r[0],a=r[1],i=a-(mU=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+l1(e,Math.max(0,t+i-1))[0]}function $O(e,t){var r=l1(e,t);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const FO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:XSe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>$O(e*100,t),r:$O,s:tCe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function MO(e){return e}var BO=Array.prototype.map,zO=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function rCe(e){var t=e.grouping===void 0||e.thousands===void 0?MO:QSe(BO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?MO:JSe(BO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(u){u=Ng(u);var h=u.fill,m=u.align,v=u.sign,g=u.symbol,p=u.zero,x=u.width,b=u.comma,y=u.precision,j=u.trim,E=u.type;E==="n"?(b=!0,E="g"):FO[E]||(y===void 0&&(y=12),j=!0,E="g"),(p||h==="0"&&m==="=")&&(p=!0,h="0",m="=");var C=g==="$"?r:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=g==="$"?s:/[%p]/.test(E)?o:"",N=FO[E],_=/[defgprs%]/.test(E);y=y===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function I(T){var A=C,O=S,D,$,M;if(E==="c")O=N(T)+O,T="";else{T=+T;var R=T<0||1/T<0;if(T=isNaN(T)?c:N(Math.abs(T),y),j&&(T=eCe(T)),R&&+T==0&&v!=="+"&&(R=!1),A=(R?v==="("?v:l:v==="-"||v==="("?"":v)+A,O=(E==="s"?zO[8+mU/3]:"")+O+(R&&v==="("?")":""),_){for(D=-1,$=T.length;++D<$;)if(M=T.charCodeAt(D),48>M||M>57){O=(M===46?a+T.slice(D+1):T.slice(D))+O,T=T.slice(0,D);break}}}b&&!p&&(T=t(T,1/0));var B=A.length+T.length+O.length,U=B<x?new Array(x-B+1).join(h):"";switch(b&&p&&(T=t(U+T,U.length?x-O.length:1/0),U=""),m){case"<":T=A+T+O+U;break;case"=":T=A+U+T+O;break;case"^":T=U.slice(0,B=U.length>>1)+A+T+O+U.slice(B);break;default:T=U+A+T+O;break}return i(T)}return I.toString=function(){return u+""},I}function f(u,h){var m=d((u=Ng(u),u.type="f",u)),v=Math.max(-8,Math.min(8,Math.floor(Xh(h)/3)))*3,g=Math.pow(10,-v),p=zO[8+v/3];return function(x){return m(g*x)+p}}return{format:d,formatPrefix:f}}var uy,HP,pU;nCe({thousands:",",grouping:[3],currency:["$",""]});function nCe(e){return uy=rCe(e),HP=uy.format,pU=uy.formatPrefix,uy}function sCe(e){return Math.max(0,-Xh(Math.abs(e)))}function aCe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xh(t)/3)))*3-Xh(Math.abs(e)))}function iCe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Xh(t)-Xh(e))+1}function vU(e,t,r,s){var a=eA(e,t,r),i;switch(s=Ng(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=aCe(a,o))&&(s.precision=i),pU(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=iCe(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=sCe(a))&&(s.precision=i-(s.type==="%")*2);break}}return HP(s)}function Ad(e){var t=e.domain;return e.ticks=function(r){var s=t();return JC(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=t();return vU(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),a=0,i=s.length-1,o=s[a],l=s[i],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);f-- >0;){if(d=ZC(o,l,r),d===c)return s[a]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function c1(){var e=qP();return e.copy=function(){return wx(e,c1())},Ti.apply(e,arguments),Ad(e)}function gU(e){var t;function r(s){return s==null||isNaN(s=+s)?t:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,o1),r):e.slice()},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return gU(e).unknown(t)},e=arguments.length?Array.from(e,o1):[0,1],Ad(r)}function xU(e,t){e=e.slice();var r=0,s=e.length-1,a=e[r],i=e[s],o;return i<a&&(o=r,r=s,s=o,o=a,a=i,i=o),e[r]=t.floor(a),e[s]=t.ceil(i),e}function UO(e){return Math.log(e)}function VO(e){return Math.exp(e)}function oCe(e){return-Math.log(-e)}function lCe(e){return-Math.exp(-e)}function cCe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dCe(e){return e===10?cCe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function uCe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function qO(e){return(t,r)=>-e(-t,r)}function GP(e){const t=e(UO,VO),r=t.domain;let s=10,a,i;function o(){return a=uCe(s),i=dCe(s),r()[0]<0?(a=qO(a),i=qO(i),e(oCe,lCe)):e(UO,VO),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],f=c[c.length-1];const u=f<d;u&&([d,f]=[f,d]);let h=a(d),m=a(f),v,g;const p=l==null?10:+l;let x=[];if(!(s%1)&&m-h<p){if(h=Math.floor(h),m=Math.ceil(m),d>0){for(;h<=m;++h)for(v=1;v<s;++v)if(g=h<0?v/i(-h):v*i(h),!(g<d)){if(g>f)break;x.push(g)}}else for(;h<=m;++h)for(v=s-1;v>=1;--v)if(g=h>0?v/i(-h):v*i(h),!(g<d)){if(g>f)break;x.push(g)}x.length*2<p&&(x=JC(d,f,p))}else x=JC(h,m,Math.min(m-h,p)).map(i);return u?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Ng(c)).precision==null&&(c.trim=!0),c=HP(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return f=>{let u=f/i(Math.round(a(f)));return u*s<s-.5&&(u*=s),u<=d?c(f):""}},t.nice=()=>r(xU(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function yU(){const e=GP(pw()).domain([1,10]);return e.copy=()=>wx(e,yU()).base(e.base()),Ti.apply(e,arguments),e}function WO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function HO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function KP(e){var t=1,r=e(WO(t),HO(t));return r.constant=function(s){return arguments.length?e(WO(t=+s),HO(t)):t},Ad(r)}function bU(){var e=KP(pw());return e.copy=function(){return wx(e,bU()).constant(e.constant())},Ti.apply(e,arguments)}function GO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function fCe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hCe(e){return e<0?-e*e:e*e}function YP(e){var t=e(ea,ea),r=1;function s(){return r===1?e(ea,ea):r===.5?e(fCe,hCe):e(GO(r),GO(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,s()):r},Ad(t)}function XP(){var e=YP(pw());return e.copy=function(){return wx(e,XP()).exponent(e.exponent())},Ti.apply(e,arguments),e}function mCe(){return XP.apply(null,arguments).exponent(.5)}function KO(e){return Math.sign(e)*e*e}function pCe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function jU(){var e=qP(),t=[0,1],r=!1,s;function a(i){var o=pCe(e(i));return isNaN(o)?s:r?Math.round(o):o}return a.invert=function(i){return e.invert(KO(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,o1)).map(KO)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return jU(e.domain(),t).round(r).clamp(e.clamp()).unknown(s)},Ti.apply(a,arguments),Ad(a)}function wU(){var e=[],t=[],r=[],s;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=bSe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[bx(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ad),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return wU().domain(e).range(t).unknown(s)},Ti.apply(i,arguments)}function NU(){var e=0,t=1,r=1,s=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[bx(s,c,0,r)]:i}function l(){var c=-1;for(s=new Array(r);++c<r;)s[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=r?[s[r-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return NU().domain([e,t]).range(a).unknown(i)},Ti.apply(Ad(o),arguments)}function SU(){var e=[.5],t=[0,1],r,s=1;function a(i){return i!=null&&i<=i?t[bx(e,i,0,s)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return SU().domain(e).range(t).unknown(r)},Ti.apply(a,arguments)}const d5=new Date,u5=new Date;function rs(e,t,r,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},a.filter=i=>rs(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(d5.setTime(+i),u5.setTime(+o),e(d5),e(u5),Math.floor(r(d5,u5))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const d1=rs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);d1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?rs(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):d1);d1.range;const _l=1e3,vi=_l*60,Il=vi*60,Xl=Il*24,QP=Xl*7,YO=Xl*30,f5=Xl*365,mu=rs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_l)},(e,t)=>(t-e)/_l,e=>e.getUTCSeconds());mu.range;const JP=rs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_l)},(e,t)=>{e.setTime(+e+t*vi)},(e,t)=>(t-e)/vi,e=>e.getMinutes());JP.range;const ZP=rs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vi)},(e,t)=>(t-e)/vi,e=>e.getUTCMinutes());ZP.range;const e3=rs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_l-e.getMinutes()*vi)},(e,t)=>{e.setTime(+e+t*Il)},(e,t)=>(t-e)/Il,e=>e.getHours());e3.range;const t3=rs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Il)},(e,t)=>(t-e)/Il,e=>e.getUTCHours());t3.range;const Nx=rs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vi)/Xl,e=>e.getDate()-1);Nx.range;const vw=rs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xl,e=>e.getUTCDate()-1);vw.range;const CU=rs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xl,e=>Math.floor(e/Xl));CU.range;function Zu(e){return rs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*vi)/QP)}const gw=Zu(0),u1=Zu(1),vCe=Zu(2),gCe=Zu(3),Qh=Zu(4),xCe=Zu(5),yCe=Zu(6);gw.range;u1.range;vCe.range;gCe.range;Qh.range;xCe.range;yCe.range;function ef(e){return rs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/QP)}const xw=ef(0),f1=ef(1),bCe=ef(2),jCe=ef(3),Jh=ef(4),wCe=ef(5),NCe=ef(6);xw.range;f1.range;bCe.range;jCe.range;Jh.range;wCe.range;NCe.range;const r3=rs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());r3.range;const n3=rs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());n3.range;const Ql=rs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ql.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ql.range;const Jl=rs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Jl.range;function AU(e,t,r,s,a,i){const o=[[mu,1,_l],[mu,5,5*_l],[mu,15,15*_l],[mu,30,30*_l],[i,1,vi],[i,5,5*vi],[i,15,15*vi],[i,30,30*vi],[a,1,Il],[a,3,3*Il],[a,6,6*Il],[a,12,12*Il],[s,1,Xl],[s,2,2*Xl],[r,1,QP],[t,1,YO],[t,3,3*YO],[e,1,f5]];function l(d,f,u){const h=f<d;h&&([d,f]=[f,d]);const m=u&&typeof u.range=="function"?u:c(d,f,u),v=m?m.range(d,+f+1):[];return h?v.reverse():v}function c(d,f,u){const h=Math.abs(f-d)/u,m=MP(([,,p])=>p).right(o,h);if(m===o.length)return e.every(eA(d/f5,f/f5,u));if(m===0)return d1.every(Math.max(eA(d,f,u),1));const[v,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return v.every(g)}return[l,c]}const[SCe,CCe]=AU(Jl,n3,xw,CU,t3,ZP),[ACe,ECe]=AU(Ql,r3,gw,Nx,e3,JP);function h5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function m5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hp(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function PCe(e){var t=e.dateTime,r=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Gp(a),f=Kp(a),u=Gp(i),h=Kp(i),m=Gp(o),v=Kp(o),g=Gp(l),p=Kp(l),x=Gp(c),b=Kp(c),y={a:R,A:B,b:U,B:W,c:null,d:tL,e:tL,f:QCe,g:oAe,G:cAe,H:KCe,I:YCe,j:XCe,L:EU,m:JCe,M:ZCe,p:q,q:L,Q:sL,s:aL,S:eAe,u:tAe,U:rAe,V:nAe,w:sAe,W:aAe,x:null,X:null,y:iAe,Y:lAe,Z:dAe,"%":nL},j={a:V,A:G,b:Z,B:te,c:null,d:rL,e:rL,f:mAe,g:SAe,G:AAe,H:uAe,I:fAe,j:hAe,L:TU,m:pAe,M:vAe,p:he,q:me,Q:sL,s:aL,S:gAe,u:xAe,U:yAe,V:bAe,w:jAe,W:wAe,x:null,X:null,y:NAe,Y:CAe,Z:EAe,"%":nL},E={a:I,A:T,b:A,B:O,c:D,d:ZO,e:ZO,f:qCe,g:JO,G:QO,H:eL,I:eL,j:BCe,L:VCe,m:MCe,M:zCe,p:_,q:FCe,Q:HCe,s:GCe,S:UCe,u:DCe,U:OCe,V:LCe,w:kCe,W:RCe,x:$,X:M,y:JO,Y:QO,Z:$Ce,"%":WCe};y.x=C(r,y),y.X=C(s,y),y.c=C(t,y),j.x=C(r,j),j.X=C(s,j),j.c=C(t,j);function C(oe,we){return function(ve){var ge=[],De=-1,xe=0,le=oe.length,re,Ce,Ne;for(ve instanceof Date||(ve=new Date(+ve));++De<le;)oe.charCodeAt(De)===37&&(ge.push(oe.slice(xe,De)),(Ce=XO[re=oe.charAt(++De)])!=null?re=oe.charAt(++De):Ce=re==="e"?" ":"0",(Ne=we[re])&&(re=Ne(ve,Ce)),ge.push(re),xe=De+1);return ge.push(oe.slice(xe,De)),ge.join("")}}function S(oe,we){return function(ve){var ge=Hp(1900,void 0,1),De=N(ge,oe,ve+="",0),xe,le;if(De!=ve.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(we&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(xe=m5(Hp(ge.y,0,1)),le=xe.getUTCDay(),xe=le>4||le===0?f1.ceil(xe):f1(xe),xe=vw.offset(xe,(ge.V-1)*7),ge.y=xe.getUTCFullYear(),ge.m=xe.getUTCMonth(),ge.d=xe.getUTCDate()+(ge.w+6)%7):(xe=h5(Hp(ge.y,0,1)),le=xe.getDay(),xe=le>4||le===0?u1.ceil(xe):u1(xe),xe=Nx.offset(xe,(ge.V-1)*7),ge.y=xe.getFullYear(),ge.m=xe.getMonth(),ge.d=xe.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),le="Z"in ge?m5(Hp(ge.y,0,1)).getUTCDay():h5(Hp(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(le+5)%7:ge.w+ge.U*7-(le+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,m5(ge)):h5(ge)}}function N(oe,we,ve,ge){for(var De=0,xe=we.length,le=ve.length,re,Ce;De<xe;){if(ge>=le)return-1;if(re=we.charCodeAt(De++),re===37){if(re=we.charAt(De++),Ce=E[re in XO?we.charAt(De++):re],!Ce||(ge=Ce(oe,ve,ge))<0)return-1}else if(re!=ve.charCodeAt(ge++))return-1}return ge}function _(oe,we,ve){var ge=d.exec(we.slice(ve));return ge?(oe.p=f.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function I(oe,we,ve){var ge=m.exec(we.slice(ve));return ge?(oe.w=v.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function T(oe,we,ve){var ge=u.exec(we.slice(ve));return ge?(oe.w=h.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function A(oe,we,ve){var ge=x.exec(we.slice(ve));return ge?(oe.m=b.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function O(oe,we,ve){var ge=g.exec(we.slice(ve));return ge?(oe.m=p.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function D(oe,we,ve){return N(oe,t,we,ve)}function $(oe,we,ve){return N(oe,r,we,ve)}function M(oe,we,ve){return N(oe,s,we,ve)}function R(oe){return o[oe.getDay()]}function B(oe){return i[oe.getDay()]}function U(oe){return c[oe.getMonth()]}function W(oe){return l[oe.getMonth()]}function q(oe){return a[+(oe.getHours()>=12)]}function L(oe){return 1+~~(oe.getMonth()/3)}function V(oe){return o[oe.getUTCDay()]}function G(oe){return i[oe.getUTCDay()]}function Z(oe){return c[oe.getUTCMonth()]}function te(oe){return l[oe.getUTCMonth()]}function he(oe){return a[+(oe.getUTCHours()>=12)]}function me(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var we=C(oe+="",y);return we.toString=function(){return oe},we},parse:function(oe){var we=S(oe+="",!1);return we.toString=function(){return oe},we},utcFormat:function(oe){var we=C(oe+="",j);return we.toString=function(){return oe},we},utcParse:function(oe){var we=S(oe+="",!0);return we.toString=function(){return oe},we}}}var XO={"-":"",_:" ",0:"0"},ps=/^\s*\d+/,TCe=/^%/,_Ce=/[\\^$*+?|[\]().{}]/g;function br(e,t,r){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(t)+a:a)}function ICe(e){return e.replace(_Ce,"\\$&")}function Gp(e){return new RegExp("^(?:"+e.map(ICe).join("|")+")","i")}function Kp(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function kCe(e,t,r){var s=ps.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function DCe(e,t,r){var s=ps.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function OCe(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function LCe(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function RCe(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function QO(e,t,r){var s=ps.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function JO(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function $Ce(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function FCe(e,t,r){var s=ps.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function MCe(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function ZO(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function BCe(e,t,r){var s=ps.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function eL(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function zCe(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function UCe(e,t,r){var s=ps.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function VCe(e,t,r){var s=ps.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function qCe(e,t,r){var s=ps.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function WCe(e,t,r){var s=TCe.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function HCe(e,t,r){var s=ps.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function GCe(e,t,r){var s=ps.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function tL(e,t){return br(e.getDate(),t,2)}function KCe(e,t){return br(e.getHours(),t,2)}function YCe(e,t){return br(e.getHours()%12||12,t,2)}function XCe(e,t){return br(1+Nx.count(Ql(e),e),t,3)}function EU(e,t){return br(e.getMilliseconds(),t,3)}function QCe(e,t){return EU(e,t)+"000"}function JCe(e,t){return br(e.getMonth()+1,t,2)}function ZCe(e,t){return br(e.getMinutes(),t,2)}function eAe(e,t){return br(e.getSeconds(),t,2)}function tAe(e){var t=e.getDay();return t===0?7:t}function rAe(e,t){return br(gw.count(Ql(e)-1,e),t,2)}function PU(e){var t=e.getDay();return t>=4||t===0?Qh(e):Qh.ceil(e)}function nAe(e,t){return e=PU(e),br(Qh.count(Ql(e),e)+(Ql(e).getDay()===4),t,2)}function sAe(e){return e.getDay()}function aAe(e,t){return br(u1.count(Ql(e)-1,e),t,2)}function iAe(e,t){return br(e.getFullYear()%100,t,2)}function oAe(e,t){return e=PU(e),br(e.getFullYear()%100,t,2)}function lAe(e,t){return br(e.getFullYear()%1e4,t,4)}function cAe(e,t){var r=e.getDay();return e=r>=4||r===0?Qh(e):Qh.ceil(e),br(e.getFullYear()%1e4,t,4)}function dAe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+br(t/60|0,"0",2)+br(t%60,"0",2)}function rL(e,t){return br(e.getUTCDate(),t,2)}function uAe(e,t){return br(e.getUTCHours(),t,2)}function fAe(e,t){return br(e.getUTCHours()%12||12,t,2)}function hAe(e,t){return br(1+vw.count(Jl(e),e),t,3)}function TU(e,t){return br(e.getUTCMilliseconds(),t,3)}function mAe(e,t){return TU(e,t)+"000"}function pAe(e,t){return br(e.getUTCMonth()+1,t,2)}function vAe(e,t){return br(e.getUTCMinutes(),t,2)}function gAe(e,t){return br(e.getUTCSeconds(),t,2)}function xAe(e){var t=e.getUTCDay();return t===0?7:t}function yAe(e,t){return br(xw.count(Jl(e)-1,e),t,2)}function _U(e){var t=e.getUTCDay();return t>=4||t===0?Jh(e):Jh.ceil(e)}function bAe(e,t){return e=_U(e),br(Jh.count(Jl(e),e)+(Jl(e).getUTCDay()===4),t,2)}function jAe(e){return e.getUTCDay()}function wAe(e,t){return br(f1.count(Jl(e)-1,e),t,2)}function NAe(e,t){return br(e.getUTCFullYear()%100,t,2)}function SAe(e,t){return e=_U(e),br(e.getUTCFullYear()%100,t,2)}function CAe(e,t){return br(e.getUTCFullYear()%1e4,t,4)}function AAe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Jh(e):Jh.ceil(e),br(e.getUTCFullYear()%1e4,t,4)}function EAe(){return"+0000"}function nL(){return"%"}function sL(e){return+e}function aL(e){return Math.floor(+e/1e3)}var zf,IU,kU;PAe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function PAe(e){return zf=PCe(e),IU=zf.format,zf.parse,kU=zf.utcFormat,zf.utcParse,zf}function TAe(e){return new Date(e)}function _Ae(e){return e instanceof Date?+e:+new Date(+e)}function s3(e,t,r,s,a,i,o,l,c,d){var f=qP(),u=f.invert,h=f.domain,m=d(".%L"),v=d(":%S"),g=d("%I:%M"),p=d("%I %p"),x=d("%a %d"),b=d("%b %d"),y=d("%B"),j=d("%Y");function E(C){return(c(C)<C?m:l(C)<C?v:o(C)<C?g:i(C)<C?p:s(C)<C?a(C)<C?x:b:r(C)<C?y:j)(C)}return f.invert=function(C){return new Date(u(C))},f.domain=function(C){return arguments.length?h(Array.from(C,_Ae)):h().map(TAe)},f.ticks=function(C){var S=h();return e(S[0],S[S.length-1],C??10)},f.tickFormat=function(C,S){return S==null?E:d(S)},f.nice=function(C){var S=h();return(!C||typeof C.range!="function")&&(C=t(S[0],S[S.length-1],C??10)),C?h(xU(S,C)):f},f.copy=function(){return wx(f,s3(e,t,r,s,a,i,o,l,c,d))},f}function IAe(){return Ti.apply(s3(ACe,ECe,Ql,r3,gw,Nx,e3,JP,mu,IU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kAe(){return Ti.apply(s3(SCe,CCe,Jl,n3,xw,vw,t3,ZP,mu,kU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yw(){var e=0,t=1,r,s,a,i,o=ea,l=!1,c;function d(u){return u==null||isNaN(u=+u)?c:o(a===0?.5:(u=(i(u)-r)*a,l?Math.max(0,Math.min(1,u)):u))}d.domain=function(u){return arguments.length?([e,t]=u,r=i(e=+e),s=i(t=+t),a=r===s?0:1/(s-r),d):[e,t]},d.clamp=function(u){return arguments.length?(l=!!u,d):l},d.interpolator=function(u){return arguments.length?(o=u,d):o};function f(u){return function(h){var m,v;return arguments.length?([m,v]=h,o=u(m,v),d):[o(0),o(1)]}}return d.range=f(Vm),d.rangeRound=f(VP),d.unknown=function(u){return arguments.length?(c=u,d):c},function(u){return i=u,r=u(e),s=u(t),a=r===s?0:1/(s-r),d}}function Ed(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DU(){var e=Ad(yw()(ea));return e.copy=function(){return Ed(e,DU())},rc.apply(e,arguments)}function OU(){var e=GP(yw()).domain([1,10]);return e.copy=function(){return Ed(e,OU()).base(e.base())},rc.apply(e,arguments)}function LU(){var e=KP(yw());return e.copy=function(){return Ed(e,LU()).constant(e.constant())},rc.apply(e,arguments)}function a3(){var e=YP(yw());return e.copy=function(){return Ed(e,a3()).exponent(e.exponent())},rc.apply(e,arguments)}function DAe(){return a3.apply(null,arguments).exponent(.5)}function RU(){var e=[],t=ea;function r(s){if(s!=null&&!isNaN(s=+s))return t((bx(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ad),r},r.interpolator=function(s){return arguments.length?(t=s,r):t},r.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>ySe(e,i/s))},r.copy=function(){return RU(t).domain(e)},rc.apply(r,arguments)}function bw(){var e=0,t=.5,r=1,s=1,a,i,o,l,c,d=ea,f,u=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+f(g))-i)*(s*g<s*i?l:c),d(u?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=f(e=+e),i=f(t=+t),o=f(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(u=!!g,m):u},m.interpolator=function(g){return arguments.length?(d=g,m):d};function v(g){return function(p){var x,b,y;return arguments.length?([x,b,y]=p,d=WSe(g,[x,b,y]),m):[d(0),d(.5),d(1)]}}return m.range=v(Vm),m.rangeRound=v(VP),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return f=g,a=g(e),i=g(t),o=g(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,m}}function $U(){var e=Ad(bw()(ea));return e.copy=function(){return Ed(e,$U())},rc.apply(e,arguments)}function FU(){var e=GP(bw()).domain([.1,1,10]);return e.copy=function(){return Ed(e,FU()).base(e.base())},rc.apply(e,arguments)}function MU(){var e=KP(bw());return e.copy=function(){return Ed(e,MU()).constant(e.constant())},rc.apply(e,arguments)}function i3(){var e=YP(bw());return e.copy=function(){return Ed(e,i3()).exponent(e.exponent())},rc.apply(e,arguments)}function OAe(){return i3.apply(null,arguments).exponent(.5)}const iL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yg,scaleDiverging:$U,scaleDivergingLog:FU,scaleDivergingPow:i3,scaleDivergingSqrt:OAe,scaleDivergingSymlog:MU,scaleIdentity:gU,scaleImplicit:tA,scaleLinear:c1,scaleLog:yU,scaleOrdinal:BP,scalePoint:Av,scalePow:XP,scaleQuantile:wU,scaleQuantize:NU,scaleRadial:jU,scaleSequential:DU,scaleSequentialLog:OU,scaleSequentialPow:a3,scaleSequentialQuantile:RU,scaleSequentialSqrt:DAe,scaleSequentialSymlog:LU,scaleSqrt:mCe,scaleSymlog:bU,scaleThreshold:SU,scaleTime:IAe,scaleUtc:kAe,tickFormat:vU},Symbol.toStringTag,{value:"Module"}));var LAe=Dm;function RAe(e,t,r){for(var s=-1,a=e.length;++s<a;){var i=e[s],o=t(i);if(o!=null&&(l===void 0?o===o&&!LAe(o):r(o,l)))var l=o,c=i}return c}var BU=RAe;function $Ae(e,t){return e>t}var FAe=$Ae,MAe=BU,BAe=FAe,zAe=Um;function UAe(e){return e&&e.length?MAe(e,zAe,BAe):void 0}var VAe=UAe;const Vc=Cr(VAe);function qAe(e,t){return e<t}var WAe=qAe,HAe=BU,GAe=WAe,KAe=Um;function YAe(e){return e&&e.length?HAe(e,KAe,GAe):void 0}var XAe=YAe;const jw=Cr(XAe);var QAe=bP,JAe=Cd,ZAe=Kz,e4e=Ea;function t4e(e,t){var r=e4e(e)?QAe:ZAe;return r(e,JAe(t))}var r4e=t4e,n4e=Hz,s4e=r4e;function a4e(e,t){return n4e(s4e(e,t),1)}var i4e=a4e;const o4e=Cr(i4e);var l4e=LP;function c4e(e,t){return l4e(e,t)}var d4e=c4e;const Zh=Cr(d4e);var qm=1e9,u4e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},l3,dn=!0,Ai="[DecimalError] ",Au=Ai+"Invalid argument: ",o3=Ai+"Exponent out of range: ",Wm=Math.floor,Jd=Math.pow,f4e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ma,os=1e7,tn=7,zU=9007199254740991,h1=Wm(zU/tn),jt={};jt.absoluteValue=jt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};jt.comparedTo=jt.cmp=function(e){var t,r,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,r=s<a?s:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};jt.decimalPlaces=jt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*tn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};jt.dividedBy=jt.div=function(e){return Fl(this,new this.constructor(e))};jt.dividedToIntegerBy=jt.idiv=function(e){var t=this,r=t.constructor;return Br(Fl(t,new r(e),0,1),r.precision)};jt.equals=jt.eq=function(e){return!this.cmp(e)};jt.exponent=function(){return qn(this)};jt.greaterThan=jt.gt=function(e){return this.cmp(e)>0};jt.greaterThanOrEqualTo=jt.gte=function(e){return this.cmp(e)>=0};jt.isInteger=jt.isint=function(){return this.e>this.d.length-2};jt.isNegative=jt.isneg=function(){return this.s<0};jt.isPositive=jt.ispos=function(){return this.s>0};jt.isZero=function(){return this.s===0};jt.lessThan=jt.lt=function(e){return this.cmp(e)<0};jt.lessThanOrEqualTo=jt.lte=function(e){return this.cmp(e)<1};jt.logarithm=jt.log=function(e){var t,r=this,s=r.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ma))throw Error(Ai+"NaN");if(r.s<1)throw Error(Ai+(r.s?"NaN":"-Infinity"));return r.eq(Ma)?new s(0):(dn=!1,t=Fl(Sg(r,i),Sg(e,i),i),dn=!0,Br(t,a))};jt.minus=jt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?qU(t,e):UU(t,(e.s=-e.s,e))};jt.modulo=jt.mod=function(e){var t,r=this,s=r.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(Ai+"NaN");return r.s?(dn=!1,t=Fl(r,e,0,1).times(e),dn=!0,r.minus(t)):Br(new s(r),a)};jt.naturalExponential=jt.exp=function(){return VU(this)};jt.naturalLogarithm=jt.ln=function(){return Sg(this)};jt.negated=jt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};jt.plus=jt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UU(t,e):qU(t,(e.s=-e.s,e))};jt.precision=jt.sd=function(e){var t,r,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Au+e);if(t=qn(a)+1,s=a.d.length-1,r=s*tn+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return e&&t>r?t:r};jt.squareRoot=jt.sqrt=function(){var e,t,r,s,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ai+"NaN")}for(e=qn(l),dn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=zo(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Wm((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=s,s=i.plus(Fl(l,i,o+2)).times(.5),zo(i.d).slice(0,o)===(t=zo(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Br(i,r+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return dn=!0,Br(s,r)};jt.times=jt.mul=function(e){var t,r,s,a,i,o,l,c,d,f=this,u=f.constructor,h=f.d,m=(e=new u(e)).d;if(!f.s||!e.s)return new u(0);for(e.s*=f.s,r=f.e+e.e,c=h.length,d=m.length,c<d&&(i=h,h=m,m=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)l=i[a]+m[s]*h[a-s-1]+t,i[a--]=l%os|0,t=l/os|0;i[a]=(i[a]+t)%os|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,dn?Br(e,u.precision):e};jt.toDecimalPlaces=jt.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(tl(e,0,qm),t===void 0?t=s.rounding:tl(t,0,8),Br(r,e+qn(r)+1,t))};jt.toExponential=function(e,t){var r,s=this,a=s.constructor;return e===void 0?r=Fu(s,!0):(tl(e,0,qm),t===void 0?t=a.rounding:tl(t,0,8),s=Br(new a(s),e+1,t),r=Fu(s,!0,e+1)),r};jt.toFixed=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?Fu(a):(tl(e,0,qm),t===void 0?t=i.rounding:tl(t,0,8),s=Br(new i(a),e+qn(a)+1,t),r=Fu(s.abs(),!1,e+qn(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};jt.toInteger=jt.toint=function(){var e=this,t=e.constructor;return Br(new t(e),qn(e)+1,t.rounding)};jt.toNumber=function(){return+this};jt.toPower=jt.pow=function(e){var t,r,s,a,i,o,l=this,c=l.constructor,d=12,f=+(e=new c(e));if(!e.s)return new c(Ma);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ai+"Infinity");return l}if(l.eq(Ma))return l;if(s=c.precision,e.eq(Ma))return Br(l,s);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=zU){for(a=new c(Ma),t=Math.ceil(s/tn+4),dn=!1;r%2&&(a=a.times(l),lL(a.d,t)),r=Wm(r/2),r!==0;)l=l.times(l),lL(l.d,t);return dn=!0,e.s<0?new c(Ma).div(a):Br(a,s)}}else if(i<0)throw Error(Ai+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,dn=!1,a=e.times(Sg(l,s+d)),dn=!0,a=VU(a),a.s=i,a};jt.toPrecision=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?(r=qn(a),s=Fu(a,r<=i.toExpNeg||r>=i.toExpPos)):(tl(e,1,qm),t===void 0?t=i.rounding:tl(t,0,8),a=Br(new i(a),e,t),r=qn(a),s=Fu(a,e<=r||r<=i.toExpNeg,e)),s};jt.toSignificantDigits=jt.tosd=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):(tl(e,1,qm),t===void 0?t=s.rounding:tl(t,0,8)),Br(new s(r),e,t)};jt.toString=jt.valueOf=jt.val=jt.toJSON=jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=qn(e),r=e.constructor;return Fu(e,t<=r.toExpNeg||t>=r.toExpPos)};function UU(e,t){var r,s,a,i,o,l,c,d,f=e.constructor,u=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),dn?Br(t,u):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,a=o,l=c.length),o=Math.ceil(u/tn),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/os|0,c[i]%=os;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,dn?Br(t,u):t}function tl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Au+e)}function zo(e){var t,r,s,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)s=e[t]+"",r=tn-s.length,r&&(i+=Tc(r)),i+=s;o=e[t],s=o+"",r=tn-s.length,r&&(i+=Tc(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Fl=function(){function e(s,a){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*a+o,s[l]=i%os|0,o=i/os|0;return o&&s.unshift(o),s}function t(s,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=a[l]){c=s[l]>a[l]?1:-1;break}return c}function r(s,a,i){for(var o=0;i--;)s[i]-=o,o=s[i]<a[i]?1:0,s[i]=o*os+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,o){var l,c,d,f,u,h,m,v,g,p,x,b,y,j,E,C,S,N,_=s.constructor,I=s.s==a.s?1:-1,T=s.d,A=a.d;if(!s.s)return new _(s);if(!a.s)throw Error(Ai+"Division by zero");for(c=s.e-a.e,S=A.length,E=T.length,m=new _(I),v=m.d=[],d=0;A[d]==(T[d]||0);)++d;if(A[d]>(T[d]||0)&&--c,i==null?b=i=_.precision:o?b=i+(qn(s)-qn(a))+1:b=i,b<0)return new _(0);if(b=b/tn+2|0,d=0,S==1)for(f=0,A=A[0],b++;(d<E||f)&&b--;d++)y=f*os+(T[d]||0),v[d]=y/A|0,f=y%A|0;else{for(f=os/(A[0]+1)|0,f>1&&(A=e(A,f),T=e(T,f),S=A.length,E=T.length),j=S,g=T.slice(0,S),p=g.length;p<S;)g[p++]=0;N=A.slice(),N.unshift(0),C=A[0],A[1]>=os/2&&++C;do f=0,l=t(A,g,S,p),l<0?(x=g[0],S!=p&&(x=x*os+(g[1]||0)),f=x/C|0,f>1?(f>=os&&(f=os-1),u=e(A,f),h=u.length,p=g.length,l=t(u,g,h,p),l==1&&(f--,r(u,S<h?N:A,h))):(f==0&&(l=f=1),u=A.slice()),h=u.length,h<p&&u.unshift(0),r(g,u,p),l==-1&&(p=g.length,l=t(A,g,S,p),l<1&&(f++,r(g,S<p?N:A,p))),p=g.length):l===0&&(f++,g=[0]),v[d++]=f,l&&g[0]?g[p++]=T[j]||0:(g=[T[j]],p=1);while((j++<E||g[0]!==void 0)&&b--)}return v[0]||v.shift(),m.e=c,Br(m,o?i+qn(m)+1:i)}}();function VU(e,t){var r,s,a,i,o,l,c=0,d=0,f=e.constructor,u=f.precision;if(qn(e)>16)throw Error(o3+qn(e));if(!e.s)return new f(Ma);for(t==null?(dn=!1,l=u):l=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Jd(2,d))/Math.LN10*2+5|0,l+=s,r=a=i=new f(Ma),f.precision=l;;){if(a=Br(a.times(e),l),r=r.times(++c),o=i.plus(Fl(a,r,l)),zo(o.d).slice(0,l)===zo(i.d).slice(0,l)){for(;d--;)i=Br(i.times(i),l);return f.precision=u,t==null?(dn=!0,Br(i,u)):i}i=o}}function qn(e){for(var t=e.e*tn,r=e.d[0];r>=10;r/=10)t++;return t}function p5(e,t,r){if(t>e.LN10.sd())throw dn=!0,r&&(e.precision=r),Error(Ai+"LN10 precision limit exceeded");return Br(new e(e.LN10),t)}function Tc(e){for(var t="";e--;)t+="0";return t}function Sg(e,t){var r,s,a,i,o,l,c,d,f,u=1,h=10,m=e,v=m.d,g=m.constructor,p=g.precision;if(m.s<1)throw Error(Ai+(m.s?"NaN":"-Infinity"));if(m.eq(Ma))return new g(0);if(t==null?(dn=!1,d=p):d=t,m.eq(10))return t==null&&(dn=!0),p5(g,d);if(d+=h,g.precision=d,r=zo(v),s=r.charAt(0),i=qn(m),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)m=m.times(e),r=zo(m.d),s=r.charAt(0),u++;i=qn(m),s>1?(m=new g("0."+r),i++):m=new g(s+"."+r.slice(1))}else return c=p5(g,d+2,p).times(i+""),m=Sg(new g(s+"."+r.slice(1)),d-h).plus(c),g.precision=p,t==null?(dn=!0,Br(m,p)):m;for(l=o=m=Fl(m.minus(Ma),m.plus(Ma),d),f=Br(m.times(m),d),a=3;;){if(o=Br(o.times(f),d),c=l.plus(Fl(o,new g(a),d)),zo(c.d).slice(0,d)===zo(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(p5(g,d+2,p).times(i+""))),l=Fl(l,new g(u),d),g.precision=p,t==null?(dn=!0,Br(l,p)):l;l=c,a+=2}}function oL(e,t){var r,s,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,r=r-s-1,e.e=Wm(r/tn),e.d=[],s=(r+1)%tn,r<0&&(s+=tn),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=tn;s<a;)e.d.push(+t.slice(s,s+=tn));t=t.slice(s),s=tn-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),dn&&(e.e>h1||e.e<-h1))throw Error(o3+r)}else e.s=0,e.e=0,e.d=[0];return e}function Br(e,t,r){var s,a,i,o,l,c,d,f,u=e.d;for(o=1,i=u[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=tn,a=t,d=u[f=0];else{if(f=Math.ceil((s+1)/tn),i=u.length,f>=i)return e;for(d=i=u[f],o=1;i>=10;i/=10)o++;s%=tn,a=s-tn+o}if(r!==void 0&&(i=Jd(10,o-a-1),l=d/i%10|0,c=t<0||u[f+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(s>0?a>0?d/Jd(10,o-a):0:u[f-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return c?(i=qn(e),u.length=1,t=t-i-1,u[0]=Jd(10,(tn-t%tn)%tn),e.e=Wm(-t/tn)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(s==0?(u.length=f,i=1,f--):(u.length=f+1,i=Jd(10,tn-s),u[f]=a>0?(d/Jd(10,o-a)%Jd(10,a)|0)*i:0),c)for(;;)if(f==0){(u[0]+=i)==os&&(u[0]=1,++e.e);break}else{if(u[f]+=i,u[f]!=os)break;u[f--]=0,i=1}for(s=u.length;u[--s]===0;)u.pop();if(dn&&(e.e>h1||e.e<-h1))throw Error(o3+qn(e));return e}function qU(e,t){var r,s,a,i,o,l,c,d,f,u,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),dn?Br(t,m):t;if(c=e.d,u=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(f=o<0,f?(r=c,o=-o,l=u.length):(r=u,s=d,l=c.length),a=Math.max(Math.ceil(m/tn),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=u.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=u[a]){f=c[a]<u[a];break}o=0}for(f&&(r=c,c=u,u=r,t.s=-t.s),l=c.length,a=u.length-l;a>0;--a)c[l++]=0;for(a=u.length;a>o;){if(c[--a]<u[a]){for(i=a;i&&c[--i]===0;)c[i]=os-1;--c[i],c[a]+=os}c[a]-=u[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,dn?Br(t,m):t):new h(0)}function Fu(e,t,r){var s,a=qn(e),i=zo(e.d),o=i.length;return t?(r&&(s=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Tc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Tc(-a-1)+i,r&&(s=r-o)>0&&(i+=Tc(s))):a>=o?(i+=Tc(a+1-o),r&&(s=r-a-1)>0&&(i=i+"."+Tc(s))):((s=a+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-o)>0&&(a+1===o&&(i+="."),i+=Tc(s))),e.s<0?"-"+i:i}function lL(e,t){if(e.length>t)return e.length=t,!0}function WU(e){var t,r,s;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Au+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return oL(o,i.toString())}else if(typeof i!="string")throw Error(Au+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,f4e.test(i))oL(o,i);else throw Error(Au+i)}if(a.prototype=jt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=WU,a.config=a.set=h4e,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return a.config(e),a}function h4e(e){if(!e||typeof e!="object")throw Error(Ai+"Object expected");var t,r,s,a=["precision",1,qm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[r=a[t]])!==void 0)if(Wm(s)===s&&s>=a[t+1]&&s<=a[t+2])this[r]=s;else throw Error(Au+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(Au+r+": "+s);return this}var l3=WU(u4e);Ma=new l3(1);const Or=l3;function m4e(e){return x4e(e)||g4e(e)||v4e(e)||p4e()}function p4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v4e(e,t){if(e){if(typeof e=="string")return aA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aA(e,t)}}function g4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function x4e(e){if(Array.isArray(e))return aA(e)}function aA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var y4e=function(t){return t},HU={"@@functional/placeholder":!0},GU=function(t){return t===HU},cL=function(t){return function r(){return arguments.length===0||arguments.length===1&&GU(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},b4e=function e(t,r){return t===1?r:cL(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==HU}).length;return o>=t?r.apply(void 0,a):e(t-o,cL(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=a.map(function(u){return GU(u)?c.shift():u});return r.apply(void 0,m4e(f).concat(c))}))})},ww=function(t){return b4e(t.length,t)},iA=function(t,r){for(var s=[],a=t;a<r;++a)s[a-t]=a;return s},j4e=ww(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),w4e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];if(!r.length)return y4e;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},oA=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},KU=function(t){var r=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,s=t.apply(void 0,i)),s}};function N4e(e){var t;return e===0?t=1:t=Math.floor(new Or(e).abs().log(10).toNumber())+1,t}function S4e(e,t,r){for(var s=new Or(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(r),a++;return i}var C4e=ww(function(e,t,r){var s=+e,a=+t;return s+r*(a-s)}),A4e=ww(function(e,t,r){var s=t-+e;return s=s||1/0,(r-e)/s}),E4e=ww(function(e,t,r){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});const Nw={rangeStep:S4e,getDigitCount:N4e,interpolateNumber:C4e,uninterpolateNumber:A4e,uninterpolateTruncation:E4e};function lA(e){return _4e(e)||T4e(e)||YU(e)||P4e()}function P4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _4e(e){if(Array.isArray(e))return cA(e)}function Cg(e,t){return D4e(e)||k4e(e,t)||YU(e,t)||I4e()}function I4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YU(e,t){if(e){if(typeof e=="string")return cA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cA(e,t)}}function cA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function k4e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function D4e(e){if(Array.isArray(e))return e}function XU(e){var t=Cg(e,2),r=t[0],s=t[1],a=r,i=s;return r>s&&(a=s,i=r),[a,i]}function QU(e,t,r){if(e.lte(0))return new Or(0);var s=Nw.getDigitCount(e.toNumber()),a=new Or(10).pow(s),i=e.div(a),o=s!==1?.05:.1,l=new Or(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new Or(Math.ceil(c))}function O4e(e,t,r){var s=1,a=new Or(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(s=new Or(10).pow(Nw.getDigitCount(e)-1),a=new Or(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Or(Math.floor(e)))}else e===0?a=new Or(Math.floor((t-1)/2)):r||(a=new Or(Math.floor(e)));var o=Math.floor((t-1)/2),l=w4e(j4e(function(c){return a.add(new Or(c-o).mul(s)).toNumber()}),iA);return l(0,t)}function JU(e,t,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Or(0),tickMin:new Or(0),tickMax:new Or(0)};var i=QU(new Or(t).sub(e).div(r-1),s,a),o;e<=0&&t>=0?o=new Or(0):(o=new Or(e).add(t).div(2),o=o.sub(new Or(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Or(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?JU(e,t,r,s,a+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new Or(l).mul(i)),tickMax:o.add(new Or(c).mul(i))})}function L4e(e){var t=Cg(e,2),r=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=XU([r,s]),c=Cg(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var u=f===1/0?[d].concat(lA(iA(0,a-1).map(function(){return 1/0}))):[].concat(lA(iA(0,a-1).map(function(){return-1/0})),[f]);return r>s?oA(u):u}if(d===f)return O4e(d,a,i);var h=JU(d,f,o,i),m=h.step,v=h.tickMin,g=h.tickMax,p=Nw.rangeStep(v,g.add(new Or(.1).mul(m)),m);return r>s?oA(p):p}function R4e(e,t){var r=Cg(e,2),s=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=XU([s,a]),l=Cg(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var f=Math.max(t,2),u=QU(new Or(d).sub(c).div(f-1),i,0),h=[].concat(lA(Nw.rangeStep(new Or(c),new Or(d).sub(new Or(.99).mul(u)),u)),[d]);return s>a?oA(h):h}var $4e=KU(L4e),F4e=KU(R4e),M4e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},m1.apply(this,arguments)}function B4e(e,t){return q4e(e)||V4e(e,t)||U4e(e,t)||z4e()}function z4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U4e(e,t){if(e){if(typeof e=="string")return dL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dL(e,t)}}function dL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function V4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function q4e(e){if(Array.isArray(e))return e}function W4e(e,t){if(e==null)return{};var r=H4e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function H4e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function G4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uL(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,tV(s.key),s)}}function K4e(e,t,r){return t&&uL(e.prototype,t),r&&uL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y4e(e,t,r){return t=p1(t),X4e(e,ZU()?Reflect.construct(t,r||[],p1(e).constructor):t.apply(e,r))}function X4e(e,t){if(t&&(em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q4e(e)}function Q4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZU=function(){return!!e})()}function p1(e){return p1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p1(e)}function J4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dA(e,t)}function dA(e,t){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},dA(e,t)}function eV(e,t,r){return t=tV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tV(e){var t=Z4e(e,"string");return em(t)=="symbol"?t:t+""}function Z4e(e,t){if(em(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(em(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sx=function(e){function t(){return G4e(this,t),Y4e(this,t,arguments)}return J4e(t,e),K4e(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,f=s.xAxis,u=s.yAxis,h=W4e(s,M4e),m=er(h,!1);this.props.direction==="x"&&f.type!=="number"&&fd(!1);var v=c.map(function(g){var p=d(g,l),x=p.x,b=p.y,y=p.value,j=p.errorVal;if(!j)return null;var E=[],C,S;if(Array.isArray(j)){var N=B4e(j,2);C=N[0],S=N[1]}else C=S=j;if(i==="vertical"){var _=f.scale,I=b+a,T=I+o,A=I-o,O=_(y-C),D=_(y+S);E.push({x1:D,y1:T,x2:D,y2:A}),E.push({x1:O,y1:I,x2:D,y2:I}),E.push({x1:O,y1:T,x2:O,y2:A})}else if(i==="horizontal"){var $=u.scale,M=x+a,R=M-o,B=M+o,U=$(y-C),W=$(y+S);E.push({x1:R,y1:W,x2:B,y2:W}),E.push({x1:M,y1:U,x2:M,y2:W}),E.push({x1:R,y1:U,x2:B,y2:U})}return ce.createElement(Yr,m1({className:"recharts-errorBar",key:"bar-".concat(E.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},m),E.map(function(q){return ce.createElement("line",m1({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return ce.createElement(Yr,{className:"recharts-errorBars"},v)}}])}(ce.Component);eV(Sx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});eV(Sx,"displayName","ErrorBar");function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}function fL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fL(Object(r),!0).forEach(function(s){eEe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function eEe(e,t,r){return t=tEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tEe(e){var t=rEe(e,"string");return Ag(t)=="symbol"?t:t+""}function rEe(e,t){if(Ag(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Ag(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rV=function(t){var r=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Ra(r,Sh);if(!o)return null;var l=Sh.defaultProps,c=l!==void 0?qd(qd({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(s||[]).reduce(function(f,u){var h=u.item,m=u.props,v=m.sectors||m.data||[];return f.concat(v.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):d=(s||[]).map(function(f){var u=f.item,h=u.type.defaultProps,m=h!==void 0?qd(qd({},h),u.props):{},v=m.dataKey,g=m.name,p=m.legendType,x=m.hide;return{inactive:x,dataKey:v,type:c.iconType||p||"square",color:c3(u),value:g||v,payload:m}}),qd(qd(qd({},c),Sh.getWithHeight(o,a)),{},{payload:d,item:o})};function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function hL(e){return iEe(e)||aEe(e)||sEe(e)||nEe()}function nEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sEe(e,t){if(e){if(typeof e=="string")return uA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uA(e,t)}}function aEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iEe(e){if(Array.isArray(e))return uA(e)}function uA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function mL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(r),!0).forEach(function(s){Ah(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ah(e,t,r){return t=oEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oEe(e){var t=lEe(e,"string");return Eg(t)=="symbol"?t:t+""}function lEe(e,t){if(Eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Eg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ra(e,t,r){return rr(e)||rr(t)?r:es(t)?bi(e,t,r):Zt(t)?t(e):r}function Ev(e,t,r,s){var a=o4e(e,function(l){return ra(l,t)});if(r==="number"){var i=a.filter(function(l){return it(l)||parseFloat(l)});return i.length?[jw(i),Vc(i)]:[1/0,-1/0]}var o=s?a.filter(function(l){return!rr(l)}):a;return o.map(function(l){return es(l)||l instanceof Date?l:""})}var cEe=function(t){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var f=d>0?a[d-1].coordinate:a[l-1].coordinate,u=a[d].coordinate,h=d>=l-1?a[0].coordinate:a[d+1].coordinate,m=void 0;if(so(u-f)!==so(h-u)){var v=[];if(so(h-u)===so(c[1]-c[0])){m=h;var g=u+c[1]-c[0];v[0]=Math.min(g,(g+f)/2),v[1]=Math.max(g,(g+f)/2)}else{m=f;var p=h+c[1]-c[0];v[0]=Math.min(u,(p+u)/2),v[1]=Math.max(u,(p+u)/2)}var x=[Math.min(u,(m+u)/2),Math.max(u,(m+u)/2)];if(t>x[0]&&t<=x[1]||t>=v[0]&&t<=v[1]){o=a[d].index;break}}else{var b=Math.min(f,h),y=Math.max(f,h);if(t>(b+u)/2&&t<=(y+u)/2){o=a[d].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(s[j].coordinate+s[j+1].coordinate)/2||j>0&&j<l-1&&t>(s[j].coordinate+s[j-1].coordinate)/2&&t<=(s[j].coordinate+s[j+1].coordinate)/2||j===l-1&&t>(s[j].coordinate+s[j-1].coordinate)/2){o=s[j].index;break}return o},c3=function(t){var r,s=t,a=s.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Sn(Sn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},dEe=function(t){var r=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var f=i[l[c]].stackGroups,u=Object.keys(f),h=0,m=u.length;h<m;h++){var v=f[u[h]],g=v.items,p=v.cateAxisId,x=g.filter(function(S){return Rl(S.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,y=b!==void 0?Sn(Sn({},b),x[0].props):x[0].props,j=y.barSize,E=y[p];o[E]||(o[E]=[]);var C=rr(j)?r:j;o[E].push({item:x[0],stackList:x.slice(1),barSize:rr(C)?void 0:$u(C,s,0)})}}return o},uEe=function(t){var r=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=$u(r,a,0,!0),f,u=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,v=o.reduce(function(j,E){return j+E.barSize||0},0);v+=(c-1)*d,v>=a&&(v-=(c-1)*d,d=0),v>=a&&m>0&&(h=!0,m*=.9,v=c*m);var g=(a-v)/2>>0,p={offset:g-d,size:0};f=o.reduce(function(j,E){var C={item:E.item,position:{offset:p.offset+p.size+d,size:h?m:E.barSize}},S=[].concat(hL(j),[C]);return p=S[S.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(N){S.push({item:N,position:p})}),S},u)}else{var x=$u(s,a,0,!0);a-2*x-(c-1)*d<=0&&(d=0);var b=(a-2*x-(c-1)*d)/c;b>1&&(b>>=0);var y=l===+l?Math.min(b,l):b;f=o.reduce(function(j,E,C){var S=[].concat(hL(j),[{item:E.item,position:{offset:x+(b+d)*C+(b-y)/2,size:y}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(N){S.push({item:N,position:S[S.length-1].position})}),S},u)}return f},fEe=function(t,r,s,a){var i=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=rV({children:i,legendWidth:c});if(d){var f=a||{},u=f.width,h=f.height,m=d.align,v=d.verticalAlign,g=d.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&m!=="center"&&it(t[m]))return Sn(Sn({},t),{},Ah({},m,t[m]+(u||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&v!=="middle"&&it(t[v]))return Sn(Sn({},t),{},Ah({},v,t[v]+(h||0)))}return t},hEe=function(t,r,s){return rr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},nV=function(t,r,s,a,i){var o=r.props.children,l=ji(o,Sx).filter(function(d){return hEe(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,f){var u=ra(f,s);if(rr(u))return d;var h=Array.isArray(u)?[jw(u),Vc(u)]:[u,u],m=c.reduce(function(v,g){var p=ra(f,g,0),x=h[0]-Math.abs(Array.isArray(p)?p[0]:p),b=h[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(x,v[0]),Math.max(b,v[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},mEe=function(t,r,s,a,i){var o=r.map(function(l){return nV(t,l,s,i,a)}).filter(function(l){return!rr(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},sV=function(t,r,s,a,i){var o=r.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&nV(t,c,d,a)||Ev(t,d,s,i)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,u=d.length;f<u;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},aV=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},iV=function(t,r,s,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===s&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(s),l},kl=function(t,r,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||s)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?so(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(u){var h=i?i.indexOf(u):u;return{coordinate:a(h)+d,value:u,offset:d}});return f.filter(function(u){return!Fm(u.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(u,h){return{coordinate:a(u)+d,value:u,index:h,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(u){return{coordinate:a(u)+d,value:u,offset:d}}):a.domain().map(function(u,h){return{coordinate:a(u)+d,value:i?i[u]:u,index:h,offset:d}})},v5=new WeakMap,fy=function(t,r){if(typeof r!="function")return t;v5.has(t)||v5.set(t,new WeakMap);var s=v5.get(t);if(s.has(r))return s.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,a),a},pEe=function(t,r,s){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:yg(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:c1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:Av(),realScaleType:"point"}:i==="category"?{scale:yg(),realScaleType:"band"}:{scale:c1(),realScaleType:"linear"};if(Ru(a)){var c="scale".concat(lw(a));return{scale:(iL[c]||Av)(),realScaleType:iL[c]?c:"point"}}return Zt(a)?{scale:a}:{scale:Av(),realScaleType:"point"}},pL=1e-4,vEe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var s=r.length,a=t.range(),i=Math.min(a[0],a[1])-pL,o=Math.max(a[0],a[1])+pL,l=t(r[0]),c=t(r[s-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[s-1]])}},gEe=function(t,r){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===r)return t[s].position;return null},xEe=function(t,r){if(!r||r.length!==2||!it(r[0])||!it(r[1]))return t;var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!it(t[0])||t[0]<s)&&(i[0]=s),(!it(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},yEe=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0,l=0;l<r;++l){var c=Fm(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=i,t[l][s][1]=i+c,i=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},bEe=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0;o<r;++o){var l=Fm(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=i,t[o][s][1]=i+l,i=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},jEe={sign:yEe,expand:Bxe,none:Wh,silhouette:zxe,wiggle:Uxe,positive:bEe},wEe=function(t,r,s){var a=r.map(function(l){return l.props.dataKey}),i=jEe[s],o=Mxe().keys(a).value(function(l,c){return+ra(l,c,0)}).order(RC).offset(i);return o(t)},NEe=function(t,r,s,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(u,h){var m,v=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Sn(Sn({},h.type.defaultProps),h.props):h.props,g=v.stackId,p=v.hide;if(p)return u;var x=v[s],b=u[x]||{hasStack:!1,stackGroups:{}};if(es(g)){var y=b.stackGroups[g]||{numericAxisId:s,cateAxisId:a,items:[]};y.items.push(h),b.hasStack=!0,b.stackGroups[g]=y}else b.stackGroups[Mm("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[h]};return Sn(Sn({},u),{},Ah({},x,b))},c),f={};return Object.keys(d).reduce(function(u,h){var m=d[h];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,p){var x=m.stackGroups[p];return Sn(Sn({},g),{},Ah({},p,{numericAxisId:s,cateAxisId:a,items:x.items,stackedData:wEe(t,x.items,i)}))},v)}return Sn(Sn({},u),{},Ah({},h,m))},f)},SEe=function(t,r){var s=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=s||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var f=$4e(d,i,l);return t.domain([jw(f),Vc(f)]),{niceTicks:f}}if(i&&a==="number"){var u=t.domain(),h=F4e(u,i,l);return{niceTicks:h}}return null};function v1(e){var t=e.axis,r=e.ticks,s=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!rr(a[t.dataKey])){var l=Bb(r,"value",a[t.dataKey]);if(l)return l.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var c=ra(a,rr(o)?t.dataKey:o);return rr(c)?null:t.scale(c)}var vL=function(t){var r=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return s[l]?s[l].coordinate+a:null;var c=ra(o,r.dataKey,r.domain[l]);return rr(c)?null:r.scale(c)-i/2+a},CEe=function(t){var r=t.numericAxis,s=r.scale.domain();if(r.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},AEe=function(t,r){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?Sn(Sn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(es(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},EEe=function(t){return t.reduce(function(r,s){return[jw(s.concat([r[0]]).filter(it)),Vc(s.concat([r[1]]).filter(it))]},[1/0,-1/0])},oV=function(t,r,s){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,f){var u=EEe(f.slice(r,s+1));return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},gL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fA=function(t,r,s){if(Zt(t))return t(r,s);if(!Array.isArray(t))return r;var a=[];if(it(t[0]))a[0]=s?t[0]:Math.min(t[0],r[0]);else if(gL.test(t[0])){var i=+gL.exec(t[0])[1];a[0]=r[0]-i}else Zt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(it(t[1]))a[1]=s?t[1]:Math.max(t[1],r[1]);else if(xL.test(t[1])){var o=+xL.exec(t[1])[1];a[1]=r[1]+o}else Zt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},g1=function(t,r,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&r&&r.length>=2){for(var i=$P(r,function(u){return u.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],f=i[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},yL=function(t,r,s){return!t||!t.length||Zh(t,bi(s,"type.defaultProps.domain"))?r:t},lV=function(t,r){var s=t.type.defaultProps?Sn(Sn({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,f=s.hide;return Sn(Sn({},er(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:c3(t),value:ra(r,a),type:c,payload:r,chartType:d,hide:f})};function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}function bL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function jL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bL(Object(r),!0).forEach(function(s){PEe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function PEe(e,t,r){return t=TEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TEe(e){var t=_Ee(e,"string");return Pg(t)=="symbol"?t:t+""}function _Ee(e,t){if(Pg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Pg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x1=Math.PI/180,IEe=function(t){return t*180/Math.PI},As=function(t,r,s,a){return{x:t+Math.cos(-x1*a)*s,y:r+Math.sin(-x1*a)*s}},kEe=function(t,r){var s=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-o,2))},DEe=function(t,r){var s=t.x,a=t.y,i=r.cx,o=r.cy,l=kEe({x:s,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(s-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:IEe(d),angleInRadian:d}},OEe=function(t){var r=t.startAngle,s=t.endAngle,a=Math.floor(r/360),i=Math.floor(s/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:s-o*360}},LEe=function(t,r){var s=r.startAngle,a=r.endAngle,i=Math.floor(s/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},wL=function(t,r){var s=t.x,a=t.y,i=DEe({x:s,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=OEe(r),u=f.startAngle,h=f.endAngle,m=l,v;if(u<=h){for(;m>h;)m-=360;for(;m<u;)m+=360;v=m>=u&&m<=h}else{for(;m>u;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=u}return v?jL(jL({},r),{},{radius:o,angle:LEe(m,r)}):null};function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}var REe=["offset"];function $Ee(e){return zEe(e)||BEe(e)||MEe(e)||FEe()}function FEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MEe(e,t){if(e){if(typeof e=="string")return hA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hA(e,t)}}function BEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zEe(e){if(Array.isArray(e))return hA(e)}function hA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function UEe(e,t){if(e==null)return{};var r=VEe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function VEe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function NL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NL(Object(r),!0).forEach(function(s){qEe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function qEe(e,t,r){return t=WEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WEe(e){var t=HEe(e,"string");return Tg(t)=="symbol"?t:t+""}function HEe(e,t){if(Tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Tg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_g.apply(this,arguments)}var GEe=function(t){var r=t.value,s=t.formatter,a=rr(t.children)?r:t.children;return Zt(s)?s(a):a},KEe=function(t,r){var s=so(r-t),a=Math.min(Math.abs(r-t),360);return s*a},YEe=function(t,r,s){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,f=c.cy,u=c.innerRadius,h=c.outerRadius,m=c.startAngle,v=c.endAngle,g=c.clockWise,p=(u+h)/2,x=KEe(m,v),b=x>=0?1:-1,y,j;a==="insideStart"?(y=m+b*o,j=g):a==="insideEnd"?(y=v-b*o,j=!g):a==="end"&&(y=v+b*o,j=g),j=x<=0?j:!j;var E=As(d,f,p,y),C=As(d,f,p,y+(j?1:-1)*359),S="M".concat(E.x,",").concat(E.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(j?0:1,`,
    `).concat(C.x,",").concat(C.y),N=rr(t.id)?Mm("recharts-radial-line-"):t.id;return ce.createElement("text",_g({},s,{dominantBaseline:"central",className:cr("recharts-radial-bar-label",l)}),ce.createElement("defs",null,ce.createElement("path",{id:N,d:S})),ce.createElement("textPath",{xlinkHref:"#".concat(N)},r))},XEe=function(t){var r=t.viewBox,s=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,f=i.startAngle,u=i.endAngle,h=(f+u)/2;if(a==="outside"){var m=As(o,l,d+s,h),v=m.x,g=m.y;return{x:v,y:g,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var p=(c+d)/2,x=As(o,l,p,h),b=x.x,y=x.y;return{x:b,y,textAnchor:"middle",verticalAnchor:"middle"}},QEe=function(t){var r=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,f=o.height,u=f>=0?1:-1,h=u*a,m=u>0?"end":"start",v=u>0?"start":"end",g=d>=0?1:-1,p=g*a,x=g>0?"end":"start",b=g>0?"start":"end";if(i==="top"){var y={x:l+d/2,y:c-u*a,textAnchor:"middle",verticalAnchor:m};return Yn(Yn({},y),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var j={x:l+d/2,y:c+f+h,textAnchor:"middle",verticalAnchor:v};return Yn(Yn({},j),s?{height:Math.max(s.y+s.height-(c+f),0),width:d}:{})}if(i==="left"){var E={x:l-p,y:c+f/2,textAnchor:x,verticalAnchor:"middle"};return Yn(Yn({},E),s?{width:Math.max(E.x-s.x,0),height:f}:{})}if(i==="right"){var C={x:l+d+p,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return Yn(Yn({},C),s?{width:Math.max(s.x+s.width-C.x,0),height:f}:{})}var S=s?{width:d,height:f}:{};return i==="insideLeft"?Yn({x:l+p,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},S):i==="insideRight"?Yn({x:l+d-p,y:c+f/2,textAnchor:x,verticalAnchor:"middle"},S):i==="insideTop"?Yn({x:l+d/2,y:c+h,textAnchor:"middle",verticalAnchor:v},S):i==="insideBottom"?Yn({x:l+d/2,y:c+f-h,textAnchor:"middle",verticalAnchor:m},S):i==="insideTopLeft"?Yn({x:l+p,y:c+h,textAnchor:b,verticalAnchor:v},S):i==="insideTopRight"?Yn({x:l+d-p,y:c+h,textAnchor:x,verticalAnchor:v},S):i==="insideBottomLeft"?Yn({x:l+p,y:c+f-h,textAnchor:b,verticalAnchor:m},S):i==="insideBottomRight"?Yn({x:l+d-p,y:c+f-h,textAnchor:x,verticalAnchor:m},S):Om(i)&&(it(i.x)||fu(i.x))&&(it(i.y)||fu(i.y))?Yn({x:l+$u(i.x,d),y:c+$u(i.y,f),textAnchor:"end",verticalAnchor:"end"},S):Yn({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},JEe=function(t){return"cx"in t&&it(t.cx)};function zs(e){var t=e.offset,r=t===void 0?5:t,s=UEe(e,REe),a=Yn({offset:r},s),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,f=a.className,u=f===void 0?"":f,h=a.textBreakAll;if(!i||rr(l)&&rr(c)&&!w.isValidElement(d)&&!Zt(d))return null;if(w.isValidElement(d))return w.cloneElement(d,a);var m;if(Zt(d)){if(m=w.createElement(d,a),w.isValidElement(m))return m}else m=GEe(a);var v=JEe(i),g=er(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return YEe(a,m,g);var p=v?XEe(a):QEe(a);return ce.createElement(r1,_g({className:cr("recharts-label",u)},g,p,{breakAll:h}),m)}zs.displayName="Label";var cV=function(t){var r=t.cx,s=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,f=t.outerRadius,u=t.x,h=t.y,m=t.top,v=t.left,g=t.width,p=t.height,x=t.clockWise,b=t.labelViewBox;if(b)return b;if(it(g)&&it(p)){if(it(u)&&it(h))return{x:u,y:h,width:g,height:p};if(it(m)&&it(v))return{x:m,y:v,width:g,height:p}}return it(u)&&it(h)?{x:u,y:h,width:0,height:0}:it(r)&&it(s)?{cx:r,cy:s,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},ZEe=function(t,r){return t?t===!0?ce.createElement(zs,{key:"label-implicit",viewBox:r}):es(t)?ce.createElement(zs,{key:"label-implicit",viewBox:r,value:t}):w.isValidElement(t)?t.type===zs?w.cloneElement(t,{key:"label-implicit",viewBox:r}):ce.createElement(zs,{key:"label-implicit",content:t,viewBox:r}):Zt(t)?ce.createElement(zs,{key:"label-implicit",content:t,viewBox:r}):Om(t)?ce.createElement(zs,_g({viewBox:r},t,{key:"label-implicit"})):null:null},ePe=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=cV(t),o=ji(a,zs).map(function(c,d){return w.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!s)return o;var l=ZEe(t.label,r||i);return[l].concat($Ee(o))};zs.parseViewBox=cV;zs.renderCallByParent=ePe;function tPe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var rPe=tPe;const nPe=Cr(rPe);function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}var sPe=["valueAccessor"],aPe=["data","dataKey","clockWise","id","textBreakAll"];function iPe(e){return dPe(e)||cPe(e)||lPe(e)||oPe()}function oPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lPe(e,t){if(e){if(typeof e=="string")return mA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mA(e,t)}}function cPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dPe(e){if(Array.isArray(e))return mA(e)}function mA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function y1(){return y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},y1.apply(this,arguments)}function SL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function CL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SL(Object(r),!0).forEach(function(s){uPe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function uPe(e,t,r){return t=fPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fPe(e){var t=hPe(e,"string");return Ig(t)=="symbol"?t:t+""}function hPe(e,t){if(Ig(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Ig(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AL(e,t){if(e==null)return{};var r=mPe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function mPe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var pPe=function(t){return Array.isArray(t.value)?nPe(t.value):t.value};function Ml(e){var t=e.valueAccessor,r=t===void 0?pPe:t,s=AL(e,sPe),a=s.data,i=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=AL(s,aPe);return!a||!a.length?null:ce.createElement(Yr,{className:"recharts-label-list"},a.map(function(f,u){var h=rr(i)?r(f,u):ra(f&&f.payload,i),m=rr(l)?{}:{id:"".concat(l,"-").concat(u)};return ce.createElement(zs,y1({},er(f,!0),d,m,{parentViewBox:f.parentViewBox,value:h,textBreakAll:c,viewBox:zs.parseViewBox(rr(o)?f:CL(CL({},f),{},{clockWise:o})),key:"label-".concat(u),index:u}))}))}Ml.displayName="LabelList";function vPe(e,t){return e?e===!0?ce.createElement(Ml,{key:"labelList-implicit",data:t}):ce.isValidElement(e)||Zt(e)?ce.createElement(Ml,{key:"labelList-implicit",data:t,content:e}):Om(e)?ce.createElement(Ml,y1({data:t},e,{key:"labelList-implicit"})):null:null}function gPe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=ji(s,Ml).map(function(o,l){return w.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=vPe(e.label,t);return[i].concat(iPe(a))}Ml.renderCallByParent=gPe;function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function pA(){return pA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pA.apply(this,arguments)}function EL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function PL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(r),!0).forEach(function(s){xPe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function xPe(e,t,r){return t=yPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yPe(e){var t=bPe(e,"string");return kg(t)=="symbol"?t:t+""}function bPe(e,t){if(kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(kg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jPe=function(t,r){var s=so(r-t),a=Math.min(Math.abs(r-t),359.999);return s*a},hy=function(t){var r=t.cx,s=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,f=c*(l?1:-1)+a,u=Math.asin(c/f)/x1,h=d?i:i+o*u,m=As(r,s,f,h),v=As(r,s,a,h),g=d?i-o*u:i,p=As(r,s,f*Math.cos(u*x1),g);return{center:m,circleTangency:v,lineTangency:p,theta:u}},dV=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=jPe(o,l),d=o+c,f=As(r,s,i,o),u=As(r,s,i,d),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(a>0){var m=As(r,s,a,o),v=As(r,s,a,d);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(s," Z");return h},wPe=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,f=t.endAngle,u=so(f-d),h=hy({cx:r,cy:s,radius:i,angle:d,sign:u,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,v=h.lineTangency,g=h.theta,p=hy({cx:r,cy:s,radius:i,angle:f,sign:-u,cornerRadius:o,cornerIsExternal:c}),x=p.circleTangency,b=p.lineTangency,y=p.theta,j=c?Math.abs(d-f):Math.abs(d-f)-g-y;if(j<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):dV({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:f});var E="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var C=hy({cx:r,cy:s,radius:a,angle:d,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=C.circleTangency,N=C.lineTangency,_=C.theta,I=hy({cx:r,cy:s,radius:a,angle:f,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=I.circleTangency,A=I.lineTangency,O=I.theta,D=c?Math.abs(d-f):Math.abs(d-f)-_-O;if(D<0&&o===0)return"".concat(E,"L").concat(r,",").concat(s,"Z");E+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(D>180),",").concat(+(u>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,"Z")}else E+="L".concat(r,",").concat(s,"Z");return E},NPe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uV=function(t){var r=PL(PL({},NPe),t),s=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,f=r.startAngle,u=r.endAngle,h=r.className;if(o<i||f===u)return null;var m=cr("recharts-sector",h),v=o-i,g=$u(l,v,0,!0),p;return g>0&&Math.abs(f-u)<360?p=wPe({cx:s,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:u}):p=dV({cx:s,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:u}),ce.createElement("path",pA({},er(r,!0),{className:m,d:p,role:"img"}))};function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function vA(){return vA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},vA.apply(this,arguments)}function TL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function _L(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(r),!0).forEach(function(s){SPe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function SPe(e,t,r){return t=CPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CPe(e){var t=APe(e,"string");return Dg(t)=="symbol"?t:t+""}function APe(e,t){if(Dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Dg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IL={curveBasisClosed:Pxe,curveBasisOpen:Txe,curveBasis:Exe,curveBumpX:hxe,curveBumpY:mxe,curveLinearClosed:_xe,curveLinear:dw,curveMonotoneX:Ixe,curveMonotoneY:kxe,curveNatural:Dxe,curveStep:Oxe,curveStepAfter:Rxe,curveStepBefore:Lxe},my=function(t){return t.x===+t.x&&t.y===+t.y},Yp=function(t){return t.x},Xp=function(t){return t.y},EPe=function(t,r){if(Zt(t))return t;var s="curve".concat(lw(t));return(s==="curveMonotone"||s==="curveBump")&&r?IL["".concat(s).concat(r==="vertical"?"Y":"X")]:IL[s]||dw},PPe=function(t){var r=t.type,s=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,f=EPe(s,l),u=d?i.filter(function(g){return my(g)}):i,h;if(Array.isArray(o)){var m=d?o.filter(function(g){return my(g)}):o,v=u.map(function(g,p){return _L(_L({},g),{},{base:m[p]})});return l==="vertical"?h=sy().y(Xp).x1(Yp).x0(function(g){return g.base.x}):h=sy().x(Yp).y1(Xp).y0(function(g){return g.base.y}),h.defined(my).curve(f),h(v)}return l==="vertical"&&it(o)?h=sy().y(Xp).x1(Yp).x0(o):it(o)?h=sy().x(Yp).y1(Xp).y0(o):h=uz().x(Yp).y(Xp),h.defined(my).curve(f),h(u)},Eh=function(t){var r=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var o=s&&s.length?PPe(t):a;return w.createElement("path",vA({},er(t,!1),zb(t),{className:cr("recharts-curve",r),d:o,ref:i}))},TPe=Object.getOwnPropertyNames,_Pe=Object.getOwnPropertySymbols,IPe=Object.prototype.hasOwnProperty;function kL(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function py(e){return function(r,s,a){if(!r||!s||typeof r!="object"||typeof s!="object")return e(r,s,a);var i=a.cache,o=i.get(r),l=i.get(s);if(o&&l)return o===s&&l===r;i.set(r,s),i.set(s,r);var c=e(r,s,a);return i.delete(r),i.delete(s),c}}function DL(e){return TPe(e).concat(_Pe(e))}var kPe=Object.hasOwn||function(e,t){return IPe.call(e,t)};function tf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var DPe="__v",OPe="__o",LPe="_owner",OL=Object.getOwnPropertyDescriptor,LL=Object.keys;function RPe(e,t,r){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function $Pe(e,t){return tf(e.getTime(),t.getTime())}function FPe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function MPe(e,t){return e===t}function RL(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=t.entries(),f=!1,u=0;(l=d.next())&&!l.done;){if(a[u]){u++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,u,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){f=a[u]=!0;break}u++}if(!f)return!1;c++}return!0}var BPe=tf;function zPe(e,t,r){var s=LL(e),a=s.length;if(LL(t).length!==a)return!1;for(;a-- >0;)if(!fV(e,t,r,s[a]))return!1;return!0}function Qp(e,t,r){var s=DL(e),a=s.length;if(DL(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=s[a],!fV(e,t,r,i)||(o=OL(e,i),l=OL(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function UPe(e,t){return tf(e.valueOf(),t.valueOf())}function VPe(e,t){return e.source===t.source&&e.flags===t.flags}function $L(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1}return!0}function qPe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function WPe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function fV(e,t,r,s){return(s===LPe||s===OPe||s===DPe)&&(e.$$typeof||t.$$typeof)?!0:kPe(t,s)&&r.equals(e[s],t[s],s,s,e,t,r)}var HPe="[object Arguments]",GPe="[object Boolean]",KPe="[object Date]",YPe="[object Error]",XPe="[object Map]",QPe="[object Number]",JPe="[object Object]",ZPe="[object RegExp]",e3e="[object Set]",t3e="[object String]",r3e="[object URL]",n3e=Array.isArray,FL=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,ML=Object.assign,s3e=Object.prototype.toString.call.bind(Object.prototype.toString);function a3e(e){var t=e.areArraysEqual,r=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,f=e.areSetsEqual,u=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(v,g,p){if(v===g)return!0;if(v==null||g==null)return!1;var x=typeof v;if(x!==typeof g)return!1;if(x!=="object")return x==="number"?o(v,g,p):x==="function"?a(v,g,p):!1;var b=v.constructor;if(b!==g.constructor)return!1;if(b===Object)return l(v,g,p);if(n3e(v))return t(v,g,p);if(FL!=null&&FL(v))return u(v,g,p);if(b===Date)return r(v,g,p);if(b===RegExp)return d(v,g,p);if(b===Map)return i(v,g,p);if(b===Set)return f(v,g,p);var y=s3e(v);return y===KPe?r(v,g,p):y===ZPe?d(v,g,p):y===XPe?i(v,g,p):y===e3e?f(v,g,p):y===JPe?typeof v.then!="function"&&typeof g.then!="function"&&l(v,g,p):y===r3e?h(v,g,p):y===YPe?s(v,g,p):y===HPe?l(v,g,p):y===GPe||y===QPe||y===t3e?c(v,g,p):!1}}function i3e(e){var t=e.circular,r=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?Qp:RPe,areDatesEqual:$Pe,areErrorsEqual:FPe,areFunctionsEqual:MPe,areMapsEqual:s?kL(RL,Qp):RL,areNumbersEqual:BPe,areObjectsEqual:s?Qp:zPe,arePrimitiveWrappersEqual:UPe,areRegExpsEqual:VPe,areSetsEqual:s?kL($L,Qp):$L,areTypedArraysEqual:s?Qp:qPe,areUrlsEqual:WPe};if(r&&(a=ML({},a,r(a))),t){var i=py(a.areArraysEqual),o=py(a.areMapsEqual),l=py(a.areObjectsEqual),c=py(a.areSetsEqual);a=ML({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function o3e(e){return function(t,r,s,a,i,o,l){return e(t,r,l)}}function l3e(e){var t=e.circular,r=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,d){var f=s(),u=f.cache,h=u===void 0?t?new WeakMap:void 0:u,m=f.meta;return r(c,d,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,o)}}var c3e=Pd();Pd({strict:!0});Pd({circular:!0});Pd({circular:!0,strict:!0});Pd({createInternalComparator:function(){return tf}});Pd({strict:!0,createInternalComparator:function(){return tf}});Pd({circular:!0,createInternalComparator:function(){return tf}});Pd({circular:!0,createInternalComparator:function(){return tf},strict:!0});function Pd(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=i3e(e),c=a3e(l),d=s?s(c):o3e(c);return l3e({circular:r,comparator:c,createState:a,equals:d,strict:o})}function d3e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function BL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):d3e(a)};requestAnimationFrame(s)}function gA(e){"@babel/helpers - typeof";return gA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gA(e)}function u3e(e){return p3e(e)||m3e(e)||h3e(e)||f3e()}function f3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h3e(e,t){if(e){if(typeof e=="string")return zL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zL(e,t)}}function zL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function m3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function p3e(e){if(Array.isArray(e))return e}function v3e(){var e={},t=function(){return null},r=!1,s=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=u3e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){BL(a.bind(null,d),c);return}a(c),BL(a.bind(null,d));return}gA(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}function UL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function VL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(r),!0).forEach(function(s){hV(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function hV(e,t,r){return t=g3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g3e(e){var t=x3e(e,"string");return Og(t)==="symbol"?t:String(t)}function x3e(e,t){if(Og(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Og(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y3e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},b3e=function(t){return t},j3e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Pv=function(t,r){return Object.keys(r).reduce(function(s,a){return VL(VL({},s),{},hV({},a,t(a,r[a])))},{})},qL=function(t,r,s){return t.map(function(a){return"".concat(j3e(a)," ").concat(r,"ms ").concat(s)}).join(",")};function w3e(e,t){return C3e(e)||S3e(e,t)||mV(e,t)||N3e()}function N3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function C3e(e){if(Array.isArray(e))return e}function A3e(e){return T3e(e)||P3e(e)||mV(e)||E3e()}function E3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mV(e,t){if(e){if(typeof e=="string")return xA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xA(e,t)}}function P3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function T3e(e){if(Array.isArray(e))return xA(e)}function xA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var b1=1e-4,pV=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},vV=function(t,r){return t.map(function(s,a){return s*Math.pow(r,a)}).reduce(function(s,a){return s+a})},WL=function(t,r){return function(s){var a=pV(t,r);return vV(a,s)}},_3e=function(t,r){return function(s){var a=pV(t,r),i=[].concat(A3e(a.map(function(o,l){return o*l}).slice(1)),[0]);return vV(i,s)}},HL=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),f=w3e(d,4);a=f[0],i=f[1],o=f[2],l=f[3]}}}var u=WL(a,o),h=WL(i,l),m=_3e(a,o),v=function(x){return x>1?1:x<0?0:x},g=function(x){for(var b=x>1?1:x,y=b,j=0;j<8;++j){var E=u(y)-b,C=m(y);if(Math.abs(E-b)<b1||C<b1)return h(y);y=v(y-E/C)}return h(y)};return g.isStepper=!1,g},I3e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,s=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(f,u,h){var m=-(f-u)*s,v=h*i,g=h+(m-v)*l/1e3,p=h*l/1e3+f;return Math.abs(p-u)<b1&&Math.abs(g)<b1?[u,0]:[p,g]};return c.isStepper=!0,c.dt=l,c},k3e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return HL(a);case"spring":return I3e();default:if(a.split("(")[0]==="cubic-bezier")return HL(a)}return typeof a=="function"?a:null};function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function GL(e){return L3e(e)||O3e(e)||gV(e)||D3e()}function D3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function L3e(e){if(Array.isArray(e))return bA(e)}function KL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KL(Object(r),!0).forEach(function(s){yA(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yA(e,t,r){return t=R3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R3e(e){var t=$3e(e,"string");return Lg(t)==="symbol"?t:String(t)}function $3e(e,t){if(Lg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Lg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F3e(e,t){return z3e(e)||B3e(e,t)||gV(e,t)||M3e()}function M3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gV(e,t){if(e){if(typeof e=="string")return bA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bA(e,t)}}function bA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function B3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function z3e(e){if(Array.isArray(e))return e}var j1=function(t,r,s){return t+(r-t)*s},jA=function(t){var r=t.from,s=t.to;return r!==s},U3e=function e(t,r,s){var a=Pv(function(i,o){if(jA(o)){var l=t(o.from,o.to,o.velocity),c=F3e(l,2),d=c[0],f=c[1];return js(js({},o),{},{from:d,velocity:f})}return o},r);return s<1?Pv(function(i,o){return jA(o)?js(js({},o),{},{velocity:j1(o.velocity,a[i].velocity,s),from:j1(o.from,a[i].from,s)}):o},r):e(t,a,s-1)};const V3e=function(e,t,r,s,a){var i=y3e(e,t),o=i.reduce(function(p,x){return js(js({},p),{},yA({},x,[e[x],t[x]]))},{}),l=i.reduce(function(p,x){return js(js({},p),{},yA({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,d,f,u=function(){return null},h=function(){return Pv(function(x,b){return b.from},l)},m=function(){return!Object.values(l).filter(jA).length},v=function(x){d||(d=x);var b=x-d,y=b/r.dt;l=U3e(r,l,y),a(js(js(js({},e),t),h())),d=x,m()||(c=requestAnimationFrame(u))},g=function(x){f||(f=x);var b=(x-f)/s,y=Pv(function(E,C){return j1.apply(void 0,GL(C).concat([r(b)]))},o);if(a(js(js(js({},e),t),y)),b<1)c=requestAnimationFrame(u);else{var j=Pv(function(E,C){return j1.apply(void 0,GL(C).concat([r(1)]))},o);a(js(js(js({},e),t),j))}};return u=r.isStepper?v:g,function(){return requestAnimationFrame(u),function(){cancelAnimationFrame(c)}}};function tm(e){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(e)}var q3e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function W3e(e,t){if(e==null)return{};var r=H3e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function H3e(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function g5(e){return X3e(e)||Y3e(e)||K3e(e)||G3e()}function G3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K3e(e,t){if(e){if(typeof e=="string")return wA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wA(e,t)}}function Y3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function X3e(e){if(Array.isArray(e))return wA(e)}function wA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function YL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YL(Object(r),!0).forEach(function(s){av(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function av(e,t,r){return t=xV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XL(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xV(s.key),s)}}function J3e(e,t,r){return t&&XL(e.prototype,t),r&&XL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xV(e){var t=Z3e(e,"string");return tm(t)==="symbol"?t:String(t)}function Z3e(e,t){if(tm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(tm(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NA(e,t)}function NA(e,t){return NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},NA(e,t)}function tTe(e){var t=rTe();return function(){var s=w1(e),a;if(t){var i=w1(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return SA(this,a)}}function SA(e,t){if(t&&(tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CA(e)}function CA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w1(e){return w1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w1(e)}var Sw=function(e){eTe(r,e);var t=tTe(r);function r(s,a){var i;Q3e(this,r),i=t.call(this,s,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,u=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(CA(i)),i.changeStyle=i.changeStyle.bind(CA(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:f}),SA(i);if(u&&u.length)i.state={style:u[0].style};else if(d){if(typeof h=="function")return i.state={style:d},SA(i);i.state={style:c?av({},c,d):d}}else i.state={style:{}};return i}return J3e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,f=i.to,u=i.from,h=this.state.style;if(l){if(!o){var m={style:c?av({},c,f):f};this.state&&h&&(c&&h[c]!==f||!c&&h!==f)&&this.setState(m);return}if(!(c3e(a.to,f)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||d?u:a.to;if(this.state&&h){var p={style:c?av({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(p)}this.runAnimation(qi(qi({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,f=a.begin,u=a.onAnimationEnd,h=a.onAnimationStart,m=V3e(o,l,k3e(d),c,this.changeStyle),v=function(){i.stopJSAnimation=m()};this.manager.start([h,f,v,c,u])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],f=d.style,u=d.duration,h=u===void 0?0:u,m=function(g,p,x){if(x===0)return g;var b=p.duration,y=p.easing,j=y===void 0?"ease":y,E=p.style,C=p.properties,S=p.onAnimationEnd,N=x>0?o[x-1]:p,_=C||Object.keys(E);if(typeof j=="function"||j==="spring")return[].concat(g5(g),[i.runJSAnimation.bind(i,{from:N.style,to:E,duration:b,easing:j}),b]);var I=qL(_,b,j),T=qi(qi(qi({},N.style),E),{},{transition:I});return[].concat(g5(g),[T,b,S]).filter(b3e)};return this.manager.start([c].concat(g5(o.reduce(m,[f,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=v3e());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,f=a.onAnimationStart,u=a.onAnimationEnd,h=a.steps,m=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=l?av({},l,c):c,p=qL(Object.keys(g),o,d);v.start([f,i,qi(qi({},g),{},{transition:p}),o,u])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=W3e(a,q3e),d=w.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||d===0||o<=0)return i;var u=function(m){var v=m.props,g=v.style,p=g===void 0?{}:g,x=v.className,b=w.cloneElement(m,qi(qi({},c),{},{style:qi(qi({},p),f),className:x}));return b};return d===1?u(w.Children.only(i)):ce.createElement("div",null,w.Children.map(i,function(h){return u(h)}))}}]),r}(w.PureComponent);Sw.displayName="Animate";Sw.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Sw.propTypes={from:Ct.oneOfType([Ct.object,Ct.string]),to:Ct.oneOfType([Ct.object,Ct.string]),attributeName:Ct.string,duration:Ct.number,begin:Ct.number,easing:Ct.oneOfType([Ct.string,Ct.func]),steps:Ct.arrayOf(Ct.shape({duration:Ct.number.isRequired,style:Ct.object.isRequired,easing:Ct.oneOfType([Ct.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ct.func]),properties:Ct.arrayOf("string"),onAnimationEnd:Ct.func})),children:Ct.oneOfType([Ct.node,Ct.func]),isActive:Ct.bool,canBegin:Ct.bool,onAnimationEnd:Ct.func,shouldReAnimate:Ct.bool,onAnimationStart:Ct.func,onAnimationReStart:Ct.func};const Mu=Sw;function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function N1(){return N1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},N1.apply(this,arguments)}function nTe(e,t){return oTe(e)||iTe(e,t)||aTe(e,t)||sTe()}function sTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aTe(e,t){if(e){if(typeof e=="string")return QL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QL(e,t)}}function QL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function iTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function oTe(e){if(Array.isArray(e))return e}function JL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ZL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JL(Object(r),!0).forEach(function(s){lTe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function lTe(e,t,r){return t=cTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cTe(e){var t=dTe(e,"string");return Rg(t)=="symbol"?t:t+""}function dTe(e,t){if(Rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Rg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e6=function(t,r,s,a,i){var o=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,f;if(o>0&&i instanceof Array){for(var u=[0,0,0,0],h=0,m=4;h<m;h++)u[h]=i[h]>o?o:i[h];f="M".concat(t,",").concat(r+l*u[0]),u[0]>0&&(f+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(d,",").concat(t+c*u[0],",").concat(r)),f+="L ".concat(t+s-c*u[1],",").concat(r),u[1]>0&&(f+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(r+l*u[1])),f+="L ".concat(t+s,",").concat(r+a-l*u[2]),u[2]>0&&(f+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(d,`,
        `).concat(t+s-c*u[2],",").concat(r+a)),f+="L ".concat(t+c*u[3],",").concat(r+a),u[3]>0&&(f+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+a-l*u[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);f="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+s-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s,",").concat(r+l*v,`
            L `).concat(t+s,",").concat(r+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s-c*v,",").concat(r+a,`
            L `).concat(t+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(r+a-l*v," Z")}else f="M ".concat(t,",").concat(r," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return f},uTe=function(t,r){if(!t||!r)return!1;var s=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),f=Math.max(i,i+l),u=Math.min(o,o+c),h=Math.max(o,o+c);return s>=d&&s<=f&&a>=u&&a<=h}return!1},fTe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},d3=function(t){var r=ZL(ZL({},fTe),t),s=w.useRef(),a=w.useState(-1),i=nTe(a,2),o=i[0],l=i[1];w.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var j=s.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,d=r.y,f=r.width,u=r.height,h=r.radius,m=r.className,v=r.animationEasing,g=r.animationDuration,p=r.animationBegin,x=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||u!==+u||f===0||u===0)return null;var y=cr("recharts-rectangle",m);return b?ce.createElement(Mu,{canBegin:o>0,from:{width:f,height:u,x:c,y:d},to:{width:f,height:u,x:c,y:d},duration:g,animationEasing:v,isActive:b},function(j){var E=j.width,C=j.height,S=j.x,N=j.y;return ce.createElement(Mu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,isActive:x,easing:v},ce.createElement("path",N1({},er(r,!0),{className:y,d:e6(S,N,E,C,h),ref:s})))}):ce.createElement("path",N1({},er(r,!0),{className:y,d:e6(c,d,f,u,h)}))};function AA(){return AA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},AA.apply(this,arguments)}var Cw=function(t){var r=t.cx,s=t.cy,a=t.r,i=t.className,o=cr("recharts-dot",i);return r===+r&&s===+s&&a===+a?w.createElement("circle",AA({},er(t,!1),zb(t),{className:o,cx:r,cy:s,r:a})):null};function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}var hTe=["x","y","top","left","width","height","className"];function EA(){return EA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},EA.apply(this,arguments)}function t6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function mTe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(r),!0).forEach(function(s){pTe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function pTe(e,t,r){return t=vTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vTe(e){var t=gTe(e,"string");return $g(t)=="symbol"?t:t+""}function gTe(e,t){if($g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if($g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xTe(e,t){if(e==null)return{};var r=yTe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function yTe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var bTe=function(t,r,s,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(s)},jTe=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,f=t.width,u=f===void 0?0:f,h=t.height,m=h===void 0?0:h,v=t.className,g=xTe(t,hTe),p=mTe({x:s,y:i,top:l,left:d,width:u,height:m},g);return!it(s)||!it(i)||!it(u)||!it(m)||!it(l)||!it(d)?null:ce.createElement("path",EA({},er(p,!0),{className:cr("recharts-cross",v),d:bTe(s,i,u,m,l,d)}))},wTe=Lz,NTe=wTe(Object.getPrototypeOf,Object),STe=NTe,CTe=ec,ATe=STe,ETe=tc,PTe="[object Object]",TTe=Function.prototype,_Te=Object.prototype,yV=TTe.toString,ITe=_Te.hasOwnProperty,kTe=yV.call(Object);function DTe(e){if(!ETe(e)||CTe(e)!=PTe)return!1;var t=ATe(e);if(t===null)return!0;var r=ITe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&yV.call(r)==kTe}var OTe=DTe;const LTe=Cr(OTe);var RTe=ec,$Te=tc,FTe="[object Boolean]";function MTe(e){return e===!0||e===!1||$Te(e)&&RTe(e)==FTe}var BTe=MTe;const zTe=Cr(BTe);function Fg(e){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fg(e)}function S1(){return S1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},S1.apply(this,arguments)}function UTe(e,t){return HTe(e)||WTe(e,t)||qTe(e,t)||VTe()}function VTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qTe(e,t){if(e){if(typeof e=="string")return r6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r6(e,t)}}function r6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function WTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function HTe(e){if(Array.isArray(e))return e}function n6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function s6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n6(Object(r),!0).forEach(function(s){GTe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function GTe(e,t,r){return t=KTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KTe(e){var t=YTe(e,"string");return Fg(t)=="symbol"?t:t+""}function YTe(e,t){if(Fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Fg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a6=function(t,r,s,a,i){var o=s-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+s,",").concat(r),l+="L ".concat(t+s-o/2,",").concat(r+i),l+="L ".concat(t+s-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},XTe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QTe=function(t){var r=s6(s6({},XTe),t),s=w.useRef(),a=w.useState(-1),i=UTe(a,2),o=i[0],l=i[1];w.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var y=s.current.getTotalLength();y&&l(y)}catch{}},[]);var c=r.x,d=r.y,f=r.upperWidth,u=r.lowerWidth,h=r.height,m=r.className,v=r.animationEasing,g=r.animationDuration,p=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||u!==+u||h!==+h||f===0&&u===0||h===0)return null;var b=cr("recharts-trapezoid",m);return x?ce.createElement(Mu,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:f,lowerWidth:u,height:h,x:c,y:d},duration:g,animationEasing:v,isActive:x},function(y){var j=y.upperWidth,E=y.lowerWidth,C=y.height,S=y.x,N=y.y;return ce.createElement(Mu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,easing:v},ce.createElement("path",S1({},er(r,!0),{className:b,d:a6(S,N,j,E,C),ref:s})))}):ce.createElement("g",null,ce.createElement("path",S1({},er(r,!0),{className:b,d:a6(c,d,f,u,h)})))},JTe=["option","shapeType","propTransformer","activeClassName","isActive"];function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function ZTe(e,t){if(e==null)return{};var r=e_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function e_e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function C1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(s){t_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function t_e(e,t,r){return t=r_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r_e(e){var t=n_e(e,"string");return Mg(t)=="symbol"?t:t+""}function n_e(e,t){if(Mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Mg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s_e(e,t){return C1(C1({},t),e)}function a_e(e,t){return e==="symbols"}function o6(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ce.createElement(d3,r);case"trapezoid":return ce.createElement(QTe,r);case"sector":return ce.createElement(uV,r);case"symbols":if(a_e(t))return ce.createElement(TP,r);break;default:return null}}function i_e(e){return w.isValidElement(e)?e.props:e}function o_e(e){var t=e.option,r=e.shapeType,s=e.propTransformer,a=s===void 0?s_e:s,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=ZTe(e,JTe),d;if(w.isValidElement(t))d=w.cloneElement(t,C1(C1({},c),i_e(t)));else if(Zt(t))d=t(c);else if(LTe(t)&&!zTe(t)){var f=a(t,c);d=ce.createElement(o6,{shapeType:r,elementProps:f})}else{var u=c;d=ce.createElement(o6,{shapeType:r,elementProps:u})}return l?ce.createElement(Yr,{className:o},d):d}function Aw(e,t){return t!=null&&"trapezoids"in e.props}function Ew(e,t){return t!=null&&"sectors"in e.props}function Bg(e,t){return t!=null&&"points"in e.props}function l_e(e,t){var r,s,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function c_e(e,t){var r=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return r&&s}function d_e(e,t){var r=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return r&&s&&a}function u_e(e,t){var r;return Aw(e,t)?r=l_e:Ew(e,t)?r=c_e:Bg(e,t)&&(r=d_e),r}function f_e(e,t){var r;return Aw(e,t)?r="trapezoids":Ew(e,t)?r="sectors":Bg(e,t)&&(r="points"),r}function h_e(e,t){if(Aw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Ew(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Bg(e,t)?t.payload:{}}function m_e(e){var t=e.activeTooltipItem,r=e.graphicalItem,s=e.itemData,a=f_e(r,t),i=h_e(r,t),o=s.filter(function(c,d){var f=Zh(i,c),u=r.props[a].filter(function(v){var g=u_e(r,t);return g(v,t)}),h=r.props[a].indexOf(u[u.length-1]),m=d===h;return f&&m}),l=s.indexOf(o[o.length-1]);return l}var p_e=Math.ceil,v_e=Math.max;function g_e(e,t,r,s){for(var a=-1,i=v_e(p_e((t-e)/(r||1)),0),o=Array(i);i--;)o[s?i:++a]=e,e+=r;return o}var x_e=g_e,y_e=eU,l6=1/0,b_e=17976931348623157e292;function j_e(e){if(!e)return e===0?e:0;if(e=y_e(e),e===l6||e===-l6){var t=e<0?-1:1;return t*b_e}return e===e?e:0}var bV=j_e,w_e=x_e,N_e=mw,x5=bV;function S_e(e){return function(t,r,s){return s&&typeof s!="number"&&N_e(t,r,s)&&(r=s=void 0),t=x5(t),r===void 0?(r=t,t=0):r=x5(r),s=s===void 0?t<r?1:-1:x5(s),w_e(t,r,s,e)}}var C_e=S_e,A_e=C_e,E_e=A_e(),P_e=E_e;const A1=Cr(P_e);function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}function c6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function d6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(r),!0).forEach(function(s){jV(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function jV(e,t,r){return t=T_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T_e(e){var t=__e(e,"string");return zg(t)=="symbol"?t:t+""}function __e(e,t){if(zg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(zg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I_e=["Webkit","Moz","O","ms"],k_e=function(t,r){if(!t)return null;var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=I_e.reduce(function(i,o){return d6(d6({},i),{},jV({},o+s,r))},{});return a[t]=r,a};function rm(e){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(e)}function E1(){return E1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},E1.apply(this,arguments)}function u6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function y5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u6(Object(r),!0).forEach(function(s){Oa(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function D_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,NV(s.key),s)}}function O_e(e,t,r){return t&&f6(e.prototype,t),r&&f6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function L_e(e,t,r){return t=P1(t),R_e(e,wV()?Reflect.construct(t,r||[],P1(e).constructor):t.apply(e,r))}function R_e(e,t){if(t&&(rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $_e(e)}function $_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wV=function(){return!!e})()}function P1(e){return P1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P1(e)}function F_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PA(e,t)}function PA(e,t){return PA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},PA(e,t)}function Oa(e,t,r){return t=NV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NV(e){var t=M_e(e,"string");return rm(t)=="symbol"?t:t+""}function M_e(e,t){if(rm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(rm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B_e=function(t){var r=t.data,s=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=Av().domain(A1(0,c)).range([i,i+o-l]),f=d.domain().map(function(u){return d(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:f}},h6=function(t){return t.changedTouches&&!!t.changedTouches.length},nm=function(e){function t(r){var s;return D_e(this,t),s=L_e(this,t,[r]),Oa(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),Oa(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),Oa(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),s.detachDragEndListener()}),Oa(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Oa(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Oa(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Oa(s,"handleSlideDragStart",function(a){var i=h6(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return F_e(t,e),O_e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,u=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,u),v=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:v===f?f:v-v%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=ra(i[s],l,s);return Zt(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,f=c.width,u=c.travellerWidth,h=c.startIndex,m=c.endIndex,v=c.onChange,g=s.pageX-i;g>0?g=Math.min(g,d+f-u-l,d+f-u-o):g<0&&(g=Math.max(g,d-o,d-l));var p=this.getIndex({startX:o+g,endX:l+g});(p.startIndex!==h||p.endIndex!==m)&&v&&v(p),this.setState({startX:o+g,endX:l+g,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=h6(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],f=this.props,u=f.x,h=f.width,m=f.travellerWidth,v=f.onChange,g=f.gap,p=f.data,x={startX:this.state.startX,endX:this.state.endX},b=s.pageX-i;b>0?b=Math.min(b,u+h-m-d):b<0&&(b=Math.max(b,u-d)),x[o]=d+b;var y=this.getIndex(x),j=y.startIndex,E=y.endIndex,C=function(){var N=p.length-1;return o==="startX"&&(l>c?j%g===0:E%g===0)||l<c&&E===N||o==="endX"&&(l>c?E%g===0:j%g===0)||l>c&&E===N};this.setState(Oa(Oa({},o,d+b),"brushMoveStartX",s.pageX),function(){v&&C()&&v(y)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[a],u=l.indexOf(f);if(u!==-1){var h=u+s;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=d||a==="endX"&&m<=c||this.setState(Oa({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return ce.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.data,d=s.children,f=s.padding,u=w.Children.only(d);return u?ce.cloneElement(u,{x:a,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,u=c.height,h=c.traveller,m=c.ariaLabel,v=c.data,g=c.startIndex,p=c.endIndex,x=Math.max(s,this.props.x),b=y5(y5({},er(this.props,!1)),{},{x,y:d,width:f,height:u}),y=m||"Min value: ".concat((i=v[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[p])===null||o===void 0?void 0:o.name);return ce.createElement(Yr,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),l.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(s,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,f=Math.min(s,a)+d,u=Math.max(Math.abs(a-s)-d,0);return ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:u,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,f=this.state,u=f.startX,h=f.endX,m=5,v={pointerEvents:"none",fill:d};return ce.createElement(Yr,{className:"recharts-brush-texts"},ce.createElement(r1,E1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,h)-m,y:o+l/2},v),this.getTextOfTick(a)),ce.createElement(r1,E1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,h)+c+m,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,o=s.children,l=s.x,c=s.y,d=s.width,f=s.height,u=s.alwaysShowText,h=this.state,m=h.startX,v=h.endX,g=h.isTextActive,p=h.isSlideMoving,x=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!it(l)||!it(c)||!it(d)||!it(f)||d<=0||f<=0)return null;var y=cr("recharts-brush",i),j=ce.Children.count(o)===1,E=k_e("userSelect","none");return ce.createElement(Yr,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(g||p||x||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(i+l/2)-1;return ce.createElement(ce.Fragment,null,ce.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),ce.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),ce.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return ce.isValidElement(s)?i=ce.cloneElement(s,a):Zt(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,f=s.startIndex,u=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return y5({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?B_e({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:u}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>a?l=c:o=c}return a>=s[l]?l:o}}])}(w.PureComponent);Oa(nm,"displayName","Brush");Oa(nm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var z_e=RP;function U_e(e,t){var r;return z_e(e,function(s,a,i){return r=t(s,a,i),!r}),!!r}var V_e=U_e,q_e=Ez,W_e=Cd,H_e=V_e,G_e=Ea,K_e=mw;function Y_e(e,t,r){var s=G_e(e)?q_e:H_e;return r&&K_e(e,t,r)&&(t=void 0),s(e,W_e(t))}var X_e=Y_e;const Q_e=Cr(X_e);var Xo=function(t,r){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===r},m6=Yz;function J_e(e,t,r){t=="__proto__"&&m6?m6(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Z_e=J_e,eIe=Z_e,tIe=Gz,rIe=Cd;function nIe(e,t){var r={};return t=rIe(t),tIe(e,function(s,a,i){eIe(r,a,t(s,a,i))}),r}var sIe=nIe;const aIe=Cr(sIe);function iIe(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!t(e[r],r,e))return!1;return!0}var oIe=iIe,lIe=RP;function cIe(e,t){var r=!0;return lIe(e,function(s,a,i){return r=!!t(s,a,i),r}),r}var dIe=cIe,uIe=oIe,fIe=dIe,hIe=Cd,mIe=Ea,pIe=mw;function vIe(e,t,r){var s=mIe(e)?uIe:fIe;return r&&pIe(e,t,r)&&(t=void 0),s(e,hIe(t))}var gIe=vIe;const SV=Cr(gIe);var xIe=["x","y"];function Ug(e){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ug(e)}function TA(){return TA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},TA.apply(this,arguments)}function p6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Jp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p6(Object(r),!0).forEach(function(s){yIe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yIe(e,t,r){return t=bIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bIe(e){var t=jIe(e,"string");return Ug(t)=="symbol"?t:t+""}function jIe(e,t){if(Ug(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Ug(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wIe(e,t){if(e==null)return{};var r=NIe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function NIe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function SIe(e,t){var r=e.x,s=e.y,a=wIe(e,xIe),i="".concat(r),o=parseInt(i,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||a.height),f=parseInt(d,10),u="".concat(t.width||a.width),h=parseInt(u,10);return Jp(Jp(Jp(Jp(Jp({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function v6(e){return ce.createElement(o_e,TA({shapeType:"rectangle",propTransformer:SIe,activeClassName:"recharts-active-bar"},e))}var CIe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=it(s)||Zve(s);return i?t(s,a):(i||fd(!1),r)}},AIe=["value","background"],CV;function sm(e){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sm(e)}function EIe(e,t){if(e==null)return{};var r=PIe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function PIe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function T1(){return T1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},T1.apply(this,arguments)}function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(r),!0).forEach(function(s){qc(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function TIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,EV(s.key),s)}}function _Ie(e,t,r){return t&&x6(e.prototype,t),r&&x6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function IIe(e,t,r){return t=_1(t),kIe(e,AV()?Reflect.construct(t,r||[],_1(e).constructor):t.apply(e,r))}function kIe(e,t){if(t&&(sm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DIe(e)}function DIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AV=function(){return!!e})()}function _1(e){return _1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_1(e)}function OIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_A(e,t)}function _A(e,t){return _A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_A(e,t)}function qc(e,t,r){return t=EV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EV(e){var t=LIe(e,"string");return sm(t)=="symbol"?t:t+""}function LIe(e,t){if(sm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(sm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Td=function(e){function t(){var r;TIe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=IIe(this,t,[].concat(a)),qc(r,"state",{isAnimationFinished:!1}),qc(r,"id",Mm("recharts-bar-")),qc(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),qc(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return OIe(t,e),_Ie(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,f=er(this.props,!1);return s&&s.map(function(u,h){var m=h===c,v=m?d:o,g=Bn(Bn(Bn({},f),u),{},{isActive:m,option:v,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ce.createElement(Yr,T1({className:"recharts-bar-rectangle"},Ub(a.props,u,h),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(h)}),ce.createElement(v6,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,f=a.animationEasing,u=a.animationId,h=this.state.prevData;return ce.createElement(Mu,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,g=i.map(function(p,x){var b=h&&h[x];if(b){var y=Ss(b.x,p.x),j=Ss(b.y,p.y),E=Ss(b.width,p.width),C=Ss(b.height,p.height);return Bn(Bn({},p),{},{x:y(v),y:j(v),width:E(v),height:C(v)})}if(o==="horizontal"){var S=Ss(0,p.height),N=S(v);return Bn(Bn({},p),{},{y:p.y+p.height-N,height:N})}var _=Ss(0,p.width),I=_(v);return Bn(Bn({},p),{},{width:I})});return ce.createElement(Yr,null,s.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Zh(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=er(this.props.background,!1);return i.map(function(d,f){d.value;var u=d.background,h=EIe(d,AIe);if(!u)return null;var m=Bn(Bn(Bn(Bn(Bn({},h),{},{fill:"#eee"},u),c),Ub(s.props,d,f)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return ce.createElement(v6,T1({key:"background-bar-".concat(f),option:s.props.background,isActive:f===l},m))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,f=i.children,u=ji(f,Sx);if(!u)return null;var h=d==="vertical"?o[0].height/2:o[0].width/2,m=function(p,x){var b=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:b,errorVal:ra(p,x)}},v={clipPath:s?"url(#clipPath-".concat(a,")"):null};return ce.createElement(Yr,v,u.map(function(g){return ce.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,f=s.top,u=s.width,h=s.height,m=s.isAnimationActive,v=s.background,g=s.id;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,x=cr("recharts-bar",o),b=l&&l.allowDataOverflow,y=c&&c.allowDataOverflow,j=b||y,E=rr(g)?this.id:g;return ce.createElement(Yr,{className:x},b||y?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(E)},ce.createElement("rect",{x:b?d:d-u/2,y:y?f:f-h/2,width:b?u:u*2,height:y?h:h*2}))):null,ce.createElement(Yr,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(E,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,E),(!m||p)&&Ml.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(w.PureComponent);CV=Td;qc(Td,"displayName","Bar");qc(Td,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ko.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});qc(Td,"getComposedData",function(e){var t=e.props,r=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,u=e.displayedData,h=e.offset,m=gEe(s,r);if(!m)return null;var v=t.layout,g=r.type.defaultProps,p=g!==void 0?Bn(Bn({},g),r.props):r.props,x=p.dataKey,b=p.children,y=p.minPointSize,j=v==="horizontal"?o:i,E=d?j.scale.domain():null,C=CEe({numericAxis:j}),S=ji(b,rU),N=u.map(function(_,I){var T,A,O,D,$,M;d?T=xEe(d[f+I],E):(T=ra(_,x),Array.isArray(T)||(T=[C,T]));var R=CIe(y,CV.defaultProps.minPointSize)(T[1],I);if(v==="horizontal"){var B,U=[o.scale(T[0]),o.scale(T[1])],W=U[0],q=U[1];A=vL({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:_,index:I}),O=(B=q??W)!==null&&B!==void 0?B:void 0,D=m.size;var L=W-q;if($=Number.isNaN(L)?0:L,M={x:A,y:o.y,width:D,height:o.height},Math.abs(R)>0&&Math.abs($)<Math.abs(R)){var V=so($||R)*(Math.abs(R)-Math.abs($));O-=V,$+=V}}else{var G=[i.scale(T[0]),i.scale(T[1])],Z=G[0],te=G[1];if(A=Z,O=vL({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:_,index:I}),D=te-Z,$=m.size,M={x:i.x,y:O,width:i.width,height:$},Math.abs(R)>0&&Math.abs(D)<Math.abs(R)){var he=so(D||R)*(Math.abs(R)-Math.abs(D));D+=he}}return Bn(Bn(Bn({},_),{},{x:A,y:O,width:D,height:$,value:d?T:T[1],payload:_,background:M},S&&S[I]&&S[I].props),{},{tooltipPayload:[lV(r,_)],tooltipPosition:{x:A+D/2,y:O+$/2}})});return Bn({data:N,layout:v},h)});function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}function RIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,PV(s.key),s)}}function $Ie(e,t,r){return t&&y6(e.prototype,t),r&&y6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(s){Pw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Pw(e,t,r){return t=PV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PV(e){var t=FIe(e,"string");return Vg(t)=="symbol"?t:t+""}function FIe(e,t){if(Vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Vg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u3=function(t,r,s,a,i){var o=t.width,l=t.height,c=t.layout,d=t.children,f=Object.keys(r),u={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},h=!!Ra(d,Td);return f.reduce(function(m,v){var g=r[v],p=g.orientation,x=g.domain,b=g.padding,y=b===void 0?{}:b,j=g.mirror,E=g.reversed,C="".concat(p).concat(j?"Mirror":""),S,N,_,I,T;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var A=x[1]-x[0],O=1/0,D=g.categoricalDomain.sort(rge);if(D.forEach(function(G,Z){Z>0&&(O=Math.min((G||0)-(D[Z-1]||0),O))}),Number.isFinite(O)){var $=O/A,M=g.layout==="vertical"?s.height:s.width;if(g.padding==="gap"&&(S=$*M/2),g.padding==="no-gap"){var R=$u(t.barCategoryGap,$*M),B=$*M/2;S=B-R-(B-R)/M*R}}}a==="xAxis"?N=[s.left+(y.left||0)+(S||0),s.left+s.width-(y.right||0)-(S||0)]:a==="yAxis"?N=c==="horizontal"?[s.top+s.height-(y.bottom||0),s.top+(y.top||0)]:[s.top+(y.top||0)+(S||0),s.top+s.height-(y.bottom||0)-(S||0)]:N=g.range,E&&(N=[N[1],N[0]]);var U=pEe(g,i,h),W=U.scale,q=U.realScaleType;W.domain(x).range(N),vEe(W);var L=SEe(W,Xi(Xi({},g),{},{realScaleType:q}));a==="xAxis"?(T=p==="top"&&!j||p==="bottom"&&j,_=s.left,I=u[C]-T*g.height):a==="yAxis"&&(T=p==="left"&&!j||p==="right"&&j,_=u[C]-T*g.width,I=s.top);var V=Xi(Xi(Xi({},g),L),{},{realScaleType:q,x:_,y:I,scale:W,width:a==="xAxis"?s.width:g.width,height:a==="yAxis"?s.height:g.height});return V.bandSize=g1(V,L),!g.hide&&a==="xAxis"?u[C]+=(T?-1:1)*V.height:g.hide||(u[C]+=(T?-1:1)*V.width),Xi(Xi({},m),{},Pw({},v,V))},{})},TV=function(t,r){var s=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(s,i),y:Math.min(a,o),width:Math.abs(i-s),height:Math.abs(o-a)}},MIe=function(t){var r=t.x1,s=t.y1,a=t.x2,i=t.y2;return TV({x:r,y:s},{x:a,y:i})},_V=function(){function e(t){RIe(this,e),this.scale=t}return $Ie(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Pw(_V,"EPS",1e-4);var f3=function(t){var r=Object.keys(t).reduce(function(s,a){return Xi(Xi({},s),{},Pw({},a,_V.create(t[a])))},{});return Xi(Xi({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return aIe(a,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return SV(a,function(i,o){return r[o].isInRange(i)})}})};function BIe(e){return(e%180+180)%180}var zIe=function(t){var r=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=BIe(a),o=i*Math.PI/180,l=Math.atan(s/r),c=o>l&&o<Math.PI-l?s/Math.sin(o):r/Math.cos(o);return Math.abs(c)},UIe=Cd,VIe=yx,qIe=fw;function WIe(e){return function(t,r,s){var a=Object(t);if(!VIe(t)){var i=UIe(r);t=qIe(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,s);return o>-1?a[i?t[o]:o]:void 0}}var HIe=WIe,GIe=bV;function KIe(e){var t=GIe(e),r=t%1;return t===t?r?t-r:t:0}var YIe=KIe,XIe=zz,QIe=Cd,JIe=YIe,ZIe=Math.max;function eke(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var a=r==null?0:JIe(r);return a<0&&(a=ZIe(s+a,0)),XIe(e,QIe(t),a)}var tke=eke,rke=HIe,nke=tke,ske=rke(nke),ake=ske;const ike=Cr(ake);var oke=nve(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),h3=w.createContext(void 0),m3=w.createContext(void 0),IV=w.createContext(void 0),kV=w.createContext({}),DV=w.createContext(void 0),OV=w.createContext(0),LV=w.createContext(0),j6=function(t){var r=t.state,s=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,f=oke(i);return ce.createElement(h3.Provider,{value:s},ce.createElement(m3.Provider,{value:a},ce.createElement(kV.Provider,{value:i},ce.createElement(IV.Provider,{value:f},ce.createElement(DV.Provider,{value:o},ce.createElement(OV.Provider,{value:d},ce.createElement(LV.Provider,{value:c},l)))))))},lke=function(){return w.useContext(DV)},RV=function(t){var r=w.useContext(h3);r==null&&fd(!1);var s=r[t];return s==null&&fd(!1),s},cke=function(){var t=w.useContext(h3);return Lc(t)},dke=function(){var t=w.useContext(m3),r=ike(t,function(s){return SV(s.domain,Number.isFinite)});return r||Lc(t)},$V=function(t){var r=w.useContext(m3);r==null&&fd(!1);var s=r[t];return s==null&&fd(!1),s},uke=function(){var t=w.useContext(IV);return t},fke=function(){return w.useContext(kV)},p3=function(){return w.useContext(LV)},v3=function(){return w.useContext(OV)};function am(e){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(e)}function hke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,MV(s.key),s)}}function mke(e,t,r){return t&&w6(e.prototype,t),r&&w6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pke(e,t,r){return t=I1(t),vke(e,FV()?Reflect.construct(t,r||[],I1(e).constructor):t.apply(e,r))}function vke(e,t){if(t&&(am(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gke(e)}function gke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FV=function(){return!!e})()}function I1(e){return I1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I1(e)}function xke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IA(e,t)}function IA(e,t){return IA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},IA(e,t)}function N6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function S6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N6(Object(r),!0).forEach(function(s){g3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function g3(e,t,r){return t=MV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MV(e){var t=yke(e,"string");return am(t)=="symbol"?t:t+""}function yke(e,t){if(am(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(am(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bke(e,t){return Ske(e)||Nke(e,t)||wke(e,t)||jke()}function jke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wke(e,t){if(e){if(typeof e=="string")return C6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C6(e,t)}}function C6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Nke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Ske(e){if(Array.isArray(e))return e}function kA(){return kA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},kA.apply(this,arguments)}var Cke=function(t,r){var s;return ce.isValidElement(t)?s=ce.cloneElement(t,r):Zt(t)?s=t(r):s=ce.createElement("line",kA({},r,{className:"recharts-reference-line-line"})),s},Ake=function(t,r,s,a,i,o,l,c,d){var f=i.x,u=i.y,h=i.width,m=i.height;if(s){var v=d.y,g=t.y.apply(v,{position:o});if(Xo(d,"discard")&&!t.y.isInRange(g))return null;var p=[{x:f+h,y:g},{x:f,y:g}];return c==="left"?p.reverse():p}if(r){var x=d.x,b=t.x.apply(x,{position:o});if(Xo(d,"discard")&&!t.x.isInRange(b))return null;var y=[{x:b,y:u+m},{x:b,y:u}];return l==="top"?y.reverse():y}if(a){var j=d.segment,E=j.map(function(C){return t.apply(C,{position:o})});return Xo(d,"discard")&&Q_e(E,function(C){return!t.isInRange(C)})?null:E}return null};function Eke(e){var t=e.x,r=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=lke(),f=RV(a),u=$V(i),h=uke();if(!d||!h)return null;$l(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=f3({x:f.scale,y:u.scale}),v=es(t),g=es(r),p=s&&s.length===2,x=Ake(m,v,g,p,h,e.position,f.orientation,u.orientation,e);if(!x)return null;var b=bke(x,2),y=b[0],j=y.x,E=y.y,C=b[1],S=C.x,N=C.y,_=Xo(e,"hidden")?"url(#".concat(d,")"):void 0,I=S6(S6({clipPath:_},er(e,!0)),{},{x1:j,y1:E,x2:S,y2:N});return ce.createElement(Yr,{className:cr("recharts-reference-line",l)},Cke(o,I),zs.renderCallByParent(e,MIe({x1:j,y1:E,x2:S,y2:N})))}var x3=function(e){function t(){return hke(this,t),pke(this,t,arguments)}return xke(t,e),mke(t,[{key:"render",value:function(){return ce.createElement(Eke,this.props)}}])}(ce.Component);g3(x3,"displayName","ReferenceLine");g3(x3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function DA(){return DA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},DA.apply(this,arguments)}function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function E6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(r),!0).forEach(function(s){Tw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Pke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,zV(s.key),s)}}function Tke(e,t,r){return t&&P6(e.prototype,t),r&&P6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ke(e,t,r){return t=k1(t),Ike(e,BV()?Reflect.construct(t,r||[],k1(e).constructor):t.apply(e,r))}function Ike(e,t){if(t&&(im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kke(e)}function kke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BV=function(){return!!e})()}function k1(e){return k1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k1(e)}function Dke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OA(e,t)}function OA(e,t){return OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},OA(e,t)}function Tw(e,t,r){return t=zV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zV(e){var t=Oke(e,"string");return im(t)=="symbol"?t:t+""}function Oke(e,t){if(im(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(im(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lke=function(t){var r=t.x,s=t.y,a=t.xAxis,i=t.yAxis,o=f3({x:a.scale,y:i.scale}),l=o.apply({x:r,y:s},{bandAware:!0});return Xo(t,"discard")&&!o.isInRange(l)?null:l},_w=function(e){function t(){return Pke(this,t),_ke(this,t,arguments)}return Dke(t,e),Tke(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=es(a),f=es(i);if($l(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var u=Lke(this.props);if(!u)return null;var h=u.x,m=u.y,v=this.props,g=v.shape,p=v.className,x=Xo(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=E6(E6({clipPath:x},er(this.props,!0)),{},{cx:h,cy:m});return ce.createElement(Yr,{className:cr("recharts-reference-dot",p)},t.renderDot(g,b),zs.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(ce.Component);Tw(_w,"displayName","ReferenceDot");Tw(_w,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Tw(_w,"renderDot",function(e,t){var r;return ce.isValidElement(e)?r=ce.cloneElement(e,t):Zt(e)?r=e(t):r=ce.createElement(Cw,DA({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function LA(){return LA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},LA.apply(this,arguments)}function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function T6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function _6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T6(Object(r),!0).forEach(function(s){Iw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Rke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,VV(s.key),s)}}function $ke(e,t,r){return t&&I6(e.prototype,t),r&&I6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fke(e,t,r){return t=D1(t),Mke(e,UV()?Reflect.construct(t,r||[],D1(e).constructor):t.apply(e,r))}function Mke(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bke(e)}function Bke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UV=function(){return!!e})()}function D1(e){return D1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},D1(e)}function zke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RA(e,t)}function RA(e,t){return RA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},RA(e,t)}function Iw(e,t,r){return t=VV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VV(e){var t=Uke(e,"string");return om(t)=="symbol"?t:t+""}function Uke(e,t){if(om(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(om(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vke=function(t,r,s,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,f=i.xAxis,u=i.yAxis;if(!f||!u)return null;var h=f3({x:f.scale,y:u.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:s?h.y.apply(c,{position:"start"}):h.y.rangeMin},v={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return Xo(i,"discard")&&(!h.isInRange(m)||!h.isInRange(v))?null:TV(m,v)},kw=function(e){function t(){return Rke(this,t),Fke(this,t,arguments)}return zke(t,e),$ke(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,f=s.clipPathId;$l(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=es(a),h=es(i),m=es(o),v=es(l),g=this.props.shape;if(!u&&!h&&!m&&!v&&!g)return null;var p=Vke(u,h,m,v,this.props);if(!p&&!g)return null;var x=Xo(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ce.createElement(Yr,{className:cr("recharts-reference-area",c)},t.renderRect(g,_6(_6({clipPath:x},er(this.props,!0)),p)),zs.renderCallByParent(this.props,p))}}])}(ce.Component);Iw(kw,"displayName","ReferenceArea");Iw(kw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Iw(kw,"renderRect",function(e,t){var r;return ce.isValidElement(e)?r=ce.cloneElement(e,t):Zt(e)?r=e(t):r=ce.createElement(d3,LA({},t,{className:"recharts-reference-area-rect"})),r});function qV(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)if(r===void 0||r(e[a])===!0)s.push(e[a]);else return;return s}function qke(e,t,r){var s={width:e.width+t.width,height:e.height+t.height};return zIe(s,r)}function Wke(e,t,r){var s=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:s?a:i,end:s?a+o:i+l}:{start:s?a+o:i+l,end:s?a:i}}function O1(e,t,r,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function Hke(e,t){return qV(e,t+1)}function Gke(e,t,r,s,a){for(var i=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,f=o,u=function(){var v=s==null?void 0:s[c];if(v===void 0)return{v:qV(s,d)};var g=c,p,x=function(){return p===void 0&&(p=r(v,g)),p},b=v.coordinate,y=c===0||O1(e,b,x,f,l);y||(c=0,f=o,d+=1),y&&(f=b+e*(x()/2+a),c+=d)},h;d<=i.length;)if(h=u(),h)return h.v;return[]}function qg(e){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(e)}function k6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k6(Object(r),!0).forEach(function(s){Kke(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Kke(e,t,r){return t=Yke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yke(e){var t=Xke(e,"string");return qg(t)=="symbol"?t:t+""}function Xke(e,t){if(qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(qg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qke(e,t,r,s,a){for(var i=(s||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(h){var m=i[h],v,g=function(){return v===void 0&&(v=r(m,h)),v};if(h===o-1){var p=e*(m.coordinate+e*g()/2-c);i[h]=m=Ms(Ms({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate})}else i[h]=m=Ms(Ms({},m),{},{tickCoord:m.coordinate});var x=O1(e,m.tickCoord,g,l,c);x&&(c=m.tickCoord-e*(g()/2+a),i[h]=Ms(Ms({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return i}function Jke(e,t,r,s,a,i){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var f=s[l-1],u=r(f,l-1),h=e*(f.coordinate+e*u/2-d);o[l-1]=f=Ms(Ms({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var m=O1(e,f.tickCoord,function(){return u},c,d);m&&(d=f.tickCoord-e*(u/2+a),o[l-1]=Ms(Ms({},f),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(b){var y=o[b],j,E=function(){return j===void 0&&(j=r(y,b)),j};if(b===0){var C=e*(y.coordinate-e*E()/2-c);o[b]=y=Ms(Ms({},y),{},{tickCoord:C<0?y.coordinate-C*e:y.coordinate})}else o[b]=y=Ms(Ms({},y),{},{tickCoord:y.coordinate});var S=O1(e,y.tickCoord,E,c,d);S&&(c=y.tickCoord+e*(E()/2+a),o[b]=Ms(Ms({},y),{},{isShow:!0}))},p=0;p<v;p++)g(p);return o}function y3(e,t,r){var s=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,f=e.unit,u=e.angle;if(!a||!a.length||!s)return[];if(it(c)||Ko.isSsr)return Hke(a,typeof c=="number"&&it(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",v=f&&m==="width"?Cv(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(y,j){var E=Zt(d)?d(y.value,j):y.value;return m==="width"?qke(Cv(E,{fontSize:t,letterSpacing:r}),v,u):Cv(E,{fontSize:t,letterSpacing:r})[m]},p=a.length>=2?so(a[1].coordinate-a[0].coordinate):1,x=Wke(i,p,m);return c==="equidistantPreserveStart"?Gke(p,x,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Jke(p,x,g,a,o,c==="preserveStartEnd"):h=Qke(p,x,g,a,o),h.filter(function(b){return b.isShow}))}var Zke=["viewBox"],eDe=["viewBox"],tDe=["ticks"];function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function uh(){return uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uh.apply(this,arguments)}function D6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D6(Object(r),!0).forEach(function(s){b3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function b5(e,t){if(e==null)return{};var r=rDe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function rDe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function nDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,HV(s.key),s)}}function sDe(e,t,r){return t&&O6(e.prototype,t),r&&O6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aDe(e,t,r){return t=L1(t),iDe(e,WV()?Reflect.construct(t,r||[],L1(e).constructor):t.apply(e,r))}function iDe(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oDe(e)}function oDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WV=function(){return!!e})()}function L1(e){return L1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},L1(e)}function lDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$A(e,t)}function $A(e,t){return $A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},$A(e,t)}function b3(e,t,r){return t=HV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HV(e){var t=cDe(e,"string");return lm(t)=="symbol"?t:t+""}function cDe(e,t){if(lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(lm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hm=function(e){function t(r){var s;return nDe(this,t),s=aDe(this,t,[r]),s.state={fontSize:"",letterSpacing:""},s}return lDe(t,e),sDe(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,o=b5(s,Zke),l=this.props,c=l.viewBox,d=b5(l,eDe);return!Nh(i,c)||!Nh(o,d)||!Nh(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,f=a.tickSize,u=a.mirror,h=a.tickMargin,m,v,g,p,x,b,y=u?-1:1,j=s.tickSize||f,E=it(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":m=v=s.coordinate,p=o+ +!u*c,g=p-y*j,b=g-y*h,x=E;break;case"left":g=p=s.coordinate,v=i+ +!u*l,m=v-y*j,x=m-y*h,b=E;break;case"right":g=p=s.coordinate,v=i+ +u*l,m=v+y*j,x=m+y*h,b=E;break;default:m=v=s.coordinate,p=o+ +u*c,g=p+y*j,b=g+y*h,x=E;break}return{line:{x1:m,y1:g,x2:v,y2:p},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,f=s.axisLine,u=Kn(Kn(Kn({},er(this.props,!1)),er(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);u=Kn(Kn({},u),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);u=Kn(Kn({},u),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return ce.createElement("line",uh({},u,{className:cr("recharts-cartesian-axis-line",bi(f,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,u=l.tickFormatter,h=l.unit,m=y3(Kn(Kn({},this.props),{},{ticks:s}),a,i),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),p=er(this.props,!1),x=er(f,!1),b=Kn(Kn({},p),{},{fill:"none"},er(c,!1)),y=m.map(function(j,E){var C=o.getTickLineCoord(j),S=C.line,N=C.tick,_=Kn(Kn(Kn(Kn({textAnchor:v,verticalAnchor:g},p),{},{stroke:"none",fill:d},x),N),{},{index:E,payload:j,visibleTicksCount:m.length,tickFormatter:u});return ce.createElement(Yr,uh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},Ub(o.props,j,E)),c&&ce.createElement("line",uh({},b,S,{className:cr("recharts-cartesian-axis-tick-line",bi(c,"className"))})),f&&t.renderTickItem(f,_,"".concat(Zt(u)?u(j.value,E):j.value).concat(h||"")))});return ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,f=a.hide;if(f)return null;var u=this.props,h=u.ticks,m=b5(u,tDe),v=h;return Zt(c)&&(v=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:ce.createElement(Yr,{className:cr("recharts-cartesian-axis",d),ref:function(p){s.layerReference=p}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),zs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var o,l=cr(a.className,"recharts-cartesian-axis-tick-value");return ce.isValidElement(s)?o=ce.cloneElement(s,Kn(Kn({},a),{},{className:l})):Zt(s)?o=s(Kn(Kn({},a),{},{className:l})):o=ce.createElement(r1,uh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(w.Component);b3(Hm,"displayName","CartesianAxis");b3(Hm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var dDe=["x1","y1","x2","y2","key"],uDe=["offset"];function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function L6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L6(Object(r),!0).forEach(function(s){fDe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function fDe(e,t,r){return t=hDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hDe(e){var t=mDe(e,"string");return Bu(t)=="symbol"?t:t+""}function mDe(e,t){if(Bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Bu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pu(){return pu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pu.apply(this,arguments)}function R6(e,t){if(e==null)return{};var r=pDe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function pDe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var vDe=function(t){var r=t.fill;if(!r||r==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return ce.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function GV(e,t){var r;if(ce.isValidElement(e))r=ce.cloneElement(e,t);else if(Zt(e))r=e(t);else{var s=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=R6(t,dDe),d=er(c,!1);d.offset;var f=R6(d,uDe);r=ce.createElement("line",pu({},f,{x1:s,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function gDe(e){var t=e.x,r=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=Us(Us({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return GV(a,d)});return ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function xDe(e){var t=e.y,r=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=Us(Us({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return GV(a,d)});return ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function yDe(e){var t=e.horizontalFill,r=e.fillOpacity,s=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var f=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==f[0]&&f.unshift(0);var u=f.map(function(h,m){var v=!f[m+1],g=v?a+o-h:f[m+1]-h;if(g<=0)return null;var p=m%t.length;return ce.createElement("rect",{key:"react-".concat(m),y:h,x:s,height:g,width:i,stroke:"none",fill:t[p],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function bDe(e){var t=e.vertical,r=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!s||!s.length)return null;var f=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==f[0]&&f.unshift(0);var u=f.map(function(h,m){var v=!f[m+1],g=v?i+l-h:f[m+1]-h;if(g<=0)return null;var p=m%s.length;return ce.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:g,height:c,stroke:"none",fill:s[p],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var jDe=function(t,r){var s=t.xAxis,a=t.width,i=t.height,o=t.offset;return iV(y3(Us(Us(Us({},Hm.defaultProps),s),{},{ticks:kl(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},wDe=function(t,r){var s=t.yAxis,a=t.width,i=t.height,o=t.offset;return iV(y3(Us(Us(Us({},Hm.defaultProps),s),{},{ticks:kl(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Uf={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function FA(e){var t,r,s,a,i,o,l=p3(),c=v3(),d=fke(),f=Us(Us({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Uf.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Uf.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:Uf.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Uf.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Uf.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Uf.verticalFill,x:it(e.x)?e.x:d.left,y:it(e.y)?e.y:d.top,width:it(e.width)?e.width:d.width,height:it(e.height)?e.height:d.height}),u=f.x,h=f.y,m=f.width,v=f.height,g=f.syncWithTicks,p=f.horizontalValues,x=f.verticalValues,b=cke(),y=dke();if(!it(m)||m<=0||!it(v)||v<=0||!it(u)||u!==+u||!it(h)||h!==+h)return null;var j=f.verticalCoordinatesGenerator||jDe,E=f.horizontalCoordinatesGenerator||wDe,C=f.horizontalPoints,S=f.verticalPoints;if((!C||!C.length)&&Zt(E)){var N=p&&p.length,_=E({yAxis:y?Us(Us({},y),{},{ticks:N?p:y.ticks}):void 0,width:l,height:c,offset:d},N?!0:g);$l(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Bu(_),"]")),Array.isArray(_)&&(C=_)}if((!S||!S.length)&&Zt(j)){var I=x&&x.length,T=j({xAxis:b?Us(Us({},b),{},{ticks:I?x:b.ticks}):void 0,width:l,height:c,offset:d},I?!0:g);$l(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Bu(T),"]")),Array.isArray(T)&&(S=T)}return ce.createElement("g",{className:"recharts-cartesian-grid"},ce.createElement(vDe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ce.createElement(gDe,pu({},f,{offset:d,horizontalPoints:C,xAxis:b,yAxis:y})),ce.createElement(xDe,pu({},f,{offset:d,verticalPoints:S,xAxis:b,yAxis:y})),ce.createElement(yDe,pu({},f,{horizontalPoints:C})),ce.createElement(bDe,pu({},f,{verticalPoints:S})))}FA.displayName="CartesianGrid";var NDe=["type","layout","connectNulls","ref"],SDe=["key"];function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function $6(e,t){if(e==null)return{};var r=CDe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function CDe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Tv.apply(this,arguments)}function F6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F6(Object(r),!0).forEach(function(s){Qi(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Vf(e){return TDe(e)||PDe(e)||EDe(e)||ADe()}function ADe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EDe(e,t){if(e){if(typeof e=="string")return MA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MA(e,t)}}function PDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TDe(e){if(Array.isArray(e))return MA(e)}function MA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function _De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,YV(s.key),s)}}function IDe(e,t,r){return t&&M6(e.prototype,t),r&&M6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kDe(e,t,r){return t=R1(t),DDe(e,KV()?Reflect.construct(t,r||[],R1(e).constructor):t.apply(e,r))}function DDe(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ODe(e)}function ODe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KV=function(){return!!e})()}function R1(e){return R1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},R1(e)}function LDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BA(e,t)}function BA(e,t){return BA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},BA(e,t)}function Qi(e,t,r){return t=YV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YV(e){var t=RDe(e,"string");return cm(t)=="symbol"?t:t+""}function RDe(e,t){if(cm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(cm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cx=function(e){function t(){var r;_De(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=kDe(this,t,[].concat(a)),Qi(r,"state",{isAnimationFinished:!0,totalLength:0}),Qi(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Qi(r,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(x,b){return x+b});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),u=o%d,h=l-o,m=[],v=0,g=0;v<c.length;g+=c[v],++v)if(g+c[v]>u){m=[].concat(Vf(c.slice(0,v)),[u-g]);break}var p=m.length%2===0?[0,h]:[h];return[].concat(Vf(t.repeat(c,f)),Vf(m),p).map(function(x){return"".concat(x,"px")}).join(", ")}),Qi(r,"id",Mm("recharts-line-")),Qi(r,"pathRef",function(o){r.mainCurve=o}),Qi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Qi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return LDe(t,e),IDe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,f=i.children,u=ji(f,Sx);if(!u)return null;var h=function(g,p){return{x:g.x,y:g.y,value:g.value,errorVal:ra(g.payload,p)}},m={clipPath:s?"url(#clipPath-".concat(a,")"):null};return ce.createElement(Yr,m,u.map(function(v){return ce.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,u=er(this.props,!1),h=er(c,!0),m=d.map(function(g,p){var x=Da(Da(Da({key:"dot-".concat(p),r:3},u),h),{},{index:p,cx:g.x,cy:g.y,value:g.value,dataKey:f,payload:g.payload,points:d});return t.renderDotItem(c,x)}),v={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ce.createElement(Yr,Tv({className:"recharts-line-dots",key:"dots"},v),m)}},{key:"renderCurveStatically",value:function(s,a,i,o){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var u=$6(l,NDe),h=Da(Da(Da({},er(u,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:f});return ce.createElement(Eh,Tv({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,u=o.animationDuration,h=o.animationEasing,m=o.animationId,v=o.animateNewValues,g=o.width,p=o.height,x=this.state,b=x.prevPoints,y=x.totalLength;return ce.createElement(Mu,{begin:f,duration:u,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var E=j.t;if(b){var C=b.length/l.length,S=l.map(function(A,O){var D=Math.floor(O*C);if(b[D]){var $=b[D],M=Ss($.x,A.x),R=Ss($.y,A.y);return Da(Da({},A),{},{x:M(E),y:R(E)})}if(v){var B=Ss(g*2,A.x),U=Ss(p/2,A.y);return Da(Da({},A),{},{x:B(E),y:U(E)})}return Da(Da({},A),{},{x:A.x,y:A.y})});return i.renderCurveStatically(S,s,a)}var N=Ss(0,y),_=N(E),I;if(c){var T="".concat(c).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});I=i.getStrokeDasharray(_,y,T)}else I=i.generateSimpleStrokeDasharray(y,_);return i.renderCurveStatically(l,s,a,{strokeDasharray:I})})}},{key:"renderCurve",value:function(s,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!d&&f>0||!Zh(d,o))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.xAxis,f=a.yAxis,u=a.top,h=a.left,m=a.width,v=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,y=cr("recharts-line",c),j=d&&d.allowDataOverflow,E=f&&f.allowDataOverflow,C=j||E,S=rr(p)?this.id:p,N=(s=er(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},_=N.r,I=_===void 0?3:_,T=N.strokeWidth,A=T===void 0?2:T,O=J9(o)?o:{},D=O.clipDot,$=D===void 0?!0:D,M=I*2+A;return ce.createElement(Yr,{className:y},j||E?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(S)},ce.createElement("rect",{x:j?h:h-m/2,y:E?u:u-v/2,width:j?m:m*2,height:E?v:v*2})),!$&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(S)},ce.createElement("rect",{x:h-M/2,y:u-M/2,width:m+M,height:v+M}))):null,!b&&this.renderCurve(C,S),this.renderErrorBar(C,S),(b||o)&&this.renderDots(C,$,S),(!g||x)&&Ml.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(Vf(s),[0]):s,o=[],l=0;l<a;++l)o=[].concat(Vf(o),Vf(i));return o}},{key:"renderDotItem",value:function(s,a){var i;if(ce.isValidElement(s))i=ce.cloneElement(s,a);else if(Zt(s))i=s(a);else{var o=a.key,l=$6(a,SDe),c=cr("recharts-line-dot",typeof s!="boolean"?s.className:"");i=ce.createElement(Cw,Tv({key:o},l,{className:c}))}return i}}])}(w.PureComponent);Qi(Cx,"displayName","Line");Qi(Cx,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ko.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Qi(Cx,"getComposedData",function(e){var t=e.props,r=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,f=t.layout,u=c.map(function(h,m){var v=ra(h,o);return f==="horizontal"?{x:v1({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:rr(v)?null:s.scale(v),value:v,payload:h}:{x:rr(v)?null:r.scale(v),y:v1({axis:s,ticks:i,bandSize:l,entry:h,index:m}),value:v,payload:h}});return Da({points:u,layout:f},d)});var $De=["layout","type","stroke","connectNulls","isRange","ref"],FDe=["key"],XV;function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function QV(e,t){if(e==null)return{};var r=MDe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function MDe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function vu(){return vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},vu.apply(this,arguments)}function B6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Cc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B6(Object(r),!0).forEach(function(s){Uo(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function BDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ZV(s.key),s)}}function zDe(e,t,r){return t&&z6(e.prototype,t),r&&z6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UDe(e,t,r){return t=$1(t),VDe(e,JV()?Reflect.construct(t,r||[],$1(e).constructor):t.apply(e,r))}function VDe(e,t){if(t&&(dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qDe(e)}function qDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JV=function(){return!!e})()}function $1(e){return $1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$1(e)}function WDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zA(e,t)}function zA(e,t){return zA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},zA(e,t)}function Uo(e,t,r){return t=ZV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZV(e){var t=HDe(e,"string");return dm(t)=="symbol"?t:t+""}function HDe(e,t){if(dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(dm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nc=function(e){function t(){var r;BDe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=UDe(this,t,[].concat(a)),Uo(r,"state",{isAnimationFinished:!0}),Uo(r,"id",Mm("recharts-area-")),Uo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Zt(o)&&o()}),Uo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Zt(o)&&o()}),r}return WDe(t,e),zDe(t,[{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,u=c.dataKey,h=er(this.props,!1),m=er(d,!0),v=f.map(function(p,x){var b=Cc(Cc(Cc({key:"dot-".concat(x),r:3},h),m),{},{index:x,cx:p.x,cy:p.y,dataKey:u,value:p.value,payload:p.payload,points:f});return t.renderDotItem(d,b)}),g={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ce.createElement(Yr,vu({className:"recharts-area-dots"},g),v)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=s*Math.abs(c-d),u=Vc(o.map(function(h){return h.y||0}));return it(i)&&typeof i=="number"?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(Vc(i.map(function(h){return h.y||0})),u)),it(u)?ce.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(u+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=s*Math.abs(c-d),u=Vc(o.map(function(h){return h.x||0}));return it(i)&&typeof i=="number"?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(Vc(i.map(function(h){return h.x||0})),u)),it(u)?ce.createElement("rect",{x:0,y:c<d?c:c-f,width:u+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,u=l.connectNulls,h=l.isRange;l.ref;var m=QV(l,$De);return ce.createElement(Yr,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ce.createElement(Eh,vu({},er(m,!0),{points:s,connectNulls:u,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&ce.createElement(Eh,vu({},er(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:u,fill:"none",points:s})),f!=="none"&&h&&ce.createElement(Eh,vu({},er(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:u,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,u=o.animationDuration,h=o.animationEasing,m=o.animationId,v=this.state,g=v.prevPoints,p=v.prevBaseLine;return ce.createElement(Mu,{begin:f,duration:u,isActive:d,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t;if(g){var y=g.length/l.length,j=l.map(function(N,_){var I=Math.floor(_*y);if(g[I]){var T=g[I],A=Ss(T.x,N.x),O=Ss(T.y,N.y);return Cc(Cc({},N),{},{x:A(b),y:O(b)})}return N}),E;if(it(c)&&typeof c=="number"){var C=Ss(p,c);E=C(b)}else if(rr(c)||Fm(c)){var S=Ss(p,0);E=S(b)}else E=c.map(function(N,_){var I=Math.floor(_*y);if(p[I]){var T=p[I],A=Ss(T.x,N.x),O=Ss(T.y,N.y);return Cc(Cc({},N),{},{x:A(b),y:O(b)})}return N});return i.renderAreaStatically(j,E,s,a)}return ce.createElement(Yr,null,ce.createElement("defs",null,ce.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(b))),ce.createElement(Yr,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,f=d.prevPoints,u=d.prevBaseLine,h=d.totalLength;return c&&o&&o.length&&(!f&&h>0||!Zh(f,o)||!Zh(u,l))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(o,l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.top,f=a.left,u=a.xAxis,h=a.yAxis,m=a.width,v=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,y=cr("recharts-area",c),j=u&&u.allowDataOverflow,E=h&&h.allowDataOverflow,C=j||E,S=rr(p)?this.id:p,N=(s=er(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},_=N.r,I=_===void 0?3:_,T=N.strokeWidth,A=T===void 0?2:T,O=J9(o)?o:{},D=O.clipDot,$=D===void 0?!0:D,M=I*2+A;return ce.createElement(Yr,{className:y},j||E?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(S)},ce.createElement("rect",{x:j?f:f-m/2,y:E?d:d-v/2,width:j?m:m*2,height:E?v:v*2})),!$&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(S)},ce.createElement("rect",{x:f-M/2,y:d-M/2,width:m+M,height:v+M}))):null,b?null:this.renderArea(C,S),(o||b)&&this.renderDots(C,$,S),(!g||x)&&Ml.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(w.PureComponent);XV=nc;Uo(nc,"displayName","Area");Uo(nc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ko.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Uo(nc,"getBaseValue",function(e,t,r,s){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(it(l)&&typeof l=="number")return l;var c=a==="horizontal"?s:r,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),u=Math.min(d[0],d[1]);return l==="dataMin"?u:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Uo(nc,"getComposedData",function(e){var t=e.props,r=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,f=e.dataStartIndex,u=e.displayedData,h=e.offset,m=t.layout,v=d&&d.length,g=XV.getBaseValue(t,r,s,a),p=m==="horizontal",x=!1,b=u.map(function(j,E){var C;v?C=d[f+E]:(C=ra(j,c),Array.isArray(C)?x=!0:C=[g,C]);var S=C[1]==null||v&&ra(j,c)==null;return p?{x:v1({axis:s,ticks:i,bandSize:l,entry:j,index:E}),y:S?null:a.scale(C[1]),value:C,payload:j}:{x:S?null:s.scale(C[1]),y:v1({axis:a,ticks:o,bandSize:l,entry:j,index:E}),value:C,payload:j}}),y;return v||x?y=b.map(function(j){var E=Array.isArray(j.value)?j.value[0]:null;return p?{x:j.x,y:E!=null&&j.y!=null?a.scale(E):null}:{x:E!=null?s.scale(E):null,y:j.y}}):y=p?a.scale(g):s.scale(g),Cc({points:b,baseLine:y,layout:m,isRange:x},h)});Uo(nc,"renderDotItem",function(e,t){var r;if(ce.isValidElement(e))r=ce.cloneElement(e,t);else if(Zt(e))r=e(t);else{var s=cr("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=QV(t,FDe);r=ce.createElement(Cw,vu({},i,{key:a,className:s}))}return r});function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function GDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,rq(s.key),s)}}function KDe(e,t,r){return t&&U6(e.prototype,t),r&&U6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function YDe(e,t,r){return t=F1(t),XDe(e,eq()?Reflect.construct(t,r||[],F1(e).constructor):t.apply(e,r))}function XDe(e,t){if(t&&(um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QDe(e)}function QDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eq=function(){return!!e})()}function F1(e){return F1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},F1(e)}function JDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UA(e,t)}function UA(e,t){return UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},UA(e,t)}function tq(e,t,r){return t=rq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rq(e){var t=ZDe(e,"string");return um(t)=="symbol"?t:t+""}function ZDe(e,t){if(um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(um(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VA(){return VA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},VA.apply(this,arguments)}function eOe(e){var t=e.xAxisId,r=p3(),s=v3(),a=RV(t);return a==null?null:w.createElement(Hm,VA({},a,{className:cr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return kl(o,!0)}}))}var Qo=function(e){function t(){return GDe(this,t),YDe(this,t,arguments)}return JDe(t,e),KDe(t,[{key:"render",value:function(){return w.createElement(eOe,this.props)}}])}(w.Component);tq(Qo,"displayName","XAxis");tq(Qo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function tOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,aq(s.key),s)}}function rOe(e,t,r){return t&&V6(e.prototype,t),r&&V6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nOe(e,t,r){return t=M1(t),sOe(e,nq()?Reflect.construct(t,r||[],M1(e).constructor):t.apply(e,r))}function sOe(e,t){if(t&&(fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aOe(e)}function aOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nq=function(){return!!e})()}function M1(e){return M1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},M1(e)}function iOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qA(e,t)}function qA(e,t){return qA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},qA(e,t)}function sq(e,t,r){return t=aq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aq(e){var t=oOe(e,"string");return fm(t)=="symbol"?t:t+""}function oOe(e,t){if(fm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(fm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WA(){return WA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},WA.apply(this,arguments)}var lOe=function(t){var r=t.yAxisId,s=p3(),a=v3(),i=$V(r);return i==null?null:w.createElement(Hm,WA({},i,{className:cr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return kl(l,!0)}}))},Jo=function(e){function t(){return tOe(this,t),nOe(this,t,arguments)}return iOe(t,e),rOe(t,[{key:"render",value:function(){return w.createElement(lOe,this.props)}}])}(w.Component);sq(Jo,"displayName","YAxis");sq(Jo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function q6(e){return fOe(e)||uOe(e)||dOe(e)||cOe()}function cOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dOe(e,t){if(e){if(typeof e=="string")return HA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HA(e,t)}}function uOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fOe(e){if(Array.isArray(e))return HA(e)}function HA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var GA=function(t,r,s,a,i){var o=ji(t,x3),l=ji(t,_w),c=[].concat(q6(o),q6(l)),d=ji(t,kw),f="".concat(a,"Id"),u=a[0],h=r;if(c.length&&(h=c.reduce(function(g,p){if(p.props[f]===s&&Xo(p.props,"extendDomain")&&it(p.props[u])){var x=p.props[u];return[Math.min(g[0],x),Math.max(g[1],x)]}return g},h)),d.length){var m="".concat(u,"1"),v="".concat(u,"2");h=d.reduce(function(g,p){if(p.props[f]===s&&Xo(p.props,"extendDomain")&&it(p.props[m])&&it(p.props[v])){var x=p.props[m],b=p.props[v];return[Math.min(g[0],x,b),Math.max(g[1],x,b)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,p){return it(p)?[Math.min(g[0],p),Math.max(g[1],p)]:g},h)),h},iq={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function i(c,d,f,u,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,u||c,h),v=r?r+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,u;if(this._eventsCount===0)return d;for(u in f=this._events)t.call(f,u)&&d.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=r?r+d:d,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,m=u.length,v=new Array(m);h<m;h++)v[h]=u[h].fn;return v},l.prototype.listenerCount=function(d){var f=r?r+d:d,u=this._events[f];return u?u.fn?1:u.length:0},l.prototype.emit=function(d,f,u,h,m,v){var g=r?r+d:d;if(!this._events[g])return!1;var p=this._events[g],x=arguments.length,b,y;if(p.fn){switch(p.once&&this.removeListener(d,p.fn,void 0,!0),x){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,f),!0;case 3:return p.fn.call(p.context,f,u),!0;case 4:return p.fn.call(p.context,f,u,h),!0;case 5:return p.fn.call(p.context,f,u,h,m),!0;case 6:return p.fn.call(p.context,f,u,h,m,v),!0}for(y=1,b=new Array(x-1);y<x;y++)b[y-1]=arguments[y];p.fn.apply(p.context,b)}else{var j=p.length,E;for(y=0;y<j;y++)switch(p[y].once&&this.removeListener(d,p[y].fn,void 0,!0),x){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,f);break;case 3:p[y].fn.call(p[y].context,f,u);break;case 4:p[y].fn.call(p[y].context,f,u,h);break;default:if(!b)for(E=1,b=new Array(x-1);E<x;E++)b[E-1]=arguments[E];p[y].fn.apply(p[y].context,b)}}return!0},l.prototype.on=function(d,f,u){return i(this,d,f,u,!1)},l.prototype.once=function(d,f,u){return i(this,d,f,u,!0)},l.prototype.removeListener=function(d,f,u,h){var m=r?r+d:d;if(!this._events[m])return this;if(!f)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===f&&(!h||v.once)&&(!u||v.context===u)&&o(this,m);else{for(var g=0,p=[],x=v.length;g<x;g++)(v[g].fn!==f||h&&!v[g].once||u&&v[g].context!==u)&&p.push(v[g]);p.length?this._events[m]=p.length===1?p[0]:p:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&o(this,f)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(iq);var hOe=iq.exports;const mOe=Cr(hOe);var j5=new mOe,w5="recharts.syncMouseEvents";function Wg(e){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wg(e)}function pOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,oq(s.key),s)}}function vOe(e,t,r){return t&&W6(e.prototype,t),r&&W6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function N5(e,t,r){return t=oq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oq(e){var t=gOe(e,"string");return Wg(t)=="symbol"?t:t+""}function gOe(e,t){if(Wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Wg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xOe=function(){function e(){pOe(this,e),N5(this,"activeIndex",0),N5(this,"coordinateList",[]),N5(this,"layout","horizontal")}return vOe(e,[{key:"setDetails",value:function(r){var s,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,f=r.offset,u=f===void 0?null:f,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((s=window)===null||s===void 0?void 0:s.scrollY)||0,u=i+c+d,h=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:u,pageY:h})}}}])}();function yOe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&it(s)&&it(a))return!0}return!1}function bOe(e,t,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function lq(e){var t=e.cx,r=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,o=As(t,r,s,a),l=As(t,r,s,i);return{points:[o,l],cx:t,cy:r,radius:s,startAngle:a,endAngle:i}}function jOe(e,t,r){var s,a,i,o;if(e==="horizontal")s=t.x,i=s,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,s=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,f=t.outerRadius,u=t.angle,h=As(l,c,d,u),m=As(l,c,f,u);s=h.x,a=h.y,i=m.x,o=m.y}else return lq(t);return[{x:s,y:a},{x:i,y:o}]}function Hg(e){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(e)}function H6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function vy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H6(Object(r),!0).forEach(function(s){wOe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function wOe(e,t,r){return t=NOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NOe(e){var t=SOe(e,"string");return Hg(t)=="symbol"?t:t+""}function SOe(e,t){if(Hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Hg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function COe(e){var t,r,s=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,u=e.layout,h=e.chartName,m=(t=s.props.cursor)!==null&&t!==void 0?t:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var v,g=Eh;if(h==="ScatterChart")v=o,g=jTe;else if(h==="BarChart")v=bOe(u,o,c,f),g=d3;else if(u==="radial"){var p=lq(o),x=p.cx,b=p.cy,y=p.radius,j=p.startAngle,E=p.endAngle;v={cx:x,cy:b,startAngle:j,endAngle:E,innerRadius:y,outerRadius:y},g=uV}else v={points:jOe(u,o,c)},g=Eh;var C=vy(vy(vy(vy({stroke:"#ccc",pointerEvents:"none"},c),v),er(m,!1)),{},{payload:l,payloadIndex:d,className:cr("recharts-tooltip-cursor",m.className)});return w.isValidElement(m)?w.cloneElement(m,C):w.createElement(g,C)}var AOe=["item"],EOe=["children","className","width","height","style","compact","title","desc"];function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fh.apply(this,arguments)}function G6(e,t){return _Oe(e)||TOe(e,t)||dq(e,t)||POe()}function POe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function _Oe(e){if(Array.isArray(e))return e}function K6(e,t){if(e==null)return{};var r=IOe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function IOe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function kOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uq(s.key),s)}}function DOe(e,t,r){return t&&Y6(e.prototype,t),r&&Y6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OOe(e,t,r){return t=B1(t),LOe(e,cq()?Reflect.construct(t,r||[],B1(e).constructor):t.apply(e,r))}function LOe(e,t){if(t&&(hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ROe(e)}function ROe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cq=function(){return!!e})()}function B1(e){return B1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},B1(e)}function $Oe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KA(e,t)}function KA(e,t){return KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},KA(e,t)}function mm(e){return BOe(e)||MOe(e)||dq(e)||FOe()}function FOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dq(e,t){if(e){if(typeof e=="string")return YA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YA(e,t)}}function MOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BOe(e){if(Array.isArray(e))return YA(e)}function YA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function X6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X6(Object(r),!0).forEach(function(s){Lt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Lt(e,t,r){return t=uq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uq(e){var t=zOe(e,"string");return hm(t)=="symbol"?t:t+""}function zOe(e,t){if(hm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(hm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UOe={xAxis:["bottom","top"],yAxis:["left","right"]},VOe={width:"100%",height:"100%"},fq={x:0,y:0};function gy(e){return e}var qOe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},WOe=function(t,r,s,a){var i=r.find(function(f){return f&&f.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return Ge(Ge(Ge({},a),As(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return Ge(Ge(Ge({},a),As(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return fq},Dw=function(t,r){var s=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(mm(l),mm(d)):l},[]);return o.length>0?o:t&&t.length&&it(a)&&it(i)?t.slice(a,i+1):[]};function hq(e){return e==="number"?[0,"auto"]:void 0}var XA=function(t,r,s,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Dw(r,t);return s<0||!i||!i.length||s>=l.length?null:i.reduce(function(c,d){var f,u=(f=d.props.data)!==null&&f!==void 0?f:r;u&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=u===void 0?l:u;h=Bb(m,o.dataKey,a)}else h=u&&u[s]||l[s];return h?[].concat(mm(c),[lV(d,h)]):c},[])},Q6=function(t,r,s,a){var i=a||{x:t.chartX,y:t.chartY},o=qOe(i,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,f=cEe(o,l,d,c);if(f>=0&&d){var u=d[f]&&d[f].value,h=XA(t,r,f,u),m=WOe(s,l,f,i);return{activeTooltipIndex:f,activeLabel:u,activePayload:h,activeCoordinate:m}}return null},HOe=function(t,r){var s=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,u=t.children,h=t.stackOffset,m=aV(f,i);return s.reduce(function(v,g){var p,x=g.type.defaultProps!==void 0?Ge(Ge({},g.type.defaultProps),g.props):g.props,b=x.type,y=x.dataKey,j=x.allowDataOverflow,E=x.allowDuplicatedCategory,C=x.scale,S=x.ticks,N=x.includeHidden,_=x[o];if(v[_])return v;var I=Dw(t.data,{graphicalItems:a.filter(function(L){var V,G=o in L.props?L.props[o]:(V=L.type.defaultProps)===null||V===void 0?void 0:V[o];return G===_}),dataStartIndex:c,dataEndIndex:d}),T=I.length,A,O,D;yOe(x.domain,j,b)&&(A=fA(x.domain,null,j),m&&(b==="number"||C!=="auto")&&(D=Ev(I,y,"category")));var $=hq(b);if(!A||A.length===0){var M,R=(M=x.domain)!==null&&M!==void 0?M:$;if(y){if(A=Ev(I,y,b),b==="category"&&m){var B=tge(A);E&&B?(O=A,A=A1(0,T)):E||(A=yL(R,A,g).reduce(function(L,V){return L.indexOf(V)>=0?L:[].concat(mm(L),[V])},[]))}else if(b==="category")E?A=A.filter(function(L){return L!==""&&!rr(L)}):A=yL(R,A,g).reduce(function(L,V){return L.indexOf(V)>=0||V===""||rr(V)?L:[].concat(mm(L),[V])},[]);else if(b==="number"){var U=mEe(I,a.filter(function(L){var V,G,Z=o in L.props?L.props[o]:(V=L.type.defaultProps)===null||V===void 0?void 0:V[o],te="hide"in L.props?L.props.hide:(G=L.type.defaultProps)===null||G===void 0?void 0:G.hide;return Z===_&&(N||!te)}),y,i,f);U&&(A=U)}m&&(b==="number"||C!=="auto")&&(D=Ev(I,y,"category"))}else m?A=A1(0,T):l&&l[_]&&l[_].hasStack&&b==="number"?A=h==="expand"?[0,1]:oV(l[_].stackGroups,c,d):A=sV(I,a.filter(function(L){var V=o in L.props?L.props[o]:L.type.defaultProps[o],G="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return V===_&&(N||!G)}),b,f,!0);if(b==="number")A=GA(u,A,_,i,S),R&&(A=fA(R,A,j));else if(b==="category"&&R){var W=R,q=A.every(function(L){return W.indexOf(L)>=0});q&&(A=W)}}return Ge(Ge({},v),{},Lt({},_,Ge(Ge({},x),{},{axisType:i,domain:A,categoricalDomain:D,duplicateDomain:O,originalDomain:(p=x.domain)!==null&&p!==void 0?p:$,isCategorical:m,layout:f})))},{})},GOe=function(t,r){var s=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,u=t.children,h=Dw(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),m=h.length,v=aV(f,i),g=-1;return s.reduce(function(p,x){var b=x.type.defaultProps!==void 0?Ge(Ge({},x.type.defaultProps),x.props):x.props,y=b[o],j=hq("number");if(!p[y]){g++;var E;return v?E=A1(0,m):l&&l[y]&&l[y].hasStack?(E=oV(l[y].stackGroups,c,d),E=GA(u,E,y,i)):(E=fA(j,sV(h,s.filter(function(C){var S,N,_=o in C.props?C.props[o]:(S=C.type.defaultProps)===null||S===void 0?void 0:S[o],I="hide"in C.props?C.props.hide:(N=C.type.defaultProps)===null||N===void 0?void 0:N.hide;return _===y&&!I}),"number",f),a.defaultProps.allowDataOverflow),E=GA(u,E,y,i)),Ge(Ge({},p),{},Lt({},y,Ge(Ge({axisType:i},a.defaultProps),{},{hide:!0,orientation:bi(UOe,"".concat(i,".").concat(g%2),null),domain:E,originalDomain:j,isCategorical:v,layout:f})))}return p},{})},KOe=function(t,r){var s=r.axisType,a=s===void 0?"xAxis":s,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.children,u="".concat(a,"Id"),h=ji(f,i),m={};return h&&h.length?m=HOe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=GOe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},YOe=function(t){var r=Lc(t),s=kl(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:$P(s,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:g1(r,s)}},J6=function(t){var r=t.children,s=t.defaultShowTooltip,a=Ra(r,nm),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},XOe=function(t){return!t||!t.length?!1:t.some(function(r){var s=Rl(r&&r.type);return s&&s.indexOf("Bar")>=0})},Z6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},QOe=function(t,r){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,f=s.height,u=s.children,h=s.margin||{},m=Ra(u,nm),v=Ra(u,Sh),g=Object.keys(c).reduce(function(E,C){var S=c[C],N=S.orientation;return!S.mirror&&!S.hide?Ge(Ge({},E),{},Lt({},N,E[N]+S.width)):E},{left:h.left||0,right:h.right||0}),p=Object.keys(o).reduce(function(E,C){var S=o[C],N=S.orientation;return!S.mirror&&!S.hide?Ge(Ge({},E),{},Lt({},N,bi(E,"".concat(N))+S.height)):E},{top:h.top||0,bottom:h.bottom||0}),x=Ge(Ge({},p),g),b=x.bottom;m&&(x.bottom+=m.props.height||nm.defaultProps.height),v&&r&&(x=fEe(x,a,s,r));var y=d-x.left-x.right,j=f-x.top-x.bottom;return Ge(Ge({brushBottom:b},x),{},{width:Math.max(y,0),height:Math.max(j,0)})},JOe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},j3=function(t){var r=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,f=t.formatAxisMap,u=t.defaultProps,h=function(x,b){var y=b.graphicalItems,j=b.stackGroups,E=b.offset,C=b.updateId,S=b.dataStartIndex,N=b.dataEndIndex,_=x.barSize,I=x.layout,T=x.barGap,A=x.barCategoryGap,O=x.maxBarSize,D=Z6(I),$=D.numericAxisName,M=D.cateAxisName,R=XOe(y),B=[];return y.forEach(function(U,W){var q=Dw(x.data,{graphicalItems:[U],dataStartIndex:S,dataEndIndex:N}),L=U.type.defaultProps!==void 0?Ge(Ge({},U.type.defaultProps),U.props):U.props,V=L.dataKey,G=L.maxBarSize,Z=L["".concat($,"Id")],te=L["".concat(M,"Id")],he={},me=c.reduce(function(nt,rt){var gt=b["".concat(rt.axisType,"Map")],Me=L["".concat(rt.axisType,"Id")];gt&&gt[Me]||rt.axisType==="zAxis"||fd(!1);var Ze=gt[Me];return Ge(Ge({},nt),{},Lt(Lt({},rt.axisType,Ze),"".concat(rt.axisType,"Ticks"),kl(Ze)))},he),oe=me[M],we=me["".concat(M,"Ticks")],ve=j&&j[Z]&&j[Z].hasStack&&AEe(U,j[Z].stackGroups),ge=Rl(U.type).indexOf("Bar")>=0,De=g1(oe,we),xe=[],le=R&&dEe({barSize:_,stackGroups:j,totalSize:JOe(me,M)});if(ge){var re,Ce,Ne=rr(G)?O:G,ye=(re=(Ce=g1(oe,we,!0))!==null&&Ce!==void 0?Ce:Ne)!==null&&re!==void 0?re:0;xe=uEe({barGap:T,barCategoryGap:A,bandSize:ye!==De?ye:De,sizeList:le[te],maxBarSize:Ne}),ye!==De&&(xe=xe.map(function(nt){return Ge(Ge({},nt),{},{position:Ge(Ge({},nt.position),{},{offset:nt.position.offset-ye/2})})}))}var $e=U&&U.type&&U.type.getComposedData;$e&&B.push({props:Ge(Ge({},$e(Ge(Ge({},me),{},{displayedData:q,props:x,dataKey:V,item:U,bandSize:De,barPosition:xe,offset:E,stackedData:ve,layout:I,dataStartIndex:S,dataEndIndex:N}))),{},Lt(Lt(Lt({key:U.key||"item-".concat(W)},$,me[$]),M,me[M]),"animationId",C)),childIndex:hge(U,x.children),item:U})}),B},m=function(x,b){var y=x.props,j=x.dataStartIndex,E=x.dataEndIndex,C=x.updateId;if(!cD({props:y}))return null;var S=y.children,N=y.layout,_=y.stackOffset,I=y.data,T=y.reverseStackOrder,A=Z6(N),O=A.numericAxisName,D=A.cateAxisName,$=ji(S,s),M=NEe(I,$,"".concat(O,"Id"),"".concat(D,"Id"),_,T),R=c.reduce(function(L,V){var G="".concat(V.axisType,"Map");return Ge(Ge({},L),{},Lt({},G,KOe(y,Ge(Ge({},V),{},{graphicalItems:$,stackGroups:V.axisType===O&&M,dataStartIndex:j,dataEndIndex:E}))))},{}),B=QOe(Ge(Ge({},R),{},{props:y,graphicalItems:$}),b==null?void 0:b.legendBBox);Object.keys(R).forEach(function(L){R[L]=f(y,R[L],B,L.replace("Map",""),r)});var U=R["".concat(D,"Map")],W=YOe(U),q=h(y,Ge(Ge({},R),{},{dataStartIndex:j,dataEndIndex:E,updateId:C,graphicalItems:$,stackGroups:M,offset:B}));return Ge(Ge({formattedGraphicalItems:q,graphicalItems:$,offset:B,stackGroups:M},W),R)},v=function(p){function x(b){var y,j,E;return kOe(this,x),E=OOe(this,x,[b]),Lt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Lt(E,"accessibilityManager",new xOe),Lt(E,"handleLegendBBoxUpdate",function(C){if(C){var S=E.state,N=S.dataStartIndex,_=S.dataEndIndex,I=S.updateId;E.setState(Ge({legendBBox:C},m({props:E.props,dataStartIndex:N,dataEndIndex:_,updateId:I},Ge(Ge({},E.state),{},{legendBBox:C}))))}}),Lt(E,"handleReceiveSyncEvent",function(C,S,N){if(E.props.syncId===C){if(N===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(S)}}),Lt(E,"handleBrushChange",function(C){var S=C.startIndex,N=C.endIndex;if(S!==E.state.dataStartIndex||N!==E.state.dataEndIndex){var _=E.state.updateId;E.setState(function(){return Ge({dataStartIndex:S,dataEndIndex:N},m({props:E.props,dataStartIndex:S,dataEndIndex:N,updateId:_},E.state))}),E.triggerSyncEvent({dataStartIndex:S,dataEndIndex:N})}}),Lt(E,"handleMouseEnter",function(C){var S=E.getMouseInfo(C);if(S){var N=Ge(Ge({},S),{},{isTooltipActive:!0});E.setState(N),E.triggerSyncEvent(N);var _=E.props.onMouseEnter;Zt(_)&&_(N,C)}}),Lt(E,"triggeredAfterMouseMove",function(C){var S=E.getMouseInfo(C),N=S?Ge(Ge({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(N),E.triggerSyncEvent(N);var _=E.props.onMouseMove;Zt(_)&&_(N,C)}),Lt(E,"handleItemMouseEnter",function(C){E.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),Lt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Lt(E,"handleMouseMove",function(C){C.persist(),E.throttleTriggeredAfterMouseMove(C)}),Lt(E,"handleMouseLeave",function(C){E.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};E.setState(S),E.triggerSyncEvent(S);var N=E.props.onMouseLeave;Zt(N)&&N(S,C)}),Lt(E,"handleOuterEvent",function(C){var S=fge(C),N=bi(E.props,"".concat(S));if(S&&Zt(N)){var _,I;/.*touch.*/i.test(S)?I=E.getMouseInfo(C.changedTouches[0]):I=E.getMouseInfo(C),N((_=I)!==null&&_!==void 0?_:{},C)}}),Lt(E,"handleClick",function(C){var S=E.getMouseInfo(C);if(S){var N=Ge(Ge({},S),{},{isTooltipActive:!0});E.setState(N),E.triggerSyncEvent(N);var _=E.props.onClick;Zt(_)&&_(N,C)}}),Lt(E,"handleMouseDown",function(C){var S=E.props.onMouseDown;if(Zt(S)){var N=E.getMouseInfo(C);S(N,C)}}),Lt(E,"handleMouseUp",function(C){var S=E.props.onMouseUp;if(Zt(S)){var N=E.getMouseInfo(C);S(N,C)}}),Lt(E,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),Lt(E,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.handleMouseDown(C.changedTouches[0])}),Lt(E,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.handleMouseUp(C.changedTouches[0])}),Lt(E,"handleDoubleClick",function(C){var S=E.props.onDoubleClick;if(Zt(S)){var N=E.getMouseInfo(C);S(N,C)}}),Lt(E,"handleContextMenu",function(C){var S=E.props.onContextMenu;if(Zt(S)){var N=E.getMouseInfo(C);S(N,C)}}),Lt(E,"triggerSyncEvent",function(C){E.props.syncId!==void 0&&j5.emit(w5,E.props.syncId,C,E.eventEmitterSymbol)}),Lt(E,"applySyncEvent",function(C){var S=E.props,N=S.layout,_=S.syncMethod,I=E.state.updateId,T=C.dataStartIndex,A=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)E.setState(Ge({dataStartIndex:T,dataEndIndex:A},m({props:E.props,dataStartIndex:T,dataEndIndex:A,updateId:I},E.state)));else if(C.activeTooltipIndex!==void 0){var O=C.chartX,D=C.chartY,$=C.activeTooltipIndex,M=E.state,R=M.offset,B=M.tooltipTicks;if(!R)return;if(typeof _=="function")$=_(B,C);else if(_==="value"){$=-1;for(var U=0;U<B.length;U++)if(B[U].value===C.activeLabel){$=U;break}}var W=Ge(Ge({},R),{},{x:R.left,y:R.top}),q=Math.min(O,W.x+W.width),L=Math.min(D,W.y+W.height),V=B[$]&&B[$].value,G=XA(E.state,E.props.data,$),Z=B[$]?{x:N==="horizontal"?B[$].coordinate:q,y:N==="horizontal"?L:B[$].coordinate}:fq;E.setState(Ge(Ge({},C),{},{activeLabel:V,activeCoordinate:Z,activePayload:G,activeTooltipIndex:$}))}else E.setState(C)}),Lt(E,"renderCursor",function(C){var S,N=E.state,_=N.isTooltipActive,I=N.activeCoordinate,T=N.activePayload,A=N.offset,O=N.activeTooltipIndex,D=N.tooltipAxisBandSize,$=E.getTooltipEventType(),M=(S=C.props.active)!==null&&S!==void 0?S:_,R=E.props.layout,B=C.key||"_recharts-cursor";return ce.createElement(COe,{key:B,activeCoordinate:I,activePayload:T,activeTooltipIndex:O,chartName:r,element:C,isActive:M,layout:R,offset:A,tooltipAxisBandSize:D,tooltipEventType:$})}),Lt(E,"renderPolarAxis",function(C,S,N){var _=bi(C,"type.axisType"),I=bi(E.state,"".concat(_,"Map")),T=C.type.defaultProps,A=T!==void 0?Ge(Ge({},T),C.props):C.props,O=I&&I[A["".concat(_,"Id")]];return w.cloneElement(C,Ge(Ge({},O),{},{className:cr(_,O.className),key:C.key||"".concat(S,"-").concat(N),ticks:kl(O,!0)}))}),Lt(E,"renderPolarGrid",function(C){var S=C.props,N=S.radialLines,_=S.polarAngles,I=S.polarRadius,T=E.state,A=T.radiusAxisMap,O=T.angleAxisMap,D=Lc(A),$=Lc(O),M=$.cx,R=$.cy,B=$.innerRadius,U=$.outerRadius;return w.cloneElement(C,{polarAngles:Array.isArray(_)?_:kl($,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(I)?I:kl(D,!0).map(function(W){return W.coordinate}),cx:M,cy:R,innerRadius:B,outerRadius:U,key:C.key||"polar-grid",radialLines:N})}),Lt(E,"renderLegend",function(){var C=E.state.formattedGraphicalItems,S=E.props,N=S.children,_=S.width,I=S.height,T=E.props.margin||{},A=_-(T.left||0)-(T.right||0),O=rV({children:N,formattedGraphicalItems:C,legendWidth:A,legendContent:d});if(!O)return null;var D=O.item,$=K6(O,AOe);return w.cloneElement(D,Ge(Ge({},$),{},{chartWidth:_,chartHeight:I,margin:T,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Lt(E,"renderTooltip",function(){var C,S=E.props,N=S.children,_=S.accessibilityLayer,I=Ra(N,ma);if(!I)return null;var T=E.state,A=T.isTooltipActive,O=T.activeCoordinate,D=T.activePayload,$=T.activeLabel,M=T.offset,R=(C=I.props.active)!==null&&C!==void 0?C:A;return w.cloneElement(I,{viewBox:Ge(Ge({},M),{},{x:M.left,y:M.top}),active:R,label:$,payload:R?D:[],coordinate:O,accessibilityLayer:_})}),Lt(E,"renderBrush",function(C){var S=E.props,N=S.margin,_=S.data,I=E.state,T=I.offset,A=I.dataStartIndex,O=I.dataEndIndex,D=I.updateId;return w.cloneElement(C,{key:C.key||"_recharts-brush",onChange:fy(E.handleBrushChange,C.props.onChange),data:_,x:it(C.props.x)?C.props.x:T.left,y:it(C.props.y)?C.props.y:T.top+T.height+T.brushBottom-(N.bottom||0),width:it(C.props.width)?C.props.width:T.width,startIndex:A,endIndex:O,updateId:"brush-".concat(D)})}),Lt(E,"renderReferenceElement",function(C,S,N){if(!C)return null;var _=E,I=_.clipPathId,T=E.state,A=T.xAxisMap,O=T.yAxisMap,D=T.offset,$=C.type.defaultProps||{},M=C.props,R=M.xAxisId,B=R===void 0?$.xAxisId:R,U=M.yAxisId,W=U===void 0?$.yAxisId:U;return w.cloneElement(C,{key:C.key||"".concat(S,"-").concat(N),xAxis:A[B],yAxis:O[W],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:I})}),Lt(E,"renderActivePoints",function(C){var S=C.item,N=C.activePoint,_=C.basePoint,I=C.childIndex,T=C.isRange,A=[],O=S.props.key,D=S.item.type.defaultProps!==void 0?Ge(Ge({},S.item.type.defaultProps),S.item.props):S.item.props,$=D.activeDot,M=D.dataKey,R=Ge(Ge({index:I,dataKey:M,cx:N.x,cy:N.y,r:4,fill:c3(S.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},er($,!1)),zb($));return A.push(x.renderActiveDot($,R,"".concat(O,"-activePoint-").concat(I))),_?A.push(x.renderActiveDot($,Ge(Ge({},R),{},{cx:_.x,cy:_.y}),"".concat(O,"-basePoint-").concat(I))):T&&A.push(null),A}),Lt(E,"renderGraphicChild",function(C,S,N){var _=E.filterFormatItem(C,S,N);if(!_)return null;var I=E.getTooltipEventType(),T=E.state,A=T.isTooltipActive,O=T.tooltipAxis,D=T.activeTooltipIndex,$=T.activeLabel,M=E.props.children,R=Ra(M,ma),B=_.props,U=B.points,W=B.isRange,q=B.baseLine,L=_.item.type.defaultProps!==void 0?Ge(Ge({},_.item.type.defaultProps),_.item.props):_.item.props,V=L.activeDot,G=L.hide,Z=L.activeBar,te=L.activeShape,he=!!(!G&&A&&R&&(V||Z||te)),me={};I!=="axis"&&R&&R.props.trigger==="click"?me={onClick:fy(E.handleItemMouseEnter,C.props.onClick)}:I!=="axis"&&(me={onMouseLeave:fy(E.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:fy(E.handleItemMouseEnter,C.props.onMouseEnter)});var oe=w.cloneElement(C,Ge(Ge({},_.props),me));function we(rt){return typeof O.dataKey=="function"?O.dataKey(rt.payload):null}if(he)if(D>=0){var ve,ge;if(O.dataKey&&!O.allowDuplicatedCategory){var De=typeof O.dataKey=="function"?we:"payload.".concat(O.dataKey.toString());ve=Bb(U,De,$),ge=W&&q&&Bb(q,De,$)}else ve=U==null?void 0:U[D],ge=W&&q&&q[D];if(te||Z){var xe=C.props.activeIndex!==void 0?C.props.activeIndex:D;return[w.cloneElement(C,Ge(Ge(Ge({},_.props),me),{},{activeIndex:xe})),null,null]}if(!rr(ve))return[oe].concat(mm(E.renderActivePoints({item:_,activePoint:ve,basePoint:ge,childIndex:D,isRange:W})))}else{var le,re=(le=E.getItemByXY(E.state.activeCoordinate))!==null&&le!==void 0?le:{graphicalItem:oe},Ce=re.graphicalItem,Ne=Ce.item,ye=Ne===void 0?C:Ne,$e=Ce.childIndex,nt=Ge(Ge(Ge({},_.props),me),{},{activeIndex:$e});return[w.cloneElement(ye,nt),null,null]}return W?[oe,null,null]:[oe,null]}),Lt(E,"renderCustomized",function(C,S,N){return w.cloneElement(C,Ge(Ge({key:"recharts-customized-".concat(N)},E.props),E.state))}),Lt(E,"renderMap",{CartesianGrid:{handler:gy,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:gy},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:gy},YAxis:{handler:gy},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((y=b.id)!==null&&y!==void 0?y:Mm("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=tU(E.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),E.state={},E}return $Oe(x,p),DOe(x,[{key:"componentDidMount",value:function(){var y,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,j=y.children,E=y.data,C=y.height,S=y.layout,N=Ra(j,ma);if(N){var _=N.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,T=XA(this.state,E,_,I),A=this.state.tooltipTicks[_].coordinate,O=(this.state.offset.top+C)/2,D=S==="horizontal",$=D?{x:A,y:O}:{y:A,x:O},M=this.state.formattedGraphicalItems.find(function(B){var U=B.item;return U.type.name==="Scatter"});M&&($=Ge(Ge({},$),M.props.points[_].tooltipPosition),T=M.props.points[_].tooltipPayload);var R={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:I,activePayload:T,activeCoordinate:$};this.setState(R),this.renderCursor(N),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var E,C;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(y){EC([Ra(y.children,ma)],[Ra(this.props.children,ma)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=Ra(this.props.children,ma);if(y&&typeof y.props.shared=="boolean"){var j=y.props.shared?"axis":"item";return l.indexOf(j)>=0?j:i}return i}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var j=this.container,E=j.getBoundingClientRect(),C=R5e(E),S={chartX:Math.round(y.pageX-C.left),chartY:Math.round(y.pageY-C.top)},N=E.width/j.offsetWidth||1,_=this.inRange(S.chartX,S.chartY,N);if(!_)return null;var I=this.state,T=I.xAxisMap,A=I.yAxisMap,O=this.getTooltipEventType(),D=Q6(this.state,this.props.data,this.props.layout,_);if(O!=="axis"&&T&&A){var $=Lc(T).scale,M=Lc(A).scale,R=$&&$.invert?$.invert(S.chartX):null,B=M&&M.invert?M.invert(S.chartY):null;return Ge(Ge({},S),{},{xValue:R,yValue:B},D)}return D?Ge(Ge({},S),D):null}},{key:"inRange",value:function(y,j){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,S=y/E,N=j/E;if(C==="horizontal"||C==="vertical"){var _=this.state.offset,I=S>=_.left&&S<=_.left+_.width&&N>=_.top&&N<=_.top+_.height;return I?{x:S,y:N}:null}var T=this.state,A=T.angleAxisMap,O=T.radiusAxisMap;if(A&&O){var D=Lc(A);return wL({x:S,y:N},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,j=this.getTooltipEventType(),E=Ra(y,ma),C={};E&&j==="axis"&&(E.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=zb(this.props,this.handleOuterEvent);return Ge(Ge({},S),C)}},{key:"addListener",value:function(){j5.on(w5,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){j5.removeListener(w5,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,j,E){for(var C=this.state.formattedGraphicalItems,S=0,N=C.length;S<N;S++){var _=C[S];if(_.item===y||_.props.key===y.key||j===Rl(_.item.type)&&E===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,j=this.state.offset,E=j.left,C=j.top,S=j.height,N=j.width;return ce.createElement("defs",null,ce.createElement("clipPath",{id:y},ce.createElement("rect",{x:E,y:C,height:S,width:N})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(j,E){var C=G6(E,2),S=C[0],N=C[1];return Ge(Ge({},j),{},Lt({},S,N.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(j,E){var C=G6(E,2),S=C[0],N=C[1];return Ge(Ge({},j),{},Lt({},S,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[y])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(y){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[y])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(y){var j=this.state,E=j.formattedGraphicalItems,C=j.activeItem;if(E&&E.length)for(var S=0,N=E.length;S<N;S++){var _=E[S],I=_.props,T=_.item,A=T.type.defaultProps!==void 0?Ge(Ge({},T.type.defaultProps),T.props):T.props,O=Rl(T.type);if(O==="Bar"){var D=(I.data||[]).find(function(B){return uTe(y,B)});if(D)return{graphicalItem:_,payload:D}}else if(O==="RadialBar"){var $=(I.data||[]).find(function(B){return wL(y,B)});if($)return{graphicalItem:_,payload:$}}else if(Aw(_,C)||Ew(_,C)||Bg(_,C)){var M=m_e({graphicalItem:_,activeTooltipItem:C,itemData:A.data}),R=A.activeIndex===void 0?M:A.activeIndex;return{graphicalItem:Ge(Ge({},_),{},{childIndex:R}),payload:Bg(_,C)?A.data[M]:_.props.data[M]}}}return null}},{key:"render",value:function(){var y=this;if(!cD(this))return null;var j=this.props,E=j.children,C=j.className,S=j.width,N=j.height,_=j.style,I=j.compact,T=j.title,A=j.desc,O=K6(j,EOe),D=er(O,!1);if(I)return ce.createElement(j6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement(TC,fh({},D,{width:S,height:N,title:T,desc:A}),this.renderClipPath(),uD(E,this.renderMap)));if(this.props.accessibilityLayer){var $,M;D.tabIndex=($=this.props.tabIndex)!==null&&$!==void 0?$:0,D.role=(M=this.props.role)!==null&&M!==void 0?M:"application",D.onKeyDown=function(B){y.accessibilityManager.keyboardEvent(B)},D.onFocus=function(){y.accessibilityManager.focus()}}var R=this.parseEventsOfWrapper();return ce.createElement(j6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement("div",fh({className:cr("recharts-wrapper",C),style:Ge({position:"relative",cursor:"default",width:S,height:N},_)},R,{ref:function(U){y.container=U}}),ce.createElement(TC,fh({},D,{width:S,height:N,title:T,desc:A,style:VOe}),this.renderClipPath(),uD(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(w.Component);Lt(v,"displayName",r),Lt(v,"defaultProps",Ge({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Lt(v,"getDerivedStateFromProps",function(p,x){var b=p.dataKey,y=p.data,j=p.children,E=p.width,C=p.height,S=p.layout,N=p.stackOffset,_=p.margin,I=x.dataStartIndex,T=x.dataEndIndex;if(x.updateId===void 0){var A=J6(p);return Ge(Ge(Ge({},A),{},{updateId:0},m(Ge(Ge({props:p},A),{},{updateId:0}),x)),{},{prevDataKey:b,prevData:y,prevWidth:E,prevHeight:C,prevLayout:S,prevStackOffset:N,prevMargin:_,prevChildren:j})}if(b!==x.prevDataKey||y!==x.prevData||E!==x.prevWidth||C!==x.prevHeight||S!==x.prevLayout||N!==x.prevStackOffset||!Nh(_,x.prevMargin)){var O=J6(p),D={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},$=Ge(Ge({},Q6(x,y,S)),{},{updateId:x.updateId+1}),M=Ge(Ge(Ge({},O),D),$);return Ge(Ge(Ge({},M),m(Ge({props:p},M),x)),{},{prevDataKey:b,prevData:y,prevWidth:E,prevHeight:C,prevLayout:S,prevStackOffset:N,prevMargin:_,prevChildren:j})}if(!EC(j,x.prevChildren)){var R,B,U,W,q=Ra(j,nm),L=q&&(R=(B=q.props)===null||B===void 0?void 0:B.startIndex)!==null&&R!==void 0?R:I,V=q&&(U=(W=q.props)===null||W===void 0?void 0:W.endIndex)!==null&&U!==void 0?U:T,G=L!==I||V!==T,Z=!rr(y),te=Z&&!G?x.updateId:x.updateId+1;return Ge(Ge({updateId:te},m(Ge(Ge({props:p},x),{},{updateId:te,dataStartIndex:L,dataEndIndex:V}),x)),{},{prevChildren:j,dataStartIndex:L,dataEndIndex:V})}return null}),Lt(v,"renderActiveDot",function(p,x,b){var y;return w.isValidElement(p)?y=w.cloneElement(p,x):Zt(p)?y=p(x):y=ce.createElement(Cw,x),ce.createElement(Yr,{className:"recharts-active-dot",key:b},y)});var g=w.forwardRef(function(x,b){return ce.createElement(v,fh({},x,{ref:b}))});return g.displayName=v.displayName,g},ZOe=j3({chartName:"LineChart",GraphicalChild:Cx,axisComponents:[{axisType:"xAxis",AxisComp:Qo},{axisType:"yAxis",AxisComp:Jo}],formatAxisMap:u3}),mq=j3({chartName:"BarChart",GraphicalChild:Td,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Qo},{axisType:"yAxis",AxisComp:Jo}],formatAxisMap:u3}),pq=j3({chartName:"AreaChart",GraphicalChild:nc,axisComponents:[{axisType:"xAxis",AxisComp:Qo},{axisType:"yAxis",AxisComp:Jo}],formatAxisMap:u3});const eR={totalApiCalls:123456,activeUsers:85,storageUsedGB:12.5,emailsSent:5678,smsSent:3456,modulesEnabled:10,dailyApiCalls:[{date:"2024-06-20",calls:1200},{date:"2024-06-21",calls:1500},{date:"2024-06-22",calls:1300},{date:"2024-06-23",calls:1800},{date:"2024-06-24",calls:1600},{date:"2024-06-25",calls:2e3},{date:"2024-06-26",calls:1900}],moduleUsage:[{name:"CRM & Prospecting",usage:45e3},{name:"Inventory Management",usage:3e4},{name:"Quote Builder",usage:15e3},{name:"Service Operations",usage:1e4},{name:"Delivery Tracker",usage:5e3}]};function eLe(){const{toast:e}=At(),[t,r]=w.useState(eR),[s,a]=w.useState("7d"),[i,o]=w.useState(!1),l=async()=>{o(!0);try{await new Promise(d=>setTimeout(d,1500)),r(eR),e({title:"Usage Stats Refreshed",description:"Latest usage data has been loaded."})}catch{e({title:"Error",description:"Failed to refresh usage stats.",variant:"destructive"})}finally{o(!1)}},c=()=>{e({title:"Export Initiated",description:"Usage data is being prepared for download."})};return n.jsx("div",{className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(zn,{className:"h-5 w-5 mr-2 text-primary"}),"Platform Usage Statistics"]}),n.jsx(Fe,{children:"Monitor key performance indicators and usage trends"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:l,disabled:i,children:[i?n.jsx($h,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx($h,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:c,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsxs(fe,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:"Total API Calls"}),n.jsx(ko,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.totalApiCalls.toLocaleString()}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:"Active Users"}),n.jsx(Ln,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.activeUsers}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently logged in"})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:"Storage Used"}),n.jsx(xM,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[t.storageUsedGB," GB"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total across all tenants"})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:"Emails Sent"}),n.jsx(Qr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.emailsSent.toLocaleString()}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Daily API Calls"}),n.jsx(Fe,{children:"API call volume over time"})]}),n.jsx(fe,{className:"h-64",children:n.jsx(Sv,{width:"100%",height:"100%",children:n.jsxs(pq,{data:t.dailyApiCalls,children:[n.jsx(Qo,{dataKey:"date",tick:{fontSize:10}}),n.jsx(Jo,{tick:{fontSize:10}}),n.jsx(FA,{strokeDasharray:"3 3"}),n.jsx(ma,{}),n.jsx(nc,{type:"monotone",dataKey:"calls",stroke:"#8884d8",fill:"#8884d8"})]})})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Module Usage"}),n.jsx(Fe,{children:"API calls by module"})]}),n.jsx(fe,{className:"h-64",children:n.jsx(Sv,{width:"100%",height:"100%",children:n.jsxs(mq,{data:t.moduleUsage,layout:"vertical",children:[n.jsx(Qo,{type:"number",tick:{fontSize:10}}),n.jsx(Jo,{type:"category",dataKey:"name",tick:{fontSize:10},width:120}),n.jsx(ma,{}),n.jsx(Td,{dataKey:"usage",fill:"#82ca9d"})]})})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Usage Trends"}),n.jsx(Fe,{children:"Historical data and forecasts"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(ae,{htmlFor:"timeframe",children:"Timeframe:"}),n.jsxs(Ve,{value:s,onValueChange:a,children:[n.jsx(ze,{className:"w-[120px]",children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"7d",children:"Last 7 Days"}),n.jsx(K,{value:"30d",children:"Last 30 Days"}),n.jsx(K,{value:"90d",children:"Last 90 Days"}),n.jsx(K,{value:"1y",children:"Last Year"})]})]})]}),n.jsx("div",{className:"h-64",children:n.jsx(Sv,{width:"100%",height:"100%",children:n.jsxs(ZOe,{data:t.dailyApiCalls,margin:{top:5,right:30,left:20,bottom:5},children:[n.jsx(Qo,{dataKey:"date",tick:{fontSize:10}}),n.jsx(Jo,{tick:{fontSize:10}}),n.jsx(FA,{strokeDasharray:"3 3"}),n.jsx(ma,{}),n.jsx(Cx,{type:"monotone",dataKey:"calls",stroke:"#8884d8",activeDot:{r:8}})]})})})]})]})]})]})})}const tR=[{id:"1",timestamp:new Date("2024-06-27T10:00:00Z"),actor:"admin@renterinsight.com",action:"tenant_created",target:"Demo RV Dealership",status:"success",details:"New tenant organization created",type:"tenant"},{id:"2",timestamp:new Date("2024-06-27T10:05:00Z"),actor:"admin@renterinsight.com",action:"api_token_generated",target:"Production API Key",status:"success",details:"New API token generated for production environment",type:"api_token"},{id:"3",timestamp:new Date("2024-06-27T10:10:00Z"),actor:"manager@demorv.com",action:"module_disabled",target:"Commission Engine",status:"success",details:"Module disabled by tenant manager",type:"module"},{id:"4",timestamp:new Date("2024-06-27T10:15:00Z"),actor:"system",action:"email_sent",target:"john.doe@example.com",status:"success",details:"Welcome email sent to new lead",type:"email"},{id:"5",timestamp:new Date("2024-06-27T10:20:00Z"),actor:"system",action:"sms_failed",target:"+15551234567",status:"failure",details:"SMS delivery failed due to invalid number",type:"sms"},{id:"6",timestamp:new Date("2024-06-27T10:25:00Z"),actor:"admin@renterinsight.com",action:"user_login",target:"admin@renterinsight.com",status:"success",details:"User logged in",type:"user"},{id:"7",timestamp:new Date("2024-06-27T10:30:00Z"),actor:"system",action:"database_backup",target:"daily_backup_20240627",status:"success",details:"Daily database backup completed",type:"database"},{id:"8",timestamp:new Date("2024-06-27T10:35:00Z"),actor:"admin@renterinsight.com",action:"settings_updated",target:"Tenant Settings",status:"success",details:"Tenant branding settings updated",type:"settings"}];function tLe(){const[e,t]=w.useState(tR),[r,s]=w.useState(""),[a,i]=w.useState("all"),[o,l]=w.useState("all"),c=v=>{switch(v){case"tenant_created":case"tenant_updated":case"tenant_deleted":return n.jsx(Zv,{className:"h-4 w-4"});case"api_token_generated":case"api_token_revoked":return n.jsx(JY,{className:"h-4 w-4"});case"module_enabled":case"module_disabled":return n.jsx(tg,{className:"h-4 w-4"});case"email_sent":case"email_failed":return n.jsx(Qr,{className:"h-4 w-4"});case"sms_sent":case"sms_failed":return n.jsx(ln,{className:"h-4 w-4"});case"user_login":case"user_logout":case"user_role_changed":return n.jsx(fs,{className:"h-4 w-4"});case"database_backup":case"database_restore":return n.jsx(xM,{className:"h-4 w-4"});case"settings_updated":return n.jsx(tg,{className:"h-4 w-4"});case"permission_changed":return n.jsx(uj,{className:"h-4 w-4"});case"system_error":return n.jsx(ro,{className:"h-4 w-4"});case"system_event":return n.jsx(sr,{className:"h-4 w-4"});default:return n.jsx(cs,{className:"h-4 w-4"})}},d=v=>{switch(v){case"success":return"bg-green-50 text-green-700 border-green-200";case"failure":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=v=>{switch(v){case"tenant":return"bg-blue-50 text-blue-700 border-blue-200";case"api_token":return"bg-purple-50 text-purple-700 border-purple-200";case"module":return"bg-orange-50 text-orange-700 border-orange-200";case"email":case"sms":return"bg-green-50 text-green-700 border-green-200";case"user":return"bg-indigo-50 text-indigo-700 border-indigo-200";case"database":return"bg-teal-50 text-teal-700 border-teal-200";case"settings":return"bg-pink-50 text-pink-700 border-pink-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=e.filter(v=>{const g=v.actor.toLowerCase().includes(r.toLowerCase())||v.target.toLowerCase().includes(r.toLowerCase())||v.details.toLowerCase().includes(r.toLowerCase()),p=a==="all"||v.type===a,x=o==="all"||v.status===o;return g&&p&&x}),h=()=>{t(tR),s(""),i("all"),l("all"),console.log("Refreshing audit logs...")},m=()=>{console.log("Exporting audit logs...")};return n.jsx("div",{className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(A_,{className:"h-5 w-5 mr-2 text-primary"}),"Audit Logs"]}),n.jsx(Fe,{children:"View system audit logs and activity"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:h,children:[n.jsx($h,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:m,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsxs(fe,{children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{placeholder:"Search logs...",value:r,onChange:v=>s(v.target.value),className:"pl-10"})]}),n.jsxs(Ve,{value:a,onValueChange:i,children:[n.jsx(ze,{className:"w-[180px]",children:n.jsx(qe,{placeholder:"Filter by Type"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Types"}),n.jsx(K,{value:"tenant",children:"Tenant"}),n.jsx(K,{value:"user",children:"User"}),n.jsx(K,{value:"api_token",children:"API Token"}),n.jsx(K,{value:"module",children:"Module"}),n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"sms",children:"SMS"}),n.jsx(K,{value:"database",children:"Database"}),n.jsx(K,{value:"settings",children:"Settings"})]})]}),n.jsxs(Ve,{value:o,onValueChange:l,children:[n.jsx(ze,{className:"w-[180px]",children:n.jsx(qe,{placeholder:"Filter by Status"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"all",children:"All Statuses"}),n.jsx(K,{value:"success",children:"Success"}),n.jsx(K,{value:"failure",children:"Failure"})]})]})]}),n.jsx("div",{className:"space-y-4",children:u.length>0?u.map(v=>{const g=c(v.action);return n.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[n.jsx("div",{className:He("flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",d(v.status).replace("text-","bg-").replace("border-","")),children:g}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-semibold",children:v.action.replace(/_/g," ").toUpperCase()}),n.jsx(Re,{className:He("text-xs",d(v.status)),children:v.status.toUpperCase()}),n.jsx(Re,{className:He("text-xs",f(v.type)),children:v.type.toUpperCase()})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:ct(v.timestamp)})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[n.jsx("span",{className:"font-medium",children:v.actor})," performed action on ",n.jsx("span",{className:"font-medium",children:v.target})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:v.details})]})]},v.id)}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(A_,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No audit logs found"}),n.jsx("p",{className:"text-sm",children:"Adjust your filters or refresh the logs"})]})})]})]})})}function rLe({onSave:e,onCancel:t}){const{toast:r}=At(),[s,a]=w.useState(!1),[i,o]=w.useState({name:"",domain:"",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},isActive:!0}),l=async c=>{if(c.preventDefault(),!i.name||!i.domain){r({title:"Validation Error",description:"Tenant name and domain are required",variant:"destructive"});return}a(!0);try{await e(i),r({title:"Success",description:"Tenant created successfully"})}catch{r({title:"Error",description:"Failed to create tenant",variant:"destructive"})}finally{a(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Zv,{className:"h-5 w-5 mr-2 text-primary"}),"Add New Tenant"]}),n.jsx(Fe,{children:"Create a new tenant organization"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:l,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Tenant Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Tenant Name *"}),n.jsx(Pe,{id:"name",value:i.name,onChange:c=>o(d=>({...d,name:c.target.value})),placeholder:"e.g., Sunshine RV Dealership"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"domain",children:"Domain *"}),n.jsx(Pe,{id:"domain",value:i.domain,onChange:c=>o(d=>({...d,domain:c.target.value})),placeholder:"e.g., sunshine.renterinsight.com"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used for tenant-specific access"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"timezone",children:"Timezone"}),n.jsxs(Ve,{value:i.settings.timezone,onValueChange:c=>o(d=>({...d,settings:{...d.settings,timezone:c}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"America/New_York",children:"Eastern Time (ET)"}),n.jsx(K,{value:"America/Chicago",children:"Central Time (CT)"}),n.jsx(K,{value:"America/Denver",children:"Mountain Time (MT)"}),n.jsx(K,{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"currency",children:"Currency"}),n.jsxs(Ve,{value:i.settings.currency,onValueChange:c=>o(d=>({...d,settings:{...d.settings,currency:c}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"USD",children:"US Dollar (USD)"}),n.jsx(K,{value:"CAD",children:"Canadian Dollar (CAD)"}),n.jsx(K,{value:"EUR",children:"Euro (EUR)"}),n.jsx(K,{value:"GBP",children:"British Pound (GBP)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dateFormat",children:"Date Format"}),n.jsxs(Ve,{value:i.settings.dateFormat,onValueChange:c=>o(d=>({...d,settings:{...d.settings,dateFormat:c}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"MM/dd/yyyy",children:"MM/DD/YYYY"}),n.jsx(K,{value:"dd/MM/yyyy",children:"DD/MM/YYYY"}),n.jsx(K,{value:"yyyy-MM-dd",children:"YYYY-MM-DD"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(i.settings.features).map(([c,d])=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:`feature-${c}`,checked:d,onCheckedChange:f=>o(u=>({...u,settings:{...u.settings,features:{...u.settings.features,[c]:!!f}}}))}),n.jsx(ae,{htmlFor:`feature-${c}`,className:"capitalize",children:c==="crm"?"CRM & Prospecting":c==="invoices"?"Invoice & Payments":c})]},c))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Branding"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"primaryColor",children:"Primary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"primaryColor",value:i.branding.primaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,primaryColor:c.target.value}})),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:i.branding.primaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,primaryColor:c.target.value}})),className:"shadow-sm"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"secondaryColor",children:"Secondary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"secondaryColor",value:i.branding.secondaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,secondaryColor:c.target.value}})),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:i.branding.secondaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,secondaryColor:c.target.value}})),className:"shadow-sm"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"fontFamily",children:"Font Family"}),n.jsxs(Ve,{value:i.branding.fontFamily,onValueChange:c=>o(d=>({...d,branding:{...d.branding,fontFamily:c}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"Inter",children:"Inter"}),n.jsx(K,{value:"Roboto",children:"Roboto"}),n.jsx(K,{value:"Open Sans",children:"Open Sans"}),n.jsx(K,{value:"Montserrat",children:"Montserrat"})]})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isActive",checked:i.isActive,onCheckedChange:c=>o(d=>({...d,isActive:!!c}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active tenant"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:t,disabled:s,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Create Tenant"]})})]})]})})]})})}function nLe({tenantId:e,user:t,onSave:r,onCancel:s}){const{toast:a}=At(),[i,o]=w.useState(!1),[l,c]=w.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",role:(t==null?void 0:t.role)||eo.USER,isActive:(t==null?void 0:t.is_active)!==!1,sendInvite:!t}),d=async f=>{if(f.preventDefault(),!l.name||!l.email){a({title:"Validation Error",description:"Name and email are required",variant:"destructive"});return}o(!0);try{const u={id:t==null?void 0:t.id,...l,tenantId:e,createdAt:(t==null?void 0:t.created_at)||new Date};await r(u),a({title:"Success",description:`User ${t?"updated":"added"} successfully`})}catch{a({title:"Error",description:`Failed to ${t?"update":"add"} user`,variant:"destructive"})}finally{o(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(fs,{className:"h-5 w-5 mr-2 text-primary"}),t?"Edit User":"Add User"]}),n.jsx(Fe,{children:t?"Update user details":"Add a new user to this tenant"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Full Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(fs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"name",value:l.name,onChange:f=>c(u=>({...u,name:f.target.value})),placeholder:"John Smith",className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"email",children:"Email Address *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Qr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"email",type:"email",value:l.email,onChange:f=>c(u=>({...u,email:f.target.value})),placeholder:"john.smith@example.com",className:"pl-10",disabled:!!t})]}),t&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed for existing users"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"role",children:"Role"}),n.jsxs("div",{className:"relative",children:[n.jsx(uj,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsxs(Ve,{value:l.role,onValueChange:f=>c(u=>({...u,role:f})),children:[n.jsx(ze,{className:"pl-10",children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:eo.ADMIN,children:"Admin"}),n.jsx(K,{value:eo.MANAGER,children:"Manager"}),n.jsx(K,{value:eo.SALES,children:"Sales"}),n.jsx(K,{value:eo.SERVICE,children:"Service"}),n.jsx(K,{value:eo.USER,children:"User"})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isActive",checked:l.isActive,onCheckedChange:f=>c(u=>({...u,isActive:!!f}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active user"})]}),!t&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"sendInvite",checked:l.sendInvite,onCheckedChange:f=>c(u=>({...u,sendInvite:!!f}))}),n.jsx(ae,{htmlFor:"sendInvite",children:"Send invitation email"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:s,disabled:i,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),t?"Update User":"Add User"]})})]})]})})]})})}const sLe=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>md(()=>Promise.resolve().then(()=>Gm),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class w3 extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class aLe extends w3{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class iLe extends w3{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class oLe extends w3{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var QA;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(QA||(QA={}));var lLe=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class cLe{constructor(t,{headers:r={},customFetch:s,region:a=QA.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=sLe(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return lLe(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(v=>{throw new aLe(v)}),u=f.headers.get("x-relay-error");if(u&&u==="true")throw new iLe(f);if(!f.ok)throw new oLe(f);let h=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield f.json():h==="application/octet-stream"?m=yield f.blob():h==="text/event-stream"?m=f:h==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null}}catch(a){return{data:null,error:a}}})}}var ga={},N3={},Ow={},Ax={},Lw={},Rw={},dLe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pm=dLe();const uLe=pm.fetch,vq=pm.fetch.bind(pm),gq=pm.Headers,fLe=pm.Request,hLe=pm.Response,Gm=Object.freeze(Object.defineProperty({__proto__:null,Headers:gq,Request:fLe,Response:hLe,default:vq,fetch:uLe},Symbol.toStringTag,{value:"Module"})),mLe=bR(Gm);var $w={};Object.defineProperty($w,"__esModule",{value:!0});let pLe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};$w.default=pLe;var xq=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rw,"__esModule",{value:!0});const vLe=xq(mLe),gLe=xq($w);let xLe=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=vLe.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,f=null,u=null,h=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=x:f=JSON.parse(x))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&p&&p.length>1&&(u=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,u=null,h=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(f=[],d=null,h=200,m="OK")}catch{i.status===404&&g===""?(h=204,m="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,h=200,m="OK"),d&&this.shouldThrowOnError)throw new gLe.default(d)}return{error:d,data:f,count:u,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Rw.default=xLe;var yLe=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lw,"__esModule",{value:!0});const bLe=yLe(Rw);let jLe=class extends bLe.default{select(t){let r=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Lw.default=jLe;var wLe=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ax,"__esModule",{value:!0});const NLe=wLe(Lw);let SLe=class extends NLe.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};Ax.default=SLe;var CLe=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ow,"__esModule",{value:!0});const Zp=CLe(Ax);let ALe=class{constructor(t,{headers:r={},schema:s,fetch:a}){this.url=t,this.headers=r,this.schema=s,this.fetch=a}select(t,{head:r=!1,count:s}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Zp.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:s=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Zp.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new Zp.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const s="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Zp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Zp.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ow.default=ALe;var Fw={},Mw={};Object.defineProperty(Mw,"__esModule",{value:!0});Mw.version=void 0;Mw.version="0.0.0-automated";Object.defineProperty(Fw,"__esModule",{value:!0});Fw.DEFAULT_HEADERS=void 0;const ELe=Mw;Fw.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ELe.version}`};var yq=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N3,"__esModule",{value:!0});const PLe=yq(Ow),TLe=yq(Ax),_Le=Fw;let ILe=class bq{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},_Le.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new PLe.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new bq(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;s||a?(o=s?"HEAD":"GET",Object.entries(r).filter(([f,u])=>u!==void 0).map(([f,u])=>[f,Array.isArray(u)?`{${u.join(",")}}`:`${u}`]).forEach(([f,u])=>{l.searchParams.append(f,u)})):(o="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new TLe.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};N3.default=ILe;var Km=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ga,"__esModule",{value:!0});ga.PostgrestError=ga.PostgrestBuilder=ga.PostgrestTransformBuilder=ga.PostgrestFilterBuilder=ga.PostgrestQueryBuilder=ga.PostgrestClient=void 0;const jq=Km(N3);ga.PostgrestClient=jq.default;const wq=Km(Ow);ga.PostgrestQueryBuilder=wq.default;const Nq=Km(Ax);ga.PostgrestFilterBuilder=Nq.default;const Sq=Km(Lw);ga.PostgrestTransformBuilder=Sq.default;const Cq=Km(Rw);ga.PostgrestBuilder=Cq.default;const Aq=Km($w);ga.PostgrestError=Aq.default;var kLe=ga.default={PostgrestClient:jq.default,PostgrestQueryBuilder:wq.default,PostgrestFilterBuilder:Nq.default,PostgrestTransformBuilder:Sq.default,PostgrestBuilder:Cq.default,PostgrestError:Aq.default};const{PostgrestClient:DLe,PostgrestQueryBuilder:qRe,PostgrestFilterBuilder:WRe,PostgrestTransformBuilder:HRe,PostgrestBuilder:GRe,PostgrestError:KRe}=kLe;function OLe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const LLe=OLe(),RLe="2.11.15",$Le=`realtime-js/${RLe}`,FLe="1.0.0",Eq=1e4,MLe=1e3;var _v;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_v||(_v={}));var Fs;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Fs||(Fs={}));var Ji;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ji||(Ji={}));var JA;(function(e){e.websocket="websocket"})(JA||(JA={}));var ru;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ru||(ru={}));class BLe{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(t.slice(o,o+a));o=o+a;const c=s.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(s.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Pq{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Wr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Wr||(Wr={}));const rR=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((i,o)=>(i[o]=zLe(o,e,t,a),i),{})},zLe=(e,t,r,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?Tq(i,o):ZA(o)},Tq=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return WLe(t,r)}switch(e){case Wr.bool:return ULe(t);case Wr.float4:case Wr.float8:case Wr.int2:case Wr.int4:case Wr.int8:case Wr.numeric:case Wr.oid:return VLe(t);case Wr.json:case Wr.jsonb:return qLe(t);case Wr.timestamp:return HLe(t);case Wr.abstime:case Wr.date:case Wr.daterange:case Wr.int4range:case Wr.int8range:case Wr.money:case Wr.reltime:case Wr.text:case Wr.time:case Wr.timestamptz:case Wr.timetz:case Wr.tsrange:case Wr.tstzrange:return ZA(t);default:return ZA(t)}},ZA=e=>e,ULe=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},VLe=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},qLe=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},WLe=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Tq(t,l))}return e},HLe=e=>typeof e=="string"?e.replace(" ","T"):e,_q=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class S5{constructor(t,r,s={},a=Eq){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var nR;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(nR||(nR={}));class Iv{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Iv.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Iv.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Iv.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,f)=>{o[d]||(c[d]=f)}),this.map(o,(d,f)=>{const u=i[d];if(u){const h=f.map(p=>p.presence_ref),m=u.map(p=>p.presence_ref),v=f.filter(p=>m.indexOf(p.presence_ref)<0),g=u.filter(p=>h.indexOf(p.presence_ref)<0);v.length>0&&(l[d]=v),g.length>0&&(c[d]=g)}else l[d]=f}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),f.length>0){const u=t[l].map(m=>m.presence_ref),h=f.filter(m=>u.indexOf(m.presence_ref)<0);t[l].unshift(...h)}s(l,f,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const f=c.map(u=>u.presence_ref);d=d.filter(u=>f.indexOf(u.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sR;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(sR||(sR={}));var aR;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(aR||(aR={}));var Sl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Sl||(Sl={}));class S3{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Fs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new S5(this,Ji.join,this.params,this.timeout),this.rejoinTimer=new Pq(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fs.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Fs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ji.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Iv(this),this.broadcastEndpointURL=_q(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Fs.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(f=>t==null?void 0:t(Sl.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Sl.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var u;if(this.socket.setAuth(),f===void 0){t==null||t(Sl.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,v=[];for(let g=0;g<m;g++){const p=h[g],{filter:{event:x,schema:b,table:y,filter:j}}=p,E=f&&f[g];if(E&&E.event===x&&E.schema===b&&E.table===y&&E.filter===j)v.push(Object.assign(Object.assign({},p),{id:E.id}));else{this.unsubscribe(),this.state=Fs.errored,t==null||t(Sl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Sl.SUBSCRIBED);return}}).receive("error",f=>{this.state=Fs.errored,t==null||t(Sl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Sl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this._on(t,r,s)}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Fs.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ji.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new S5(this,Ji.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new S5(this,t,r,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:f}=Ji;if(s&&[l,c,d,f].indexOf(o)>=0&&s!==this._joinRef())return;let h=this._onMessage(o,r,s);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var v,g,p;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((p=(g=m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(m=>m.callback(h,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,g,p,x,b,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,E=(v=m.filter)===null||v===void 0?void 0:v.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const j=(b=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:g,table:p,commit_timestamp:x,type:b,errors:y}=v;h=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:x,eventType:b,new:{},old:{},errors:y}),this._getPayloadRecords(v))}m.callback(h,s)})}_isClosed(){return this.state===Fs.closed}_isJoined(){return this.state===Fs.joined}_isJoining(){return this.state===Fs.joining}_isLeaving(){return this.state===Fs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&S3.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ji.close,{},t)}_onError(t){this._on(Ji.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=rR(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=rR(t.columns,t.old_record)),r}}const iR=()=>{},GLe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KLe{constructor(t,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Eq,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iR,this.ref=0,this.logger=iR,this.conn=null,this.sendBuffer=[],this.serializer=new BLe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>md(()=>Promise.resolve().then(()=>Gm),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${JA.websocket}`,this.httpEndpoint=_q(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pq(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=LLe),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:FLe}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case _v.connecting:return ru.Connecting;case _v.open:return ru.Open;case _v.closing:return ru.Closing;default:return ru.Closed}}isConnected(){return this.connectionState()===ru.Open}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new S3(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:$Le};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Ji.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(MLe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:s,event:a,payload:i,ref:o}=r;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ji.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([GLe],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class C3 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function is(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class YLe extends C3{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class e4 extends C3{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var XLe=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Iq=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>md(()=>Promise.resolve().then(()=>Gm),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},QLe=()=>XLe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield md(()=>Promise.resolve().then(()=>Gm),void 0)).Response:Response}),t4=e=>{if(Array.isArray(e))return e.map(r=>t4(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=t4(s)}),t};var rf=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const C5=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),JLe=(e,t,r)=>rf(void 0,void 0,void 0,function*(){const s=yield QLe();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new YLe(C5(a),e.status||500))}).catch(a=>{t(new e4(C5(a),a))}):t(new e4(C5(e),e))}),ZLe=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),r))};function Ex(e,t,r,s,a,i){return rf(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,ZLe(t,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>JLe(c,l,s))})})}function z1(e,t,r,s){return rf(this,void 0,void 0,function*(){return Ex(e,"GET",t,r,s)})}function _c(e,t,r,s,a){return rf(this,void 0,void 0,function*(){return Ex(e,"POST",t,s,a,r)})}function e6e(e,t,r,s,a){return rf(this,void 0,void 0,function*(){return Ex(e,"PUT",t,s,a,r)})}function t6e(e,t,r,s){return rf(this,void 0,void 0,function*(){return Ex(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function kq(e,t,r,s,a){return rf(this,void 0,void 0,function*(){return Ex(e,"DELETE",t,s,a,r)})}var fa=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const r6e={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class n6e{constructor(t,r={},s,a){this.url=t,this.headers=r,this.bucketId=s,this.fetch=Iq(a)}uploadOrUpdate(t,r,s,a){return fa(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},oR),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),f=this._getFinalPath(d),u=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield u.json();return u.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(is(i))return{data:null,error:i};throw i}})}upload(t,r,s){return fa(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return fa(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:oR.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const u=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),h=yield u.json();return u.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(is(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return fa(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield _c(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new C3("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}update(t,r,s){return fa(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return fa(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(is(a))return{data:null,error:a};throw a}})}copy(t,r,s){return fa(this,void 0,void 0,function*(){try{return{data:{path:(yield _c(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(is(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return fa(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield _c(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(is(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return fa(this,void 0,void 0,function*(){try{const a=yield _c(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(is(a))return{data:null,error:a};throw a}})}download(t,r){return fa(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield z1(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(is(l))return{data:null,error:l};throw l}})}info(t){return fa(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield z1(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:t4(s),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}exists(t){return fa(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield t6e(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(is(s)&&s instanceof e4){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return fa(this,void 0,void 0,function*(){try{return{data:yield kq(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}list(t,r,s){return fa(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},r6e),r),{prefix:t||""});return{data:yield _c(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(is(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const s6e="2.7.1",a6e={"X-Client-Info":`storage-js/${s6e}`};var qf=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class i6e{constructor(t,r={},s){this.url=t,this.headers=Object.assign(Object.assign({},a6e),r),this.fetch=Iq(s)}listBuckets(){return qf(this,void 0,void 0,function*(){try{return{data:yield z1(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(is(t))return{data:null,error:t};throw t}})}getBucket(t){return qf(this,void 0,void 0,function*(){try{return{data:yield z1(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return qf(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return qf(this,void 0,void 0,function*(){try{return{data:yield e6e(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}emptyBucket(t){return qf(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}deleteBucket(t){return qf(this,void 0,void 0,function*(){try{return{data:yield kq(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}}class o6e extends i6e{constructor(t,r={},s){super(t,r,s)}from(t){return new n6e(this.url,this.headers,t,this.fetch)}}const l6e="2.50.2";let iv="";typeof Deno<"u"?iv="deno":typeof document<"u"?iv="web":typeof navigator<"u"&&navigator.product==="ReactNative"?iv="react-native":iv="node";const c6e={"X-Client-Info":`supabase-js-${iv}/${l6e}`},d6e={headers:c6e},u6e={schema:"public"},f6e={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h6e={};var m6e=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const p6e=e=>{let t;return e?t=e:typeof fetch>"u"?t=vq:t=fetch,(...r)=>t(...r)},v6e=()=>typeof Headers>"u"?gq:Headers,g6e=(e,t,r)=>{const s=p6e(r),a=v6e();return(i,o)=>m6e(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:d}))})};var x6e=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};function y6e(e){return e.endsWith("/")?e:e+"/"}function b6e(e,t){var r,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:f,global:u}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},f),o),global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>x6e(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Dq="2.70.0",Qf=30*1e3,r4=3,A5=r4*Qf,j6e="http://localhost:9999",w6e="supabase.auth.token",N6e={"X-Client-Info":`gotrue-js/${Dq}`},n4="X-Supabase-Api-Version",Oq={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},S6e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C6e=6e5;class A3 extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Jt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class A6e extends A3{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function E6e(e){return Jt(e)&&e.name==="AuthApiError"}class Lq extends A3{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _d extends A3{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class Ac extends _d{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function P6e(e){return Jt(e)&&e.name==="AuthSessionMissingError"}class xy extends _d{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yy extends _d{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class by extends _d{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function T6e(e){return Jt(e)&&e.name==="AuthImplicitGrantRedirectError"}class lR extends _d{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class s4 extends _d{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function E5(e){return Jt(e)&&e.name==="AuthRetryableFetchError"}class cR extends _d{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class kv extends _d{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const U1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dR=` 	
\r=`.split(""),_6e=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dR.length;t+=1)e[dR[t].charCodeAt(0)]=-2;for(let t=0;t<U1.length;t+=1)e[U1[t].charCodeAt(0)]=t;return e})();function uR(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(U1[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(U1[s]),t.queuedBits-=6}}function Rq(e,t,r){const s=_6e[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fR(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{D6e(o,s,r)};for(let o=0;o<e.length;o+=1)Rq(e.charCodeAt(o),a,i);return t.join("")}function I6e(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function k6e(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}I6e(s,t)}}function D6e(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function O6e(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Rq(e.charCodeAt(a),r,s);return new Uint8Array(t)}function L6e(e){const t=[];return k6e(e,r=>t.push(r)),new Uint8Array(t)}function R6e(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>uR(a,r,s)),uR(null,r,s),t.join("")}function $6e(e){return Math.round(Date.now()/1e3)+e}function F6e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Wi=()=>typeof window<"u"&&typeof document<"u",Wd={tested:!1,writable:!1},Dv=()=>{if(!Wi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wd.tested)return Wd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wd.tested=!0,Wd.writable=!0}catch{Wd.tested=!0,Wd.writable=!1}return Wd.writable};function M6e(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const $q=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>md(()=>Promise.resolve().then(()=>Gm),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},B6e=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fq=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},jy=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},wy=async(e,t)=>{await e.removeItem(t)};class Bw{constructor(){this.promise=new Bw.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bw.promiseConstructor=Promise;function P5(e){const t=e.split(".");if(t.length!==3)throw new kv("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!S6e.test(t[s]))throw new kv("JWT not in base64url format");return{header:JSON.parse(fR(t[0])),payload:JSON.parse(fR(t[1])),signature:O6e(t[2]),raw:{header:t[0],payload:t[1]}}}async function z6e(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function U6e(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function V6e(e){return("0"+e.toString(16)).substr(-2)}function q6e(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,V6e).join("")}async function W6e(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function H6e(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await W6e(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wf(e,t,r=!1){const s=q6e();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Fq(e,`${t}-code-verifier`,a);const i=await H6e(s);return[i,s===i?"plain":"s256"]}const G6e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function K6e(e){const t=e.headers.get(n4);if(!t||!t.match(G6e))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Y6e(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function X6e(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Q6e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hf(e){if(!Q6e.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var J6e=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};const Zd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Z6e=[502,503,504];async function hR(e){var t;if(!B6e(e))throw new s4(Zd(e),0);if(Z6e.includes(e.status))throw new s4(Zd(e),e.status);let r;try{r=await e.json()}catch(i){throw new Lq(Zd(i),i)}let s;const a=K6e(e);if(a&&a.getTime()>=Oq["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new cR(Zd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Ac}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new cR(Zd(r),e.status,r.weak_password.reasons);throw new A6e(Zd(r),e.status||500,s)}const eRe=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function nr(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[n4]||(i[n4]=Oq["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await tRe(e,t,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function tRe(e,t,r,s,a,i){const o=eRe(t,s,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new s4(Zd(c),0)}if(l.ok||await hR(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await hR(c)}}function jl(e){var t;let r=null;aRe(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=$6e(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function mR(e){const t=jl(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function rRe(e){return{data:e,error:null}}function nRe(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=J6e(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function sRe(e){return e}function aRe(e){return e.access_token&&e.refresh_token&&e.expires_in}const T5=["global","local","others"];var iRe=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class oRe{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=$q(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=T5[0]){if(T5.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${T5.join(", ")}`);try{return await nr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await nr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rc})}catch(s){if(Jt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=iRe(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await nr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:nRe,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Jt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await nr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rc})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},f=await nr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:sRe});if(f.error)throw f.error;const u=await f.json(),h=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(v.split(";")[1].split("=")[1]);d[`${p}Page`]=g}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Jt(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Hf(t);try{return await nr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rc})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Hf(t);try{return await nr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Rc})}catch(s){if(Jt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Hf(t);try{return await nr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rc})}catch(s){if(Jt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Hf(t.userId);try{const{data:r,error:s}=await nr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Hf(t.userId),Hf(t.id);try{return{data:await nr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}}}const lRe={getItem:e=>Dv()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Dv()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Dv()&&globalThis.localStorage.removeItem(e)}};function pR(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function cRe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gf={debug:!!(globalThis&&Dv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mq extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class dRe extends Mq{}async function uRe(e,t,r){Gf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Gf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Gf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Gf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Gf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new dRe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Gf.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}cRe();const fRe={url:j6e,storageKey:w6e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:N6e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function vR(e,t,r){return await r()}class Gg{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gg.nextInstanceID,Gg.nextInstanceID+=1,this.instanceID>0&&Wi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},fRe),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new oRe({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=$q(a.fetch),this.lock=a.lock||vR,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Wi()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=uRe:this.lock=vR,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Dv()?this.storage=lRe:(this.memoryStorage={},this.storage=pR(this.memoryStorage)):(this.memoryStorage={},this.storage=pR(this.memoryStorage)),Wi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dq}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=M6e(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Wi()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),T6e(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Jt(r)?{error:r}:{error:new Lq("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const i=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:jl}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Jt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,s,a;try{let i;if("email"in t){const{email:f,password:u,options:h}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Wf(this.storage,this.storageKey)),i=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},xform:jl})}else if("phone"in t){const{phone:f,password:u,options:h}=t;i=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:u,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:jl})}else throw new yy("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Jt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mR})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mR})}else throw new yy("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new xy}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Jt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,a,i,o,l,c,d,f,u,h,m;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:p,wallet:x,statement:b,options:y}=t;let j;if(Wi())if(typeof x=="object")j=x;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))j=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const E=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const C=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),b?{statement:b}:null));let S;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")S=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)S=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(a=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((d=y==null?void 0:y.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((u=(f=y==null?void 0:y.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||u===void 0)&&u.length?["Resources",...y.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const C=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:p,error:x}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:R6e(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:jl});if(x)throw x;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new xy}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:x})}catch(p){if(Jt(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const r=await jy(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:i,error:o}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:jl});if(await wy(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new xy}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Jt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=t,l=await nr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:jl}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new xy}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(Jt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Wf(this.storage,this.storageKey));const{error:u}=await nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:f}=await nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new yy("You must provide either an email or phone number.")}catch(l){if(Jt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,s;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await nr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:jl});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Jt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,s,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Wf(this.storage,this.storageKey)),await nr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:rRe})}catch(i){if(Jt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Ac;const{error:a}=await nr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Jt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:o}=await nr(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await nr(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new yy("You must provide either an email or phone number and a type")}catch(r){if(Jt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await jy(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<A5:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,f)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rc}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ac}:await nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Rc})})}catch(r){if(Jt(r))return P6e(r)&&(await this._removeSession(),await wy(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Ac;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Wf(this.storage,this.storageKey));const{data:d,error:f}=await nr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Rc});if(f)throw f;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Jt(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ac;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=P5(t.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Jt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Ac;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Jt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Wi())throw new by("No browser detected.");if(t.error||t.error_description||t.error_code)throw new by(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new lR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new by("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new lR("No code detected.");const{data:b,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new by("No session defined in URL");const f=Math.round(Date.now()/1e3),u=parseInt(l);let h=f+u;c&&(h=parseInt(c));const m=h-f;m*1e3<=Qf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${u}s`);const v=h-u;f-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,f):f-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,f);const{data:g,error:p}=await this._getUser(i);if(p)throw p;const x={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:u,expires_at:h,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(s){if(Jt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await jy(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{error:i};const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(E6e(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await wy(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=F6e(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Wf(this.storage,this.storageKey,!0));try{return await nr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Jt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,f;const{data:u,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await nr(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return Wi()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Jt(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await nr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await U6e(async a=>(a>0&&await z6e(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await nr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:jl})),(a,i)=>{const o=200*Math.pow(2,a);return i&&E5(i)&&Date.now()+o-s<Qf})}catch(s){if(this._debug(r,"error",s),Jt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Wi()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await jy(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<A5;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${A5}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),E5(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Ac;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Bw;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ac;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Jt(i)){const o={session:null,error:i};return E5(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Fq(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await wy(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Wi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qf);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Qf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Qf}ms, refresh threshold is ${r4} ticks`),a<=r4&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Mq)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Wf(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await nr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await nr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await nr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await nr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],a=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=P5(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(o=>o.kid===t);if(s||(s=this.jwks.keys.find(o=>o.kid===t),s&&this.jwks_cached_at+C6e>Date.now()))return s;const{data:a,error:i}=await nr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new kv("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),s=a.keys.find(o=>o.kid===t),!s)throw new kv("No matching signing key found in JWKS");return s}async getClaims(t,r={keys:[]}){try{let s=t;if(!s){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};s=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=P5(s);if(Y6e(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=X6e(a.alg),f=await this.fetchJwk(a.kid,r),u=await crypto.subtle.importKey("jwk",f,d,!0,["verify"]);if(!await crypto.subtle.verify(d,u,o,L6e(`${l}.${c}`)))throw new kv("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}}}Gg.nextInstanceID=0;const hRe=Gg;class mRe extends hRe{constructor(t){super(t)}}var pRe=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class vRe{constructor(t,r,s){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=y6e(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:u6e,realtime:h6e,auth:Object.assign(Object.assign({},f6e),{storageKey:d}),global:d6e},u=b6e(s??{},f);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=g6e(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new DLe(new URL("rest/v1",c).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new cLe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new o6e(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return pRe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,f){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mRe({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),d),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,flowType:o,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new KLe(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gRe=(e,t,r)=>new vRe(e,t,r),xRe=()=>gRe("https://stlqdeipenmafvrmxwdb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN0bHFkZWlwZW5tYWZ2cm14d2RiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3OTg1NjMsImV4cCI6MjA2NjM3NDU2M30.t3RCXpwrefZoEgBsbVqcnx9rXJYfCjOTbUoaLzTaJ8k");function yRe({tenant:e,onSave:t,onClose:r}){var N;const{toast:s}=At(),[a,i]=w.useState(!1),[o,l]=w.useState("general"),[c,d]=w.useState([]),[f,u]=w.useState(!1),[h,m]=w.useState(!1),[v,g]=w.useState(null),[p,x]=w.useState({...e,settings:{...e.settings,features:((N=e.settings)==null?void 0:N.features)||{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},branding:e.branding||{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"}}),b=async _=>{if(_.preventDefault(),!p.name||!p.domain){s({title:"Validation Error",description:"Tenant name and domain are required",variant:"destructive"});return}i(!0);try{await t(e.id,{...p,status:p.isActive?"active":"inactive"}),s({title:"Success",description:"Tenant updated successfully"})}catch{s({title:"Error",description:"Failed to update tenant",variant:"destructive"})}finally{i(!1)}},y=_=>{switch(_){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};w.useEffect(()=>{o==="users"&&j()},[o,e.id]);const j=async()=>{u(!0);try{const _=xRe(),{data:I,error:T}=await _.rpc("get_tenant_users",{tenant_id_param:e.id});if(T)throw T;d(I||[])}catch(_){console.error("Error fetching tenant users:",_),s({title:"Error",description:"Failed to load users for this tenant",variant:"destructive"})}finally{u(!1)}},E=async _=>{try{console.log(v?"Updating user:":"Adding user:",_),v?(d(I=>I.map(T=>T.id===_.id?{...T,..._}:T)),s({title:"User Updated",description:`${_.name} has been updated successfully.`})):(d(I=>[...I,_]),s({title:"User Added",description:`${_.name} has been added successfully.`})),m(!1),g(null)}catch{s({title:v?"Update Error":"Add Error",description:`Failed to ${v?"update":"add"} user`,variant:"destructive"})}},C=_=>{g(_),m(!0)},S=async(_,I)=>{if(window.confirm(`Are you sure you want to delete user ${I}?`))try{console.log("Deleting user:",_),d(T=>T.filter(A=>A.id!==_)),s({title:"User Deleted",description:`${I} has been deleted successfully.`})}catch{s({title:"Delete Error",description:"Failed to delete user",variant:"destructive"})}};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[h&&n.jsx(nLe,{tenantId:e.id,user:v,onSave:E,onCancel:()=>{m(!1),g(null)}}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(je,{className:"text-xl",children:e.name}),n.jsx(Re,{className:He("ri-badge-status",y(e.status)),children:e.status.toUpperCase()})]}),n.jsx(Fe,{children:e.domain})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Bt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{children:[n.jsxs(xr,{value:o,onValueChange:l,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-5",children:[n.jsx(Qe,{value:"general",children:"General"}),n.jsx(Qe,{value:"features",children:"Features"}),n.jsx(Qe,{value:"branding",children:"Branding"}),n.jsx(Qe,{value:"users",children:"Users"}),n.jsx(Qe,{value:"activity",children:"Activity"})]}),n.jsxs(et,{value:"general",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Tenant Name *"}),n.jsx(Pe,{id:"name",value:p.name,onChange:_=>x(I=>({...I,name:_.target.value})),placeholder:"e.g., Sunshine RV Dealership"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"domain",children:"Domain *"}),n.jsx(Pe,{id:"domain",value:p.domain,onChange:_=>x(I=>({...I,domain:_.target.value})),placeholder:"e.g., sunshine.renterinsight.com"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used for tenant-specific access"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"timezone",children:"Timezone"}),n.jsxs(Ve,{value:p.settings.timezone,onValueChange:_=>x(I=>({...I,settings:{...I.settings,timezone:_}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"America/New_York",children:"Eastern Time (ET)"}),n.jsx(K,{value:"America/Chicago",children:"Central Time (CT)"}),n.jsx(K,{value:"America/Denver",children:"Mountain Time (MT)"}),n.jsx(K,{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"currency",children:"Currency"}),n.jsxs(Ve,{value:p.settings.currency,onValueChange:_=>x(I=>({...I,settings:{...I.settings,currency:_}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"USD",children:"US Dollar (USD)"}),n.jsx(K,{value:"CAD",children:"Canadian Dollar (CAD)"}),n.jsx(K,{value:"EUR",children:"Euro (EUR)"}),n.jsx(K,{value:"GBP",children:"British Pound (GBP)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dateFormat",children:"Date Format"}),n.jsxs(Ve,{value:p.settings.dateFormat,onValueChange:_=>x(I=>({...I,settings:{...I.settings,dateFormat:_}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"MM/dd/yyyy",children:"MM/DD/YYYY"}),n.jsx(K,{value:"dd/MM/yyyy",children:"DD/MM/YYYY"}),n.jsx(K,{value:"yyyy-MM-dd",children:"YYYY-MM-DD"})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:"isActive",checked:p.isActive,onCheckedChange:_=>x(I=>({...I,isActive:!!_}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active tenant"})]})]}),n.jsxs(et,{value:"features",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(p.settings.features).map(([_,I])=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vt,{id:`feature-${_}`,checked:I,onCheckedChange:T=>x(A=>({...A,settings:{...A.settings,features:{...A.settings.features,[_]:!!T}}}))}),n.jsx(ae,{htmlFor:`feature-${_}`,className:"capitalize",children:_==="crm"?"CRM & Prospecting":_==="invoices"?"Invoice & Payments":_})]},_))})]}),n.jsxs(et,{value:"branding",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Branding"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"primaryColor",children:"Primary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"primaryColor",value:p.branding.primaryColor,onChange:_=>x(I=>({...I,branding:{...I.branding,primaryColor:_.target.value}})),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:p.branding.primaryColor,onChange:_=>x(I=>({...I,branding:{...I.branding,primaryColor:_.target.value}})),className:"shadow-sm"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"secondaryColor",children:"Secondary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"secondaryColor",value:p.branding.secondaryColor,onChange:_=>x(I=>({...I,branding:{...I.branding,secondaryColor:_.target.value}})),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:p.branding.secondaryColor,onChange:_=>x(I=>({...I,branding:{...I.branding,secondaryColor:_.target.value}})),className:"shadow-sm"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"fontFamily",children:"Font Family"}),n.jsxs(Ve,{value:p.branding.fontFamily,onValueChange:_=>x(I=>({...I,branding:{...I.branding,fontFamily:_}})),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"Inter",children:"Inter"}),n.jsx(K,{value:"Roboto",children:"Roboto"}),n.jsx(K,{value:"Open Sans",children:"Open Sans"}),n.jsx(K,{value:"Montserrat",children:"Montserrat"})]})]})]})]}),n.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),n.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:p.branding.fontFamily},children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Text Preview"}),n.jsx("p",{children:"This is how your text will appear with the selected font."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Color Preview"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:p.branding.primaryColor},children:"Primary"}),n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:p.branding.secondaryColor},children:"Secondary"})]})]})]})]})]}),n.jsxs(et,{value:"users",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Users"}),n.jsxs(J,{size:"sm",onClick:()=>m(!0),children:[n.jsx(Ln,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),f?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),n.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading users..."})]}):c.length>0?n.jsx("div",{className:"space-y-3",children:c.map(_=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:_.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:_.email})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Re,{className:_.is_active?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:_.is_active?"ACTIVE":"INACTIVE"}),n.jsx(Re,{variant:"outline",children:_.role.toUpperCase()}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>C(_),children:[n.jsx(zr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>S(_.id,_.name),children:[n.jsx(Cn,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]},_.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ln,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No users found for this tenant"}),n.jsx("p",{className:"text-sm",children:"Add users to provide access to this tenant"})]})]}),n.jsxs(et,{value:"activity",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Activity Log"}),n.jsxs(J,{variant:"outline",size:"sm",children:[n.jsx(ko,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ko,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No activity recorded yet"}),n.jsx("p",{className:"text-sm",children:"Activity will be logged as users interact with the system"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{onClick:b,disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})]})}const bRe=[{id:"1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",status:"active",users:5,createdAt:new Date("2024-01-01"),lastActivity:new Date("2024-01-20")},{id:"2",name:"Sunshine RV Center",domain:"sunshine.renterinsight.com",status:"active",users:12,createdAt:new Date("2023-12-15"),lastActivity:new Date("2024-01-19")}],Kf={totalTenants:2,activeTenants:2,totalUsers:17,systemUptime:"99.9%",avgResponseTime:"120ms",errorRate:"0.1%"};function gR(){const{hasRole:e}=Nm(),{toast:t}=At(),[r,s]=w.useState(bRe),[a,i]=w.useState(""),[o,l]=w.useState(null),[c,d]=w.useState(!1),[f,u]=w.useState(!1);if(!e(eo.ADMIN))return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx(ue,{className:"w-full max-w-md shadow-sm",children:n.jsxs(be,{className:"text-center",children:[n.jsx(ro,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),n.jsx(je,{children:"Access Denied"}),n.jsx(Fe,{children:"You don't have permission to access the Platform Admin area."})]})})});const h=b=>{switch(b){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},m=r.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())||b.domain.toLowerCase().includes(a.toLowerCase())),v=()=>{d(!0)},g=async b=>{try{const y={id:Math.random().toString(36).substring(2,9),...b,status:b.isActive?"active":"inactive",users:0,createdAt:new Date,lastActivity:new Date};s(j=>[...j,y]),d(!1),t({title:"Tenant Created",description:`${b.name} has been created successfully.`})}catch{t({title:"Error",description:"Failed to create tenant",variant:"destructive"})}},p=b=>{l(b),u(!0)},x=async(b,y)=>{try{const j=r.map(E=>E.id===b?{...E,...y}:E);s(j),u(!1),t({title:"Tenant Updated",description:`${y.name} has been updated successfully.`})}catch{t({title:"Error",description:"Failed to update tenant",variant:"destructive"})}};return n.jsxs("div",{className:"space-y-8",children:[c&&n.jsx(rLe,{onSave:g,onCancel:()=>d(!1)}),f&&o&&n.jsx(yRe,{tenant:o,onSave:x,onClose:()=>{u(!1),l(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Platform Admin"}),n.jsx("p",{className:"ri-page-description",children:"System administration and tenant management"})]}),n.jsxs(J,{className:"shadow-sm",onClick:v,children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Tenant"]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Tenants"}),n.jsx(Zv,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Kf.totalTenants}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"All tenants"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Active Tenants"}),n.jsx(Zv,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Kf.activeTenants}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(ko,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Total Users"}),n.jsx(Ln,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Kf.totalUsers}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Ln,{className:"h-3 w-3 mr-1"}),"All users"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"System Uptime"}),n.jsx(ko,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Kf.systemUptime}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(ko,{className:"h-3 w-3 mr-1"}),"Excellent"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Avg Response"}),n.jsx(ko,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Kf.avgResponseTime}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Fast response"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Error Rate"}),n.jsx(ko,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Kf.errorRate}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(ko,{className:"h-3 w-3 mr-1"}),"Very low"]})]})]})]}),n.jsxs(xr,{defaultValue:"health",className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"health",children:"System Health"}),n.jsx(Qe,{value:"usage",children:"Usage Stats"}),n.jsx(Qe,{value:"logs",children:"Audit Logs"})]}),n.jsx(et,{value:"health",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"System Health"}),n.jsx(Fe,{children:"Real-time system status and health metrics"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Database: Healthy"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"API Services: Operational"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Payment Gateway: Connected"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Email Service: Active"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"File Storage: Available"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Backup System: Running"})]})]})})]})}),n.jsx(et,{value:"usage",children:n.jsx(eLe,{})}),n.jsx(et,{value:"logs",children:n.jsx(tLe,{})})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(ts,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search tenants...",value:a,onChange:b=>i(b.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Tenant Management"}),n.jsx(Fe,{children:"Manage dealership tenants and their configurations"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:m.map(b=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:b.name}),n.jsx(Re,{className:He("ri-badge-status",h(b.status)),children:b.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Domain:"}),n.jsx("span",{className:"ml-1",children:b.domain})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Users:"}),n.jsx("span",{className:"ml-1",children:b.users})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{className:"ml-1",children:b.createdAt.toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Last Activity:"}),n.jsx("span",{className:"ml-1",children:b.lastActivity.toLocaleDateString()})]})]})]})}),n.jsx("div",{className:"ri-action-buttons",children:n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>p(b),children:[n.jsx(uj,{className:"h-3 w-3 mr-1"}),"Manage"]})})]},b.id))})})]})]})}function jRe(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(gR,{})}),n.jsx($t,{path:"/*",element:n.jsx(gR,{})})]})}function wRe({onGenerate:e,onExportCSV:t,isGenerating:r,hasData:s}){const{toast:a}=At(),[i,o]=w.useState({type:Mr.SALES,name:"Sales Report",dateRange:{startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},filters:{}}),l=d=>{if(d.preventDefault(),!i.name){a({title:"Validation Error",description:"Report name is required",variant:"destructive"});return}e(i)},c=d=>{let f="Custom Report";switch(d){case Mr.SALES:f="Sales Report";break;case Mr.INVENTORY:f="Inventory Report";break;case Mr.SERVICE:f="Service Report";break;case Mr.FINANCIAL:f="Financial Report";break}o(u=>({...u,type:d,name:f}))};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(zn,{className:"h-5 w-5 mr-2 text-primary"}),"Generate Report"]}),n.jsx(Fe,{children:"Configure and generate custom reports"})]}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:l,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"reportType",children:"Report Type"}),n.jsxs(Ve,{value:i.type,onValueChange:d=>c(d),children:[n.jsx(ze,{children:n.jsx(qe,{})}),n.jsxs(Ue,{children:[n.jsx(K,{value:Mr.SALES,children:"Sales Report"}),n.jsx(K,{value:Mr.INVENTORY,children:"Inventory Report"}),n.jsx(K,{value:Mr.SERVICE,children:"Service Report"}),n.jsx(K,{value:Mr.FINANCIAL,children:"Financial Report"}),n.jsx(K,{value:Mr.CUSTOM,children:"Custom Report"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"reportName",children:"Report Name"}),n.jsx(Pe,{id:"reportName",value:i.name,onChange:d=>o(f=>({...f,name:d.target.value})),placeholder:"Enter report name"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"startDate",children:"Start Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"startDate",type:"date",value:i.dateRange.startDate,onChange:d=>o(f=>({...f,dateRange:{...f.dateRange,startDate:d.target.value}})),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"endDate",children:"End Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"endDate",type:"date",value:i.dateRange.endDate,onChange:d=>o(f=>({...f,dateRange:{...f.dateRange,endDate:d.target.value}})),className:"pl-10"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"salesRep",children:"Sales Rep"}),n.jsxs(Ve,{value:i.filters.salesRep||"",onValueChange:d=>o(f=>({...f,filters:{...f.filters,salesRep:d||void 0}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"All Sales Reps"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"All Sales Reps"}),n.jsx(K,{value:"rep-001",children:"John Smith"}),n.jsx(K,{value:"rep-002",children:"Sarah Johnson"}),n.jsx(K,{value:"rep-003",children:"Mike Davis"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(Ve,{value:i.filters.status||"",onValueChange:d=>o(f=>({...f,filters:{...f.filters,status:d||void 0}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"All Statuses"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"All Statuses"}),n.jsx(K,{value:"active",children:"Active"}),n.jsx(K,{value:"completed",children:"Completed"}),n.jsx(K,{value:"cancelled",children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"location",children:"Location"}),n.jsxs(Ve,{value:i.filters.location||"",onValueChange:d=>o(f=>({...f,filters:{...f.filters,location:d||void 0}})),children:[n.jsx(ze,{children:n.jsx(qe,{placeholder:"All Locations"})}),n.jsxs(Ue,{children:[n.jsx(K,{value:"",children:"All Locations"}),n.jsx(K,{value:"north",children:"North Region"}),n.jsx(K,{value:"south",children:"South Region"}),n.jsx(K,{value:"east",children:"East Region"}),n.jsx(K,{value:"west",children:"West Region"})]})]})]})]}),n.jsxs("div",{className:"flex justify-between pt-4",children:[n.jsxs(J,{type:"button",variant:"outline",children:[n.jsx(Ca,{className:"h-4 w-4 mr-2"}),"More Filters"]}),n.jsxs("div",{className:"flex space-x-2",children:[s&&n.jsxs(J,{type:"button",variant:"outline",onClick:t,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),n.jsx(J,{type:"submit",disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(zn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})]})})]})}const Bq=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:He("w-full caption-bottom text-sm",e),...t})}));Bq.displayName="Table";const zq=w.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:He("[&_tr]:border-b",e),...t}));zq.displayName="TableHeader";const Uq=w.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:He("[&_tr:last-child]:border-0",e),...t}));Uq.displayName="TableBody";const NRe=w.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:He("bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));NRe.displayName="TableFooter";const qy=w.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:He("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));qy.displayName="TableRow";const Vq=w.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:He("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Vq.displayName="TableHead";const a4=w.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:He("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));a4.displayName="TableCell";const SRe=w.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:He("mt-4 text-sm text-muted-foreground",e),...t}));SRe.displayName="TableCaption";function CRe({reportType:e,reportName:t,data:r,columns:s,onExportCSV:a}){const[i,o]=w.useState(""),[l,c]=w.useState(null),[d,f]=w.useState("asc"),[u,h]=w.useState(1),m=10,g=[...r.filter(j=>Object.values(j).some(E=>E&&E.toString().toLowerCase().includes(i.toLowerCase())))].sort((j,E)=>{if(!l)return 0;const C=j[l],S=E[l];if(C===void 0||S===void 0)return 0;if(typeof C=="number"&&typeof S=="number")return d==="asc"?C-S:S-C;if(C instanceof Date&&S instanceof Date)return d==="asc"?C.getTime()-S.getTime():S.getTime()-C.getTime();const N=C.toString().toLowerCase(),_=S.toString().toLowerCase();return d==="asc"?N.localeCompare(_):_.localeCompare(N)}),p=Math.ceil(g.length/m),x=g.slice((u-1)*m,u*m),b=j=>{l===j?f(d==="asc"?"desc":"asc"):(c(j),f("asc"))},y=(j,E)=>{if(j==null)return"-";switch(E){case"currency":return _e(j);case"date":return ct(j);case"boolean":return j?"Yes":"No";default:return j.toString()}};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:t}),n.jsxs(Fe,{children:[r.length," records found"]})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:a,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{placeholder:"Search results...",value:i,onChange:j=>{o(j.target.value),h(1)},className:"pl-10"})]})}),n.jsx("div",{className:"rounded-md border",children:n.jsxs(Bq,{children:[n.jsx(zq,{children:n.jsx(qy,{children:s.map(j=>n.jsx(Vq,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>b(j.key),children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{children:j.label}),l===j.key&&(d==="asc"?n.jsx(Oo,{className:"h-3 w-3"}):n.jsx(Do,{className:"h-3 w-3"}))]})},j.key))})}),n.jsx(Uq,{children:x.length>0?x.map((j,E)=>n.jsx(qy,{children:s.map(C=>n.jsx(a4,{children:y(j[C.key],C.type)},C.key))},E)):n.jsx(qy,{children:n.jsx(a4,{colSpan:s.length,className:"h-24 text-center",children:"No results found."})})})]})}),p>1&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(u-1)*m+1," to ",Math.min(u*m,g.length)," of ",g.length," results"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(J,{variant:"outline",size:"sm",onClick:()=>h(j=>Math.max(j-1,1)),disabled:u===1,children:"Previous"}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>h(j=>Math.min(j+1,p)),disabled:u===p,children:"Next"})]})]})]})})]})}function ARe(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState(!1),[o,l]=w.useState(null),{leads:c,salesReps:d}=mo(),{vehicles:f}=wd(),{tickets:u}=m9(),{invoices:h,payments:m}=F9(),v=async j=>{i(!0),l(j);try{const E=new Date(j.dateRange.startDate),C=new Date(j.dateRange.endDate);let S=[],N=[];switch(j.type){case Mr.SALES:S=g(E,C,j.filters),N=[{key:"id",label:"ID"},{key:"customerName",label:"Customer"},{key:"date",label:"Date",type:"date"},{key:"product",label:"Product"},{key:"salesRep",label:"Sales Rep"},{key:"amount",label:"Amount",type:"currency"},{key:"status",label:"Status"}];break;case Mr.INVENTORY:S=p(j.filters),N=[{key:"id",label:"ID"},{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year",type:"number"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price",type:"currency"},{key:"cost",label:"Cost",type:"currency"},{key:"location",label:"Location"}];break;case Mr.SERVICE:S=x(E,C,j.filters),N=[{key:"id",label:"Ticket ID"},{key:"title",label:"Title"},{key:"customer",label:"Customer"},{key:"vehicle",label:"Vehicle"},{key:"status",label:"Status"},{key:"createdAt",label:"Created",type:"date"},{key:"completedAt",label:"Completed",type:"date"},{key:"partsTotal",label:"Parts Total",type:"currency"},{key:"laborTotal",label:"Labor Total",type:"currency"},{key:"total",label:"Total",type:"currency"}];break;case Mr.FINANCIAL:S=b(E,C,j.filters),N=[{key:"date",label:"Date",type:"date"},{key:"type",label:"Type"},{key:"reference",label:"Reference"},{key:"customer",label:"Customer"},{key:"description",label:"Description"},{key:"income",label:"Income",type:"currency"},{key:"expense",label:"Expense",type:"currency"},{key:"balance",label:"Balance",type:"currency"}];break;default:S=[],N=[]}t(S),s(N)}catch(E){console.error("Error generating report:",E)}finally{i(!1)}},g=(j,E,C)=>c.filter(N=>{const _=new Date(N.createdAt),I=_>=j&&_<=E,T=!C.salesRep||N.assignedTo===C.salesRep,A=!C.status||N.status===C.status;return I&&T&&A}).map(N=>{var I,T;const _=d.find(A=>A.id===N.assignedTo);return{id:N.id,customerName:`${N.firstName} ${N.lastName}`,date:N.createdAt,product:((I=N.customFields)==null?void 0:I.interests)||"N/A",salesRep:(_==null?void 0:_.name)||"Unassigned",amount:(T=N.customFields)!=null&&T.budget&&parseFloat(N.customFields.budget.replace(/[^0-9.]/g,""))||0,status:N.status}}),p=j=>f.filter(C=>{const S=!j.location||C.location.toLowerCase().includes(j.location.toLowerCase()),N=!j.status||C.status===j.status;return S&&N}).map(C=>({id:C.id,vin:C.vin,make:C.make,model:C.model,year:C.year,type:C.type,status:C.status,price:C.price,cost:C.cost,location:C.location})),x=(j,E,C)=>u.filter(N=>{const _=new Date(N.createdAt),I=_>=j&&_<=E,T=!C.status||N.status===C.status;return I&&T}).map(N=>{const _=N.parts.reduce((T,A)=>T+A.total,0),I=N.labor.reduce((T,A)=>T+A.total,0);return{id:N.id,title:N.title,customer:N.customerId,vehicle:N.vehicleId||"N/A",status:N.status,createdAt:N.createdAt,completedAt:N.completedDate,partsTotal:_,laborTotal:I,total:_+I}}),b=(j,E,C)=>{const S=[];return h.forEach(N=>{const _=new Date(N.createdAt);_>=j&&_<=E&&S.push({date:N.createdAt,type:"Invoice",reference:N.number,customer:N.customerId,description:`Invoice #${N.number}`,income:N.total,expense:0,balance:N.total})}),m.forEach(N=>{var I;const _=new Date(N.processedDate);_>=j&&_<=E&&S.push({date:N.processedDate,type:"Payment",reference:N.id,customer:((I=h.find(T=>T.id===N.invoiceId))==null?void 0:I.customerId)||"Unknown",description:`Payment for Invoice #${N.invoiceId}`,income:0,expense:N.amount,balance:-N.amount})}),S.sort((N,_)=>new Date(N.date).getTime()-new Date(_.date).getTime())};return{reportData:e,reportColumns:r,loading:a,currentReportConfig:o,generateReport:v,exportToCSV:()=>{if(!e.length||!r.length)return;const j=r.map(I=>I.label),E=e.map(I=>r.map(T=>{const A=I[T.key];switch(T.type){case"currency":return typeof A=="number"?A.toFixed(2):A;case"date":return A instanceof Date?A.toISOString().split("T")[0]:A;default:return A}})),C=Bh.unparse({fields:j,data:E}),S=new Blob([C],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(S),_=document.createElement("a");_.href=N,_.setAttribute("download",`${(o==null?void 0:o.name)||"report"}.csv`),document.body.appendChild(_),_.click(),document.body.removeChild(_)}}}function ERe(){const{toast:e}=At(),[t,r]=w.useState("30d"),[s,a]=w.useState(!1),[i,o]=w.useState("overview"),[l,c]=w.useState([{metric:"Total Leads",value:"2,651",change:"+4.75%",changePercent:"4.75%",category:"leads",trend:"up"},{metric:"Qualified Leads",value:"892",change:"+12.3%",changePercent:"12.3%",category:"leads",trend:"up"},{metric:"Conversion Rate",value:"24.5%",change:"-1.2%",changePercent:"1.2%",category:"leads",trend:"down"},{metric:"Avg Response Time",value:"3.2 hrs",change:"-0.8 hrs",changePercent:"20%",category:"leads",trend:"up"},{metric:"Total Revenue",value:"$1,245,890",change:"+8.3%",changePercent:"8.3%",category:"sales",trend:"up"},{metric:"Units Sold",value:"87",change:"+12.4%",changePercent:"12.4%",category:"sales",trend:"up"},{metric:"Avg Deal Size",value:"$14,320",change:"-2.1%",changePercent:"2.1%",category:"sales",trend:"down"},{metric:"Gross Profit Margin",value:"22.4%",change:"+1.5%",changePercent:"1.5%",category:"sales",trend:"up"}]),[d,f]=w.useState([{name:"Website",value:1245},{name:"Referral",value:654},{name:"Social Media",value:432},{name:"Trade Show",value:320}]),[u,h]=w.useState([{name:"Motorhomes",value:52e4},{name:"Travel Trailers",value:38e4},{name:"Fifth Wheels",value:245e3},{name:"Toy Haulers",value:1e5}]),m=async()=>{a(!0);try{await new Promise(p=>setTimeout(p,1500)),e({title:"Dashboard Refreshed",description:"Latest data has been loaded."})}catch{e({title:"Error",description:"Failed to refresh dashboard data.",variant:"destructive"})}finally{a(!1)}},v=()=>{e({title:"Export Started",description:"Your dashboard report is being prepared for download."}),setTimeout(()=>{e({title:"Export Complete",description:"Your dashboard report has been downloaded."})},2e3)},g=p=>{r(p),a(!0),setTimeout(()=>{a(!1)},1e3)};return n.jsx("div",{className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(zn,{className:"h-5 w-5 mr-2 text-primary"}),"Dashboard Report"]}),n.jsx(Fe,{children:"Key performance indicators and business metrics"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Ve,{value:t,onValueChange:g,children:[n.jsxs(ze,{className:"w-[150px]",children:[n.jsx(Lr,{className:"h-4 w-4 mr-2"}),n.jsx(qe,{})]}),n.jsxs(Ue,{children:[n.jsx(K,{value:"7d",children:"Last 7 Days"}),n.jsx(K,{value:"30d",children:"Last 30 Days"}),n.jsx(K,{value:"90d",children:"Last 90 Days"}),n.jsx(K,{value:"ytd",children:"Year to Date"}),n.jsx(K,{value:"1y",children:"Last Year"})]})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:m,disabled:s,children:[s?n.jsx($h,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx($h,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:v,children:[n.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsx(fe,{children:n.jsxs(xr,{value:i,onValueChange:o,className:"space-y-4",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"overview",children:"Overview"}),n.jsx(Qe,{value:"leads",children:"Leads & Marketing"}),n.jsx(Qe,{value:"sales",children:"Sales & Revenue"})]}),n.jsxs(et,{value:"overview",className:"space-y-4",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="leads"||p.category==="sales").slice(0,4).map((p,x)=>n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?n.jsx(_t,{className:"h-4 w-4 text-green-500"}):n.jsx(bh,{className:"h-4 w-4 text-red-500"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-2xl font-bold",children:p.value}),n.jsxs("p",{className:He("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},x))}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Leads by Source"}),n.jsx(Fe,{children:"Distribution of leads across different sources"})]}),n.jsx(fe,{className:"h-64",children:n.jsx(Sv,{width:"100%",height:"100%",children:n.jsxs(mq,{data:d,children:[n.jsx(Qo,{dataKey:"name",tick:{fontSize:10}}),n.jsx(Jo,{tickFormatter:p=>p.toLocaleString(),tick:{fontSize:10}}),n.jsx(ma,{formatter:p=>p.toLocaleString()}),n.jsx(Td,{dataKey:"value",fill:"#8884d8"})]})})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Sales by Product Category"}),n.jsx(Fe,{children:"Revenue generated by different product categories"})]}),n.jsx(fe,{className:"h-64",children:n.jsx(Sv,{width:"100%",height:"100%",children:n.jsxs(pq,{data:u,children:[n.jsx(Qo,{dataKey:"name",tick:{fontSize:10}}),n.jsx(Jo,{tickFormatter:p=>_e(p),tick:{fontSize:10}}),n.jsx(ma,{formatter:p=>_e(p)}),n.jsx(nc,{type:"monotone",dataKey:"value",stroke:"#82ca9d",fill:"#82ca9d"})]})})})]})]})]}),n.jsxs(et,{value:"leads",className:"space-y-4",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="leads").map((p,x)=>n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?n.jsx(_t,{className:"h-4 w-4 text-green-500"}):n.jsx(bh,{className:"h-4 w-4 text-red-500"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-2xl font-bold",children:p.value}),n.jsxs("p",{className:He("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},x))}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Lead Conversion Funnel"}),n.jsx(Fe,{children:"Visual representation of lead progression"})]}),n.jsx(fe,{children:n.jsx("div",{className:"h-64 flex items-center justify-center bg-muted/20 rounded-md",children:n.jsx("p",{className:"text-muted-foreground",children:"Funnel Chart Placeholder"})})})]})]}),n.jsxs(et,{value:"sales",className:"space-y-4",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="sales").map((p,x)=>n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?n.jsx(_t,{className:"h-4 w-4 text-green-500"}):n.jsx(bh,{className:"h-4 w-4 text-red-500"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-2xl font-bold",children:p.value}),n.jsxs("p",{className:He("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},x))}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Revenue Trend"}),n.jsx(Fe,{children:"Monthly revenue over the selected timeframe"})]}),n.jsx(fe,{children:n.jsx("div",{className:"h-64 flex items-center justify-center bg-muted/20 rounded-md",children:n.jsx("p",{className:"text-muted-foreground",children:"Revenue Trend Chart Placeholder"})})})]})]})]})})]})})}const PRe=[{id:"1",name:"Monthly Sales Report",type:Mr.SALES,module:"sales",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-20"),generatedBy:"admin"},{id:"2",name:"Inventory Valuation",type:Mr.INVENTORY,module:"inventory",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-19"),generatedBy:"manager"},{id:"3",name:"Service Revenue Analysis",type:Mr.SERVICE,module:"service",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-18"),generatedBy:"admin"}],xR=[{id:"sales-summary",name:"Sales Summary",description:"Overview of sales performance and metrics",type:Mr.SALES,icon:It,color:"from-green-50 to-green-100/50"},{id:"inventory-report",name:"Inventory Report",description:"Current inventory levels and valuation",type:Mr.INVENTORY,icon:Ws,color:"from-blue-50 to-blue-100/50"},{id:"customer-analysis",name:"Customer Analysis",description:"Customer demographics and behavior insights",type:Mr.CUSTOM,icon:Ln,color:"from-purple-50 to-purple-100/50"},{id:"financial-overview",name:"Financial Overview",description:"Revenue, expenses, and profitability analysis",type:Mr.FINANCIAL,icon:_t,color:"from-orange-50 to-orange-100/50"}];function yR(){const[e,t]=w.useState(PRe),{reportData:r,reportColumns:s,loading:a,currentReportConfig:i,generateReport:o,exportToCSV:l}=ARe(),[c,d]=w.useState("dashboard"),f=m=>{switch(m){case Mr.SALES:return"bg-green-50 text-green-700 border-green-200";case Mr.INVENTORY:return"bg-blue-50 text-blue-700 border-blue-200";case Mr.SERVICE:return"bg-purple-50 text-purple-700 border-purple-200";case Mr.FINANCIAL:return"bg-orange-50 text-orange-700 border-orange-200";case Mr.CUSTOM:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=m=>{o(m)},h=()=>{l()};return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Reporting Suite"}),n.jsx("p",{className:"ri-page-description",children:"Generate insights and analytics for your dealership"})]}),n.jsxs(J,{className:"shadow-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Report"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Reports"}),n.jsx(zn,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"All reports"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"This Month"}),n.jsx(zn,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(m=>m.generatedAt.getMonth()===new Date().getMonth()).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(_t,{className:"h-3 w-3 mr-1"}),"Generated this month"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Scheduled"}),n.jsx(zn,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"5"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(zn,{className:"h-3 w-3 mr-1"}),"Automated reports"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Templates"}),n.jsx(zn,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:xR.length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(zn,{className:"h-3 w-3 mr-1"}),"Available templates"]})]})]})]}),n.jsxs(xr,{value:c,onValueChange:d,className:"space-y-6",children:[n.jsxs(hr,{className:"grid w-full grid-cols-3",children:[n.jsx(Qe,{value:"dashboard",children:"Dashboard"}),n.jsx(Qe,{value:"generator",children:"Report Generator"}),n.jsx(Qe,{value:"saved",children:"Saved Reports"})]}),n.jsx(et,{value:"dashboard",children:n.jsx(ERe,{})}),n.jsxs(et,{value:"generator",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Report Templates"}),n.jsx(Fe,{children:"Quick start templates for common reports"})]}),n.jsx(fe,{children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:xR.map(m=>n.jsx(ue,{className:He("overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer border-0 bg-gradient-to-br",m.color),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx(m.icon,{className:"h-8 w-8 text-primary"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:m.name}),n.jsx(Re,{className:He("ri-badge-status mt-1",f(m.type)),children:m.type.toUpperCase()})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:m.description}),n.jsx(J,{size:"sm",className:"w-full shadow-sm",children:"Generate Report"})]})},m.id))})})]}),n.jsx(wRe,{onGenerate:u,onExportCSV:h,isGenerating:a,hasData:r.length>0}),r.length>0&&i&&n.jsx(CRe,{reportType:i.type,reportName:i.name,data:r,columns:s,onExportCSV:h})]}),n.jsx(et,{value:"saved",children:e.length>0&&n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Saved Reports"}),n.jsx(Fe,{children:"Previously generated reports"})]}),n.jsx(fe,{children:n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"Select a report template above to generate a new report"})})})]})})]})]})}function TRe(){return n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(yR,{})}),n.jsx($t,{path:"/*",element:n.jsx(yR,{})})]})}function _Re(){return n.jsx(YX,{defaultTheme:"light",storageKey:"renter-insight-theme",children:n.jsx(WX,{children:n.jsx(YK,{children:n.jsx(HX,{children:n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs(Ts,{children:[n.jsx($t,{path:"/login",element:n.jsx(pne,{})}),n.jsx($t,{path:"/*",element:n.jsx(vne,{children:n.jsx(KJ,{children:n.jsxs(Ts,{children:[n.jsx($t,{path:"/",element:n.jsx(mne,{})}),n.jsx($t,{path:"/crm/*",element:n.jsx(bse,{})}),n.jsx($t,{path:"/inventory/*",element:n.jsx(Sae,{})}),n.jsx($t,{path:"/deals/*",element:n.jsx(Nue,{})}),n.jsx($t,{path:"/finance/*",element:n.jsx(kae,{})}),n.jsx($t,{path:"/quotes/*",element:n.jsx(Eae,{})}),n.jsx($t,{path:"/agreements/*",element:n.jsx(Cue,{})}),n.jsx($t,{path:"/service/*",element:n.jsx(Dfe,{})}),n.jsx($t,{path:"/pdi/*",element:n.jsx(Yfe,{})}),n.jsx($t,{path:"/delivery/*",element:n.jsx(zfe,{})}),n.jsx($t,{path:"/commissions/*",element:n.jsx(nhe,{})}),n.jsx($t,{path:"/portal/*",element:n.jsx(lhe,{})}),n.jsx($t,{path:"/invoices/*",element:n.jsx(hhe,{})}),n.jsx($t,{path:"/settings/*",element:n.jsx(bhe,{})}),n.jsx($t,{path:"/admin/*",element:n.jsx(jRe,{})}),n.jsx($t,{path:"/reports/*",element:n.jsx(TRe,{})})]})})})})]}),n.jsx(qX,{})]})})})})})}_5.createRoot(document.getElementById("root")).render(n.jsx(_Re,{}));export{Rae as _,Vn as c,Cr as g};
