function dH(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function JR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var ZR={exports:{}},lj={},e$={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx=Symbol.for("react.element"),uH=Symbol.for("react.portal"),fH=Symbol.for("react.fragment"),hH=Symbol.for("react.strict_mode"),mH=Symbol.for("react.profiler"),pH=Symbol.for("react.provider"),vH=Symbol.for("react.context"),gH=Symbol.for("react.forward_ref"),xH=Symbol.for("react.suspense"),yH=Symbol.for("react.memo"),bH=Symbol.for("react.lazy"),N3=Symbol.iterator;function jH(e){return e===null||typeof e!="object"?null:(e=N3&&e[N3]||e["@@iterator"],typeof e=="function"?e:null)}var t$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r$=Object.assign,n$={};function Im(e,t,r){this.props=e,this.context=t,this.refs=n$,this.updater=r||t$}Im.prototype.isReactComponent={};Im.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Im.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function s$(){}s$.prototype=Im.prototype;function PE(e,t,r){this.props=e,this.context=t,this.refs=n$,this.updater=r||t$}var TE=PE.prototype=new s$;TE.constructor=PE;r$(TE,Im.prototype);TE.isPureReactComponent=!0;var S3=Array.isArray,a$=Object.prototype.hasOwnProperty,_E={current:null},i$={key:!0,ref:!0,__self:!0,__source:!0};function o$(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)a$.call(t,s)&&!i$.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:hx,type:e,key:i,ref:o,props:a,_owner:_E.current}}function wH(e,t){return{$$typeof:hx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function IE(e){return typeof e=="object"&&e!==null&&e.$$typeof===hx}function NH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var C3=/\/+/g;function W2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?NH(""+e.key):t.toString(36)}function zy(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case hx:case uH:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+W2(o,0):s,S3(a)?(r="",e!=null&&(r=e.replace(C3,"$&/")+"/"),zy(a,t,r,"",function(d){return d})):a!=null&&(IE(a)&&(a=wH(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(C3,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",S3(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+W2(i,l);o+=zy(i,t,r,c,a)}else if(c=jH(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+W2(i,l++),o+=zy(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function O0(e,t,r){if(e==null)return e;var s=[],a=0;return zy(e,s,"","",function(i){return t.call(r,i,a++)}),s}function SH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Na={current:null},Uy={transition:null},CH={ReactCurrentDispatcher:Na,ReactCurrentBatchConfig:Uy,ReactCurrentOwner:_E};function l$(){throw Error("act(...) is not supported in production builds of React.")}fr.Children={map:O0,forEach:function(e,t,r){O0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return O0(e,function(){t++}),t},toArray:function(e){return O0(e,function(t){return t})||[]},only:function(e){if(!IE(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fr.Component=Im;fr.Fragment=fH;fr.Profiler=mH;fr.PureComponent=PE;fr.StrictMode=hH;fr.Suspense=xH;fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CH;fr.act=l$;fr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=r$({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=_E.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)a$.call(t,c)&&!i$.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:hx,type:e.type,key:a,ref:i,props:s,_owner:o}};fr.createContext=function(e){return e={$$typeof:vH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pH,_context:e},e.Consumer=e};fr.createElement=o$;fr.createFactory=function(e){var t=o$.bind(null,e);return t.type=e,t};fr.createRef=function(){return{current:null}};fr.forwardRef=function(e){return{$$typeof:gH,render:e}};fr.isValidElement=IE;fr.lazy=function(e){return{$$typeof:bH,_payload:{_status:-1,_result:e},_init:SH}};fr.memo=function(e,t){return{$$typeof:yH,type:e,compare:t===void 0?null:t}};fr.startTransition=function(e){var t=Uy.transition;Uy.transition={};try{e()}finally{Uy.transition=t}};fr.unstable_act=l$;fr.useCallback=function(e,t){return Na.current.useCallback(e,t)};fr.useContext=function(e){return Na.current.useContext(e)};fr.useDebugValue=function(){};fr.useDeferredValue=function(e){return Na.current.useDeferredValue(e)};fr.useEffect=function(e,t){return Na.current.useEffect(e,t)};fr.useId=function(){return Na.current.useId()};fr.useImperativeHandle=function(e,t,r){return Na.current.useImperativeHandle(e,t,r)};fr.useInsertionEffect=function(e,t){return Na.current.useInsertionEffect(e,t)};fr.useLayoutEffect=function(e,t){return Na.current.useLayoutEffect(e,t)};fr.useMemo=function(e,t){return Na.current.useMemo(e,t)};fr.useReducer=function(e,t,r){return Na.current.useReducer(e,t,r)};fr.useRef=function(e){return Na.current.useRef(e)};fr.useState=function(e){return Na.current.useState(e)};fr.useSyncExternalStore=function(e,t,r){return Na.current.useSyncExternalStore(e,t,r)};fr.useTransition=function(){return Na.current.useTransition()};fr.version="18.3.1";e$.exports=fr;var w=e$.exports;const ce=kr(w),jl=dH({__proto__:null,default:ce},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AH=w,EH=Symbol.for("react.element"),PH=Symbol.for("react.fragment"),TH=Object.prototype.hasOwnProperty,_H=AH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IH={key:!0,ref:!0,__self:!0,__source:!0};function c$(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)TH.call(t,s)&&!IH.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:EH,type:e,key:i,ref:o,props:a,_owner:_H.current}}lj.Fragment=PH;lj.jsx=c$;lj.jsxs=c$;ZR.exports=lj;var n=ZR.exports,XS={},d$={exports:{}},bi={},u$={exports:{}},f$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,U){var q=B.length;B.push(U);e:for(;0<q;){var W=q-1>>>1,L=B[W];if(0<a(L,U))B[W]=U,B[q]=L,q=W;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var U=B[0],q=B.pop();if(q!==U){B[0]=q;e:for(var W=0,L=B.length,V=L>>>1;W<V;){var G=2*(W+1)-1,Z=B[G],ee=G+1,he=B[ee];if(0>a(Z,q))ee<L&&0>a(he,Z)?(B[W]=he,B[ee]=q,W=ee):(B[W]=Z,B[G]=q,W=G);else if(ee<L&&0>a(he,q))B[W]=he,B[ee]=q,W=ee;else break e}}return U}function a(B,U){var q=B.sortIndex-U.sortIndex;return q!==0?q:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,u=null,h=3,m=!1,v=!1,g=!1,p=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(B){for(var U=r(d);U!==null;){if(U.callback===null)s(d);else if(U.startTime<=B)s(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(d)}}function j(B){if(g=!1,y(B),!v)if(r(c)!==null)v=!0,M(E);else{var U=r(d);U!==null&&$(j,U.startTime-B)}}function E(B,U){v=!1,g&&(g=!1,x(S),S=-1),m=!0;var q=h;try{for(y(U),u=r(c);u!==null&&(!(u.expirationTime>U)||B&&!_());){var W=u.callback;if(typeof W=="function"){u.callback=null,h=u.priorityLevel;var L=W(u.expirationTime<=U);U=e.unstable_now(),typeof L=="function"?u.callback=L:u===r(c)&&s(c),y(U)}else s(c);u=r(c)}if(u!==null)var V=!0;else{var G=r(d);G!==null&&$(j,G.startTime-U),V=!1}return V}finally{u=null,h=q,m=!1}}var A=!1,C=null,S=-1,T=5,O=-1;function _(){return!(e.unstable_now()-O<T)}function N(){if(C!==null){var B=e.unstable_now();O=B;var U=!0;try{U=C(!0,B)}finally{U?D():(A=!1,C=null)}}else A=!1}var D;if(typeof b=="function")D=function(){b(N)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,R=I.port2;I.port1.onmessage=N,D=function(){R.postMessage(null)}}else D=function(){p(N,0)};function M(B){C=B,A||(A=!0,D())}function $(B,U){S=p(function(){B(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,M(E))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(B){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var q=h;h=U;try{return B()}finally{h=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=h;h=B;try{return U()}finally{h=q}},e.unstable_scheduleCallback=function(B,U,q){var W=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?W+q:W):q=W,B){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=q+L,B={id:f++,callback:U,priorityLevel:B,startTime:q,expirationTime:L,sortIndex:-1},q>W?(B.sortIndex=q,t(d,B),r(c)===null&&B===r(d)&&(g?(x(S),S=-1):g=!0,$(j,q-W))):(B.sortIndex=L,t(c,B),v||m||(v=!0,M(E))),B},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(B){var U=h;return function(){var q=h;h=U;try{return B.apply(this,arguments)}finally{h=q}}}})(f$);u$.exports=f$;var kH=u$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DH=w,yi=kH;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h$=new Set,Zv={};function lf(e,t){Vh(e,t),Vh(e+"Capture",t)}function Vh(e,t){for(Zv[e]=t,e=0;e<t.length;e++)h$.add(t[e])}var ic=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QS=Object.prototype.hasOwnProperty,OH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A3={},E3={};function LH(e){return QS.call(E3,e)?!0:QS.call(A3,e)?!1:OH.test(e)?E3[e]=!0:(A3[e]=!0,!1)}function RH(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $H(e,t,r,s){if(t===null||typeof t>"u"||RH(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sa(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var zs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zs[e]=new Sa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zs[t]=new Sa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zs[e]=new Sa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zs[e]=new Sa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zs[e]=new Sa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zs[e]=new Sa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zs[e]=new Sa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zs[e]=new Sa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zs[e]=new Sa(e,5,!1,e.toLowerCase(),null,!1,!1)});var kE=/[\-:]([a-z])/g;function DE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kE,DE);zs[t]=new Sa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kE,DE);zs[t]=new Sa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kE,DE);zs[t]=new Sa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zs[e]=new Sa(e,1,!1,e.toLowerCase(),null,!1,!1)});zs.xlinkHref=new Sa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zs[e]=new Sa(e,1,!1,e.toLowerCase(),null,!0,!0)});function OE(e,t,r,s){var a=zs.hasOwnProperty(t)?zs[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($H(t,r,a,s)&&(r=null),s||a===null?LH(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var yc=DH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L0=Symbol.for("react.element"),hh=Symbol.for("react.portal"),mh=Symbol.for("react.fragment"),LE=Symbol.for("react.strict_mode"),JS=Symbol.for("react.profiler"),m$=Symbol.for("react.provider"),p$=Symbol.for("react.context"),RE=Symbol.for("react.forward_ref"),ZS=Symbol.for("react.suspense"),e5=Symbol.for("react.suspense_list"),$E=Symbol.for("react.memo"),Gc=Symbol.for("react.lazy"),v$=Symbol.for("react.offscreen"),P3=Symbol.iterator;function Mp(e){return e===null||typeof e!="object"?null:(e=P3&&e[P3]||e["@@iterator"],typeof e=="function"?e:null)}var _n=Object.assign,q2;function yv(e){if(q2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);q2=t&&t[1]||""}return`
`+q2+e}var H2=!1;function G2(e,t){if(!e||H2)return"";H2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{H2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yv(e):""}function FH(e){switch(e.tag){case 5:return yv(e.type);case 16:return yv("Lazy");case 13:return yv("Suspense");case 19:return yv("SuspenseList");case 0:case 2:case 15:return e=G2(e.type,!1),e;case 11:return e=G2(e.type.render,!1),e;case 1:return e=G2(e.type,!0),e;default:return""}}function t5(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mh:return"Fragment";case hh:return"Portal";case JS:return"Profiler";case LE:return"StrictMode";case ZS:return"Suspense";case e5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case p$:return(e.displayName||"Context")+".Consumer";case m$:return(e._context.displayName||"Context")+".Provider";case RE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $E:return t=e.displayName||null,t!==null?t:t5(e.type)||"Memo";case Gc:t=e._payload,e=e._init;try{return t5(e(t))}catch{}}return null}function MH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return t5(t);case 8:return t===LE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ad(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function g$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function BH(e){var t=g$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function R0(e){e._valueTracker||(e._valueTracker=BH(e))}function x$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=g$(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function db(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function r5(e,t){var r=t.checked;return _n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function T3(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Ad(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function y$(e,t){t=t.checked,t!=null&&OE(e,"checked",t,!1)}function n5(e,t){y$(e,t);var r=Ad(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?s5(e,t.type,r):t.hasOwnProperty("defaultValue")&&s5(e,t.type,Ad(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _3(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function s5(e,t,r){(t!=="number"||db(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bv=Array.isArray;function Ph(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Ad(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function a5(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ot(91));return _n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function I3(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ot(92));if(bv(r)){if(1<r.length)throw Error(ot(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ad(r)}}function b$(e,t){var r=Ad(t.value),s=Ad(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function k3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function j$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i5(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?j$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $0,w$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($0=$0||document.createElement("div"),$0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function eg(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Av={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zH=["Webkit","ms","Moz","O"];Object.keys(Av).forEach(function(e){zH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Av[t]=Av[e]})});function N$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Av.hasOwnProperty(e)&&Av[e]?(""+t).trim():t+"px"}function S$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=N$(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var UH=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o5(e,t){if(t){if(UH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ot(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ot(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ot(62))}}function l5(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c5=null;function FE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var d5=null,Th=null,_h=null;function D3(e){if(e=vx(e)){if(typeof d5!="function")throw Error(ot(280));var t=e.stateNode;t&&(t=hj(t),d5(e.stateNode,e.type,t))}}function C$(e){Th?_h?_h.push(e):_h=[e]:Th=e}function A$(){if(Th){var e=Th,t=_h;if(_h=Th=null,D3(e),t)for(e=0;e<t.length;e++)D3(t[e])}}function E$(e,t){return e(t)}function P$(){}var K2=!1;function T$(e,t,r){if(K2)return e(t,r);K2=!0;try{return E$(e,t,r)}finally{K2=!1,(Th!==null||_h!==null)&&(P$(),A$())}}function tg(e,t){var r=e.stateNode;if(r===null)return null;var s=hj(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ot(231,t,typeof r));return r}var u5=!1;if(ic)try{var Bp={};Object.defineProperty(Bp,"passive",{get:function(){u5=!0}}),window.addEventListener("test",Bp,Bp),window.removeEventListener("test",Bp,Bp)}catch{u5=!1}function VH(e,t,r,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(f){this.onError(f)}}var Ev=!1,ub=null,fb=!1,f5=null,WH={onError:function(e){Ev=!0,ub=e}};function qH(e,t,r,s,a,i,o,l,c){Ev=!1,ub=null,VH.apply(WH,arguments)}function HH(e,t,r,s,a,i,o,l,c){if(qH.apply(this,arguments),Ev){if(Ev){var d=ub;Ev=!1,ub=null}else throw Error(ot(198));fb||(fb=!0,f5=d)}}function cf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function _$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function O3(e){if(cf(e)!==e)throw Error(ot(188))}function GH(e){var t=e.alternate;if(!t){if(t=cf(e),t===null)throw Error(ot(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return O3(a),e;if(i===s)return O3(a),t;i=i.sibling}throw Error(ot(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(ot(189))}}if(r.alternate!==s)throw Error(ot(190))}if(r.tag!==3)throw Error(ot(188));return r.stateNode.current===r?e:t}function I$(e){return e=GH(e),e!==null?k$(e):null}function k$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=k$(e);if(t!==null)return t;e=e.sibling}return null}var D$=yi.unstable_scheduleCallback,L3=yi.unstable_cancelCallback,KH=yi.unstable_shouldYield,YH=yi.unstable_requestPaint,Wn=yi.unstable_now,XH=yi.unstable_getCurrentPriorityLevel,ME=yi.unstable_ImmediatePriority,O$=yi.unstable_UserBlockingPriority,hb=yi.unstable_NormalPriority,QH=yi.unstable_LowPriority,L$=yi.unstable_IdlePriority,cj=null,ul=null;function JH(e){if(ul&&typeof ul.onCommitFiberRoot=="function")try{ul.onCommitFiberRoot(cj,e,void 0,(e.current.flags&128)===128)}catch{}}var Io=Math.clz32?Math.clz32:tG,ZH=Math.log,eG=Math.LN2;function tG(e){return e>>>=0,e===0?32:31-(ZH(e)/eG|0)|0}var F0=64,M0=4194304;function jv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mb(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=jv(l):(i&=o,i!==0&&(s=jv(i)))}else o=r&~a,o!==0?s=jv(o):i!==0&&(s=jv(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Io(t),a=1<<r,s|=e[r],t&=~a;return s}function rG(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nG(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Io(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=rG(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function h5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function R$(){var e=F0;return F0<<=1,!(F0&4194240)&&(F0=64),e}function Y2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mx(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Io(t),e[t]=r}function sG(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Io(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function BE(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Io(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var $r=0;function $$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var F$,zE,M$,B$,z$,m5=!1,B0=[],ud=null,fd=null,hd=null,rg=new Map,ng=new Map,Qc=[],aG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R3(e,t){switch(e){case"focusin":case"focusout":ud=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":hd=null;break;case"pointerover":case"pointerout":rg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ng.delete(t.pointerId)}}function zp(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=vx(t),t!==null&&zE(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function iG(e,t,r,s,a){switch(t){case"focusin":return ud=zp(ud,e,t,r,s,a),!0;case"dragenter":return fd=zp(fd,e,t,r,s,a),!0;case"mouseover":return hd=zp(hd,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return rg.set(i,zp(rg.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,ng.set(i,zp(ng.get(i)||null,e,t,r,s,a)),!0}return!1}function U$(e){var t=Nu(e.target);if(t!==null){var r=cf(t);if(r!==null){if(t=r.tag,t===13){if(t=_$(r),t!==null){e.blockedOn=t,z$(e.priority,function(){M$(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=p5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);c5=s,r.target.dispatchEvent(s),c5=null}else return t=vx(r),t!==null&&zE(t),e.blockedOn=r,!1;t.shift()}return!0}function $3(e,t,r){Vy(e)&&r.delete(t)}function oG(){m5=!1,ud!==null&&Vy(ud)&&(ud=null),fd!==null&&Vy(fd)&&(fd=null),hd!==null&&Vy(hd)&&(hd=null),rg.forEach($3),ng.forEach($3)}function Up(e,t){e.blockedOn===t&&(e.blockedOn=null,m5||(m5=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,oG)))}function sg(e){function t(a){return Up(a,e)}if(0<B0.length){Up(B0[0],e);for(var r=1;r<B0.length;r++){var s=B0[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ud!==null&&Up(ud,e),fd!==null&&Up(fd,e),hd!==null&&Up(hd,e),rg.forEach(t),ng.forEach(t),r=0;r<Qc.length;r++)s=Qc[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Qc.length&&(r=Qc[0],r.blockedOn===null);)U$(r),r.blockedOn===null&&Qc.shift()}var Ih=yc.ReactCurrentBatchConfig,pb=!0;function lG(e,t,r,s){var a=$r,i=Ih.transition;Ih.transition=null;try{$r=1,UE(e,t,r,s)}finally{$r=a,Ih.transition=i}}function cG(e,t,r,s){var a=$r,i=Ih.transition;Ih.transition=null;try{$r=4,UE(e,t,r,s)}finally{$r=a,Ih.transition=i}}function UE(e,t,r,s){if(pb){var a=p5(e,t,r,s);if(a===null)aN(e,t,s,vb,r),R3(e,s);else if(iG(a,e,t,r,s))s.stopPropagation();else if(R3(e,s),t&4&&-1<aG.indexOf(e)){for(;a!==null;){var i=vx(a);if(i!==null&&F$(i),i=p5(e,t,r,s),i===null&&aN(e,t,s,vb,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else aN(e,t,s,null,r)}}var vb=null;function p5(e,t,r,s){if(vb=null,e=FE(s),e=Nu(e),e!==null)if(t=cf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=_$(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vb=e,null}function V$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XH()){case ME:return 1;case O$:return 4;case hb:case QH:return 16;case L$:return 536870912;default:return 16}default:return 16}}var nd=null,VE=null,Wy=null;function W$(){if(Wy)return Wy;var e,t=VE,r=t.length,s,a="value"in nd?nd.value:nd.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return Wy=a.slice(e,1<s?1-s:void 0)}function qy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function z0(){return!0}function F3(){return!1}function ji(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?z0:F3,this.isPropagationStopped=F3,this}return _n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=z0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=z0)},persist:function(){},isPersistent:z0}),t}var km={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WE=ji(km),px=_n({},km,{view:0,detail:0}),dG=ji(px),X2,Q2,Vp,dj=_n({},px,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vp&&(Vp&&e.type==="mousemove"?(X2=e.screenX-Vp.screenX,Q2=e.screenY-Vp.screenY):Q2=X2=0,Vp=e),X2)},movementY:function(e){return"movementY"in e?e.movementY:Q2}}),M3=ji(dj),uG=_n({},dj,{dataTransfer:0}),fG=ji(uG),hG=_n({},px,{relatedTarget:0}),J2=ji(hG),mG=_n({},km,{animationName:0,elapsedTime:0,pseudoElement:0}),pG=ji(mG),vG=_n({},km,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gG=ji(vG),xG=_n({},km,{data:0}),B3=ji(xG),yG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wG(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jG[e])?!!t[e]:!1}function qE(){return wG}var NG=_n({},px,{key:function(e){if(e.key){var t=yG[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bG[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qE,charCode:function(e){return e.type==="keypress"?qy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SG=ji(NG),CG=_n({},dj,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z3=ji(CG),AG=_n({},px,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qE}),EG=ji(AG),PG=_n({},km,{propertyName:0,elapsedTime:0,pseudoElement:0}),TG=ji(PG),_G=_n({},dj,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),IG=ji(_G),kG=[9,13,27,32],HE=ic&&"CompositionEvent"in window,Pv=null;ic&&"documentMode"in document&&(Pv=document.documentMode);var DG=ic&&"TextEvent"in window&&!Pv,q$=ic&&(!HE||Pv&&8<Pv&&11>=Pv),U3=String.fromCharCode(32),V3=!1;function H$(e,t){switch(e){case"keyup":return kG.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ph=!1;function OG(e,t){switch(e){case"compositionend":return G$(t);case"keypress":return t.which!==32?null:(V3=!0,U3);case"textInput":return e=t.data,e===U3&&V3?null:e;default:return null}}function LG(e,t){if(ph)return e==="compositionend"||!HE&&H$(e,t)?(e=W$(),Wy=VE=nd=null,ph=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return q$&&t.locale!=="ko"?null:t.data;default:return null}}var RG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RG[e.type]:t==="textarea"}function K$(e,t,r,s){C$(s),t=gb(t,"onChange"),0<t.length&&(r=new WE("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Tv=null,ag=null;function $G(e){aF(e,0)}function uj(e){var t=xh(e);if(x$(t))return e}function FG(e,t){if(e==="change")return t}var Y$=!1;if(ic){var Z2;if(ic){var eN="oninput"in document;if(!eN){var q3=document.createElement("div");q3.setAttribute("oninput","return;"),eN=typeof q3.oninput=="function"}Z2=eN}else Z2=!1;Y$=Z2&&(!document.documentMode||9<document.documentMode)}function H3(){Tv&&(Tv.detachEvent("onpropertychange",X$),ag=Tv=null)}function X$(e){if(e.propertyName==="value"&&uj(ag)){var t=[];K$(t,ag,e,FE(e)),T$($G,t)}}function MG(e,t,r){e==="focusin"?(H3(),Tv=t,ag=r,Tv.attachEvent("onpropertychange",X$)):e==="focusout"&&H3()}function BG(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uj(ag)}function zG(e,t){if(e==="click")return uj(t)}function UG(e,t){if(e==="input"||e==="change")return uj(t)}function VG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oo=typeof Object.is=="function"?Object.is:VG;function ig(e,t){if(Oo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!QS.call(t,a)||!Oo(e[a],t[a]))return!1}return!0}function G3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function K3(e,t){var r=G3(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=G3(r)}}function Q$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Q$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function J$(){for(var e=window,t=db();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=db(e.document)}return t}function GE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WG(e){var t=J$(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Q$(r.ownerDocument.documentElement,r)){if(s!==null&&GE(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=K3(r,i);var o=K3(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qG=ic&&"documentMode"in document&&11>=document.documentMode,vh=null,v5=null,_v=null,g5=!1;function Y3(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;g5||vh==null||vh!==db(s)||(s=vh,"selectionStart"in s&&GE(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),_v&&ig(_v,s)||(_v=s,s=gb(v5,"onSelect"),0<s.length&&(t=new WE("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=vh)))}function U0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var gh={animationend:U0("Animation","AnimationEnd"),animationiteration:U0("Animation","AnimationIteration"),animationstart:U0("Animation","AnimationStart"),transitionend:U0("Transition","TransitionEnd")},tN={},Z$={};ic&&(Z$=document.createElement("div").style,"AnimationEvent"in window||(delete gh.animationend.animation,delete gh.animationiteration.animation,delete gh.animationstart.animation),"TransitionEvent"in window||delete gh.transitionend.transition);function fj(e){if(tN[e])return tN[e];if(!gh[e])return e;var t=gh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Z$)return tN[e]=t[r];return e}var eF=fj("animationend"),tF=fj("animationiteration"),rF=fj("animationstart"),nF=fj("transitionend"),sF=new Map,X3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $d(e,t){sF.set(e,t),lf(t,[e])}for(var rN=0;rN<X3.length;rN++){var nN=X3[rN],HG=nN.toLowerCase(),GG=nN[0].toUpperCase()+nN.slice(1);$d(HG,"on"+GG)}$d(eF,"onAnimationEnd");$d(tF,"onAnimationIteration");$d(rF,"onAnimationStart");$d("dblclick","onDoubleClick");$d("focusin","onFocus");$d("focusout","onBlur");$d(nF,"onTransitionEnd");Vh("onMouseEnter",["mouseout","mouseover"]);Vh("onMouseLeave",["mouseout","mouseover"]);Vh("onPointerEnter",["pointerout","pointerover"]);Vh("onPointerLeave",["pointerout","pointerover"]);lf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lf("onBeforeInput",["compositionend","keypress","textInput","paste"]);lf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KG=new Set("cancel close invalid load scroll toggle".split(" ").concat(wv));function Q3(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,HH(s,t,void 0,e),e.currentTarget=null}function aF(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Q3(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Q3(a,l,d),i=c}}}if(fb)throw e=f5,fb=!1,f5=null,e}function dn(e,t){var r=t[w5];r===void 0&&(r=t[w5]=new Set);var s=e+"__bubble";r.has(s)||(iF(t,e,2,!1),r.add(s))}function sN(e,t,r){var s=0;t&&(s|=4),iF(r,e,s,t)}var V0="_reactListening"+Math.random().toString(36).slice(2);function og(e){if(!e[V0]){e[V0]=!0,h$.forEach(function(r){r!=="selectionchange"&&(KG.has(r)||sN(r,!1,e),sN(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[V0]||(t[V0]=!0,sN("selectionchange",!1,t))}}function iF(e,t,r,s){switch(V$(t)){case 1:var a=lG;break;case 4:a=cG;break;default:a=UE}r=a.bind(null,t,r,e),a=void 0,!u5||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function aN(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Nu(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}T$(function(){var d=i,f=FE(r),u=[];e:{var h=sF.get(e);if(h!==void 0){var m=WE,v=e;switch(e){case"keypress":if(qy(r)===0)break e;case"keydown":case"keyup":m=SG;break;case"focusin":v="focus",m=J2;break;case"focusout":v="blur",m=J2;break;case"beforeblur":case"afterblur":m=J2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=M3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=fG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=EG;break;case eF:case tF:case rF:m=pG;break;case nF:m=TG;break;case"scroll":m=dG;break;case"wheel":m=IG;break;case"copy":case"cut":case"paste":m=gG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=z3}var g=(t&4)!==0,p=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var b=d,y;b!==null;){y=b;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,x!==null&&(j=tg(b,x),j!=null&&g.push(lg(b,j,y)))),p)break;b=b.return}0<g.length&&(h=new m(h,v,null,r,f),u.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==c5&&(v=r.relatedTarget||r.fromElement)&&(Nu(v)||v[oc]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=d,v=v?Nu(v):null,v!==null&&(p=cf(v),v!==p||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(g=M3,j="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=z3,j="onPointerLeave",x="onPointerEnter",b="pointer"),p=m==null?h:xh(m),y=v==null?h:xh(v),h=new g(j,b+"leave",m,r,f),h.target=p,h.relatedTarget=y,j=null,Nu(f)===d&&(g=new g(x,b+"enter",v,r,f),g.target=y,g.relatedTarget=p,j=g),p=j,m&&v)t:{for(g=m,x=v,b=0,y=g;y;y=Kf(y))b++;for(y=0,j=x;j;j=Kf(j))y++;for(;0<b-y;)g=Kf(g),b--;for(;0<y-b;)x=Kf(x),y--;for(;b--;){if(g===x||x!==null&&g===x.alternate)break t;g=Kf(g),x=Kf(x)}g=null}else g=null;m!==null&&J3(u,h,m,g,!1),v!==null&&p!==null&&J3(u,p,v,g,!0)}}e:{if(h=d?xh(d):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var E=FG;else if(W3(h))if(Y$)E=UG;else{E=BG;var A=MG}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=zG);if(E&&(E=E(e,d))){K$(u,E,r,f);break e}A&&A(e,h,d),e==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&s5(h,"number",h.value)}switch(A=d?xh(d):window,e){case"focusin":(W3(A)||A.contentEditable==="true")&&(vh=A,v5=d,_v=null);break;case"focusout":_v=v5=vh=null;break;case"mousedown":g5=!0;break;case"contextmenu":case"mouseup":case"dragend":g5=!1,Y3(u,r,f);break;case"selectionchange":if(qG)break;case"keydown":case"keyup":Y3(u,r,f)}var C;if(HE)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ph?H$(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(q$&&r.locale!=="ko"&&(ph||S!=="onCompositionStart"?S==="onCompositionEnd"&&ph&&(C=W$()):(nd=f,VE="value"in nd?nd.value:nd.textContent,ph=!0)),A=gb(d,S),0<A.length&&(S=new B3(S,e,null,r,f),u.push({event:S,listeners:A}),C?S.data=C:(C=G$(r),C!==null&&(S.data=C)))),(C=DG?OG(e,r):LG(e,r))&&(d=gb(d,"onBeforeInput"),0<d.length&&(f=new B3("onBeforeInput","beforeinput",null,r,f),u.push({event:f,listeners:d}),f.data=C))}aF(u,t)})}function lg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gb(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=tg(e,r),i!=null&&s.unshift(lg(e,i,a)),i=tg(e,t),i!=null&&s.push(lg(e,i,a))),e=e.return}return s}function Kf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function J3(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=tg(r,i),c!=null&&o.unshift(lg(r,c,l))):a||(c=tg(r,i),c!=null&&o.push(lg(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var YG=/\r\n?/g,XG=/\u0000|\uFFFD/g;function Z3(e){return(typeof e=="string"?e:""+e).replace(YG,`
`).replace(XG,"")}function W0(e,t,r){if(t=Z3(t),Z3(e)!==t&&r)throw Error(ot(425))}function xb(){}var x5=null,y5=null;function b5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var j5=typeof setTimeout=="function"?setTimeout:void 0,QG=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,JG=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(e){return e_.resolve(null).then(e).catch(ZG)}:j5;function ZG(e){setTimeout(function(){throw e})}function iN(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),sg(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);sg(t)}function md(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function t_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Dm=Math.random().toString(36).slice(2),sl="__reactFiber$"+Dm,cg="__reactProps$"+Dm,oc="__reactContainer$"+Dm,w5="__reactEvents$"+Dm,eK="__reactListeners$"+Dm,tK="__reactHandles$"+Dm;function Nu(e){var t=e[sl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[oc]||r[sl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=t_(e);e!==null;){if(r=e[sl])return r;e=t_(e)}return t}e=r,r=e.parentNode}return null}function vx(e){return e=e[sl]||e[oc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ot(33))}function hj(e){return e[cg]||null}var N5=[],yh=-1;function Fd(e){return{current:e}}function pn(e){0>yh||(e.current=N5[yh],N5[yh]=null,yh--)}function nn(e,t){yh++,N5[yh]=e.current,e.current=t}var Ed={},oa=Fd(Ed),Wa=Fd(!1),Gu=Ed;function Wh(e,t){var r=e.type.contextTypes;if(!r)return Ed;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function qa(e){return e=e.childContextTypes,e!=null}function yb(){pn(Wa),pn(oa)}function r_(e,t,r){if(oa.current!==Ed)throw Error(ot(168));nn(oa,t),nn(Wa,r)}function oF(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(ot(108,MH(e)||"Unknown",a));return _n({},r,s)}function bb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ed,Gu=oa.current,nn(oa,e),nn(Wa,Wa.current),!0}function n_(e,t,r){var s=e.stateNode;if(!s)throw Error(ot(169));r?(e=oF(e,t,Gu),s.__reactInternalMemoizedMergedChildContext=e,pn(Wa),pn(oa),nn(oa,e)):pn(Wa),nn(Wa,r)}var ql=null,mj=!1,oN=!1;function lF(e){ql===null?ql=[e]:ql.push(e)}function rK(e){mj=!0,lF(e)}function Md(){if(!oN&&ql!==null){oN=!0;var e=0,t=$r;try{var r=ql;for($r=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}ql=null,mj=!1}catch(a){throw ql!==null&&(ql=ql.slice(e+1)),D$(ME,Md),a}finally{$r=t,oN=!1}}return null}var bh=[],jh=0,jb=null,wb=0,Bi=[],zi=0,Ku=null,Gl=1,Kl="";function fu(e,t){bh[jh++]=wb,bh[jh++]=jb,jb=e,wb=t}function cF(e,t,r){Bi[zi++]=Gl,Bi[zi++]=Kl,Bi[zi++]=Ku,Ku=e;var s=Gl;e=Kl;var a=32-Io(s)-1;s&=~(1<<a),r+=1;var i=32-Io(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Gl=1<<32-Io(t)+a|r<<a|s,Kl=i+e}else Gl=1<<i|r<<a|s,Kl=e}function KE(e){e.return!==null&&(fu(e,1),cF(e,1,0))}function YE(e){for(;e===jb;)jb=bh[--jh],bh[jh]=null,wb=bh[--jh],bh[jh]=null;for(;e===Ku;)Ku=Bi[--zi],Bi[zi]=null,Kl=Bi[--zi],Bi[zi]=null,Gl=Bi[--zi],Bi[zi]=null}var pi=null,fi=null,gn=!1,Co=null;function dF(e,t){var r=Ui(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function s_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pi=e,fi=md(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pi=e,fi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ku!==null?{id:Gl,overflow:Kl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ui(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,pi=e,fi=null,!0):!1;default:return!1}}function S5(e){return(e.mode&1)!==0&&(e.flags&128)===0}function C5(e){if(gn){var t=fi;if(t){var r=t;if(!s_(e,t)){if(S5(e))throw Error(ot(418));t=md(r.nextSibling);var s=pi;t&&s_(e,t)?dF(s,r):(e.flags=e.flags&-4097|2,gn=!1,pi=e)}}else{if(S5(e))throw Error(ot(418));e.flags=e.flags&-4097|2,gn=!1,pi=e}}}function a_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pi=e}function q0(e){if(e!==pi)return!1;if(!gn)return a_(e),gn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!b5(e.type,e.memoizedProps)),t&&(t=fi)){if(S5(e))throw uF(),Error(ot(418));for(;t;)dF(e,t),t=md(t.nextSibling)}if(a_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){fi=md(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}fi=null}}else fi=pi?md(e.stateNode.nextSibling):null;return!0}function uF(){for(var e=fi;e;)e=md(e.nextSibling)}function qh(){fi=pi=null,gn=!1}function XE(e){Co===null?Co=[e]:Co.push(e)}var nK=yc.ReactCurrentBatchConfig;function Wp(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ot(309));var s=r.stateNode}if(!s)throw Error(ot(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ot(284));if(!r._owner)throw Error(ot(290,e))}return e}function H0(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function i_(e){var t=e._init;return t(e._payload)}function fF(e){function t(x,b){if(e){var y=x.deletions;y===null?(x.deletions=[b],x.flags|=16):y.push(b)}}function r(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function s(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function a(x,b){return x=xd(x,b),x.index=0,x.sibling=null,x}function i(x,b,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<b?(x.flags|=2,b):y):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,b,y,j){return b===null||b.tag!==6?(b=mN(y,x.mode,j),b.return=x,b):(b=a(b,y),b.return=x,b)}function c(x,b,y,j){var E=y.type;return E===mh?f(x,b,y.props.children,j,y.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Gc&&i_(E)===b.type)?(j=a(b,y.props),j.ref=Wp(x,b,y),j.return=x,j):(j=Jy(y.type,y.key,y.props,null,x.mode,j),j.ref=Wp(x,b,y),j.return=x,j)}function d(x,b,y,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=pN(y,x.mode,j),b.return=x,b):(b=a(b,y.children||[]),b.return=x,b)}function f(x,b,y,j,E){return b===null||b.tag!==7?(b=Fu(y,x.mode,j,E),b.return=x,b):(b=a(b,y),b.return=x,b)}function u(x,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=mN(""+b,x.mode,y),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case L0:return y=Jy(b.type,b.key,b.props,null,x.mode,y),y.ref=Wp(x,null,b),y.return=x,y;case hh:return b=pN(b,x.mode,y),b.return=x,b;case Gc:var j=b._init;return u(x,j(b._payload),y)}if(bv(b)||Mp(b))return b=Fu(b,x.mode,y,null),b.return=x,b;H0(x,b)}return null}function h(x,b,y,j){var E=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(x,b,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case L0:return y.key===E?c(x,b,y,j):null;case hh:return y.key===E?d(x,b,y,j):null;case Gc:return E=y._init,h(x,b,E(y._payload),j)}if(bv(y)||Mp(y))return E!==null?null:f(x,b,y,j,null);H0(x,y)}return null}function m(x,b,y,j,E){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(y)||null,l(b,x,""+j,E);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case L0:return x=x.get(j.key===null?y:j.key)||null,c(b,x,j,E);case hh:return x=x.get(j.key===null?y:j.key)||null,d(b,x,j,E);case Gc:var A=j._init;return m(x,b,y,A(j._payload),E)}if(bv(j)||Mp(j))return x=x.get(y)||null,f(b,x,j,E,null);H0(b,j)}return null}function v(x,b,y,j){for(var E=null,A=null,C=b,S=b=0,T=null;C!==null&&S<y.length;S++){C.index>S?(T=C,C=null):T=C.sibling;var O=h(x,C,y[S],j);if(O===null){C===null&&(C=T);break}e&&C&&O.alternate===null&&t(x,C),b=i(O,b,S),A===null?E=O:A.sibling=O,A=O,C=T}if(S===y.length)return r(x,C),gn&&fu(x,S),E;if(C===null){for(;S<y.length;S++)C=u(x,y[S],j),C!==null&&(b=i(C,b,S),A===null?E=C:A.sibling=C,A=C);return gn&&fu(x,S),E}for(C=s(x,C);S<y.length;S++)T=m(C,x,S,y[S],j),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?S:T.key),b=i(T,b,S),A===null?E=T:A.sibling=T,A=T);return e&&C.forEach(function(_){return t(x,_)}),gn&&fu(x,S),E}function g(x,b,y,j){var E=Mp(y);if(typeof E!="function")throw Error(ot(150));if(y=E.call(y),y==null)throw Error(ot(151));for(var A=E=null,C=b,S=b=0,T=null,O=y.next();C!==null&&!O.done;S++,O=y.next()){C.index>S?(T=C,C=null):T=C.sibling;var _=h(x,C,O.value,j);if(_===null){C===null&&(C=T);break}e&&C&&_.alternate===null&&t(x,C),b=i(_,b,S),A===null?E=_:A.sibling=_,A=_,C=T}if(O.done)return r(x,C),gn&&fu(x,S),E;if(C===null){for(;!O.done;S++,O=y.next())O=u(x,O.value,j),O!==null&&(b=i(O,b,S),A===null?E=O:A.sibling=O,A=O);return gn&&fu(x,S),E}for(C=s(x,C);!O.done;S++,O=y.next())O=m(C,x,S,O.value,j),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?S:O.key),b=i(O,b,S),A===null?E=O:A.sibling=O,A=O);return e&&C.forEach(function(N){return t(x,N)}),gn&&fu(x,S),E}function p(x,b,y,j){if(typeof y=="object"&&y!==null&&y.type===mh&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case L0:e:{for(var E=y.key,A=b;A!==null;){if(A.key===E){if(E=y.type,E===mh){if(A.tag===7){r(x,A.sibling),b=a(A,y.props.children),b.return=x,x=b;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Gc&&i_(E)===A.type){r(x,A.sibling),b=a(A,y.props),b.ref=Wp(x,A,y),b.return=x,x=b;break e}r(x,A);break}else t(x,A);A=A.sibling}y.type===mh?(b=Fu(y.props.children,x.mode,j,y.key),b.return=x,x=b):(j=Jy(y.type,y.key,y.props,null,x.mode,j),j.ref=Wp(x,b,y),j.return=x,x=j)}return o(x);case hh:e:{for(A=y.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){r(x,b.sibling),b=a(b,y.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else t(x,b);b=b.sibling}b=pN(y,x.mode,j),b.return=x,x=b}return o(x);case Gc:return A=y._init,p(x,b,A(y._payload),j)}if(bv(y))return v(x,b,y,j);if(Mp(y))return g(x,b,y,j);H0(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(r(x,b.sibling),b=a(b,y),b.return=x,x=b):(r(x,b),b=mN(y,x.mode,j),b.return=x,x=b),o(x)):r(x,b)}return p}var Hh=fF(!0),hF=fF(!1),Nb=Fd(null),Sb=null,wh=null,QE=null;function JE(){QE=wh=Sb=null}function ZE(e){var t=Nb.current;pn(Nb),e._currentValue=t}function A5(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function kh(e,t){Sb=e,QE=wh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ua=!0),e.firstContext=null)}function Xi(e){var t=e._currentValue;if(QE!==e)if(e={context:e,memoizedValue:t,next:null},wh===null){if(Sb===null)throw Error(ot(308));wh=e,Sb.dependencies={lanes:0,firstContext:e}}else wh=wh.next=e;return t}var Su=null;function e4(e){Su===null?Su=[e]:Su.push(e)}function mF(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,e4(t)):(r.next=a.next,a.next=r),t.interleaved=r,lc(e,s)}function lc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Kc=!1;function t4(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pd(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Cr&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,lc(e,r)}return a=s.interleaved,a===null?(t.next=t,e4(s)):(t.next=a.next,a.next=t),s.interleaved=t,lc(e,r)}function Hy(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,BE(e,r)}}function o_(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cb(e,t,r,s){var a=e.updateQueue;Kc=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var u=a.baseState;o=0,f=d=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((s&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,g=l;switch(h=t,m=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){u=v.call(m,u,h);break e}u=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,h=typeof v=="function"?v.call(m,u,h):v,h==null)break e;u=_n({},u,h);break e;case 2:Kc=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,c=u):f=f.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(f===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Xu|=o,e.lanes=o,e.memoizedState=u}}function l_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(ot(191,a));a.call(s)}}}var gx={},fl=Fd(gx),dg=Fd(gx),ug=Fd(gx);function Cu(e){if(e===gx)throw Error(ot(174));return e}function r4(e,t){switch(nn(ug,t),nn(dg,e),nn(fl,gx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:i5(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=i5(t,e)}pn(fl),nn(fl,t)}function Gh(){pn(fl),pn(dg),pn(ug)}function vF(e){Cu(ug.current);var t=Cu(fl.current),r=i5(t,e.type);t!==r&&(nn(dg,e),nn(fl,r))}function n4(e){dg.current===e&&(pn(fl),pn(dg))}var An=Fd(0);function Ab(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lN=[];function s4(){for(var e=0;e<lN.length;e++)lN[e]._workInProgressVersionPrimary=null;lN.length=0}var Gy=yc.ReactCurrentDispatcher,cN=yc.ReactCurrentBatchConfig,Yu=0,Tn=null,cs=null,ws=null,Eb=!1,Iv=!1,fg=0,sK=0;function Gs(){throw Error(ot(321))}function a4(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Oo(e[r],t[r]))return!1;return!0}function i4(e,t,r,s,a,i){if(Yu=i,Tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gy.current=e===null||e.memoizedState===null?lK:cK,e=r(s,a),Iv){i=0;do{if(Iv=!1,fg=0,25<=i)throw Error(ot(301));i+=1,ws=cs=null,t.updateQueue=null,Gy.current=dK,e=r(s,a)}while(Iv)}if(Gy.current=Pb,t=cs!==null&&cs.next!==null,Yu=0,ws=cs=Tn=null,Eb=!1,t)throw Error(ot(300));return e}function o4(){var e=fg!==0;return fg=0,e}function Zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ws===null?Tn.memoizedState=ws=e:ws=ws.next=e,ws}function Qi(){if(cs===null){var e=Tn.alternate;e=e!==null?e.memoizedState:null}else e=cs.next;var t=ws===null?Tn.memoizedState:ws.next;if(t!==null)ws=t,cs=e;else{if(e===null)throw Error(ot(310));cs=e,e={memoizedState:cs.memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},ws===null?Tn.memoizedState=ws=e:ws=ws.next=e}return ws}function hg(e,t){return typeof t=="function"?t(e):t}function dN(e){var t=Qi(),r=t.queue;if(r===null)throw Error(ot(311));r.lastRenderedReducer=e;var s=cs,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((Yu&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var u={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,o=s):c=c.next=u,Tn.lanes|=f,Xu|=f}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,Oo(s,t.memoizedState)||(Ua=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Tn.lanes|=i,Xu|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function uN(e){var t=Qi(),r=t.queue;if(r===null)throw Error(ot(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Oo(i,t.memoizedState)||(Ua=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function gF(){}function xF(e,t){var r=Tn,s=Qi(),a=t(),i=!Oo(s.memoizedState,a);if(i&&(s.memoizedState=a,Ua=!0),s=s.queue,l4(jF.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||ws!==null&&ws.memoizedState.tag&1){if(r.flags|=2048,mg(9,bF.bind(null,r,s,a,t),void 0,null),Ss===null)throw Error(ot(349));Yu&30||yF(r,t,a)}return a}function yF(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function bF(e,t,r,s){t.value=r,t.getSnapshot=s,wF(t)&&NF(e)}function jF(e,t,r){return r(function(){wF(t)&&NF(e)})}function wF(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Oo(e,r)}catch{return!0}}function NF(e){var t=lc(e,1);t!==null&&ko(t,e,1,-1)}function c_(e){var t=Zo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hg,lastRenderedState:e},t.queue=e,e=e.dispatch=oK.bind(null,Tn,e),[t.memoizedState,e]}function mg(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function SF(){return Qi().memoizedState}function Ky(e,t,r,s){var a=Zo();Tn.flags|=e,a.memoizedState=mg(1|t,r,void 0,s===void 0?null:s)}function pj(e,t,r,s){var a=Qi();s=s===void 0?null:s;var i=void 0;if(cs!==null){var o=cs.memoizedState;if(i=o.destroy,s!==null&&a4(s,o.deps)){a.memoizedState=mg(t,r,i,s);return}}Tn.flags|=e,a.memoizedState=mg(1|t,r,i,s)}function d_(e,t){return Ky(8390656,8,e,t)}function l4(e,t){return pj(2048,8,e,t)}function CF(e,t){return pj(4,2,e,t)}function AF(e,t){return pj(4,4,e,t)}function EF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function PF(e,t,r){return r=r!=null?r.concat([e]):null,pj(4,4,EF.bind(null,t,e),r)}function c4(){}function TF(e,t){var r=Qi();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&a4(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function _F(e,t){var r=Qi();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&a4(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function IF(e,t,r){return Yu&21?(Oo(r,t)||(r=R$(),Tn.lanes|=r,Xu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ua=!0),e.memoizedState=r)}function aK(e,t){var r=$r;$r=r!==0&&4>r?r:4,e(!0);var s=cN.transition;cN.transition={};try{e(!1),t()}finally{$r=r,cN.transition=s}}function kF(){return Qi().memoizedState}function iK(e,t,r){var s=gd(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},DF(e))OF(t,r);else if(r=mF(e,t,r,s),r!==null){var a=ya();ko(r,e,s,a),LF(r,t,s)}}function oK(e,t,r){var s=gd(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(DF(e))OF(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Oo(l,o)){var c=t.interleaved;c===null?(a.next=a,e4(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=mF(e,t,a,s),r!==null&&(a=ya(),ko(r,e,s,a),LF(r,t,s))}}function DF(e){var t=e.alternate;return e===Tn||t!==null&&t===Tn}function OF(e,t){Iv=Eb=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function LF(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,BE(e,r)}}var Pb={readContext:Xi,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useInsertionEffect:Gs,useLayoutEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useMutableSource:Gs,useSyncExternalStore:Gs,useId:Gs,unstable_isNewReconciler:!1},lK={readContext:Xi,useCallback:function(e,t){return Zo().memoizedState=[e,t===void 0?null:t],e},useContext:Xi,useEffect:d_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ky(4194308,4,EF.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ky(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ky(4,2,e,t)},useMemo:function(e,t){var r=Zo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Zo();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=iK.bind(null,Tn,e),[s.memoizedState,e]},useRef:function(e){var t=Zo();return e={current:e},t.memoizedState=e},useState:c_,useDebugValue:c4,useDeferredValue:function(e){return Zo().memoizedState=e},useTransition:function(){var e=c_(!1),t=e[0];return e=aK.bind(null,e[1]),Zo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Tn,a=Zo();if(gn){if(r===void 0)throw Error(ot(407));r=r()}else{if(r=t(),Ss===null)throw Error(ot(349));Yu&30||yF(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,d_(jF.bind(null,s,i,e),[e]),s.flags|=2048,mg(9,bF.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=Zo(),t=Ss.identifierPrefix;if(gn){var r=Kl,s=Gl;r=(s&~(1<<32-Io(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=fg++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=sK++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cK={readContext:Xi,useCallback:TF,useContext:Xi,useEffect:l4,useImperativeHandle:PF,useInsertionEffect:CF,useLayoutEffect:AF,useMemo:_F,useReducer:dN,useRef:SF,useState:function(){return dN(hg)},useDebugValue:c4,useDeferredValue:function(e){var t=Qi();return IF(t,cs.memoizedState,e)},useTransition:function(){var e=dN(hg)[0],t=Qi().memoizedState;return[e,t]},useMutableSource:gF,useSyncExternalStore:xF,useId:kF,unstable_isNewReconciler:!1},dK={readContext:Xi,useCallback:TF,useContext:Xi,useEffect:l4,useImperativeHandle:PF,useInsertionEffect:CF,useLayoutEffect:AF,useMemo:_F,useReducer:uN,useRef:SF,useState:function(){return uN(hg)},useDebugValue:c4,useDeferredValue:function(e){var t=Qi();return cs===null?t.memoizedState=e:IF(t,cs.memoizedState,e)},useTransition:function(){var e=uN(hg)[0],t=Qi().memoizedState;return[e,t]},useMutableSource:gF,useSyncExternalStore:xF,useId:kF,unstable_isNewReconciler:!1};function xo(e,t){if(e&&e.defaultProps){t=_n({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function E5(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:_n({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vj={isMounted:function(e){return(e=e._reactInternals)?cf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ya(),a=gd(e),i=Zl(s,a);i.payload=t,r!=null&&(i.callback=r),t=pd(e,i,a),t!==null&&(ko(t,e,a,s),Hy(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ya(),a=gd(e),i=Zl(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=pd(e,i,a),t!==null&&(ko(t,e,a,s),Hy(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ya(),s=gd(e),a=Zl(r,s);a.tag=2,t!=null&&(a.callback=t),t=pd(e,a,s),t!==null&&(ko(t,e,s,r),Hy(t,e,s))}};function u_(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!ig(r,s)||!ig(a,i):!0}function RF(e,t,r){var s=!1,a=Ed,i=t.contextType;return typeof i=="object"&&i!==null?i=Xi(i):(a=qa(t)?Gu:oa.current,s=t.contextTypes,i=(s=s!=null)?Wh(e,a):Ed),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vj,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function f_(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&vj.enqueueReplaceState(t,t.state,null)}function P5(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},t4(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Xi(i):(i=qa(t)?Gu:oa.current,a.context=Wh(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(E5(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&vj.enqueueReplaceState(a,a.state,null),Cb(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Kh(e,t){try{var r="",s=t;do r+=FH(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function fN(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function T5(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var uK=typeof WeakMap=="function"?WeakMap:Map;function $F(e,t,r){r=Zl(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){_b||(_b=!0,M5=s),T5(e,t)},r}function FF(e,t,r){r=Zl(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){T5(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){T5(e,t),typeof s!="function"&&(vd===null?vd=new Set([this]):vd.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function h_(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new uK;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=CK.bind(null,e,t,r),t.then(e,e))}function m_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function p_(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Zl(-1,1),t.tag=2,pd(r,t,1))),r.lanes|=1),e)}var fK=yc.ReactCurrentOwner,Ua=!1;function pa(e,t,r,s){t.child=e===null?hF(t,null,r,s):Hh(t,e.child,r,s)}function v_(e,t,r,s,a){r=r.render;var i=t.ref;return kh(t,a),s=i4(e,t,r,s,i,a),r=o4(),e!==null&&!Ua?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,cc(e,t,a)):(gn&&r&&KE(t),t.flags|=1,pa(e,t,s,a),t.child)}function g_(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!g4(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,MF(e,t,i,s,a)):(e=Jy(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ig,r(o,s)&&e.ref===t.ref)return cc(e,t,a)}return t.flags|=1,e=xd(i,s),e.ref=t.ref,e.return=t,t.child=e}function MF(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(ig(i,s)&&e.ref===t.ref)if(Ua=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Ua=!0);else return t.lanes=e.lanes,cc(e,t,a)}return _5(e,t,r,s,a)}function BF(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(Sh,oi),oi|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nn(Sh,oi),oi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,nn(Sh,oi),oi|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,nn(Sh,oi),oi|=s;return pa(e,t,a,r),t.child}function zF(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _5(e,t,r,s,a){var i=qa(r)?Gu:oa.current;return i=Wh(t,i),kh(t,a),r=i4(e,t,r,s,i,a),s=o4(),e!==null&&!Ua?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,cc(e,t,a)):(gn&&s&&KE(t),t.flags|=1,pa(e,t,r,a),t.child)}function x_(e,t,r,s,a){if(qa(r)){var i=!0;bb(t)}else i=!1;if(kh(t,a),t.stateNode===null)Yy(e,t),RF(t,r,s),P5(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Xi(d):(d=qa(r)?Gu:oa.current,d=Wh(t,d));var f=r.getDerivedStateFromProps,u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&f_(t,o,s,d),Kc=!1;var h=t.memoizedState;o.state=h,Cb(t,s,o,a),c=t.memoizedState,l!==s||h!==c||Wa.current||Kc?(typeof f=="function"&&(E5(t,r,f,s),c=t.memoizedState),(l=Kc||u_(t,r,l,s,h,c,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,pF(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:xo(t.type,l),o.props=d,u=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Xi(c):(c=qa(r)?Gu:oa.current,c=Wh(t,c));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||h!==c)&&f_(t,o,s,c),Kc=!1,h=t.memoizedState,o.state=h,Cb(t,s,o,a);var v=t.memoizedState;l!==u||h!==v||Wa.current||Kc?(typeof m=="function"&&(E5(t,r,m,s),v=t.memoizedState),(d=Kc||u_(t,r,d,s,h,v,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),o.props=s,o.state=v,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return I5(e,t,r,s,i,a)}function I5(e,t,r,s,a,i){zF(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&n_(t,r,!1),cc(e,t,i);s=t.stateNode,fK.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Hh(t,e.child,null,i),t.child=Hh(t,null,l,i)):pa(e,t,l,i),t.memoizedState=s.state,a&&n_(t,r,!0),t.child}function UF(e){var t=e.stateNode;t.pendingContext?r_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&r_(e,t.context,!1),r4(e,t.containerInfo)}function y_(e,t,r,s,a){return qh(),XE(a),t.flags|=256,pa(e,t,r,s),t.child}var k5={dehydrated:null,treeContext:null,retryLane:0};function D5(e){return{baseLanes:e,cachePool:null,transitions:null}}function VF(e,t,r){var s=t.pendingProps,a=An.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),nn(An,a&1),e===null)return C5(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yj(o,s,0,null),e=Fu(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=D5(r),t.memoizedState=k5,e):d4(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return hK(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=xd(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=xd(l,i):(i=Fu(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?D5(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=k5,s}return i=e.child,e=i.sibling,s=xd(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function d4(e,t){return t=yj({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function G0(e,t,r,s){return s!==null&&XE(s),Hh(t,e.child,null,r),e=d4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hK(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=fN(Error(ot(422))),G0(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=yj({mode:"visible",children:s.children},a,0,null),i=Fu(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Hh(t,e.child,null,o),t.child.memoizedState=D5(o),t.memoizedState=k5,i);if(!(t.mode&1))return G0(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(ot(419)),s=fN(i,s,void 0),G0(e,t,o,s)}if(l=(o&e.childLanes)!==0,Ua||l){if(s=Ss,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,lc(e,a),ko(s,e,a,-1))}return v4(),s=fN(Error(ot(421))),G0(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=AK.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,fi=md(a.nextSibling),pi=t,gn=!0,Co=null,e!==null&&(Bi[zi++]=Gl,Bi[zi++]=Kl,Bi[zi++]=Ku,Gl=e.id,Kl=e.overflow,Ku=t),t=d4(t,s.children),t.flags|=4096,t)}function b_(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),A5(e.return,t,r)}function hN(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function WF(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(pa(e,t,s.children,r),s=An.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&b_(e,r,t);else if(e.tag===19)b_(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(nn(An,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ab(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),hN(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ab(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}hN(t,!0,r,null,i);break;case"together":hN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Xu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ot(153));if(t.child!==null){for(e=t.child,r=xd(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=xd(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function mK(e,t,r){switch(t.tag){case 3:UF(t),qh();break;case 5:vF(t);break;case 1:qa(t.type)&&bb(t);break;case 4:r4(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;nn(Nb,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(nn(An,An.current&1),t.flags|=128,null):r&t.child.childLanes?VF(e,t,r):(nn(An,An.current&1),e=cc(e,t,r),e!==null?e.sibling:null);nn(An,An.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return WF(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nn(An,An.current),s)break;return null;case 22:case 23:return t.lanes=0,BF(e,t,r)}return cc(e,t,r)}var qF,O5,HF,GF;qF=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};O5=function(){};HF=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Cu(fl.current);var i=null;switch(r){case"input":a=r5(e,a),s=r5(e,s),i=[];break;case"select":a=_n({},a,{value:void 0}),s=_n({},s,{value:void 0}),i=[];break;case"textarea":a=a5(e,a),s=a5(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=xb)}o5(r,s);var o;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zv.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Zv.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&dn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};GF=function(e,t,r,s){r!==s&&(t.flags|=4)};function qp(e,t){if(!gn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ks(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function pK(e,t,r){var s=t.pendingProps;switch(YE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:return qa(t.type)&&yb(),Ks(t),null;case 3:return s=t.stateNode,Gh(),pn(Wa),pn(oa),s4(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(q0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Co!==null&&(U5(Co),Co=null))),O5(e,t),Ks(t),null;case 5:n4(t);var a=Cu(ug.current);if(r=t.type,e!==null&&t.stateNode!=null)HF(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(ot(166));return Ks(t),null}if(e=Cu(fl.current),q0(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[sl]=t,s[cg]=i,e=(t.mode&1)!==0,r){case"dialog":dn("cancel",s),dn("close",s);break;case"iframe":case"object":case"embed":dn("load",s);break;case"video":case"audio":for(a=0;a<wv.length;a++)dn(wv[a],s);break;case"source":dn("error",s);break;case"img":case"image":case"link":dn("error",s),dn("load",s);break;case"details":dn("toggle",s);break;case"input":T3(s,i),dn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},dn("invalid",s);break;case"textarea":I3(s,i),dn("invalid",s)}o5(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&W0(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&W0(s.textContent,l,e),a=["children",""+l]):Zv.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&dn("scroll",s)}switch(r){case"input":R0(s),_3(s,i,!0);break;case"textarea":R0(s),k3(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=xb)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=j$(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[sl]=t,e[cg]=s,qF(e,t,!1,!1),t.stateNode=e;e:{switch(o=l5(r,s),r){case"dialog":dn("cancel",e),dn("close",e),a=s;break;case"iframe":case"object":case"embed":dn("load",e),a=s;break;case"video":case"audio":for(a=0;a<wv.length;a++)dn(wv[a],e);a=s;break;case"source":dn("error",e),a=s;break;case"img":case"image":case"link":dn("error",e),dn("load",e),a=s;break;case"details":dn("toggle",e),a=s;break;case"input":T3(e,s),a=r5(e,s),dn("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=_n({},s,{value:void 0}),dn("invalid",e);break;case"textarea":I3(e,s),a=a5(e,s),dn("invalid",e);break;default:a=s}o5(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?S$(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&w$(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&eg(e,c):typeof c=="number"&&eg(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zv.hasOwnProperty(i)?c!=null&&i==="onScroll"&&dn("scroll",e):c!=null&&OE(e,i,c,o))}switch(r){case"input":R0(e),_3(e,s,!1);break;case"textarea":R0(e),k3(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ad(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Ph(e,!!s.multiple,i,!1):s.defaultValue!=null&&Ph(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=xb)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&t.stateNode!=null)GF(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(ot(166));if(r=Cu(ug.current),Cu(fl.current),q0(t)){if(s=t.stateNode,r=t.memoizedProps,s[sl]=t,(i=s.nodeValue!==r)&&(e=pi,e!==null))switch(e.tag){case 3:W0(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&W0(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[sl]=t,t.stateNode=s}return Ks(t),null;case 13:if(pn(An),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(gn&&fi!==null&&t.mode&1&&!(t.flags&128))uF(),qh(),t.flags|=98560,i=!1;else if(i=q0(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(ot(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ot(317));i[sl]=t}else qh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ks(t),i=!1}else Co!==null&&(U5(Co),Co=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||An.current&1?us===0&&(us=3):v4())),t.updateQueue!==null&&(t.flags|=4),Ks(t),null);case 4:return Gh(),O5(e,t),e===null&&og(t.stateNode.containerInfo),Ks(t),null;case 10:return ZE(t.type._context),Ks(t),null;case 17:return qa(t.type)&&yb(),Ks(t),null;case 19:if(pn(An),i=t.memoizedState,i===null)return Ks(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)qp(i,!1);else{if(us!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ab(e),o!==null){for(t.flags|=128,qp(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return nn(An,An.current&1|2),t.child}e=e.sibling}i.tail!==null&&Wn()>Yh&&(t.flags|=128,s=!0,qp(i,!1),t.lanes=4194304)}else{if(!s)if(e=Ab(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),qp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!gn)return Ks(t),null}else 2*Wn()-i.renderingStartTime>Yh&&r!==1073741824&&(t.flags|=128,s=!0,qp(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Wn(),t.sibling=null,r=An.current,nn(An,s?r&1|2:r&1),t):(Ks(t),null);case 22:case 23:return p4(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?oi&1073741824&&(Ks(t),t.subtreeFlags&6&&(t.flags|=8192)):Ks(t),null;case 24:return null;case 25:return null}throw Error(ot(156,t.tag))}function vK(e,t){switch(YE(t),t.tag){case 1:return qa(t.type)&&yb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gh(),pn(Wa),pn(oa),s4(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return n4(t),null;case 13:if(pn(An),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ot(340));qh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pn(An),null;case 4:return Gh(),null;case 10:return ZE(t.type._context),null;case 22:case 23:return p4(),null;case 24:return null;default:return null}}var K0=!1,ta=!1,gK=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Nh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ln(e,t,s)}else r.current=null}function L5(e,t,r){try{r()}catch(s){Ln(e,t,s)}}var j_=!1;function xK(e,t){if(x5=pb,e=J$(),GE(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,f=0,u=e,h=null;t:for(;;){for(var m;u!==r||a!==0&&u.nodeType!==3||(l=o+a),u!==i||s!==0&&u.nodeType!==3||(c=o+s),u.nodeType===3&&(o+=u.nodeValue.length),(m=u.firstChild)!==null;)h=u,u=m;for(;;){if(u===e)break t;if(h===r&&++d===a&&(l=o),h===i&&++f===s&&(c=o),(m=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(y5={focusedElem:e,selectionRange:r},pb=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){t=Nt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,p=v.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:xo(t.type,g),p);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(j){Ln(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}return v=j_,j_=!1,v}function kv(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&L5(t,r,i)}a=a.next}while(a!==s)}}function gj(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function R5(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function KF(e){var t=e.alternate;t!==null&&(e.alternate=null,KF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sl],delete t[cg],delete t[w5],delete t[eK],delete t[tK])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YF(e){return e.tag===5||e.tag===3||e.tag===4}function w_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $5(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xb));else if(s!==4&&(e=e.child,e!==null))for($5(e,t,r),e=e.sibling;e!==null;)$5(e,t,r),e=e.sibling}function F5(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(F5(e,t,r),e=e.sibling;e!==null;)F5(e,t,r),e=e.sibling}var Ls=null,jo=!1;function Fc(e,t,r){for(r=r.child;r!==null;)XF(e,t,r),r=r.sibling}function XF(e,t,r){if(ul&&typeof ul.onCommitFiberUnmount=="function")try{ul.onCommitFiberUnmount(cj,r)}catch{}switch(r.tag){case 5:ta||Nh(r,t);case 6:var s=Ls,a=jo;Ls=null,Fc(e,t,r),Ls=s,jo=a,Ls!==null&&(jo?(e=Ls,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ls.removeChild(r.stateNode));break;case 18:Ls!==null&&(jo?(e=Ls,r=r.stateNode,e.nodeType===8?iN(e.parentNode,r):e.nodeType===1&&iN(e,r),sg(e)):iN(Ls,r.stateNode));break;case 4:s=Ls,a=jo,Ls=r.stateNode.containerInfo,jo=!0,Fc(e,t,r),Ls=s,jo=a;break;case 0:case 11:case 14:case 15:if(!ta&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&L5(r,t,o),a=a.next}while(a!==s)}Fc(e,t,r);break;case 1:if(!ta&&(Nh(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Ln(r,t,l)}Fc(e,t,r);break;case 21:Fc(e,t,r);break;case 22:r.mode&1?(ta=(s=ta)||r.memoizedState!==null,Fc(e,t,r),ta=s):Fc(e,t,r);break;default:Fc(e,t,r)}}function N_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new gK),t.forEach(function(s){var a=EK.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function uo(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ls=l.stateNode,jo=!1;break e;case 3:Ls=l.stateNode.containerInfo,jo=!0;break e;case 4:Ls=l.stateNode.containerInfo,jo=!0;break e}l=l.return}if(Ls===null)throw Error(ot(160));XF(i,o,a),Ls=null,jo=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ln(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QF(t,e),t=t.sibling}function QF(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(uo(t,e),Xo(e),s&4){try{kv(3,e,e.return),gj(3,e)}catch(g){Ln(e,e.return,g)}try{kv(5,e,e.return)}catch(g){Ln(e,e.return,g)}}break;case 1:uo(t,e),Xo(e),s&512&&r!==null&&Nh(r,r.return);break;case 5:if(uo(t,e),Xo(e),s&512&&r!==null&&Nh(r,r.return),e.flags&32){var a=e.stateNode;try{eg(a,"")}catch(g){Ln(e,e.return,g)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&y$(a,i),l5(l,o);var d=l5(l,i);for(o=0;o<c.length;o+=2){var f=c[o],u=c[o+1];f==="style"?S$(a,u):f==="dangerouslySetInnerHTML"?w$(a,u):f==="children"?eg(a,u):OE(a,f,u,d)}switch(l){case"input":n5(a,i);break;case"textarea":b$(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ph(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ph(a,!!i.multiple,i.defaultValue,!0):Ph(a,!!i.multiple,i.multiple?[]:"",!1))}a[cg]=i}catch(g){Ln(e,e.return,g)}}break;case 6:if(uo(t,e),Xo(e),s&4){if(e.stateNode===null)throw Error(ot(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ln(e,e.return,g)}}break;case 3:if(uo(t,e),Xo(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{sg(t.containerInfo)}catch(g){Ln(e,e.return,g)}break;case 4:uo(t,e),Xo(e);break;case 13:uo(t,e),Xo(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(h4=Wn())),s&4&&N_(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(ta=(d=ta)||f,uo(t,e),ta=d):uo(t,e),Xo(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(Nt=e,f=e.child;f!==null;){for(u=Nt=f;Nt!==null;){switch(h=Nt,m=h.child,h.tag){case 0:case 11:case 14:case 15:kv(4,h,h.return);break;case 1:Nh(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){s=h,r=h.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Ln(s,r,g)}}break;case 5:Nh(h,h.return);break;case 22:if(h.memoizedState!==null){C_(u);continue}}m!==null?(m.return=h,Nt=m):C_(u)}f=f.sibling}e:for(f=null,u=e;;){if(u.tag===5){if(f===null){f=u;try{a=u.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=N$("display",o))}catch(g){Ln(e,e.return,g)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(g){Ln(e,e.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:uo(t,e),Xo(e),s&4&&N_(e);break;case 21:break;default:uo(t,e),Xo(e)}}function Xo(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(YF(r)){var s=r;break e}r=r.return}throw Error(ot(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(eg(a,""),s.flags&=-33);var i=w_(e);F5(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=w_(e);$5(e,l,o);break;default:throw Error(ot(161))}}catch(c){Ln(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yK(e,t,r){Nt=e,JF(e)}function JF(e,t,r){for(var s=(e.mode&1)!==0;Nt!==null;){var a=Nt,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||K0;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ta;l=K0;var d=ta;if(K0=o,(ta=c)&&!d)for(Nt=a;Nt!==null;)o=Nt,c=o.child,o.tag===22&&o.memoizedState!==null?A_(a):c!==null?(c.return=o,Nt=c):A_(a);for(;i!==null;)Nt=i,JF(i),i=i.sibling;Nt=a,K0=l,ta=d}S_(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Nt=i):S_(e)}}function S_(e){for(;Nt!==null;){var t=Nt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ta||gj(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ta)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:xo(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&l_(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}l_(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&sg(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}ta||t.flags&512&&R5(t)}catch(h){Ln(t,t.return,h)}}if(t===e){Nt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Nt=r;break}Nt=t.return}}function C_(e){for(;Nt!==null;){var t=Nt;if(t===e){Nt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Nt=r;break}Nt=t.return}}function A_(e){for(;Nt!==null;){var t=Nt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{gj(4,t)}catch(c){Ln(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Ln(t,a,c)}}var i=t.return;try{R5(t)}catch(c){Ln(t,i,c)}break;case 5:var o=t.return;try{R5(t)}catch(c){Ln(t,o,c)}}}catch(c){Ln(t,t.return,c)}if(t===e){Nt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Nt=l;break}Nt=t.return}}var bK=Math.ceil,Tb=yc.ReactCurrentDispatcher,u4=yc.ReactCurrentOwner,qi=yc.ReactCurrentBatchConfig,Cr=0,Ss=null,ts=null,Bs=0,oi=0,Sh=Fd(0),us=0,pg=null,Xu=0,xj=0,f4=0,Dv=null,Ma=null,h4=0,Yh=1/0,Ul=null,_b=!1,M5=null,vd=null,Y0=!1,sd=null,Ib=0,Ov=0,B5=null,Xy=-1,Qy=0;function ya(){return Cr&6?Wn():Xy!==-1?Xy:Xy=Wn()}function gd(e){return e.mode&1?Cr&2&&Bs!==0?Bs&-Bs:nK.transition!==null?(Qy===0&&(Qy=R$()),Qy):(e=$r,e!==0||(e=window.event,e=e===void 0?16:V$(e.type)),e):1}function ko(e,t,r,s){if(50<Ov)throw Ov=0,B5=null,Error(ot(185));mx(e,r,s),(!(Cr&2)||e!==Ss)&&(e===Ss&&(!(Cr&2)&&(xj|=r),us===4&&Jc(e,Bs)),Ha(e,s),r===1&&Cr===0&&!(t.mode&1)&&(Yh=Wn()+500,mj&&Md()))}function Ha(e,t){var r=e.callbackNode;nG(e,t);var s=mb(e,e===Ss?Bs:0);if(s===0)r!==null&&L3(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&L3(r),t===1)e.tag===0?rK(E_.bind(null,e)):lF(E_.bind(null,e)),JG(function(){!(Cr&6)&&Md()}),r=null;else{switch($$(s)){case 1:r=ME;break;case 4:r=O$;break;case 16:r=hb;break;case 536870912:r=L$;break;default:r=hb}r=iM(r,ZF.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ZF(e,t){if(Xy=-1,Qy=0,Cr&6)throw Error(ot(327));var r=e.callbackNode;if(Dh()&&e.callbackNode!==r)return null;var s=mb(e,e===Ss?Bs:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=kb(e,s);else{t=s;var a=Cr;Cr|=2;var i=tM();(Ss!==e||Bs!==t)&&(Ul=null,Yh=Wn()+500,$u(e,t));do try{NK();break}catch(l){eM(e,l)}while(1);JE(),Tb.current=i,Cr=a,ts!==null?t=0:(Ss=null,Bs=0,t=us)}if(t!==0){if(t===2&&(a=h5(e),a!==0&&(s=a,t=z5(e,a))),t===1)throw r=pg,$u(e,0),Jc(e,s),Ha(e,Wn()),r;if(t===6)Jc(e,s);else{if(a=e.current.alternate,!(s&30)&&!jK(a)&&(t=kb(e,s),t===2&&(i=h5(e),i!==0&&(s=i,t=z5(e,i))),t===1))throw r=pg,$u(e,0),Jc(e,s),Ha(e,Wn()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(ot(345));case 2:hu(e,Ma,Ul);break;case 3:if(Jc(e,s),(s&130023424)===s&&(t=h4+500-Wn(),10<t)){if(mb(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){ya(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=j5(hu.bind(null,e,Ma,Ul),t);break}hu(e,Ma,Ul);break;case 4:if(Jc(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Io(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=Wn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*bK(s/1960))-s,10<s){e.timeoutHandle=j5(hu.bind(null,e,Ma,Ul),s);break}hu(e,Ma,Ul);break;case 5:hu(e,Ma,Ul);break;default:throw Error(ot(329))}}}return Ha(e,Wn()),e.callbackNode===r?ZF.bind(null,e):null}function z5(e,t){var r=Dv;return e.current.memoizedState.isDehydrated&&($u(e,t).flags|=256),e=kb(e,t),e!==2&&(t=Ma,Ma=r,t!==null&&U5(t)),e}function U5(e){Ma===null?Ma=e:Ma.push.apply(Ma,e)}function jK(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Oo(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t){for(t&=~f4,t&=~xj,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Io(t),s=1<<r;e[r]=-1,t&=~s}}function E_(e){if(Cr&6)throw Error(ot(327));Dh();var t=mb(e,0);if(!(t&1))return Ha(e,Wn()),null;var r=kb(e,t);if(e.tag!==0&&r===2){var s=h5(e);s!==0&&(t=s,r=z5(e,s))}if(r===1)throw r=pg,$u(e,0),Jc(e,t),Ha(e,Wn()),r;if(r===6)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hu(e,Ma,Ul),Ha(e,Wn()),null}function m4(e,t){var r=Cr;Cr|=1;try{return e(t)}finally{Cr=r,Cr===0&&(Yh=Wn()+500,mj&&Md())}}function Qu(e){sd!==null&&sd.tag===0&&!(Cr&6)&&Dh();var t=Cr;Cr|=1;var r=qi.transition,s=$r;try{if(qi.transition=null,$r=1,e)return e()}finally{$r=s,qi.transition=r,Cr=t,!(Cr&6)&&Md()}}function p4(){oi=Sh.current,pn(Sh)}function $u(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,QG(r)),ts!==null)for(r=ts.return;r!==null;){var s=r;switch(YE(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&yb();break;case 3:Gh(),pn(Wa),pn(oa),s4();break;case 5:n4(s);break;case 4:Gh();break;case 13:pn(An);break;case 19:pn(An);break;case 10:ZE(s.type._context);break;case 22:case 23:p4()}r=r.return}if(Ss=e,ts=e=xd(e.current,null),Bs=oi=t,us=0,pg=null,f4=xj=Xu=0,Ma=Dv=null,Su!==null){for(t=0;t<Su.length;t++)if(r=Su[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}Su=null}return e}function eM(e,t){do{var r=ts;try{if(JE(),Gy.current=Pb,Eb){for(var s=Tn.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Eb=!1}if(Yu=0,ws=cs=Tn=null,Iv=!1,fg=0,u4.current=null,r===null||r.return===null){us=1,pg=t,ts=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Bs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=m_(o);if(m!==null){m.flags&=-257,p_(m,o,l,i,t),m.mode&1&&h_(i,d,t),t=m,c=d;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){h_(i,d,t),v4();break e}c=Error(ot(426))}}else if(gn&&l.mode&1){var p=m_(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),p_(p,o,l,i,t),XE(Kh(c,l));break e}}i=c=Kh(c,l),us!==4&&(us=2),Dv===null?Dv=[i]:Dv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=$F(i,c,t);o_(i,x);break e;case 1:l=c;var b=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(vd===null||!vd.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=FF(i,l,t);o_(i,j);break e}}i=i.return}while(i!==null)}nM(r)}catch(E){t=E,ts===r&&r!==null&&(ts=r=r.return);continue}break}while(1)}function tM(){var e=Tb.current;return Tb.current=Pb,e===null?Pb:e}function v4(){(us===0||us===3||us===2)&&(us=4),Ss===null||!(Xu&268435455)&&!(xj&268435455)||Jc(Ss,Bs)}function kb(e,t){var r=Cr;Cr|=2;var s=tM();(Ss!==e||Bs!==t)&&(Ul=null,$u(e,t));do try{wK();break}catch(a){eM(e,a)}while(1);if(JE(),Cr=r,Tb.current=s,ts!==null)throw Error(ot(261));return Ss=null,Bs=0,us}function wK(){for(;ts!==null;)rM(ts)}function NK(){for(;ts!==null&&!KH();)rM(ts)}function rM(e){var t=aM(e.alternate,e,oi);e.memoizedProps=e.pendingProps,t===null?nM(e):ts=t,u4.current=null}function nM(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=vK(r,t),r!==null){r.flags&=32767,ts=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{us=6,ts=null;return}}else if(r=pK(r,t,oi),r!==null){ts=r;return}if(t=t.sibling,t!==null){ts=t;return}ts=t=e}while(t!==null);us===0&&(us=5)}function hu(e,t,r){var s=$r,a=qi.transition;try{qi.transition=null,$r=1,SK(e,t,r,s)}finally{qi.transition=a,$r=s}return null}function SK(e,t,r,s){do Dh();while(sd!==null);if(Cr&6)throw Error(ot(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(sG(e,i),e===Ss&&(ts=Ss=null,Bs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Y0||(Y0=!0,iM(hb,function(){return Dh(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=qi.transition,qi.transition=null;var o=$r;$r=1;var l=Cr;Cr|=4,u4.current=null,xK(e,r),QF(r,e),WG(y5),pb=!!x5,y5=x5=null,e.current=r,yK(r),YH(),Cr=l,$r=o,qi.transition=i}else e.current=r;if(Y0&&(Y0=!1,sd=e,Ib=a),i=e.pendingLanes,i===0&&(vd=null),JH(r.stateNode),Ha(e,Wn()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(_b)throw _b=!1,e=M5,M5=null,e;return Ib&1&&e.tag!==0&&Dh(),i=e.pendingLanes,i&1?e===B5?Ov++:(Ov=0,B5=e):Ov=0,Md(),null}function Dh(){if(sd!==null){var e=$$(Ib),t=qi.transition,r=$r;try{if(qi.transition=null,$r=16>e?16:e,sd===null)var s=!1;else{if(e=sd,sd=null,Ib=0,Cr&6)throw Error(ot(331));var a=Cr;for(Cr|=4,Nt=e.current;Nt!==null;){var i=Nt,o=i.child;if(Nt.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Nt=d;Nt!==null;){var f=Nt;switch(f.tag){case 0:case 11:case 15:kv(8,f,i)}var u=f.child;if(u!==null)u.return=f,Nt=u;else for(;Nt!==null;){f=Nt;var h=f.sibling,m=f.return;if(KF(f),f===d){Nt=null;break}if(h!==null){h.return=m,Nt=h;break}Nt=m}}}var v=i.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var p=g.sibling;g.sibling=null,g=p}while(g!==null)}}Nt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Nt=o;else e:for(;Nt!==null;){if(i=Nt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kv(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Nt=x;break e}Nt=i.return}}var b=e.current;for(Nt=b;Nt!==null;){o=Nt;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Nt=y;else e:for(o=b;Nt!==null;){if(l=Nt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gj(9,l)}}catch(E){Ln(l,l.return,E)}if(l===o){Nt=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Nt=j;break e}Nt=l.return}}if(Cr=a,Md(),ul&&typeof ul.onPostCommitFiberRoot=="function")try{ul.onPostCommitFiberRoot(cj,e)}catch{}s=!0}return s}finally{$r=r,qi.transition=t}}return!1}function P_(e,t,r){t=Kh(r,t),t=$F(e,t,1),e=pd(e,t,1),t=ya(),e!==null&&(mx(e,1,t),Ha(e,t))}function Ln(e,t,r){if(e.tag===3)P_(e,e,r);else for(;t!==null;){if(t.tag===3){P_(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vd===null||!vd.has(s))){e=Kh(r,e),e=FF(t,e,1),t=pd(t,e,1),e=ya(),t!==null&&(mx(t,1,e),Ha(t,e));break}}t=t.return}}function CK(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ya(),e.pingedLanes|=e.suspendedLanes&r,Ss===e&&(Bs&r)===r&&(us===4||us===3&&(Bs&130023424)===Bs&&500>Wn()-h4?$u(e,0):f4|=r),Ha(e,t)}function sM(e,t){t===0&&(e.mode&1?(t=M0,M0<<=1,!(M0&130023424)&&(M0=4194304)):t=1);var r=ya();e=lc(e,t),e!==null&&(mx(e,t,r),Ha(e,r))}function AK(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),sM(e,r)}function EK(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(ot(314))}s!==null&&s.delete(t),sM(e,r)}var aM;aM=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wa.current)Ua=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ua=!1,mK(e,t,r);Ua=!!(e.flags&131072)}else Ua=!1,gn&&t.flags&1048576&&cF(t,wb,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Yy(e,t),e=t.pendingProps;var a=Wh(t,oa.current);kh(t,r),a=i4(null,t,s,e,a,r);var i=o4();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qa(s)?(i=!0,bb(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,t4(t),a.updater=vj,t.stateNode=a,a._reactInternals=t,P5(t,s,e,r),t=I5(null,t,s,!0,i,r)):(t.tag=0,gn&&i&&KE(t),pa(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Yy(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=TK(s),e=xo(s,e),a){case 0:t=_5(null,t,s,e,r);break e;case 1:t=x_(null,t,s,e,r);break e;case 11:t=v_(null,t,s,e,r);break e;case 14:t=g_(null,t,s,xo(s.type,e),r);break e}throw Error(ot(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:xo(s,a),_5(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:xo(s,a),x_(e,t,s,a,r);case 3:e:{if(UF(t),e===null)throw Error(ot(387));s=t.pendingProps,i=t.memoizedState,a=i.element,pF(e,t),Cb(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Kh(Error(ot(423)),t),t=y_(e,t,s,r,a);break e}else if(s!==a){a=Kh(Error(ot(424)),t),t=y_(e,t,s,r,a);break e}else for(fi=md(t.stateNode.containerInfo.firstChild),pi=t,gn=!0,Co=null,r=hF(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qh(),s===a){t=cc(e,t,r);break e}pa(e,t,s,r)}t=t.child}return t;case 5:return vF(t),e===null&&C5(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,b5(s,a)?o=null:i!==null&&b5(s,i)&&(t.flags|=32),zF(e,t),pa(e,t,o,r),t.child;case 6:return e===null&&C5(t),null;case 13:return VF(e,t,r);case 4:return r4(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Hh(t,null,s,r):pa(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:xo(s,a),v_(e,t,s,a,r);case 7:return pa(e,t,t.pendingProps,r),t.child;case 8:return pa(e,t,t.pendingProps.children,r),t.child;case 12:return pa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,nn(Nb,s._currentValue),s._currentValue=o,i!==null)if(Oo(i.value,o)){if(i.children===a.children&&!Wa.current){t=cc(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Zl(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),A5(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ot(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),A5(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pa(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,kh(t,r),a=Xi(a),s=s(a),t.flags|=1,pa(e,t,s,r),t.child;case 14:return s=t.type,a=xo(s,t.pendingProps),a=xo(s.type,a),g_(e,t,s,a,r);case 15:return MF(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:xo(s,a),Yy(e,t),t.tag=1,qa(s)?(e=!0,bb(t)):e=!1,kh(t,r),RF(t,s,a),P5(t,s,a,r),I5(null,t,s,!0,e,r);case 19:return WF(e,t,r);case 22:return BF(e,t,r)}throw Error(ot(156,t.tag))};function iM(e,t){return D$(e,t)}function PK(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(e,t,r,s){return new PK(e,t,r,s)}function g4(e){return e=e.prototype,!(!e||!e.isReactComponent)}function TK(e){if(typeof e=="function")return g4(e)?1:0;if(e!=null){if(e=e.$$typeof,e===RE)return 11;if(e===$E)return 14}return 2}function xd(e,t){var r=e.alternate;return r===null?(r=Ui(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Jy(e,t,r,s,a,i){var o=2;if(s=e,typeof e=="function")g4(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case mh:return Fu(r.children,a,i,t);case LE:o=8,a|=8;break;case JS:return e=Ui(12,r,t,a|2),e.elementType=JS,e.lanes=i,e;case ZS:return e=Ui(13,r,t,a),e.elementType=ZS,e.lanes=i,e;case e5:return e=Ui(19,r,t,a),e.elementType=e5,e.lanes=i,e;case v$:return yj(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case m$:o=10;break e;case p$:o=9;break e;case RE:o=11;break e;case $E:o=14;break e;case Gc:o=16,s=null;break e}throw Error(ot(130,e==null?e:typeof e,""))}return t=Ui(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Fu(e,t,r,s){return e=Ui(7,e,s,t),e.lanes=r,e}function yj(e,t,r,s){return e=Ui(22,e,s,t),e.elementType=v$,e.lanes=r,e.stateNode={isHidden:!1},e}function mN(e,t,r){return e=Ui(6,e,null,t),e.lanes=r,e}function pN(e,t,r){return t=Ui(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _K(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Y2(0),this.expirationTimes=Y2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y2(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function x4(e,t,r,s,a,i,o,l,c){return e=new _K(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ui(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},t4(i),e}function IK(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hh,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function oM(e){if(!e)return Ed;e=e._reactInternals;e:{if(cf(e)!==e||e.tag!==1)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ot(171))}if(e.tag===1){var r=e.type;if(qa(r))return oF(e,r,t)}return t}function lM(e,t,r,s,a,i,o,l,c){return e=x4(r,s,!0,e,a,i,o,l,c),e.context=oM(null),r=e.current,s=ya(),a=gd(r),i=Zl(s,a),i.callback=t??null,pd(r,i,a),e.current.lanes=a,mx(e,a,s),Ha(e,s),e}function bj(e,t,r,s){var a=t.current,i=ya(),o=gd(a);return r=oM(r),t.context===null?t.context=r:t.pendingContext=r,t=Zl(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=pd(a,t,o),e!==null&&(ko(e,a,o,i),Hy(e,a,o)),o}function Db(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function T_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function y4(e,t){T_(e,t),(e=e.alternate)&&T_(e,t)}function kK(){return null}var cM=typeof reportError=="function"?reportError:function(e){console.error(e)};function b4(e){this._internalRoot=e}jj.prototype.render=b4.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ot(409));bj(e,t,null,null)};jj.prototype.unmount=b4.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qu(function(){bj(null,e,null,null)}),t[oc]=null}};function jj(e){this._internalRoot=e}jj.prototype.unstable_scheduleHydration=function(e){if(e){var t=B$();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qc.length&&t!==0&&t<Qc[r].priority;r++);Qc.splice(r,0,e),r===0&&U$(e)}};function j4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wj(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function __(){}function DK(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=Db(o);i.call(d)}}var o=lM(t,s,e,0,null,!1,!1,"",__);return e._reactRootContainer=o,e[oc]=o.current,og(e.nodeType===8?e.parentNode:e),Qu(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=Db(c);l.call(d)}}var c=x4(e,0,!1,null,null,!1,!1,"",__);return e._reactRootContainer=c,e[oc]=c.current,og(e.nodeType===8?e.parentNode:e),Qu(function(){bj(t,c,r,s)}),c}function Nj(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Db(o);l.call(c)}}bj(t,o,e,a)}else o=DK(r,t,e,a,s);return Db(o)}F$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=jv(t.pendingLanes);r!==0&&(BE(t,r|1),Ha(t,Wn()),!(Cr&6)&&(Yh=Wn()+500,Md()))}break;case 13:Qu(function(){var s=lc(e,1);if(s!==null){var a=ya();ko(s,e,1,a)}}),y4(e,1)}};zE=function(e){if(e.tag===13){var t=lc(e,134217728);if(t!==null){var r=ya();ko(t,e,134217728,r)}y4(e,134217728)}};M$=function(e){if(e.tag===13){var t=gd(e),r=lc(e,t);if(r!==null){var s=ya();ko(r,e,t,s)}y4(e,t)}};B$=function(){return $r};z$=function(e,t){var r=$r;try{return $r=e,t()}finally{$r=r}};d5=function(e,t,r){switch(t){case"input":if(n5(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=hj(s);if(!a)throw Error(ot(90));x$(s),n5(s,a)}}}break;case"textarea":b$(e,r);break;case"select":t=r.value,t!=null&&Ph(e,!!r.multiple,t,!1)}};E$=m4;P$=Qu;var OK={usingClientEntryPoint:!1,Events:[vx,xh,hj,C$,A$,m4]},Hp={findFiberByHostInstance:Nu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LK={bundleType:Hp.bundleType,version:Hp.version,rendererPackageName:Hp.rendererPackageName,rendererConfig:Hp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=I$(e),e===null?null:e.stateNode},findFiberByHostInstance:Hp.findFiberByHostInstance||kK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var X0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!X0.isDisabled&&X0.supportsFiber)try{cj=X0.inject(LK),ul=X0}catch{}}bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OK;bi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j4(t))throw Error(ot(200));return IK(e,t,null,r)};bi.createRoot=function(e,t){if(!j4(e))throw Error(ot(299));var r=!1,s="",a=cM;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=x4(e,1,!1,null,null,r,!1,s,a),e[oc]=t.current,og(e.nodeType===8?e.parentNode:e),new b4(t)};bi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ot(188)):(e=Object.keys(e).join(","),Error(ot(268,e)));return e=I$(t),e=e===null?null:e.stateNode,e};bi.flushSync=function(e){return Qu(e)};bi.hydrate=function(e,t,r){if(!wj(t))throw Error(ot(200));return Nj(null,e,t,!0,r)};bi.hydrateRoot=function(e,t,r){if(!j4(e))throw Error(ot(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=cM;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=lM(t,null,e,1,r??null,a,!1,i,o),e[oc]=t.current,og(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new jj(t)};bi.render=function(e,t,r){if(!wj(t))throw Error(ot(200));return Nj(null,e,t,!1,r)};bi.unmountComponentAtNode=function(e){if(!wj(e))throw Error(ot(40));return e._reactRootContainer?(Qu(function(){Nj(null,null,e,!1,function(){e._reactRootContainer=null,e[oc]=null})}),!0):!1};bi.unstable_batchedUpdates=m4;bi.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!wj(r))throw Error(ot(200));if(e==null||e._reactInternals===void 0)throw Error(ot(38));return Nj(e,t,r,!1,s)};bi.version="18.3.1-next-f1338f8080-20240426";function dM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dM)}catch(e){console.error(e)}}dM(),d$.exports=bi;var Sl=d$.exports;const w4=kr(Sl);var I_=Sl;XS.createRoot=I_.createRoot,XS.hydrateRoot=I_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vg(){return vg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},vg.apply(this,arguments)}var ad;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ad||(ad={}));const k_="popstate";function RK(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return V5("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Ob(a)}return FK(t,r,null,e)}function Kn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function uM(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $K(){return Math.random().toString(36).substr(2,8)}function D_(e,t){return{usr:e.state,key:e.key,idx:t}}function V5(e,t,r,s){return r===void 0&&(r=null),vg({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Om(t):t,{state:r,key:t&&t.key||s||$K()})}function Ob(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Om(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function FK(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=ad.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(vg({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function u(){l=ad.Pop;let p=f(),x=p==null?null:p-d;d=p,c&&c({action:l,location:g.location,delta:x})}function h(p,x){l=ad.Push;let b=V5(g.location,p,x);r&&r(b,p),d=f()+1;let y=D_(b,d),j=g.createHref(b);try{o.pushState(y,"",j)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(j)}i&&c&&c({action:l,location:g.location,delta:1})}function m(p,x){l=ad.Replace;let b=V5(g.location,p,x);r&&r(b,p),d=f();let y=D_(b,d),j=g.createHref(b);o.replaceState(y,"",j),i&&c&&c({action:l,location:g.location,delta:0})}function v(p){let x=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof p=="string"?p:Ob(p);return b=b.replace(/ $/,"%20"),Kn(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let g={get action(){return l},get location(){return e(a,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(k_,u),c=p,()=>{a.removeEventListener(k_,u),c=null}},createHref(p){return t(a,p)},createURL:v,encodeLocation(p){let x=v(p);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(p){return o.go(p)}};return g}var O_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(O_||(O_={}));function MK(e,t,r){return r===void 0&&(r="/"),BK(e,t,r,!1)}function BK(e,t,r,s){let a=typeof t=="string"?Om(t):t,i=N4(a.pathname||"/",r);if(i==null)return null;let o=fM(e);zK(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=JK(i);l=XK(o[c],d,s)}return l}function fM(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Kn(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=yd([s,c.relativePath]),f=r.concat(c);i.children&&i.children.length>0&&(Kn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),fM(i.children,t,f,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:KK(d,i.index),routesMeta:f})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of hM(i.path))a(i,o,c)}),t}function hM(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=hM(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function zK(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:YK(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const UK=/^:[\w-]+$/,VK=3,WK=2,qK=1,HK=10,GK=-2,L_=e=>e==="*";function KK(e,t){let r=e.split("/"),s=r.length;return r.some(L_)&&(s+=GK),t&&(s+=WK),r.filter(a=>!L_(a)).reduce((a,i)=>a+(UK.test(i)?VK:i===""?qK:HK),s)}function YK(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function XK(e,t,r){r===void 0&&(r=!1);let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,f=i==="/"?t:t.slice(i.length)||"/",u=R_({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),h=c.route;if(!u&&d&&r&&!s[s.length-1].route.index&&(u=R_({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:yd([i,u.pathname]),pathnameBase:rY(yd([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=yd([i,u.pathnameBase]))}return o}function R_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=QK(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,f,u)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let g=l[u]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[u];return m&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function QK(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),uM(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function JK(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return uM(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function N4(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function ZK(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Om(e):e;return{pathname:r?r.startsWith("/")?r:eY(r,t):t,search:nY(s),hash:sY(a)}}function eY(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function vN(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tY(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function S4(e,t){let r=tY(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function C4(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Om(e):(a=vg({},e),Kn(!a.pathname||!a.pathname.includes("?"),vN("?","pathname","search",a)),Kn(!a.pathname||!a.pathname.includes("#"),vN("#","pathname","hash",a)),Kn(!a.search||!a.search.includes("#"),vN("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let u=t.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;a.pathname=h.join("/")}l=u>=0?t[u]:"/"}let c=ZK(a,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const yd=e=>e.join("/").replace(/\/\/+/g,"/"),rY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function aY(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mM=["post","put","patch","delete"];new Set(mM);const iY=["get",...mM];new Set(iY);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},gg.apply(this,arguments)}const A4=w.createContext(null),oY=w.createContext(null),Bd=w.createContext(null),Sj=w.createContext(null),zd=w.createContext({outlet:null,matches:[],isDataRoute:!1}),pM=w.createContext(null);function lY(e,t){let{relative:r}=t===void 0?{}:t;Lm()||Kn(!1);let{basename:s,navigator:a}=w.useContext(Bd),{hash:i,pathname:o,search:l}=gM(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:yd([s,o])),a.createHref({pathname:c,search:l,hash:i})}function Lm(){return w.useContext(Sj)!=null}function Rm(){return Lm()||Kn(!1),w.useContext(Sj).location}function vM(e){w.useContext(Bd).static||w.useLayoutEffect(e)}function E4(){let{isDataRoute:e}=w.useContext(zd);return e?jY():cY()}function cY(){Lm()||Kn(!1);let e=w.useContext(A4),{basename:t,future:r,navigator:s}=w.useContext(Bd),{matches:a}=w.useContext(zd),{pathname:i}=Rm(),o=JSON.stringify(S4(a,r.v7_relativeSplatPath)),l=w.useRef(!1);return vM(()=>{l.current=!0}),w.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let u=C4(d,JSON.parse(o),i,f.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:yd([t,u.pathname])),(f.replace?s.replace:s.push)(u,f.state,f)},[t,s,o,i,e])}function gM(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=w.useContext(Bd),{matches:a}=w.useContext(zd),{pathname:i}=Rm(),o=JSON.stringify(S4(a,s.v7_relativeSplatPath));return w.useMemo(()=>C4(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function dY(e,t){return uY(e,t)}function uY(e,t,r,s){Lm()||Kn(!1);let{navigator:a}=w.useContext(Bd),{matches:i}=w.useContext(zd),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Rm(),f;if(t){var u;let p=typeof t=="string"?Om(t):t;c==="/"||(u=p.pathname)!=null&&u.startsWith(c)||Kn(!1),f=p}else f=d;let h=f.pathname||"/",m=h;if(c!=="/"){let p=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(p.length).join("/")}let v=MK(e,{pathname:m}),g=vY(v&&v.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:yd([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:yd([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r,s);return t&&g?w.createElement(Sj.Provider,{value:{location:gg({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ad.Pop}},g):g}function fY(){let e=bY(),t=aY(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:a},r):null,i)}const hY=w.createElement(fY,null);class mY extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(zd.Provider,{value:this.props.routeContext},w.createElement(pM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pY(e){let{routeContext:t,match:r,children:s}=e,a=w.useContext(A4);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(zd.Provider,{value:t},s)}function vY(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let f=o.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);f>=0||Kn(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let u=o[f];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=f),u.route.id){let{loaderData:h,errors:m}=r,v=u.route.loader&&h[u.route.id]===void 0&&(!m||m[u.route.id]===void 0);if(u.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,u,h)=>{let m,v=!1,g=null,p=null;r&&(m=l&&u.route.id?l[u.route.id]:void 0,g=u.route.errorElement||hY,c&&(d<0&&h===0?(wY("route-fallback",!1),v=!0,p=null):d===h&&(v=!0,p=u.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),b=()=>{let y;return m?y=g:v?y=p:u.route.Component?y=w.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=f,w.createElement(pY,{match:u,routeContext:{outlet:f,matches:x,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?w.createElement(mY,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var xM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xM||{}),Lb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Lb||{});function gY(e){let t=w.useContext(A4);return t||Kn(!1),t}function xY(e){let t=w.useContext(oY);return t||Kn(!1),t}function yY(e){let t=w.useContext(zd);return t||Kn(!1),t}function yM(e){let t=yY(),r=t.matches[t.matches.length-1];return r.route.id||Kn(!1),r.route.id}function bY(){var e;let t=w.useContext(pM),r=xY(Lb.UseRouteError),s=yM(Lb.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function jY(){let{router:e}=gY(xM.UseNavigateStable),t=yM(Lb.UseNavigateStable),r=w.useRef(!1);return vM(()=>{r.current=!0}),w.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,gg({fromRouteId:t},i)))},[e,t])}const $_={};function wY(e,t,r){!t&&!$_[e]&&($_[e]=!0)}function NY(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function SY(e){let{to:t,replace:r,state:s,relative:a}=e;Lm()||Kn(!1);let{future:i,static:o}=w.useContext(Bd),{matches:l}=w.useContext(zd),{pathname:c}=Rm(),d=E4(),f=C4(t,S4(l,i.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(f);return w.useEffect(()=>d(JSON.parse(u),{replace:r,state:s,relative:a}),[d,u,a,r,s]),null}function Vt(e){Kn(!1)}function CY(e){let{basename:t="/",children:r=null,location:s,navigationType:a=ad.Pop,navigator:i,static:o=!1,future:l}=e;Lm()&&Kn(!1);let c=t.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:o,future:gg({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=Om(s));let{pathname:f="/",search:u="",hash:h="",state:m=null,key:v="default"}=s,g=w.useMemo(()=>{let p=N4(f,c);return p==null?null:{location:{pathname:p,search:u,hash:h,state:m,key:v},navigationType:a}},[c,f,u,h,m,v,a]);return g==null?null:w.createElement(Bd.Provider,{value:d},w.createElement(Sj.Provider,{children:r,value:g}))}function Us(e){let{children:t,location:r}=e;return dY(W5(t),r)}new Promise(()=>{});function W5(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(s,a)=>{if(!w.isValidElement(s))return;let i=[...t,a];if(s.type===w.Fragment){r.push.apply(r,W5(s.props.children,i));return}s.type!==Vt&&Kn(!1),!s.props.index||!s.props.children||Kn(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=W5(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function q5(){return q5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},q5.apply(this,arguments)}function AY(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function EY(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PY(e,t){return e.button===0&&(!t||t==="_self")&&!EY(e)}const TY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_Y="6";try{window.__reactRouterVersion=_Y}catch{}const IY="startTransition",F_=jl[IY];function kY(e){let{basename:t,children:r,future:s,window:a}=e,i=w.useRef();i.current==null&&(i.current=RK({window:a,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},f=w.useCallback(u=>{d&&F_?F_(()=>c(u)):c(u)},[c,d]);return w.useLayoutEffect(()=>o.listen(f),[o,f]),w.useEffect(()=>NY(s),[s]),w.createElement(CY,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const DY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M_=w.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:u}=t,h=AY(t,TY),{basename:m}=w.useContext(Bd),v,g=!1;if(typeof d=="string"&&OY.test(d)&&(v=d,DY))try{let y=new URL(window.location.href),j=d.startsWith("//")?new URL(y.protocol+d):new URL(d),E=N4(j.pathname,m);j.origin===y.origin&&E!=null?d=E+j.search+j.hash:g=!0}catch{}let p=lY(d,{relative:a}),x=LY(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:u});function b(y){s&&s(y),y.defaultPrevented||x(y)}return w.createElement("a",q5({},h,{href:v||p,onClick:g||i?s:b,ref:r,target:c}))});var B_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(B_||(B_={}));var z_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(z_||(z_={}));function LY(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=E4(),d=Rm(),f=gM(e,{relative:o});return w.useCallback(u=>{if(PY(u,r)){u.preventDefault();let h=s!==void 0?s:Ob(d)===Ob(f);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,s,a,r,e,i,o,l])}function xn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function U_(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function bM(...e){return t=>{let r=!1;const s=e.map(a=>{const i=U_(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():U_(e[a],null)}}}}function Ji(...e){return w.useCallback(bM(...e),e)}function df(e,t=[]){let r=[];function s(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];const d=u=>{var x;const{scope:h,children:m,...v}=u,g=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,p=w.useMemo(()=>v,Object.values(v));return n.jsx(g.Provider,{value:p,children:m})};d.displayName=i+"Provider";function f(u,h){var g;const m=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,v=w.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[d,f]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,RY(a,...t)]}function RY(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Xh(e){const t=FY(e),r=w.forwardRef((s,a)=>{const{children:i,...o}=s,l=w.Children.toArray(i),c=l.find(BY);if(c){const d=c.props.children,f=l.map(u=>u===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:u);return n.jsx(t,{...o,ref:a,children:w.isValidElement(d)?w.cloneElement(d,void 0,f):null})}return n.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var $Y=Xh("Slot");function FY(e){const t=w.forwardRef((r,s)=>{const{children:a,...i}=r;if(w.isValidElement(a)){const o=UY(a),l=zY(i,a.props);return a.type!==w.Fragment&&(l.ref=s?bM(s,o):o),w.cloneElement(a,l)}return w.Children.count(a)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var MY=Symbol("radix.slottable");function BY(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===MY}function zY(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function UY(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function VY(e){const t=e+"CollectionProvider",[r,s]=df(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:x}=g,b=ce.useRef(null),y=ce.useRef(new Map).current;return n.jsx(a,{scope:p,itemMap:y,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Xh(l),d=ce.forwardRef((g,p)=>{const{scope:x,children:b}=g,y=i(l,x),j=Ji(p,y.collectionRef);return n.jsx(c,{ref:j,children:b})});d.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",h=Xh(f),m=ce.forwardRef((g,p)=>{const{scope:x,children:b,...y}=g,j=ce.useRef(null),E=Ji(p,j),A=i(f,x);return ce.useEffect(()=>(A.itemMap.set(j,{ref:j,...y}),()=>void A.itemMap.delete(j))),n.jsx(h,{[u]:"",ref:E,children:b})});m.displayName=f;function v(g){const p=i(e+"CollectionConsumer",g);return ce.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((A,C)=>y.indexOf(A.ref.current)-y.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},v,s]}var WY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fn=WY.reduce((e,t)=>{const r=Xh(`Primitive.${t}`),s=w.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function jM(e,t){e&&Sl.flushSync(()=>e.dispatchEvent(t))}function Ju(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function qY(e,t=globalThis==null?void 0:globalThis.document){const r=Ju(e);w.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var HY="DismissableLayer",H5="dismissableLayer.update",GY="dismissableLayer.pointerDownOutside",KY="dismissableLayer.focusOutside",V_,wM=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),NM=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=w.useContext(wM),[f,u]=w.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=w.useState({}),v=Ji(t,C=>u(C)),g=Array.from(d.layers),[p]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(p),b=f?g.indexOf(f):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,j=b>=x,E=XY(C=>{const S=C.target,T=[...d.branches].some(O=>O.contains(S));!j||T||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},h),A=QY(C=>{const S=C.target;[...d.branches].some(O=>O.contains(S))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},h);return qY(C=>{b===d.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),w.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(V_=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),W_(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=V_)}},[f,h,r,d]),w.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),W_())},[f,d]),w.useEffect(()=>{const C=()=>m({});return document.addEventListener(H5,C),()=>document.removeEventListener(H5,C)},[]),n.jsx(Fn.div,{...c,ref:v,style:{pointerEvents:y?j?"auto":"none":void 0,...e.style},onFocusCapture:xn(e.onFocusCapture,A.onFocusCapture),onBlurCapture:xn(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:xn(e.onPointerDownCapture,E.onPointerDownCapture)})});NM.displayName=HY;var YY="DismissableLayerBranch",SM=w.forwardRef((e,t)=>{const r=w.useContext(wM),s=w.useRef(null),a=Ji(t,s);return w.useEffect(()=>{const i=s.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(Fn.div,{...e,ref:a})});SM.displayName=YY;function XY(e,t=globalThis==null?void 0:globalThis.document){const r=Ju(e),s=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){CM(GY,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function QY(e,t=globalThis==null?void 0:globalThis.document){const r=Ju(e),s=w.useRef(!1);return w.useEffect(()=>{const a=i=>{i.target&&!s.current&&CM(KY,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function W_(){const e=new CustomEvent(H5);document.dispatchEvent(e)}function CM(e,t,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?jM(a,i):a.dispatchEvent(i)}var JY=NM,ZY=SM,Pd=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},eX="Portal",AM=w.forwardRef((e,t)=>{var l;const{container:r,...s}=e,[a,i]=w.useState(!1);Pd(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?w4.createPortal(n.jsx(Fn.div,{...s,ref:t}),o):null});AM.displayName=eX;function tX(e,t){return w.useReducer((r,s)=>t[r][s]??r,e)}var Cj=e=>{const{present:t,children:r}=e,s=rX(t),a=typeof r=="function"?r({present:s.isPresent}):w.Children.only(r),i=Ji(s.ref,nX(a));return typeof r=="function"||s.isPresent?w.cloneElement(a,{ref:i}):null};Cj.displayName="Presence";function rX(e){const[t,r]=w.useState(),s=w.useRef(null),a=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[l,c]=tX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=Q0(s.current);i.current=l==="mounted"?d:"none"},[l]),Pd(()=>{const d=s.current,f=a.current;if(f!==e){const h=i.current,m=Q0(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Pd(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,u=m=>{const g=Q0(s.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!a.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},h=m=>{m.target===t&&(i.current=Q0(s.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{s.current=d?getComputedStyle(d):null,r(d)},[])}}function Q0(e){return(e==null?void 0:e.animationName)||"none"}function nX(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var sX=jl[" useInsertionEffect ".trim().toString()]||Pd;function Aj({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,i,o]=aX({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const f=w.useRef(e!==void 0);w.useEffect(()=>{const u=f.current;u!==l&&console.warn(`${s} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const d=w.useCallback(f=>{var u;if(l){const h=iX(f)?f(e):f;h!==e&&((u=o.current)==null||u.call(o,h))}else i(f)},[l,e,i,o]);return[c,d]}function aX({defaultProp:e,onChange:t}){const[r,s]=w.useState(e),a=w.useRef(r),i=w.useRef(t);return sX(()=>{i.current=t},[t]),w.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,s,i]}function iX(e){return typeof e=="function"}var oX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),lX="VisuallyHidden",P4=w.forwardRef((e,t)=>n.jsx(Fn.span,{...e,ref:t,style:{...oX,...e.style}}));P4.displayName=lX;var T4="ToastProvider",[_4,cX,dX]=VY("Toast"),[EM,L$e]=df("Toast",[dX]),[uX,Ej]=EM(T4),PM=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=w.useState(null),[d,f]=w.useState(0),u=w.useRef(!1),h=w.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${T4}\`. Expected non-empty \`string\`.`),n.jsx(_4.Provider,{scope:t,children:n.jsx(uX,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:w.useCallback(()=>f(m=>m+1),[]),onToastRemove:w.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:o})})};PM.displayName=T4;var TM="ToastViewport",fX=["F8"],G5="toast.viewportPause",K5="toast.viewportResume",_M=w.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=fX,label:a="Notifications ({hotkey})",...i}=e,o=Ej(TM,r),l=cX(r),c=w.useRef(null),d=w.useRef(null),f=w.useRef(null),u=w.useRef(null),h=Ji(t,u,o.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;w.useEffect(()=>{const p=x=>{var y;s.length!==0&&s.every(j=>x[j]||x.code===j)&&((y=u.current)==null||y.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[s]),w.useEffect(()=>{const p=c.current,x=u.current;if(v&&p&&x){const b=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(G5);x.dispatchEvent(A),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(K5);x.dispatchEvent(A),o.isClosePausedRef.current=!1}},j=A=>{!p.contains(A.relatedTarget)&&y()},E=()=>{p.contains(document.activeElement)||y()};return p.addEventListener("focusin",b),p.addEventListener("focusout",j),p.addEventListener("pointermove",b),p.addEventListener("pointerleave",E),window.addEventListener("blur",b),window.addEventListener("focus",y),()=>{p.removeEventListener("focusin",b),p.removeEventListener("focusout",j),p.removeEventListener("pointermove",b),p.removeEventListener("pointerleave",E),window.removeEventListener("blur",b),window.removeEventListener("focus",y)}}},[v,o.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:p})=>{const b=l().map(y=>{const j=y.ref.current,E=[j,...CX(j)];return p==="forwards"?E:E.reverse()});return(p==="forwards"?b.reverse():b).flat()},[l]);return w.useEffect(()=>{const p=u.current;if(p){const x=b=>{var E,A,C;const y=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!y){const S=document.activeElement,T=b.shiftKey;if(b.target===p&&T){(E=d.current)==null||E.focus();return}const N=g({tabbingDirection:T?"backwards":"forwards"}),D=N.findIndex(I=>I===S);gN(N.slice(D+1))?b.preventDefault():T?(A=d.current)==null||A.focus():(C=f.current)==null||C.focus()}};return p.addEventListener("keydown",x),()=>p.removeEventListener("keydown",x)}},[l,g]),n.jsxs(ZY,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&n.jsx(Y5,{ref:d,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"forwards"});gN(p)}}),n.jsx(_4.Slot,{scope:r,children:n.jsx(Fn.ol,{tabIndex:-1,...i,ref:h})}),v&&n.jsx(Y5,{ref:f,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"backwards"});gN(p)}})]})});_M.displayName=TM;var IM="ToastFocusProxy",Y5=w.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,i=Ej(IM,r);return n.jsx(P4,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&s()}})});Y5.displayName=IM;var xx="Toast",hX="toast.swipeStart",mX="toast.swipeMove",pX="toast.swipeCancel",vX="toast.swipeEnd",kM=w.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Aj({prop:s,defaultProp:a??!0,onChange:i,caller:xx});return n.jsx(Cj,{present:r||l,children:n.jsx(yX,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Ju(e.onPause),onResume:Ju(e.onResume),onSwipeStart:xn(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xn(e.onSwipeMove,d=>{const{x:f,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:xn(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xn(e.onSwipeEnd,d=>{const{x:f,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),c(!1)})})})});kM.displayName=xx;var[gX,xX]=EM(xx,{onClose(){}}),yX=w.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:m,...v}=e,g=Ej(xx,r),[p,x]=w.useState(null),b=Ji(t,I=>x(I)),y=w.useRef(null),j=w.useRef(null),E=a||g.duration,A=w.useRef(0),C=w.useRef(E),S=w.useRef(0),{onToastAdd:T,onToastRemove:O}=g,_=Ju(()=>{var R;(p==null?void 0:p.contains(document.activeElement))&&((R=g.viewport)==null||R.focus()),o()}),N=w.useCallback(I=>{!I||I===1/0||(window.clearTimeout(S.current),A.current=new Date().getTime(),S.current=window.setTimeout(_,I))},[_]);w.useEffect(()=>{const I=g.viewport;if(I){const R=()=>{N(C.current),d==null||d()},M=()=>{const $=new Date().getTime()-A.current;C.current=C.current-$,window.clearTimeout(S.current),c==null||c()};return I.addEventListener(G5,M),I.addEventListener(K5,R),()=>{I.removeEventListener(G5,M),I.removeEventListener(K5,R)}}},[g.viewport,E,c,d,N]),w.useEffect(()=>{i&&!g.isClosePausedRef.current&&N(E)},[i,E,g.isClosePausedRef,N]),w.useEffect(()=>(T(),()=>O()),[T,O]);const D=w.useMemo(()=>p?MM(p):null,[p]);return g.viewport?n.jsxs(n.Fragment,{children:[D&&n.jsx(bX,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),n.jsx(gX,{scope:r,onClose:_,children:Sl.createPortal(n.jsx(_4.ItemSlot,{scope:r,children:n.jsx(JY,{asChild:!0,onEscapeKeyDown:xn(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||_(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(Fn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xn(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:xn(e.onPointerDown,I=>{I.button===0&&(y.current={x:I.clientX,y:I.clientY})}),onPointerMove:xn(e.onPointerMove,I=>{if(!y.current)return;const R=I.clientX-y.current.x,M=I.clientY-y.current.y,$=!!j.current,B=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,q=B?U(0,R):0,W=B?0:U(0,M),L=I.pointerType==="touch"?10:2,V={x:q,y:W},G={originalEvent:I,delta:V};$?(j.current=V,J0(mX,u,G,{discrete:!1})):q_(V,g.swipeDirection,L)?(j.current=V,J0(hX,f,G,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(R)>L||Math.abs(M)>L)&&(y.current=null)}),onPointerUp:xn(e.onPointerUp,I=>{const R=j.current,M=I.target;if(M.hasPointerCapture(I.pointerId)&&M.releasePointerCapture(I.pointerId),j.current=null,y.current=null,R){const $=I.currentTarget,B={originalEvent:I,delta:R};q_(R,g.swipeDirection,g.swipeThreshold)?J0(vX,m,B,{discrete:!0}):J0(pX,h,B,{discrete:!0}),$.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),bX=e=>{const{__scopeToast:t,children:r,...s}=e,a=Ej(xx,t),[i,o]=w.useState(!1),[l,c]=w.useState(!1);return NX(()=>o(!0)),w.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(AM,{asChild:!0,children:n.jsx(P4,{...s,children:i&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},jX="ToastTitle",DM=w.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(Fn.div,{...s,ref:t})});DM.displayName=jX;var wX="ToastDescription",OM=w.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(Fn.div,{...s,ref:t})});OM.displayName=wX;var LM="ToastAction",RM=w.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(FM,{altText:r,asChild:!0,children:n.jsx(I4,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${LM}\`. Expected non-empty \`string\`.`),null)});RM.displayName=LM;var $M="ToastClose",I4=w.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=xX($M,r);return n.jsx(FM,{asChild:!0,children:n.jsx(Fn.button,{type:"button",...s,ref:t,onClick:xn(e.onClick,a.onClose)})})});I4.displayName=$M;var FM=w.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(Fn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function MM(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),SX(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...MM(s))}}),t}function J0(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?jM(a,i):a.dispatchEvent(i)}var q_=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>r:!i&&a>r};function NX(e=()=>{}){const t=Ju(e);Pd(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function SX(e){return e.nodeType===e.ELEMENT_NODE}function CX(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function gN(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var AX=PM,BM=_M,zM=kM,UM=DM,VM=OM,WM=RM,qM=I4;function HM(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=HM(e[t]))&&(s&&(s+=" "),s+=r);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function GM(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=HM(e))&&(s&&(s+=" "),s+=t);return s}const H_=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,G_=GM,Pj=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return G_(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const f=r==null?void 0:r[d],u=i==null?void 0:i[d];if(f===null)return null;const h=H_(f)||H_(u);return a[d][h]}),l=r&&Object.entries(r).reduce((d,f)=>{let[u,h]=f;return h===void 0||(d[u]=h),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:u,className:h,...m}=f;return Object.entries(m).every(v=>{let[g,p]=v;return Array.isArray(p)?p.includes({...i,...l}[g]):{...i,...l}[g]===p})?[...d,u,h]:d},[]);return G_(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};var EX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PX=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TX=(e,t)=>{const r=w.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>w.createElement("svg",{ref:d,...EX,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${PX(e)}`,...c},[...t.map(([f,u])=>w.createElement(f,u)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r};var ht=TX;const el=ht("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Oh=ht("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Po=ht("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),tl=ht("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),_X=ht("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),rl=ht("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),es=ht("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),KM=ht("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),nl=ht("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),xg=ht("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),dc=ht("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Ur=ht("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Yl=ht("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),an=ht("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),k4=ht("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Tj=ht("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),YM=ht("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),IX=ht("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Zu=ht("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),X5=ht("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),ur=ht("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),D4=ht("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Hi=ht("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),XM=ht("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),$t=ht("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ka=ht("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),kX=ht("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),uc=ht("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Zy=ht("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),Ns=ht("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ya=ht("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),yx=ht("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),DX=ht("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),xN=ht("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),OX=ht("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Qh=ht("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),LX=ht("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),RX=ht("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),$X=ht("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),FX=ht("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),on=ht("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),fc=ht("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),MX=ht("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Pn=ht("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ia=ht("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),QM=ht("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),BX=ht("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Yr=ht("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Z0=ht("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),yg=ht("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),$m=ht("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),yN=ht("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Et=ht("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),uf=ht("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),JM=ht("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),va=ht("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),Jh=ht("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Vr=ht("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),K_=ht("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),hs=ht("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),hl=ht("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),bg=ht("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_j=ht("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),O4=ht("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Ga=ht("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),zX=ht("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),UX=ht("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),$n=ht("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Lh=ht("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Lt=ht("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ba=ht("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),L4=ht("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),As=ht("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Yn=ht("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Rb=ht("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),Y_=ht("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),Au=ht("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Do=ht("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),qt=ht("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),VX=ht("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function WX(){for(var e=0,t,r,s="";e<arguments.length;)(t=arguments[e++])&&(r=ZM(t))&&(s&&(s+=" "),s+=r);return s}function ZM(e){if(typeof e=="string")return e;for(var t,r="",s=0;s<e.length;s++)e[s]&&(t=ZM(e[s]))&&(r&&(r+=" "),r+=t);return r}var R4="-";function qX(e){var t=GX(e),r=e.conflictingClassGroups,s=e.conflictingClassGroupModifiers,a=s===void 0?{}:s;function i(l){var c=l.split(R4);return c[0]===""&&c.length!==1&&c.shift(),e7(c,t)||HX(l)}function o(l,c){var d=r[l]||[];return c&&a[l]?[].concat(d,a[l]):d}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function e7(e,t){var o;if(e.length===0)return t.classGroupId;var r=e[0],s=t.nextPart.get(r),a=s?e7(e.slice(1),s):void 0;if(a)return a;if(t.validators.length!==0){var i=e.join(R4);return(o=t.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:o.classGroupId}}var X_=/^\[(.+)\]$/;function HX(e){if(X_.test(e)){var t=X_.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function GX(e){var t=e.theme,r=e.prefix,s={nextPart:new Map,validators:[]},a=YX(Object.entries(e.classGroups),r);return a.forEach(function(i){var o=i[0],l=i[1];Q5(l,s,o,t)}),s}function Q5(e,t,r,s){e.forEach(function(a){if(typeof a=="string"){var i=a===""?t:Q_(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(KX(a)){Q5(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(o){var l=o[0],c=o[1];Q5(c,Q_(t,l),r,s)})})}function Q_(e,t){var r=e;return t.split(R4).forEach(function(s){r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r}function KX(e){return e.isThemeGetter}function YX(e,t){return t?e.map(function(r){var s=r[0],a=r[1],i=a.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[t+c,d]})):o});return[s,i]}):e}function XX(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,s=new Map;function a(i,o){r.set(i,o),t++,t>e&&(t=0,s=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=s.get(o))!==void 0)return a(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):a(o,l)}}}var t7="!";function QX(e){var t=e.separator||":",r=t.length===1,s=t[0],a=t.length;return function(o){for(var l=[],c=0,d=0,f,u=0;u<o.length;u++){var h=o[u];if(c===0){if(h===s&&(r||o.slice(u,u+a)===t)){l.push(o.slice(d,u)),d=u+a;continue}if(h==="/"){f=u;continue}}h==="["?c++:h==="]"&&c--}var m=l.length===0?o:o.substring(d),v=m.startsWith(t7),g=v?m.substring(1):m,p=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:p}}}function JX(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(s){var a=s[0]==="[";a?(t.push.apply(t,r.sort().concat([s])),r=[]):r.push(s)}),t.push.apply(t,r.sort()),t}function ZX(e){return{cache:XX(e.cacheSize),splitModifiers:QX(e),...qX(e)}}var eQ=/\s+/;function tQ(e,t){var r=t.splitModifiers,s=t.getClassGroupId,a=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(eQ).map(function(o){var l=r(o),c=l.modifiers,d=l.hasImportantModifier,f=l.baseClassName,u=l.maybePostfixModifierPosition,h=s(u?f.substring(0,u):f),m=!!u;if(!h){if(!u)return{isTailwindClass:!1,originalClassName:o};if(h=s(f),!h)return{isTailwindClass:!1,originalClassName:o};m=!1}var v=JX(c).join(":"),g=d?v+t7:v;return{isTailwindClass:!0,modifierId:g,classGroupId:h,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,f=l+c;return i.has(f)?!1:(i.add(f),a(c,d).forEach(function(u){return i.add(l+u)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function rQ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var s,a,i,o=l;function l(d){var f=t[0],u=t.slice(1),h=u.reduce(function(m,v){return v(m)},f());return s=ZX(h),a=s.cache.get,i=s.cache.set,o=c,c(d)}function c(d){var f=a(d);if(f)return f;var u=tQ(d,s);return i(d,u),u}return function(){return o(WX.apply(null,arguments))}}function cn(e){var t=function(s){return s[e]||[]};return t.isThemeGetter=!0,t}var r7=/^\[(?:([a-z-]+):)?(.+)\]$/i,nQ=/^\d+\/\d+$/,sQ=new Set(["px","full","screen"]),aQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oQ=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function fo(e){return Eu(e)||sQ.has(e)||nQ.test(e)||J5(e)}function J5(e){return ff(e,"length",hQ)}function lQ(e){return ff(e,"size",n7)}function cQ(e){return ff(e,"position",n7)}function dQ(e){return ff(e,"url",mQ)}function ey(e){return ff(e,"number",Eu)}function Eu(e){return!Number.isNaN(Number(e))}function uQ(e){return e.endsWith("%")&&Eu(e.slice(0,-1))}function Gp(e){return J_(e)||ff(e,"number",J_)}function vr(e){return r7.test(e)}function Kp(){return!0}function Mc(e){return aQ.test(e)}function fQ(e){return ff(e,"",pQ)}function ff(e,t,r){var s=r7.exec(e);return s?s[1]?s[1]===t:r(s[2]):!1}function hQ(e){return iQ.test(e)}function n7(){return!1}function mQ(e){return e.startsWith("url(")}function J_(e){return Number.isInteger(Number(e))}function pQ(e){return oQ.test(e)}function vQ(){var e=cn("colors"),t=cn("spacing"),r=cn("blur"),s=cn("brightness"),a=cn("borderColor"),i=cn("borderRadius"),o=cn("borderSpacing"),l=cn("borderWidth"),c=cn("contrast"),d=cn("grayscale"),f=cn("hueRotate"),u=cn("invert"),h=cn("gap"),m=cn("gradientColorStops"),v=cn("gradientColorStopPositions"),g=cn("inset"),p=cn("margin"),x=cn("opacity"),b=cn("padding"),y=cn("saturate"),j=cn("scale"),E=cn("sepia"),A=cn("skew"),C=cn("space"),S=cn("translate"),T=function(){return["auto","contain","none"]},O=function(){return["auto","hidden","clip","visible","scroll"]},_=function(){return["auto",vr,t]},N=function(){return[vr,t]},D=function(){return["",fo]},I=function(){return["auto",Eu,vr]},R=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},M=function(){return["solid","dashed","dotted","double","none"]},$=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},B=function(){return["start","end","center","between","around","evenly","stretch"]},U=function(){return["","0",vr]},q=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},W=function(){return[Eu,ey]},L=function(){return[Eu,vr]};return{cacheSize:500,theme:{colors:[Kp],spacing:[fo],blur:["none","",Mc,vr],brightness:W(),borderColor:[e],borderRadius:["none","","full",Mc,vr],borderSpacing:N(),borderWidth:D(),contrast:W(),grayscale:U(),hueRotate:L(),invert:U(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[uQ,J5],inset:_(),margin:_(),opacity:W(),padding:N(),saturate:W(),scale:W(),sepia:U(),skew:L(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",vr]}],container:["container"],columns:[{columns:[Mc]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(R(),[vr])}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gp]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",vr]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Gp]}],"grid-cols":[{"grid-cols":[Kp]}],"col-start-end":[{col:["auto",{span:["full",Gp]},vr]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Kp]}],"row-start-end":[{row:["auto",{span:[Gp]},vr]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",vr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",vr]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(B())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(B(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(B(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",vr,t]}],"min-w":[{"min-w":["min","max","fit",vr,fo]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Mc]},Mc,vr]}],h:[{h:[vr,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",vr,fo]}],"max-h":[{"max-h":[vr,t,"min","max","fit"]}],"font-size":[{text:["base",Mc,J5]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ey]}],"font-family":[{font:[Kp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",vr]}],"line-clamp":[{"line-clamp":["none",Eu,ey]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vr,fo]}],"list-image":[{"list-image":["none",vr]}],"list-style-type":[{list:["none","disc","decimal",vr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(M(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",fo]}],"underline-offset":[{"underline-offset":["auto",vr,fo]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(R(),[cQ])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dQ]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(M(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(M())}],"outline-offset":[{"outline-offset":[vr,fo]}],"outline-w":[{outline:[fo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[fo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Mc,fQ]}],"shadow-color":[{shadow:[Kp]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":$()}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Mc,vr]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",vr]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",vr]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",vr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Gp,vr]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",vr]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[fo,ey]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var gQ=rQ(vQ);function Ge(...e){return gQ(GM(e))}function Ie(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function ft(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e))}function rn(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.error("Failed to save to localStorage:",r)}}function En(e,t){try{const r=localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.error("Failed to load from localStorage:",r),t}}function xQ(e){try{localStorage.removeItem(e)}catch(t){console.error("Failed to remove from localStorage:",t)}}const yQ=AX,s7=w.forwardRef(({className:e,...t},r)=>n.jsx(BM,{ref:r,className:Ge("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));s7.displayName=BM.displayName;const bQ=Pj("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),a7=w.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(zM,{ref:s,className:Ge(bQ({variant:t}),e),...r}));a7.displayName=zM.displayName;const jQ=w.forwardRef(({className:e,...t},r)=>n.jsx(WM,{ref:r,className:Ge("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));jQ.displayName=WM.displayName;const i7=w.forwardRef(({className:e,...t},r)=>n.jsx(qM,{ref:r,className:Ge("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(qt,{className:"h-4 w-4"})}));i7.displayName=qM.displayName;const o7=w.forwardRef(({className:e,...t},r)=>n.jsx(UM,{ref:r,className:Ge("text-sm font-semibold",e),...t}));o7.displayName=UM.displayName;const l7=w.forwardRef(({className:e,...t},r)=>n.jsx(VM,{ref:r,className:Ge("text-sm opacity-90",e),...t}));l7.displayName=VM.displayName;const wQ=1,NQ=1e6;let bN=0;function SQ(){return bN=(bN+1)%Number.MAX_SAFE_INTEGER,bN.toString()}const jN=new Map,Z_=e=>{if(jN.has(e))return;const t=setTimeout(()=>{jN.delete(e),Lv({type:"REMOVE_TOAST",toastId:e})},NQ);jN.set(e,t)},CQ=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,wQ)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Z_(r):e.toasts.forEach(s=>{Z_(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},eb=[];let tb={toasts:[]};function Lv(e){tb=CQ(tb,e),eb.forEach(t=>{t(tb)})}function AQ({...e}){const t=SQ(),r=a=>Lv({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>Lv({type:"DISMISS_TOAST",toastId:t});return Lv({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function _t(){const[e,t]=w.useState(tb);return w.useEffect(()=>(eb.push(t),()=>{const r=eb.indexOf(t);r>-1&&eb.splice(r,1)}),[e]),{...e,toast:AQ,dismiss:r=>Lv({type:"DISMISS_TOAST",toastId:r})}}function EQ(){const{toasts:e}=_t();return n.jsxs(yQ,{children:[e.map(function({id:t,title:r,description:s,action:a,...i}){return n.jsxs(a7,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(o7,{children:r}),s&&n.jsx(l7,{children:s})]}),a,n.jsx(i7,{})]},t)}),n.jsx(s7,{})]})}var Ao=(e=>(e.ADMIN="admin",e.MANAGER="manager",e.SALES="sales",e.SERVICE="service",e.USER="user",e))(Ao||{}),Fi=(e=>(e.TEXT="text",e.NUMBER="number",e.DATE="date",e.BOOLEAN="boolean",e.SELECT="select",e.MULTISELECT="multiselect",e))(Fi||{}),Ds=(e=>(e.NEW="new",e.CONTACTED="contacted",e.QUALIFIED="qualified",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(Ds||{}),bt=(e=>(e.RV="rv",e.MOTORHOME="motorhome",e.TRAVEL_TRAILER="travel_trailer",e.FIFTH_WHEEL="fifth_wheel",e.TOY_HAULER="toy_hauler",e.SINGLE_WIDE="single_wide",e.DOUBLE_WIDE="double_wide",e.TRIPLE_WIDE="triple_wide",e.PARK_MODEL="park_model",e.MODULAR_HOME="modular_home",e))(bt||{}),tr=(e=>(e.AVAILABLE="available",e.RESERVED="reserved",e.SOLD="sold",e.SERVICE="service",e.DELIVERED="delivered",e))(tr||{}),Mi=(e=>(e.DRAFT="draft",e.SENT="sent",e.VIEWED="viewed",e.ACCEPTED="accepted",e.REJECTED="rejected",e.EXPIRED="expired",e))(Mi||{}),Pu=(e=>(e.PURCHASE="purchase",e.LEASE="lease",e.SERVICE="service",e.WARRANTY="warranty",e))(Pu||{}),yo=(e=>(e.DRAFT="draft",e.PENDING="pending",e.SIGNED="signed",e.ACTIVE="active",e.EXPIRED="expired",e.CANCELLED="cancelled",e))(yo||{}),hn=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.URGENT="urgent",e))(hn||{}),gr=(e=>(e.OPEN="open",e.IN_PROGRESS="in_progress",e.WAITING_PARTS="waiting_parts",e.COMPLETED="completed",e.CANCELLED="cancelled",e))(gr||{}),Kt=(e=>(e.SCHEDULED="scheduled",e.IN_TRANSIT="in_transit",e.DELIVERED="delivered",e.CANCELLED="cancelled",e))(Kt||{}),Nr=(e=>(e.FLAT="flat",e.PERCENTAGE="percentage",e.TIERED="tiered",e))(Nr||{}),Ut=(e=>(e.PENDING="pending",e.APPROVED="approved",e.PAID="paid",e.CANCELLED="cancelled",e))(Ut||{}),Ht=(e=>(e.DRAFT="draft",e.SENT="sent",e.VIEWED="viewed",e.PAID="paid",e.OVERDUE="overdue",e.CANCELLED="cancelled",e))(Ht||{}),Hl=(e=>(e.CASH="cash",e.CHECK="check",e.CREDIT_CARD="credit_card",e.BANK_TRANSFER="bank_transfer",e.FINANCING="financing",e))(Hl||{}),id=(e=>(e.PENDING="pending",e.PROCESSING="processing",e.COMPLETED="completed",e.FAILED="failed",e.REFUNDED="refunded",e))(id||{}),Gr=(e=>(e.SALES="sales",e.INVENTORY="inventory",e.SERVICE="service",e.FINANCIAL="financial",e.CUSTOM="custom",e))(Gr||{});const c7=w.createContext(void 0);function Fm(){const e=w.useContext(c7);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function PQ({children:e}){const[t,r]=w.useState(null),[s,a]=w.useState(!0);w.useEffect(()=>{En("auth_token",null)&&r({id:"1",email:"admin@renterinsight.com",name:"Admin User",role:Ao.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date}),a(!1)},[]);const d={user:t,login:async(f,u)=>{a(!0);try{const h={id:"1",email:f,name:"Admin User",role:Ao.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date};r(h),rn("auth_token","mock-token"),a(!1)}catch{throw new Error("Login failed")}finally{}},logout:()=>{r(null),xQ("auth_token")},isLoading:s,hasPermission:(f,u)=>t?t.permissions.some(h=>(h.resource==="*"||h.resource===f)&&(h.action==="*"||h.action===u)):!1,hasRole:f=>t?t.role===f||t.role===Ao.ADMIN:!1};return n.jsx(c7.Provider,{value:d,children:e})}const d7=w.createContext(void 0);function Mm(){const e=w.useContext(d7);if(e===void 0)throw new Error("useTenant must be used within a TenantProvider");return e}function TQ({children:e}){const[t,r]=w.useState(null),[s,a]=w.useState([]);w.useEffect(()=>{const u={id:"tenant-1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",businessHours:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"09:00",close:"17:00",closed:!1},sunday:{open:"12:00",close:"17:00",closed:!1}},features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},customFields:[],branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},createdAt:new Date,updatedAt:new Date};r(u),a(u.customFields)},[]);const f={tenant:t,customFields:s,getCustomFields:(u,h)=>s.filter(m=>m.module===u&&(h?m.section===h:!0)),updateTenantSettings:async u=>{if(!t)return;const h={...t,settings:{...t.settings,...u},updatedAt:new Date};r(h)},addCustomField:async u=>{const h={...u,id:Math.random().toString(36).substr(2,9)};a(m=>[...m,h])},updateCustomField:async(u,h)=>{a(m=>m.map(v=>v.id===u?{...v,...h}:v))},deleteCustomField:async u=>{a(h=>h.filter(m=>m.id!==u))}};return n.jsx(d7.Provider,{value:f,children:e})}const _Q={theme:"system",setTheme:()=>null},IQ=w.createContext(_Q);function kQ({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...s}){const[a,i]=w.useState(()=>localStorage.getItem(r)||t);w.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(a)},[a]);const o={theme:a,setTheme:l=>{localStorage.setItem(r,l),i(l)}};return n.jsx(IQ.Provider,{...s,value:o,children:e})}var DQ=Object.defineProperty,OQ=(e,t,r)=>t in e?DQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wN=(e,t,r)=>(OQ(e,typeof t!="symbol"?t+"":t,r),r);let LQ=class{constructor(){wN(this,"current",this.detect()),wN(this,"handoffState","pending"),wN(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ec=new LQ,Zi=(e,t)=>{ec.isServer?w.useEffect(e,t):w.useLayoutEffect(e,t)};function tc(e){let t=w.useRef(e);return Zi(()=>{t.current=e},[e]),t}let yn=function(e){let t=tc(e);return ce.useCallback((...r)=>t.current(...r),[t])};function Ij(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function hf(){let e=[],t={addEventListener(r,s,a,i){return r.addEventListener(s,a,i),t.add(()=>r.removeEventListener(s,a,i))},requestAnimationFrame(...r){let s=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let s=setTimeout(...r);return t.add(()=>clearTimeout(s))},microTask(...r){let s={current:!0};return Ij(()=>{s.current&&r[0]()}),t.add(()=>{s.current=!1})},style(r,s,a){let i=r.style.getPropertyValue(s);return Object.assign(r.style,{[s]:a}),this.add(()=>{Object.assign(r.style,{[s]:i})})},group(r){let s=hf();return r(s),this.add(()=>s.dispose())},add(r){return e.push(r),()=>{let s=e.indexOf(r);if(s>=0)for(let a of e.splice(s,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function $4(){let[e]=w.useState(hf);return w.useEffect(()=>()=>e.dispose(),[e]),e}function RQ(){let e=typeof document>"u";return"useSyncExternalStore"in jl?(t=>t.useSyncExternalStore)(jl)(()=>()=>{},()=>!1,()=>!e):!1}function Bm(){let e=RQ(),[t,r]=w.useState(ec.isHandoffComplete);return t&&ec.isHandoffComplete===!1&&r(!1),w.useEffect(()=>{t!==!0&&r(!0)},[t]),w.useEffect(()=>ec.handoff(),[]),e?!1:t}var eI;let zm=(eI=ce.useId)!=null?eI:function(){let e=Bm(),[t,r]=ce.useState(e?()=>ec.nextId():null);return Zi(()=>{t===null&&r(ec.nextId())},[t]),t!=null?""+t:void 0};function aa(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,aa),s}function u7(e){return ec.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Z5=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var bu=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(bu||{}),f7=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(f7||{}),$Q=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))($Q||{});function FQ(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Z5)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var h7=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(h7||{});function MQ(e,t=0){var r;return e===((r=u7(e))==null?void 0:r.body)?!1:aa(t,{0(){return e.matches(Z5)},1(){let s=e;for(;s!==null;){if(s.matches(Z5))return!0;s=s.parentElement}return!1}})}var BQ=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(BQ||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Mu(e){e==null||e.focus({preventScroll:!0})}let zQ=["textarea","input"].join(",");function UQ(e){var t,r;return(r=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,zQ))!=null?r:!1}function VQ(e,t=r=>r){return e.slice().sort((r,s)=>{let a=t(r),i=t(s);if(a===null||i===null)return 0;let o=a.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function rb(e,t,{sorted:r=!0,relativeTo:s=null,skipElements:a=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?r?VQ(e):e:FQ(e);a.length>0&&o.length>1&&(o=o.filter(m=>!a.includes(m))),s=s??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},f=0,u=o.length,h;do{if(f>=u||f+u<=0)return 0;let m=c+f;if(t&16)m=(m+u)%u;else{if(m<0)return 3;if(m>=u)return 1}h=o[m],h==null||h.focus(d),f+=l}while(h!==i.activeElement);return t&6&&UQ(h)&&h.select(),2}function m7(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function WQ(){return/Android/gi.test(window.navigator.userAgent)}function qQ(){return m7()||WQ()}function ty(e,t,r){let s=tc(t);w.useEffect(()=>{function a(i){s.current(i)}return document.addEventListener(e,a,r),()=>document.removeEventListener(e,a,r)},[e,r])}function p7(e,t,r){let s=tc(t);w.useEffect(()=>{function a(i){s.current(i)}return window.addEventListener(e,a,r),()=>window.removeEventListener(e,a,r)},[e,r])}function HQ(e,t,r=!0){let s=w.useRef(!1);w.useEffect(()=>{requestAnimationFrame(()=>{s.current=r})},[r]);function a(o,l){if(!s.current||o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let d=function f(u){return typeof u=="function"?f(u()):Array.isArray(u)||u instanceof Set?u:[u]}(e);for(let f of d){if(f===null)continue;let u=f instanceof HTMLElement?f:f.current;if(u!=null&&u.contains(c)||o.composed&&o.composedPath().includes(u))return}return!MQ(c,h7.Loose)&&c.tabIndex!==-1&&o.preventDefault(),t(o,c)}let i=w.useRef(null);ty("pointerdown",o=>{var l,c;s.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),ty("mousedown",o=>{var l,c;s.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),ty("click",o=>{qQ()||i.current&&(a(o,()=>i.current),i.current=null)},!0),ty("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),p7("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function bx(...e){return w.useMemo(()=>u7(...e),[...e])}let v7=Symbol();function GQ(e,t=!0){return Object.assign(e,{[v7]:t})}function $o(...e){let t=w.useRef(e);w.useEffect(()=>{t.current=e},[e]);let r=yn(s=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(s):a.current=s)});return e.every(s=>s==null||(s==null?void 0:s[v7]))?void 0:r}function F4(e,t){let r=w.useRef([]),s=yn(e);w.useEffect(()=>{let a=[...r.current];for(let[i,o]of t.entries())if(r.current[i]!==o){let l=s(t,a);return r.current=t,l}},[s,...t])}function $b(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var Fb=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Fb||{}),od=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(od||{});function ro({ourProps:e,theirProps:t,slot:r,defaultTag:s,features:a,visible:i=!0,name:o,mergeRefs:l}){l=l??KQ;let c=g7(t,e);if(i)return ry(c,r,s,o,l);let d=a??0;if(d&2){let{static:f=!1,...u}=c;if(f)return ry(u,r,s,o,l)}if(d&1){let{unmount:f=!0,...u}=c;return aa(f?0:1,{0(){return null},1(){return ry({...u,hidden:!0,style:{display:"none"}},r,s,o,l)}})}return ry(c,r,s,o,l)}function ry(e,t={},r,s,a){let{as:i=r,children:o,refName:l="ref",...c}=NN(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},f=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let u={};if(t){let h=!1,m=[];for(let[v,g]of Object.entries(t))typeof g=="boolean"&&(h=!0),g===!0&&m.push(v);h&&(u["data-headlessui-state"]=m.join(" "))}if(i===w.Fragment&&Object.keys(tI(c)).length>0){if(!w.isValidElement(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let h=f.props,m=typeof(h==null?void 0:h.className)=="function"?(...g)=>$b(h==null?void 0:h.className(...g),c.className):$b(h==null?void 0:h.className,c.className),v=m?{className:m}:{};return w.cloneElement(f,Object.assign({},g7(f.props,tI(NN(c,["ref"]))),u,d,{ref:a(f.ref,d.ref)},v))}return w.createElement(i,Object.assign({},NN(c,["ref"]),i!==w.Fragment&&d,i!==w.Fragment&&u),f)}function KQ(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function g7(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let s of e)for(let a in s)a.startsWith("on")&&typeof s[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(s[a])):t[a]=s[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(r).map(s=>[s,void 0])));for(let s in r)Object.assign(t,{[s](a,...i){let o=r[s];for(let l of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;l(a,...i)}}});return t}function wi(e){var t;return Object.assign(w.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function tI(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function NN(e,t=[]){let r=Object.assign({},e);for(let s of t)s in r&&delete r[s];return r}let YQ="div";var Mb=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Mb||{});function XQ(e,t){var r;let{features:s=1,...a}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return ro({ourProps:i,theirProps:a,slot:{},defaultTag:YQ,name:"Hidden"})}let eC=wi(XQ),M4=w.createContext(null);M4.displayName="OpenClosedContext";var ci=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ci||{});function B4(){return w.useContext(M4)}function QQ({value:e,children:t}){return ce.createElement(M4.Provider,{value:e},t)}function JQ(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Zc=[];JQ(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Zc[0]!==t.target&&(Zc.unshift(t.target),Zc=Zc.filter(r=>r!=null&&r.isConnected),Zc.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function ZQ(e){let t=e.parentElement,r=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(r=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&eJ(r)?!1:s}function eJ(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var x7=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(x7||{});function y7(e,t,r,s){let a=tc(r);w.useEffect(()=>{e=e??window;function i(o){a.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function jx(){let e=w.useRef(!1);return Zi(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function b7(e){let t=yn(e),r=w.useRef(!1);w.useEffect(()=>(r.current=!1,()=>{r.current=!0,Ij(()=>{r.current&&t()})}),[t])}var Nv=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Nv||{});function tJ(){let e=w.useRef(0);return p7("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function j7(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)r.current instanceof HTMLElement&&t.add(r.current);return t}let rJ="div";var w7=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(w7||{});function nJ(e,t){let r=w.useRef(null),s=$o(r,t),{initialFocus:a,containers:i,features:o=30,...l}=e;Bm()||(o=1);let c=bx(r);iJ({ownerDocument:c},!!(o&16));let d=oJ({ownerDocument:c,container:r,initialFocus:a},!!(o&2));lJ({ownerDocument:c,container:r,containers:i,previousActiveElement:d},!!(o&8));let f=tJ(),u=yn(g=>{let p=r.current;p&&(x=>x())(()=>{aa(f.current,{[Nv.Forwards]:()=>{rb(p,bu.First,{skipElements:[g.relatedTarget]})},[Nv.Backwards]:()=>{rb(p,bu.Last,{skipElements:[g.relatedTarget]})}})})}),h=$4(),m=w.useRef(!1),v={ref:s,onKeyDown(g){g.key=="Tab"&&(m.current=!0,h.requestAnimationFrame(()=>{m.current=!1}))},onBlur(g){let p=j7(i);r.current instanceof HTMLElement&&p.add(r.current);let x=g.relatedTarget;x instanceof HTMLElement&&x.dataset.headlessuiFocusGuard!=="true"&&(N7(p,x)||(m.current?rb(r.current,aa(f.current,{[Nv.Forwards]:()=>bu.Next,[Nv.Backwards]:()=>bu.Previous})|bu.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&Mu(g.target)))}};return ce.createElement(ce.Fragment,null,!!(o&4)&&ce.createElement(eC,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Mb.Focusable}),ro({ourProps:v,theirProps:l,defaultTag:rJ,name:"FocusTrap"}),!!(o&4)&&ce.createElement(eC,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Mb.Focusable}))}let sJ=wi(nJ),Yp=Object.assign(sJ,{features:w7});function aJ(e=!0){let t=w.useRef(Zc.slice());return F4(([r],[s])=>{s===!0&&r===!1&&Ij(()=>{t.current.splice(0)}),s===!1&&r===!0&&(t.current=Zc.slice())},[e,Zc,t]),yn(()=>{var r;return(r=t.current.find(s=>s!=null&&s.isConnected))!=null?r:null})}function iJ({ownerDocument:e},t){let r=aJ(t);F4(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Mu(r())},[t]),b7(()=>{t&&Mu(r())})}function oJ({ownerDocument:e,container:t,initialFocus:r},s){let a=w.useRef(null),i=jx();return F4(()=>{if(!s)return;let o=t.current;o&&Ij(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===l){a.current=l;return}}else if(o.contains(l)){a.current=l;return}r!=null&&r.current?Mu(r.current):rb(o,bu.First)===f7.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[s]),a}function lJ({ownerDocument:e,container:t,containers:r,previousActiveElement:s},a){let i=jx();y7(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!i.current)return;let l=j7(r);t.current instanceof HTMLElement&&l.add(t.current);let c=s.current;if(!c)return;let d=o.target;d&&d instanceof HTMLElement?N7(l,d)?(s.current=d,Mu(d)):(o.preventDefault(),o.stopPropagation(),Mu(c)):Mu(s.current)},!0)}function N7(e,t){for(let r of e)if(r.contains(t))return!0;return!1}let S7=w.createContext(!1);function cJ(){return w.useContext(S7)}function tC(e){return ce.createElement(S7.Provider,{value:e.force},e.children)}function dJ(e){let t=cJ(),r=w.useContext(C7),s=bx(e),[a,i]=w.useState(()=>{if(!t&&r!==null||ec.isServer)return null;let o=s==null?void 0:s.getElementById("headlessui-portal-root");if(o)return o;if(s===null)return null;let l=s.createElement("div");return l.setAttribute("id","headlessui-portal-root"),s.body.appendChild(l)});return w.useEffect(()=>{a!==null&&(s!=null&&s.body.contains(a)||s==null||s.body.appendChild(a))},[a,s]),w.useEffect(()=>{t||r!==null&&i(r.current)},[r,i,t]),a}let uJ=w.Fragment;function fJ(e,t){let r=e,s=w.useRef(null),a=$o(GQ(f=>{s.current=f}),t),i=bx(s),o=dJ(s),[l]=w.useState(()=>{var f;return ec.isServer?null:(f=i==null?void 0:i.createElement("div"))!=null?f:null}),c=w.useContext(rC),d=Bm();return Zi(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),Zi(()=>{if(l&&c)return c.register(l)},[c,l]),b7(()=>{var f;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((f=o.parentElement)==null||f.removeChild(o)))}),d?!o||!l?null:Sl.createPortal(ro({ourProps:{ref:a},theirProps:r,defaultTag:uJ,name:"Portal"}),l):null}let hJ=w.Fragment,C7=w.createContext(null);function mJ(e,t){let{target:r,...s}=e,a={ref:$o(t)};return ce.createElement(C7.Provider,{value:r},ro({ourProps:a,theirProps:s,defaultTag:hJ,name:"Popover.Group"}))}let rC=w.createContext(null);function pJ(){let e=w.useContext(rC),t=w.useRef([]),r=yn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=yn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),a=w.useMemo(()=>({register:r,unregister:s,portals:t}),[r,s,t]);return[t,w.useMemo(()=>function({children:i}){return ce.createElement(rC.Provider,{value:a},i)},[a])]}let vJ=wi(fJ),gJ=wi(mJ),nC=Object.assign(vJ,{Group:gJ});function xJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const yJ=typeof Object.is=="function"?Object.is:xJ,{useState:bJ,useEffect:jJ,useLayoutEffect:wJ,useDebugValue:NJ}=jl;function SJ(e,t,r){const s=t(),[{inst:a},i]=bJ({inst:{value:s,getSnapshot:t}});return wJ(()=>{a.value=s,a.getSnapshot=t,SN(a)&&i({inst:a})},[e,s,t]),jJ(()=>(SN(a)&&i({inst:a}),e(()=>{SN(a)&&i({inst:a})})),[e]),NJ(s),s}function SN(e){const t=e.getSnapshot,r=e.value;try{const s=t();return!yJ(r,s)}catch{return!0}}function CJ(e,t,r){return t()}const AJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EJ=!AJ,PJ=EJ?CJ:SJ,TJ="useSyncExternalStore"in jl?(e=>e.useSyncExternalStore)(jl):PJ;function _J(e){return TJ(e.subscribe,e.getSnapshot,e.getSnapshot)}function IJ(e,t){let r=e(),s=new Set;return{getSnapshot(){return r},subscribe(a){return s.add(a),()=>s.delete(a)},dispatch(a,...i){let o=t[a].call(r,...i);o&&(r=o,s.forEach(l=>l()))}}}function kJ(){let e;return{before({doc:t}){var r;let s=t.documentElement;e=((r=t.defaultView)!=null?r:window).innerWidth-s.clientWidth},after({doc:t,d:r}){let s=t.documentElement,a=s.clientWidth-s.offsetWidth,i=e-a;r.style(s,"paddingRight",`${i}px`)}}}function DJ(){return m7()?{before({doc:e,d:t,meta:r}){function s(a){return r.containers.flatMap(i=>i()).some(i=>i.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=hf();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),f=e.querySelector(d);f&&!s(f)&&(o=f)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function OJ(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function LJ(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let Tu=IJ(()=>new Map,{PUSH(e,t){var r;let s=(r=this.get(e))!=null?r:{doc:e,count:0,d:hf(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let s={doc:e,d:t,meta:LJ(r)},a=[DJ(),kJ(),OJ()];a.forEach(({before:i})=>i==null?void 0:i(s)),a.forEach(({after:i})=>i==null?void 0:i(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Tu.subscribe(()=>{let e=Tu.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let s=t.get(r.doc)==="hidden",a=r.count!==0;(a&&!s||!a&&s)&&Tu.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&Tu.dispatch("TEARDOWN",r)}});function RJ(e,t,r){let s=_J(Tu),a=e?s.get(e):void 0,i=a?a.count>0:!1;return Zi(()=>{if(!(!e||!t))return Tu.dispatch("PUSH",e,r),()=>Tu.dispatch("POP",e,r)},[t,e]),i}let CN=new Map,Xp=new Map;function rI(e,t=!0){Zi(()=>{var r;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function a(){var o;if(!s)return;let l=(o=Xp.get(s))!=null?o:1;if(l===1?Xp.delete(s):Xp.set(s,l-1),l!==1)return;let c=CN.get(s);c&&(c["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",c["aria-hidden"]),s.inert=c.inert,CN.delete(s))}let i=(r=Xp.get(s))!=null?r:0;return Xp.set(s,i+1),i!==0||(CN.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),a},[e,t])}function $J({defaultContainers:e=[],portals:t,mainTreeNodeRef:r}={}){var s;let a=w.useRef((s=r==null?void 0:r.current)!=null?s:null),i=bx(a),o=yn(()=>{var l,c,d;let f=[];for(let u of e)u!==null&&(u instanceof HTMLElement?f.push(u):"current"in u&&u.current instanceof HTMLElement&&f.push(u.current));if(t!=null&&t.current)for(let u of t.current)f.push(u);for(let u of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(u.contains(a.current)||u.contains((d=(c=a.current)==null?void 0:c.getRootNode())==null?void 0:d.host)||f.some(h=>u.contains(h))||f.push(u));return f});return{resolveContainers:o,contains:yn(l=>o().some(c=>c.contains(l))),mainTreeNodeRef:a,MainTreeNode:w.useMemo(()=>function(){return r!=null?null:ce.createElement(eC,{features:Mb.Hidden,ref:a})},[a,r])}}let z4=w.createContext(()=>{});z4.displayName="StackContext";var sC=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(sC||{});function FJ(){return w.useContext(z4)}function MJ({children:e,onUpdate:t,type:r,element:s,enabled:a}){let i=FJ(),o=yn((...l)=>{t==null||t(...l),i(...l)});return Zi(()=>{let l=a===void 0||a===!0;return l&&o(0,r,s),()=>{l&&o(1,r,s)}},[o,r,s,a]),ce.createElement(z4.Provider,{value:o},e)}let A7=w.createContext(null);function E7(){let e=w.useContext(A7);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,E7),t}return e}function BJ(){let[e,t]=w.useState([]);return[e.length>0?e.join(" "):void 0,w.useMemo(()=>function(r){let s=yn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),a=w.useMemo(()=>({register:s,slot:r.slot,name:r.name,props:r.props}),[s,r.slot,r.name,r.props]);return ce.createElement(A7.Provider,{value:a},r.children)},[t])]}let zJ="p";function UJ(e,t){let r=zm(),{id:s=`headlessui-description-${r}`,...a}=e,i=E7(),o=$o(t);Zi(()=>i.register(s),[s,i.register]);let l={ref:o,...i.props,id:s};return ro({ourProps:l,theirProps:a,slot:i.slot||{},defaultTag:zJ,name:i.name||"Description"})}let VJ=wi(UJ),WJ=Object.assign(VJ,{});var qJ=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(qJ||{}),HJ=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(HJ||{});let GJ={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Bb=w.createContext(null);Bb.displayName="DialogContext";function wx(e){let t=w.useContext(Bb);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,wx),r}return t}function KJ(e,t,r=()=>[document.body]){RJ(e,t,s=>{var a;return{containers:[...(a=s.containers)!=null?a:[],r]}})}function YJ(e,t){return aa(t.type,GJ,e,t)}let XJ="div",QJ=Fb.RenderStrategy|Fb.Static;function JJ(e,t){let r=zm(),{id:s=`headlessui-dialog-${r}`,open:a,onClose:i,initialFocus:o,role:l="dialog",__demoMode:c=!1,...d}=e,[f,u]=w.useState(0),h=w.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(h.current||(h.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=B4();a===void 0&&m!==null&&(a=(m&ci.Open)===ci.Open);let v=w.useRef(null),g=$o(v,t),p=bx(v),x=e.hasOwnProperty("open")||m!==null,b=e.hasOwnProperty("onClose");if(!x&&!b)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!x)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!b)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let y=a?0:1,[j,E]=w.useReducer(YJ,{titleId:null,descriptionId:null,panelRef:w.createRef()}),A=yn(()=>i(!1)),C=yn(ve=>E({type:0,id:ve})),S=Bm()?c?!1:y===0:!1,T=f>1,O=w.useContext(Bb)!==null,[_,N]=pJ(),D={get current(){var ve;return(ve=j.panelRef.current)!=null?ve:v.current}},{resolveContainers:I,mainTreeNodeRef:R,MainTreeNode:M}=$J({portals:_,defaultContainers:[D]}),$=T?"parent":"leaf",B=m!==null?(m&ci.Closing)===ci.Closing:!1,U=(()=>O||B?!1:S)(),q=w.useCallback(()=>{var ve,pe;return(pe=Array.from((ve=p==null?void 0:p.querySelectorAll("body > *"))!=null?ve:[]).find(De=>De.id==="headlessui-portal-root"?!1:De.contains(R.current)&&De instanceof HTMLElement))!=null?pe:null},[R]);rI(q,U);let W=(()=>T?!0:S)(),L=w.useCallback(()=>{var ve,pe;return(pe=Array.from((ve=p==null?void 0:p.querySelectorAll("[data-headlessui-portal]"))!=null?ve:[]).find(De=>De.contains(R.current)&&De instanceof HTMLElement))!=null?pe:null},[R]);rI(L,W);let V=(()=>!(!S||T))();HQ(I,ve=>{ve.preventDefault(),A()},V);let G=(()=>!(T||y!==0))();y7(p==null?void 0:p.defaultView,"keydown",ve=>{G&&(ve.defaultPrevented||ve.key===x7.Escape&&(ve.preventDefault(),ve.stopPropagation(),A()))});let Z=(()=>!(B||y!==0||O))();KJ(p,Z,I),w.useEffect(()=>{if(y!==0||!v.current)return;let ve=new ResizeObserver(pe=>{for(let De of pe){let xe=De.target.getBoundingClientRect();xe.x===0&&xe.y===0&&xe.width===0&&xe.height===0&&A()}});return ve.observe(v.current),()=>ve.disconnect()},[y,v,A]);let[ee,he]=BJ(),me=w.useMemo(()=>[{dialogState:y,close:A,setTitleId:C},j],[y,j,A,C]),oe=w.useMemo(()=>({open:y===0}),[y]),we={ref:g,id:s,role:l,"aria-modal":y===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":ee};return ce.createElement(MJ,{type:"Dialog",enabled:y===0,element:v,onUpdate:yn((ve,pe)=>{pe==="Dialog"&&aa(ve,{[sC.Add]:()=>u(De=>De+1),[sC.Remove]:()=>u(De=>De-1)})})},ce.createElement(tC,{force:!0},ce.createElement(nC,null,ce.createElement(Bb.Provider,{value:me},ce.createElement(nC.Group,{target:v},ce.createElement(tC,{force:!1},ce.createElement(he,{slot:oe,name:"Dialog.Description"},ce.createElement(Yp,{initialFocus:o,containers:I,features:S?aa($,{parent:Yp.features.RestoreFocus,leaf:Yp.features.All&~Yp.features.FocusLock}):Yp.features.None},ce.createElement(N,null,ro({ourProps:we,theirProps:d,slot:oe,defaultTag:XJ,features:QJ,visible:y===0,name:"Dialog"}))))))))),ce.createElement(M,null))}let ZJ="div";function eZ(e,t){let r=zm(),{id:s=`headlessui-dialog-overlay-${r}`,...a}=e,[{dialogState:i,close:o}]=wx("Dialog.Overlay"),l=$o(t),c=yn(f=>{if(f.target===f.currentTarget){if(ZQ(f.currentTarget))return f.preventDefault();f.preventDefault(),f.stopPropagation(),o()}}),d=w.useMemo(()=>({open:i===0}),[i]);return ro({ourProps:{ref:l,id:s,"aria-hidden":!0,onClick:c},theirProps:a,slot:d,defaultTag:ZJ,name:"Dialog.Overlay"})}let tZ="div";function rZ(e,t){let r=zm(),{id:s=`headlessui-dialog-backdrop-${r}`,...a}=e,[{dialogState:i},o]=wx("Dialog.Backdrop"),l=$o(t);w.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let c=w.useMemo(()=>({open:i===0}),[i]);return ce.createElement(tC,{force:!0},ce.createElement(nC,null,ro({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:a,slot:c,defaultTag:tZ,name:"Dialog.Backdrop"})))}let nZ="div";function sZ(e,t){let r=zm(),{id:s=`headlessui-dialog-panel-${r}`,...a}=e,[{dialogState:i},o]=wx("Dialog.Panel"),l=$o(t,o.panelRef),c=w.useMemo(()=>({open:i===0}),[i]),d=yn(f=>{f.stopPropagation()});return ro({ourProps:{ref:l,id:s,onClick:d},theirProps:a,slot:c,defaultTag:nZ,name:"Dialog.Panel"})}let aZ="h2";function iZ(e,t){let r=zm(),{id:s=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:i,setTitleId:o}]=wx("Dialog.Title"),l=$o(t);w.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=w.useMemo(()=>({open:i===0}),[i]);return ro({ourProps:{ref:l,id:s},theirProps:a,slot:c,defaultTag:aZ,name:"Dialog.Title"})}let oZ=wi(JJ),lZ=wi(rZ),cZ=wi(sZ),dZ=wi(eZ),uZ=wi(iZ),nI=Object.assign(oZ,{Backdrop:lZ,Panel:cZ,Overlay:dZ,Title:uZ,Description:WJ});function fZ(e=0){let[t,r]=w.useState(e),s=jx(),a=w.useCallback(c=>{s.current&&r(d=>d|c)},[t,s]),i=w.useCallback(c=>!!(t&c),[t]),o=w.useCallback(c=>{s.current&&r(d=>d&~c)},[r,s]),l=w.useCallback(c=>{s.current&&r(d=>d^c)},[r]);return{flags:t,addFlag:a,hasFlag:i,removeFlag:o,toggleFlag:l}}function hZ(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function AN(e,...t){e&&t.length>0&&e.classList.add(...t)}function EN(e,...t){e&&t.length>0&&e.classList.remove(...t)}function mZ(e,t){let r=hf();if(!e)return r.dispose;let{transitionDuration:s,transitionDelay:a}=getComputedStyle(e),[i,o]=[s,a].map(c=>{let[d=0]=c.split(",").filter(Boolean).map(f=>f.includes("ms")?parseFloat(f):parseFloat(f)*1e3).sort((f,u)=>u-f);return d}),l=i+o;if(l!==0){r.group(d=>{d.setTimeout(()=>{t(),d.dispose()},l),d.addEventListener(e,"transitionrun",f=>{f.target===f.currentTarget&&d.dispose()})});let c=r.addEventListener(e,"transitionend",d=>{d.target===d.currentTarget&&(t(),c())})}else t();return r.add(()=>t()),r.dispose}function pZ(e,t,r,s){let a=r?"enter":"leave",i=hf(),o=s!==void 0?hZ(s):()=>{};a==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=aa(a,{enter:()=>t.enter,leave:()=>t.leave}),c=aa(a,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),d=aa(a,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return EN(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),AN(e,...t.base,...l,...d),i.nextFrame(()=>{EN(e,...t.base,...l,...d),AN(e,...t.base,...l,...c),mZ(e,()=>(EN(e,...t.base,...l),AN(e,...t.base,...t.entered),o()))}),i.dispose}function vZ({immediate:e,container:t,direction:r,classes:s,onStart:a,onStop:i}){let o=jx(),l=$4(),c=tc(r);Zi(()=>{e&&(c.current="enter")},[e]),Zi(()=>{let d=hf();l.add(d.dispose);let f=t.current;if(f&&c.current!=="idle"&&o.current)return d.dispose(),a.current(c.current),d.add(pZ(f,s.current,c.current==="enter",()=>{d.dispose(),i.current(c.current)})),d.dispose},[r])}function Bc(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let kj=w.createContext(null);kj.displayName="TransitionContext";var gZ=(e=>(e.Visible="visible",e.Hidden="hidden",e))(gZ||{});function xZ(){let e=w.useContext(kj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function yZ(){let e=w.useContext(Dj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Dj=w.createContext(null);Dj.displayName="NestingContext";function Oj(e){return"children"in e?Oj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function P7(e,t){let r=tc(e),s=w.useRef([]),a=jx(),i=$4(),o=yn((m,v=od.Hidden)=>{let g=s.current.findIndex(({el:p})=>p===m);g!==-1&&(aa(v,{[od.Unmount](){s.current.splice(g,1)},[od.Hidden](){s.current[g].state="hidden"}}),i.microTask(()=>{var p;!Oj(s)&&a.current&&((p=r.current)==null||p.call(r))}))}),l=yn(m=>{let v=s.current.find(({el:g})=>g===m);return v?v.state!=="visible"&&(v.state="visible"):s.current.push({el:m,state:"visible"}),()=>o(m,od.Unmount)}),c=w.useRef([]),d=w.useRef(Promise.resolve()),f=w.useRef({enter:[],leave:[],idle:[]}),u=yn((m,v,g)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([p])=>p!==m)),t==null||t.chains.current[v].push([m,new Promise(p=>{c.current.push(p)})]),t==null||t.chains.current[v].push([m,new Promise(p=>{Promise.all(f.current[v].map(([x,b])=>b)).then(()=>p())})]),v==="enter"?d.current=d.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(v)):g(v)}),h=yn((m,v,g)=>{Promise.all(f.current[v].splice(0).map(([p,x])=>x)).then(()=>{var p;(p=c.current.shift())==null||p()}).then(()=>g(v))});return w.useMemo(()=>({children:s,register:l,unregister:o,onStart:u,onStop:h,wait:d,chains:f}),[l,o,s,u,h,f,d])}function bZ(){}let jZ=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function sI(e){var t;let r={};for(let s of jZ)r[s]=(t=e[s])!=null?t:bZ;return r}function wZ(e){let t=w.useRef(sI(e));return w.useEffect(()=>{t.current=sI(e)},[e]),t}let NZ="div",T7=Fb.RenderStrategy;function SZ(e,t){var r,s;let{beforeEnter:a,afterEnter:i,beforeLeave:o,afterLeave:l,enter:c,enterFrom:d,enterTo:f,entered:u,leave:h,leaveFrom:m,leaveTo:v,...g}=e,p=w.useRef(null),x=$o(p,t),b=(r=g.unmount)==null||r?od.Unmount:od.Hidden,{show:y,appear:j,initial:E}=xZ(),[A,C]=w.useState(y?"visible":"hidden"),S=yZ(),{register:T,unregister:O}=S;w.useEffect(()=>T(p),[T,p]),w.useEffect(()=>{if(b===od.Hidden&&p.current){if(y&&A!=="visible"){C("visible");return}return aa(A,{hidden:()=>O(p),visible:()=>T(p)})}},[A,p,T,O,y,b]);let _=tc({base:Bc(g.className),enter:Bc(c),enterFrom:Bc(d),enterTo:Bc(f),entered:Bc(u),leave:Bc(h),leaveFrom:Bc(m),leaveTo:Bc(v)}),N=wZ({beforeEnter:a,afterEnter:i,beforeLeave:o,afterLeave:l}),D=Bm();w.useEffect(()=>{if(D&&A==="visible"&&p.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[p,A,D]);let I=E&&!j,R=j&&y&&E,M=(()=>!D||I?"idle":y?"enter":"leave")(),$=fZ(0),B=yn(G=>aa(G,{enter:()=>{$.addFlag(ci.Opening),N.current.beforeEnter()},leave:()=>{$.addFlag(ci.Closing),N.current.beforeLeave()},idle:()=>{}})),U=yn(G=>aa(G,{enter:()=>{$.removeFlag(ci.Opening),N.current.afterEnter()},leave:()=>{$.removeFlag(ci.Closing),N.current.afterLeave()},idle:()=>{}})),q=P7(()=>{C("hidden"),O(p)},S),W=w.useRef(!1);vZ({immediate:R,container:p,classes:_,direction:M,onStart:tc(G=>{W.current=!0,q.onStart(p,G,B)}),onStop:tc(G=>{W.current=!1,q.onStop(p,G,U),G==="leave"&&!Oj(q)&&(C("hidden"),O(p))})});let L=g,V={ref:x};return R?L={...L,className:$b(g.className,..._.current.enter,..._.current.enterFrom)}:W.current&&(L.className=$b(g.className,(s=p.current)==null?void 0:s.className),L.className===""&&delete L.className),ce.createElement(Dj.Provider,{value:q},ce.createElement(QQ,{value:aa(A,{visible:ci.Open,hidden:ci.Closed})|$.flags},ro({ourProps:V,theirProps:L,defaultTag:NZ,features:T7,visible:A==="visible",name:"Transition.Child"})))}function CZ(e,t){let{show:r,appear:s=!1,unmount:a=!0,...i}=e,o=w.useRef(null),l=$o(o,t);Bm();let c=B4();if(r===void 0&&c!==null&&(r=(c&ci.Open)===ci.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,f]=w.useState(r?"visible":"hidden"),u=P7(()=>{f("hidden")}),[h,m]=w.useState(!0),v=w.useRef([r]);Zi(()=>{h!==!1&&v.current[v.current.length-1]!==r&&(v.current.push(r),m(!1))},[v,r]);let g=w.useMemo(()=>({show:r,appear:s,initial:h}),[r,s,h]);w.useEffect(()=>{if(r)f("visible");else if(!Oj(u))f("hidden");else{let y=o.current;if(!y)return;let j=y.getBoundingClientRect();j.x===0&&j.y===0&&j.width===0&&j.height===0&&f("hidden")}},[r,u]);let p={unmount:a},x=yn(()=>{var y;h&&m(!1),(y=e.beforeEnter)==null||y.call(e)}),b=yn(()=>{var y;h&&m(!1),(y=e.beforeLeave)==null||y.call(e)});return ce.createElement(Dj.Provider,{value:u},ce.createElement(kj.Provider,{value:g},ro({ourProps:{...p,as:w.Fragment,children:ce.createElement(_7,{ref:l,...p,...i,beforeEnter:x,beforeLeave:b})},theirProps:{},defaultTag:w.Fragment,features:T7,visible:d==="visible",name:"Transition"})))}function AZ(e,t){let r=w.useContext(kj)!==null,s=B4()!==null;return ce.createElement(ce.Fragment,null,!r&&s?ce.createElement(aC,{ref:t,...e}):ce.createElement(_7,{ref:t,...e}))}let aC=wi(CZ),_7=wi(SZ),EZ=wi(AZ),ny=Object.assign(aC,{Child:EZ,Root:aC});const aI=[{name:"Dashboard",href:"/",icon:OX},{name:"CRM & Prospecting",href:"/crm",icon:Yn},{name:"Inventory Management",href:"/inventory",icon:ia},{name:"Sales Deals",href:"/deals",icon:Ga},{name:"Finance",href:"/finance",icon:$t},{name:"Quote Builder",href:"/quotes",icon:Ns},{name:"Agreement Vault",href:"/agreements",icon:Zy},{name:"PDI Checklist",href:"/pdi",icon:Zu},{name:"Service Operations",href:"/service",icon:Au},{name:"Delivery Tracker",href:"/delivery",icon:Ba},{name:"Commission Engine",href:"/commissions",icon:$t},{name:"Client Portal",href:"/portal",icon:yx},{name:"Invoice & Payments",href:"/invoices",icon:va},{name:"Company Settings",href:"/settings",icon:bg},{name:"Platform Admin",href:"/admin",icon:_j},{name:"Reporting Suite",href:"/reports",icon:es}];function PZ({sidebarOpen:e,setSidebarOpen:t}){const r=Rm();return n.jsxs(n.Fragment,{children:[n.jsx(ny.Root,{show:e,as:w.Fragment,children:n.jsxs(nI,{as:"div",className:"relative z-50 lg:hidden",onClose:t,children:[n.jsx(ny.Child,{as:w.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/80"})}),n.jsx("div",{className:"fixed inset-0 flex",children:n.jsx(ny.Child,{as:w.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:n.jsxs(nI.Panel,{className:"relative mr-16 flex w-full max-w-xs flex-1",children:[n.jsx(ny.Child,{as:w.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"absolute left-full top-0 flex w-16 justify-center pt-5",children:n.jsxs("button",{type:"button",className:"-m-2.5 p-2.5",onClick:()=>t(!1),children:[n.jsx("span",{className:"sr-only",children:"Close sidebar"}),n.jsx(qt,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),n.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-border bg-card px-6 pb-4",children:[n.jsx("div",{className:"flex h-16 shrink-0 items-center",children:n.jsx("h1",{className:"text-xl font-bold text-primary",children:"Renter Insight"})}),n.jsx("nav",{className:"flex flex-1 flex-col",children:n.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:n.jsx("li",{children:n.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:aI.map(s=>{const a=r.pathname===s.href||s.href!=="/"&&r.pathname.startsWith(s.href);return n.jsx("li",{children:n.jsxs(M_,{to:s.href,className:Ge("group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),onClick:()=>t(!1),children:[n.jsx(s.icon,{className:Ge("h-6 w-6 shrink-0",a?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"),"aria-hidden":"true"}),s.name]})},s.name)})})})})})]})]})})})]})}),n.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-64 lg:flex-col",children:n.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-border bg-card px-6 pb-4",children:[n.jsx("div",{className:"flex h-16 shrink-0 items-center",children:n.jsx("h1",{className:"text-xl font-bold text-primary",children:"Renter Insight"})}),n.jsx("nav",{className:"flex flex-1 flex-col",children:n.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:n.jsx("li",{children:n.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:aI.map(s=>{const a=r.pathname===s.href||s.href!=="/"&&r.pathname.startsWith(s.href);return n.jsx("li",{children:n.jsxs(M_,{to:s.href,className:Ge("group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[n.jsx(s.icon,{className:Ge("h-6 w-6 shrink-0",a?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"),"aria-hidden":"true"}),s.name]})},s.name)})})})})})]})})]})}const TZ=Pj("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=w.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},i)=>{const o=s?$Y:"button";return n.jsx(o,{className:Ge(TZ({variant:t,size:r,className:e})),ref:i,...a})});J.displayName="Button";function _Z({onMenuButtonClick:e}){const{user:t,logout:r}=Fm(),{tenant:s}=Mm();return n.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-border bg-background px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[n.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-muted-foreground lg:hidden",onClick:e,children:[n.jsx("span",{className:"sr-only",children:"Open sidebar"}),n.jsx(MX,{className:"h-6 w-6","aria-hidden":"true"})]}),n.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[n.jsx("div",{className:"flex flex-1 items-center",children:n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:(s==null?void 0:s.name)||"Renter Insight CRM/DMS"})}),n.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[n.jsxs("div",{className:"flex items-center gap-x-2",children:[n.jsx(As,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:t==null?void 0:t.name})]}),n.jsxs(J,{variant:"ghost",size:"sm",onClick:r,className:"flex items-center gap-x-2",children:[n.jsx(FX,{className:"h-4 w-4"}),"Logout"]})]})]})]})}function IZ({children:e}){const[t,r]=w.useState(!1);return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(PZ,{sidebarOpen:t,setSidebarOpen:r}),n.jsxs("div",{className:"lg:pl-64",children:[n.jsx(_Z,{onMenuButtonClick:()=>r(!0)}),n.jsx("main",{className:"py-6",children:n.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e})})]})]})}const ue=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ge("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ue.displayName="Card";const be=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ge("flex flex-col space-y-1.5 p-6",e),...t}));be.displayName="CardHeader";const je=w.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:Ge("text-2xl font-semibold leading-none tracking-tight",e),...t}));je.displayName="CardTitle";const Be=w.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:Ge("text-sm text-muted-foreground",e),...t}));Be.displayName="CardDescription";const fe=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ge("p-6 pt-0",e),...t}));fe.displayName="CardContent";const kZ=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ge("flex items-center p-6 pt-0",e),...t}));kZ.displayName="CardFooter";const Pe=w.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:Ge("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));Pe.displayName="Input";const ir=w.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:Ge("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ir.displayName="Textarea";function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},it.apply(null,arguments)}function iI(e,[t,r]){return Math.min(r,Math.max(t,e))}function ga(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function DZ(e,t=[]){let r=[];function s(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];function d(u){const{scope:h,children:m,...v}=u,g=(h==null?void 0:h[e][c])||l,p=w.useMemo(()=>v,Object.values(v));return w.createElement(g.Provider,{value:p},m)}function f(u,h){const m=(h==null?void 0:h[e][c])||l,v=w.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,OZ(a,...t)]}function OZ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function LZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function I7(...e){return t=>e.forEach(r=>LZ(r,t))}function oI(...e){return w.useCallback(I7(...e),e)}const iC=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find($Z);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(oC,it({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(oC,it({},s,{ref:t}),r)});iC.displayName="Slot";const oC=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...FZ(s,r.props),ref:t?I7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});oC.displayName="SlotClone";const RZ=({children:e})=>w.createElement(w.Fragment,null,e);function $Z(e){return w.isValidElement(e)&&e.type===RZ}function FZ(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function MZ(e){const t=e+"CollectionProvider",[r,s]=DZ(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:g}=m,p=ce.useRef(null),x=ce.useRef(new Map).current;return ce.createElement(a,{scope:v,itemMap:x,collectionRef:p},g)},l=e+"CollectionSlot",c=ce.forwardRef((m,v)=>{const{scope:g,children:p}=m,x=i(l,g),b=oI(v,x.collectionRef);return ce.createElement(iC,{ref:b},p)}),d=e+"CollectionItemSlot",f="data-radix-collection-item",u=ce.forwardRef((m,v)=>{const{scope:g,children:p,...x}=m,b=ce.useRef(null),y=oI(v,b),j=i(d,g);return ce.useEffect(()=>(j.itemMap.set(b,{ref:b,...x}),()=>void j.itemMap.delete(b))),ce.createElement(iC,{[f]:"",ref:y},p)});function h(m){const v=i(e+"CollectionConsumer",m);return ce.useCallback(()=>{const p=v.collectionRef.current;if(!p)return[];const x=Array.from(p.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((j,E)=>x.indexOf(j.ref.current)-x.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:u},h,s]}function BZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function k7(...e){return t=>e.forEach(r=>BZ(r,t))}function Cl(...e){return w.useCallback(k7(...e),e)}function zZ(e,t=[]){let r=[];function s(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];function d(u){const{scope:h,children:m,...v}=u,g=(h==null?void 0:h[e][c])||l,p=w.useMemo(()=>v,Object.values(v));return w.createElement(g.Provider,{value:p},m)}function f(u,h){const m=(h==null?void 0:h[e][c])||l,v=w.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,UZ(a,...t)]}function UZ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}const VZ=w.createContext(void 0);function WZ(e){const t=w.useContext(VZ);return e||t||"ltr"}function PN(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function qZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function D7(...e){return t=>e.forEach(r=>qZ(r,t))}function HZ(...e){return w.useCallback(D7(...e),e)}const O7=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(KZ);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(lC,it({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(lC,it({},s,{ref:t}),r)});O7.displayName="Slot";const lC=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...YZ(s,r.props),ref:t?D7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});lC.displayName="SlotClone";const GZ=({children:e})=>w.createElement(w.Fragment,null,e);function KZ(e){return w.isValidElement(e)&&e.type===GZ}function YZ(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const XZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],QZ=XZ.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?O7:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,it({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function JZ(e,t){e&&Sl.flushSync(()=>e.dispatchEvent(t))}function hc(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var s;return(s=t.current)===null||s===void 0?void 0:s.call(t,...r)},[])}function ZZ(e,t=globalThis==null?void 0:globalThis.document){const r=hc(e);w.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s),()=>t.removeEventListener("keydown",s)},[r,t])}const cC="dismissableLayer.update",eee="dismissableLayer.pointerDownOutside",tee="dismissableLayer.focusOutside";let lI;const ree=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nee=w.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,f=w.useContext(ree),[u,h]=w.useState(null),m=(r=u==null?void 0:u.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,v]=w.useState({}),g=HZ(t,S=>h(S)),p=Array.from(f.layers),[x]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(x),y=u?p.indexOf(u):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,E=y>=b,A=see(S=>{const T=S.target,O=[...f.branches].some(_=>_.contains(T));!E||O||(i==null||i(S),l==null||l(S),S.defaultPrevented||c==null||c())},m),C=aee(S=>{const T=S.target;[...f.branches].some(_=>_.contains(T))||(o==null||o(S),l==null||l(S),S.defaultPrevented||c==null||c())},m);return ZZ(S=>{y===f.layers.size-1&&(a==null||a(S),!S.defaultPrevented&&c&&(S.preventDefault(),c()))},m),w.useEffect(()=>{if(u)return s&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(lI=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(u)),f.layers.add(u),cI(),()=>{s&&f.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=lI)}},[u,m,s,f]),w.useEffect(()=>()=>{u&&(f.layers.delete(u),f.layersWithOutsidePointerEventsDisabled.delete(u),cI())},[u,f]),w.useEffect(()=>{const S=()=>v({});return document.addEventListener(cC,S),()=>document.removeEventListener(cC,S)},[]),w.createElement(QZ.div,it({},d,{ref:g,style:{pointerEvents:j?E?"auto":"none":void 0,...e.style},onFocusCapture:PN(e.onFocusCapture,C.onFocusCapture),onBlurCapture:PN(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:PN(e.onPointerDownCapture,A.onPointerDownCapture)}))});function see(e,t=globalThis==null?void 0:globalThis.document){const r=hc(e),s=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let d=function(){L7(eee,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function aee(e,t=globalThis==null?void 0:globalThis.document){const r=hc(e),s=w.useRef(!1);return w.useEffect(()=>{const a=i=>{i.target&&!s.current&&L7(tee,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function cI(){const e=new CustomEvent(cC);document.dispatchEvent(e)}function L7(e,t,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?JZ(a,i):a.dispatchEvent(i)}let TN=0;function iee(){w.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:dI()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:dI()),TN++,()=>{TN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),TN--}},[])}function dI(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}function oee(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function R7(...e){return t=>e.forEach(r=>oee(r,t))}function lee(...e){return w.useCallback(R7(...e),e)}const $7=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(dee);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(dC,it({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(dC,it({},s,{ref:t}),r)});$7.displayName="Slot";const dC=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...uee(s,r.props),ref:t?R7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});dC.displayName="SlotClone";const cee=({children:e})=>w.createElement(w.Fragment,null,e);function dee(e){return w.isValidElement(e)&&e.type===cee}function uee(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const fee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],hee=fee.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?$7:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,it({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),_N="focusScope.autoFocusOnMount",IN="focusScope.autoFocusOnUnmount",uI={bubbles:!1,cancelable:!0},mee=w.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=w.useState(null),d=hc(a),f=hc(i),u=w.useRef(null),h=lee(t,g=>c(g)),m=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(s){let g=function(y){if(m.paused||!l)return;const j=y.target;l.contains(j)?u.current=j:Vc(u.current,{select:!0})},p=function(y){if(m.paused||!l)return;const j=y.relatedTarget;j!==null&&(l.contains(j)||Vc(u.current,{select:!0}))},x=function(y){const j=document.activeElement;for(const E of y)E.removedNodes.length>0&&(l!=null&&l.contains(j)||Vc(l))};document.addEventListener("focusin",g),document.addEventListener("focusout",p);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",p),b.disconnect()}}},[s,l,m.paused]),w.useEffect(()=>{if(l){hI.add(m);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(_N,uI);l.addEventListener(_N,d),l.dispatchEvent(x),x.defaultPrevented||(pee(bee(F7(l)),{select:!0}),document.activeElement===g&&Vc(l))}return()=>{l.removeEventListener(_N,d),setTimeout(()=>{const x=new CustomEvent(IN,uI);l.addEventListener(IN,f),l.dispatchEvent(x),x.defaultPrevented||Vc(g??document.body,{select:!0}),l.removeEventListener(IN,f),hI.remove(m)},0)}}},[l,d,f,m]);const v=w.useCallback(g=>{if(!r&&!s||m.paused)return;const p=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(p&&x){const b=g.currentTarget,[y,j]=vee(b);y&&j?!g.shiftKey&&x===j?(g.preventDefault(),r&&Vc(y,{select:!0})):g.shiftKey&&x===y&&(g.preventDefault(),r&&Vc(j,{select:!0})):x===b&&g.preventDefault()}},[r,s,m.paused]);return w.createElement(hee.div,it({tabIndex:-1},o,{ref:h,onKeyDown:v}))});function pee(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Vc(s,{select:t}),document.activeElement!==r)return}function vee(e){const t=F7(e),r=fI(t,e),s=fI(t.reverse(),e);return[r,s]}function F7(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function fI(e,t){for(const r of e)if(!gee(r,{upTo:t}))return r}function gee(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xee(e){return e instanceof HTMLInputElement&&"select"in e}function Vc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&xee(e)&&t&&e.select()}}const hI=yee();function yee(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=mI(e,t),e.unshift(t)},remove(t){var r;e=mI(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function mI(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function bee(e){return e.filter(t=>t.tagName!=="A")}const jee=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},wee=jl["useId".toString()]||(()=>{});let Nee=0;function M7(e){const[t,r]=w.useState(wee());return jee(()=>{e||r(s=>s??String(Nee++))},[e]),e||(t?`radix-${t}`:"")}const See=["top","right","bottom","left"],Td=Math.min,di=Math.max,zb=Math.round,sy=Math.floor,ml=e=>({x:e,y:e}),Cee={left:"right",right:"left",bottom:"top",top:"bottom"},Aee={start:"end",end:"start"};function uC(e,t,r){return di(e,Td(t,r))}function mc(e,t){return typeof e=="function"?e(t):e}function pc(e){return e.split("-")[0]}function Um(e){return e.split("-")[1]}function U4(e){return e==="x"?"y":"x"}function V4(e){return e==="y"?"height":"width"}const Eee=new Set(["top","bottom"]);function ol(e){return Eee.has(pc(e))?"y":"x"}function W4(e){return U4(ol(e))}function Pee(e,t,r){r===void 0&&(r=!1);const s=Um(e),a=W4(e),i=V4(a);let o=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ub(o)),[o,Ub(o)]}function Tee(e){const t=Ub(e);return[fC(e),t,fC(t)]}function fC(e){return e.replace(/start|end/g,t=>Aee[t])}const pI=["left","right"],vI=["right","left"],_ee=["top","bottom"],Iee=["bottom","top"];function kee(e,t,r){switch(e){case"top":case"bottom":return r?t?vI:pI:t?pI:vI;case"left":case"right":return t?_ee:Iee;default:return[]}}function Dee(e,t,r,s){const a=Um(e);let i=kee(pc(e),r==="start",s);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(fC)))),i}function Ub(e){return e.replace(/left|right|bottom|top/g,t=>Cee[t])}function Oee(e){return{top:0,right:0,bottom:0,left:0,...e}}function B7(e){return typeof e!="number"?Oee(e):{top:e,right:e,bottom:e,left:e}}function Vb(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function gI(e,t,r){let{reference:s,floating:a}=e;const i=ol(t),o=W4(t),l=V4(o),c=pc(t),d=i==="y",f=s.x+s.width/2-a.width/2,u=s.y+s.height/2-a.height/2,h=s[l]/2-a[l]/2;let m;switch(c){case"top":m={x:f,y:s.y-a.height};break;case"bottom":m={x:f,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:u};break;case"left":m={x:s.x-a.width,y:u};break;default:m={x:s.x,y:s.y}}switch(Um(t)){case"start":m[o]-=h*(r&&d?-1:1);break;case"end":m[o]+=h*(r&&d?-1:1);break}return m}const Lee=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:u}=gI(d,s,c),h=s,m={},v=0;for(let g=0;g<l.length;g++){const{name:p,fn:x}=l[g],{x:b,y,data:j,reset:E}=await x({x:f,y:u,initialPlacement:s,placement:h,strategy:a,middlewareData:m,rects:d,platform:o,elements:{reference:e,floating:t}});f=b??f,u=y??u,m={...m,[p]:{...m[p],...j}},E&&v<=50&&(v++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(d=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):E.rects),{x:f,y:u}=gI(d,h,c)),g=-1)}return{x:f,y:u,placement:h,strategy:a,middlewareData:m}};async function jg(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=mc(t,e),v=B7(m),p=l[h?u==="floating"?"reference":"floating":u],x=Vb(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(p)))==null||r?p:p.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),b=u==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},E=Vb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:y,strategy:c}):b);return{top:(x.top-E.top+v.top)/j.y,bottom:(E.bottom-x.bottom+v.bottom)/j.y,left:(x.left-E.left+v.left)/j.x,right:(E.right-x.right+v.right)/j.x}}const Ree=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=mc(e,t)||{};if(d==null)return{};const u=B7(f),h={x:r,y:s},m=W4(a),v=V4(m),g=await o.getDimensions(d),p=m==="y",x=p?"top":"left",b=p?"bottom":"right",y=p?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[m]-h[m]-i.floating[v],E=h[m]-i.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let C=A?A[y]:0;(!C||!await(o.isElement==null?void 0:o.isElement(A)))&&(C=l.floating[y]||i.floating[v]);const S=j/2-E/2,T=C/2-g[v]/2-1,O=Td(u[x],T),_=Td(u[b],T),N=O,D=C-g[v]-_,I=C/2-g[v]/2+S,R=uC(N,I,D),M=!c.arrow&&Um(a)!=null&&I!==R&&i.reference[v]/2-(I<N?O:_)-g[v]/2<0,$=M?I<N?I-N:I-D:0;return{[m]:h[m]+$,data:{[m]:R,centerOffset:I-R-$,...M&&{alignmentOffset:$}},reset:M}}}),$ee=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...p}=mc(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=pc(a),b=ol(l),y=pc(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),E=h||(y||!g?[Ub(l)]:Tee(l)),A=v!=="none";!h&&A&&E.push(...Dee(l,g,v,j));const C=[l,...E],S=await jg(t,p),T=[];let O=((s=i.flip)==null?void 0:s.overflows)||[];if(f&&T.push(S[x]),u){const I=Pee(a,o,j);T.push(S[I[0]],S[I[1]])}if(O=[...O,{placement:a,overflows:T}],!T.every(I=>I<=0)){var _,N;const I=(((_=i.flip)==null?void 0:_.index)||0)+1,R=C[I];if(R&&(!(u==="alignment"?b!==ol(R):!1)||O.every(B=>B.overflows[0]>0&&ol(B.placement)===b)))return{data:{index:I,overflows:O},reset:{placement:R}};let M=(N=O.filter($=>$.overflows[0]<=0).sort(($,B)=>$.overflows[1]-B.overflows[1])[0])==null?void 0:N.placement;if(!M)switch(m){case"bestFit":{var D;const $=(D=O.filter(B=>{if(A){const U=ol(B.placement);return U===b||U==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(U=>U>0).reduce((U,q)=>U+q,0)]).sort((B,U)=>B[1]-U[1])[0])==null?void 0:D[0];$&&(M=$);break}case"initialPlacement":M=l;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function xI(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function yI(e){return See.some(t=>e[t]>=0)}const Fee=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=mc(e,t);switch(s){case"referenceHidden":{const i=await jg(t,{...a,elementContext:"reference"}),o=xI(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:yI(o)}}}case"escaped":{const i=await jg(t,{...a,altBoundary:!0}),o=xI(i,r.floating);return{data:{escapedOffsets:o,escaped:yI(o)}}}default:return{}}}}},z7=new Set(["left","top"]);async function Mee(e,t){const{placement:r,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=pc(r),l=Um(r),c=ol(r)==="y",d=z7.has(o)?-1:1,f=i&&c?-1:1,u=mc(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:v}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*f,y:h*d}:{x:h*d,y:m*f}}const Bee=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await Mee(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},zee=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:p=>{let{x,y:b}=p;return{x,y:b}}},...c}=mc(e,t),d={x:r,y:s},f=await jg(t,c),u=ol(pc(a)),h=U4(u);let m=d[h],v=d[u];if(i){const p=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=m+f[p],y=m-f[x];m=uC(b,m,y)}if(o){const p=u==="y"?"top":"left",x=u==="y"?"bottom":"right",b=v+f[p],y=v-f[x];v=uC(b,v,y)}const g=l.fn({...t,[h]:m,[u]:v});return{...g,data:{x:g.x-r,y:g.y-s,enabled:{[h]:i,[u]:o}}}}}},Uee=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=mc(e,t),f={x:r,y:s},u=ol(a),h=U4(u);let m=f[h],v=f[u];const g=mc(l,t),p=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const y=h==="y"?"height":"width",j=i.reference[h]-i.floating[y]+p.mainAxis,E=i.reference[h]+i.reference[y]-p.mainAxis;m<j?m=j:m>E&&(m=E)}if(d){var x,b;const y=h==="y"?"width":"height",j=z7.has(pc(a)),E=i.reference[u]-i.floating[y]+(j&&((x=o.offset)==null?void 0:x[u])||0)+(j?0:p.crossAxis),A=i.reference[u]+i.reference[y]+(j?0:((b=o.offset)==null?void 0:b[u])||0)-(j?p.crossAxis:0);v<E?v=E:v>A&&(v=A)}return{[h]:m,[u]:v}}}},Vee=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=mc(e,t),f=await jg(t,d),u=pc(a),h=Um(a),m=ol(a)==="y",{width:v,height:g}=i.floating;let p,x;u==="top"||u==="bottom"?(p=u,x=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=u,p=h==="end"?"top":"bottom");const b=g-f.top-f.bottom,y=v-f.left-f.right,j=Td(g-f[p],b),E=Td(v-f[x],y),A=!t.middlewareData.shift;let C=j,S=E;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(S=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(C=b),A&&!h){const O=di(f.left,0),_=di(f.right,0),N=di(f.top,0),D=di(f.bottom,0);m?S=v-2*(O!==0||_!==0?O+_:di(f.left,f.right)):C=g-2*(N!==0||D!==0?N+D:di(f.top,f.bottom))}await c({...t,availableWidth:S,availableHeight:C});const T=await o.getDimensions(l.floating);return v!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function Lj(){return typeof window<"u"}function Vm(e){return U7(e)?(e.nodeName||"").toLowerCase():"#document"}function vi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Al(e){var t;return(t=(U7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function U7(e){return Lj()?e instanceof Node||e instanceof vi(e).Node:!1}function Lo(e){return Lj()?e instanceof Element||e instanceof vi(e).Element:!1}function wl(e){return Lj()?e instanceof HTMLElement||e instanceof vi(e).HTMLElement:!1}function bI(e){return!Lj()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vi(e).ShadowRoot}const Wee=new Set(["inline","contents"]);function Nx(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=Ro(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!Wee.has(a)}const qee=new Set(["table","td","th"]);function Hee(e){return qee.has(Vm(e))}const Gee=[":popover-open",":modal"];function Rj(e){return Gee.some(t=>{try{return e.matches(t)}catch{return!1}})}const Kee=["transform","translate","scale","rotate","perspective"],Yee=["transform","translate","scale","rotate","perspective","filter"],Xee=["paint","layout","strict","content"];function q4(e){const t=H4(),r=Lo(e)?Ro(e):e;return Kee.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Yee.some(s=>(r.willChange||"").includes(s))||Xee.some(s=>(r.contain||"").includes(s))}function Qee(e){let t=_d(e);for(;wl(t)&&!Zh(t);){if(q4(t))return t;if(Rj(t))return null;t=_d(t)}return null}function H4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Jee=new Set(["html","body","#document"]);function Zh(e){return Jee.has(Vm(e))}function Ro(e){return vi(e).getComputedStyle(e)}function $j(e){return Lo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _d(e){if(Vm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bI(e)&&e.host||Al(e);return bI(t)?t.host:t}function V7(e){const t=_d(e);return Zh(t)?e.ownerDocument?e.ownerDocument.body:e.body:wl(t)&&Nx(t)?t:V7(t)}function wg(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=V7(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),o=vi(a);if(i){const l=hC(o);return t.concat(o,o.visualViewport||[],Nx(a)?a:[],l&&r?wg(l):[])}return t.concat(a,wg(a,[],r))}function hC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function W7(e){const t=Ro(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=wl(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:s,l=zb(r)!==i||zb(s)!==o;return l&&(r=i,s=o),{width:r,height:s,$:l}}function G4(e){return Lo(e)?e:e.contextElement}function Rh(e){const t=G4(e);if(!wl(t))return ml(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:i}=W7(t);let o=(i?zb(r.width):r.width)/s,l=(i?zb(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Zee=ml(0);function q7(e){const t=vi(e);return!H4()||!t.visualViewport?Zee:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ete(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==vi(e)?!1:t}function ef(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=G4(e);let o=ml(1);t&&(s?Lo(s)&&(o=Rh(s)):o=Rh(e));const l=ete(i,r,s)?q7(i):ml(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,f=a.width/o.x,u=a.height/o.y;if(i){const h=vi(i),m=s&&Lo(s)?vi(s):s;let v=h,g=hC(v);for(;g&&s&&m!==v;){const p=Rh(g),x=g.getBoundingClientRect(),b=Ro(g),y=x.left+(g.clientLeft+parseFloat(b.paddingLeft))*p.x,j=x.top+(g.clientTop+parseFloat(b.paddingTop))*p.y;c*=p.x,d*=p.y,f*=p.x,u*=p.y,c+=y,d+=j,v=vi(g),g=hC(v)}}return Vb({width:f,height:u,x:c,y:d})}function K4(e,t){const r=$j(e).scrollLeft;return t?t.left+r:ef(Al(e)).left+r}function H7(e,t,r){r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(r?0:K4(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function tte(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const i=a==="fixed",o=Al(s),l=t?Rj(t.floating):!1;if(s===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=ml(1);const f=ml(0),u=wl(s);if((u||!u&&!i)&&((Vm(s)!=="body"||Nx(o))&&(c=$j(s)),wl(s))){const m=ef(s);d=Rh(s),f.x=m.x+s.clientLeft,f.y=m.y+s.clientTop}const h=o&&!u&&!i?H7(o,c,!0):ml(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+f.x+h.x,y:r.y*d.y-c.scrollTop*d.y+f.y+h.y}}function rte(e){return Array.from(e.getClientRects())}function nte(e){const t=Al(e),r=$j(e),s=e.ownerDocument.body,a=di(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=di(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+K4(e);const l=-r.scrollTop;return Ro(s).direction==="rtl"&&(o+=di(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}function ste(e,t){const r=vi(e),s=Al(e),a=r.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=H4();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const ate=new Set(["absolute","fixed"]);function ite(e,t){const r=ef(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,i=wl(e)?Rh(e):ml(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:o,height:l,x:c,y:d}}function jI(e,t,r){let s;if(t==="viewport")s=ste(e,r);else if(t==="document")s=nte(Al(e));else if(Lo(t))s=ite(t,r);else{const a=q7(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Vb(s)}function G7(e,t){const r=_d(e);return r===t||!Lo(r)||Zh(r)?!1:Ro(r).position==="fixed"||G7(r,t)}function ote(e,t){const r=t.get(e);if(r)return r;let s=wg(e,[],!1).filter(l=>Lo(l)&&Vm(l)!=="body"),a=null;const i=Ro(e).position==="fixed";let o=i?_d(e):e;for(;Lo(o)&&!Zh(o);){const l=Ro(o),c=q4(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&ate.has(a.position)||Nx(o)&&!c&&G7(e,o))?s=s.filter(f=>f!==o):a=l,o=_d(o)}return t.set(e,s),s}function lte(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const o=[...r==="clippingAncestors"?Rj(t)?[]:ote(t,this._c):[].concat(r),s],l=o[0],c=o.reduce((d,f)=>{const u=jI(t,f,a);return d.top=di(u.top,d.top),d.right=Td(u.right,d.right),d.bottom=Td(u.bottom,d.bottom),d.left=di(u.left,d.left),d},jI(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function cte(e){const{width:t,height:r}=W7(e);return{width:t,height:r}}function dte(e,t,r){const s=wl(t),a=Al(t),i=r==="fixed",o=ef(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=ml(0);function d(){c.x=K4(a)}if(s||!s&&!i)if((Vm(t)!=="body"||Nx(a))&&(l=$j(t)),s){const m=ef(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&d();i&&!s&&a&&d();const f=a&&!s&&!i?H7(a,l):ml(0),u=o.left+l.scrollLeft-c.x-f.x,h=o.top+l.scrollTop-c.y-f.y;return{x:u,y:h,width:o.width,height:o.height}}function kN(e){return Ro(e).position==="static"}function wI(e,t){if(!wl(e)||Ro(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Al(e)===r&&(r=r.ownerDocument.body),r}function K7(e,t){const r=vi(e);if(Rj(e))return r;if(!wl(e)){let a=_d(e);for(;a&&!Zh(a);){if(Lo(a)&&!kN(a))return a;a=_d(a)}return r}let s=wI(e,t);for(;s&&Hee(s)&&kN(s);)s=wI(s,t);return s&&Zh(s)&&kN(s)&&!q4(s)?r:s||Qee(e)||r}const ute=async function(e){const t=this.getOffsetParent||K7,r=this.getDimensions,s=await r(e.floating);return{reference:dte(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function fte(e){return Ro(e).direction==="rtl"}const hte={convertOffsetParentRelativeRectToViewportRelativeRect:tte,getDocumentElement:Al,getClippingRect:lte,getOffsetParent:K7,getElementRects:ute,getClientRects:rte,getDimensions:cte,getScale:Rh,isElement:Lo,isRTL:fte};function Y7(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function mte(e,t){let r=null,s;const a=Al(e);function i(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:f,top:u,width:h,height:m}=d;if(l||t(),!h||!m)return;const v=sy(u),g=sy(a.clientWidth-(f+h)),p=sy(a.clientHeight-(u+m)),x=sy(f),y={rootMargin:-v+"px "+-g+"px "+-p+"px "+-x+"px",threshold:di(0,Td(1,c))||1};let j=!0;function E(A){const C=A[0].intersectionRatio;if(C!==c){if(!j)return o();C?o(!1,C):s=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Y7(d,e.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(E,{...y,root:a.ownerDocument})}catch{r=new IntersectionObserver(E,y)}r.observe(e)}return o(!0),i}function pte(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=G4(e),f=a||i?[...d?wg(d):[],...wg(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const u=d&&l?mte(d,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(x=>{let[b]=x;b&&b.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=m)==null||y.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let v,g=c?ef(e):null;c&&p();function p(){const x=ef(e);g&&!Y7(g,x)&&r(),g=x,v=requestAnimationFrame(p)}return r(),()=>{var x;f.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),u==null||u(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const vte=Bee,gte=zee,xte=$ee,yte=Vee,bte=Fee,NI=Ree,jte=Uee,wte=(e,t,r)=>{const s=new Map,a={platform:hte,...r},i={...a.platform,_c:s};return Lee(e,t,{...a,platform:i})};var Nte=typeof document<"u",Ste=function(){},nb=Nte?w.useLayoutEffect:Ste;function Wb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Wb(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Wb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function X7(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function SI(e,t){const r=X7(e);return Math.round(t*r)/r}function DN(e){const t=w.useRef(e);return nb(()=>{t.current=e}),t}function Cte(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,u]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=w.useState(s);Wb(h,s)||m(s);const[v,g]=w.useState(null),[p,x]=w.useState(null),b=w.useCallback(B=>{B!==A.current&&(A.current=B,g(B))},[]),y=w.useCallback(B=>{B!==C.current&&(C.current=B,x(B))},[]),j=i||v,E=o||p,A=w.useRef(null),C=w.useRef(null),S=w.useRef(f),T=c!=null,O=DN(c),_=DN(a),N=DN(d),D=w.useCallback(()=>{if(!A.current||!C.current)return;const B={placement:t,strategy:r,middleware:h};_.current&&(B.platform=_.current),wte(A.current,C.current,B).then(U=>{const q={...U,isPositioned:N.current!==!1};I.current&&!Wb(S.current,q)&&(S.current=q,Sl.flushSync(()=>{u(q)}))})},[h,t,r,_,N]);nb(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,u(B=>({...B,isPositioned:!1})))},[d]);const I=w.useRef(!1);nb(()=>(I.current=!0,()=>{I.current=!1}),[]),nb(()=>{if(j&&(A.current=j),E&&(C.current=E),j&&E){if(O.current)return O.current(j,E,D);D()}},[j,E,D,O,T]);const R=w.useMemo(()=>({reference:A,floating:C,setReference:b,setFloating:y}),[b,y]),M=w.useMemo(()=>({reference:j,floating:E}),[j,E]),$=w.useMemo(()=>{const B={position:r,left:0,top:0};if(!M.floating)return B;const U=SI(M.floating,f.x),q=SI(M.floating,f.y);return l?{...B,transform:"translate("+U+"px, "+q+"px)",...X7(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:U,top:q}},[r,l,M.floating,f.x,f.y]);return w.useMemo(()=>({...f,update:D,refs:R,elements:M,floatingStyles:$}),[f,D,R,M,$])}const Ate=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?NI({element:s.current,padding:a}).fn(r):{}:s?NI({element:s,padding:a}).fn(r):{}}}},Ete=(e,t)=>({...vte(e),options:[e,t]}),Pte=(e,t)=>({...gte(e),options:[e,t]}),Tte=(e,t)=>({...jte(e),options:[e,t]}),_te=(e,t)=>({...xte(e),options:[e,t]}),Ite=(e,t)=>({...yte(e),options:[e,t]}),kte=(e,t)=>({...bte(e),options:[e,t]}),Dte=(e,t)=>({...Ate(e),options:[e,t]});function Ote(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Q7(...e){return t=>e.forEach(r=>Ote(r,t))}function J7(...e){return w.useCallback(Q7(...e),e)}function Lte(e,t=[]){let r=[];function s(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];function d(u){const{scope:h,children:m,...v}=u,g=(h==null?void 0:h[e][c])||l,p=w.useMemo(()=>v,Object.values(v));return w.createElement(g.Provider,{value:p},m)}function f(u,h){const m=(h==null?void 0:h[e][c])||l,v=w.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,Rte(a,...t)]}function Rte(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}const Z7=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(Fte);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(mC,it({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(mC,it({},s,{ref:t}),r)});Z7.displayName="Slot";const mC=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...Mte(s,r.props),ref:t?Q7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});mC.displayName="SlotClone";const $te=({children:e})=>w.createElement(w.Fragment,null,e);function Fte(e){return w.isValidElement(e)&&e.type===$te}function Mte(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const Bte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],e8=Bte.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?Z7:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,it({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),pC=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{};function zte(e){const[t,r]=w.useState(void 0);return pC(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}const t8="Popper",[r8,n8]=Lte(t8),[Ute,s8]=r8(t8),Vte=e=>{const{__scopePopper:t,children:r}=e,[s,a]=w.useState(null);return w.createElement(Ute,{scope:t,anchor:s,onAnchorChange:a},r)},Wte="PopperAnchor",qte=w.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,i=s8(Wte,r),o=w.useRef(null),l=J7(t,o);return w.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:w.createElement(e8.div,it({},a,{ref:l}))}),a8="PopperContent",[Hte,$$e]=r8(a8),Gte=w.forwardRef((e,t)=>{var r,s,a,i,o,l,c,d;const{__scopePopper:f,side:u="bottom",sideOffset:h=0,align:m="center",alignOffset:v=0,arrowPadding:g=0,collisionBoundary:p=[],collisionPadding:x=0,sticky:b="partial",hideWhenDetached:y=!1,avoidCollisions:j=!0,onPlaced:E,...A}=e,C=s8(a8,f),[S,T]=w.useState(null),O=J7(t,xe=>T(xe)),[_,N]=w.useState(null),D=zte(_),I=(r=D==null?void 0:D.width)!==null&&r!==void 0?r:0,R=(s=D==null?void 0:D.height)!==null&&s!==void 0?s:0,M=u+(m!=="center"?"-"+m:""),$=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},B=Array.isArray(p)?p:[p],U=B.length>0,q={padding:$,boundary:B.filter(Kte),altBoundary:U},{refs:W,floatingStyles:L,placement:V,isPositioned:G,middlewareData:Z}=Cte({strategy:"fixed",placement:M,whileElementsMounted:pte,elements:{reference:C.anchor},middleware:[Ete({mainAxis:h+R,alignmentAxis:v}),j&&Pte({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?Tte():void 0,...q}),j&&_te({...q}),Ite({...q,apply:({elements:xe,rects:le,availableWidth:re,availableHeight:Se})=>{const{width:Ne,height:ye}=le.reference,$e=xe.floating.style;$e.setProperty("--radix-popper-available-width",`${re}px`),$e.setProperty("--radix-popper-available-height",`${Se}px`),$e.setProperty("--radix-popper-anchor-width",`${Ne}px`),$e.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),_&&Dte({element:_,padding:g}),Yte({arrowWidth:I,arrowHeight:R}),y&&kte({strategy:"referenceHidden"})]}),[ee,he]=i8(V),me=hc(E);pC(()=>{G&&(me==null||me())},[G,me]);const oe=(a=Z.arrow)===null||a===void 0?void 0:a.x,we=(i=Z.arrow)===null||i===void 0?void 0:i.y,ve=((o=Z.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[pe,De]=w.useState();return pC(()=>{S&&De(window.getComputedStyle(S).zIndex)},[S]),w.createElement("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:G?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[(l=Z.transformOrigin)===null||l===void 0?void 0:l.x,(c=Z.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},w.createElement(Hte,{scope:f,placedSide:ee,onArrowChange:N,arrowX:oe,arrowY:we,shouldHideArrow:ve},w.createElement(e8.div,it({"data-side":ee,"data-align":he},A,{ref:O,style:{...A.style,animation:G?void 0:"none",opacity:(d=Z.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function Kte(e){return e!==null}const Yte=e=>({name:"transformOrigin",options:e,fn(t){var r,s,a,i,o;const{placement:l,rects:c,middlewareData:d}=t,u=((r=d.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=u?0:e.arrowWidth,m=u?0:e.arrowHeight,[v,g]=i8(l),p={start:"0%",center:"50%",end:"100%"}[g],x=((s=(a=d.arrow)===null||a===void 0?void 0:a.x)!==null&&s!==void 0?s:0)+h/2,b=((i=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+m/2;let y="",j="";return v==="bottom"?(y=u?p:`${x}px`,j=`${-m}px`):v==="top"?(y=u?p:`${x}px`,j=`${c.floating.height+m}px`):v==="right"?(y=`${-m}px`,j=u?p:`${b}px`):v==="left"&&(y=`${c.floating.width+m}px`,j=u?p:`${b}px`),{data:{x:y,y:j}}}});function i8(e){const[t,r="center"]=e.split("-");return[t,r]}const Xte=Vte,Qte=qte,Jte=Gte;function Zte(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ere(...e){return t=>e.forEach(r=>Zte(r,t))}const o8=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(rre);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(vC,it({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(vC,it({},s,{ref:t}),r)});o8.displayName="Slot";const vC=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...nre(s,r.props),ref:t?ere(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});vC.displayName="SlotClone";const tre=({children:e})=>w.createElement(w.Fragment,null,e);function rre(e){return w.isValidElement(e)&&e.type===tre}function nre(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const sre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],are=sre.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?o8:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,it({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),ire=w.forwardRef((e,t)=>{var r;const{container:s=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...a}=e;return s?w4.createPortal(w.createElement(are.div,it({},a,{ref:t})),s):null}),Y4=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(lre);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(gC,it({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(gC,it({},s,{ref:t}),r)});Y4.displayName="Slot";const gC=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...cre(s,r.props),ref:t?k7(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});gC.displayName="SlotClone";const ore=({children:e})=>w.createElement(w.Fragment,null,e);function lre(e){return w.isValidElement(e)&&e.type===ore}function cre(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const dre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Fo=dre.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?Y4:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,it({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function CI({prop:e,defaultProp:t,onChange:r=()=>{}}){const[s,a]=ure({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:s,l=hc(r),c=w.useCallback(d=>{if(i){const u=typeof d=="function"?d(e):d;u!==e&&l(u)}else a(d)},[i,e,a,l]);return[o,c]}function ure({defaultProp:e,onChange:t}){const r=w.useState(e),[s]=r,a=w.useRef(s),i=hc(t);return w.useEffect(()=>{a.current!==s&&(i(s),a.current=s)},[s,a,i]),r}const Id=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{};function fre(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function hre(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function mre(...e){return t=>e.forEach(r=>hre(r,t))}const l8=w.forwardRef((e,t)=>{const{children:r,...s}=e,a=w.Children.toArray(r),i=a.find(vre);if(i){const o=i.props.children,l=a.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(xC,it({},s,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(xC,it({},s,{ref:t}),r)});l8.displayName="Slot";const xC=w.forwardRef((e,t)=>{const{children:r,...s}=e;return w.isValidElement(r)?w.cloneElement(r,{...gre(s,r.props),ref:t?mre(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});xC.displayName="SlotClone";const pre=({children:e})=>w.createElement(w.Fragment,null,e);function vre(e){return w.isValidElement(e)&&e.type===pre}function gre(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const xre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],yre=xre.reduce((e,t)=>{const r=w.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?l8:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,it({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),bre=w.forwardRef((e,t)=>w.createElement(yre.span,it({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var jre=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Yf=new WeakMap,ay=new WeakMap,iy={},ON=0,c8=function(e){return e&&(e.host||c8(e.parentNode))},wre=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=c8(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Nre=function(e,t,r,s){var a=wre(t,Array.isArray(e)?e:[e]);iy[r]||(iy[r]=new WeakMap);var i=iy[r],o=[],l=new Set,c=new Set(a),d=function(u){!u||l.has(u)||(l.add(u),d(u.parentNode))};a.forEach(d);var f=function(u){!u||c.has(u)||Array.prototype.forEach.call(u.children,function(h){if(l.has(h))f(h);else try{var m=h.getAttribute(s),v=m!==null&&m!=="false",g=(Yf.get(h)||0)+1,p=(i.get(h)||0)+1;Yf.set(h,g),i.set(h,p),o.push(h),g===1&&v&&ay.set(h,!0),p===1&&h.setAttribute(r,"true"),v||h.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return f(t),l.clear(),ON++,function(){o.forEach(function(u){var h=Yf.get(u)-1,m=i.get(u)-1;Yf.set(u,h),i.set(u,m),h||(ay.has(u)||u.removeAttribute(s),ay.delete(u)),m||u.removeAttribute(r)}),ON--,ON||(Yf=new WeakMap,Yf=new WeakMap,ay=new WeakMap,iy={})}},Sre=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=t||jre(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),Nre(s,a,r,"aria-hidden")):function(){return null}},al=function(){return al=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},al.apply(this,arguments)};function d8(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function mf(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})}function Cre(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var sb="right-scroll-bar-position",ab="width-before-scroll-bar",Are="with-scroll-bars-hidden",Ere="--removed-body-scroll-bar-size";function LN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Pre(e,t){var r=w.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var Tre=typeof window<"u"?w.useLayoutEffect:w.useEffect,AI=new WeakMap;function _re(e,t){var r=Pre(t||null,function(s){return e.forEach(function(a){return LN(a,s)})});return Tre(function(){var s=AI.get(r);if(s){var a=new Set(s),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||LN(l,null)}),i.forEach(function(l){a.has(l)||LN(l,o)})}AI.set(r,e)},[e]),r}function Ire(e){return e}function kre(e,t){t===void 0&&(t=Ire);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,s);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){s=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var f=o;o=[],f.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),r}}}};return a}function Dre(e){e===void 0&&(e={});var t=kre(null);return t.options=al({async:!0,ssr:!1},e),t}var u8=function(e){var t=e.sideCar,r=d8(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return w.createElement(s,al({},r))};u8.isSideCarExport=!0;function Ore(e,t){return e.useMedium(t),u8}var f8=Dre(),RN=function(){},Fj=w.forwardRef(function(e,t){var r=w.useRef(null),s=w.useState({onScrollCapture:RN,onWheelCapture:RN,onTouchMoveCapture:RN}),a=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,u=e.shards,h=e.sideCar,m=e.noIsolation,v=e.inert,g=e.allowPinchZoom,p=e.as,x=p===void 0?"div":p,b=d8(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),y=h,j=_re([r,t]),E=al(al({},b),a);return w.createElement(w.Fragment,null,f&&w.createElement(y,{sideCar:f8,removeScrollBar:d,shards:u,noIsolation:m,inert:v,setCallbacks:i,allowPinchZoom:!!g,lockRef:r}),o?w.cloneElement(w.Children.only(l),al(al({},E),{ref:j})):w.createElement(x,al({},E,{className:c,ref:j}),l))});Fj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fj.classNames={fullWidth:ab,zeroRight:sb};var EI,Lre=function(){if(EI)return EI;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Rre(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Lre();return t&&e.setAttribute("nonce",t),e}function $re(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Fre(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Mre=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Rre())&&($re(t,r),Fre(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Bre=function(){var e=Mre();return function(t,r){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},h8=function(){var e=Bre(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},zre={left:0,top:0,right:0,gap:0},$N=function(e){return parseInt(e||"",10)||0},Ure=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[$N(r),$N(s),$N(a)]},Vre=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return zre;var t=Ure(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},Wre=h8(),$h="data-scroll-locked",qre=function(e,t,r,s){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Are,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat($h,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sb,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(ab,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(sb," .").concat(sb,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(ab," .").concat(ab,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat($h,`] {
    `).concat(Ere,": ").concat(l,`px;
  }
`)},PI=function(){var e=parseInt(document.body.getAttribute($h)||"0",10);return isFinite(e)?e:0},Hre=function(){w.useEffect(function(){return document.body.setAttribute($h,(PI()+1).toString()),function(){var e=PI()-1;e<=0?document.body.removeAttribute($h):document.body.setAttribute($h,e.toString())}},[])},Gre=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;Hre();var i=w.useMemo(function(){return Vre(a)},[a]);return w.createElement(Wre,{styles:qre(i,!t,a,r?"":"!important")})},yC=!1;if(typeof window<"u")try{var oy=Object.defineProperty({},"passive",{get:function(){return yC=!0,!0}});window.addEventListener("test",oy,oy),window.removeEventListener("test",oy,oy)}catch{yC=!1}var Xf=yC?{passive:!1}:!1,Kre=function(e){return e.tagName==="TEXTAREA"},m8=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Kre(e)&&r[t]==="visible")},Yre=function(e){return m8(e,"overflowY")},Xre=function(e){return m8(e,"overflowX")},TI=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=p8(e,r);if(s){var a=v8(e,r),i=a[1],o=a[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},Qre=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},Jre=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},p8=function(e,t){return e==="v"?Yre(t):Xre(t)},v8=function(e,t){return e==="v"?Qre(t):Jre(t)},Zre=function(e,t){return e==="h"&&t==="rtl"?-1:1},ene=function(e,t,r,s,a){var i=Zre(e,window.getComputedStyle(t).direction),o=i*s,l=r.target,c=t.contains(l),d=!1,f=o>0,u=0,h=0;do{var m=v8(e,l),v=m[0],g=m[1],p=m[2],x=g-p-i*v;(v||x)&&p8(e,l)&&(u+=x,h+=v),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(a&&u===0||!a&&o>u)||!f&&(a&&h===0||!a&&-o>h))&&(d=!0),d},ly=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_I=function(e){return[e.deltaX,e.deltaY]},II=function(e){return e&&"current"in e?e.current:e},tne=function(e,t){return e[0]===t[0]&&e[1]===t[1]},rne=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},nne=0,Qf=[];function sne(e){var t=w.useRef([]),r=w.useRef([0,0]),s=w.useRef(),a=w.useState(nne++)[0],i=w.useState(function(){return h8()})[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=Cre([e.lockRef.current],(e.shards||[]).map(II),!0).filter(Boolean);return g.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=w.useCallback(function(g,p){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var x=ly(g),b=r.current,y="deltaX"in g?g.deltaX:b[0]-x[0],j="deltaY"in g?g.deltaY:b[1]-x[1],E,A=g.target,C=Math.abs(y)>Math.abs(j)?"h":"v";if("touches"in g&&C==="h"&&A.type==="range")return!1;var S=TI(C,A);if(!S)return!0;if(S?E=C:(E=C==="v"?"h":"v",S=TI(C,A)),!S)return!1;if(!s.current&&"changedTouches"in g&&(y||j)&&(s.current=E),!E)return!0;var T=s.current||E;return ene(T,p,g,T==="h"?y:j,!0)},[]),c=w.useCallback(function(g){var p=g;if(!(!Qf.length||Qf[Qf.length-1]!==i)){var x="deltaY"in p?_I(p):ly(p),b=t.current.filter(function(E){return E.name===p.type&&E.target===p.target&&tne(E.delta,x)})[0];if(b&&b.should){p.cancelable&&p.preventDefault();return}if(!b){var y=(o.current.shards||[]).map(II).filter(Boolean).filter(function(E){return E.contains(p.target)}),j=y.length>0?l(p,y[0]):!o.current.noIsolation;j&&p.cancelable&&p.preventDefault()}}},[]),d=w.useCallback(function(g,p,x,b){var y={name:g,delta:p,target:x,should:b};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(j){return j!==y})},1)},[]),f=w.useCallback(function(g){r.current=ly(g),s.current=void 0},[]),u=w.useCallback(function(g){d(g.type,_I(g),g.target,l(g,e.lockRef.current))},[]),h=w.useCallback(function(g){d(g.type,ly(g),g.target,l(g,e.lockRef.current))},[]);w.useEffect(function(){return Qf.push(i),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Xf),document.addEventListener("touchmove",c,Xf),document.addEventListener("touchstart",f,Xf),function(){Qf=Qf.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Xf),document.removeEventListener("touchmove",c,Xf),document.removeEventListener("touchstart",f,Xf)}},[]);var m=e.removeScrollBar,v=e.inert;return w.createElement(w.Fragment,null,v?w.createElement(i,{styles:rne(a)}):null,m?w.createElement(Gre,{gapMode:"margin"}):null)}const ane=Ore(f8,sne);var g8=w.forwardRef(function(e,t){return w.createElement(Fj,al({},e,{ref:t,sideCar:ane}))});g8.classNames=Fj.classNames;const ine=g8,one=[" ","Enter","ArrowUp","ArrowDown"],lne=[" ","Enter"],Mj="Select",[Bj,zj,cne]=MZ(Mj),[Wm,F$e]=zZ(Mj,[cne,n8]),X4=n8(),[dne,pf]=Wm(Mj),[une,fne]=Wm(Mj),hne=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:u,disabled:h,required:m}=e,v=X4(t),[g,p]=w.useState(null),[x,b]=w.useState(null),[y,j]=w.useState(!1),E=WZ(d),[A=!1,C]=CI({prop:s,defaultProp:a,onChange:i}),[S,T]=CI({prop:o,defaultProp:l,onChange:c}),O=w.useRef(null),_=g?!!g.closest("form"):!0,[N,D]=w.useState(new Set),I=Array.from(N).map(R=>R.props.value).join(";");return w.createElement(Xte,v,w.createElement(dne,{required:m,scope:t,trigger:g,onTriggerChange:p,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:y,onValueNodeHasChildrenChange:j,contentId:M7(),value:S,onValueChange:T,open:A,onOpenChange:C,dir:E,triggerPointerDownPosRef:O,disabled:h},w.createElement(Bj.Provider,{scope:t},w.createElement(une,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(R=>{D(M=>new Set(M).add(R))},[]),onNativeOptionRemove:w.useCallback(R=>{D(M=>{const $=new Set(M);return $.delete(R),$})},[])},r)),_?w.createElement(j8,{key:I,"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:u,value:S,onChange:R=>T(R.target.value),disabled:h},S===void 0?w.createElement("option",{value:""}):null,Array.from(N)):null))},mne="SelectTrigger",pne=w.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,i=X4(r),o=pf(mne,r),l=o.disabled||s,c=Cl(t,o.onTriggerChange),d=zj(r),[f,u,h]=w8(v=>{const g=d().filter(b=>!b.disabled),p=g.find(b=>b.value===o.value),x=N8(g,v,p);x!==void 0&&o.onValueChange(x.value)}),m=()=>{l||(o.onOpenChange(!0),h())};return w.createElement(Qte,it({asChild:!0},i),w.createElement(Fo.button,it({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":o.value===void 0?"":void 0},a,{ref:c,onClick:ga(a.onClick,v=>{v.currentTarget.focus()}),onPointerDown:ga(a.onPointerDown,v=>{const g=v.target;g.hasPointerCapture(v.pointerId)&&g.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(m(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:ga(a.onKeyDown,v=>{const g=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&u(v.key),!(g&&v.key===" ")&&one.includes(v.key)&&(m(),v.preventDefault())})})))}),vne="SelectValue",gne=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:o,...l}=e,c=pf(vne,r),{onValueNodeHasChildrenChange:d}=c,f=i!==void 0,u=Cl(t,c.onValueNodeChange);return Id(()=>{d(f)},[d,f]),w.createElement(Fo.span,it({},l,{ref:u,style:{pointerEvents:"none"}}),c.value===void 0&&o!==void 0?o:i)}),xne=w.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return w.createElement(Fo.span,it({"aria-hidden":!0},a,{ref:t}),s||"▼")}),yne=e=>w.createElement(ire,it({asChild:!0},e)),em="SelectContent",bne=w.forwardRef((e,t)=>{const r=pf(em,e.__scopeSelect),[s,a]=w.useState();if(Id(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?Sl.createPortal(w.createElement(x8,{scope:e.__scopeSelect},w.createElement(Bj.Slot,{scope:e.__scopeSelect},w.createElement("div",null,e.children))),i):null}return w.createElement(jne,it({},e,{ref:t}))}),Vl=10,[x8,vf]=Wm(em),jne=w.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:v,hideWhenDetached:g,avoidCollisions:p,...x}=e,b=pf(em,r),[y,j]=w.useState(null),[E,A]=w.useState(null),C=Cl(t,he=>j(he)),[S,T]=w.useState(null),[O,_]=w.useState(null),N=zj(r),[D,I]=w.useState(!1),R=w.useRef(!1);w.useEffect(()=>{if(y)return Sre(y)},[y]),iee();const M=w.useCallback(he=>{const[me,...oe]=N().map(pe=>pe.ref.current),[we]=oe.slice(-1),ve=document.activeElement;for(const pe of he)if(pe===ve||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===me&&E&&(E.scrollTop=0),pe===we&&E&&(E.scrollTop=E.scrollHeight),pe==null||pe.focus(),document.activeElement!==ve))return},[N,E]),$=w.useCallback(()=>M([S,y]),[M,S,y]);w.useEffect(()=>{D&&$()},[D,$]);const{onOpenChange:B,triggerPointerDownPosRef:U}=b;w.useEffect(()=>{if(y){let he={x:0,y:0};const me=we=>{var ve,pe,De,xe;he={x:Math.abs(Math.round(we.pageX)-((ve=(pe=U.current)===null||pe===void 0?void 0:pe.x)!==null&&ve!==void 0?ve:0)),y:Math.abs(Math.round(we.pageY)-((De=(xe=U.current)===null||xe===void 0?void 0:xe.y)!==null&&De!==void 0?De:0))}},oe=we=>{he.x<=10&&he.y<=10?we.preventDefault():y.contains(we.target)||B(!1),document.removeEventListener("pointermove",me),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",oe,{capture:!0})}}},[y,B,U]),w.useEffect(()=>{const he=()=>B(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[B]);const[q,W]=w8(he=>{const me=N().filter(ve=>!ve.disabled),oe=me.find(ve=>ve.ref.current===document.activeElement),we=N8(me,he,oe);we&&setTimeout(()=>we.ref.current.focus())}),L=w.useCallback((he,me,oe)=>{const we=!R.current&&!oe;(b.value!==void 0&&b.value===me||we)&&(T(he),we&&(R.current=!0))},[b.value]),V=w.useCallback(()=>y==null?void 0:y.focus(),[y]),G=w.useCallback((he,me,oe)=>{const we=!R.current&&!oe;(b.value!==void 0&&b.value===me||we)&&_(he)},[b.value]),Z=s==="popper"?kI:wne,ee=Z===kI?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:v,hideWhenDetached:g,avoidCollisions:p}:{};return w.createElement(x8,{scope:r,content:y,viewport:E,onViewportChange:A,itemRefCallback:L,selectedItem:S,onItemLeave:V,itemTextRefCallback:G,focusSelectedItem:$,selectedItemText:O,position:s,isPositioned:D,searchRef:q},w.createElement(ine,{as:Y4,allowPinchZoom:!0},w.createElement(mee,{asChild:!0,trapped:b.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:ga(a,he=>{var me;(me=b.trigger)===null||me===void 0||me.focus({preventScroll:!0}),he.preventDefault()})},w.createElement(nee,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>b.onOpenChange(!1)},w.createElement(Z,it({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:he=>he.preventDefault()},x,ee,{onPlaced:()=>I(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ga(x.onKeyDown,he=>{const me=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!me&&he.key.length===1&&W(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let we=N().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(he.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const ve=he.target,pe=we.indexOf(ve);we=we.slice(pe+1)}setTimeout(()=>M(we)),he.preventDefault()}})}))))))}),wne=w.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,i=pf(em,r),o=vf(em,r),[l,c]=w.useState(null),[d,f]=w.useState(null),u=Cl(t,C=>f(C)),h=zj(r),m=w.useRef(!1),v=w.useRef(!0),{viewport:g,selectedItem:p,selectedItemText:x,focusSelectedItem:b}=o,y=w.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&p&&x){const C=i.trigger.getBoundingClientRect(),S=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),O=x.getBoundingClientRect();if(i.dir!=="rtl"){const ve=O.left-S.left,pe=T.left-ve,De=C.left-pe,xe=C.width+De,le=Math.max(xe,S.width),re=window.innerWidth-Vl,Se=iI(pe,[Vl,re-le]);l.style.minWidth=xe+"px",l.style.left=Se+"px"}else{const ve=S.right-O.right,pe=window.innerWidth-T.right-ve,De=window.innerWidth-C.right-pe,xe=C.width+De,le=Math.max(xe,S.width),re=window.innerWidth-Vl,Se=iI(pe,[Vl,re-le]);l.style.minWidth=xe+"px",l.style.right=Se+"px"}const _=h(),N=window.innerHeight-Vl*2,D=g.scrollHeight,I=window.getComputedStyle(d),R=parseInt(I.borderTopWidth,10),M=parseInt(I.paddingTop,10),$=parseInt(I.borderBottomWidth,10),B=parseInt(I.paddingBottom,10),U=R+M+D+B+$,q=Math.min(p.offsetHeight*5,U),W=window.getComputedStyle(g),L=parseInt(W.paddingTop,10),V=parseInt(W.paddingBottom,10),G=C.top+C.height/2-Vl,Z=N-G,ee=p.offsetHeight/2,he=p.offsetTop+ee,me=R+M+he,oe=U-me;if(me<=G){const ve=p===_[_.length-1].ref.current;l.style.bottom="0px";const pe=d.clientHeight-g.offsetTop-g.offsetHeight,De=Math.max(Z,ee+(ve?V:0)+pe+$),xe=me+De;l.style.height=xe+"px"}else{const ve=p===_[0].ref.current;l.style.top="0px";const De=Math.max(G,R+g.offsetTop+(ve?L:0)+ee)+oe;l.style.height=De+"px",g.scrollTop=me-G+g.offsetTop}l.style.margin=`${Vl}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=N+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,d,g,p,x,i.dir,s]);Id(()=>y(),[y]);const[j,E]=w.useState();Id(()=>{d&&E(window.getComputedStyle(d).zIndex)},[d]);const A=w.useCallback(C=>{C&&v.current===!0&&(y(),b==null||b(),v.current=!1)},[y,b]);return w.createElement(Nne,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:A},w.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},w.createElement(Fo.div,it({},a,{ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}}))))}),kI=w.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=Vl,...i}=e,o=X4(r);return w.createElement(Jte,it({},o,i,{ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Nne,Q4]=Wm(em,{}),DI="SelectViewport",Sne=w.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=vf(DI,r),i=Q4(DI,r),o=Cl(t,a.onViewportChange),l=w.useRef(0);return w.createElement(w.Fragment,null,w.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),w.createElement(Bj.Slot,{scope:r},w.createElement(Fo.div,it({"data-radix-select-viewport":"",role:"presentation"},s,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:ga(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:u}=i;if(u!=null&&u.current&&f){const h=Math.abs(l.current-d.scrollTop);if(h>0){const m=window.innerHeight-Vl*2,v=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),p=Math.max(v,g);if(p<m){const x=p+h,b=Math.min(m,x),y=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=y>0?y:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})}))))}),Cne="SelectGroup",[M$e,Ane]=Wm(Cne),Ene="SelectLabel",Pne=w.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=Ane(Ene,r);return w.createElement(Fo.div,it({id:a.id},s,{ref:t}))}),bC="SelectItem",[Tne,y8]=Wm(bC),_ne=w.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...o}=e,l=pf(bC,r),c=vf(bC,r),d=l.value===s,[f,u]=w.useState(i??""),[h,m]=w.useState(!1),v=Cl(t,x=>{var b;return(b=c.itemRefCallback)===null||b===void 0?void 0:b.call(c,x,s,a)}),g=M7(),p=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};return w.createElement(Tne,{scope:r,value:s,disabled:a,textId:g,isSelected:d,onItemTextChange:w.useCallback(x=>{u(b=>{var y;return b||((y=x==null?void 0:x.textContent)!==null&&y!==void 0?y:"").trim()})},[])},w.createElement(Bj.ItemSlot,{scope:r,value:s,disabled:a,textValue:f},w.createElement(Fo.div,it({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},o,{ref:v,onFocus:ga(o.onFocus,()=>m(!0)),onBlur:ga(o.onBlur,()=>m(!1)),onPointerUp:ga(o.onPointerUp,p),onPointerMove:ga(o.onPointerMove,x=>{if(a){var b;(b=c.onItemLeave)===null||b===void 0||b.call(c)}else x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ga(o.onPointerLeave,x=>{if(x.currentTarget===document.activeElement){var b;(b=c.onItemLeave)===null||b===void 0||b.call(c)}}),onKeyDown:ga(o.onKeyDown,x=>{var b;((b=c.searchRef)===null||b===void 0?void 0:b.current)!==""&&x.key===" "||(lne.includes(x.key)&&p(),x.key===" "&&x.preventDefault())})}))))}),cy="SelectItemText",Ine=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...i}=e,o=pf(cy,r),l=vf(cy,r),c=y8(cy,r),d=fne(cy,r),[f,u]=w.useState(null),h=Cl(t,x=>u(x),c.onItemTextChange,x=>{var b;return(b=l.itemTextRefCallback)===null||b===void 0?void 0:b.call(l,x,c.value,c.disabled)}),m=f==null?void 0:f.textContent,v=w.useMemo(()=>w.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},m),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:p}=d;return Id(()=>(g(v),()=>p(v)),[g,p,v]),w.createElement(w.Fragment,null,w.createElement(Fo.span,it({id:c.textId},i,{ref:h})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Sl.createPortal(i.children,o.valueNode):null)}),kne="SelectItemIndicator",Dne=w.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return y8(kne,r).isSelected?w.createElement(Fo.span,it({"aria-hidden":!0},s,{ref:t})):null}),OI="SelectScrollUpButton",One=w.forwardRef((e,t)=>{const r=vf(OI,e.__scopeSelect),s=Q4(OI,e.__scopeSelect),[a,i]=w.useState(!1),o=Cl(t,s.onScrollButtonChange);return Id(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=l.scrollTop>0;i(d)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?w.createElement(b8,it({},e,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null}),LI="SelectScrollDownButton",Lne=w.forwardRef((e,t)=>{const r=vf(LI,e.__scopeSelect),s=Q4(LI,e.__scopeSelect),[a,i]=w.useState(!1),o=Cl(t,s.onScrollButtonChange);return Id(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<d;i(f)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?w.createElement(b8,it({},e,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null}),b8=w.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,i=vf("SelectScrollButton",r),o=w.useRef(null),l=zj(r),c=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),Id(()=>{var d;const f=l().find(u=>u.ref.current===document.activeElement);f==null||(d=f.ref.current)===null||d===void 0||d.scrollIntoView({block:"nearest"})},[l]),w.createElement(Fo.div,it({"aria-hidden":!0},a,{ref:t,style:{flexShrink:0,...a.style},onPointerDown:ga(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:ga(a.onPointerMove,()=>{var d;(d=i.onItemLeave)===null||d===void 0||d.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:ga(a.onPointerLeave,()=>{c()})}))}),Rne=w.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return w.createElement(Fo.div,it({"aria-hidden":!0},s,{ref:t}))}),j8=w.forwardRef((e,t)=>{const{value:r,...s}=e,a=w.useRef(null),i=Cl(t,a),o=fre(r);return w.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&f){const u=new Event("change",{bubbles:!0});f.call(l,r),l.dispatchEvent(u)}},[o,r]),w.createElement(bre,{asChild:!0},w.createElement("select",it({},s,{ref:i,defaultValue:r})))});j8.displayName="BubbleSelect";function w8(e){const t=hc(e),r=w.useRef(""),s=w.useRef(0),a=w.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=w.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function N8(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=$ne(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function $ne(e,t){return e.map((r,s)=>e[(t+s)%e.length])}const Fne=hne,S8=pne,Mne=gne,Bne=xne,zne=yne,C8=bne,Une=Sne,A8=Pne,E8=_ne,Vne=Ine,Wne=Dne,P8=One,T8=Lne,_8=Rne,We=Fne,qe=Mne,Ue=w.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(S8,{ref:s,className:Ge("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(Bne,{asChild:!0,children:n.jsx(YM,{className:"h-4 w-4 opacity-50"})})]}));Ue.displayName=S8.displayName;const I8=w.forwardRef(({className:e,...t},r)=>n.jsx(P8,{ref:r,className:Ge("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(IX,{className:"h-4 w-4"})}));I8.displayName=P8.displayName;const k8=w.forwardRef(({className:e,...t},r)=>n.jsx(T8,{ref:r,className:Ge("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(YM,{className:"h-4 w-4"})}));k8.displayName=T8.displayName;const Ve=w.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(zne,{children:n.jsxs(C8,{ref:a,className:Ge("relative z-50 max-h-96 min-w-[8rem] overflow-auto rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(I8,{}),n.jsx(Une,{className:Ge("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(k8,{})]})}));Ve.displayName=C8.displayName;const qne=w.forwardRef(({className:e,...t},r)=>n.jsx(A8,{ref:r,className:Ge("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));qne.displayName=A8.displayName;const K=w.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(E8,{ref:s,className:Ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Wne,{children:n.jsx(Tj,{className:"h-4 w-4"})})}),n.jsx(Vne,{children:t})]}));K.displayName=E8.displayName;const Hne=w.forwardRef(({className:e,...t},r)=>n.jsx(_8,{ref:r,className:Ge("-mx-1 my-1 h-px bg-muted",e),...t}));Hne.displayName=_8.displayName;var Gne="Label",D8=w.forwardRef((e,t)=>n.jsx(Fn.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));D8.displayName=Gne;var O8=D8;const Kne=Pj("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ae=w.forwardRef(({className:e,...t},r)=>n.jsx(O8,{ref:r,className:Ge(Kne(),e),...t}));ae.displayName=O8.displayName;var ls=(e=>(e.NEW="new",e.CONTACTED="contacted",e.QUALIFIED="qualified",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(ls||{});function Mo(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState([]),[h,m]=w.useState(!1);w.useEffect(()=>{v()},[]);const v=()=>{const N=[{id:"1",name:"Website Contact Form",type:"website",isActive:!0,trackingCode:"WEB_CONTACT",conversionRate:15.5,createdAt:new Date("2024-01-01")},{id:"2",name:"Facebook Ads",type:"advertising",isActive:!0,trackingCode:"FB_ADS",conversionRate:8.2,createdAt:new Date("2024-01-01")},{id:"3",name:"Customer Referral",type:"referral",isActive:!0,conversionRate:35.8,createdAt:new Date("2024-01-01")},{id:"4",name:"RV Show",type:"event",isActive:!0,trackingCode:"RV_SHOW_2024",conversionRate:22.1,createdAt:new Date("2024-01-01")},{id:"5",name:"Google Ads",type:"advertising",isActive:!0,trackingCode:"GOOGLE_ADS",conversionRate:12.3,createdAt:new Date("2024-01-01")},{id:"6",name:"Walk-in",type:"other",isActive:!0,conversionRate:45.2,createdAt:new Date("2024-01-01")}],D=[{id:"rep-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"rep-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"rep-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],I=En("renter-insight-leads",[{id:"1",firstName:"John",lastName:"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website Contact Form",sourceId:"1",status:ls.NEW,assignedTo:"rep-001",notes:"Interested in Class A Motorhome, budget $150k-200k",score:85,lastActivity:new Date("2024-01-20"),customFields:{budget:"$150k-200k",timeframe:"3-6 months",experience:"First-time buyer"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@email.com",phone:"(555) 987-6543",source:"Customer Referral",sourceId:"3",status:ls.QUALIFIED,assignedTo:"rep-002",notes:"Looking for travel trailer under $50k, referred by Mike Davis",score:92,lastActivity:new Date("2024-01-18"),customFields:{budget:"Under $50k",timeframe:"1-3 months",experience:"Experienced RVer"},createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-18")}]),R=En("renter-insight-activities",[{id:"1",leadId:"1",type:"call",description:"Initial qualification call",outcome:"positive",duration:25,completedDate:new Date("2024-01-20"),userId:"rep-001",createdAt:new Date("2024-01-20")},{id:"2",leadId:"2",type:"email",description:"Sent product brochures",outcome:"positive",completedDate:new Date("2024-01-18"),userId:"rep-002",createdAt:new Date("2024-01-18")}]),M=[{leadId:"1",totalScore:85,demographicScore:30,behaviorScore:25,engagementScore:30,lastCalculated:new Date("2024-01-20"),factors:[{factor:"Budget Match",points:25,reason:"Budget aligns with inventory"},{factor:"Response Time",points:20,reason:"Quick response to outreach"},{factor:"Engagement Level",points:15,reason:"High email open rates"}]}],$=[{id:"1",leadId:"1",userId:"rep-001",type:"follow_up",title:"Follow up on motorhome interest",description:"Schedule showroom visit",dueDate:new Date("2024-01-25"),isCompleted:!1,priority:"high",createdAt:new Date("2024-01-20")}];s(N),u(D),t(I),i(R),l(M),d($)},g=N=>{rn("renter-insight-leads",N)},p=N=>{rn("renter-insight-activities",N)},x=async N=>{m(!0);try{const D={id:Math.random().toString(36).substr(2,9),firstName:N.firstName||"",lastName:N.lastName||"",email:N.email||"",phone:N.phone||"",source:N.source||"",sourceId:N.sourceId||"",status:ls.NEW,assignedTo:N.assignedTo,notes:N.notes||"",score:0,lastActivity:new Date,customFields:N.customFields||{},createdAt:new Date,updatedAt:new Date},I=[...e,D];return t(I),g(I),await j({leadId:D.id,type:"note",description:`Lead created from ${D.source}`,userId:"current-user"}),await E(D.id),D}finally{m(!1)}},b=async(N,D)=>{const I=e.map(R=>R.id===N?{...R,status:D,updatedAt:new Date}:R);t(I),g(I),await j({leadId:N,type:"status_change",description:`Status changed to ${D}`,userId:"current-user"})},y=async(N,D)=>{var R;const I=e.map(M=>M.id===N?{...M,assignedTo:D,updatedAt:new Date}:M);t(I),g(I),await j({leadId:N,type:"note",description:`Lead assigned to ${(R=f.find(M=>M.id===D))==null?void 0:R.name}`,userId:"current-user"})},j=async N=>{const D={id:Math.random().toString(36).substr(2,9),leadId:N.leadId||"",type:N.type||"note",description:N.description||"",outcome:N.outcome,duration:N.duration,scheduledDate:N.scheduledDate,completedDate:N.completedDate||new Date,userId:N.userId||"current-user",metadata:N.metadata,createdAt:new Date},I=[...a,D];i(I),p(I);const R=e.map(M=>M.id===D.leadId?{...M,lastActivity:new Date,updatedAt:new Date}:M);t(R),g(R),await E(D.leadId)},E=async N=>{var ee,he,me;const D=e.find(oe=>oe.id===N);if(!D)return;const I=a.filter(oe=>oe.leadId===N);let R=0,M=0,$=0;const B=[];(ee=D.customFields)!=null&&ee.budget&&(R+=20,B.push({factor:"Budget Provided",points:20,reason:"Customer provided budget information"})),((he=D.customFields)==null?void 0:he.timeframe)==="1-3 months"?(R+=25,B.push({factor:"Short Timeframe",points:25,reason:"Ready to purchase soon"})):((me=D.customFields)==null?void 0:me.timeframe)==="3-6 months"&&(R+=15,B.push({factor:"Medium Timeframe",points:15,reason:"Moderate purchase timeline"})),I.filter(oe=>oe.type==="call").length>0&&(M+=30,B.push({factor:"Phone Engagement",points:30,reason:"Participated in phone calls"})),I.filter(oe=>oe.type==="email").length>2&&(M+=20,B.push({factor:"Email Engagement",points:20,reason:"Active email communication"})),I.filter(oe=>new Date(oe.createdAt).getTime()>Date.now()-7*24*60*60*1e3).length>0&&($+=25,B.push({factor:"Recent Activity",points:25,reason:"Active in the last 7 days"}));const L=I.filter(oe=>oe.outcome==="positive").length;L>0&&($+=L*10,B.push({factor:"Positive Interactions",points:L*10,reason:`${L} positive interactions`}));const V=R+M+$,G={leadId:N,totalScore:V,demographicScore:R,behaviorScore:M,engagementScore:$,lastCalculated:new Date,factors:B};l(oe=>oe.filter(we=>we.leadId!==N).concat(G));const Z=e.map(oe=>oe.id===N?{...oe,score:V,updatedAt:new Date}:oe);t(Z),g(Z)};return{leads:e,sources:r,activities:a,scores:o,reminders:c,salesReps:f,loading:h,createLead:x,updateLeadStatus:b,assignLead:y,logActivity:j,calculateLeadScore:E,createReminder:async N=>{const D={id:Math.random().toString(36).substr(2,9),leadId:N.leadId||"",userId:N.userId||"current-user",type:N.type||"follow_up",title:N.title||"",description:N.description||"",dueDate:N.dueDate||new Date,isCompleted:!1,priority:N.priority||"medium",createdAt:new Date};return d(I=>[...I,D]),D},completeReminder:async N=>{d(D=>D.map(I=>I.id===N?{...I,isCompleted:!0}:I))},getLeadsByRep:N=>e.filter(D=>D.assignedTo===N),getActivitiesByLead:N=>a.filter(D=>D.leadId===N),getRemindersByUser:N=>c.filter(D=>D.userId===N&&!D.isCompleted),getLeadScore:N=>o.find(D=>D.leadId===N)}}function gf({onClose:e,onSuccess:t}){const{sources:r,salesReps:s,createLead:a}=Mo(),{toast:i}=_t(),[o,l]=w.useState(!1),[c,d]=w.useState({firstName:"",lastName:"",email:"",phone:"",source:"",sourceId:"",assignedTo:"",notes:"",customFields:{budget:"",timeframe:"",experience:"",interests:"",preferredContact:"email"}}),[f,u]=w.useState({}),h=()=>{const p={};return c.firstName.trim()||(p.firstName="First name is required"),c.lastName.trim()||(p.lastName="Last name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(p.email="Please enter a valid email address"):p.email="Email is required",c.phone.trim()||(p.phone="Phone number is required"),c.sourceId||(p.sourceId="Lead source is required"),u(p),Object.keys(p).length===0},m=async p=>{if(p.preventDefault(),!h()){i({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}l(!0);try{const x=r.find(j=>j.id===c.sourceId),b={firstName:c.firstName.trim(),lastName:c.lastName.trim(),email:c.email.trim().toLowerCase(),phone:c.phone.trim(),source:(x==null?void 0:x.name)||"",sourceId:c.sourceId,assignedTo:c.assignedTo||void 0,notes:c.notes.trim(),customFields:{...c.customFields,interests:c.customFields.interests.trim()}},y=await a(b);i({title:"Lead Created Successfully!",description:`${y.firstName} ${y.lastName} has been added to your CRM.`,variant:"default"}),t(y),e()}catch(x){console.error("Error creating lead:",x),i({title:"Error Creating Lead",description:"There was a problem creating the lead. Please try again.",variant:"destructive"})}finally{l(!1)}},v=(p,x)=>{d(b=>({...b,[p]:x})),f[p]&&u(b=>({...b,[p]:""}))},g=(p,x)=>{d(b=>({...b,customFields:{...b.customFields,[p]:x}}))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl flex items-center",children:[n.jsx(As,{className:"h-5 w-5 mr-2 text-blue-500"}),"Add New Lead"]}),n.jsx(Be,{children:"Create a new lead and start the sales process"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(As,{className:"h-4 w-4 mr-2"}),"Contact Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"firstName",children:"First Name *"}),n.jsx(Pe,{id:"firstName",value:c.firstName,onChange:p=>v("firstName",p.target.value),placeholder:"Enter first name",className:f.firstName?"border-red-500":""}),f.firstName&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.firstName})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"lastName",children:"Last Name *"}),n.jsx(Pe,{id:"lastName",value:c.lastName,onChange:p=>v("lastName",p.target.value),placeholder:"Enter last name",className:f.lastName?"border-red-500":""}),f.lastName&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.lastName})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"email",children:"Email Address *"}),n.jsxs("div",{className:"relative",children:[n.jsx(on,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"email",type:"email",value:c.email,onChange:p=>v("email",p.target.value),placeholder:"Enter email address",className:`pl-10 ${f.email?"border-red-500":""}`})]}),f.email&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.email})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"phone",children:"Phone Number *"}),n.jsxs("div",{className:"relative",children:[n.jsx($m,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"phone",type:"tel",value:c.phone,onChange:p=>v("phone",p.target.value),placeholder:"Enter phone number",className:`pl-10 ${f.phone?"border-red-500":""}`})]}),f.phone&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.phone})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(O4,{className:"h-4 w-4 mr-2"}),"Lead Details"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"source",children:"Lead Source *"}),n.jsxs(We,{value:c.sourceId,onValueChange:p=>v("sourceId",p),children:[n.jsx(Ue,{className:f.sourceId?"border-red-500":"",children:n.jsx(qe,{placeholder:"Select lead source"})}),n.jsx(Ve,{children:r.map(p=>n.jsx(K,{value:p.id,children:p.name},p.id))})]}),f.sourceId&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.sourceId})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"assignedTo",children:"Assign to Sales Rep"}),n.jsxs(We,{value:c.assignedTo,onValueChange:p=>v("assignedTo",p),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select sales rep (optional)"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"Unassigned"}),s.map(p=>n.jsx(K,{value:p.id,children:p.name},p.id))]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Additional Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"budget",children:"Budget Range"}),n.jsxs(We,{value:c.customFields.budget,onValueChange:p=>g("budget",p),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select budget range"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"Under $50k",children:"Under $50k"}),n.jsx(K,{value:"$50k-$100k",children:"$50k-$100k"}),n.jsx(K,{value:"$100k-$150k",children:"$100k-$150k"}),n.jsx(K,{value:"$150k-$200k",children:"$150k-$200k"}),n.jsx(K,{value:"$200k+",children:"$200k+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"timeframe",children:"Purchase Timeframe"}),n.jsxs(We,{value:c.customFields.timeframe,onValueChange:p=>g("timeframe",p),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select timeframe"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"Immediate",children:"Immediate (within 1 month)"}),n.jsx(K,{value:"1-3 months",children:"1-3 months"}),n.jsx(K,{value:"3-6 months",children:"3-6 months"}),n.jsx(K,{value:"6-12 months",children:"6-12 months"}),n.jsx(K,{value:"12+ months",children:"12+ months"})]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"experience",children:"RV Experience"}),n.jsxs(We,{value:c.customFields.experience,onValueChange:p=>g("experience",p),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select experience level"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"First-time buyer",children:"First-time buyer"}),n.jsx(K,{value:"Some experience",children:"Some experience"}),n.jsx(K,{value:"Experienced RVer",children:"Experienced RVer"}),n.jsx(K,{value:"Expert/Full-timer",children:"Expert/Full-timer"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"preferredContact",children:"Preferred Contact Method"}),n.jsxs(We,{value:c.customFields.preferredContact,onValueChange:p=>g("preferredContact",p),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select contact method"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"phone",children:"Phone"}),n.jsx(K,{value:"text",children:"Text/SMS"}),n.jsx(K,{value:"any",children:"Any method"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"interests",children:"Interests/Requirements"}),n.jsx(Pe,{id:"interests",value:c.customFields.interests,onChange:p=>g("interests",p.target.value),placeholder:"e.g., Class A Motorhome, Solar panels, Pet-friendly"})]})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes"}),n.jsx(ir,{id:"notes",value:c.notes,onChange:p=>v("notes",p.target.value),placeholder:"Add any additional notes about this lead...",rows:3})]})}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:e,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Lead..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Create Lead"]})})]})]})})]})})}const Yne=[{name:"Total Leads",value:"2,651",change:"+4.75%",changeType:"positive",icon:Yn},{name:"Inventory Units",value:"847",change:"+54.02%",changeType:"positive",icon:ia},{name:"Active Quotes",value:"124",change:"-1.39%",changeType:"negative",icon:Ns},{name:"Monthly Revenue",value:"$405,091",change:"+10.18%",changeType:"positive",icon:$t}],Xne=[{id:1,type:"lead",title:"New lead from website",description:"John Smith interested in Class A Motorhome",time:"2 minutes ago"},{id:2,type:"quote",title:"Quote sent to customer",description:"Quote #Q-2024-001 sent to Sarah Johnson",time:"15 minutes ago"},{id:3,type:"service",title:"Service appointment scheduled",description:"Annual maintenance for RV #VIN123456",time:"1 hour ago"},{id:4,type:"delivery",title:"Delivery completed",description:"Travel Trailer delivered to Mike Davis",time:"2 hours ago"}];function Qne(){const[e,t]=w.useState(!1),r=a=>{console.log("New lead created from dashboard:",a)},s=a=>{switch(a){case"add-lead":t(!0);break;case"add-inventory":window.location.href="/inventory";break;case"create-quote":window.location.href="/quotes";break;case"schedule-service":window.location.href="/service";break}};return n.jsxs("div",{className:"space-y-6",children:[e&&n.jsx(gf,{onClose:()=>t(!1),onSuccess:r}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Welcome to your Renter Insight CRM/DMS dashboard"})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Yne.map(a=>n.jsxs(ue,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:a.name}),n.jsx(a.icon,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:a.value}),n.jsxs("p",{className:`text-xs ${a.changeType==="positive"?"text-green-600":"text-red-600"}`,children:[a.change," from last month"]})]})]},a.name))}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Recent Activity"}),n.jsx(Be,{children:"Latest updates from your dealership"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:Xne.map(a=>n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:a.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.time})]})]},a.id))})})]}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Quick Actions"}),n.jsx(Be,{children:"Common tasks and shortcuts"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-3",children:[n.jsxs("button",{onClick:()=>s("add-lead"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Yn,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Add New Lead"})]}),n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs("button",{onClick:()=>s("add-inventory"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ia,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Add Inventory"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]}),n.jsxs("button",{onClick:()=>s("create-quote"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ns,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Create Quote"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]}),n.jsxs("button",{onClick:()=>s("schedule-service"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ur,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Schedule Service"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]})]})})]})]})]})}function Jne(){const[e,t]=w.useState("admin@renterinsight.com"),[r,s]=w.useState("password"),{login:a,isLoading:i}=Fm(),{toast:o}=_t(),l=E4(),c=async d=>{d.preventDefault();try{await a(e,r),l("/")}catch{o({title:"Login Failed",description:"Invalid email or password",variant:"destructive"})}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsxs(be,{className:"text-center",children:[n.jsx(je,{className:"text-2xl font-bold text-primary",children:"Renter Insight CRM/DMS"}),n.jsx(Be,{children:"Sign in to your account to continue"})]}),n.jsxs(fe,{children:[n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsx("div",{children:n.jsx(Pe,{type:"email",placeholder:"Email",value:e,onChange:d=>t(d.target.value),required:!0,autoComplete:"username"})}),n.jsx("div",{children:n.jsx(Pe,{type:"password",placeholder:"Password",value:r,onChange:d=>s(d.target.value),required:!0,autoComplete:"current-password"})}),n.jsx(J,{type:"submit",className:"w-full",disabled:i,children:i?"Signing in...":"Sign In"})]}),n.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"Demo credentials: admin@renterinsight.com / password"})]})]})})}function Zne({children:e}){const{user:t,isLoading:r}=Fm();return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):t?n.jsx(n.Fragment,{children:e}):n.jsx(SY,{to:"/login",replace:!0})}const ese=Pj("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Fe({className:e,variant:t,...r}){return n.jsx("div",{className:Ge(ese({variant:t}),e),...r})}function tse(e){const t=e+"CollectionProvider",[r,s]=df(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:x}=g,b=ce.useRef(null),y=ce.useRef(new Map).current;return n.jsx(a,{scope:p,itemMap:y,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Xh(l),d=ce.forwardRef((g,p)=>{const{scope:x,children:b}=g,y=i(l,x),j=Ji(p,y.collectionRef);return n.jsx(c,{ref:j,children:b})});d.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",h=Xh(f),m=ce.forwardRef((g,p)=>{const{scope:x,children:b,...y}=g,j=ce.useRef(null),E=Ji(p,j),A=i(f,x);return ce.useEffect(()=>(A.itemMap.set(j,{ref:j,...y}),()=>void A.itemMap.delete(j))),n.jsx(h,{[u]:"",ref:E,children:b})});m.displayName=f;function v(g){const p=i(e+"CollectionConsumer",g);return ce.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((A,C)=>y.indexOf(A.ref.current)-y.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},v,s]}var rse=jl[" useId ".trim().toString()]||(()=>{}),nse=0;function sse(e){const[t,r]=w.useState(rse());return Pd(()=>{e||r(s=>s??String(nse++))},[e]),e||(t?`radix-${t}`:"")}function ase(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}var ise=w.createContext(void 0);function ose(e){const t=w.useContext(ise);return e||t||"ltr"}var FN="rovingFocusGroup.onEntryFocus",lse={bubbles:!1,cancelable:!0},Sx="RovingFocusGroup",[jC,L8,cse]=tse(Sx),[dse,R8]=df(Sx,[cse]),[use,fse]=dse(Sx),$8=w.forwardRef((e,t)=>n.jsx(jC.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(jC.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(hse,{...e,ref:t})})}));$8.displayName=Sx;var hse=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...u}=e,h=w.useRef(null),m=Ji(t,h),v=ose(i),[g,p]=Aj({prop:o,defaultProp:l??null,onChange:c,caller:Sx}),[x,b]=w.useState(!1),y=ase(d),j=L8(r),E=w.useRef(!1),[A,C]=w.useState(0);return w.useEffect(()=>{const S=h.current;if(S)return S.addEventListener(FN,y),()=>S.removeEventListener(FN,y)},[y]),n.jsx(use,{scope:r,orientation:s,dir:v,loop:a,currentTabStopId:g,onItemFocus:w.useCallback(S=>p(S),[p]),onItemShiftTab:w.useCallback(()=>b(!0),[]),onFocusableItemAdd:w.useCallback(()=>C(S=>S+1),[]),onFocusableItemRemove:w.useCallback(()=>C(S=>S-1),[]),children:n.jsx(Fn.div,{tabIndex:x||A===0?-1:0,"data-orientation":s,...u,ref:m,style:{outline:"none",...e.style},onMouseDown:xn(e.onMouseDown,()=>{E.current=!0}),onFocus:xn(e.onFocus,S=>{const T=!E.current;if(S.target===S.currentTarget&&T&&!x){const O=new CustomEvent(FN,lse);if(S.currentTarget.dispatchEvent(O),!O.defaultPrevented){const _=j().filter(M=>M.focusable),N=_.find(M=>M.active),D=_.find(M=>M.id===g),R=[N,D,..._].filter(Boolean).map(M=>M.ref.current);B8(R,f)}}E.current=!1}),onBlur:xn(e.onBlur,()=>b(!1))})})}),F8="RovingFocusGroupItem",M8=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=sse(),d=i||c,f=fse(F8,r),u=f.currentTabStopId===d,h=L8(r),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:g}=f;return w.useEffect(()=>{if(s)return m(),()=>v()},[s,m,v]),n.jsx(jC.ItemSlot,{scope:r,id:d,focusable:s,active:a,children:n.jsx(Fn.span,{tabIndex:u?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:xn(e.onMouseDown,p=>{s?f.onItemFocus(d):p.preventDefault()}),onFocus:xn(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:xn(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){f.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const x=vse(p,f.orientation,f.dir);if(x!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=h().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const j=y.indexOf(p.currentTarget);y=f.loop?gse(y,j+1):y.slice(j+1)}setTimeout(()=>B8(y))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:g!=null}):o})})});M8.displayName=F8;var mse={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pse(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function vse(e,t,r){const s=pse(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return mse[s]}function B8(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function gse(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var xse=$8,yse=M8,bse=w.createContext(void 0);function jse(e){const t=w.useContext(bse);return e||t||"ltr"}var wse=jl[" useId ".trim().toString()]||(()=>{}),Nse=0;function Sse(e){const[t,r]=w.useState(wse());return Pd(()=>{e||r(s=>s??String(Nse++))},[e]),e||(t?`radix-${t}`:"")}var Uj="Tabs",[Cse,B$e]=df(Uj,[R8]),z8=R8(),[Ase,J4]=Cse(Uj),U8=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=jse(l),[u,h]=Aj({prop:s,onChange:a,defaultProp:i??"",caller:Uj});return n.jsx(Ase,{scope:r,baseId:Sse(),value:u,onValueChange:h,orientation:o,dir:f,activationMode:c,children:n.jsx(Fn.div,{dir:f,"data-orientation":o,...d,ref:t})})});U8.displayName=Uj;var V8="TabsList",W8=w.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,i=J4(V8,r),o=z8(r);return n.jsx(xse,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:n.jsx(Fn.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});W8.displayName=V8;var q8="TabsTrigger",H8=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=e,o=J4(q8,r),l=z8(r),c=Y8(o.baseId,s),d=X8(o.baseId,s),f=s===o.value;return n.jsx(yse,{asChild:!0,...l,focusable:!a,active:f,children:n.jsx(Fn.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:xn(e.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?o.onValueChange(s):u.preventDefault()}),onKeyDown:xn(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(s)}),onFocus:xn(e.onFocus,()=>{const u=o.activationMode!=="manual";!f&&!a&&u&&o.onValueChange(s)})})})});H8.displayName=q8;var G8="TabsContent",K8=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...o}=e,l=J4(G8,r),c=Y8(l.baseId,s),d=X8(l.baseId,s),f=s===l.value,u=w.useRef(f);return w.useEffect(()=>{const h=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(h)},[]),n.jsx(Cj,{present:a||f,children:({present:h})=>n.jsx(Fn.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:h&&i})})});K8.displayName=G8;function Y8(e,t){return`${e}-trigger-${t}`}function X8(e,t){return`${e}-content-${t}`}var Ese=U8,Q8=W8,J8=H8,Z8=K8;const Ar=Ese,jr=w.forwardRef(({className:e,...t},r)=>n.jsx(Q8,{ref:r,className:Ge("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));jr.displayName=Q8.displayName;const Ze=w.forwardRef(({className:e,...t},r)=>n.jsx(J8,{ref:r,className:Ge("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ze.displayName=J8.displayName;const tt=w.forwardRef(({className:e,...t},r)=>n.jsx(Z8,{ref:r,className:Ge("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));tt.displayName=Z8.displayName;const MN=[{id:"1",name:"New",order:1,probability:10,isActive:!0,color:"bg-blue-500"},{id:"2",name:"Contacted",order:2,probability:25,isActive:!0,color:"bg-yellow-500"},{id:"3",name:"Qualified",order:3,probability:50,isActive:!0,color:"bg-orange-500"},{id:"4",name:"Proposal",order:4,probability:75,isActive:!0,color:"bg-purple-500"},{id:"5",name:"Negotiation",order:5,probability:90,isActive:!0,color:"bg-indigo-500"},{id:"6",name:"Closed Won",order:6,probability:100,isActive:!0,color:"bg-green-500"},{id:"7",name:"Closed Lost",order:7,probability:0,isActive:!0,color:"bg-red-500"}];function Pse(){var u,h,m;const{leads:e,salesReps:t,activities:r}=Mo(),[s,a]=w.useState("all"),[i,o]=w.useState("30"),l=w.useMemo(()=>{const v=s==="all"?e:e.filter(p=>p.assignedTo===s);return MN.map(p=>{const x=v.filter(y=>{switch(p.name.toLowerCase()){case"new":return y.status===ls.NEW;case"contacted":return y.status===ls.CONTACTED;case"qualified":return y.status===ls.QUALIFIED;case"proposal":return y.status===ls.PROPOSAL;case"negotiation":return y.status===ls.NEGOTIATION;case"closed won":return y.status===ls.CLOSED_WON;case"closed lost":return y.status===ls.CLOSED_LOST;default:return!1}}),b=x.reduce((y,j)=>{var A,C;const E=parseFloat(((C=(A=j.customFields)==null?void 0:A.budget)==null?void 0:C.replace(/[^0-9]/g,""))||"0");return y+E*p.probability/100},0);return{stage:p.name,count:x.length,value:b,averageTime:7,conversionRate:p.probability}})},[e,s]),c=w.useMemo(()=>t.map(g=>{const p=e.filter(O=>O.assignedTo===g.id),b=r.filter(O=>O.userId===g.id).filter(O=>{const _=new Date(O.createdAt),N=new Date;return N.setDate(N.getDate()-7),_>=N}),y=p.filter(O=>[ls.QUALIFIED,ls.PROPOSAL,ls.NEGOTIATION,ls.CLOSED_WON].includes(O.status)),j=p.filter(O=>O.status===ls.CLOSED_WON),E=p.filter(O=>O.status===ls.CLOSED_LOST),A=p.reduce((O,_)=>{var I,R;if(_.status===ls.CLOSED_WON||_.status===ls.CLOSED_LOST)return O;const N=parseFloat(((R=(I=_.customFields)==null?void 0:I.budget)==null?void 0:R.replace(/[^0-9]/g,""))||"0"),D=MN.find(M=>M.name.toLowerCase()===_.status.replace("_"," "));return O+N*((D==null?void 0:D.probability)||0)/100},0),C=j.length+E.length,S=C>0?j.length/C*100:0,T=j.length>0?j.reduce((O,_)=>{var D,I;const N=parseFloat(((I=(D=_.customFields)==null?void 0:D.budget)==null?void 0:I.replace(/[^0-9]/g,""))||"0");return O+N},0)/j.length:0;return{repId:g.id,repName:g.name,totalLeads:p.length,qualifiedLeads:y.length,closedWon:j.length,closedLost:E.length,pipelineValue:A,conversionRate:S,averageDealSize:T,activitiesThisWeek:b.length}}),[e,t,r]),d=l.reduce((v,g)=>v+g.value,0),f=l.reduce((v,g)=>v+g.count,0);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs(We,{value:s,onValueChange:a,children:[n.jsx(Ue,{className:"w-48",children:n.jsx(qe,{placeholder:"Select sales rep"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Sales Reps"}),t.map(v=>n.jsx(K,{value:v.id,children:v.name},v.id))]})]}),n.jsxs(We,{value:i,onValueChange:o,children:[n.jsx(Ue,{className:"w-32",children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"7",children:"7 days"}),n.jsx(K,{value:"30",children:"30 days"}),n.jsx(K,{value:"90",children:"90 days"}),n.jsx(K,{value:"365",children:"1 year"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),n.jsx($t,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Ie(d)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),f," active leads"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Qualified Leads"}),n.jsx(Ga,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:((u=l.find(v=>v.stage==="Qualified"))==null?void 0:u.count)||0}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Ready for proposal"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Conversion Rate"}),n.jsx(Ga,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[Math.round(s==="all"?c.reduce((v,g)=>v+g.conversionRate,0)/c.length||0:((h=c.find(v=>v.repId===s))==null?void 0:h.conversionRate)||0),"%"]}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Win rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Avg Deal Size"}),n.jsx($t,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Ie(s==="all"?c.reduce((v,g)=>v+g.averageDealSize,0)/c.length||0:((m=c.find(v=>v.repId===s))==null?void 0:m.averageDealSize)||0)}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx($t,{className:"h-3 w-3 mr-1"}),"Per closed deal"]})]})]})]}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Sales Pipeline"}),n.jsx(Be,{children:"Lead distribution across pipeline stages"})]}),n.jsx(fe,{children:n.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:l.map((v,g)=>{const p=MN[g];return n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:Ge("w-full h-24 rounded-lg flex items-center justify-center text-white font-bold text-lg mb-2",p.color),children:v.count}),n.jsx("h3",{className:"font-semibold text-sm",children:p.name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:Ie(v.value)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.probability,"% probability"]})]},p.id)})})})]}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Sales Rep Performance"}),n.jsx(Be,{children:"Individual performance metrics and activity levels"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:c.map(v=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold",children:v.repName}),n.jsxs(Fe,{variant:"secondary",children:[v.totalLeads," leads"]}),n.jsxs(Fe,{className:"bg-green-50 text-green-700 border-green-200",children:[v.conversionRate.toFixed(1),"% conversion"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Pipeline Value:"}),n.jsx("div",{className:"font-bold text-primary",children:Ie(v.pipelineValue)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Qualified:"}),n.jsx("div",{className:"font-bold text-green-600",children:v.qualifiedLeads})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Closed Won:"}),n.jsx("div",{className:"font-bold text-blue-600",children:v.closedWon})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Activities (7d):"}),n.jsx("div",{className:"font-bold text-purple-600",children:v.activitiesThisWeek})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",children:[n.jsx(Yn,{className:"h-3 w-3 mr-1"}),"View Leads"]}),n.jsxs(J,{variant:"outline",size:"sm",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Activities"]})]})]},v.repId))})})]})]})}var Z4="Progress",eP=100,[Tse,z$e]=df(Z4),[_se,Ise]=Tse(Z4),eB=w.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:i=kse,...o}=e;(a||a===0)&&!RI(a)&&console.error(Dse(`${a}`,"Progress"));const l=RI(a)?a:eP;s!==null&&!$I(s,l)&&console.error(Ose(`${s}`,"Progress"));const c=$I(s,l)?s:null,d=qb(c)?i(c,l):void 0;return n.jsx(_se,{scope:r,value:c,max:l,children:n.jsx(Fn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":qb(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":nB(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});eB.displayName=Z4;var tB="ProgressIndicator",rB=w.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=Ise(tB,r);return n.jsx(Fn.div,{"data-state":nB(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});rB.displayName=tB;function kse(e,t){return`${Math.round(e/t*100)}%`}function nB(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function qb(e){return typeof e=="number"}function RI(e){return qb(e)&&!isNaN(e)&&e>0}function $I(e,t){return qb(e)&&!isNaN(e)&&e<=t&&e>=0}function Dse(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${eP}\`.`}function Ose(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${eP} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var sB=eB,Lse=rB;const Bu=w.forwardRef(({className:e,value:t,...r},s)=>n.jsx(sB,{ref:s,className:Ge("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(Lse,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Bu.displayName=sB.displayName;function Rse({score:e,className:t}){const r=i=>i>=80?"text-green-600":i>=60?"text-yellow-600":i>=40?"text-orange-600":"text-red-600",s=i=>i>=80?"bg-green-50 text-green-700 border-green-200":i>=60?"bg-yellow-50 text-yellow-700 border-yellow-200":i>=40?"bg-orange-50 text-orange-700 border-orange-200":"bg-red-50 text-red-700 border-red-200",a=i=>i>=80?"Hot Lead":i>=60?"Warm Lead":i>=40?"Cool Lead":"Cold Lead";return n.jsxs(ue,{className:Ge("shadow-sm",t),children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:"Lead Score"}),n.jsxs(Be,{children:["Last calculated: ",e.lastCalculated.toLocaleDateString()]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:Ge("text-3xl font-bold",r(e.totalScore)),children:e.totalScore}),n.jsx(Fe,{className:Ge("ri-badge-status",s(e.totalScore)),children:a(e.totalScore)})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Demographics"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Bu,{value:e.demographicScore/50*100,className:"w-20"}),n.jsx("span",{className:"text-sm font-bold w-8",children:e.demographicScore})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(el,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Behavior"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Bu,{value:e.behaviorScore/50*100,className:"w-20"}),n.jsx("span",{className:"text-sm font-bold w-8",children:e.behaviorScore})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(DX,{className:"h-4 w-4 text-purple-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Engagement"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Bu,{value:e.engagementScore/50*100,className:"w-20"}),n.jsx("span",{className:"text-sm font-bold w-8",children:e.engagementScore})]})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Score Factors"]}),n.jsx("div",{className:"space-y-2",children:e.factors.map((i,o)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-md",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:i.factor}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i.reason})]}),n.jsxs(Fe,{variant:"secondary",className:"text-xs",children:["+",i.points]})]},o))})]}),n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-sm text-blue-900 mb-2",children:"Recommendations"}),n.jsxs("div",{className:"space-y-1 text-xs text-blue-700",children:[e.totalScore>=80&&n.jsx("p",{children:"• High priority lead - schedule immediate follow-up"}),e.totalScore>=60&&e.totalScore<80&&n.jsx("p",{children:"• Good potential - maintain regular contact"}),e.totalScore>=40&&e.totalScore<60&&n.jsx("p",{children:"• Nurture with educational content"}),e.totalScore<40&&n.jsx("p",{children:"• Low priority - add to drip campaign"}),e.behaviorScore<20&&n.jsx("p",{children:"• Increase engagement with personalized outreach"}),e.engagementScore<20&&n.jsx("p",{children:"• Try different communication channels"})]})]})]})]})}function $se({leadId:e,activities:t}){const{logActivity:r}=Mo(),[s,a]=w.useState(!1),[i,o]=w.useState({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),l=h=>{switch(h){case"call":return $m;case"email":return on;case"meeting":return Ur;case"note":return Pn;case"status_change":return As;default:return Pn}},c=h=>{switch(h){case"call":return"text-green-500";case"email":return"text-blue-500";case"meeting":return"text-purple-500";case"note":return"text-gray-500";case"status_change":return"text-orange-500";default:return"text-gray-500"}},d=h=>{switch(h){case"positive":return"bg-green-50 text-green-700 border-green-200";case"neutral":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"negative":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=async()=>{i.description.trim()&&(await r({leadId:e,type:i.type,description:i.description,outcome:i.outcome,duration:i.duration,scheduledDate:i.scheduledDate,userId:"current-user"}),o({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),a(!1))},u=[...t].sort((h,m)=>new Date(m.createdAt).getTime()-new Date(h.createdAt).getTime());return n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:"Activity Timeline"}),n.jsx(Be,{children:"Track all interactions and activities for this lead"})]}),n.jsxs(J,{onClick:()=>a(!0),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})}),n.jsxs(fe,{children:[s&&n.jsx(ue,{className:"mb-6 border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Activity Type"}),n.jsxs(We,{value:i.type,onValueChange:h=>o(m=>({...m,type:h})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"call",children:"Phone Call"}),n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"meeting",children:"Meeting"}),n.jsx(K,{value:"note",children:"Note"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Outcome"}),n.jsxs(We,{value:i.outcome||"",onValueChange:h=>o(m=>({...m,outcome:h||void 0})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select outcome"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"positive",children:"Positive"}),n.jsx(K,{value:"neutral",children:"Neutral"}),n.jsx(K,{value:"negative",children:"Negative"})]})]})]})]}),i.type==="call"&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Duration (minutes)"}),n.jsx(Pe,{type:"number",value:i.duration||"",onChange:h=>o(m=>({...m,duration:h.target.value?parseInt(h.target.value):void 0})),placeholder:"e.g., 15"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Description"}),n.jsx(ir,{value:i.description,onChange:h=>o(m=>({...m,description:h.target.value})),placeholder:"Describe the activity...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsx(J,{onClick:f,children:"Add Activity"})]})]})})}),n.jsx("div",{className:"space-y-4",children:u.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No activities recorded yet"}):u.map((h,m)=>{const v=l(h.type),g=m===u.length-1;return n.jsxs("div",{className:"relative",children:[!g&&n.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:Ge("flex-shrink-0 w-8 h-8 rounded-full bg-background border-2 flex items-center justify-center",c(h.type)),children:n.jsx(v,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-sm capitalize",children:h.type.replace("_"," ")}),h.outcome&&n.jsx(Fe,{className:Ge("ri-badge-status text-xs",d(h.outcome)),children:h.outcome}),h.duration&&n.jsxs(Fe,{variant:"secondary",className:"text-xs",children:[n.jsx(ur,{className:"h-3 w-3 mr-1"}),h.duration,"m"]})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:ft(h.createdAt)})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.description}),h.scheduledDate&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Scheduled for: ",ft(h.scheduledDate)]})]})]})]},h.id)})})]})]})}function Fse(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Mse(e){const[t,r]=w.useState(void 0);return Pd(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var Vj="Checkbox",[Bse,U$e]=df(Vj),[zse,tP]=Bse(Vj);function Use(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:f="on",internal_do_not_use_render:u}=e,[h,m]=Aj({prop:r,defaultProp:a??!1,onChange:c,caller:Vj}),[v,g]=w.useState(null),[p,x]=w.useState(null),b=w.useRef(!1),y=v?!!o||!!v.closest("form"):!0,j={checked:h,disabled:i,setChecked:m,control:v,setControl:g,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:bd(a)?!1:a,isFormControl:y,bubbleInput:p,setBubbleInput:x};return n.jsx(zse,{scope:t,...j,children:Vse(u)?u(j):s})}var aB="CheckboxTrigger",iB=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:f,setChecked:u,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:v}=tP(aB,e),g=Ji(a,f),p=w.useRef(c);return w.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const b=()=>u(p.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[i,u]),n.jsx(Fn.button,{type:"button",role:"checkbox","aria-checked":bd(c)?"mixed":c,"aria-required":d,"data-state":uB(c),"data-disabled":l?"":void 0,disabled:l,value:o,...s,ref:g,onKeyDown:xn(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:xn(r,x=>{u(b=>bd(b)?!0:!b),v&&m&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});iB.displayName=aB;var rP=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:f,...u}=e;return n.jsx(Use,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:s,form:f,value:c,internal_do_not_use_render:({isFormControl:h})=>n.jsxs(n.Fragment,{children:[n.jsx(iB,{...u,ref:t,__scopeCheckbox:r}),h&&n.jsx(dB,{__scopeCheckbox:r})]})})});rP.displayName=Vj;var oB="CheckboxIndicator",lB=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,i=tP(oB,r);return n.jsx(Cj,{present:s||bd(i.checked)||i.checked===!0,children:n.jsx(Fn.span,{"data-state":uB(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});lB.displayName=oB;var cB="CheckboxBubbleInput",dB=w.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:f,form:u,bubbleInput:h,setBubbleInput:m}=tP(cB,e),v=Ji(r,m),g=Fse(i),p=Mse(s);w.useEffect(()=>{const b=h;if(!b)return;const y=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(y,"checked").set,A=!a.current;if(g!==i&&E){const C=new Event("click",{bubbles:A});b.indeterminate=bd(i),E.call(b,bd(i)?!1:i),b.dispatchEvent(C)}},[h,g,i,a]);const x=w.useRef(bd(i)?!1:i);return n.jsx(Fn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:d,value:f,form:u,...t,tabIndex:-1,ref:v,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});dB.displayName=cB;function Vse(e){return typeof e=="function"}function bd(e){return e==="indeterminate"}function uB(e){return bd(e)?"indeterminate":e?"checked":"unchecked"}const Xt=w.forwardRef(({className:e,...t},r)=>n.jsx(rP,{ref:r,className:Ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(lB,{className:Ge("flex items-center justify-center text-current"),children:n.jsx(Tj,{className:"h-4 w-4"})})}));Xt.displayName=rP.displayName;function Wse({leadId:e,reminders:t}){const{createReminder:r,completeReminder:s}=Mo(),[a,i]=w.useState(!1),[o,l]=w.useState({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),c=g=>{switch(g){case"urgent":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=g=>{switch(g){case"call":return"📞";case"email":return"📧";case"meeting":return"🤝";case"deadline":return"⏰";default:return"📋"}},f=g=>new Date(g)<new Date,u=async()=>{!o.title.trim()||!o.dueDate||(await r({leadId:e,type:o.type,title:o.title,description:o.description,dueDate:new Date(o.dueDate),priority:o.priority,userId:"current-user"}),l({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),i(!1))},h=async g=>{await s(g)},m=t.filter(g=>!g.isCompleted),v=t.filter(g=>g.isCompleted);return n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-lg flex items-center",children:[n.jsx(KM,{className:"h-5 w-5 mr-2"}),"Reminders"]}),n.jsx(Be,{children:"Set follow-up reminders and track completion"})]}),n.jsxs(J,{onClick:()=>i(!0),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]})}),n.jsxs(fe,{children:[a&&n.jsx(ue,{className:"mb-6 border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Reminder Type"}),n.jsxs(We,{value:o.type,onValueChange:g=>l(p=>({...p,type:g})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"follow_up",children:"Follow Up"}),n.jsx(K,{value:"call",children:"Call"}),n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"meeting",children:"Meeting"}),n.jsx(K,{value:"deadline",children:"Deadline"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Priority"}),n.jsxs(We,{value:o.priority,onValueChange:g=>l(p=>({...p,priority:g})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"low",children:"Low"}),n.jsx(K,{value:"medium",children:"Medium"}),n.jsx(K,{value:"high",children:"High"}),n.jsx(K,{value:"urgent",children:"Urgent"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Title"}),n.jsx(Pe,{value:o.title,onChange:g=>l(p=>({...p,title:g.target.value})),placeholder:"e.g., Follow up on pricing questions"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),n.jsx(Pe,{type:"datetime-local",value:o.dueDate,onChange:g=>l(p=>({...p,dueDate:g.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Description"}),n.jsx(ir,{value:o.description,onChange:g=>l(p=>({...p,description:g.target.value})),placeholder:"Additional details...",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),n.jsx(J,{onClick:u,children:"Add Reminder"})]})]})})}),n.jsxs("div",{className:"space-y-6",children:[m.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[n.jsx(ur,{className:"h-4 w-4 mr-2"}),"Active Reminders (",m.length,")"]}),n.jsx("div",{className:"space-y-3",children:m.sort((g,p)=>new Date(g.dueDate).getTime()-new Date(p.dueDate).getTime()).map(g=>n.jsxs("div",{className:Ge("flex items-start space-x-3 p-3 border rounded-lg",f(g.dueDate)?"border-red-200 bg-red-50":"hover:bg-accent/50"),children:[n.jsx(Xt,{checked:!1,onCheckedChange:()=>h(g.id),className:"mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"text-lg",children:d(g.type)}),n.jsx("span",{className:"font-medium text-sm",children:g.title}),n.jsx(Fe,{className:Ge("ri-badge-status text-xs",c(g.priority)),children:g.priority}),f(g.dueDate)&&n.jsxs(Fe,{className:"bg-red-50 text-red-700 border-red-200 text-xs",children:[n.jsx(Po,{className:"h-3 w-3 mr-1"}),"Overdue"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:g.description}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[n.jsx(Ur,{className:"h-3 w-3"}),n.jsxs("span",{children:["Due: ",ft(g.dueDate)]})]})]})]},g.id))})]}),v.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-sm mb-3 text-muted-foreground",children:["Completed (",v.length,")"]}),n.jsx("div",{className:"space-y-2",children:v.sort((g,p)=>new Date(p.dueDate).getTime()-new Date(g.dueDate).getTime()).slice(0,5).map(g=>n.jsxs("div",{className:"flex items-center space-x-3 p-2 text-sm text-muted-foreground",children:[n.jsx(Xt,{checked:!0,disabled:!0}),n.jsx("span",{className:"line-through",children:g.title}),n.jsx("span",{className:"text-xs",children:ft(g.dueDate)})]},g.id))})]}),m.length===0&&v.length===0&&n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No reminders set for this lead"})]})]})]})}function qse({template:e,type:t,onSave:r,onCancel:s}){const{toast:a}=_t(),[i,o]=w.useState(!1),[l,c]=w.useState({name:(e==null?void 0:e.name)||"",subject:(e==null?void 0:e.subject)||"",body:(e==null?void 0:e.body)||(e==null?void 0:e.message)||"",type:(e==null?void 0:e.type)||"custom",variables:(e==null?void 0:e.variables)||[],isActive:(e==null?void 0:e.isActive)??!0}),[d,f]=w.useState(""),u=[{value:"welcome",label:"Welcome"},{value:"follow_up",label:"Follow Up"},{value:"nurture",label:"Nurture"},{value:"proposal",label:"Proposal"},{value:"reminder",label:"Reminder"},{value:"custom",label:"Custom"}],h=["first_name","last_name","company_name","rep_name","rep_phone","rep_email","website_url","budget","timeframe"],m=async()=>{if(!l.name.trim()){a({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!l.body.trim()){a({title:"Validation Error",description:`${t==="email"?"Email body":"SMS message"} is required`,variant:"destructive"});return}if(t==="email"&&!l.subject.trim()){a({title:"Validation Error",description:"Email subject is required",variant:"destructive"});return}if(t==="sms"&&l.body.length>160){a({title:"Validation Error",description:"SMS message must be 160 characters or less",variant:"destructive"});return}o(!0);try{const x=t==="email"?{name:l.name,subject:l.subject,body:l.body,type:l.type,variables:l.variables,isActive:l.isActive}:{name:l.name,message:l.body,type:l.type,variables:l.variables,isActive:l.isActive};await r(x),a({title:"Success",description:`${t==="email"?"Email":"SMS"} template ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} template`,variant:"destructive"})}finally{o(!1)}},v=()=>{d.trim()&&!l.variables.includes(d.trim())&&(c(x=>({...x,variables:[...x.variables,d.trim()]})),f(""))},g=x=>{c(b=>({...b,variables:b.variables.filter(y=>y!==x)}))},p=x=>{const b=`{{${x}}}`;c(y=>({...y,body:y.body+b}))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl flex items-center",children:[t==="email"?n.jsx(on,{className:"h-5 w-5 mr-2 text-blue-500"}):n.jsx(Pn,{className:"h-5 w-5 mr-2 text-green-500"}),e?"Edit":"Create"," ",t==="email"?"Email":"SMS"," Template"]}),n.jsx(Be,{children:e?"Update the template details":"Create a new template for automated communications"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Template Name *"}),n.jsx(Pe,{id:"name",value:l.name,onChange:x=>c(b=>({...b,name:x.target.value})),placeholder:"e.g., Welcome New Lead"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Template Type"}),n.jsxs(We,{value:l.type,onValueChange:x=>c(b=>({...b,type:x})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsx(Ve,{children:u.map(x=>n.jsx(K,{value:x.value,children:x.label},x.value))})]})]})]}),t==="email"&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"subject",children:"Subject Line *"}),n.jsx(Pe,{id:"subject",value:l.subject,onChange:x=>c(b=>({...b,subject:x.target.value})),placeholder:"e.g., Welcome to {{company_name}}, {{first_name}}!"})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs(ae,{htmlFor:"body",children:[t==="email"?"Email Body":"SMS Message"," *"]}),n.jsx(ir,{id:"body",value:l.body,onChange:x=>c(b=>({...b,body:x.target.value})),placeholder:t==="email"?`Hi {{first_name}},

Thank you for your interest in our RV inventory!

Best regards,
{{rep_name}}`:"Hi {{first_name}}! Thanks for your interest. Call us at {{rep_phone}} - {{rep_name}}",rows:t==="email"?12:4,maxLength:t==="sms"?160:void 0}),t==="sms"&&n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.body.length,"/160 characters"]}),n.jsx("div",{className:`text-xs ${l.body.length>160?"text-red-500":"text-muted-foreground"}`,children:l.body.length>160&&"Message too long"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Variables"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Common Variables:"}),n.jsx("div",{className:"space-y-1",children:h.map(x=>n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start text-xs",onClick:()=>p(x),children:[n.jsx(Et,{className:"h-3 w-3 mr-1"}),x]},x))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Custom Variables:"}),n.jsxs("div",{className:"flex space-x-1 mb-2",children:[n.jsx(Pe,{value:d,onChange:x=>f(x.target.value),placeholder:"variable_name",className:"text-xs",onKeyPress:x=>x.key==="Enter"&&v()}),n.jsx(J,{size:"sm",onClick:v,children:n.jsx(Et,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"space-y-1",children:l.variables.map(x=>n.jsxs("div",{className:"flex items-center justify-between p-1 bg-muted rounded text-xs",children:[n.jsx("span",{children:x}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>g(x),className:"h-4 w-4 p-0",children:n.jsx($n,{className:"h-3 w-3"})})]},x))})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isActive",checked:l.isActive,onCheckedChange:x=>c(b=>({...b,isActive:!!x}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active template"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Preview"}),n.jsxs("div",{className:"mt-2 p-4 bg-muted/30 rounded-lg",children:[t==="email"&&n.jsxs("div",{className:"mb-2",children:[n.jsx("strong",{children:"Subject:"})," ",l.subject||"No subject"]}),n.jsx("div",{className:"whitespace-pre-wrap text-sm",children:l.body||`No ${t==="email"?"content":"message"}`})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:s,disabled:i,children:"Cancel"}),n.jsx(J,{onClick:m,disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Template"]})})]})]})]})})}function Hse({sequence:e,emailTemplates:t,smsTemplates:r,onSave:s,onCancel:a}){var A,C,S,T,O;const{toast:i}=_t(),[o,l]=w.useState(!1),[c,d]=w.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",targetAudience:(e==null?void 0:e.targetAudience)||"",steps:(e==null?void 0:e.steps)||[],isActive:(e==null?void 0:e.isActive)??!0}),[f,u]=w.useState(!1),[h,m]=w.useState({type:"email",delay:0,content:{body:""},isActive:!0}),v=[{value:"email",label:"Email",icon:on,color:"text-blue-500"},{value:"sms",label:"SMS",icon:Pn,color:"text-green-500"},{value:"wait",label:"Wait",icon:ur,color:"text-orange-500"},{value:"task",label:"Task",icon:Yn,color:"text-purple-500"}],g=_=>{const N=v.find(D=>D.value===_);return(N==null?void 0:N.icon)||on},p=_=>{const N=v.find(D=>D.value===_);return(N==null?void 0:N.color)||"text-gray-500"},x=async()=>{if(!c.name.trim()){i({title:"Validation Error",description:"Sequence name is required",variant:"destructive"});return}if(c.steps.length===0){i({title:"Validation Error",description:"At least one step is required",variant:"destructive"});return}l(!0);try{const _={...c,steps:c.steps.map((N,D)=>({...N,order:D+1}))};await s(_),i({title:"Success",description:`Sequence ${e?"updated":"created"} successfully`})}catch{i({title:"Error",description:`Failed to ${e?"update":"create"} sequence`,variant:"destructive"})}finally{l(!1)}},b=()=>{var N,D;if(!((D=(N=h.content)==null?void 0:N.body)!=null&&D.trim())&&h.type!=="wait"){i({title:"Validation Error",description:"Step content is required",variant:"destructive"});return}const _={id:Math.random().toString(36).substr(2,9),type:h.type||"email",delay:h.delay||0,content:h.content||{body:""},isActive:!0};d(I=>({...I,steps:[...I.steps,_]})),m({type:"email",delay:0,content:{body:""},isActive:!0}),u(!1)},y=_=>{d(N=>({...N,steps:N.steps.filter(D=>D.id!==_)}))},j=(_,N)=>{const D=[...c.steps],I=D.findIndex(R=>R.id===_);N==="up"&&I>0?[D[I],D[I-1]]=[D[I-1],D[I]]:N==="down"&&I<D.length-1&&([D[I],D[I+1]]=[D[I+1],D[I]]),d(R=>({...R,steps:D}))},E=_=>{if(_<24)return`${_} hours`;const N=Math.floor(_/24),D=_%24;return D===0?`${N} days`:`${N} days ${D} hours`};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:[e?"Edit":"Create"," Nurture Sequence"]}),n.jsx(Be,{children:e?"Update the sequence details and steps":"Create an automated sequence for lead nurturing"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Sequence Name *"}),n.jsx(Pe,{id:"name",value:c.name,onChange:_=>d(N=>({...N,name:_.target.value})),placeholder:"e.g., New Lead Welcome Series"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"targetAudience",children:"Target Audience"}),n.jsx(Pe,{id:"targetAudience",value:c.targetAudience,onChange:_=>d(N=>({...N,targetAudience:_.target.value})),placeholder:"e.g., New website leads"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"description",children:"Description"}),n.jsx(ir,{id:"description",value:c.description,onChange:_=>d(N=>({...N,description:_.target.value})),placeholder:"Describe the purpose and goals of this sequence",rows:3})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs(ae,{children:["Sequence Steps (",c.steps.length,")"]}),n.jsxs(J,{onClick:()=>u(!0),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Step"]})]}),f&&n.jsx(ue,{className:"mb-4 border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Step Type"}),n.jsxs(We,{value:h.type,onValueChange:_=>m(N=>({...N,type:_})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsx(Ve,{children:v.map(_=>n.jsx(K,{value:_.value,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(_.icon,{className:Ge("h-4 w-4 mr-2",_.color)}),n.jsx("span",{children:_.label})]})},_.value))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Delay (hours)"}),n.jsx(Pe,{type:"number",value:h.delay||0,onChange:_=>m(N=>({...N,delay:parseInt(_.target.value)||0})),placeholder:"0",min:"0"})]}),h.type==="email"&&n.jsxs("div",{children:[n.jsx(ae,{children:"Email Template"}),n.jsxs(We,{value:((A=h.content)==null?void 0:A.template)||"",onValueChange:_=>{const N=t.find(D=>D.id===_);m(D=>({...D,content:{...D.content,template:_,subject:(N==null?void 0:N.subject)||"",body:(N==null?void 0:N.body)||""}}))},children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select template"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"Custom Content"}),t.filter(_=>_.isActive).map(_=>n.jsx(K,{value:_.id,children:_.name},_.id))]})]})]}),h.type==="sms"&&n.jsxs("div",{children:[n.jsx(ae,{children:"SMS Template"}),n.jsxs(We,{value:((C=h.content)==null?void 0:C.template)||"",onValueChange:_=>{const N=r.find(D=>D.id===_);m(D=>({...D,content:{...D.content,template:_,body:(N==null?void 0:N.message)||""}}))},children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select template"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"Custom Content"}),r.filter(_=>_.isActive).map(_=>n.jsx(K,{value:_.id,children:_.name},_.id))]})]})]})]}),h.type==="email"&&n.jsxs("div",{children:[n.jsx(ae,{children:"Subject"}),n.jsx(Pe,{value:((S=h.content)==null?void 0:S.subject)||"",onChange:_=>m(N=>({...N,content:{...N.content,subject:_.target.value}})),placeholder:"Email subject line"})]}),(h.type==="email"||h.type==="sms"||h.type==="task")&&n.jsxs("div",{children:[n.jsx(ae,{children:h.type==="email"?"Email Body":h.type==="sms"?"SMS Message":"Task Description"}),n.jsx(ir,{value:((T=h.content)==null?void 0:T.body)||"",onChange:_=>m(N=>({...N,content:{...N.content,body:_.target.value}})),placeholder:h.type==="email"?"Email content...":h.type==="sms"?"SMS message...":"Task description...",rows:h.type==="email"?6:3,maxLength:h.type==="sms"?160:void 0}),h.type==="sms"&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[(((O=h.content)==null?void 0:O.body)||"").length,"/160 characters"]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),n.jsx(J,{onClick:b,children:"Add Step"})]})]})})}),n.jsxs("div",{className:"space-y-4",children:[c.steps.map((_,N)=>{const D=g(_.type),I=N===c.steps.length-1;return n.jsxs("div",{className:"relative",children:[!I&&n.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsx("div",{className:Ge("flex-shrink-0 w-12 h-12 rounded-full bg-background border-2 flex items-center justify-center",p(_.type)),children:n.jsx(D,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium capitalize",children:_.type}),_.delay>0&&n.jsxs(Fe,{variant:"secondary",className:"text-xs",children:[n.jsx(ur,{className:"h-3 w-3 mr-1"}),E(_.delay)]})]}),_.type==="email"&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[n.jsx("p",{className:"font-medium text-sm text-blue-900",children:_.content.subject||"No subject"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1 line-clamp-2",children:_.content.body||"No content"})]}),_.type==="sms"&&n.jsx("div",{className:"bg-green-50 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-green-700",children:_.content.body||"No message"})}),_.type==="wait"&&n.jsx("div",{className:"bg-orange-50 p-3 rounded-md",children:n.jsxs("p",{className:"text-sm text-orange-700",children:["Wait ",E(_.delay)," before next step"]})}),_.type==="task"&&n.jsx("div",{className:"bg-purple-50 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-purple-700",children:_.content.body||"No task description"})})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(J,{variant:"outline",size:"sm",onClick:()=>j(_.id,"up"),disabled:N===0,children:n.jsx(rl,{className:"h-3 w-3"})}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>j(_.id,"down"),disabled:N===c.steps.length-1,children:n.jsx(tl,{className:"h-3 w-3"})}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>y(_.id),children:n.jsx($n,{className:"h-3 w-3"})})]})]})]},_.id)}),c.steps.length===0&&n.jsx("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:'No steps added yet. Click "Add Step" to get started.'})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isActive",checked:c.isActive,onCheckedChange:_=>d(N=>({...N,isActive:!!_}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active sequence"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:a,disabled:o,children:"Cancel"}),n.jsx(J,{onClick:x,disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Sequence"]})})]})]})]})})}const Gse=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",isActive:!0,targetAudience:"New website leads",steps:[{id:"1",type:"email",delay:0},{id:"2",type:"wait",delay:72},{id:"3",type:"email",delay:0},{id:"4",type:"sms",delay:48}]}],Kse=[{id:"1",name:"Welcome New Lead",subject:"Welcome to our RV dealership!",body:"Thank you for your interest...",type:"welcome",isActive:!0}],Yse=[{id:"1",name:"Quick Follow-up",message:"Hi! Just wanted to check if you have any questions.",type:"follow_up",isActive:!0}];function FI(){const[e,t]=w.useState(Gse),[r,s]=w.useState(Kse),[a,i]=w.useState(Yse),[o]=w.useState([]),[l,c]=w.useState(null),[d,f]=w.useState(!1),[u,h]=w.useState(!1),[m,v]=w.useState(null),[g,p]=w.useState(null),[x,b]=w.useState("email"),y=N=>{switch(N){case"email":return on;case"sms":return Pn;case"wait":return ur;case"task":return Yn;default:return VX}},j=N=>{switch(N){case"email":return"text-blue-500 bg-blue-50";case"sms":return"text-green-500 bg-green-50";case"wait":return"text-orange-500 bg-orange-50";case"task":return"text-purple-500 bg-purple-50";default:return"text-gray-500 bg-gray-50"}},E=N=>{if(N<24)return`${N} hours`;const D=Math.floor(N/24),I=N%24;return I===0?`${D} days`:`${D} days ${I} hours`},A=N=>{const D=o.filter(I=>I.sequenceId===N);return{total:D.length,active:D.filter(I=>I.status==="active").length,completed:D.filter(I=>I.status==="completed").length,paused:D.filter(I=>I.status==="paused").length}},C=(N,D)=>{p({template:N,type:D}),h(!0)},S=async N=>{if(g)g.type==="email"?s(D=>D.map(I=>I.id===g.template.id?{...I,...N}:I)):i(D=>D.map(I=>I.id===g.template.id?{...I,...N}:I));else{const D={id:Math.random().toString(36).substr(2,9),...N,isActive:!0};x==="email"?s(I=>[...I,D]):i(I=>[...I,D])}h(!1),p(null)},T=()=>{f(!0),v(null)},O=N=>{v(N),f(!0)},_=async N=>{if(m)t(D=>D.map(I=>I.id===m.id?{...I,...N}:I));else{const D={id:Math.random().toString(36).substr(2,9),...N,steps:N.steps||[]};t(I=>[...I,D])}f(!1),v(null)};return n.jsxs("div",{className:"space-y-6",children:[u&&n.jsx(qse,{template:g==null?void 0:g.template,type:(g==null?void 0:g.type)||x,onSave:S,onCancel:()=>{h(!1),p(null)}}),d&&n.jsx(Hse,{sequence:m,emailTemplates:r,smsTemplates:a,onSave:_,onCancel:()=>{f(!1),v(null)}}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Nurture Sequences"}),n.jsx("p",{className:"text-muted-foreground",children:"Automate lead nurturing with email and SMS sequences"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",onClick:()=>h(!0),children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Template"]}),n.jsxs(J,{onClick:T,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Sequence"]})]})]}),n.jsxs(Ar,{defaultValue:"sequences",className:"space-y-6",children:[n.jsxs(jr,{children:[n.jsx(Ze,{value:"sequences",children:"Sequences"}),n.jsx(Ze,{value:"templates",children:"Templates"}),n.jsx(Ze,{value:"analytics",children:"Analytics"})]}),n.jsxs(tt,{value:"sequences",className:"space-y-6",children:[n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(N=>{const D=A(N.id);return n.jsxs(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(N),children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:N.name}),n.jsx(Be,{className:"mt-1",children:N.description})]}),n.jsx(Fe,{className:N.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:N.isActive?"Active":"Inactive"})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Yn,{className:"h-4 w-4 text-blue-500"}),n.jsxs("span",{children:[D.total," enrolled"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(yN,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{children:[D.active," active"]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[N.steps.slice(0,4).map((I,R)=>{const M=y(I.type);return n.jsx("div",{className:Ge("flex items-center justify-center w-8 h-8 rounded-full",j(I.type)),children:n.jsx(M,{className:"h-4 w-4"})},I.id)}),N.steps.length>4&&n.jsxs("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-500 text-xs",children:["+",N.steps.length-4]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Target: ",N.targetAudience]})]})})]},N.id)})}),l&&n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:l.name}),n.jsx(Be,{children:l.description})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>O(l),children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(J,{variant:"outline",size:"sm",children:[l.isActive?n.jsx(BX,{className:"h-4 w-4 mr-2"}):n.jsx(yN,{className:"h-4 w-4 mr-2"}),l.isActive?"Pause":"Activate"]})]})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"Sequence Steps"}),n.jsx("div",{className:"space-y-4",children:l.steps.map((N,D)=>{const I=y(N.type),R=D===l.steps.length-1;return n.jsxs("div",{className:"relative",children:[!R&&n.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:Ge("flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center",j(N.type)),children:n.jsx(I,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium capitalize",children:N.type}),N.delay>0&&n.jsxs(Fe,{variant:"outline",className:"flex items-center space-x-1",children:[n.jsx(ur,{className:"h-3 w-3"}),n.jsxs("span",{children:["Wait ",E(N.delay)]})]})]}),N.type==="email"&&n.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:N.type==="email"?"Email step":N.type==="sms"?"SMS step":N.type==="wait"?"Wait step":"Step"})})]})]})]},N.id)})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"Performance"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:Object.entries(A(l.id)).map(([N,D])=>n.jsxs("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold",children:D}),n.jsx("div",{className:"text-sm text-muted-foreground capitalize",children:N})]},N))})]})]})})]})]}),n.jsx(tt,{value:"templates",className:"space-y-6",children:n.jsxs(Ar,{defaultValue:"email",className:"space-y-4",children:[n.jsxs(jr,{children:[n.jsx(Ze,{value:"email",children:"Email Templates"}),n.jsx(Ze,{value:"sms",children:"SMS Templates"})]}),u&&!g&&n.jsx("div",{className:"mb-4",children:n.jsx(Ar,{value:x,onValueChange:N=>b(N),children:n.jsxs(jr,{children:[n.jsx(Ze,{value:"email",children:"Email Template"}),n.jsx(Ze,{value:"sms",children:"SMS Template"})]})})}),n.jsx(tt,{value:"email",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(N=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:N.name}),n.jsx(Fe,{variant:"secondary",className:"mt-1",children:N.type})]}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>C(N,"email"),children:n.jsx(Yr,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:N.subject||N.body}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Variables:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(N.variables||["first_name","company_name"]).map(D=>n.jsx(Fe,{variant:"outline",className:"text-xs",children:D},D))})]})]})})]},N.id))})}),n.jsx(tt,{value:"sms",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:a.map(N=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:N.name}),n.jsx(Fe,{variant:"secondary",className:"mt-1",children:N.type})]}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>C(N,"sms"),children:n.jsx(Yr,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:N.message}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Variables:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(N.variables||["first_name"]).map(D=>n.jsx(Fe,{variant:"outline",className:"text-xs",children:D},D))})]})]})})]},N.id))})})]})}),n.jsxs(tt,{value:"analytics",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Enrollments"}),n.jsx(Yn,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"0"}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Across all sequences"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Active Sequences"}),n.jsx(yN,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(N=>N.isActive).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Currently running"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Completion Rate"}),n.jsx(Lt,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"0%"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Average completion"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Templates"}),n.jsx(on,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:r.length+a.length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(on,{className:"h-3 w-3 mr-1"}),"Email & SMS templates"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Sequence Performance"}),n.jsx(Be,{children:"Detailed analytics for each nurture sequence"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:e.map(N=>{A(N.id);const D=0;return n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:N.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:N.description})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold",children:"0"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Enrolled"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold text-green-600",children:"0"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Active"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold text-blue-600",children:"0"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[D.toFixed(1),"%"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Rate"})]})]})]},N.id)})})})]})]})]})]})}function fB(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState([]),[h,m]=w.useState([]),[v,g]=w.useState([]),[p,x]=w.useState(!1);w.useEffect(()=>{b()},[]);const b=()=>{const q=En("renter-insight-email-templates",[]),W=En("renter-insight-sms-templates",[]),L=En("renter-insight-sequences",[]),V=En("renter-insight-enrollments",[]),G=En("renter-insight-communication-logs",[]),Z=En("renter-insight-ai-insights",[]);if(q.length===0){const ee=[{id:"1",name:"Welcome New Lead",subject:"Welcome to {{company_name}}, {{first_name}}!",body:`Hi {{first_name}},

Thank you for your interest in our RV inventory! We're excited to help you find the perfect recreational vehicle for your adventures.

Here's what happens next:
- One of our RV specialists will contact you within 24 hours
- We'll schedule a personalized tour of our showroom
- You'll receive our latest inventory updates and special offers

In the meantime, feel free to browse our current inventory at {{website_url}}.

Best regards,
{{rep_name}}
{{company_name}}`,type:"welcome",variables:["first_name","company_name","website_url","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Follow-up After 3 Days",subject:"Still looking for the perfect RV, {{first_name}}?",body:`Hi {{first_name}},

I wanted to follow up on your recent inquiry about our RV inventory. Have you had a chance to think about what type of RV would best suit your needs?

Based on your interests, I'd love to show you:
- {{suggested_models}}

We also have some exciting financing options that might interest you. Would you like to schedule a call this week to discuss your options?

You can reply to this email or call me directly at {{rep_phone}}.

Best regards,
{{rep_name}}`,type:"follow_up",variables:["first_name","suggested_models","rep_phone","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];i(ee),rn("renter-insight-email-templates",ee)}else i(q);if(W.length===0){const ee=[{id:"1",name:"Quick Follow-up",message:"Hi {{first_name}}! This is {{rep_name}} from {{company_name}}. Just wanted to check if you have any questions about the RVs you viewed. Reply STOP to opt out.",type:"follow_up",variables:["first_name","rep_name","company_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Appointment Reminder",message:"Hi {{first_name}}! Reminder: Your RV showroom appointment is tomorrow at {{appointment_time}}. See you then! - {{rep_name}}",type:"reminder",variables:["first_name","appointment_time","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];l(ee),rn("renter-insight-sms-templates",ee)}else l(W);if(L.length===0){const ee=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",triggerConditions:[{type:"lead_status",operator:"equals",value:"new"}],steps:[{id:"1",sequenceId:"1",order:1,type:"email",delay:0,content:{subject:"Welcome to {{company_name}}, {{first_name}}!",body:mockEmailTemplates[0].body,template:"1"},isActive:!0},{id:"2",sequenceId:"1",order:2,type:"wait",delay:72,content:{body:"Wait 3 days"},isActive:!0},{id:"3",sequenceId:"1",order:3,type:"email",delay:0,content:{subject:"Still looking for the perfect RV, {{first_name}}?",body:mockEmailTemplates[1].body,template:"2"},isActive:!0},{id:"4",sequenceId:"1",order:4,type:"sms",delay:48,content:{body:mockSmsTemplates[0].message},isActive:!0}],isActive:!0,targetAudience:"New website leads",createdBy:"admin",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}];t(ee),rn("renter-insight-sequences",ee)}else t(L);if(Z.length===0){const ee=[{id:"1",leadId:"1",type:"next_action",title:"Optimal Contact Time Identified",description:"Based on lead behavior patterns, the best time to contact this lead is Tuesday-Thursday between 2-4 PM.",confidence:85,actionable:!0,suggestedActions:["Schedule call for Tuesday 2-4 PM","Send follow-up email on Wednesday morning","Avoid Friday afternoon contact"],metadata:{timeZone:"EST",preferredDays:["Tuesday","Wednesday","Thursday"],preferredHours:[14,15,16]},generatedAt:new Date("2024-01-20"),isRead:!1},{id:"2",leadId:"1",type:"communication_style",title:"Communication Preference Analysis",description:"This lead responds better to detailed, educational content rather than high-pressure sales tactics.",confidence:78,actionable:!0,suggestedActions:["Share educational RV buying guides","Focus on features and benefits","Provide comparison charts","Avoid aggressive closing techniques"],metadata:{preferredStyle:"educational",responseRate:.65,engagementType:"content-focused"},generatedAt:new Date("2024-01-20"),isRead:!1}];u(ee),rn("renter-insight-ai-insights",ee)}else u(Z);s(V),d(G)},y=async(q,W)=>{var L,V;x(!0);try{const G={id:Math.random().toString(36).substr(2,9),leadId:q,sequenceId:W,currentStepId:((V=(L=e.find(Z=>Z.id===W))==null?void 0:L.steps[0])==null?void 0:V.id)||"",status:"active",enrolledAt:new Date,nextActionAt:new Date};return s(Z=>[...Z,G]),await j(G),G}finally{x(!1)}},j=async q=>{const W=e.find(G=>G.id===q.sequenceId);if(!W)return;const L=W.steps.find(G=>G.id===q.currentStepId);if(!L)return;switch(L.type){case"email":await E(q.leadId,L);break;case"sms":await A(q.leadId,L);break;case"wait":const G=new Date;G.setHours(G.getHours()+L.delay),s(Z=>Z.map(ee=>ee.id===q.id?{...ee,nextActionAt:G}:ee));break}const V=W.steps.findIndex(G=>G.id===L.id)+1;if(V<W.steps.length){const G=W.steps[V];s(Z=>Z.map(ee=>ee.id===q.id?{...ee,currentStepId:G.id}:ee))}else s(G=>G.map(Z=>Z.id===q.id?{...Z,status:"completed",completedAt:new Date}:Z))},E=async(q,W)=>{const L={id:Math.random().toString(36).substr(2,9),leadId:q,type:"email",direction:"outbound",subject:W.content.subject,content:W.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:W.id,template:W.content.template}};d(V=>[...V,L]),setTimeout(()=>{d(V=>V.map(G=>G.id===L.id?{...G,status:"delivered",deliveredAt:new Date}:G))},2e3),setTimeout(()=>{d(V=>V.map(G=>G.id===L.id?{...G,status:"opened",openedAt:new Date}:G))},5e3)},A=async(q,W)=>{const L={id:Math.random().toString(36).substr(2,9),leadId:q,type:"sms",direction:"outbound",content:W.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:W.id}};d(V=>[...V,L]),setTimeout(()=>{d(V=>V.map(G=>G.id===L.id?{...G,status:"delivered",deliveredAt:new Date}:G))},1e3)};return{sequences:e,enrollments:r,emailTemplates:a,smsTemplates:o,communicationLogs:c,aiInsights:f,automationRules:h,analytics:v,loading:p,enrollLeadInSequence:y,processNextStep:j,generateAIInsights:async(q,W)=>{var L;x(!0);try{const V=[];W.score>70&&V.push({id:Math.random().toString(36).substr(2,9),leadId:q,type:"next_action",title:"High-Priority Lead - Immediate Action Recommended",description:"This lead has a high score and recent activity. Schedule a personal call within 24 hours.",confidence:92,actionable:!0,suggestedActions:["Schedule personal phone call","Send personalized video message","Invite to exclusive showroom tour"],generatedAt:new Date,isRead:!1});const G=new Date(W.lastActivity),Z=Math.floor((Date.now()-G.getTime())/(1e3*60*60*24));return Z>7&&V.push({id:Math.random().toString(36).substr(2,9),leadId:q,type:"timing",title:"Re-engagement Opportunity",description:`No activity for ${Z} days. Consider a re-engagement campaign.`,confidence:75,actionable:!0,suggestedActions:['Send "We miss you" email',"Offer special incentive","Share new inventory updates"],generatedAt:new Date,isRead:!1}),(L=W.customFields)!=null&&L.budget&&V.push({id:Math.random().toString(36).substr(2,9),leadId:q,type:"content_suggestion",title:"Personalized Content Recommendation",description:`Based on budget range ${W.customFields.budget}, suggest specific RV models and financing options.`,confidence:88,actionable:!0,suggestedActions:["Send budget-specific inventory","Share financing calculator","Provide trade-in valuation"],generatedAt:new Date,isRead:!1}),u(ee=>[...ee.filter(he=>he.leadId!==q),...V]),V}finally{x(!1)}},createEmailTemplate:async q=>{const W={id:Math.random().toString(36).substr(2,9),name:q.name||"",subject:q.subject||"",body:q.body||"",type:q.type||"custom",variables:q.variables||[],isActive:!0,createdAt:new Date},L=[...a,W];return i(L),rn("renter-insight-email-templates",L),W},createSMSTemplate:async q=>{const W={id:Math.random().toString(36).substr(2,9),name:q.name||"",message:q.message||"",type:q.type||"custom",variables:q.variables||[],isActive:!0,createdAt:new Date},L=[...o,W];return l(L),rn("renter-insight-sms-templates",L),W},createNurtureSequence:async q=>{const W={id:Math.random().toString(36).substr(2,9),name:q.name||"",description:q.description||"",triggerConditions:q.triggerConditions||[],steps:q.steps||[],isActive:!0,targetAudience:q.targetAudience||"",createdBy:"current-user",createdAt:new Date,updatedAt:new Date},L=[...e,W];return t(L),rn("renter-insight-sequences",L),W},updateNurtureSequence:async(q,W)=>{const L=e.map(V=>V.id===q?{...V,...W,updatedAt:new Date}:V);t(L),rn("renter-insight-sequences",L)},updateEmailTemplate:async(q,W)=>{const L=a.map(V=>V.id===q?{...V,...W}:V);i(L),rn("renter-insight-email-templates",L)},updateSMSTemplate:async(q,W)=>{const L=o.map(V=>V.id===q?{...V,...W}:V);l(L),rn("renter-insight-sms-templates",L)},getEnrollmentsByLead:q=>r.filter(W=>W.leadId===q),getCommunicationHistory:q=>c.filter(W=>W.leadId===q).sort((W,L)=>new Date(L.sentAt).getTime()-new Date(W.sentAt).getTime()),getAIInsightsByLead:q=>f.filter(W=>W.leadId===q&&!W.isRead),markInsightAsRead:async q=>{u(W=>W.map(L=>L.id===q?{...L,isRead:!0}:L))},pauseEnrollment:async q=>{s(W=>W.map(L=>L.id===q?{...L,status:"paused"}:L))},resumeEnrollment:async q=>{s(W=>W.map(L=>L.id===q?{...L,status:"active"}:L))}}}function Xse({leadId:e,leadData:t}){var E,A,C;const{aiInsights:r,generateAIInsights:s,markInsightAsRead:a,enrollLeadInSequence:i,sequences:o}=fB(),[l,c]=w.useState(!1),[d,f]=w.useState("insights"),u=r.filter(S=>S.leadId===e),h=u.filter(S=>!S.isRead),m=S=>{switch(S){case"next_action":return Ga;case"communication_style":return Pn;case"timing":return ur;case"content_suggestion":return RX;case"risk_assessment":return Lt;default:return nl}},v=S=>{switch(S){case"next_action":return"from-blue-50 to-blue-100/50";case"communication_style":return"from-green-50 to-green-100/50";case"timing":return"from-orange-50 to-orange-100/50";case"content_suggestion":return"from-purple-50 to-purple-100/50";case"risk_assessment":return"from-red-50 to-red-100/50";default:return"from-gray-50 to-gray-100/50"}},g=S=>S>=80?"text-green-600 bg-green-50":S>=60?"text-yellow-600 bg-yellow-50":"text-orange-600 bg-orange-50",p=async()=>{c(!0);try{await s(e,t)}finally{c(!1)}},x=async S=>{await a(S)},b=async S=>{await i(e,S)},j=(S=>{var _;const T=[];if(S.score>80?T.push({type:"High Priority Action",suggestion:"This lead has excellent potential. Schedule a personal call within 24 hours and prepare a customized presentation.",confidence:95,actions:["Schedule immediate call","Prepare custom presentation","Send calendar invite"]}):S.score>60?T.push({type:"Warm Lead Nurturing",suggestion:"Good engagement level. Send educational content about RV ownership and schedule a follow-up in 3-5 days.",confidence:85,actions:["Send RV buying guide","Share customer testimonials","Schedule follow-up"]}):T.push({type:"Lead Warming",suggestion:"Lower engagement detected. Enroll in nurture sequence and focus on value-driven content.",confidence:75,actions:["Enroll in email sequence","Send value content","Monitor engagement"]}),(_=S.customFields)!=null&&_.budget){const N=S.customFields.budget;T.push({type:"Budget-Matched Recommendations",suggestion:`Based on ${N} budget, focus on specific inventory that matches their price range and financing options.`,confidence:90,actions:["Send matching inventory","Discuss financing","Offer trade-in evaluation"]})}const O=Math.floor((Date.now()-new Date(S.createdAt).getTime())/(1e3*60*60*24));return O>7&&T.push({type:"Re-engagement Strategy",suggestion:`Lead is ${O} days old. Implement re-engagement tactics with special offers or new inventory alerts.`,confidence:80,actions:["Send special offer","Share new arrivals","Offer exclusive preview"]}),S.source.toLowerCase().includes("website")&&T.push({type:"Digital-First Approach",suggestion:"Lead came from website - they prefer digital communication. Use email and video messages before phone calls.",confidence:85,actions:["Send welcome email","Create video message","Share virtual tour"]}),T})(t);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(nl,{className:"h-5 w-5 mr-2 text-purple-500"}),"AI Insights & Suggestions"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered recommendations for lead engagement"})]}),n.jsxs(J,{onClick:p,disabled:l,size:"sm",children:[n.jsx(nl,{className:"h-4 w-4 mr-2"}),l?"Analyzing...":"Generate Insights"]})]}),n.jsxs(Ar,{value:d,onValueChange:f,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsxs(Ze,{value:"insights",className:"relative",children:["AI Insights",h.length>0&&n.jsx(Fe,{className:"ml-2 h-5 w-5 rounded-full p-0 text-xs bg-red-500",children:h.length})]}),n.jsx(Ze,{value:"chatgpt",children:"ChatGPT Suggestions"}),n.jsx(Ze,{value:"automation",children:"Automation"})]}),n.jsx(tt,{value:"insights",className:"space-y-4",children:u.length===0?n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(nl,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Insights Yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Generate AI-powered insights to get personalized recommendations for this lead."}),n.jsxs(J,{onClick:p,disabled:l,children:[n.jsx(nl,{className:"h-4 w-4 mr-2"}),"Generate First Insights"]})]})}):n.jsx("div",{className:"space-y-4",children:u.sort((S,T)=>new Date(T.generatedAt).getTime()-new Date(S.generatedAt).getTime()).map(S=>{const T=m(S.type);return n.jsxs(ue,{className:Ge("shadow-sm border-0 bg-gradient-to-br",v(S.type),!S.isRead&&"ring-2 ring-blue-200"),children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(T,{className:"h-6 w-6 text-primary mt-1"}),n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:S.title}),n.jsx(Be,{className:"mt-1",children:S.description})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(Fe,{className:Ge("ri-badge-status",g(S.confidence)),children:[S.confidence,"% confidence"]}),!S.isRead&&n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>x(S.id),children:[n.jsx(an,{className:"h-3 w-3 mr-1"}),"Mark Read"]})]})]})}),S.actionable&&S.suggestedActions&&n.jsx(fe,{children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Suggested Actions:"}),n.jsx("div",{className:"space-y-2",children:S.suggestedActions.map((O,_)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/50 rounded-md",children:[n.jsx("span",{className:"text-sm",children:O}),n.jsx(J,{variant:"outline",size:"sm",children:"Execute"})]},_))})]})})]},S.id)})})}),n.jsxs(tt,{value:"chatgpt",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:n.jsx(nl,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{children:[n.jsx(je,{className:"text-green-900",children:"ChatGPT Analysis"}),n.jsx(Be,{className:"text-green-700",children:"AI-powered lead analysis and action recommendations"})]})]})}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:j.map((S,T)=>n.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-green-900",children:S.type}),n.jsxs(Fe,{className:"bg-green-100 text-green-700 border-green-200",children:[S.confidence,"% confidence"]})]}),n.jsx("p",{className:"text-sm text-green-800 mb-3",children:S.suggestion}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h5",{className:"text-xs font-semibold text-green-900 uppercase tracking-wide",children:"Recommended Actions:"}),n.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:S.actions.map((O,_)=>n.jsx(J,{variant:"outline",size:"sm",className:"justify-start text-xs bg-white/50 hover:bg-white/80",children:O},_))})]})]},T))})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs(je,{className:"flex items-center",children:[n.jsx(Ga,{className:"h-5 w-5 mr-2 text-blue-500"}),"Lead Scoring Analysis"]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-blue-900",children:["Current Score: ",t.score]}),n.jsx("p",{className:"text-sm text-blue-700",children:t.score>=80?"Hot Lead - High Priority":t.score>=60?"Warm Lead - Good Potential":t.score>=40?"Cool Lead - Needs Nurturing":"Cold Lead - Long-term Nurturing"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.score}),n.jsx("div",{className:"text-xs text-blue-500",children:"/ 100"})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsx("h5",{className:"font-semibold text-green-900 mb-1",children:"Strengths"}),n.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[((E=t.customFields)==null?void 0:E.budget)&&n.jsx("li",{children:"• Budget information provided"}),((A=t.customFields)==null?void 0:A.timeframe)&&n.jsx("li",{children:"• Clear purchase timeline"}),t.score>60&&n.jsx("li",{children:"• Good engagement level"}),t.source==="Customer Referral"&&n.jsx("li",{children:"• High-quality referral source"})]})]}),n.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg",children:[n.jsx("h5",{className:"font-semibold text-orange-900 mb-1",children:"Improvement Areas"}),n.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[!((C=t.customFields)!=null&&C.budget)&&n.jsx("li",{children:"• No budget information"}),t.score<60&&n.jsx("li",{children:"• Low engagement level"}),!t.assignedTo&&n.jsx("li",{children:"• No sales rep assigned"}),n.jsx("li",{children:"• Limited activity history"})]})]})]})]})})]})]}),n.jsxs(tt,{value:"automation",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Pn,{className:"h-5 w-5 mr-2 text-purple-500"}),"Nurture Sequences"]}),n.jsx(Be,{children:"Enroll this lead in automated nurturing sequences"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:o.filter(S=>S.isActive).map(S=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:S.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:S.description}),n.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[n.jsxs(Fe,{variant:"secondary",className:"text-xs",children:[S.steps.length," steps"]}),n.jsx(Fe,{variant:"outline",className:"text-xs",children:S.targetAudience})]})]}),n.jsx(J,{onClick:()=>b(S.id),size:"sm",children:"Enroll Lead"})]},S.id))})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs(je,{className:"flex items-center",children:[n.jsx(ur,{className:"h-5 w-5 mr-2 text-orange-500"}),"Smart Timing Recommendations"]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-900",children:"Best Contact Times"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Based on lead behavior: Tuesday-Thursday, 2-4 PM"})]}),n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-900",children:"Email Timing"}),n.jsx("p",{className:"text-sm text-green-700",children:"Send emails Tuesday/Wednesday mornings for best open rates"})]}),n.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-purple-900",children:"Follow-up Schedule"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Next follow-up recommended in 2-3 days based on engagement"})]})]})})]})]})]})]})}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:hB,setPrototypeOf:MI,isFrozen:Qse,getPrototypeOf:Jse,getOwnPropertyDescriptor:Zse}=Object;let{freeze:ba,seal:eo,create:mB}=Object,{apply:wC,construct:NC}=typeof Reflect<"u"&&Reflect;ba||(ba=function(t){return t});eo||(eo=function(t){return t});wC||(wC=function(t,r,s){return t.apply(r,s)});NC||(NC=function(t,r){return new t(...r)});const dy=ja(Array.prototype.forEach),eae=ja(Array.prototype.lastIndexOf),BI=ja(Array.prototype.pop),Qp=ja(Array.prototype.push),tae=ja(Array.prototype.splice),ib=ja(String.prototype.toLowerCase),BN=ja(String.prototype.toString),zI=ja(String.prototype.match),Jp=ja(String.prototype.replace),rae=ja(String.prototype.indexOf),nae=ja(String.prototype.trim),go=ja(Object.prototype.hasOwnProperty),ha=ja(RegExp.prototype.test),Zp=sae(TypeError);function ja(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return wC(e,t,s)}}function sae(e){return function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return NC(e,r)}}function cr(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ib;MI&&MI(e,null);let s=t.length;for(;s--;){let a=t[s];if(typeof a=="string"){const i=r(a);i!==a&&(Qse(t)||(t[s]=i),a=i)}e[a]=!0}return e}function aae(e){for(let t=0;t<e.length;t++)go(e,t)||(e[t]=null);return e}function Bl(e){const t=mB(null);for(const[r,s]of hB(e))go(e,r)&&(Array.isArray(s)?t[r]=aae(s):s&&typeof s=="object"&&s.constructor===Object?t[r]=Bl(s):t[r]=s);return t}function ev(e,t){for(;e!==null;){const s=Zse(e,t);if(s){if(s.get)return ja(s.get);if(typeof s.value=="function")return ja(s.value)}e=Jse(e)}function r(){return null}return r}const UI=ba(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zN=ba(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),UN=ba(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),iae=ba(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),VN=ba(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oae=ba(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),VI=ba(["#text"]),WI=ba(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),WN=ba(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qI=ba(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uy=ba(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),lae=eo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),cae=eo(/<%[\w\W]*|[\w\W]*%>/gm),dae=eo(/\$\{[\w\W]*/gm),uae=eo(/^data-[\-\w.\u00B7-\uFFFF]+$/),fae=eo(/^aria-[\-\w]+$/),pB=eo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hae=eo(/^(?:\w+script|data):/i),mae=eo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vB=eo(/^html$/i),pae=eo(/^[a-z][.\w]*(-[.\w]+)+$/i);var HI=Object.freeze({__proto__:null,ARIA_ATTR:fae,ATTR_WHITESPACE:mae,CUSTOM_ELEMENT:pae,DATA_ATTR:uae,DOCTYPE_NAME:vB,ERB_EXPR:cae,IS_ALLOWED_URI:pB,IS_SCRIPT_OR_DATA:hae,MUSTACHE_EXPR:lae,TMPLIT_EXPR:dae});const tv={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},vae=function(){return typeof window>"u"?null:window},gae=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const a="data-tt-policy-suffix";r&&r.hasAttribute(a)&&(s=r.getAttribute(a));const i="dompurify"+(s?"#"+s:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},GI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function gB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vae();const t=At=>gB(At);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==tv.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const s=r,a=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:h,trustedTypes:m}=e,v=c.prototype,g=ev(v,"cloneNode"),p=ev(v,"remove"),x=ev(v,"nextSibling"),b=ev(v,"childNodes"),y=ev(v,"parentNode");if(typeof o=="function"){const At=r.createElement("template");At.content&&At.content.ownerDocument&&(r=At.content.ownerDocument)}let j,E="";const{implementation:A,createNodeIterator:C,createDocumentFragment:S,getElementsByTagName:T}=r,{importNode:O}=s;let _=GI();t.isSupported=typeof hB=="function"&&typeof y=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:N,ERB_EXPR:D,TMPLIT_EXPR:I,DATA_ATTR:R,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:B,CUSTOM_ELEMENT:U}=HI;let{IS_ALLOWED_URI:q}=HI,W=null;const L=cr({},[...UI,...zN,...UN,...VN,...VI]);let V=null;const G=cr({},[...WI,...WN,...qI,...uy]);let Z=Object.seal(mB(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,he=null,me=!0,oe=!0,we=!1,ve=!0,pe=!1,De=!0,xe=!1,le=!1,re=!1,Se=!1,Ne=!1,ye=!1,$e=!0,rt=!1;const nt="user-content-";let vt=!0,Me=!1,Je={},dt=null;const xt=cr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let kt=null;const Pt=cr({},["audio","video","img","source","image","track"]);let Mt=null;const ct=cr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hr="http://www.w3.org/1998/Math/MathML",Gt="http://www.w3.org/2000/svg",Dr="http://www.w3.org/1999/xhtml";let lr=Dr,Er=!1,ps=null;const mr=cr({},[hr,Gt,Dr],BN);let Ca=cr({},["mi","mo","mn","ms","mtext"]),Wr=cr({},["annotation-xml"]);const Ja=cr({},["title","style","font","a","script"]);let la=null;const vn=["application/xhtml+xml","text/html"],Yt="text/html";let zt=null,Aa=null;const ss=r.createElement("form"),Za=function(Te){return Te instanceof RegExp||Te instanceof Function},Ea=function(){let Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Aa&&Aa===Te)){if((!Te||typeof Te!="object")&&(Te={}),Te=Bl(Te),la=vn.indexOf(Te.PARSER_MEDIA_TYPE)===-1?Yt:Te.PARSER_MEDIA_TYPE,zt=la==="application/xhtml+xml"?BN:ib,W=go(Te,"ALLOWED_TAGS")?cr({},Te.ALLOWED_TAGS,zt):L,V=go(Te,"ALLOWED_ATTR")?cr({},Te.ALLOWED_ATTR,zt):G,ps=go(Te,"ALLOWED_NAMESPACES")?cr({},Te.ALLOWED_NAMESPACES,BN):mr,Mt=go(Te,"ADD_URI_SAFE_ATTR")?cr(Bl(ct),Te.ADD_URI_SAFE_ATTR,zt):ct,kt=go(Te,"ADD_DATA_URI_TAGS")?cr(Bl(Pt),Te.ADD_DATA_URI_TAGS,zt):Pt,dt=go(Te,"FORBID_CONTENTS")?cr({},Te.FORBID_CONTENTS,zt):xt,ee=go(Te,"FORBID_TAGS")?cr({},Te.FORBID_TAGS,zt):Bl({}),he=go(Te,"FORBID_ATTR")?cr({},Te.FORBID_ATTR,zt):Bl({}),Je=go(Te,"USE_PROFILES")?Te.USE_PROFILES:!1,me=Te.ALLOW_ARIA_ATTR!==!1,oe=Te.ALLOW_DATA_ATTR!==!1,we=Te.ALLOW_UNKNOWN_PROTOCOLS||!1,ve=Te.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pe=Te.SAFE_FOR_TEMPLATES||!1,De=Te.SAFE_FOR_XML!==!1,xe=Te.WHOLE_DOCUMENT||!1,Se=Te.RETURN_DOM||!1,Ne=Te.RETURN_DOM_FRAGMENT||!1,ye=Te.RETURN_TRUSTED_TYPE||!1,re=Te.FORCE_BODY||!1,$e=Te.SANITIZE_DOM!==!1,rt=Te.SANITIZE_NAMED_PROPS||!1,vt=Te.KEEP_CONTENT!==!1,Me=Te.IN_PLACE||!1,q=Te.ALLOWED_URI_REGEXP||pB,lr=Te.NAMESPACE||Dr,Ca=Te.MATHML_TEXT_INTEGRATION_POINTS||Ca,Wr=Te.HTML_INTEGRATION_POINTS||Wr,Z=Te.CUSTOM_ELEMENT_HANDLING||{},Te.CUSTOM_ELEMENT_HANDLING&&Za(Te.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=Te.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Te.CUSTOM_ELEMENT_HANDLING&&Za(Te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=Te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Te.CUSTOM_ELEMENT_HANDLING&&typeof Te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=Te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pe&&(oe=!1),Ne&&(Se=!0),Je&&(W=cr({},VI),V=[],Je.html===!0&&(cr(W,UI),cr(V,WI)),Je.svg===!0&&(cr(W,zN),cr(V,WN),cr(V,uy)),Je.svgFilters===!0&&(cr(W,UN),cr(V,WN),cr(V,uy)),Je.mathMl===!0&&(cr(W,VN),cr(V,qI),cr(V,uy))),Te.ADD_TAGS&&(W===L&&(W=Bl(W)),cr(W,Te.ADD_TAGS,zt)),Te.ADD_ATTR&&(V===G&&(V=Bl(V)),cr(V,Te.ADD_ATTR,zt)),Te.ADD_URI_SAFE_ATTR&&cr(Mt,Te.ADD_URI_SAFE_ATTR,zt),Te.FORBID_CONTENTS&&(dt===xt&&(dt=Bl(dt)),cr(dt,Te.FORBID_CONTENTS,zt)),vt&&(W["#text"]=!0),xe&&cr(W,["html","head","body"]),W.table&&(cr(W,["tbody"]),delete ee.tbody),Te.TRUSTED_TYPES_POLICY){if(typeof Te.TRUSTED_TYPES_POLICY.createHTML!="function")throw Zp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Te.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Zp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');j=Te.TRUSTED_TYPES_POLICY,E=j.createHTML("")}else j===void 0&&(j=gae(m,a)),j!==null&&typeof E=="string"&&(E=j.createHTML(""));ba&&ba(Te),Aa=Te}},Rt=cr({},[...zN,...UN,...iae]),Pa=cr({},[...VN,...oae]),Si=function(Te){let at=y(Te);(!at||!at.tagName)&&(at={namespaceURI:lr,tagName:"template"});const jt=ib(Te.tagName),_r=ib(at.tagName);return ps[Te.namespaceURI]?Te.namespaceURI===Gt?at.namespaceURI===Dr?jt==="svg":at.namespaceURI===hr?jt==="svg"&&(_r==="annotation-xml"||Ca[_r]):!!Rt[jt]:Te.namespaceURI===hr?at.namespaceURI===Dr?jt==="math":at.namespaceURI===Gt?jt==="math"&&Wr[_r]:!!Pa[jt]:Te.namespaceURI===Dr?at.namespaceURI===Gt&&!Wr[_r]||at.namespaceURI===hr&&!Ca[_r]?!1:!Pa[jt]&&(Ja[jt]||!Rt[jt]):!!(la==="application/xhtml+xml"&&ps[Te.namespaceURI]):!1},ln=function(Te){Qp(t.removed,{element:Te});try{y(Te).removeChild(Te)}catch{p(Te)}},Qr=function(Te,at){try{Qp(t.removed,{attribute:at.getAttributeNode(Te),from:at})}catch{Qp(t.removed,{attribute:null,from:at})}if(at.removeAttribute(Te),Te==="is")if(Se||Ne)try{ln(at)}catch{}else try{at.setAttribute(Te,"")}catch{}},jn=function(Te){let at=null,jt=null;if(re)Te="<remove></remove>"+Te;else{const wn=zI(Te,/^[\r\n\t ]+/);jt=wn&&wn[0]}la==="application/xhtml+xml"&&lr===Dr&&(Te='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Te+"</body></html>");const _r=j?j.createHTML(Te):Te;if(lr===Dr)try{at=new h().parseFromString(_r,la)}catch{}if(!at||!at.documentElement){at=A.createDocument(lr,"template",null);try{at.documentElement.innerHTML=Er?E:_r}catch{}}const Bn=at.body||at.documentElement;return Te&&jt&&Bn.insertBefore(r.createTextNode(jt),Bn.childNodes[0]||null),lr===Dr?T.call(at,xe?"html":"body")[0]:xe?at.documentElement:Bn},Vs=function(Te){return C.call(Te.ownerDocument||Te,Te,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Wo=function(Te){return Te instanceof u&&(typeof Te.nodeName!="string"||typeof Te.textContent!="string"||typeof Te.removeChild!="function"||!(Te.attributes instanceof f)||typeof Te.removeAttribute!="function"||typeof Te.setAttribute!="function"||typeof Te.namespaceURI!="string"||typeof Te.insertBefore!="function"||typeof Te.hasChildNodes!="function")},Ci=function(Te){return typeof l=="function"&&Te instanceof l};function Mn(At,Te,at){dy(At,jt=>{jt.call(t,Te,at,Aa)})}const Ta=function(Te){let at=null;if(Mn(_.beforeSanitizeElements,Te,null),Wo(Te))return ln(Te),!0;const jt=zt(Te.nodeName);if(Mn(_.uponSanitizeElement,Te,{tagName:jt,allowedTags:W}),De&&Te.hasChildNodes()&&!Ci(Te.firstElementChild)&&ha(/<[/\w!]/g,Te.innerHTML)&&ha(/<[/\w!]/g,Te.textContent)||Te.nodeType===tv.progressingInstruction||De&&Te.nodeType===tv.comment&&ha(/<[/\w]/g,Te.data))return ln(Te),!0;if(!W[jt]||ee[jt]){if(!ee[jt]&&ei(jt)&&(Z.tagNameCheck instanceof RegExp&&ha(Z.tagNameCheck,jt)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(jt)))return!1;if(vt&&!dt[jt]){const _r=y(Te)||Te.parentNode,Bn=b(Te)||Te.childNodes;if(Bn&&_r){const wn=Bn.length;for(let vs=wn-1;vs>=0;--vs){const Ws=g(Bn[vs],!0);Ws.__removalCount=(Te.__removalCount||0)+1,_r.insertBefore(Ws,x(Te))}}}return ln(Te),!0}return Te instanceof c&&!Si(Te)||(jt==="noscript"||jt==="noembed"||jt==="noframes")&&ha(/<\/no(script|embed|frames)/i,Te.innerHTML)?(ln(Te),!0):(pe&&Te.nodeType===tv.text&&(at=Te.textContent,dy([N,D,I],_r=>{at=Jp(at,_r," ")}),Te.textContent!==at&&(Qp(t.removed,{element:Te.cloneNode()}),Te.textContent=at)),Mn(_.afterSanitizeElements,Te,null),!1)},_a=function(Te,at,jt){if($e&&(at==="id"||at==="name")&&(jt in r||jt in ss))return!1;if(!(oe&&!he[at]&&ha(R,at))){if(!(me&&ha(M,at))){if(!V[at]||he[at]){if(!(ei(Te)&&(Z.tagNameCheck instanceof RegExp&&ha(Z.tagNameCheck,Te)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(Te))&&(Z.attributeNameCheck instanceof RegExp&&ha(Z.attributeNameCheck,at)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(at))||at==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&ha(Z.tagNameCheck,jt)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(jt))))return!1}else if(!Mt[at]){if(!ha(q,Jp(jt,B,""))){if(!((at==="src"||at==="xlink:href"||at==="href")&&Te!=="script"&&rae(jt,"data:")===0&&kt[Te])){if(!(we&&!ha($,Jp(jt,B,"")))){if(jt)return!1}}}}}}return!0},ei=function(Te){return Te!=="annotation-xml"&&zI(Te,U)},ca=function(Te){Mn(_.beforeSanitizeAttributes,Te,null);const{attributes:at}=Te;if(!at||Wo(Te))return;const jt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V,forceKeepAttr:void 0};let _r=at.length;for(;_r--;){const Bn=at[_r],{name:wn,namespaceURI:vs,value:Ws}=Bn,qo=zt(wn),Qd=Ws;let In=wn==="value"?Qd:nae(Qd);if(jt.attrName=qo,jt.attrValue=In,jt.keepAttr=!0,jt.forceKeepAttr=void 0,Mn(_.uponSanitizeAttribute,Te,jt),In=jt.attrValue,rt&&(qo==="id"||qo==="name")&&(Qr(wn,Te),In=nt+In),De&&ha(/((--!?|])>)|<\/(style|title)/i,In)){Qr(wn,Te);continue}if(jt.forceKeepAttr)continue;if(!jt.keepAttr){Qr(wn,Te);continue}if(!ve&&ha(/\/>/i,In)){Qr(wn,Te);continue}pe&&dy([N,D,I],Jd=>{In=Jp(In,Jd," ")});const Sf=zt(Te.nodeName);if(!_a(Sf,qo,In)){Qr(wn,Te);continue}if(j&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!vs)switch(m.getAttributeType(Sf,qo)){case"TrustedHTML":{In=j.createHTML(In);break}case"TrustedScriptURL":{In=j.createScriptURL(In);break}}if(In!==Qd)try{vs?Te.setAttributeNS(vs,wn,In):Te.setAttribute(wn,In),Wo(Te)?ln(Te):BI(t.removed)}catch{Qr(wn,Te)}}Mn(_.afterSanitizeAttributes,Te,null)},Ai=function At(Te){let at=null;const jt=Vs(Te);for(Mn(_.beforeSanitizeShadowDOM,Te,null);at=jt.nextNode();)Mn(_.uponSanitizeShadowNode,at,null),Ta(at),ca(at),at.content instanceof i&&At(at.content);Mn(_.afterSanitizeShadowDOM,Te,null)};return t.sanitize=function(At){let Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},at=null,jt=null,_r=null,Bn=null;if(Er=!At,Er&&(At="<!-->"),typeof At!="string"&&!Ci(At))if(typeof At.toString=="function"){if(At=At.toString(),typeof At!="string")throw Zp("dirty is not a string, aborting")}else throw Zp("toString is not a function");if(!t.isSupported)return At;if(le||Ea(Te),t.removed=[],typeof At=="string"&&(Me=!1),Me){if(At.nodeName){const Ws=zt(At.nodeName);if(!W[Ws]||ee[Ws])throw Zp("root node is forbidden and cannot be sanitized in-place")}}else if(At instanceof l)at=jn("<!---->"),jt=at.ownerDocument.importNode(At,!0),jt.nodeType===tv.element&&jt.nodeName==="BODY"||jt.nodeName==="HTML"?at=jt:at.appendChild(jt);else{if(!Se&&!pe&&!xe&&At.indexOf("<")===-1)return j&&ye?j.createHTML(At):At;if(at=jn(At),!at)return Se?null:ye?E:""}at&&re&&ln(at.firstChild);const wn=Vs(Me?At:at);for(;_r=wn.nextNode();)Ta(_r),ca(_r),_r.content instanceof i&&Ai(_r.content);if(Me)return At;if(Se){if(Ne)for(Bn=S.call(at.ownerDocument);at.firstChild;)Bn.appendChild(at.firstChild);else Bn=at;return(V.shadowroot||V.shadowrootmode)&&(Bn=O.call(s,Bn,!0)),Bn}let vs=xe?at.outerHTML:at.innerHTML;return xe&&W["!doctype"]&&at.ownerDocument&&at.ownerDocument.doctype&&at.ownerDocument.doctype.name&&ha(vB,at.ownerDocument.doctype.name)&&(vs="<!DOCTYPE "+at.ownerDocument.doctype.name+`>
`+vs),pe&&dy([N,D,I],Ws=>{vs=Jp(vs,Ws," ")}),j&&ye?j.createHTML(vs):vs},t.setConfig=function(){let At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ea(At),le=!0},t.clearConfig=function(){Aa=null,le=!1},t.isValidAttribute=function(At,Te,at){Aa||Ea({});const jt=zt(At),_r=zt(Te);return _a(jt,_r,at)},t.addHook=function(At,Te){typeof Te=="function"&&Qp(_[At],Te)},t.removeHook=function(At,Te){if(Te!==void 0){const at=eae(_[At],Te);return at===-1?void 0:tae(_[At],at,1)[0]}return BI(_[At])},t.removeHooks=function(At){_[At]=[]},t.removeAllHooks=function(){_=GI()},t}var xae=gB();function KI({leadId:e,leadData:t,onClose:r}){const{emailTemplates:s,smsTemplates:a,communicationLogs:i,getCommunicationHistory:o}=fB(),[l,c]=w.useState("history"),[d,f]=w.useState(""),[u,h]=w.useState(""),[m,v]=w.useState(""),[g,p]=w.useState(""),[x,b]=w.useState(""),[y,j]=w.useState(!1),E=o(e),A=N=>{switch(N){case"sent":return n.jsx(hl,{className:"h-3 w-3 text-blue-500"});case"delivered":return n.jsx(an,{className:"h-3 w-3 text-green-500"});case"opened":return n.jsx(on,{className:"h-3 w-3 text-purple-500"});case"clicked":return n.jsx(an,{className:"h-3 w-3 text-green-600"});case"replied":return n.jsx(Pn,{className:"h-3 w-3 text-blue-600"});case"failed":return n.jsx(Oh,{className:"h-3 w-3 text-red-500"});default:return n.jsx(ur,{className:"h-3 w-3 text-gray-500"})}},C=N=>{switch(N){case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"delivered":return"bg-green-50 text-green-700 border-green-200";case"opened":return"bg-purple-50 text-purple-700 border-purple-200";case"clicked":return"bg-green-50 text-green-700 border-green-200";case"replied":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=(N,D)=>{var I;return N.replace(/\{\{first_name\}\}/g,D.firstName).replace(/\{\{last_name\}\}/g,D.lastName).replace(/\{\{company_name\}\}/g,"Renter Insight RV").replace(/\{\{rep_name\}\}/g,"Your Sales Representative").replace(/\{\{rep_phone\}\}/g,"(555) 123-4567").replace(/\{\{website_url\}\}/g,"https://renterinsight.com").replace(/\{\{budget\}\}/g,((I=D.customFields)==null?void 0:I.budget)||"your budget")},T=async()=>{j(!0);try{let N=u,D=m;if(d){const I=s.find(R=>R.id===d);I&&(N=S(I.subject,t),D=S(I.body,t))}await new Promise(I=>setTimeout(I,2e3)),h(""),v(""),f(""),console.log("Email sent:",{subject:N,body:D,to:t.email})}finally{j(!1)}},O=async()=>{j(!0);try{let N=x;if(g){const D=a.find(I=>I.id===g);D&&(N=S(D.message,t))}await new Promise(D=>setTimeout(D,1500)),b(""),p(""),console.log("SMS sent:",{message:N,to:t.phone})}finally{j(!1)}},_=(N,D)=>{if(D==="email"){f(N);const I=s.find(R=>R.id===N);I&&(h(S(I.subject,t)),v(S(I.body,t)))}else{p(N);const I=a.find(R=>R.id===N);I&&b(S(I.message,t))}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Communication Center"}),n.jsxs(Be,{children:["Manage communications for ",t.firstName," ",t.lastName]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs(Ar,{value:l,onValueChange:c,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"history",children:"History"}),n.jsx(Ze,{value:"email",children:"Send Email"}),n.jsx(Ze,{value:"sms",children:"Send SMS"})]}),n.jsx(tt,{value:"history",className:"space-y-4",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(ur,{className:"h-5 w-5 mr-2"}),"Communication History"]}),n.jsx(Be,{children:"All email and SMS communications with this lead"})]}),n.jsx(fe,{children:E.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Pn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No communication history yet"}),n.jsx("p",{className:"text-sm",children:"Start by sending an email or SMS"})]}):n.jsx("div",{className:"space-y-4",children:E.map((N,D)=>n.jsxs("div",{className:"relative",children:[D<E.length-1&&n.jsx("div",{className:"absolute left-4 top-12 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:Ge("flex-shrink-0 w-8 h-8 rounded-full border-2 bg-background flex items-center justify-center",N.type==="email"?"border-blue-200":"border-green-200"),children:N.type==="email"?n.jsx(on,{className:"h-4 w-4 text-blue-500"}):n.jsx(Pn,{className:"h-4 w-4 text-green-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"font-medium text-sm capitalize",children:[N.type," ",N.direction]}),n.jsxs(Fe,{className:Ge("ri-badge-status text-xs",C(N.status)),children:[A(N.status),n.jsx("span",{className:"ml-1",children:N.status})]})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:ft(N.sentAt)})]}),N.subject&&n.jsx("p",{className:"font-medium text-sm mb-1",children:N.subject}),n.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:xae.sanitize(N.content)}})}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Sent: ",ft(N.sentAt)]}),N.deliveredAt&&n.jsxs("span",{children:["Delivered: ",ft(N.deliveredAt)]}),N.openedAt&&n.jsxs("span",{children:["Opened: ",ft(N.openedAt)]}),N.clickedAt&&n.jsxs("span",{children:["Clicked: ",ft(N.clickedAt)]})]})]})]})]},N.id))})})]})}),n.jsx(tt,{value:"email",className:"space-y-4",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(on,{className:"h-5 w-5 mr-2 text-blue-500"}),"Send Email"]}),n.jsx(Be,{children:"Send personalized emails using templates or custom content"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Email Template (Optional)"}),n.jsxs(We,{value:d,onValueChange:N=>_(N,"email"),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Choose a template or write custom email"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"Custom Email"}),s.filter(N=>N.isActive).map(N=>n.jsxs(K,{value:N.id,children:[N.name," (",N.type,")"]},N.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"To"}),n.jsx(Pe,{value:t.email,disabled:!0,className:"bg-muted/50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Subject"}),n.jsx(Pe,{value:u,onChange:N=>h(N.target.value),placeholder:"Enter email subject"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Message"}),n.jsx(ir,{value:m,onChange:N=>v(N.target.value),placeholder:"Enter your email message",rows:8})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{last_name},", ",{company_name},", ",{rep_name}]}),n.jsxs(J,{onClick:T,disabled:y||!u||!m,children:[n.jsx(hl,{className:"h-4 w-4 mr-2"}),y?"Sending...":"Send Email"]})]})]})]})}),n.jsx(tt,{value:"sms",className:"space-y-4",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Pn,{className:"h-5 w-5 mr-2 text-green-500"}),"Send SMS"]}),n.jsx(Be,{children:"Send text messages using templates or custom content"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"SMS Template (Optional)"}),n.jsxs(We,{value:g,onValueChange:N=>_(N,"sms"),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Choose a template or write custom SMS"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"Custom SMS"}),a.filter(N=>N.isActive).map(N=>n.jsxs(K,{value:N.id,children:[N.name," (",N.type,")"]},N.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"To"}),n.jsx(Pe,{value:t.phone,disabled:!0,className:"bg-muted/50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Message"}),n.jsx(ir,{value:x,onChange:N=>b(N.target.value),placeholder:"Enter your SMS message",rows:4,maxLength:160}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:[x.length,"/160 characters"]}),n.jsx("div",{className:Ge("text-xs",x.length>160?"text-red-500":"text-muted-foreground"),children:x.length>160&&"Message too long"})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{company_name},", ",{rep_name}]}),n.jsxs(J,{onClick:O,disabled:y||!x||x.length>160,children:[n.jsx(hl,{className:"h-4 w-4 mr-2"}),y?"Sending...":"Send SMS"]})]})]})]})})]})})]})})}var xB={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,s)=>{e.exports=s()})(rs,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},a,i=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,l={},c=0,d={};function f(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var O=E(T);O.chunkSize=parseInt(O.chunkSize),T.step||T.chunk||(O.chunkSize=null),this._handle=new g(O),(this._handle.streamer=this)._config=O}).call(this,S),this.parseChunk=function(T,O){var _=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<_){let D=this._config.newline;D||(N=this._config.quoteChar||'"',D=this._handle.guessLineEndings(T,N)),T=[...T.split(D).slice(_)].join(D)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(T))!==void 0&&(T=N),this.isFirstChunk=!1,this._halted=!1;var _=this._partialLine+T,N=(this._partialLine="",this._handle.parse(_,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=N.meta.cursor,_=(this._finished||(this._partialLine=_.substring(T-this._baseIndex),this._baseIndex=T),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)s.postMessage({results:N,workerId:d.WORKER_ID,finished:_});else if(C(this._config.chunk)&&!O){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!_||!C(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),_||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(T){C(this._config.error)?this._config.error(T):o&&this._config.error&&s.postMessage({workerId:d.WORKER_ID,error:T,finished:!1})}}function u(S){var T;(S=S||{}).chunkSize||(S.chunkSize=d.RemoteChunkSize),f.call(this,S),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),i||(T.onload=A(this._chunkLoaded,this),T.onerror=A(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var O,_=this._config.downloadRequestHeaders;for(O in _)T.setRequestHeader(O,_[O])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+N));try{T.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=(O=>(O=O.getResponseHeader("Content-Range"))!==null?parseInt(O.substring(O.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function(O){O=T.statusText||O,this._sendError(new Error(O))}}function h(S){(S=S||{}).chunkSize||(S.chunkSize=d.LocalChunkSize),f.call(this,S);var T,O,_=typeof FileReader<"u";this.stream=function(N){this._input=N,O=N.slice||N.webkitSlice||N.mozSlice,_?((T=new FileReader).onload=A(this._chunkLoaded,this),T.onerror=A(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),N=O.call(N,this._start,D)),T.readAsText(N,this._config.encoding));_||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(T.error)}}function m(S){var T;f.call(this,S=S||{}),this.stream=function(O){return T=O,this._nextChunk()},this._nextChunk=function(){var O,_;if(!this._finished)return O=this._config.chunkSize,T=O?(_=T.substring(0,O),T.substring(O)):(_=T,""),this._finished=!T,this.parseChunk(_)}}function v(S){f.call(this,S=S||{});var T=[],O=!0,_=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):O=!0},this._streamData=A(function(N){try{T.push(typeof N=="string"?N:N.toString(this._config.encoding)),O&&(O=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(D){this._streamError(D)}},this),this._streamError=A(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=A(function(){this._streamCleanUp(),_=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(S){var T,O,_,N,D=Math.pow(2,53),I=-D,R=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,B=0,U=0,q=!1,W=!1,L=[],V={data:[],errors:[],meta:{}};function G(me){return S.skipEmptyLines==="greedy"?me.join("").trim()==="":me.length===1&&me[0].length===0}function Z(){if(V&&_&&(he("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),_=!1),S.skipEmptyLines&&(V.data=V.data.filter(function(ve){return!G(ve)})),ee()){let ve=function(pe,De){C(S.transformHeader)&&(pe=S.transformHeader(pe,De)),L.push(pe)};if(V)if(Array.isArray(V.data[0])){for(var me=0;ee()&&me<V.data.length;me++)V.data[me].forEach(ve);V.data.splice(0,1)}else V.data.forEach(ve)}function oe(ve,pe){for(var De=S.header?{}:[],xe=0;xe<ve.length;xe++){var le=xe,re=ve[xe],re=((Se,Ne)=>(ye=>(S.dynamicTypingFunction&&S.dynamicTyping[ye]===void 0&&(S.dynamicTyping[ye]=S.dynamicTypingFunction(ye)),(S.dynamicTyping[ye]||S.dynamicTyping)===!0))(Se)?Ne==="true"||Ne==="TRUE"||Ne!=="false"&&Ne!=="FALSE"&&((ye=>{if(R.test(ye)&&(ye=parseFloat(ye),I<ye&&ye<D))return 1})(Ne)?parseFloat(Ne):M.test(Ne)?new Date(Ne):Ne===""?null:Ne):Ne)(le=S.header?xe>=L.length?"__parsed_extra":L[xe]:le,re=S.transform?S.transform(re,le):re);le==="__parsed_extra"?(De[le]=De[le]||[],De[le].push(re)):De[le]=re}return S.header&&(xe>L.length?he("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+xe,U+pe):xe<L.length&&he("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+xe,U+pe)),De}var we;V&&(S.header||S.dynamicTyping||S.transform)&&(we=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(oe),we=V.data.length):V.data=oe(V.data,0),S.header&&V.meta&&(V.meta.fields=L),U+=we)}function ee(){return S.header&&L.length===0}function he(me,oe,we,ve){me={type:me,code:oe,message:we},ve!==void 0&&(me.row=ve),V.errors.push(me)}C(S.step)&&(N=S.step,S.step=function(me){V=me,ee()?Z():(Z(),V.data.length!==0&&(B+=me.data.length,S.preview&&B>S.preview?O.abort():(V.data=V.data[0],N(V,$))))}),this.parse=function(me,oe,we){var ve=S.quoteChar||'"',ve=(S.newline||(S.newline=this.guessLineEndings(me,ve)),_=!1,S.delimiter?C(S.delimiter)&&(S.delimiter=S.delimiter(me),V.meta.delimiter=S.delimiter):((ve=((pe,De,xe,le,re)=>{var Se,Ne,ye,$e;re=re||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var rt=0;rt<re.length;rt++){for(var nt,vt=re[rt],Me=0,Je=0,dt=0,xt=(ye=void 0,new x({comments:le,delimiter:vt,newline:De,preview:10}).parse(pe)),kt=0;kt<xt.data.length;kt++)xe&&G(xt.data[kt])?dt++:(nt=xt.data[kt].length,Je+=nt,ye===void 0?ye=nt:0<nt&&(Me+=Math.abs(nt-ye),ye=nt));0<xt.data.length&&(Je/=xt.data.length-dt),(Ne===void 0||Me<=Ne)&&($e===void 0||$e<Je)&&1.99<Je&&(Ne=Me,Se=vt,$e=Je)}return{successful:!!(S.delimiter=Se),bestDelimiter:Se}})(me,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=ve.bestDelimiter:(_=!0,S.delimiter=d.DefaultDelimiter),V.meta.delimiter=S.delimiter),E(S));return S.preview&&S.header&&ve.preview++,T=me,O=new x(ve),V=O.parse(T,oe,we),Z(),q?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,O.abort(),T=C(S.chunk)?"":T.substring(O.getCharIndex())},this.resume=function(){$.streamer._halted?(q=!1,$.streamer.parseChunk(T,!0)):setTimeout($.resume,3)},this.aborted=function(){return W},this.abort=function(){W=!0,O.abort(),V.meta.aborted=!0,C(S.complete)&&S.complete(V),T=""},this.guessLineEndings=function(pe,ve){pe=pe.substring(0,1048576);var ve=new RegExp(p(ve)+"([^]*?)"+p(ve),"gm"),we=(pe=pe.replace(ve,"")).split("\r"),ve=pe.split(`
`),pe=1<ve.length&&ve[0].length<we[0].length;if(we.length===1||pe)return`
`;for(var De=0,xe=0;xe<we.length;xe++)we[xe][0]===`
`&&De++;return De>=we.length/2?`\r
`:"\r"}}function p(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(S){var T=(S=S||{}).delimiter,O=S.newline,_=S.comments,N=S.step,D=S.preview,I=S.fastMode,R=null,M=!1,$=S.quoteChar==null?'"':S.quoteChar,B=$;if(S.escapeChar!==void 0&&(B=S.escapeChar),(typeof T!="string"||-1<d.BAD_DELIMITERS.indexOf(T))&&(T=","),_===T)throw new Error("Comment character same as delimiter");_===!0?_="#":(typeof _!="string"||-1<d.BAD_DELIMITERS.indexOf(_))&&(_=!1),O!==`
`&&O!=="\r"&&O!==`\r
`&&(O=`
`);var U=0,q=!1;this.parse=function(W,L,V){if(typeof W!="string")throw new Error("Input must be a string");var G=W.length,Z=T.length,ee=O.length,he=_.length,me=C(N),oe=[],we=[],ve=[],pe=U=0;if(!W)return Me();if(I||I!==!1&&W.indexOf($)===-1){for(var De=W.split(O),xe=0;xe<De.length;xe++){if(ve=De[xe],U+=ve.length,xe!==De.length-1)U+=O.length;else if(V)return Me();if(!_||ve.substring(0,he)!==_){if(me){if(oe=[],$e(ve.split(T)),Je(),q)return Me()}else $e(ve.split(T));if(D&&D<=xe)return oe=oe.slice(0,D),Me(!0)}}return Me()}for(var le=W.indexOf(T,U),re=W.indexOf(O,U),Se=new RegExp(p(B)+p($),"g"),Ne=W.indexOf($,U);;)if(W[U]===$)for(Ne=U,U++;;){if((Ne=W.indexOf($,Ne+1))===-1)return V||we.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:U}),nt();if(Ne===G-1)return nt(W.substring(U,Ne).replace(Se,$));if($===B&&W[Ne+1]===B)Ne++;else if($===B||Ne===0||W[Ne-1]!==B){le!==-1&&le<Ne+1&&(le=W.indexOf(T,Ne+1));var ye=rt((re=re!==-1&&re<Ne+1?W.indexOf(O,Ne+1):re)===-1?le:Math.min(le,re));if(W.substr(Ne+1+ye,Z)===T){ve.push(W.substring(U,Ne).replace(Se,$)),W[U=Ne+1+ye+Z]!==$&&(Ne=W.indexOf($,U)),le=W.indexOf(T,U),re=W.indexOf(O,U);break}if(ye=rt(re),W.substring(Ne+1+ye,Ne+1+ye+ee)===O){if(ve.push(W.substring(U,Ne).replace(Se,$)),vt(Ne+1+ye+ee),le=W.indexOf(T,U),Ne=W.indexOf($,U),me&&(Je(),q))return Me();if(D&&oe.length>=D)return Me(!0);break}we.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:U}),Ne++}}else if(_&&ve.length===0&&W.substring(U,U+he)===_){if(re===-1)return Me();U=re+ee,re=W.indexOf(O,U),le=W.indexOf(T,U)}else if(le!==-1&&(le<re||re===-1))ve.push(W.substring(U,le)),U=le+Z,le=W.indexOf(T,U);else{if(re===-1)break;if(ve.push(W.substring(U,re)),vt(re+ee),me&&(Je(),q))return Me();if(D&&oe.length>=D)return Me(!0)}return nt();function $e(dt){oe.push(dt),pe=U}function rt(dt){var xt=0;return xt=dt!==-1&&(dt=W.substring(Ne+1,dt))&&dt.trim()===""?dt.length:xt}function nt(dt){return V||(dt===void 0&&(dt=W.substring(U)),ve.push(dt),U=G,$e(ve),me&&Je()),Me()}function vt(dt){U=dt,$e(ve),ve=[],re=W.indexOf(O,U)}function Me(dt){if(S.header&&!L&&oe.length&&!M){var xt=oe[0],kt=Object.create(null),Pt=new Set(xt);let Mt=!1;for(let ct=0;ct<xt.length;ct++){let hr=xt[ct];if(kt[hr=C(S.transformHeader)?S.transformHeader(hr,ct):hr]){let Gt,Dr=kt[hr];for(;Gt=hr+"_"+Dr,Dr++,Pt.has(Gt););Pt.add(Gt),xt[ct]=Gt,kt[hr]++,Mt=!0,(R=R===null?{}:R)[Gt]=hr}else kt[hr]=1,xt[ct]=hr;Pt.add(hr)}Mt&&console.warn("Duplicate headers found and renamed."),M=!0}return{data:oe,errors:we,meta:{delimiter:T,linebreak:O,aborted:q,truncated:!!dt,cursor:pe+(L||0),renamedHeaders:R}}}function Je(){N(Me()),oe=[],we=[]}},this.abort=function(){q=!0},this.getCharIndex=function(){return U}}function b(S){var T=S.data,O=l[T.workerId],_=!1;if(T.error)O.userError(T.error,T.file);else if(T.results&&T.results.data){var N={abort:function(){_=!0,y(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(C(O.userStep)){for(var D=0;D<T.results.data.length&&(O.userStep({data:T.results.data[D],errors:T.results.errors,meta:T.results.meta},N),!_);D++);delete T.results}else C(O.userChunk)&&(O.userChunk(T.results,N,T.file),delete T.results)}T.finished&&!_&&y(T.workerId,T.results)}function y(S,T){var O=l[S];C(O.userComplete)&&O.userComplete(T),O.terminate(),delete l[S]}function j(){throw new Error("Not implemented.")}function E(S){if(typeof S!="object"||S===null)return S;var T,O=Array.isArray(S)?[]:{};for(T in S)O[T]=E(S[T]);return O}function A(S,T){return function(){S.apply(T,arguments)}}function C(S){return typeof S=="function"}return d.parse=function(S,T){var O=(T=T||{}).dynamicTyping||!1;if(C(O)&&(T.dynamicTypingFunction=O,O={}),T.dynamicTyping=O,T.transform=!!C(T.transform)&&T.transform,!T.worker||!d.WORKERS_SUPPORTED)return O=null,d.NODE_STREAM_INPUT,typeof S=="string"?(S=(_=>_.charCodeAt(0)!==65279?_:_.slice(1))(S),O=new(T.download?u:m)(T)):S.readable===!0&&C(S.read)&&C(S.on)?O=new v(T):(s.File&&S instanceof File||S instanceof Object)&&(O=new h(T)),O.stream(S);(O=(()=>{var _;return!!d.WORKERS_SUPPORTED&&(_=(()=>{var N=s.URL||s.webkitURL||null,D=r.toString();return d.BLOB_URL||(d.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(_=new s.Worker(_)).onmessage=b,_.id=c++,l[_.id]=_)})()).userStep=T.step,O.userChunk=T.chunk,O.userComplete=T.complete,O.userError=T.error,T.step=C(T.step),T.chunk=C(T.chunk),T.complete=C(T.complete),T.error=C(T.error),delete T.worker,O.postMessage({input:S,config:T,workerId:O.id})},d.unparse=function(S,T){var O=!1,_=!0,N=",",D=`\r
`,I='"',R=I+I,M=!1,$=null,B=!1,U=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||d.BAD_DELIMITERS.filter(function(L){return T.delimiter.indexOf(L)!==-1}).length||(N=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||(O=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(M=T.skipEmptyLines),typeof T.newline=="string"&&(D=T.newline),typeof T.quoteChar=="string"&&(I=T.quoteChar),typeof T.header=="boolean"&&(_=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");$=T.columns}T.escapeChar!==void 0&&(R=T.escapeChar+I),T.escapeFormulae instanceof RegExp?B=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(B=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(I),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return q(null,S,M);if(typeof S[0]=="object")return q($||Object.keys(S[0]),S,M)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||$),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),q(S.fields||[],S.data||[],M);throw new Error("Unable to serialize unrecognized input");function q(L,V,G){var Z="",ee=(typeof L=="string"&&(L=JSON.parse(L)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(L)&&0<L.length),he=!Array.isArray(V[0]);if(ee&&_){for(var me=0;me<L.length;me++)0<me&&(Z+=N),Z+=W(L[me],me);0<V.length&&(Z+=D)}for(var oe=0;oe<V.length;oe++){var we=(ee?L:V[oe]).length,ve=!1,pe=ee?Object.keys(V[oe]).length===0:V[oe].length===0;if(G&&!ee&&(ve=G==="greedy"?V[oe].join("").trim()==="":V[oe].length===1&&V[oe][0].length===0),G==="greedy"&&ee){for(var De=[],xe=0;xe<we;xe++){var le=he?L[xe]:xe;De.push(V[oe][le])}ve=De.join("").trim()===""}if(!ve){for(var re=0;re<we;re++){0<re&&!pe&&(Z+=N);var Se=ee&&he?L[re]:re;Z+=W(V[oe][Se],re)}oe<V.length-1&&(!G||0<we&&!pe)&&(Z+=D)}}return Z}function W(L,V){var G,Z;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(Z=!1,B&&typeof L=="string"&&B.test(L)&&(L="'"+L,Z=!0),G=L.toString().replace(U,R),(Z=Z||O===!0||typeof O=="function"&&O(L,V)||Array.isArray(O)&&O[V]||((ee,he)=>{for(var me=0;me<he.length;me++)if(-1<ee.indexOf(he[me]))return!0;return!1})(G,d.BAD_DELIMITERS)||-1<G.indexOf(N)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?I+G+I:G)}},d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!s.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=x,d.ParserHandle=g,d.NetworkStreamer=u,d.FileStreamer=h,d.StringStreamer=m,d.ReadableStreamStreamer=v,s.jQuery&&((a=s.jQuery).fn.parse=function(S){var T=S.config||{},O=[];return this.each(function(D){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)O.push({file:this.files[I],inputElem:this,instanceConfig:a.extend({},T)})}),_(),this;function _(){if(O.length===0)C(S.complete)&&S.complete();else{var D,I,R,M,$=O[0];if(C(S.before)){var B=S.before($.file,$.inputElem);if(typeof B=="object"){if(B.action==="abort")return D="AbortError",I=$.file,R=$.inputElem,M=B.reason,void(C(S.error)&&S.error({name:D},I,R,M));if(B.action==="skip")return void N();typeof B.config=="object"&&($.instanceConfig=a.extend($.instanceConfig,B.config))}else if(B==="skip")return void N()}var U=$.instanceConfig.complete;$.instanceConfig.complete=function(q){C(U)&&U(q,$.file,$.inputElem),N()},d.parse($.file,$.instanceConfig)}}function N(){O.splice(0,1),_()}}),o&&(s.onmessage=function(S){S=S.data,d.WORKER_ID===void 0&&S&&(d.WORKER_ID=S.workerId),typeof S.input=="string"?s.postMessage({workerId:d.WORKER_ID,results:d.parse(S.input,S.config),finished:!0}):(s.File&&S.input instanceof File||S.input instanceof Object)&&(S=d.parse(S.input,S.config))&&s.postMessage({workerId:d.WORKER_ID,results:S,finished:!0})}),(u.prototype=Object.create(f.prototype)).constructor=u,(h.prototype=Object.create(f.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(v.prototype=Object.create(f.prototype)).constructor=v,d})})(xB);var yae=xB.exports;const tm=kr(yae);function Ud(){const[e,t]=w.useState([]),[r,s]=w.useState(!1);w.useEffect(()=>{a()},[]);const a=()=>{const m=En("renter-insight-vehicles",[{id:"1",vin:"1FDXE4FS8KDC12345",make:"Forest River",model:"Georgetown",year:2024,type:bt.MOTORHOME,status:tr.AVAILABLE,price:125e3,cost:95e3,location:"Lot A-15",features:["Slide-out","Generator","Solar Panel"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")},{id:"2",vin:"1FDXE4FS8KDC67890",make:"Winnebago",model:"View",year:2023,type:bt.RV,status:tr.AVAILABLE,price:89e3,cost:72e3,location:"Lot B-08",features:["Compact Design","Fuel Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-12")},{id:"3",vin:"1FDXE4FS8KDC11111",make:"Jayco",model:"Eagle",year:2024,type:bt.FIFTH_WHEEL,status:tr.AVAILABLE,price:75e3,cost:58e3,location:"Lot C-12",features:["Bunk Beds","Outdoor Kitchen","Fireplace"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-10")},{id:"4",vin:"1FDXE4FS8KDC22222",make:"Airstream",model:"Flying Cloud",year:2024,type:bt.TRAVEL_TRAILER,status:tr.AVAILABLE,price:95e3,cost:78e3,location:"Lot D-05",features:["Aluminum Construction","Premium Interior","Smart Technology"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-08")},{id:"5",vin:"1FDXE4FS8KDC33333",make:"Grand Design",model:"Momentum",year:2023,type:bt.TOY_HAULER,status:tr.AVAILABLE,price:11e4,cost:88e3,location:"Lot E-18",features:["Garage Space","Fuel Station","Generator"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-05")},{id:"6",vin:"MH12345678901234",make:"Clayton Homes",model:"Inspiration",year:2024,type:bt.DOUBLE_WIDE,status:tr.AVAILABLE,price:125e3,cost:95e3,location:"MH Section A-10",features:["3 Bedroom","2 Bathroom","Open Floor Plan","Energy Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{length:"76",width:"28",squareFootage:"2128",constructionType:"Manufactured",roofType:"Shingle",exteriorSiding:"Vinyl",insulationRating:"R-21"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);t(m)},i=m=>{rn("renter-insight-vehicles",m)};return{vehicles:e,loading:r,getAvailableVehicles:()=>e.filter(m=>m.status===tr.AVAILABLE),getVehicleById:m=>e.find(v=>v.id===m),updateVehicleStatus:async(m,v)=>{const g=e.map(p=>p.id===m?{...p,status:v,updatedAt:new Date}:p);t(g),i(g)},createVehicle:async m=>{s(!0);try{const v={id:Math.random().toString(36).substr(2,9),vin:m.vin||"",make:m.make||"",model:m.model||"",year:m.year||new Date().getFullYear(),type:m.type||bt.RV,status:tr.AVAILABLE,price:m.price||0,cost:m.cost||0,location:m.location||"",features:m.features||[],images:m.images||[],customFields:m.customFields||{},createdAt:new Date,updatedAt:new Date},g=[...e,v];return t(g),i(g),v}finally{s(!1)}},deleteVehicle:async m=>{const v=e.filter(g=>g.id!==m);t(v),i(v)},importVehiclesFromCSV:async m=>new Promise((v,g)=>{tm.parse(m,{header:!0,skipEmptyLines:!0,complete:p=>{const x=p.data.map(b=>({vin:b.vin||"",make:b.make||"",model:b.model||"",year:parseInt(b.year)||new Date().getFullYear(),type:b.type||bt.RV,status:b.status||tr.AVAILABLE,price:parseFloat(b.price)||0,cost:parseFloat(b.cost)||0,location:b.location||"",features:b.features?b.features.split(",").map(y=>y.trim()):[],images:[],customFields:{exteriorColor:b.exteriorColor||"",interiorColor:b.interiorColor||"",length:b.length||"",weight:b.weight||"",sleeps:b.sleeps||"",slideouts:b.slideouts||"",fuelType:b.fuelType||"",mileage:b.mileage||"",condition:b.condition||"New"}}));v(x)},error:p=>{g(p)}})}),exportVehiclesToCSV:()=>{const m=e.map(g=>{var p,x,b,y,j,E,A,C,S;return{id:g.id,vin:g.vin,make:g.make,model:g.model,year:g.year,type:g.type,status:g.status,price:g.price,cost:g.cost,location:g.location,features:g.features.join(", "),exteriorColor:((p=g.customFields)==null?void 0:p.exteriorColor)||"",interiorColor:((x=g.customFields)==null?void 0:x.interiorColor)||"",length:((b=g.customFields)==null?void 0:b.length)||"",weight:((y=g.customFields)==null?void 0:y.weight)||"",sleeps:((j=g.customFields)==null?void 0:j.sleeps)||"",slideouts:((E=g.customFields)==null?void 0:E.slideouts)||"",fuelType:((A=g.customFields)==null?void 0:A.fuelType)||"",mileage:((C=g.customFields)==null?void 0:C.mileage)||"",condition:((S=g.customFields)==null?void 0:S.condition)||""}});return tm.unparse(m)}}}const rv=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"}],bae=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0}];function yB({quote:e,customerId:t,onSave:r,onCancel:s}){const{toast:a}=_t(),{getAvailableVehicles:i,getVehicleById:o}=Ud(),[l,c]=w.useState(!1),[d,f]=w.useState("items"),[u,h]=w.useState({customerId:t,validUntil:new Date(Date.now()+30*24*60*60*1e3),notes:"",terms:"Payment due within 30 days. All sales final.",items:[],subtotal:0,totalDiscount:0,tax:0,taxRate:.08,total:0}),[m,v]=w.useState(""),[g,p]=w.useState(!1),[x,b]=w.useState(""),[y,j]=w.useState({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),E=i();w.useEffect(()=>{e&&h($=>({...$,...e}))},[e]),w.useEffect(()=>{A()},[u.items,u.taxRate]);const A=()=>{const $=u.items.reduce((L,V)=>L+V.total,0),B=u.items.reduce((L,V)=>{const G=V.discountType==="percentage"?V.quantity*V.unitPrice*V.discount/100:V.discount*V.quantity;return L+G},0),U=$-B,q=U*u.taxRate,W=U+q;h(L=>({...L,subtotal:$,totalDiscount:B,tax:q,total:W}))},C=()=>{if(!y.description||!y.unitPrice){a({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const $={id:Math.random().toString(36).substr(2,9),description:y.description,quantity:y.quantity||1,unitPrice:y.unitPrice||0,discount:y.discount||0,discountType:y.discountType||"percentage",total:O(y)};h(B=>({...B,items:[...B.items,$]})),j({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),v(""),p(!1)},S=$=>{const B=o($);if(!B)return;const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:`${B.year} ${B.make} ${B.model}`,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price};h(q=>({...q,items:[...q.items,U]})),b(""),a({title:"Vehicle Added",description:`${B.year} ${B.make} ${B.model} added to quote`})},T=$=>{const B=rv.find(U=>U.id===$);if(B){if(B.isBundle&&B.bundleItems){const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:B.description,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price,isBundle:!0,bundleItems:B.bundleItems.map(q=>{const W=rv.find(L=>L.id===q.productId);return{id:Math.random().toString(36).substr(2,9),productId:q.productId,description:(W==null?void 0:W.name)||"",quantity:q.quantity,unitPrice:(W==null?void 0:W.price)||0,discount:0,discountType:"percentage",total:((W==null?void 0:W.price)||0)*q.quantity}})};h(q=>({...q,items:[...q.items,U]}))}else{const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:B.name,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price};h(q=>({...q,items:[...q.items,U]}))}D()}},O=$=>{const B=$.quantity*$.unitPrice,U=$.discountType==="percentage"?B*($.discount/100):$.discount*$.quantity;return B-U},_=($,B)=>{h(U=>({...U,items:U.items.map(q=>{if(q.id===$){const W={...q,...B};return W.total=O(W),W}return q})}))},N=$=>{h(B=>({...B,items:B.items.filter(U=>U.id!==$)}))},D=()=>{const $=u.items.filter(U=>{var q;return((q=rv.find(W=>W.id===U.productId))==null?void 0:q.category)==="accessory"});$.length>=3&&$.forEach(U=>{_(U.id,{discount:10,discountType:"percentage"})}),u.items.filter(U=>U.isBundle).forEach(U=>{_(U.id,{discount:500,discountType:"fixed"})})},I=async()=>{c(!0);try{await new Promise(W=>setTimeout(W,2e3));const $=R(),B=new Blob([$],{type:"text/plain"}),U=URL.createObjectURL(B),q=document.createElement("a");q.href=U,q.download=`quote-${Date.now()}.txt`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(U),a({title:"PDF Generated",description:"Quote PDF has been downloaded successfully"})}catch{a({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}finally{c(!1)}},R=()=>`
QUOTE DOCUMENT
==============

Customer ID: ${u.customerId}
Valid Until: ${u.validUntil.toLocaleDateString()}

LINE ITEMS:
-----------
${u.items.map($=>{var B;return`
${$.description}
Quantity: ${$.quantity} x ${Ie($.unitPrice)}
${$.discount>0?`Discount: ${$.discount}${$.discountType==="percentage"?"%":" fixed"}`:""}
Total: ${Ie($.total)}
${$.isBundle?`
  Bundle Items:
  ${((B=$.bundleItems)==null?void 0:B.map(U=>`  - ${U.description} (${U.quantity}x)`).join(`
  `))||""}
`:""}
`}).join(`
`)}

TOTALS:
-------
Subtotal: ${Ie(u.subtotal)}
Total Discount: ${Ie(u.totalDiscount)}
Tax (${(u.taxRate*100).toFixed(1)}%): ${Ie(u.tax)}
TOTAL: ${Ie(u.total)}

Notes: ${u.notes}
Terms: ${u.terms}
    `,M=async()=>{if(u.items.length===0){a({title:"Validation Error",description:"At least one line item is required",variant:"destructive"});return}c(!0);try{const $={...u,customerId:u.customerId||t};await r($),a({title:"Success",description:"Quote saved successfully"})}catch{a({title:"Error",description:"Failed to save quote",variant:"destructive"})}finally{c(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl flex items-center",children:[n.jsx(Ns,{className:"h-5 w-5 mr-2 text-blue-500"}),e?"Edit Quote":"Create Quote"]}),n.jsx(Be,{children:"Build a detailed quote with line items, pricing rules, and bundled products"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{children:[n.jsxs(Ar,{value:d,onValueChange:f,className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-4",children:[n.jsx(Ze,{value:"items",children:"Line Items"}),n.jsx(Ze,{value:"products",children:"Products"}),n.jsx(Ze,{value:"pricing",children:"Pricing Rules"}),n.jsx(Ze,{value:"details",children:"Quote Details"})]}),n.jsxs(tt,{value:"items",className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Quote Line Items"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(We,{value:x,onValueChange:b,children:[n.jsx(Ue,{className:"w-64",children:n.jsx(qe,{placeholder:"Add vehicle from inventory"})}),n.jsx(Ve,{children:E.map($=>n.jsxs(K,{value:$.id,children:[$.year," ",$.make," ",$.model," - ",Ie($.price)]},$.id))})]}),x&&n.jsxs(J,{onClick:()=>S(x),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Vehicle"]}),n.jsxs(J,{onClick:()=>p(!0),size:"sm",variant:"outline",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Custom Item"]})]})]}),g&&n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Description"}),n.jsx(Pe,{value:y.description||"",onChange:$=>j(B=>({...B,description:$.target.value})),placeholder:"Item description"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Unit Price"}),n.jsx(Pe,{type:"number",value:y.unitPrice||"",onChange:$=>j(B=>({...B,unitPrice:parseFloat($.target.value)||0})),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Quantity"}),n.jsx(Pe,{type:"number",value:y.quantity||1,onChange:$=>j(B=>({...B,quantity:parseInt($.target.value)||1})),min:"1"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Discount"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{type:"number",value:y.discount||0,onChange:$=>j(B=>({...B,discount:parseFloat($.target.value)||0})),placeholder:"0"}),n.jsxs(We,{value:y.discountType,onValueChange:$=>j(B=>({...B,discountType:$})),children:[n.jsx(Ue,{className:"w-32",children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"percentage",children:"%"}),n.jsx(K,{value:"fixed",children:"$"})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx(J,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),n.jsx(J,{onClick:C,children:"Add Item"})]})]})}),n.jsxs("div",{className:"space-y-4",children:[u.items.map(($,B)=>n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Description"}),n.jsx(Pe,{value:$.description,onChange:U=>_($.id,{description:U.target.value})}),$.isBundle&&n.jsxs(Fe,{className:"mt-1 bg-purple-50 text-purple-700 border-purple-200",children:[n.jsx(ia,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Quantity"}),n.jsx(Pe,{type:"number",value:$.quantity,onChange:U=>_($.id,{quantity:parseInt(U.target.value)||1}),min:"1"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Unit Price"}),n.jsx(Pe,{type:"number",value:$.unitPrice,onChange:U=>_($.id,{unitPrice:parseFloat(U.target.value)||0}),step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Discount"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{type:"number",value:$.discount,onChange:U=>_($.id,{discount:parseFloat(U.target.value)||0}),step:"0.01"}),n.jsxs(We,{value:$.discountType,onValueChange:U=>_($.id,{discountType:U}),children:[n.jsx(Ue,{className:"w-16",children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"percentage",children:"%"}),n.jsx(K,{value:"fixed",children:"$"})]})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),n.jsx("div",{className:"font-bold text-lg",children:Ie($.total)})]}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>N($.id),children:n.jsx($n,{className:"h-4 w-4"})})]})]}),$.isBundle&&$.bundleItems&&n.jsxs("div",{className:"mt-4 pl-4 border-l-2 border-purple-200",children:[n.jsx("h4",{className:"text-sm font-semibold text-purple-700 mb-2",children:"Bundle Contents:"}),n.jsx("div",{className:"space-y-2",children:$.bundleItems.map(U=>n.jsxs("div",{className:"flex items-center justify-between text-sm bg-purple-50 p-2 rounded",children:[n.jsx("span",{children:U.description}),n.jsxs("span",{children:[U.quantity,"x ",Ie(U.unitPrice)]})]},U.id))})]})]})},$.id)),u.items.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No line items added yet"}),n.jsx("p",{className:"text-sm",children:"Add products or custom items to build your quote"})]})]}),u.items.length>0&&n.jsx(ue,{className:"bg-muted/30",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Ie(u.subtotal)})]}),n.jsxs("div",{className:"flex justify-between text-red-600",children:[n.jsx("span",{children:"Total Discount:"}),n.jsxs("span",{children:["-",Ie(u.totalDiscount)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",(u.taxRate*100).toFixed(1),"%):"]}),n.jsx("span",{children:Ie(u.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Ie(u.total)})]})]})})})]}),n.jsx(tt,{value:"products",className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Inventory & Products"}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h4",{className:"text-md font-semibold mb-3 text-blue-600",children:"Available Vehicles"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:E.map($=>n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsxs("h4",{className:"font-semibold",children:[$.year," ",$.make," ",$.model]}),n.jsx(Fe,{className:"bg-blue-50 text-blue-700 border-blue-200",children:$.type.replace("_"," ").toUpperCase()})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["VIN: ",$.vin]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Location: ",$.location]}),n.jsx("div",{className:"text-lg font-bold text-primary",children:Ie($.price)}),$.features.length>0&&n.jsx("div",{className:"mt-3",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[$.features.slice(0,3).map((B,U)=>n.jsx(Fe,{variant:"outline",className:"text-xs",children:B},U)),$.features.length>3&&n.jsxs(Fe,{variant:"outline",className:"text-xs",children:["+",$.features.length-3," more"]})]})})]}),n.jsxs(J,{onClick:()=>S($.id),size:"sm",className:"ml-4",children:[n.jsx(Et,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},$.id))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-semibold mb-3 text-green-600",children:"Available Products & Services"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:rv.map($=>n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("h4",{className:"font-semibold",children:$.name}),$.isBundle&&n.jsxs(Fe,{className:"bg-purple-50 text-purple-700 border-purple-200",children:[n.jsx(ia,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:$.description}),n.jsx("div",{className:"text-lg font-bold text-primary",children:Ie($.price)}),$.isBundle&&$.bundleItems&&n.jsxs("div",{className:"mt-3 p-2 bg-purple-50 rounded",children:[n.jsx("div",{className:"text-xs font-semibold text-purple-700 mb-1",children:"Includes:"}),$.bundleItems.map(B=>{const U=rv.find(q=>q.id===B.productId);return n.jsxs("div",{className:"text-xs text-purple-600",children:["• ",U==null?void 0:U.name," (",B.quantity,"x)"]},B.productId)})]})]}),n.jsxs(J,{onClick:()=>T($.id),size:"sm",className:"ml-4",children:[n.jsx(Et,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},$.id))})]})]})}),n.jsx(tt,{value:"pricing",className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Pricing Rules"}),n.jsx("div",{className:"space-y-4",children:bae.filter($=>$.isActive).map($=>n.jsx(ue,{className:"shadow-sm",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:$.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.type==="quantity_discount"&&`Min quantity: ${$.conditions.minQuantity}`,$.type==="bundle_discount"&&"Applied to bundle products",$.type==="customer_discount"&&`Customer type: ${$.conditions.customerType}`]}),n.jsx("div",{className:"flex items-center space-x-2 mt-2",children:n.jsxs(Fe,{className:"bg-green-50 text-green-700 border-green-200",children:[n.jsx(yg,{className:"h-3 w-3 mr-1"}),$.discount.type==="percentage"?`${$.discount.value}%`:Ie($.discount.value)," off"]})})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>D(),children:[n.jsx(dc,{className:"h-4 w-4 mr-1"}),"Apply"]})]})})},$.id))})]})}),n.jsxs(tt,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"validUntil",children:"Valid Until"}),n.jsx(Pe,{id:"validUntil",type:"date",value:u.validUntil.toISOString().split("T")[0],onChange:$=>h(B=>({...B,validUntil:new Date($.target.value)}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Pe,{id:"taxRate",type:"number",value:(u.taxRate*100).toFixed(2),onChange:$=>h(B=>({...B,taxRate:parseFloat($.target.value)/100||0})),step:"0.01",min:"0",max:"100"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes"}),n.jsx(ir,{id:"notes",value:u.notes,onChange:$=>h(B=>({...B,notes:$.target.value})),placeholder:"Additional notes for the customer...",rows:3})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"terms",children:"Terms & Conditions"}),n.jsx(ir,{id:"terms",value:u.terms,onChange:$=>h(B=>({...B,terms:$.target.value})),placeholder:"Terms and conditions...",rows:4})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[n.jsx("div",{className:"flex space-x-2",children:n.jsxs(J,{variant:"outline",onClick:I,disabled:l||u.items.length===0,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),l?"Generating...":"Export PDF"]})}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx(J,{variant:"outline",onClick:s,disabled:l,children:"Cancel"}),n.jsx(J,{onClick:M,disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Quote"]})})]})]})]})]})})}function jae(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(!1);w.useEffect(()=>{c()},[]);const c=()=>{const A=En("renter-insight-quotes",[]);t(A);const C=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"},{id:"6",name:"Backup Camera System",description:"Wireless backup camera with monitor",price:450,category:"accessory"},{id:"7",name:"Awning Package",description:"Electric awning with LED lighting",price:1200,category:"accessory"}],S=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0},{id:"3",name:"First-Time Buyer Discount",type:"customer_discount",conditions:{customerType:"first_time"},discount:{type:"percentage",value:5},isActive:!0}];s(C),i(S)},d=A=>{rn("renter-insight-quotes",A)},f=async A=>{l(!0);try{const C={id:Math.random().toString(36).substr(2,9),customerId:A.customerId||"",items:A.items||[],subtotal:A.subtotal||0,totalDiscount:A.totalDiscount||0,tax:A.tax||0,taxRate:A.taxRate||.08,total:A.total||0,status:"draft",validUntil:A.validUntil||new Date(Date.now()+2592e6),notes:A.notes||"",terms:A.terms||"",createdAt:new Date,updatedAt:new Date},S=[...e,C];return t(S),d(S),C}finally{l(!1)}},u=async(A,C)=>{l(!0);try{const S=e.map(T=>T.id===A?{...T,...C,updatedAt:new Date}:T);return t(S),d(S),S.find(T=>T.id===A)}finally{l(!1)}};return{quotes:e,products:r,pricingRules:a,loading:o,createQuote:f,updateQuote:u,deleteQuote:async A=>{const C=e.filter(S=>S.id!==A);t(C),d(C)},duplicateQuote:async A=>{const C=e.find(O=>O.id===A);if(!C)return;const S={...C,id:Math.random().toString(36).substr(2,9),status:"draft",createdAt:new Date,updatedAt:new Date},T=[...e,S];return t(T),d(T),S},sendQuote:async A=>u(A,{status:"sent"}),acceptQuote:async A=>u(A,{status:"accepted"}),rejectQuote:async A=>u(A,{status:"rejected"}),calculateQuoteTotals:(A,C=.08)=>{const S=A.reduce((D,I)=>D+I.total,0),T=A.reduce((D,I)=>{const R=I.discountType==="percentage"?I.quantity*I.unitPrice*I.discount/100:I.discount*I.quantity;return D+R},0),O=S-T,_=O*C,N=O+_;return{subtotal:S,totalDiscount:T,tax:_,total:N}},applyPricingRules:(A,C)=>{let S=[...A];return a.forEach(T=>{if(T.isActive)switch(T.type){case"quantity_discount":if(T.conditions.minQuantity){const O=S.filter(_=>{var N;return((N=r.find(D=>D.id===_.productId))==null?void 0:N.category)==="accessory"});O.length>=T.conditions.minQuantity&&(S=S.map(_=>O.includes(_)?{..._,discount:T.discount.value,discountType:T.discount.type}:_))}break;case"bundle_discount":T.conditions.productIds&&(S=S.map(O=>{var _;return O.isBundle&&((_=T.conditions.productIds)!=null&&_.includes(O.productId||""))?{...O,discount:T.discount.value,discountType:T.discount.type}:O}));break}}),S},getQuotesByCustomer:A=>e.filter(C=>C.customerId===A),getQuotesByStatus:A=>e.filter(C=>C.status===A),getExpiredQuotes:()=>{const A=new Date;return e.filter(C=>new Date(C.validUntil)<A&&C.status!=="accepted")}}}function wae({quote:e,onClose:t,onEdit:r}){const s=a=>{switch(a){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Quote #",e.id]}),n.jsx(Be,{children:"Quote details and line items"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>r(e),size:"sm",children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx("div",{className:"mt-1",children:n.jsx(Fe,{className:Ge("ri-badge-status",s(e.status)),children:e.status.toUpperCase()})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:ft(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),n.jsx("p",{className:"font-medium",children:ft(e.validUntil)})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),n.jsx("div",{className:"space-y-3",children:e.items.map((a,i)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:a.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",a.quantity," × ",Ie(a.unitPrice)]}),a.isBundle&&n.jsx(Fe,{className:"mt-1 bg-purple-50 text-purple-700 border-purple-200",children:"Bundle"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-bold text-lg",children:Ie(a.total)}),a.discount>0&&n.jsxs("div",{className:"text-sm text-green-600",children:["-",a.discountType==="percentage"?`${a.discount}%`:Ie(a.discount)," discount"]})]})]},a.id))})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Ie(e.subtotal)})]}),e.totalDiscount>0&&n.jsxs("div",{className:"flex justify-between text-green-600",children:[n.jsx("span",{children:"Total Discount:"}),n.jsxs("span",{children:["-",Ie(e.totalDiscount)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:Ie(e.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Ie(e.total)})]})]})}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:e.notes})})]}),e.terms&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Terms & Conditions"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.terms})})]})]})]})})}function Nae(){const{quotes:e,loading:t,createQuote:r,updateQuote:s,deleteQuote:a,duplicateQuote:i,sendQuote:o,acceptQuote:l,rejectQuote:c}=jae(),{toast:d}=_t(),[f,u]=w.useState(""),[h,m]=w.useState("all"),[v,g]=w.useState(!1),[p,x]=w.useState(null),[b,y]=w.useState(null),[j,E]=w.useState(""),A=$=>{switch($){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=e.filter($=>{const B=$.id.toLowerCase().includes(f.toLowerCase())||$.customerId.toLowerCase().includes(f.toLowerCase()),U=h==="all"||$.status===h;return B&&U}),S=()=>{x(null),E(""),g(!0)},T=$=>{x($),E($.customerId),g(!0)},O=$=>{y($)},_=()=>y(null),N=async $=>{try{p?(await s(p.id,$),d({title:"Success",description:"Quote updated successfully"})):(await r($),d({title:"Success",description:"Quote created successfully"})),g(!1),x(null)}catch{d({title:"Error",description:"Failed to save quote",variant:"destructive"})}},D=async $=>{try{await o($),d({title:"Success",description:"Quote sent to customer"})}catch{d({title:"Error",description:"Failed to send quote",variant:"destructive"})}},I=async $=>{try{await i($),d({title:"Success",description:"Quote duplicated successfully"})}catch{d({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},R=async $=>{if(window.confirm("Are you sure you want to delete this quote?"))try{await a($),d({title:"Success",description:"Quote deleted successfully"})}catch{d({title:"Error",description:"Failed to delete quote",variant:"destructive"})}},M={total:e.length,draft:e.filter($=>$.status==="draft").length,sent:e.filter($=>$.status==="sent").length,accepted:e.filter($=>$.status==="accepted").length,totalValue:e.reduce(($,B)=>$+B.total,0),acceptedValue:e.filter($=>$.status==="accepted").reduce(($,B)=>$+B.total,0)};return n.jsxs("div",{className:"space-y-8",children:[v&&n.jsx(yB,{quote:p,customerId:j,onSave:N,onCancel:()=>{g(!1),x(null)}}),b&&n.jsx(wae,{quote:b,onClose:_,onEdit:T}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),n.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),n.jsxs(J,{className:"shadow-sm",onClick:S,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Quotes"}),n.jsx(Ns,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:M.total}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"All quotes"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(Ns,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:M.sent}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Accepted"}),n.jsx(Ns,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:M.accepted}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),M.total>0?Math.round(M.accepted/M.total*100):0,"% acceptance rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Quote Value"}),n.jsx($t,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Ie(M.totalValue)}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx($t,{className:"h-3 w-3 mr-1"}),Ie(M.acceptedValue)," accepted"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search quotes...",value:f,onChange:$=>u($.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(We,{value:h,onValueChange:m,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:"draft",children:"Draft"}),n.jsx(K,{value:"sent",children:"Sent"}),n.jsx(K,{value:"viewed",children:"Viewed"}),n.jsx(K,{value:"accepted",children:"Accepted"}),n.jsx(K,{value:"rejected",children:"Rejected"}),n.jsx(K,{value:"expired",children:"Expired"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Quotes (",C.length,")"]}),n.jsx(Be,{children:"Manage customer quotes with advanced pricing and bundling"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[C.map($=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",$.id]}),n.jsx(Fe,{className:Ge("ri-badge-status",A($.status)),children:$.status.toUpperCase()}),$.items.some(B=>B.isBundle)&&n.jsx(Fe,{className:"bg-purple-50 text-purple-700 border-purple-200",children:"Bundle"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",$.customerId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"}),n.jsx("span",{className:"font-bold text-primary ml-1",children:Ie($.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Created:"})," ",ft($.createdAt)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",ft($.validUntil)]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.items.length," item(s)",$.totalDiscount>0&&n.jsxs("span",{className:"text-green-600 ml-2",children:["• ",Ie($.totalDiscount)," discount applied"]})]}),$.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",$.notes]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>O($),children:[n.jsx(uc,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>T($),children:[n.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Edit"]}),$.status==="draft"&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D($.id),children:[n.jsx(hl,{className:"h-3 w-3 mr-1"}),"Send"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I($.id),children:[n.jsx(D4,{className:"h-3 w-3 mr-1"}),"Copy"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>R($.id),children:n.jsx($n,{className:"h-3 w-3"})})]})]},$.id)),C.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No quotes found"}),n.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})]})})]})]})}function YI(){var _;const{leads:e,sources:t,activities:r,salesReps:s,updateLeadStatus:a,assignLead:i,getActivitiesByLead:o,getRemindersByUser:l,getLeadScore:c}=Mo(),[d,f]=w.useState(""),[u,h]=w.useState("all"),[m,v]=w.useState("all"),[g,p]=w.useState("all"),[x,b]=w.useState(null),[y,j]=w.useState(!1),[E,A]=w.useState(!1);w.useState("leads");const C=N=>{switch(N){case Ds.NEW:return"bg-blue-50 text-blue-700 border-blue-200";case Ds.CONTACTED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ds.QUALIFIED:return"bg-green-50 text-green-700 border-green-200";case Ds.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case Ds.NEGOTIATION:return"bg-orange-50 text-orange-700 border-orange-200";case Ds.CLOSED_WON:return"bg-emerald-50 text-emerald-700 border-emerald-200";case Ds.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=N=>N>=80?"text-green-600 bg-green-50":N>=60?"text-yellow-600 bg-yellow-50":N>=40?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",T=e.filter(N=>{const D=`${N.firstName} ${N.lastName}`.toLowerCase().includes(d.toLowerCase())||N.email.toLowerCase().includes(d.toLowerCase())||N.phone.includes(d),I=u==="all"||N.status===u,R=m==="all"||N.sourceId===m,M=g==="all"||N.assignedTo===g;return D&&I&&R&&M}),O=N=>{console.log("New lead created:",N)};if(x&&!E){const N=o(x.id),D=l("current-user").filter(R=>R.leadId===x.id),I=c(x.id);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(J,{variant:"outline",onClick:()=>b(null),className:"mb-4",children:"← Back to Leads"}),n.jsxs("h1",{className:"ri-page-title",children:[x.firstName," ",x.lastName]}),n.jsx("p",{className:"ri-page-description",children:"Lead details and activity management"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Fe,{className:Ge("ri-badge-status",C(x.status)),children:x.status.replace("_"," ").toUpperCase()}),x.score&&n.jsxs(Fe,{className:Ge("ri-badge-status",S(x.score)),children:["Score: ",x.score]})]})]}),n.jsxs(Ar,{defaultValue:"overview",className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-6",children:[n.jsx(Ze,{value:"overview",children:"Overview"}),n.jsx(Ze,{value:"activity",children:"Activity"}),n.jsx(Ze,{value:"communication",children:"Communication"}),n.jsx(Ze,{value:"ai-insights",children:"AI Insights"}),n.jsx(Ze,{value:"nurturing",children:"Nurturing"}),n.jsx(Ze,{value:"reminders",children:"Reminders"})]}),n.jsx(tt,{value:"overview",className:"space-y-6",children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsx(je,{children:"Lead Information"})}),n.jsxs(fe,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium",children:x.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"font-medium",children:x.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Source"}),n.jsx("p",{className:"font-medium",children:x.source})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsx("p",{className:"font-medium",children:((_=s.find(R=>R.id===x.assignedTo))==null?void 0:_.name)||"Unassigned"})]}),Object.entries(x.customFields||{}).map(([R,M])=>n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground capitalize",children:R.replace(/([A-Z])/g," $1").trim()}),n.jsx("p",{className:"font-medium",children:M})]},R))]}),x.notes&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:x.notes})]})]})]})}),n.jsx("div",{className:"space-y-6",children:I&&n.jsx(Rse,{score:I})})]})}),n.jsx(tt,{value:"activity",children:n.jsx($se,{leadId:x.id,activities:N})}),n.jsx(tt,{value:"communication",children:n.jsx(KI,{leadId:x.id,leadData:x})}),n.jsx(tt,{value:"ai-insights",children:n.jsx(Xse,{leadId:x.id,leadData:x})}),n.jsx(tt,{value:"nurturing",children:n.jsx("div",{className:"space-y-6",children:n.jsx(FI,{})})}),n.jsx(tt,{value:"reminders",children:n.jsx(Wse,{leadId:x.id,reminders:D})})]})]})}return n.jsxs("div",{className:"space-y-8",children:[y&&n.jsx(gf,{onClose:()=>j(!1),onSuccess:O}),E&&x&&n.jsx(KI,{leadId:x.id,leadData:x,onClose:()=>A(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"CRM & Prospecting"}),n.jsx("p",{className:"ri-page-description",children:"Manage leads, track activities, and monitor sales pipeline with AI-powered insights"})]}),n.jsxs(J,{className:"shadow-sm",onClick:()=>j(!0),children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Leads"}),n.jsx(Yn,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"New Leads"}),n.jsx(Yn,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(N=>N.status===Ds.NEW).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"+8% from last week"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Qualified"}),n.jsx(Ga,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(N=>N.status===Ds.QUALIFIED).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"+15% from last month"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"AI Insights"}),n.jsx(nl,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"47"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(nl,{className:"h-3 w-3 mr-1"}),"Active recommendations"]})]})]})]}),n.jsxs(Ar,{defaultValue:"leads",className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-6",children:[n.jsx(Ze,{value:"leads",children:"Leads"}),n.jsx(Ze,{value:"pipeline",children:"Pipeline"}),n.jsx(Ze,{value:"quotes",children:"Quotes"}),n.jsx(Ze,{value:"nurturing",children:"Nurturing"}),n.jsx(Ze,{value:"forms",children:"Intake Forms"}),n.jsx(Ze,{value:"sources",children:"Sources"})]}),n.jsxs(tt,{value:"leads",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search leads...",value:d,onChange:N=>f(N.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(We,{value:u,onValueChange:h,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:Ds.NEW,children:"New"}),n.jsx(K,{value:Ds.CONTACTED,children:"Contacted"}),n.jsx(K,{value:Ds.QUALIFIED,children:"Qualified"}),n.jsx(K,{value:Ds.PROPOSAL,children:"Proposal"}),n.jsx(K,{value:Ds.NEGOTIATION,children:"Negotiation"}),n.jsx(K,{value:Ds.CLOSED_WON,children:"Closed Won"}),n.jsx(K,{value:Ds.CLOSED_LOST,children:"Closed Lost"})]})]}),n.jsxs(We,{value:m,onValueChange:v,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Source"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Sources"}),t.map(N=>n.jsx(K,{value:N.id,children:N.name},N.id))]})]}),n.jsxs(We,{value:g,onValueChange:p,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Assignee"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Reps"}),s.map(N=>n.jsx(K,{value:N.id,children:N.name},N.id))]})]}),n.jsxs(J,{onClick:()=>j(!0),className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Leads (",T.length,")"]}),n.jsx(Be,{children:"Manage your sales prospects with AI-powered insights and automated nurturing"})]}),n.jsxs(J,{onClick:()=>j(!0),variant:"outline",className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:T.map(N=>{var D;return n.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>b(N),children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:[N.firstName," ",N.lastName]}),n.jsx(Fe,{className:Ge("ri-badge-status",C(N.status)),children:N.status.replace("_"," ").toUpperCase()}),N.score&&n.jsx(Fe,{className:Ge("ri-badge-status",S(N.score)),children:N.score}),n.jsxs(Fe,{variant:"outline",className:"text-xs",children:[n.jsx(nl,{className:"h-3 w-3 mr-1"}),"AI Ready"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(on,{className:"h-3 w-3 mr-2 text-blue-500"}),N.email]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx($m,{className:"h-3 w-3 mr-2 text-green-500"}),N.phone]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Yn,{className:"h-3 w-3 mr-2 text-purple-500"}),((D=s.find(I=>I.id===N.assignedTo))==null?void 0:D.name)||"Unassigned"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-2 text-orange-500"}),ft(N.createdAt)]})]}),N.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:N.notes})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:I=>{I.stopPropagation(),b(N),A(!0)},children:[n.jsx(Pn,{className:"h-3 w-3 mr-1"}),"Contact"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:I=>{I.stopPropagation(),b(N)},children:[n.jsx(nl,{className:"h-3 w-3 mr-1"}),"AI Insights"]})]})]},N.id)})})})]})]}),n.jsx(tt,{value:"pipeline",children:n.jsx(Pse,{})}),n.jsx(tt,{value:"quotes",children:n.jsx(Nae,{})}),n.jsx(tt,{value:"nurturing",children:n.jsx(FI,{})}),n.jsx(tt,{value:"forms",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Lead Intake Forms"}),n.jsx(Be,{children:"Create and manage dynamic lead capture forms"})]}),n.jsx(fe,{children:n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Form builder coming soon..."})})]})}),n.jsx(tt,{value:"sources",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Lead Sources"}),n.jsx(Be,{children:"Manage and track lead source performance"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:t.map(N=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:N.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",N.type," • Conversion: ",N.conversionRate,"%",N.trackingCode&&` • Code: ${N.trackingCode}`]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Fe,{className:N.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:N.isActive?"Active":"Inactive"}),n.jsx(J,{variant:"outline",size:"sm",children:n.jsx(bg,{className:"h-3 w-3"})})]})]},N.id))})})]})})]})]})}function Sae(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(YI,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(YI,{})})]})}function Cae({vehicles:e,onEdit:t,onDelete:r,onView:s,onStatusChange:a}){const{toast:i}=_t(),[o,l]=w.useState(""),[c,d]=w.useState("all"),[f,u]=w.useState("all"),[h,m]=w.useState("all"),[v,g]=w.useState([]),[p,x]=w.useState("updatedAt"),[b,y]=w.useState("desc"),j=Array.from(new Set(e.map(D=>D.location))),E=D=>{switch(D){case tr.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case tr.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case tr.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case tr.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case tr.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},A=D=>D.replace("_"," ").toUpperCase(),C=e.filter(D=>{const I=`${D.make} ${D.model}`.toLowerCase().includes(o.toLowerCase())||D.vin.toLowerCase().includes(o.toLowerCase())||D.year.toString().includes(o),R=c==="all"||D.status===c,M=f==="all"||D.type===f,$=h==="all"||D.location===h;return I&&R&&M&&$}).sort((D,I)=>{let R=D[p],M=I[p];return R instanceof Date&&M instanceof Date&&(R=R.getTime(),M=M.getTime()),typeof R=="string"&&typeof M=="string"&&(R=R.toLowerCase(),M=M.toLowerCase()),R<M?b==="asc"?-1:1:R>M?b==="asc"?1:-1:0}),S=D=>{p===D?y(b==="asc"?"desc":"asc"):(x(D),y("asc"))},T=D=>{g(D?C.map(I=>I.id):[])},O=D=>{v.includes(D)?g(v.filter(I=>I!==D)):g([...v,D])},_=()=>{const I=(v.length>0?e.filter(U=>v.includes(U.id)):C).map(U=>({id:U.id,vin:U.vin,make:U.make,model:U.model,year:U.year,type:U.type,status:U.status,price:U.price,cost:U.cost,location:U.location,features:U.features.join(", "),createdAt:U.createdAt.toISOString(),updatedAt:U.updatedAt.toISOString()})),R=tm.unparse(I),M=new Blob([R],{type:"text/csv;charset=utf-8;"}),$=URL.createObjectURL(M),B=document.createElement("a");B.href=$,B.setAttribute("download",`inventory_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(B),B.click(),document.body.removeChild(B),i({title:"Export Successful",description:`Exported ${I.length} vehicles to CSV`})},N=D=>{if(v.length===0){i({title:"No Vehicles Selected",description:"Please select vehicles to update",variant:"destructive"});return}v.forEach(I=>{a(I,D)}),i({title:"Status Updated",description:`Updated ${v.length} vehicles to ${D}`})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search by make, model, VIN...",value:o,onChange:D=>l(D.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(We,{value:c,onValueChange:d,children:[n.jsx(Ue,{className:"w-[130px]",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:tr.AVAILABLE,children:"Available"}),n.jsx(K,{value:tr.RESERVED,children:"Reserved"}),n.jsx(K,{value:tr.SOLD,children:"Sold"}),n.jsx(K,{value:tr.SERVICE,children:"Service"}),n.jsx(K,{value:tr.DELIVERED,children:"Delivered"})]})]}),n.jsxs(We,{value:f,onValueChange:u,children:[n.jsx(Ue,{className:"w-[130px]",children:n.jsx(qe,{placeholder:"Type"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Types"}),n.jsx(K,{value:bt.RV,children:"RV"}),n.jsx(K,{value:bt.MOTORHOME,children:"Motorhome"}),n.jsx(K,{value:bt.TRAVEL_TRAILER,children:"Travel Trailer"}),n.jsx(K,{value:bt.FIFTH_WHEEL,children:"Fifth Wheel"}),n.jsx(K,{value:bt.TOY_HAULER,children:"Toy Hauler"})]})]}),n.jsxs(We,{value:h,onValueChange:m,children:[n.jsx(Ue,{className:"w-[130px]",children:n.jsx(qe,{placeholder:"Location"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Locations"}),j.map(D=>n.jsx(K,{value:D,children:D},D))]})]})]})]}),v.length>0&&n.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-lg",children:[n.jsxs("div",{className:"text-sm font-medium",children:[v.length," vehicles selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(We,{onValueChange:D=>N(D),children:[n.jsx(Ue,{className:"w-[150px]",children:n.jsx(qe,{placeholder:"Change Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:tr.AVAILABLE,children:"Available"}),n.jsx(K,{value:tr.RESERVED,children:"Reserved"}),n.jsx(K,{value:tr.SOLD,children:"Sold"}),n.jsx(K,{value:tr.SERVICE,children:"Service"}),n.jsx(K,{value:tr.DELIVERED,children:"Delivered"}),n.jsx(K,{value:bt.SINGLE_WIDE,children:"Single Wide MH"}),n.jsx(K,{value:bt.DOUBLE_WIDE,children:"Double Wide MH"}),n.jsx(K,{value:bt.TRIPLE_WIDE,children:"Triple Wide MH"}),n.jsx(K,{value:bt.PARK_MODEL,children:"Park Model"}),n.jsx(K,{value:bt.MODULAR_HOME,children:"Modular Home"})]})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:_,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g([]),children:[n.jsx(qt,{className:"h-4 w-4 mr-2"}),"Clear Selection"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Inventory (",C.length,")"]}),n.jsx(Be,{children:"Manage your RV and motorhome inventory"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(J,{variant:"outline",size:"sm",onClick:_,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})}),n.jsx(fe,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"p-2 text-left",children:n.jsx(Xt,{checked:v.length===C.length&&C.length>0,onCheckedChange:T})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>S("make"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Make/Model"}),p==="make"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>S("year"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Year"}),p==="year"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>S("vin"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"VIN"}),p==="vin"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>S("type"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Type"}),p==="type"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>S("status"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Status"}),p==="status"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>S("location"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Location"}),p==="location"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>S("price"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Price"}),p==="price"&&n.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left",children:"Media"}),n.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),n.jsxs("tbody",{children:[C.map(D=>n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:n.jsx(Xt,{checked:v.includes(D.id),onCheckedChange:()=>O(D.id)})}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"font-medium",children:[D.make," ",D.model]})}),n.jsx("td",{className:"p-2",children:D.year}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:"font-mono text-xs",children:D.vin})}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:"text-sm",children:A(D.type)})}),n.jsx("td",{className:"p-2",children:n.jsx(Fe,{className:Ge("ri-badge-status",E(D.status)),children:D.status.toUpperCase()})}),n.jsx("td",{className:"p-2",children:D.location}),n.jsx("td",{className:"p-2 font-medium text-primary",children:Ie(D.price)}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsxs(Fe,{variant:"outline",className:"text-xs",children:[n.jsx(Qh,{className:"h-3 w-3 mr-1"}),D.images.length]}),D.customFields.videos&&n.jsxs(Fe,{variant:"outline",className:"text-xs",children:[n.jsx(Rb,{className:"h-3 w-3 mr-1"}),D.customFields.videos.length||0]})]})}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>s(D),children:n.jsx(uc,{className:"h-4 w-4"})}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>t(D),children:n.jsx(Yr,{className:"h-4 w-4"})}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>r(D.id),children:n.jsx($n,{className:"h-4 w-4"})})]})})]},D.id)),C.length===0&&n.jsx("tr",{children:n.jsxs("td",{colSpan:10,className:"p-8 text-center text-muted-foreground",children:[n.jsx(ia,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No vehicles found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})]})]})})})]})]})}var bB={exports:{}},Aae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Eae=Aae,Pae=Eae;function jB(){}function wB(){}wB.resetWarningCache=jB;var Tae=function(){function e(s,a,i,o,l,c){if(c!==Pae){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wB,resetWarningCache:jB};return r.PropTypes=r,r};bB.exports=Tae();var _ae=bB.exports;const Tt=kr(_ae),Iae=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function rm(e,t,r){const s=kae(e),{webkitRelativePath:a}=e,i=typeof t=="string"?t:typeof a=="string"&&a.length>0?a:`./${e.name}`;return typeof s.path!="string"&&XI(s,"path",i),r!==void 0&&Object.defineProperty(s,"handle",{value:r,writable:!1,configurable:!1,enumerable:!0}),XI(s,"relativePath",i),s}function kae(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const s=t.split(".").pop().toLowerCase(),a=Iae.get(s);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}function XI(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1,enumerable:!0})}const Dae=[".DS_Store","Thumbs.db"];function Oae(e){return mf(this,void 0,void 0,function*(){return Hb(e)&&Lae(e.dataTransfer)?Mae(e.dataTransfer,e.type):Rae(e)?$ae(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?Fae(e):[]})}function Lae(e){return Hb(e)}function Rae(e){return Hb(e)&&Hb(e.target)}function Hb(e){return typeof e=="object"&&e!==null}function $ae(e){return SC(e.target.files).map(t=>rm(t))}function Fae(e){return mf(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>r.getFile()))).map(r=>rm(r))})}function Mae(e,t){return mf(this,void 0,void 0,function*(){if(e.items){const r=SC(e.items).filter(a=>a.kind==="file");if(t!=="drop")return r;const s=yield Promise.all(r.map(Bae));return QI(NB(s))}return QI(SC(e.files).map(r=>rm(r)))})}function QI(e){return e.filter(t=>Dae.indexOf(t.name)===-1)}function SC(e){if(e===null)return[];const t=[];for(let r=0;r<e.length;r++){const s=e[r];t.push(s)}return t}function Bae(e){if(typeof e.webkitGetAsEntry!="function")return JI(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?SB(t):JI(e,t)}function NB(e){return e.reduce((t,r)=>[...t,...Array.isArray(r)?NB(r):[r]],[])}function JI(e,t){return mf(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const i=yield e.getAsFileSystemHandle();if(i===null)throw new Error(`${e} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,rm(o)}}const s=e.getAsFile();if(!s)throw new Error(`${e} is not a File`);return rm(s,(r=t==null?void 0:t.fullPath)!==null&&r!==void 0?r:void 0)})}function zae(e){return mf(this,void 0,void 0,function*(){return e.isDirectory?SB(e):Uae(e)})}function SB(e){const t=e.createReader();return new Promise((r,s)=>{const a=[];function i(){t.readEntries(o=>mf(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(zae));a.push(l),i()}else try{const l=yield Promise.all(a);r(l)}catch(l){s(l)}}),o=>{s(o)})}i()})}function Uae(e){return mf(this,void 0,void 0,function*(){return new Promise((t,r)=>{e.file(s=>{const a=rm(s,e.fullPath);t(a)},s=>{r(s)})})})}var qN=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(",");if(r.length===0)return!0;var s=e.name||"",a=(e.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return r.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?i===l.replace(/\/.*$/,""):a===l})}return!0};function ZI(e){return qae(e)||Wae(e)||AB(e)||Vae()}function Vae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wae(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qae(e){if(Array.isArray(e))return CC(e)}function ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function tk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ek(Object(r),!0).forEach(function(s){CB(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function CB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ng(e,t){return Kae(e)||Gae(e,t)||AB(e,t)||Hae()}function Hae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AB(e,t){if(e){if(typeof e=="string")return CC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CC(e,t)}}function CC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Gae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s=[],a=!0,i=!1,o,l;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(s.push(o.value),!(t&&s.length===t));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw l}}return s}}function Kae(e){if(Array.isArray(e))return e}var Yae=typeof qN=="function"?qN:qN.default,Xae="file-invalid-type",Qae="file-too-large",Jae="file-too-small",Zae="too-many-files",eie=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=t.split(","),s=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:Xae,message:"File type must be ".concat(s)}},rk=function(t){return{code:Qae,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},nk=function(t){return{code:Jae,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},tie={code:Zae,message:"Too many files"};function EB(e,t){var r=e.type==="application/x-moz-file"||Yae(e,t);return[r,r?null:eie(t)]}function PB(e,t,r){if(ju(e.size))if(ju(t)&&ju(r)){if(e.size>r)return[!1,rk(r)];if(e.size<t)return[!1,nk(t)]}else{if(ju(t)&&e.size<t)return[!1,nk(t)];if(ju(r)&&e.size>r)return[!1,rk(r)]}return[!0,null]}function ju(e){return e!=null}function rie(e){var t=e.files,r=e.accept,s=e.minSize,a=e.maxSize,i=e.multiple,o=e.maxFiles,l=e.validator;return!i&&t.length>1||i&&o>=1&&t.length>o?!1:t.every(function(c){var d=EB(c,r),f=Ng(d,1),u=f[0],h=PB(c,s,a),m=Ng(h,1),v=m[0],g=l?l(c):null;return u&&v&&!g})}function Gb(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function fy(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function sk(e){e.preventDefault()}function nie(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function sie(e){return e.indexOf("Edge/")!==-1}function aie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return nie(e)||sie(e)}function Qo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return t.some(function(l){return!Gb(s)&&l&&l.apply(void 0,[s].concat(i)),Gb(s)})}}function iie(){return"showOpenFilePicker"in window}function oie(e){if(ju(e)){var t=Object.entries(e).filter(function(r){var s=Ng(r,2),a=s[0],i=s[1],o=!0;return TB(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(_B))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,s){var a=Ng(s,2),i=a[0],o=a[1];return tk(tk({},r),{},CB({},i,o))},{});return[{description:"Files",accept:t}]}return e}function lie(e){if(ju(e))return Object.entries(e).reduce(function(t,r){var s=Ng(r,2),a=s[0],i=s[1];return[].concat(ZI(t),[a],ZI(i))},[]).filter(function(t){return TB(t)||_B(t)}).join(",")}function cie(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function die(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function TB(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function _B(e){return/^.*\.[\w]+$/.test(e)}var uie=["children"],fie=["open"],hie=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],mie=["refKey","onChange","onClick"];function pie(e){return xie(e)||gie(e)||IB(e)||vie()}function vie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xie(e){if(Array.isArray(e))return AC(e)}function HN(e,t){return jie(e)||bie(e,t)||IB(e,t)||yie()}function yie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IB(e,t){if(e){if(typeof e=="string")return AC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AC(e,t)}}function AC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function bie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s=[],a=!0,i=!1,o,l;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(s.push(o.value),!(t&&s.length===t));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw l}}return s}}function jie(e){if(Array.isArray(e))return e}function ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ak(Object(r),!0).forEach(function(s){EC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ak(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function EC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kb(e,t){if(e==null)return{};var r=wie(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function wie(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var nP=w.forwardRef(function(e,t){var r=e.children,s=Kb(e,uie),a=Cx(s),i=a.open,o=Kb(a,fie);return w.useImperativeHandle(t,function(){return{open:i}},[i]),ce.createElement(w.Fragment,null,r(Sn(Sn({},o),{},{open:i})))});nP.displayName="Dropzone";var kB={disabled:!1,getFilesFromEvent:Oae,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};nP.defaultProps=kB;nP.propTypes={children:Tt.func,accept:Tt.objectOf(Tt.arrayOf(Tt.string)),multiple:Tt.bool,preventDropOnDocument:Tt.bool,noClick:Tt.bool,noKeyboard:Tt.bool,noDrag:Tt.bool,noDragEventsBubbling:Tt.bool,minSize:Tt.number,maxSize:Tt.number,maxFiles:Tt.number,disabled:Tt.bool,getFilesFromEvent:Tt.func,onFileDialogCancel:Tt.func,onFileDialogOpen:Tt.func,useFsAccessApi:Tt.bool,autoFocus:Tt.bool,onDragEnter:Tt.func,onDragLeave:Tt.func,onDragOver:Tt.func,onDrop:Tt.func,onDropAccepted:Tt.func,onDropRejected:Tt.func,onError:Tt.func,validator:Tt.func};var PC={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Cx(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Sn(Sn({},kB),e),r=t.accept,s=t.disabled,a=t.getFilesFromEvent,i=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,f=t.onDragLeave,u=t.onDragOver,h=t.onDrop,m=t.onDropAccepted,v=t.onDropRejected,g=t.onFileDialogCancel,p=t.onFileDialogOpen,x=t.useFsAccessApi,b=t.autoFocus,y=t.preventDropOnDocument,j=t.noClick,E=t.noKeyboard,A=t.noDrag,C=t.noDragEventsBubbling,S=t.onError,T=t.validator,O=w.useMemo(function(){return lie(r)},[r]),_=w.useMemo(function(){return oie(r)},[r]),N=w.useMemo(function(){return typeof p=="function"?p:ik},[p]),D=w.useMemo(function(){return typeof g=="function"?g:ik},[g]),I=w.useRef(null),R=w.useRef(null),M=w.useReducer(Nie,PC),$=HN(M,2),B=$[0],U=$[1],q=B.isFocused,W=B.isFileDialogActive,L=w.useRef(typeof window<"u"&&window.isSecureContext&&x&&iie()),V=function(){!L.current&&W&&setTimeout(function(){if(R.current){var Je=R.current.files;Je.length||(U({type:"closeDialog"}),D())}},300)};w.useEffect(function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}},[R,W,D,L]);var G=w.useRef([]),Z=function(Je){I.current&&I.current.contains(Je.target)||(Je.preventDefault(),G.current=[])};w.useEffect(function(){return y&&(document.addEventListener("dragover",sk,!1),document.addEventListener("drop",Z,!1)),function(){y&&(document.removeEventListener("dragover",sk),document.removeEventListener("drop",Z))}},[I,y]),w.useEffect(function(){return!s&&b&&I.current&&I.current.focus(),function(){}},[I,b,s]);var ee=w.useCallback(function(Me){S?S(Me):console.error(Me)},[S]),he=w.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me),G.current=[].concat(pie(G.current),[Me.target]),fy(Me)&&Promise.resolve(a(Me)).then(function(Je){if(!(Gb(Me)&&!C)){var dt=Je.length,xt=dt>0&&rie({files:Je,accept:O,minSize:o,maxSize:i,multiple:l,maxFiles:c,validator:T}),kt=dt>0&&!xt;U({isDragAccept:xt,isDragReject:kt,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Me)}}).catch(function(Je){return ee(Je)})},[a,d,ee,C,O,o,i,l,c,T]),me=w.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me);var Je=fy(Me);if(Je&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return Je&&u&&u(Me),!1},[u,C]),oe=w.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me);var Je=G.current.filter(function(xt){return I.current&&I.current.contains(xt)}),dt=Je.indexOf(Me.target);dt!==-1&&Je.splice(dt,1),G.current=Je,!(Je.length>0)&&(U({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),fy(Me)&&f&&f(Me))},[I,f,C]),we=w.useCallback(function(Me,Je){var dt=[],xt=[];Me.forEach(function(kt){var Pt=EB(kt,O),Mt=HN(Pt,2),ct=Mt[0],hr=Mt[1],Gt=PB(kt,o,i),Dr=HN(Gt,2),lr=Dr[0],Er=Dr[1],ps=T?T(kt):null;if(ct&&lr&&!ps)dt.push(kt);else{var mr=[hr,Er];ps&&(mr=mr.concat(ps)),xt.push({file:kt,errors:mr.filter(function(Ca){return Ca})})}}),(!l&&dt.length>1||l&&c>=1&&dt.length>c)&&(dt.forEach(function(kt){xt.push({file:kt,errors:[tie]})}),dt.splice(0)),U({acceptedFiles:dt,fileRejections:xt,isDragReject:xt.length>0,type:"setFiles"}),h&&h(dt,xt,Je),xt.length>0&&v&&v(xt,Je),dt.length>0&&m&&m(dt,Je)},[U,l,O,o,i,c,h,m,v,T]),ve=w.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me),G.current=[],fy(Me)&&Promise.resolve(a(Me)).then(function(Je){Gb(Me)&&!C||we(Je,Me)}).catch(function(Je){return ee(Je)}),U({type:"reset"})},[a,we,ee,C]),pe=w.useCallback(function(){if(L.current){U({type:"openDialog"}),N();var Me={multiple:l,types:_};window.showOpenFilePicker(Me).then(function(Je){return a(Je)}).then(function(Je){we(Je,null),U({type:"closeDialog"})}).catch(function(Je){cie(Je)?(D(Je),U({type:"closeDialog"})):die(Je)?(L.current=!1,R.current?(R.current.value=null,R.current.click()):ee(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ee(Je)});return}R.current&&(U({type:"openDialog"}),N(),R.current.value=null,R.current.click())},[U,N,D,x,we,ee,_,l]),De=w.useCallback(function(Me){!I.current||!I.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),pe())},[I,pe]),xe=w.useCallback(function(){U({type:"focus"})},[]),le=w.useCallback(function(){U({type:"blur"})},[]),re=w.useCallback(function(){j||(aie()?setTimeout(pe,0):pe())},[j,pe]),Se=function(Je){return s?null:Je},Ne=function(Je){return E?null:Se(Je)},ye=function(Je){return A?null:Se(Je)},$e=function(Je){C&&Je.stopPropagation()},rt=w.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Je=Me.refKey,dt=Je===void 0?"ref":Je,xt=Me.role,kt=Me.onKeyDown,Pt=Me.onFocus,Mt=Me.onBlur,ct=Me.onClick,hr=Me.onDragEnter,Gt=Me.onDragOver,Dr=Me.onDragLeave,lr=Me.onDrop,Er=Kb(Me,hie);return Sn(Sn(EC({onKeyDown:Ne(Qo(kt,De)),onFocus:Ne(Qo(Pt,xe)),onBlur:Ne(Qo(Mt,le)),onClick:Se(Qo(ct,re)),onDragEnter:ye(Qo(hr,he)),onDragOver:ye(Qo(Gt,me)),onDragLeave:ye(Qo(Dr,oe)),onDrop:ye(Qo(lr,ve)),role:typeof xt=="string"&&xt!==""?xt:"presentation"},dt,I),!s&&!E?{tabIndex:0}:{}),Er)}},[I,De,xe,le,re,he,me,oe,ve,E,A,s]),nt=w.useCallback(function(Me){Me.stopPropagation()},[]),vt=w.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Je=Me.refKey,dt=Je===void 0?"ref":Je,xt=Me.onChange,kt=Me.onClick,Pt=Kb(Me,mie),Mt=EC({accept:O,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Se(Qo(xt,ve)),onClick:Se(Qo(kt,nt)),tabIndex:-1},dt,R);return Sn(Sn({},Mt),Pt)}},[R,r,l,ve,s]);return Sn(Sn({},B),{},{isFocused:q&&!s,getRootProps:rt,getInputProps:vt,rootRef:I,inputRef:R,open:Se(pe)})}function Nie(e,t){switch(t.type){case"focus":return Sn(Sn({},e),{},{isFocused:!0});case"blur":return Sn(Sn({},e),{},{isFocused:!1});case"openDialog":return Sn(Sn({},PC),{},{isFileDialogActive:!0});case"closeDialog":return Sn(Sn({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Sn(Sn({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Sn(Sn({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Sn({},PC);default:return e}}function ik(){}function Sie({vehicle:e,onSave:t,onCancel:r,onScanBarcode:s}){var S,T,O,_,N,D,I,R,M,$,B,U,q,W,L,V,G,Z,ee,he,me,oe,we,ve,pe,De;const{toast:a}=_t(),[i,o]=w.useState(!1),[l,c]=w.useState({vin:"",make:"",model:"",year:new Date().getFullYear(),type:bt.RV,status:tr.AVAILABLE,price:0,cost:0,location:"",features:[],images:[],customFields:{videos:[],exteriorColor:"",interiorColor:"",length:"",weight:"",sleeps:"",slideouts:"",fuelType:"",mileage:"",condition:"New"}}),[d,f]=w.useState(""),[u,h]=w.useState(""),[m,v]=w.useState(!1);w.useEffect(()=>{e&&c({...e,customFields:{...e.customFields,videos:e.customFields.videos||[]}})},[e]);const{getRootProps:g,getInputProps:p}=Cx({accept:{"image/*":[]},onDrop:xe=>{const le=xe.map(re=>URL.createObjectURL(re));c(re=>({...re,images:[...re.images||[],...le]})),a({title:"Images Added",description:`Added ${xe.length} images`})}}),x=async xe=>{if(xe.preventDefault(),!l.vin||!l.make||!l.model||!l.year){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}o(!0);try{await t(l),a({title:"Success",description:`Vehicle ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} vehicle`,variant:"destructive"})}finally{o(!1)}},b=()=>{var xe;d.trim()&&!((xe=l.features)!=null&&xe.includes(d.trim()))&&(c(le=>({...le,features:[...le.features||[],d.trim()]})),f(""))},y=xe=>{c(le=>{var re;return{...le,features:((re=le.features)==null?void 0:re.filter(Se=>Se!==xe))||[]}})},j=()=>{u.trim()&&(c(xe=>{var le;return{...xe,customFields:{...xe.customFields,videos:[...((le=xe.customFields)==null?void 0:le.videos)||[],u.trim()]}}}),h(""))},E=xe=>{c(le=>{var re,Se;return{...le,customFields:{...le.customFields,videos:((Se=(re=le.customFields)==null?void 0:re.videos)==null?void 0:Se.filter(Ne=>Ne!==xe))||[]}}})},A=xe=>{c(le=>{var re;return{...le,images:((re=le.images)==null?void 0:re.filter(Se=>Se!==xe))||[]}})},C=xe=>{xe.length===17?(c(le=>({...le,vin:xe})),a({title:"Barcode Scanned",description:`VIN: ${xe}`}),v(!1)):a({title:"Invalid Barcode",description:"The scanned barcode does not appear to be a valid VIN",variant:"destructive"})};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Vehicle":"Add New Home"}),n.jsx(Be,{children:e?"Update vehicle details":"Add a new home to inventory"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vin",children:"VIN *"}),n.jsxs("div",{className:"flex",children:[n.jsx(Pe,{id:"vin",value:l.vin,onChange:xe=>c(le=>({...le,vin:xe.target.value})),placeholder:"Vehicle Identification Number",className:"flex-1"}),n.jsx(J,{type:"button",variant:"outline",className:"ml-2",onClick:()=>v(!0),children:n.jsx(JM,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"year",children:"Year *"}),n.jsx(Pe,{id:"year",type:"number",value:l.year,onChange:xe=>c(le=>({...le,year:parseInt(xe.target.value)||new Date().getFullYear()})),min:"1900",max:new Date().getFullYear()+1})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"make",children:"Make *"}),n.jsx(Pe,{id:"make",value:l.make,onChange:xe=>c(le=>({...le,make:xe.target.value})),placeholder:"e.g., Forest River, Winnebago"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"model",children:"Model *"}),n.jsx(Pe,{id:"model",value:l.model,onChange:xe=>c(le=>({...le,model:xe.target.value})),placeholder:"e.g., Georgetown, View"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Type"}),n.jsxs(We,{value:l.type,onValueChange:xe=>c(le=>({...le,type:xe})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:bt.RV,children:"RV"}),n.jsx(K,{value:bt.MOTORHOME,children:"Motorhome"}),n.jsx(K,{value:bt.TRAVEL_TRAILER,children:"Travel Trailer"}),n.jsx(K,{value:bt.FIFTH_WHEEL,children:"Fifth Wheel"}),n.jsx(K,{value:bt.TOY_HAULER,children:"Toy Hauler"}),n.jsx(K,{value:bt.SINGLE_WIDE,children:"Single Wide MH"}),n.jsx(K,{value:bt.DOUBLE_WIDE,children:"Double Wide MH"}),n.jsx(K,{value:bt.TRIPLE_WIDE,children:"Triple Wide MH"}),n.jsx(K,{value:bt.PARK_MODEL,children:"Park Model"}),n.jsx(K,{value:bt.MODULAR_HOME,children:"Modular Home"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(We,{value:l.status,onValueChange:xe=>c(le=>({...le,status:xe})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:tr.AVAILABLE,children:"Available"}),n.jsx(K,{value:tr.RESERVED,children:"Reserved"}),n.jsx(K,{value:tr.SOLD,children:"Sold"}),n.jsx(K,{value:tr.SERVICE,children:"Service"}),n.jsx(K,{value:tr.DELIVERED,children:"Delivered"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"location",children:"Location"}),n.jsx(Pe,{id:"location",value:l.location,onChange:xe=>c(le=>({...le,location:xe.target.value})),placeholder:"e.g., Lot A-15"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"price",children:"Price *"}),n.jsx(Pe,{id:"price",type:"number",value:l.price,onChange:xe=>c(le=>({...le,price:parseFloat(xe.target.value)||0})),min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"cost",children:"Cost *"}),n.jsx(Pe,{id:"cost",type:"number",value:l.cost,onChange:xe=>c(le=>({...le,cost:parseFloat(xe.target.value)||0})),min:"0",step:"0.01"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Features"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{value:d,onChange:xe=>f(xe.target.value),placeholder:"Add a feature",onKeyDown:xe=>{xe.key==="Enter"&&(xe.preventDefault(),b())}}),n.jsx(J,{type:"button",onClick:b,children:n.jsx(Et,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(S=l.features)==null?void 0:S.map((xe,le)=>n.jsxs(Fe,{variant:"secondary",className:"flex items-center gap-1",children:[xe,n.jsx(qt,{className:"h-3 w-3 cursor-pointer",onClick:()=>y(xe)})]},le)),(!l.features||l.features.length===0)&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No features added yet"})]})]}),(l.type===bt.SINGLE_WIDE||l.type===bt.DOUBLE_WIDE||l.type===bt.TRIPLE_WIDE||l.type===bt.PARK_MODEL||l.type===bt.MODULAR_HOME)&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Manufactured Housing Details"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"squareFootage",children:"Square Footage"}),n.jsx(Pe,{id:"squareFootage",value:((T=l.customFields)==null?void 0:T.squareFootage)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,squareFootage:xe.target.value}})),placeholder:"e.g., 1200"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"bedrooms",children:"Bedrooms"}),n.jsxs(We,{value:((O=l.customFields)==null?void 0:O.bedrooms)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,bedrooms:xe}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select number"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"1",children:"1"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"4",children:"4"}),n.jsx(K,{value:"5+",children:"5+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"bathrooms",children:"Bathrooms"}),n.jsxs(We,{value:((_=l.customFields)==null?void 0:_.bathrooms)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,bathrooms:xe}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select number"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"1",children:"1"}),n.jsx(K,{value:"1.5",children:"1.5"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"2.5",children:"2.5"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"3+",children:"3+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"constructionType",children:"Construction Type"}),n.jsxs(We,{value:((N=l.customFields)==null?void 0:N.constructionType)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,constructionType:xe}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select type"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"Manufactured",children:"Manufactured"}),n.jsx(K,{value:"Modular",children:"Modular"}),n.jsx(K,{value:"Park Model",children:"Park Model"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"exteriorSiding",children:"Exterior Siding"}),n.jsx(Pe,{id:"exteriorSiding",value:((D=l.customFields)==null?void 0:D.exteriorSiding)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,exteriorSiding:xe.target.value}})),placeholder:"e.g., Vinyl, Hardiplank"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"roofType",children:"Roof Type"}),n.jsx(Pe,{id:"roofType",value:((I=l.customFields)==null?void 0:I.roofType)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,roofType:xe.target.value}})),placeholder:"e.g., Shingle, Metal"})]})]})]}),(l.type===bt.SINGLE_WIDE||l.type===bt.DOUBLE_WIDE||l.type===bt.TRIPLE_WIDE||l.type===bt.PARK_MODEL||l.type===bt.MODULAR_HOME)&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"squareFootage",children:"Square Footage"}),n.jsx(Pe,{id:"squareFootage",value:((R=l.customFields)==null?void 0:R.squareFootage)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,squareFootage:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"constructionType",children:"Construction Type"}),n.jsxs(We,{value:((M=l.customFields)==null?void 0:M.constructionType)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,constructionType:xe}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select type"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"Manufactured",children:"Manufactured"}),n.jsx(K,{value:"Modular",children:"Modular"}),n.jsx(K,{value:"Park Model",children:"Park Model"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"bedrooms",children:"Bedrooms"}),n.jsxs(We,{value:(($=l.customFields)==null?void 0:$.bedrooms)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,bedrooms:xe}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select number"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"1",children:"1"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"4",children:"4"}),n.jsx(K,{value:"5+",children:"5+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"bathrooms",children:"Bathrooms"}),n.jsxs(We,{value:((B=l.customFields)==null?void 0:B.bathrooms)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,bathrooms:xe}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select number"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"1",children:"1"}),n.jsx(K,{value:"1.5",children:"1.5"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"2.5",children:"2.5"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"3+",children:"3+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"exteriorSiding",children:"Exterior Siding"}),n.jsx(Pe,{id:"exteriorSiding",value:((U=l.customFields)==null?void 0:U.exteriorSiding)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,exteriorSiding:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"roofType",children:"Roof Type"}),n.jsx(Pe,{id:"roofType",value:((q=l.customFields)==null?void 0:q.roofType)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,roofType:xe.target.value}}))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Specifications"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"exteriorColor",children:"Exterior Color"}),n.jsx(Pe,{id:"exteriorColor",value:((W=l.customFields)==null?void 0:W.exteriorColor)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,exteriorColor:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"interiorColor",children:"Interior Color"}),n.jsx(Pe,{id:"interiorColor",value:((L=l.customFields)==null?void 0:L.interiorColor)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,interiorColor:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"length",children:"Length (ft)"}),n.jsx(Pe,{id:"length",value:((V=l.customFields)==null?void 0:V.length)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,length:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"weight",children:"Weight (lbs)"}),n.jsx(Pe,{id:"weight",value:((G=l.customFields)==null?void 0:G.weight)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,weight:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"sleeps",children:"Sleeps"}),n.jsx(Pe,{id:"sleeps",value:((Z=l.customFields)==null?void 0:Z.sleeps)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,sleeps:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"slideouts",children:"Slideouts"}),n.jsx(Pe,{id:"slideouts",value:((ee=l.customFields)==null?void 0:ee.slideouts)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,slideouts:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"fuelType",children:"Fuel Type"}),n.jsxs(We,{value:((he=l.customFields)==null?void 0:he.fuelType)||"",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,fuelType:xe}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select fuel type"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"Not Applicable"}),n.jsx(K,{value:"gasoline",children:"Gasoline"}),n.jsx(K,{value:"diesel",children:"Diesel"}),n.jsx(K,{value:"propane",children:"Propane"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"mileage",children:"Mileage"}),n.jsx(Pe,{id:"mileage",value:((me=l.customFields)==null?void 0:me.mileage)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,mileage:xe.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"condition",children:"Condition"}),n.jsxs(We,{value:((oe=l.customFields)==null?void 0:oe.condition)||"New",onValueChange:xe=>c(le=>({...le,customFields:{...le.customFields,condition:xe}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"New",children:"New"}),n.jsx(K,{value:"Used",children:"Used"}),n.jsx(K,{value:"Certified Pre-Owned",children:"Certified Pre-Owned"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Images"}),n.jsxs("div",{...g(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[n.jsx("input",{...p()}),n.jsx(Qh,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop images here, or click to select files"})]}),l.images&&l.images.length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:l.images.map((xe,le)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:xe,alt:`Vehicle ${le+1}`,className:"h-24 w-full object-cover rounded-md"}),n.jsx(J,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>A(xe),children:n.jsx(qt,{className:"h-3 w-3"})})]},le))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Videos"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{value:u,onChange:xe=>h(xe.target.value),placeholder:"Add a video URL (YouTube, Vimeo, etc.)",onKeyDown:xe=>{xe.key==="Enter"&&(xe.preventDefault(),j())}}),n.jsx(J,{type:"button",onClick:j,children:n.jsx(Et,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[(ve=(we=l.customFields)==null?void 0:we.videos)==null?void 0:ve.map((xe,le)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-md",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Rb,{className:"h-4 w-4 mr-2 text-blue-500"}),n.jsx("a",{href:xe,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate max-w-md",children:xe})]}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(xe),children:n.jsx(qt,{className:"h-4 w-4"})})]},le)),(!((pe=l.customFields)!=null&&pe.videos)||l.customFields.videos.length===0)&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No videos added yet"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),n.jsx(ir,{value:((De=l.customFields)==null?void 0:De.notes)||"",onChange:xe=>c(le=>({...le,customFields:{...le.customFields,notes:xe.target.value}})),placeholder:"Add any additional notes about this vehicle...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Home"]})})]})]})})]}),m&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Scan VIN Barcode"}),n.jsx(Be,{children:"Position the barcode in front of your camera"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md",children:n.jsx(Yl,{className:"h-12 w-12 text-white/50"})}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),n.jsx(J,{onClick:()=>{C("1FDXE4FS8KDC"+Math.floor(Math.random()*1e5).toString().padStart(5,"0"))},children:"Simulate Scan"})]})]})]})})]})}function Cie({vehicle:e,onClose:t,onEdit:r}){var i,o,l,c,d,f,u,h,m,v,g,p,x,b,y,j,E,A,C,S,T,O,_;const s=N=>{switch(N){case tr.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case tr.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case tr.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case tr.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case tr.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=N=>N.replace("_"," ").toUpperCase();return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:[e.year," ",e.make," ",e.model]}),n.jsxs(Be,{children:["VIN: ",e.vin]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>{t(),r(e)},size:"sm",children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",s(e.status)),children:e.status.toUpperCase()}),n.jsx(Fe,{variant:"outline",children:a(e.type)}),n.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:Ie(e.price)})]}),n.jsxs(Ar,{defaultValue:"details",className:"space-y-4",children:[n.jsxs(jr,{children:[n.jsx(Ze,{value:"details",children:"Details"}),n.jsx(Ze,{value:"images",children:"Images"}),n.jsx(Ze,{value:"features",children:"Features"}),n.jsx(Ze,{value:"videos",children:"Videos"}),n.jsx(Ze,{value:"notes",children:"Notes"})]}),n.jsxs(tt,{value:"details",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Make"}),n.jsx("p",{className:"font-medium",children:e.make})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),n.jsx("p",{className:"font-medium",children:e.model})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Year"}),n.jsx("p",{className:"font-medium",children:e.year})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"VIN"}),n.jsx("p",{className:"font-medium font-mono",children:e.vin})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),n.jsx("p",{className:"font-medium",children:a(e.type)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),n.jsx("p",{className:"font-medium",children:e.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),n.jsx("p",{className:"font-medium text-primary",children:Ie(e.price)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Cost"}),n.jsx("p",{className:"font-medium",children:Ie(e.cost)})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Specifications"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[((i=e.customFields)==null?void 0:i.exteriorColor)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Color"}),n.jsx("p",{className:"font-medium",children:e.customFields.exteriorColor})]}),((o=e.customFields)==null?void 0:o.interiorColor)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Interior Color"}),n.jsx("p",{className:"font-medium",children:e.customFields.interiorColor})]}),((l=e.customFields)==null?void 0:l.length)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Length"}),n.jsxs("p",{className:"font-medium",children:[e.customFields.length," ft"]})]}),((c=e.customFields)==null?void 0:c.weight)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Weight"}),n.jsxs("p",{className:"font-medium",children:[e.customFields.weight," lbs"]})]}),((d=e.customFields)==null?void 0:d.sleeps)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sleeps"}),n.jsx("p",{className:"font-medium",children:e.customFields.sleeps})]}),((f=e.customFields)==null?void 0:f.slideouts)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Slideouts"}),n.jsx("p",{className:"font-medium",children:e.customFields.slideouts})]}),((u=e.customFields)==null?void 0:u.fuelType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Fuel Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.fuelType})]}),((h=e.customFields)==null?void 0:h.mileage)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Mileage"}),n.jsx("p",{className:"font-medium",children:e.customFields.mileage})]}),((m=e.customFields)==null?void 0:m.condition)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),n.jsx("p",{className:"font-medium",children:e.customFields.condition})]}),(e.type===bt.SINGLE_WIDE||e.type===bt.DOUBLE_WIDE||e.type===bt.TRIPLE_WIDE||e.type===bt.PARK_MODEL||e.type===bt.MODULAR_HOME)&&n.jsxs(n.Fragment,{children:[((v=e.customFields)==null?void 0:v.squareFootage)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),n.jsxs("p",{className:"font-medium",children:[e.customFields.squareFootage," sq ft"]})]}),((g=e.customFields)==null?void 0:g.bedrooms)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),n.jsx("p",{className:"font-medium",children:e.customFields.bedrooms})]}),((p=e.customFields)==null?void 0:p.bathrooms)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),n.jsx("p",{className:"font-medium",children:e.customFields.bathrooms})]}),((x=e.customFields)==null?void 0:x.constructionType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.constructionType})]}),((b=e.customFields)==null?void 0:b.exteriorSiding)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),n.jsx("p",{className:"font-medium",children:e.customFields.exteriorSiding})]}),((y=e.customFields)==null?void 0:y.roofType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.roofType})]})]}),(e.type===bt.SINGLE_WIDE||e.type===bt.DOUBLE_WIDE||e.type===bt.TRIPLE_WIDE||e.type===bt.PARK_MODEL||e.type===bt.MODULAR_HOME)&&n.jsxs(n.Fragment,{children:[((j=e.customFields)==null?void 0:j.squareFootage)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),n.jsxs("p",{className:"font-medium",children:[e.customFields.squareFootage," sq ft"]})]}),((E=e.customFields)==null?void 0:E.bedrooms)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),n.jsx("p",{className:"font-medium",children:e.customFields.bedrooms})]}),((A=e.customFields)==null?void 0:A.bathrooms)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),n.jsx("p",{className:"font-medium",children:e.customFields.bathrooms})]}),((C=e.customFields)==null?void 0:C.constructionType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.constructionType})]}),((S=e.customFields)==null?void 0:S.exteriorSiding)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),n.jsx("p",{className:"font-medium",children:e.customFields.exteriorSiding})]}),((T=e.customFields)==null?void 0:T.roofType)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),n.jsx("p",{className:"font-medium",children:e.customFields.roofType})]})]})]})]})]}),n.jsx(tt,{value:"images",children:e.images&&e.images.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.images.map((N,D)=>n.jsx("div",{className:"overflow-hidden rounded-md",children:n.jsx("img",{src:N,alt:`${e.make} ${e.model} ${D+1}`,className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})},D))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Qh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No images available"})]})}),n.jsx(tt,{value:"features",children:e.features&&e.features.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.features.map((N,D)=>n.jsxs("div",{className:"flex items-center p-2 bg-muted/30 rounded-md",children:[n.jsx(ia,{className:"h-4 w-4 mr-2 text-primary"}),n.jsx("span",{children:N})]},D))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ia,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No features listed"})]})}),n.jsx(tt,{value:"videos",children:(O=e.customFields)!=null&&O.videos&&e.customFields.videos.length>0?n.jsx("div",{className:"space-y-4",children:e.customFields.videos.map((N,D)=>n.jsx("div",{className:"p-3 bg-muted/30 rounded-md",children:n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Rb,{className:"h-4 w-4 mr-2 text-primary"}),n.jsxs("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["Video ",D+1]})]})},D))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Rb,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No videos available"})]})}),n.jsx(tt,{value:"notes",children:(_=e.customFields)!=null&&_.notes?n.jsx("div",{className:"p-4 bg-muted/30 rounded-md whitespace-pre-wrap",children:e.customFields.notes}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No notes available"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Close"}),n.jsxs(J,{onClick:()=>r(e),children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]})]})]})]})})}function Aie({onImport:e,onCancel:t}){const{toast:r}=_t(),[s,a]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState({}),[d,f]=w.useState(!1),[u,h]=w.useState("upload"),[m,v]=w.useState([]),g=["vin","make","model","year","price","cost"],p=[{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price"},{key:"cost",label:"Cost"},{key:"location",label:"Location"},{key:"features",label:"Features"},{key:"exteriorColor",label:"Exterior Color"},{key:"interiorColor",label:"Interior Color"},{key:"length",label:"Length"},{key:"weight",label:"Weight"},{key:"sleeps",label:"Sleeps"},{key:"slideouts",label:"Slideouts"},{key:"fuelType",label:"Fuel Type"},{key:"mileage",label:"Mileage"},{key:"condition",label:"Condition"}],x=T=>{var _;const O=(_=T.target.files)==null?void 0:_[0];O&&(a(O),tm.parse(O,{header:!0,skipEmptyLines:!0,complete:N=>{if(o(N.data),N.meta.fields){const D={};N.meta.fields.forEach(I=>{const R=I.toLowerCase().replace(/[^a-z0-9]/g,"");p.forEach(M=>{const $=M.key.toLowerCase();(R===$||R===M.label.toLowerCase().replace(/[^a-z0-9]/g,""))&&(D[I]=M.key)})}),c(D)}h("map")},error:N=>{r({title:"Error Parsing CSV",description:N.message,variant:"destructive"})}}))},b=(T,O)=>{c(_=>({..._,[T]:O}))},y=()=>{if(g.filter(O=>Object.values(l).includes(O)).length<g.length){r({title:"Missing Required Fields",description:`Please map all required fields: ${g.join(", ")}`,variant:"destructive"});return}h("preview"),v(i.map((O,_)=>_))},j=T=>{v(T?i.map((O,_)=>_):[])},E=T=>{m.includes(T)?v(m.filter(O=>O!==T)):v([...m,T])},A=async()=>{if(m.length===0){r({title:"No Rows Selected",description:"Please select at least one row to import",variant:"destructive"});return}f(!0);try{const T=m.map(O=>{const _=i[O],N={images:[],features:[],customFields:{}};return Object.entries(l).forEach(([D,I])=>{const R=_[D];I==="features"?N.features=R?R.split(",").map(M=>M.trim()):[]:I==="year"||I==="price"||I==="cost"?N[I]=parseFloat(R)||0:I==="type"?N.type=C(R):I==="status"?N.status=S(R):["exteriorColor","interiorColor","length","weight","sleeps","slideouts","fuelType","mileage","condition"].includes(I)?N.customFields={...N.customFields,[I]:R}:N[I]=R}),N});await e(T),r({title:"Import Successful",description:`Imported ${T.length} vehicles`})}catch{r({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}finally{f(!1)}},C=T=>{const O=T.toLowerCase().replace(/[^a-z0-9]/g,"");return O.includes("motorhome")?bt.MOTORHOME:O.includes("travel")&&O.includes("trailer")?bt.TRAVEL_TRAILER:O.includes("fifth")&&O.includes("wheel")?bt.FIFTH_WHEEL:O.includes("toy")&&O.includes("hauler")?bt.TOY_HAULER:bt.RV},S=T=>{const O=T.toLowerCase().replace(/[^a-z0-9]/g,"");return O.includes("reserved")?tr.RESERVED:O.includes("sold")?tr.SOLD:O.includes("service")?tr.SERVICE:O.includes("delivered")?tr.DELIVERED:tr.AVAILABLE};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Import Inventory from CSV"}),n.jsxs(Be,{children:[u==="upload"&&"Upload a CSV file with your inventory data",u==="map"&&"Map CSV columns to vehicle fields",u==="preview"&&"Preview and select vehicles to import"]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{children:[u==="upload"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[n.jsx(Ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload a CSV file with your inventory data"}),n.jsx(Pe,{type:"file",accept:".csv",onChange:x,className:"max-w-sm mx-auto"})]}),n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-medium mb-2",children:"CSV Format Guidelines"}),n.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[n.jsx("li",{children:"• File should be in CSV format"}),n.jsx("li",{children:"• First row should contain column headers"}),n.jsx("li",{children:"• Required fields: VIN, Make, Model, Year, Price, Cost"}),n.jsx("li",{children:"• Features should be comma-separated within quotes"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{variant:"outline",onClick:t,children:"Cancel"})})]}),u==="map"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[n.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[n.jsx(Ns,{className:"h-4 w-4 mr-2"}),s==null?void 0:s.name]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," rows found"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-medium",children:"Map CSV Columns to Vehicle Fields"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Required fields are marked with *"}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto p-2",children:s&&i.length>0&&Object.keys(i[0]).map(T=>n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-1/3 font-medium truncate",children:T}),n.jsx("div",{className:"w-2/3",children:n.jsxs("select",{value:l[T]||"",onChange:O=>b(T,O.target.value),className:"w-full p-2 border rounded-md",children:[n.jsx("option",{value:"",children:"-- Skip this field --"}),p.map(O=>n.jsxs("option",{value:O.key,children:[O.label," ",g.includes(O.key)?"*":""]},O.key))]})})]},T))})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Cancel"}),n.jsx(J,{onClick:y,children:"Preview Data"})]})]}),u==="preview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{checked:m.length===i.length,onCheckedChange:j}),n.jsxs(ae,{children:["Select All (",i.length," vehicles)"]})]}),n.jsxs(Fe,{children:[m.length," selected"]})]}),n.jsx("div",{className:"border rounded-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left"}),Object.entries(l).filter(([T,O])=>O).map(([T,O])=>n.jsxs("th",{className:"p-2 text-left text-sm",children:[O,g.includes(O)&&n.jsx("span",{className:"text-red-500",children:"*"})]},T))]})}),n.jsx("tbody",{children:i.map((T,O)=>n.jsxs("tr",{className:"border-t hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:n.jsx(Xt,{checked:m.includes(O),onCheckedChange:()=>E(O)})}),Object.entries(l).filter(([_,N])=>N).map(([_,N])=>n.jsx("td",{className:"p-2 text-sm",children:T[_]||n.jsx("span",{className:"text-muted-foreground italic",children:"Empty"})},_))]},O))})]})})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(J,{variant:"outline",onClick:()=>h("map"),children:"Back to Mapping"}),n.jsx(J,{onClick:A,disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(L4,{className:"h-4 w-4 mr-2"}),"Import ",m.length," Vehicles"]})})]})]})]})]})})}function Eie({onScan:e,onClose:t}){const{toast:r}=_t(),[s,a]=w.useState(!1),[i,o]=w.useState(null);w.useEffect(()=>{const d=setTimeout(()=>{a(!0)},1e3);return()=>clearTimeout(d)},[]);const l=()=>{const d="ABCDEFGHJKLMNPRSTUVWXYZ0123456789";let f="";for(let u=0;u<17;u++)f+=d.charAt(Math.floor(Math.random()*d.length));o(f),r({title:"Barcode Scanned",description:`VIN: ${f}`})},c=()=>{i&&e(i)};return n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Scan VIN Barcode"}),n.jsx(Be,{children:"Position the barcode in front of your camera"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-4",children:[n.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md relative",children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-3/4 h-1 bg-red-500 animate-pulse"})}),n.jsx("div",{className:"text-white text-sm absolute bottom-2 left-2",children:i?`Scanned: ${i}`:"Scanning..."})]}):n.jsx(Yl,{className:"h-12 w-12 text-white/50"})}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Cancel"}),i?n.jsxs(J,{onClick:c,children:[n.jsx(Tj,{className:"h-4 w-4 mr-2"}),"Confirm"]}):n.jsx(J,{onClick:l,children:"Simulate Scan"})]})]})]})})}function ok(){const{vehicles:e,createVehicle:t,updateVehicleStatus:r,deleteVehicle:s}=Ud(),{toast:a}=_t(),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[d,f]=w.useState(!1),[u,h]=w.useState(!1),[m,v]=w.useState(null),g=()=>{v(null),o(!0)},p=C=>{v(C),o(!0)},x=C=>{v(C),c(!0)},b=async C=>{if(window.confirm("Are you sure you want to delete this vehicle?"))try{await s(C),a({title:"Vehicle Deleted",description:"The vehicle has been removed from inventory"})}catch{a({title:"Error",description:"Failed to delete vehicle",variant:"destructive"})}},y=async(C,S)=>{try{await r(C,S),a({title:"Status Updated",description:`Vehicle status changed to ${S}`})}catch{a({title:"Error",description:"Failed to update vehicle status",variant:"destructive"})}},j=async C=>{try{m?(await r(m.id,C.status||m.status),a({title:"Vehicle Updated",description:"Vehicle information has been updated"})):(await t(C),a({title:"Vehicle Added",description:"New vehicle has been added to inventory"})),o(!1),v(null)}catch{a({title:"Error",description:`Failed to ${m?"update":"create"} vehicle`,variant:"destructive"})}},E=async C=>{try{for(const S of C)await t(S);f(!1),a({title:"Import Successful",description:`Imported ${C.length} vehicles`})}catch{a({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}},A=C=>{const S=e.find(T=>T.vin===C);S?(v(S),c(!0),a({title:"Vehicle Found",description:`Found existing vehicle with VIN: ${C}`})):(v(null),o(!0),setTimeout(()=>{const T=document.getElementById("vin");if(T){T.value=C;const O=new Event("input",{bubbles:!0});T.dispatchEvent(O)}},100),a({title:"New VIN Scanned",description:`Creating new vehicle with VIN: ${C}`})),h(!1)};return n.jsxs("div",{className:"space-y-8",children:[i&&n.jsx(Sie,{vehicle:m||void 0,onSave:j,onCancel:()=>{o(!1),v(null)}}),l&&m&&n.jsx(Cie,{vehicle:m,onClose:()=>c(!1),onEdit:p}),d&&n.jsx(Aie,{onImport:E,onCancel:()=>f(!1)}),u&&n.jsx(Eie,{onScan:A,onClose:()=>h(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Inventory Management"}),n.jsx("p",{className:"ri-page-description",children:"Manage your RV and motorhome inventory"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(J,{variant:"outline",onClick:()=>h(!0),children:[n.jsx(JM,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),n.jsxs(J,{variant:"outline",onClick:()=>f(!0),children:[n.jsx(L4,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),n.jsxs(J,{onClick:g,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Home"]})]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Units"}),n.jsx(ia,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"+5 units this month"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Available"}),n.jsx(ia,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(C=>C.status===tr.AVAILABLE).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Ready for sale"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Reserved"}),n.jsx(ia,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(C=>C.status===tr.RESERVED).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Pending sale"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Total Value"}),n.jsx($t,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Ie(e.reduce((C,S)=>C+S.price,0))}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Inventory value"]})]})]})]}),n.jsx(Cae,{vehicles:e,onEdit:p,onDelete:b,onView:x,onStatusChange:y})]})}function Pie(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(ok,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(ok,{})})]})}const Tie=[{id:"1",customerId:"cust-1",vehicleId:"veh-1",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:Mi.SENT,validUntil:new Date("2024-02-15"),notes:"Customer interested in financing options",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-16")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",items:[{id:"3",description:"2023 Winnebago View",quantity:1,unitPrice:89e3,total:89e3}],subtotal:89e3,tax:7120,total:96120,status:Mi.ACCEPTED,validUntil:new Date("2024-02-20"),notes:"Ready to proceed with purchase",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}];function _ie({quote:e,onClose:t,onEdit:r}){const s=a=>{switch(a){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Quote #",e.id]}),n.jsx(Be,{children:"Quote details and line items"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>r(e),size:"sm",children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx("div",{className:"mt-1",children:n.jsx(Fe,{className:Ge("ri-badge-status",s(e.status)),children:e.status.toUpperCase()})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:ft(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),n.jsx("p",{className:"font-medium",children:ft(e.validUntil)})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),n.jsx("div",{className:"space-y-3",children:e.items.map((a,i)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:a.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",a.quantity," × ",Ie(a.unitPrice)]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg",children:Ie(a.total)})})]},a.id))})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Ie(e.subtotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:Ie(e.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Ie(e.total)})]})]})}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:e.notes})})]})]})]})})}function lk(){const{toast:e}=_t(),[t,r]=w.useState(Tie),[s,a]=w.useState(""),[i,o]=w.useState("all"),[l,c]=w.useState(!1),[d,f]=w.useState(null),[u,h]=w.useState(null),[m,v]=w.useState(""),g=O=>{switch(O){case Mi.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Mi.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Mi.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Mi.ACCEPTED:return"bg-green-50 text-green-700 border-green-200";case Mi.REJECTED:return"bg-red-50 text-red-700 border-red-200";case Mi.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},p=t.filter(O=>{const _=O.id.toLowerCase().includes(s.toLowerCase())||O.customerId.toLowerCase().includes(s.toLowerCase()),N=i==="all"||O.status===i;return _&&N}),x=()=>{f(null),v(""),c(!0)},b=O=>{f(O),v(O.customerId),c(!0)},y=O=>{h(O)},j=()=>h(null),E=async O=>{try{if(d)r(_=>_.map(N=>N.id===d.id?{...N,...O,updatedAt:new Date}:N)),e({title:"Success",description:"Quote updated successfully"});else{const _={id:Math.random().toString(36).substr(2,9),...O,status:Mi.DRAFT,createdAt:new Date,updatedAt:new Date};r(N=>[...N,_]),e({title:"Success",description:"Quote created successfully"})}c(!1),f(null)}catch{e({title:"Error",description:"Failed to save quote",variant:"destructive"})}},A=async O=>{try{r(_=>_.map(N=>N.id===O?{...N,status:Mi.SENT,updatedAt:new Date}:N)),e({title:"Success",description:"Quote sent to customer"})}catch{e({title:"Error",description:"Failed to send quote",variant:"destructive"})}},C=async O=>{try{const _=t.find(N=>N.id===O);if(_){const N={..._,id:Math.random().toString(36).substr(2,9),status:Mi.DRAFT,createdAt:new Date,updatedAt:new Date};r(D=>[...D,N]),e({title:"Success",description:"Quote duplicated successfully"})}}catch{e({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},S=async O=>{if(window.confirm("Are you sure you want to delete this quote?"))try{r(_=>_.filter(N=>N.id!==O)),e({title:"Success",description:"Quote deleted successfully"})}catch{e({title:"Error",description:"Failed to delete quote",variant:"destructive"})}},T={total:t.length,draft:t.filter(O=>O.status==="draft").length,sent:t.filter(O=>O.status==="sent").length,accepted:t.filter(O=>O.status==="accepted").length,totalValue:t.reduce((O,_)=>O+_.total,0),acceptedValue:t.filter(O=>O.status==="accepted").reduce((O,_)=>O+_.total,0)};return n.jsxs("div",{className:"space-y-8",children:[l&&n.jsx(yB,{quote:d,customerId:m,onSave:E,onCancel:()=>{c(!1),f(null)}}),u&&n.jsx(_ie,{quote:u,onClose:j,onEdit:b}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),n.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),n.jsxs(J,{className:"shadow-sm",onClick:x,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Quotes"}),n.jsx(Ns,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:T.total}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"All quotes"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(Ns,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:T.sent}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Accepted"}),n.jsx(Ns,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:T.accepted}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),T.total>0?Math.round(T.accepted/T.total*100):0,"% acceptance rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Quote Value"}),n.jsx($t,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Ie(T.totalValue)}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx($t,{className:"h-3 w-3 mr-1"}),Ie(T.acceptedValue)," accepted"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search quotes...",value:s,onChange:O=>a(O.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(We,{value:i,onValueChange:o,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:"draft",children:"Draft"}),n.jsx(K,{value:"sent",children:"Sent"}),n.jsx(K,{value:"viewed",children:"Viewed"}),n.jsx(K,{value:"accepted",children:"Accepted"}),n.jsx(K,{value:"rejected",children:"Rejected"}),n.jsx(K,{value:"expired",children:"Expired"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Quotes (",p.length,")"]}),n.jsx(Be,{children:"Manage customer quotes with advanced pricing and bundling"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[p.map(O=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",O.id]}),n.jsx(Fe,{className:Ge("ri-badge-status",g(O.status)),children:O.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",O.customerId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"}),n.jsx("span",{className:"font-bold text-primary ml-1",children:Ie(O.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Created:"})," ",ft(O.createdAt)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",ft(O.validUntil)]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[O.items.length," item(s)"]}),O.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",O.notes]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>y(O),children:[n.jsx(uc,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>b(O),children:[n.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Edit"]}),O.status==="draft"&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(O.id),children:[n.jsx(hl,{className:"h-3 w-3 mr-1"}),"Send"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>C(O.id),children:[n.jsx(D4,{className:"h-3 w-3 mr-1"}),"Copy"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>S(O.id),children:n.jsx($n,{className:"h-3 w-3"})})]})]},O.id)),p.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No quotes found"}),n.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})]})})]})]})}function Iie(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(lk,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(lk,{})})]})}function kie({schedule:e}){const[t,r]=w.useState(""),[s,a]=w.useState(1),[i,o]=w.useState("month"),[l,c]=w.useState("asc"),d=12,u=[...e.filter(x=>x.month.toString().includes(t))].sort((x,b)=>{const y=x[i],j=b[i];return l==="asc"?y>j?1:-1:y<j?1:-1}),h=Math.ceil(u.length/d),m=(s-1)*d,v=u.slice(m,m+d),g=x=>{i===x?c(l==="asc"?"desc":"asc"):(o(x),c("asc"))},p=x=>{a(x)};return e.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No amortization schedule available. Please calculate a loan first."}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"relative w-64",children:[n.jsx(hs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{placeholder:"Search by month...",value:t,onChange:x=>{r(x.target.value),a(1)},className:"pl-10"})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",m+1,"-",Math.min(m+d,u.length)," of ",u.length," payments"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("month"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Month"}),i==="month"&&(l==="asc"?n.jsx(rl,{className:"ml-1 h-3 w-3"}):n.jsx(tl,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("payment"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Payment"}),i==="payment"&&(l==="asc"?n.jsx(rl,{className:"ml-1 h-3 w-3"}):n.jsx(tl,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("principal"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Principal"}),i==="principal"&&(l==="asc"?n.jsx(rl,{className:"ml-1 h-3 w-3"}):n.jsx(tl,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("interest"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Interest"}),i==="interest"&&(l==="asc"?n.jsx(rl,{className:"ml-1 h-3 w-3"}):n.jsx(tl,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Additional"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("balance"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Balance"}),i==="balance"&&(l==="asc"?n.jsx(rl,{className:"ml-1 h-3 w-3"}):n.jsx(tl,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("totalInterestPaid"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Total Interest"}),i==="totalInterestPaid"&&(l==="asc"?n.jsx(rl,{className:"ml-1 h-3 w-3"}):n.jsx(tl,{className:"ml-1 h-3 w-3"}))]})})]})}),n.jsx("tbody",{children:v.map((x,b)=>n.jsxs("tr",{className:b%2===0?"bg-muted/20":"",children:[n.jsx("td",{className:"p-3",children:x.month}),n.jsx("td",{className:"p-3",children:Ie(x.payment)}),n.jsx("td",{className:"p-3",children:Ie(x.principal)}),n.jsx("td",{className:"p-3",children:Ie(x.interest)}),n.jsx("td",{className:"p-3",children:Ie(x.additionalCosts)}),n.jsx("td",{className:"p-3",children:Ie(x.balance)}),n.jsx("td",{className:"p-3",children:Ie(x.totalInterestPaid)})]},x.month))})]})}),h>1&&n.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[n.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:s===1,children:"First"}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(s-1),disabled:s===1,children:"Previous"}),n.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,h)},(x,b)=>{let y;return h<=5||s<=3?y=b+1:s>=h-2?y=h-4+b:y=s-2+b,n.jsx(J,{variant:s===y?"default":"outline",size:"sm",onClick:()=>p(y),children:y},y)})}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(s+1),disabled:s===h,children:"Next"}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(h),disabled:s===h,children:"Last"})]})]})}function Die({initialValues:e,onSave:t,onClose:r}){const{toast:s}=_t(),[a,i]=w.useState((e==null?void 0:e.loanAmount)||1e5),[o,l]=w.useState((e==null?void 0:e.downPayment)||2e4),[c,d]=w.useState((e==null?void 0:e.interestRate)||6.99),[f,u]=w.useState((e==null?void 0:e.loanTerm)||60),[h,m]=w.useState("monthly"),[v,g]=w.useState(!1),[p,x]=w.useState(0),[b,y]=w.useState(!1),[j,E]=w.useState(0),[A,C]=w.useState("calculator"),[S,T]=w.useState(0),[O,_]=w.useState(0),[N,D]=w.useState(0),[I,R]=w.useState([]);w.useEffect(()=>{M()},[a,o,c,f,h,v,p,b,j]);const M=()=>{const W=a-o;if(W<=0){T(0),_(0),D(0),R([]);return}const L=c/100/12,V=W*L/(1-Math.pow(1+L,-f));let G=0;v&&(G+=p),b&&(G+=V*(j/100));let Z=1;switch(h){case"biweekly":Z=12/26;break;case"weekly":Z=12/52;break;default:Z=1;break}const ee=V*Z+G*Z,he=f,me=V*he-W,oe=W+me+G*he,we=$(W,L,f,V,G);T(ee),_(me),D(oe),R(we)},$=(W,L,V,G,Z)=>{let ee=W,he=0;const me=[];for(let oe=1;oe<=V;oe++){const we=ee*L;let ve=G-we;if(ee<ve&&(ve=ee),ee-=ve,he+=we,me.push({month:oe,payment:G+Z,principal:ve,interest:we,additionalCosts:Z,balance:ee,totalInterestPaid:he}),ee<=0)break}return me},B=()=>{t&&t({loanAmount:a,downPayment:o,interestRate:c,loanTerm:f,paymentFrequency:h,includeInsurance:v,insuranceAmount:p,includeTax:b,taxRate:j,monthlyPayment:S,totalInterest:O,totalCost:N,amortizationSchedule:I}),s({title:"Loan Calculation Saved",description:"Your loan calculation has been saved successfully."})},U=()=>{window.print()},q=()=>{const L=[["Month","Payment","Principal","Interest","Additional Costs","Balance","Total Interest Paid"].join(","),...I.map(ee=>[ee.month,ee.payment.toFixed(2),ee.principal.toFixed(2),ee.interest.toFixed(2),ee.additionalCosts.toFixed(2),ee.balance.toFixed(2),ee.totalInterestPaid.toFixed(2)].join(","))].join(`
`),V=new Blob([L],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(V),Z=document.createElement("a");Z.href=G,Z.setAttribute("download","amortization_schedule.csv"),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),s({title:"Export Successful",description:"Amortization schedule exported to CSV."})};return n.jsx("div",{className:"space-y-6",children:n.jsxs(Ar,{value:A,onValueChange:C,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-2",children:[n.jsx(Ze,{value:"calculator",children:"Calculator"}),n.jsx(Ze,{value:"amortization",children:"Amortization Schedule"})]}),n.jsxs(tt,{value:"calculator",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(dc,{className:"h-5 w-5 mr-2 text-primary"}),"Loan Details"]}),n.jsx(Be,{children:"Enter the details of your loan"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"loanAmount",children:"Vehicle Price"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"loanAmount",type:"number",value:a,onChange:W=>i(parseFloat(W.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"downPayment",children:"Down Payment"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"downPayment",type:"number",value:o,onChange:W=>l(parseFloat(W.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"interestRate",children:"Interest Rate (%)"}),n.jsx(Pe,{id:"interestRate",type:"number",step:"0.01",value:c,onChange:W=>d(parseFloat(W.target.value)||0)})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"loanTerm",children:"Loan Term (months)"}),n.jsxs(We,{value:f.toString(),onValueChange:W=>u(parseInt(W)),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"12",children:"12 months (1 year)"}),n.jsx(K,{value:"24",children:"24 months (2 years)"}),n.jsx(K,{value:"36",children:"36 months (3 years)"}),n.jsx(K,{value:"48",children:"48 months (4 years)"}),n.jsx(K,{value:"60",children:"60 months (5 years)"}),n.jsx(K,{value:"72",children:"72 months (6 years)"}),n.jsx(K,{value:"84",children:"84 months (7 years)"}),n.jsx(K,{value:"96",children:"96 months (8 years)"}),n.jsx(K,{value:"120",children:"120 months (10 years)"}),n.jsx(K,{value:"180",children:"180 months (15 years)"}),n.jsx(K,{value:"240",children:"240 months (20 years)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),n.jsxs(We,{value:h,onValueChange:m,children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"monthly",children:"Monthly"}),n.jsx(K,{value:"biweekly",children:"Bi-weekly"}),n.jsx(K,{value:"weekly",children:"Weekly"})]})]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx($t,{className:"h-5 w-5 mr-2 text-primary"}),"Additional Costs"]}),n.jsx(Be,{children:"Include additional costs in your calculation"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"includeInsurance",checked:v,onCheckedChange:W=>g(!!W)}),n.jsx(ae,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),v&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"insuranceAmount",type:"number",value:p,onChange:W=>x(parseFloat(W.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"includeTax",checked:b,onCheckedChange:W=>y(!!W)}),n.jsx(ae,{htmlFor:"includeTax",children:"Include Tax"})]}),b&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Pe,{id:"taxRate",type:"number",step:"0.01",value:j,onChange:W=>E(parseFloat(W.target.value)||0)})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Loan Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Principal Amount:"}),n.jsx("span",{className:"font-medium",children:Ie(a-o)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:[h==="monthly"?"Monthly":h==="biweekly"?"Bi-weekly":"Weekly"," Payment:"]}),n.jsx("span",{className:"font-bold text-primary",children:Ie(S)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total Interest:"}),n.jsx("span",{className:"font-medium",children:Ie(O)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total Cost:"}),n.jsx("span",{className:"font-medium",children:Ie(N)})]})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[r&&n.jsx(J,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(J,{variant:"outline",onClick:()=>C("amortization"),children:[n.jsx(Ur,{className:"h-4 w-4 mr-2"}),"View Amortization"]}),t&&n.jsx(J,{onClick:B,children:"Save Calculation"})]})]}),n.jsxs(tt,{value:"amortization",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Ur,{className:"h-5 w-5 mr-2 text-primary"}),"Amortization Schedule"]}),n.jsx(Be,{children:"Detailed payment schedule over the life of the loan"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:q,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:U,children:[n.jsx(uf,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),n.jsx(fe,{children:n.jsx(kie,{schedule:I})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsxs(J,{variant:"outline",onClick:()=>C("calculator"),children:[n.jsx(dc,{className:"h-4 w-4 mr-2"}),"Back to Calculator"]}),t&&n.jsx(J,{onClick:B,children:"Save Calculation"})]})]})]})})}function Oie({onSave:e,onCancel:t,onAddNewCustomer:r,preselectedCustomerId:s}){const{toast:a}=_t(),{leads:i}=Mo(),{vehicles:o,getAvailableVehicles:l}=Ud(),[c,d]=w.useState(!1),[f,u]=w.useState(!1),[h,m]=w.useState(null),[v,g]=w.useState({customerId:s||"",customerName:"",vehicleId:"",vehicleInfo:"",amount:0,downPayment:0,term:60,rate:6.99,paymentAmount:0,startDate:new Date().toISOString().split("T")[0],status:"active",notes:"",loanType:"standard",paymentFrequency:"monthly",includeInsurance:!1,insuranceAmount:0,includeTax:!1,taxRate:0});w.useEffect(()=>{s&&g(j=>({...j,customerId:s}))},[s]),w.useEffect(()=>{if(v.customerId){const j=i.find(E=>E.id===v.customerId);j&&g(E=>({...E,customerName:`${j.firstName} ${j.lastName}`}))}},[v.customerId,i]);const p=j=>{j==="add-new"?r==null||r():g(E=>({...E,customerId:j}))},x=j=>{const E=o.find(A=>A.id===j);E&&g(A=>({...A,vehicleId:j,vehicleInfo:`${E.year} ${E.make} ${E.model}`,amount:E.price}))},b=j=>{m(j),g(E=>({...E,amount:j.loanAmount,downPayment:j.downPayment,term:j.loanTerm,rate:j.interestRate,paymentAmount:j.monthlyPayment,paymentFrequency:j.paymentFrequency,includeInsurance:j.includeInsurance,insuranceAmount:j.insuranceAmount,includeTax:j.includeTax,taxRate:j.taxRate}))},y=async j=>{if(j.preventDefault(),!v.customerId||!v.vehicleId){a({title:"Validation Error",description:"Customer and vehicle are required.",variant:"destructive"});return}d(!0);try{await e(v)}catch{a({title:"Error",description:"Failed to create loan",variant:"destructive"})}finally{d(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:f?n.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:n.jsx(Die,{initialValues:{loanAmount:v.amount,downPayment:v.downPayment,interestRate:v.rate,loanTerm:v.term},onSave:b,onClose:()=>u(!1)})}):n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Create New Loan"}),n.jsx(Be,{children:"Set up a new loan for a customer"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:y,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Customer & Vehicle"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(We,{value:v.customerId,onValueChange:p,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsxs(Ve,{children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>p("add-new"),children:[n.jsx(qt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),i.map(j=>n.jsxs(K,{value:j.id,children:[j.firstName," ",j.lastName]},j.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle *"}),n.jsxs(We,{value:v.vehicleId,onValueChange:x,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select vehicle"})}),n.jsx(Ve,{children:o.map(j=>n.jsxs(K,{value:j.id,children:[j.year," ",j.make," ",j.model]},j.id))})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Loan Details"}),n.jsxs(J,{type:"button",variant:"outline",onClick:()=>u(!0),children:[n.jsx(dc,{className:"h-4 w-4 mr-2"}),"Loan Calculator"]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"amount",children:"Loan Amount *"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"amount",type:"number",value:v.amount,onChange:j=>g(E=>({...E,amount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"downPayment",children:"Down Payment"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"downPayment",type:"number",value:v.downPayment,onChange:j=>g(E=>({...E,downPayment:parseFloat(j.target.value)||0})),className:"pl-10"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"term",children:"Term (months) *"}),n.jsxs(We,{value:v.term.toString(),onValueChange:j=>g(E=>({...E,term:parseInt(j)})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"12",children:"12 months (1 year)"}),n.jsx(K,{value:"24",children:"24 months (2 years)"}),n.jsx(K,{value:"36",children:"36 months (3 years)"}),n.jsx(K,{value:"48",children:"48 months (4 years)"}),n.jsx(K,{value:"60",children:"60 months (5 years)"}),n.jsx(K,{value:"72",children:"72 months (6 years)"}),n.jsx(K,{value:"84",children:"84 months (7 years)"}),n.jsx(K,{value:"96",children:"96 months (8 years)"}),n.jsx(K,{value:"120",children:"120 months (10 years)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"rate",children:"Interest Rate (%) *"}),n.jsx(Pe,{id:"rate",type:"number",step:"0.01",value:v.rate,onChange:j=>g(E=>({...E,rate:parseFloat(j.target.value)||0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"paymentAmount",children:"Monthly Payment *"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"paymentAmount",type:"number",step:"0.01",value:v.paymentAmount,onChange:j=>g(E=>({...E,paymentAmount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"startDate",children:"Start Date *"}),n.jsx(Pe,{id:"startDate",type:"date",value:v.startDate,onChange:j=>g(E=>({...E,startDate:j.target.value}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"loanType",children:"Loan Type"}),n.jsxs(We,{value:v.loanType,onValueChange:j=>g(E=>({...E,loanType:j})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"standard",children:"Standard"}),n.jsx(K,{value:"bhph",children:"Buy Here Pay Here"}),n.jsx(K,{value:"balloon",children:"Balloon"}),n.jsx(K,{value:"lease",children:"Lease"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Additional Options"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"includeInsurance",checked:v.includeInsurance,onCheckedChange:j=>g(E=>({...E,includeInsurance:!!j}))}),n.jsx(ae,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),v.includeInsurance&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"insuranceAmount",type:"number",step:"0.01",value:v.insuranceAmount,onChange:j=>g(E=>({...E,insuranceAmount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"includeTax",checked:v.includeTax,onCheckedChange:j=>g(E=>({...E,includeTax:!!j}))}),n.jsx(ae,{htmlFor:"includeTax",children:"Include Tax"})]}),v.includeTax&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Pe,{id:"taxRate",type:"number",step:"0.01",value:v.taxRate,onChange:j=>g(E=>({...E,taxRate:parseFloat(j.target.value)||0}))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),n.jsx(ir,{value:v.notes,onChange:j=>g(E=>({...E,notes:j.target.value})),placeholder:"Add any additional notes about this loan...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:t,disabled:c,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Loan..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Create Loan"]})})]})]})})]})})}const Lie=[{id:"1",customerId:"cust-1",customerName:"John Smith",vehicleId:"veh-1",vehicleInfo:"2024 Forest River Georgetown",amount:125e3,downPayment:2e4,term:60,rate:6.99,paymentAmount:2100.42,startDate:new Date("2024-01-15"),status:"active",remainingBalance:105e3,nextPaymentDate:new Date("2024-02-15"),createdAt:new Date("2024-01-15")},{id:"2",customerId:"cust-2",customerName:"Sarah Johnson",vehicleId:"veh-2",vehicleInfo:"2023 Winnebago View",amount:89e3,downPayment:15e3,term:72,rate:7.49,paymentAmount:1250.33,startDate:new Date("2024-01-10"),status:"active",remainingBalance:74e3,nextPaymentDate:new Date("2024-02-10"),createdAt:new Date("2024-01-10")}];function ck(){const[e,t]=w.useState(Lie),[r,s]=w.useState(!1),[a,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(!1);w.useState("dashboard"),w.useState("");const{toast:f}=_t(),u=()=>{l(null),i(!0)},h=v=>{f({title:"Customer Added",description:`${v.firstName} ${v.lastName} has been added.`}),l(v.id),d(!1),i(!0)},m=async v=>{const g={id:Math.random().toString(36).substr(2,9),customerId:v.customerId,customerName:v.customerName,vehicleId:v.vehicleId,vehicleInfo:v.vehicleInfo,amount:v.amount,downPayment:v.downPayment,term:v.term,rate:v.rate,paymentAmount:v.paymentAmount,startDate:new Date(v.startDate),status:v.status,remainingBalance:v.amount-v.downPayment,nextPaymentDate:new Date(new Date(v.startDate).setMonth(new Date(v.startDate).getMonth()+1)),createdAt:new Date};t([...e,g]),i(!1),f({title:"Success",description:"Loan created successfully"})};return n.jsxs("div",{className:"space-y-8",children:[c&&n.jsx(gf,{onClose:()=>d(!1),onSuccess:h}),a&&n.jsx(Oie,{preselectedCustomerId:o,onSave:m,onCancel:()=>i(!1),onAddNewCustomer:()=>{i(!1),d(!0)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Finance & Loans"}),n.jsx("p",{className:"ri-page-description",children:"Manage loans, payments, and financial calculations"})]}),n.jsxs(J,{className:"shadow-sm",onClick:u,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Loan"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Active Loans"}),n.jsx($t,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Current loans"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Total Financed"}),n.jsx($t,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Ie(e.reduce((v,g)=>v+g.amount,0))}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Loan volume"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Avg Rate"}),n.jsx(dc,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[(e.reduce((v,g)=>v+g.rate,0)/e.length).toFixed(2),"%"]}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Average interest rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Monthly Payments"}),n.jsx(Hi,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Ie(e.reduce((v,g)=>v+g.paymentAmount,0))}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Total monthly"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Loans"}),n.jsx(Be,{children:"Manage customer loans and financing"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[e.map(v=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:v.customerName}),n.jsx(Fe,{className:"bg-blue-50 text-blue-700 border-blue-200",children:v.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle:"}),n.jsx("span",{className:"ml-1",children:v.vehicleInfo})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Amount:"}),n.jsx("span",{className:"ml-1 font-bold text-primary",children:Ie(v.amount)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Term:"}),n.jsxs("span",{className:"ml-1",children:[v.term," months @ ",v.rate,"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Payment:"}),n.jsxs("span",{className:"ml-1",children:[Ie(v.paymentAmount),"/month"]})]})]}),n.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Next Payment:"})," ",v.nextPaymentDate.toLocaleDateString(),n.jsx("span",{className:"ml-4 font-medium",children:"Balance:"})," ",Ie(v.remainingBalance)]})})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>s(!0),children:[n.jsx(dc,{className:"h-3 w-3 mr-1"}),"Calculator"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(Hi,{className:"h-3 w-3 mr-1"}),"Payments"]})]})]},v.id)),e.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx($t,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No loans found"}),n.jsx("p",{className:"text-sm",children:"Create your first loan to get started"})]})]})})]})]})}function Rie(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(ck,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(ck,{})})]})}var wt=(e=>(e.PROSPECTING="prospecting",e.QUALIFICATION="qualification",e.NEEDS_ANALYSIS="needs_analysis",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(wt||{}),Rr=(e=>(e.ACTIVE="active",e.WON="won",e.LOST="lost",e.ON_HOLD="on_hold",e.CANCELLED="cancelled",e))(Rr||{}),il=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(il||{}),Wc=(e=>(e.GEOGRAPHIC="geographic",e.INDUSTRY="industry",e.ACCOUNT_SIZE="account_size",e.PRODUCT_LINE="product_line",e))(Wc||{});function $ie(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState(!1);w.useEffect(()=>{h()},[]);const h=()=>{const I=En("renter-insight-deals",[{id:"1",name:"Georgetown Class A Sale - Smith Family",customerId:"cust-001",customerName:"John & Mary Smith",stage:wt.PROPOSAL,status:Rr.ACTIVE,priority:"high",value:145e3,probability:75,expectedCloseDate:new Date("2024-02-15"),assignedTo:"rep-001",territoryId:"territory-001",sourceId:"source-001",competitorIds:["comp-001"],products:[{id:"1",productId:"prod-001",productName:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,discount:5e3,total:12e4},{id:"2",productId:"prod-002",productName:"Extended Warranty Package",quantity:1,unitPrice:3500,discount:0,total:3500}],stageHistory:[],notes:"Customer very interested, financing pre-approved",requiresApproval:!0,approvalStatus:"pending",customFields:{tradeInValue:25e3,financingType:"bank_loan"},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-20")},{id:"2",name:"Travel Trailer - Johnson Family",customerId:"cust-002",customerName:"Sarah Johnson",stage:wt.NEGOTIATION,status:Rr.ACTIVE,priority:"medium",value:75e3,probability:85,expectedCloseDate:new Date("2024-02-10"),assignedTo:"rep-002",territoryId:"territory-002",competitorIds:[],products:[{id:"3",productId:"prod-003",productName:"2024 Airstream Flying Cloud",quantity:1,unitPrice:75e3,discount:2e3,total:73e3}],stageHistory:[],notes:"Ready to close, just finalizing delivery details",requiresApproval:!1,customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-18")}]),R=En("renter-insight-territories",[{id:"territory-001",name:"North Region",type:"geographic",description:"Northern states territory",assignedTo:["rep-001","rep-003"],rules:[{id:"1",field:"state",operator:"in_range",value:["IL","WI","MN","IA"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"territory-002",name:"South Region",type:"geographic",description:"Southern states territory",assignedTo:["rep-002"],rules:[{id:"2",field:"state",operator:"in_range",value:["TX","FL","GA","NC"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),M=En("renter-insight-stage-history",[{id:"1",dealId:"1",fromStage:wt.QUALIFICATION,toStage:wt.NEEDS_ANALYSIS,changedBy:"rep-001",changedAt:new Date("2024-01-12"),duration:48,notes:"Customer qualified, moving to needs analysis"},{id:"2",dealId:"1",fromStage:wt.NEEDS_ANALYSIS,toStage:wt.PROPOSAL,changedBy:"rep-001",changedAt:new Date("2024-01-18"),duration:144,notes:"Proposal prepared and presented"}]);t(I),s(R),d(M)},m=I=>{rn("renter-insight-deals",I)},v=I=>{rn("renter-insight-stage-history",I)},g=async I=>{u(!0);try{const R={id:Math.random().toString(36).substr(2,9),name:I.name||"",customerId:I.customerId||"",customerName:I.customerName||"",stage:wt.PROSPECTING,status:Rr.ACTIVE,priority:I.priority||"medium",value:I.value||0,probability:10,expectedCloseDate:I.expectedCloseDate||new Date,assignedTo:I.assignedTo||"",territoryId:I.territoryId||"",sourceId:I.sourceId,competitorIds:I.competitorIds||[],products:I.products||[],stageHistory:[],notes:I.notes||"",requiresApproval:(I.value||0)>1e5,customFields:I.customFields||{},createdAt:new Date,updatedAt:new Date},M=[...e,R];return t(M),m(M),await x(R.id,void 0,wt.PROSPECTING,"system"),R}finally{u(!1)}},p=async(I,R,M)=>{const $=e.find(V=>V.id===I);if(!$)return;const B=$.stage,U=y(R),q=R===wt.CLOSED_WON?Rr.WON:R===wt.CLOSED_LOST?Rr.LOST:Rr.ACTIVE,W=R===wt.CLOSED_WON||R===wt.CLOSED_LOST?new Date:void 0,L=e.map(V=>V.id===I?{...V,stage:R,probability:U,status:q,actualCloseDate:W,updatedAt:new Date}:V);return t(L),m(L),await x(I,B,R,"current-user",M||`Stage changed from ${(B==null?void 0:B.replace("_"," "))||"none"} to ${R.replace("_"," ")}`),L.find(V=>V.id===I)},x=async(I,R,M,$,B)=>{const U=R?b(I,R):void 0,q={id:Math.random().toString(36).substr(2,9),dealId:I,fromStage:R,toStage:M,changedBy:$,changedAt:new Date,duration:U,notes:B},W=[...c,q];d(W),v(W)},b=(I,R)=>{const $=c.filter(B=>B.dealId===I).find(B=>B.toStage===R);return $?Math.floor((Date.now()-$.changedAt.getTime())/36e5):0},y=I=>{switch(I){case wt.PROSPECTING:return 10;case wt.QUALIFICATION:return 25;case wt.NEEDS_ANALYSIS:return 40;case wt.PROPOSAL:return 60;case wt.NEGOTIATION:return 80;case wt.CLOSED_WON:return 100;case wt.CLOSED_LOST:return 0;default:return 10}},j=async(I,R)=>{const M=r.find($=>$.isActive);if(M){const $=e.map(B=>B.id===I?{...B,territoryId:M.id,updatedAt:new Date}:B);t($),m($)}},E=async(I,R)=>{const M={id:Math.random().toString(36).substr(2,9),dealId:I,workflowType:R,currentStep:1,totalSteps:2,steps:[{id:"1",stepNumber:1,approverRole:"sales_manager",approverIds:["manager-001"],requiredApprovals:1,currentApprovals:[],status:"pending"},{id:"2",stepNumber:2,approverRole:"sales_director",approverIds:["director-001"],requiredApprovals:1,currentApprovals:[],status:"pending"}],status:"pending",requestedBy:"current-user",requestedAt:new Date};return i($=>[...$,M]),M},A=async(I,R,M)=>{const $={id:Math.random().toString(36).substr(2,9),dealId:I,outcome:R,primaryReason:M.primaryReason||"",secondaryReasons:M.secondaryReasons||[],competitorWon:M.competitorWon,feedback:M.feedback||"",lessonsLearned:M.lessonsLearned||[],actionItems:M.actionItems||[],reportedBy:"current-user",reportedAt:new Date};return l(B=>[...B,$]),$},C=()=>{const I=e.length,R=e.reduce((V,G)=>V+G.value,0),M=e.filter(V=>V.status===Rr.WON).length,$=e.filter(V=>V.status===Rr.WON).reduce((V,G)=>V+G.value,0),B=e.filter(V=>V.status===Rr.LOST).length,U=e.filter(V=>V.status===Rr.LOST).reduce((V,G)=>V+G.value,0),q=I>0?M/I*100:0,W=I>0?R/I:0,L=S();return{totalDeals:I,totalValue:R,wonDeals:M,wonValue:$,lostDeals:B,lostValue:U,winRate:q,averageDealSize:W,averageSalesCycle:L,conversionRates:T()}},S=()=>{const I=e.filter(M=>M.actualCloseDate);return I.length===0?0:I.reduce((M,$)=>{const B=new Date($.actualCloseDate),U=new Date($.createdAt),q=isNaN(B.getTime())?0:B.getTime(),W=isNaN(U.getTime())?0:U.getTime(),L=q&&W?Math.floor((q-W)/(1e3*60*60*24)):0;return M+L},0)/I.length},T=()=>[{fromStage:wt.PROSPECTING,toStage:wt.QUALIFICATION,rate:65,averageDuration:72},{fromStage:wt.QUALIFICATION,toStage:wt.NEEDS_ANALYSIS,rate:75,averageDuration:48},{fromStage:wt.NEEDS_ANALYSIS,toStage:wt.PROPOSAL,rate:80,averageDuration:96},{fromStage:wt.PROPOSAL,toStage:wt.NEGOTIATION,rate:70,averageDuration:120},{fromStage:wt.NEGOTIATION,toStage:wt.CLOSED_WON,rate:85,averageDuration:168}];return{deals:e,territories:r,approvalWorkflows:a,winLossReports:o,stageHistory:c,loading:f,createDeal:g,updateDealStage:p,assignTerritory:j,createApprovalWorkflow:E,createWinLossReport:A,getDealMetrics:C,getDealsByStage:I=>e.filter(R=>R.stage===I),getDealsByTerritory:I=>e.filter(R=>R.territoryId===I),getDealsByRep:I=>e.filter(R=>R.assignedTo===I),getStageHistory:I=>c.filter(R=>R.dealId===I).sort((R,M)=>new Date(R.changedAt).getTime()-new Date(M.changedAt).getTime())}}function TC(e,t){return TC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},TC(e,t)}function DB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,TC(e,t)}function Pr(e){"@babel/helpers - typeof";return Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pr(e)}function Fie(e,t){if(Pr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Pr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mie(e){var t=Fie(e,"string");return Pr(t)=="symbol"?t:t+""}function Bie(e,t,r){return(t=Mie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function uk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(r),!0).forEach(function(s){Bie(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function $a(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var fk=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),GN=function(){return Math.random().toString(36).substring(7).split("").join(".")},hk={INIT:"@@redux/INIT"+GN(),REPLACE:"@@redux/REPLACE"+GN(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+GN()}};function zie(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function OB(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error($a(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error($a(1));return r(OB)(e,t)}if(typeof e!="function")throw new Error($a(2));var a=e,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function f(){if(c)throw new Error($a(3));return i}function u(g){if(typeof g!="function")throw new Error($a(4));if(c)throw new Error($a(5));var p=!0;return d(),l.push(g),function(){if(p){if(c)throw new Error($a(6));p=!1,d();var b=l.indexOf(g);l.splice(b,1),o=null}}}function h(g){if(!zie(g))throw new Error($a(7));if(typeof g.type>"u")throw new Error($a(8));if(c)throw new Error($a(9));try{c=!0,i=a(i,g)}finally{c=!1}for(var p=o=l,x=0;x<p.length;x++){var b=p[x];b()}return g}function m(g){if(typeof g!="function")throw new Error($a(10));a=g,h({type:hk.REPLACE})}function v(){var g,p=u;return g={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error($a(11));function y(){b.next&&b.next(f())}y();var j=p(y);return{unsubscribe:j}}},g[fk]=function(){return this},g}return h({type:hk.INIT}),s={dispatch:h,subscribe:u,getState:f,replaceReducer:m},s[fk]=v,s}function mk(e,t){return function(){return t(e.apply(this,arguments))}}function pk(e,t){if(typeof e=="function")return mk(e,t);if(typeof e!="object"||e===null)throw new Error($a(16));var r={};for(var s in e){var a=e[s];typeof a=="function"&&(r[s]=mk(a,t))}return r}function LB(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,a){return function(){return s(a.apply(void 0,arguments))}})}function Uie(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var a=s.apply(void 0,arguments),i=function(){throw new Error($a(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=LB.apply(void 0,l)(a.dispatch),uk(uk({},a),{},{dispatch:i})}}}var RB=ce.createContext(null);function Vie(e){e()}var $B=Vie,Wie=function(t){return $B=t},qie=function(){return $B};function Hie(){var e=qie(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var vk={notify:function(){},get:function(){return[]}};function FB(e,t){var r,s=vk;function a(u){return c(),s.subscribe(u)}function i(){s.notify()}function o(){f.onStateChange&&f.onStateChange()}function l(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),s=Hie())}function d(){r&&(r(),r=void 0,s.clear(),s=vk)}var f={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return s}};return f}var MB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function Gie(e){var t=e.store,r=e.context,s=e.children,a=w.useMemo(function(){var l=FB(t);return{store:t,subscription:l}},[t]),i=w.useMemo(function(){return t.getState()},[t]);MB(function(){var l=a.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[a,i]);var o=r||RB;return ce.createElement(o.Provider,{value:a},s)}function Yb(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var BB={exports:{}},Fr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps=typeof Symbol=="function"&&Symbol.for,sP=Ps?Symbol.for("react.element"):60103,aP=Ps?Symbol.for("react.portal"):60106,Wj=Ps?Symbol.for("react.fragment"):60107,qj=Ps?Symbol.for("react.strict_mode"):60108,Hj=Ps?Symbol.for("react.profiler"):60114,Gj=Ps?Symbol.for("react.provider"):60109,Kj=Ps?Symbol.for("react.context"):60110,iP=Ps?Symbol.for("react.async_mode"):60111,Yj=Ps?Symbol.for("react.concurrent_mode"):60111,Xj=Ps?Symbol.for("react.forward_ref"):60112,Qj=Ps?Symbol.for("react.suspense"):60113,Kie=Ps?Symbol.for("react.suspense_list"):60120,Jj=Ps?Symbol.for("react.memo"):60115,Zj=Ps?Symbol.for("react.lazy"):60116,Yie=Ps?Symbol.for("react.block"):60121,Xie=Ps?Symbol.for("react.fundamental"):60117,Qie=Ps?Symbol.for("react.responder"):60118,Jie=Ps?Symbol.for("react.scope"):60119;function Ni(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case sP:switch(e=e.type,e){case iP:case Yj:case Wj:case Hj:case qj:case Qj:return e;default:switch(e=e&&e.$$typeof,e){case Kj:case Xj:case Zj:case Jj:case Gj:return e;default:return t}}case aP:return t}}}function zB(e){return Ni(e)===Yj}Fr.AsyncMode=iP;Fr.ConcurrentMode=Yj;Fr.ContextConsumer=Kj;Fr.ContextProvider=Gj;Fr.Element=sP;Fr.ForwardRef=Xj;Fr.Fragment=Wj;Fr.Lazy=Zj;Fr.Memo=Jj;Fr.Portal=aP;Fr.Profiler=Hj;Fr.StrictMode=qj;Fr.Suspense=Qj;Fr.isAsyncMode=function(e){return zB(e)||Ni(e)===iP};Fr.isConcurrentMode=zB;Fr.isContextConsumer=function(e){return Ni(e)===Kj};Fr.isContextProvider=function(e){return Ni(e)===Gj};Fr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===sP};Fr.isForwardRef=function(e){return Ni(e)===Xj};Fr.isFragment=function(e){return Ni(e)===Wj};Fr.isLazy=function(e){return Ni(e)===Zj};Fr.isMemo=function(e){return Ni(e)===Jj};Fr.isPortal=function(e){return Ni(e)===aP};Fr.isProfiler=function(e){return Ni(e)===Hj};Fr.isStrictMode=function(e){return Ni(e)===qj};Fr.isSuspense=function(e){return Ni(e)===Qj};Fr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wj||e===Yj||e===Hj||e===qj||e===Qj||e===Kie||typeof e=="object"&&e!==null&&(e.$$typeof===Zj||e.$$typeof===Jj||e.$$typeof===Gj||e.$$typeof===Kj||e.$$typeof===Xj||e.$$typeof===Xie||e.$$typeof===Qie||e.$$typeof===Jie||e.$$typeof===Yie)};Fr.typeOf=Ni;BB.exports=Fr;var Zie=BB.exports,oP=Zie,eoe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},toe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},roe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},UB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lP={};lP[oP.ForwardRef]=roe;lP[oP.Memo]=UB;function gk(e){return oP.isMemo(e)?UB:lP[e.$$typeof]||eoe}var noe=Object.defineProperty,soe=Object.getOwnPropertyNames,xk=Object.getOwnPropertySymbols,aoe=Object.getOwnPropertyDescriptor,ioe=Object.getPrototypeOf,yk=Object.prototype;function VB(e,t,r){if(typeof t!="string"){if(yk){var s=ioe(t);s&&s!==yk&&VB(e,s,r)}var a=soe(t);xk&&(a=a.concat(xk(t)));for(var i=gk(e),o=gk(t),l=0;l<a.length;++l){var c=a[l];if(!toe[c]&&!(r&&r[c])&&!(o&&o[c])&&!(i&&i[c])){var d=aoe(t,c);try{noe(e,c,d)}catch{}}}}return e}var ooe=VB;const bk=kr(ooe);var WB={exports:{}},Xr={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=60103,tw=60106,Ax=60107,Ex=60108,Px=60114,Tx=60109,_x=60110,Ix=60112,kx=60113,cP=60120,Dx=60115,Ox=60116,qB=60121,HB=60122,GB=60117,KB=60129,YB=60131;if(typeof Symbol=="function"&&Symbol.for){var ks=Symbol.for;ew=ks("react.element"),tw=ks("react.portal"),Ax=ks("react.fragment"),Ex=ks("react.strict_mode"),Px=ks("react.profiler"),Tx=ks("react.provider"),_x=ks("react.context"),Ix=ks("react.forward_ref"),kx=ks("react.suspense"),cP=ks("react.suspense_list"),Dx=ks("react.memo"),Ox=ks("react.lazy"),qB=ks("react.block"),HB=ks("react.server.block"),GB=ks("react.fundamental"),KB=ks("react.debug_trace_mode"),YB=ks("react.legacy_hidden")}function Bo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ew:switch(e=e.type,e){case Ax:case Px:case Ex:case kx:case cP:return e;default:switch(e=e&&e.$$typeof,e){case _x:case Ix:case Ox:case Dx:case Tx:return e;default:return t}}case tw:return t}}}var loe=Tx,coe=ew,doe=Ix,uoe=Ax,foe=Ox,hoe=Dx,moe=tw,poe=Px,voe=Ex,goe=kx;Xr.ContextConsumer=_x;Xr.ContextProvider=loe;Xr.Element=coe;Xr.ForwardRef=doe;Xr.Fragment=uoe;Xr.Lazy=foe;Xr.Memo=hoe;Xr.Portal=moe;Xr.Profiler=poe;Xr.StrictMode=voe;Xr.Suspense=goe;Xr.isAsyncMode=function(){return!1};Xr.isConcurrentMode=function(){return!1};Xr.isContextConsumer=function(e){return Bo(e)===_x};Xr.isContextProvider=function(e){return Bo(e)===Tx};Xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ew};Xr.isForwardRef=function(e){return Bo(e)===Ix};Xr.isFragment=function(e){return Bo(e)===Ax};Xr.isLazy=function(e){return Bo(e)===Ox};Xr.isMemo=function(e){return Bo(e)===Dx};Xr.isPortal=function(e){return Bo(e)===tw};Xr.isProfiler=function(e){return Bo(e)===Px};Xr.isStrictMode=function(e){return Bo(e)===Ex};Xr.isSuspense=function(e){return Bo(e)===kx};Xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ax||e===Px||e===KB||e===Ex||e===kx||e===cP||e===YB||typeof e=="object"&&e!==null&&(e.$$typeof===Ox||e.$$typeof===Dx||e.$$typeof===Tx||e.$$typeof===_x||e.$$typeof===Ix||e.$$typeof===GB||e.$$typeof===qB||e[0]===HB)};Xr.typeOf=Bo;WB.exports=Xr;var xoe=WB.exports,yoe=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],boe=["reactReduxForwardedRef"],joe=[],woe=[null,null];function Noe(e,t){var r=e[1];return[t.payload,r+1]}function jk(e,t,r){MB(function(){return e.apply(void 0,t)},r)}function Soe(e,t,r,s,a,i,o){e.current=s,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function Coe(e,t,r,s,a,i,o,l,c,d){if(e){var f=!1,u=null,h=function(){if(!f){var g=t.getState(),p,x;try{p=s(g,a.current)}catch(b){x=b,u=b}x||(u=null),p===i.current?o.current||c():(i.current=p,l.current=p,o.current=!0,d({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=h,r.trySubscribe(),h();var m=function(){if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u};return m}}var Aoe=function(){return[null,0]};function Eoe(e,t){t===void 0&&(t={});var r=t,s=r.getDisplayName,a=s===void 0?function(y){return"ConnectAdvanced("+y+")"}:s,i=r.methodName,o=i===void 0?"connectAdvanced":i,l=r.renderCountProp,c=l===void 0?void 0:l,d=r.shouldHandleStateChanges,f=d===void 0?!0:d,u=r.storeKey,h=u===void 0?"store":u;r.withRef;var m=r.forwardRef,v=m===void 0?!1:m,g=r.context,p=g===void 0?RB:g,x=Yb(r,yoe),b=p;return function(j){var E=j.displayName||j.name||"Component",A=a(E),C=it({},x,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:f,storeKey:h,displayName:A,wrappedComponentName:E,WrappedComponent:j}),S=x.pure;function T(I){return e(I.dispatch,C)}var O=S?w.useMemo:function(I){return I()};function _(I){var R=w.useMemo(function(){var ye=I.reactReduxForwardedRef,$e=Yb(I,boe);return[I.context,ye,$e]},[I]),M=R[0],$=R[1],B=R[2],U=w.useMemo(function(){return M&&M.Consumer&&xoe.isContextConsumer(ce.createElement(M.Consumer,null))?M:b},[M,b]),q=w.useContext(U),W=!!I.store&&!!I.store.getState&&!!I.store.dispatch;q&&q.store;var L=W?I.store:q.store,V=w.useMemo(function(){return T(L)},[L]),G=w.useMemo(function(){if(!f)return woe;var ye=FB(L,W?null:q.subscription),$e=ye.notifyNestedSubs.bind(ye);return[ye,$e]},[L,W,q]),Z=G[0],ee=G[1],he=w.useMemo(function(){return W?q:it({},q,{subscription:Z})},[W,q,Z]),me=w.useReducer(Noe,joe,Aoe),oe=me[0],we=oe[0],ve=me[1];if(we&&we.error)throw we.error;var pe=w.useRef(),De=w.useRef(B),xe=w.useRef(),le=w.useRef(!1),re=O(function(){return xe.current&&B===De.current?xe.current:V(L.getState(),B)},[L,we,B]);jk(Soe,[De,pe,le,B,re,xe,ee]),jk(Coe,[f,L,Z,V,De,pe,le,xe,ee,ve],[L,Z,V]);var Se=w.useMemo(function(){return ce.createElement(j,it({},re,{ref:$}))},[$,j,re]),Ne=w.useMemo(function(){return f?ce.createElement(U.Provider,{value:he},Se):Se},[U,Se,he]);return Ne}var N=S?ce.memo(_):_;if(N.WrappedComponent=j,N.displayName=_.displayName=A,v){var D=ce.forwardRef(function(R,M){return ce.createElement(N,it({},R,{reactReduxForwardedRef:M}))});return D.displayName=A,D.WrappedComponent=j,bk(D,j)}return bk(N,j)}}function wk(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function KN(e,t){if(wk(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!wk(e[r[a]],t[r[a]]))return!1;return!0}function Poe(e,t){var r={},s=function(o){var l=e[o];typeof l=="function"&&(r[o]=function(){return t(l.apply(void 0,arguments))})};for(var a in e)s(a);return r}function dP(e){return function(r,s){var a=e(r,s);function i(){return a}return i.dependsOnOwnProps=!1,i}}function Nk(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function XB(e,t){return function(s,a){a.displayName;var i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=Nk(e);var d=i(l,c);return typeof d=="function"&&(i.mapToProps=d,i.dependsOnOwnProps=Nk(d),d=i(l,c)),d},i}}function Toe(e){return typeof e=="function"?XB(e):void 0}function _oe(e){return e?void 0:dP(function(t){return{dispatch:t}})}function Ioe(e){return e&&typeof e=="object"?dP(function(t){return Poe(e,t)}):void 0}const koe=[Toe,_oe,Ioe];function Doe(e){return typeof e=="function"?XB(e):void 0}function Ooe(e){return e?void 0:dP(function(){return{}})}const Loe=[Doe,Ooe];function Roe(e,t,r){return it({},r,e,t)}function $oe(e){return function(r,s){s.displayName;var a=s.pure,i=s.areMergedPropsEqual,o=!1,l;return function(d,f,u){var h=e(d,f,u);return o?(!a||!i(h,l))&&(l=h):(o=!0,l=h),l}}}function Foe(e){return typeof e=="function"?$oe(e):void 0}function Moe(e){return e?void 0:function(){return Roe}}const Boe=[Foe,Moe];var zoe=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Uoe(e,t,r,s){return function(i,o){return r(e(i,o),t(s,o),o)}}function Voe(e,t,r,s,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,l=a.areStatePropsEqual,c=!1,d,f,u,h,m;function v(y,j){return d=y,f=j,u=e(d,f),h=t(s,f),m=r(u,h,f),c=!0,m}function g(){return u=e(d,f),t.dependsOnOwnProps&&(h=t(s,f)),m=r(u,h,f),m}function p(){return e.dependsOnOwnProps&&(u=e(d,f)),t.dependsOnOwnProps&&(h=t(s,f)),m=r(u,h,f),m}function x(){var y=e(d,f),j=!l(y,u);return u=y,j&&(m=r(u,h,f)),m}function b(y,j){var E=!o(j,f),A=!i(y,d,j,f);return d=y,f=j,E&&A?g():E?p():A?x():m}return function(j,E){return c?b(j,E):v(j,E)}}function Woe(e,t){var r=t.initMapStateToProps,s=t.initMapDispatchToProps,a=t.initMergeProps,i=Yb(t,zoe),o=r(e,i),l=s(e,i),c=a(e,i),d=i.pure?Voe:Uoe;return d(o,l,c,e,i)}var qoe=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function YN(e,t,r){for(var s=t.length-1;s>=0;s--){var a=t[s](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Hoe(e,t){return e===t}function Goe(e){var t=e===void 0?{}:e,r=t.connectHOC,s=r===void 0?Eoe:r,a=t.mapStateToPropsFactories,i=a===void 0?Loe:a,o=t.mapDispatchToPropsFactories,l=o===void 0?koe:o,c=t.mergePropsFactories,d=c===void 0?Boe:c,f=t.selectorFactory,u=f===void 0?Woe:f;return function(m,v,g,p){p===void 0&&(p={});var x=p,b=x.pure,y=b===void 0?!0:b,j=x.areStatesEqual,E=j===void 0?Hoe:j,A=x.areOwnPropsEqual,C=A===void 0?KN:A,S=x.areStatePropsEqual,T=S===void 0?KN:S,O=x.areMergedPropsEqual,_=O===void 0?KN:O,N=Yb(x,qoe),D=YN(m,i,"mapStateToProps"),I=YN(v,l,"mapDispatchToProps"),R=YN(g,d,"mergeProps");return s(u,it({methodName:"connect",getDisplayName:function($){return"Connect("+$+")"},shouldHandleStateChanges:!!m,initMapStateToProps:D,initMapDispatchToProps:I,initMergeProps:R,pure:y,areStatesEqual:E,areOwnPropsEqual:C,areStatePropsEqual:T,areMergedPropsEqual:_},N))}}const QB=Goe();Wie(Sl.unstable_batchedUpdates);function Koe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function JB(e,t){var r=w.useState(function(){return{inputs:t,result:e()}})[0],s=w.useRef(!0),a=w.useRef(r),i=s.current||!!(t&&a.current.inputs&&Koe(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return w.useEffect(function(){s.current=!1,a.current=o},[o]),o.result}function Yoe(e,t){return JB(function(){return e},t)}var Sr=JB,It=Yoe,Xoe=!0,XN="Invariant failed";function kd(e,t){if(!e){if(Xoe)throw new Error(XN);var r=typeof t=="function"?t():t,s=r?"".concat(XN,": ").concat(r):XN;throw new Error(s)}}var To=function(t){var r=t.top,s=t.right,a=t.bottom,i=t.left,o=s-i,l=a-r,c={top:r,right:s,bottom:a,left:i,width:o,height:l,x:i,y:r,center:{x:(s+i)/2,y:(a+r)/2}};return c},uP=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Sk=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Qoe=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},QN={top:0,right:0,bottom:0,left:0},fP=function(t){var r=t.borderBox,s=t.margin,a=s===void 0?QN:s,i=t.border,o=i===void 0?QN:i,l=t.padding,c=l===void 0?QN:l,d=To(uP(r,a)),f=To(Sk(r,o)),u=To(Sk(f,c));return{marginBox:d,borderBox:To(r),paddingBox:f,contentBox:u,margin:a,border:o,padding:c}},Oi=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(r);return isNaN(a)&&kd(!1),a},Joe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Xb=function(t,r){var s=t.borderBox,a=t.border,i=t.margin,o=t.padding,l=Qoe(s,r);return fP({borderBox:l,border:a,margin:i,padding:o})},Qb=function(t,r){return r===void 0&&(r=Joe()),Xb(t,r)},ZB=function(t,r){var s={top:Oi(r.marginTop),right:Oi(r.marginRight),bottom:Oi(r.marginBottom),left:Oi(r.marginLeft)},a={top:Oi(r.paddingTop),right:Oi(r.paddingRight),bottom:Oi(r.paddingBottom),left:Oi(r.paddingLeft)},i={top:Oi(r.borderTopWidth),right:Oi(r.borderRightWidth),bottom:Oi(r.borderBottomWidth),left:Oi(r.borderLeftWidth)};return fP({borderBox:t,margin:s,padding:a,border:i})},e9=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return ZB(r,s)},Ck=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Zoe(e,t){return!!(e===t||Ck(e)&&Ck(t))}function ele(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Zoe(e[r],t[r]))return!1;return!0}function Cs(e,t){t===void 0&&(t=ele);var r,s=[],a,i=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&r===this&&t(l,s)||(a=e.apply(this,l),i=!0,r=this,s=l),a}return o}var tle=function(t){var r=[],s=null,a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};const Sg=tle;function t9(e,t){}t9.bind(null,"warn");t9.bind(null,"error");function jd(){}function rle(e,t){return it({},e,{},t)}function Vi(e,t,r){var s=t.map(function(a){var i=rle(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){s.forEach(function(i){i()})}}var nle="Invariant failed";function Jb(e){this.message=e}Jb.prototype.toString=function(){return this.message};function ut(e,t){if(!e)throw new Jb(nle)}var sle=function(e){DB(t,e);function t(){for(var s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s=e.call.apply(e,[this].concat(i))||this,s.callbacks=null,s.unbind=jd,s.onWindowError=function(l){var c=s.getCallbacks();c.isDragging()&&c.tryAbort();var d=l.error;d instanceof Jb&&l.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(l){s.callbacks=l},s}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Vi(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof Jb){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(ce.Component),ale=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Zb=function(t){return t+1},ile=function(t){return`
  You have lifted an item in position `+Zb(t.source.index)+`
`},r9=function(t,r){var s=t.droppableId===r.droppableId,a=Zb(t.index),i=Zb(r.index);return s?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},n9=function(t,r,s){var a=r.droppableId===s.droppableId;return a?`
      The item `+t+`
      has been combined with `+s.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},ole=function(t){var r=t.destination;if(r)return r9(t.source,r);var s=t.combine;return s?n9(t.draggableId,t.source,s):"You are over an area that cannot be dropped on"},Ak=function(t){return`
  The item has returned to its starting position
  of `+Zb(t.index)+`
`},lle=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Ak(t.source)+`
    `;var r=t.destination,s=t.combine;return r?`
      You have dropped the item.
      `+r9(t.source,r)+`
    `:s?`
      You have dropped the item.
      `+n9(t.draggableId,t.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Ak(t.source)+`
  `},ob={dragHandleUsageInstructions:ale,onDragStart:ile,onDragUpdate:ole,onDragEnd:lle},Es={x:0,y:0},Fs=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},hi=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},wd=function(t,r){return t.x===r.x&&t.y===r.y},qm=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},tf=function(t,r,s){var a;return s===void 0&&(s=0),a={},a[t]=r,a[t==="x"?"y":"x"]=s,a},Cg=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Ek=function(t,r){return Math.min.apply(Math,r.map(function(s){return Cg(t,s)}))},s9=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},cle=function(e,t){var r=To({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Lx=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Pk=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},dle={top:0,right:0,bottom:0,left:0},ule=function(t,r){return r?Lx(t,r.scroll.diff.displacement):t},fle=function(t,r,s){if(s&&s.increasedBy){var a;return it({},t,(a={},a[r.end]=t[r.end]+s.increasedBy[r.line],a))}return t},hle=function(t,r){return r&&r.shouldClipSubject?cle(r.pageMarginBox,t):To(t)},nm=function(e){var t=e.page,r=e.withPlaceholder,s=e.axis,a=e.frame,i=ule(t.marginBox,a),o=fle(i,s,r),l=hle(o,a);return{page:t,withPlaceholder:r,active:l}},hP=function(e,t){e.frame||ut(!1);var r=e.frame,s=hi(t,r.scroll.initial),a=qm(s),i=it({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:a},max:r.scroll.max}}),o=nm({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),l=it({},e,{frame:i,subject:o});return l};function e1(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function mP(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Vd(e,t){if(e.find)return e.find(t);var r=mP(e,t);if(r!==-1)return e[r]}function a9(e){return Array.prototype.slice.call(e)}var i9=Cs(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),o9=Cs(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),rw=Cs(function(e){return e1(e)}),mle=Cs(function(e){return e1(e)}),Hm=Cs(function(e,t){var r=mle(t).filter(function(s){return e===s.descriptor.droppableId}).sort(function(s,a){return s.descriptor.index-a.descriptor.index});return r});function pP(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function nw(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var sw=Cs(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),ple=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,a=e.insideDestination,i=e.previousImpact;if(!s.isCombineEnabled)return null;var o=pP(i);if(!o)return null;function l(g){var p={type:"COMBINE",combine:{draggableId:g,droppableId:s.descriptor.id}};return it({},i,{at:p})}var c=i.displaced.all,d=c.length?c[0]:null;if(t)return d?l(d):null;var f=sw(r,a);if(!d){if(!f.length)return null;var u=f[f.length-1];return l(u.descriptor.id)}var h=mP(f,function(g){return g.descriptor.id===d});h===-1&&ut(!1);var m=h-1;if(m<0)return null;var v=f[m];return l(v.descriptor.id)},Gm=function(e,t){return e.descriptor.droppableId===t.descriptor.id},l9={point:Es,value:0},Ag={invisible:{},visible:{},all:[]},vle={displaced:Ag,displacedBy:l9,at:null},Gi=function(e,t){return function(r){return e<=r&&r<=t}},c9=function(e){var t=Gi(e.top,e.bottom),r=Gi(e.left,e.right);return function(s){var a=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);if(a)return!0;var i=t(s.top)||t(s.bottom),o=r(s.left)||r(s.right),l=i&&o;if(l)return!0;var c=s.top<e.top&&s.bottom>e.bottom,d=s.left<e.left&&s.right>e.right,f=c&&d;if(f)return!0;var u=c&&o||d&&i;return u}},gle=function(e){var t=Gi(e.top,e.bottom),r=Gi(e.left,e.right);return function(s){var a=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);return a}},vP={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},d9={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},xle=function(e){return function(t){var r=Gi(t.top,t.bottom),s=Gi(t.left,t.right);return function(a){return e===vP?r(a.top)&&r(a.bottom):s(a.left)&&s(a.right)}}},yle=function(t,r){var s=r.frame?r.frame.scroll.diff.displacement:Es;return Lx(t,s)},ble=function(t,r,s){return r.subject.active?s(r.subject.active)(t):!1},jle=function(t,r,s){return s(r)(t)},gP=function(t){var r=t.target,s=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,l=i?yle(r,s):r;return ble(l,s,o)&&jle(l,a,o)},wle=function(t){return gP(it({},t,{isVisibleThroughFrameFn:c9}))},u9=function(t){return gP(it({},t,{isVisibleThroughFrameFn:gle}))},Nle=function(t){return gP(it({},t,{isVisibleThroughFrameFn:xle(t.destination.axis)}))},Sle=function(t,r,s){if(typeof s=="boolean")return s;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function Cle(e,t){var r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return To(uP(r,s))}function Eg(e){var t=e.afterDragging,r=e.destination,s=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,d){var f=Cle(d,s),u=d.descriptor.id;c.all.push(u);var h=wle({target:f,destination:r,viewport:a,withDroppableDisplacement:!0});if(!h)return c.invisible[d.descriptor.id]=!0,c;var m=Sle(u,o,i),v={draggableId:u,shouldAnimate:m};return c.visible[u]=v,c},{all:[],visible:{},invisible:{}})}function Ale(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Tk(e){var t=e.insideDestination,r=e.inHomeList,s=e.displacedBy,a=e.destination,i=Ale(t,{inHomeList:r});return{displaced:Ag,displacedBy:s,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function t1(e){var t=e.draggable,r=e.insideDestination,s=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,l=e.index,c=e.forceShouldAnimate,d=Gm(t,s);if(l==null)return Tk({insideDestination:r,inHomeList:d,displacedBy:i,destination:s});var f=Vd(r,function(g){return g.descriptor.index===l});if(!f)return Tk({insideDestination:r,inHomeList:d,displacedBy:i,destination:s});var u=sw(t,r),h=r.indexOf(f),m=u.slice(h),v=Eg({afterDragging:m,destination:s,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:v,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:l}}}}function Dd(e,t){return!!t.effected[e]}var Ele=function(e){var t=e.isMovingForward,r=e.destination,s=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,l=s[o],c=l.descriptor.index,d=Dd(o,i);return d?t?c:c-1:t?c+1:c},Ple=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.insideDestination,a=e.location;if(!s.length)return null;var i=a.index,o=t?i+1:i-1,l=s[0].descriptor.index,c=s[s.length-1].descriptor.index,d=r?c:c+1;return o<l||o>d?null:o},Tle=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,l=e.previousImpact,c=e.viewport,d=e.afterCritical,f=l.at;if(f||ut(!1),f.type==="REORDER"){var u=Ple({isMovingForward:t,isInHomeList:r,location:f.destination,insideDestination:o});return u==null?null:t1({draggable:s,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:u})}var h=Ele({isMovingForward:t,destination:i,displaced:l.displaced,draggables:a,combine:f.combine,afterCritical:d});return h==null?null:t1({draggable:s,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})},_le=function(e){var t=e.displaced,r=e.afterCritical,s=e.combineWith,a=e.displacedBy,i=!!(t.visible[s]||t.invisible[s]);return Dd(s,r)?i?Es:qm(a.point):i?a.point:Es},Ile=function(e){var t=e.afterCritical,r=e.impact,s=e.draggables,a=nw(r);a||ut(!1);var i=a.draggableId,o=s[i].page.borderBox.center,l=_le({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Fs(o,l)},f9=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},kle=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},xP=function(t,r,s){return r[t.crossAxisStart]+s.margin[t.crossAxisStart]+s.borderBox[t.crossAxisSize]/2},_k=function(t){var r=t.axis,s=t.moveRelativeTo,a=t.isMoving;return tf(r.line,s.marginBox[r.end]+f9(r,a),xP(r,s.marginBox,a))},Ik=function(t){var r=t.axis,s=t.moveRelativeTo,a=t.isMoving;return tf(r.line,s.marginBox[r.start]-kle(r,a),xP(r,s.marginBox,a))},Dle=function(t){var r=t.axis,s=t.moveInto,a=t.isMoving;return tf(r.line,s.contentBox[r.start]+f9(r,a),xP(r,s.contentBox,a))},Ole=function(e){var t=e.impact,r=e.draggable,s=e.draggables,a=e.droppable,i=e.afterCritical,o=Hm(a.descriptor.id,s),l=r.page,c=a.axis;if(!o.length)return Dle({axis:c,moveInto:a.page,isMoving:l});var d=t.displaced,f=t.displacedBy,u=d.all[0];if(u){var h=s[u];if(Dd(u,i))return Ik({axis:c,moveRelativeTo:h.page,isMoving:l});var m=Xb(h.page,f.point);return Ik({axis:c,moveRelativeTo:m,isMoving:l})}var v=o[o.length-1];if(v.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Dd(v.descriptor.id,i)){var g=Xb(v.page,qm(i.displacedBy.point));return _k({axis:c,moveRelativeTo:g,isMoving:l})}return _k({axis:c,moveRelativeTo:v.page,isMoving:l})},_C=function(e,t){var r=e.frame;return r?Fs(t,r.scroll.diff.displacement):t},Lle=function(t){var r=t.impact,s=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,l=s.page.borderBox.center,c=r.at;return!a||!c?l:c.type==="REORDER"?Ole({impact:r,draggable:s,draggables:i,droppable:a,afterCritical:o}):Ile({impact:r,draggables:i,afterCritical:o})},aw=function(e){var t=Lle(e),r=e.droppable,s=r?_C(r,t):t;return s},h9=function(e,t){var r=hi(t,e.scroll.initial),s=qm(r),a=To({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}};return i};function kk(e,t){return e.map(function(r){return t[r]})}function Rle(e,t){for(var r=0;r<t.length;r++){var s=t[r].visible[e];if(s)return s}return null}var $le=function(e){var t=e.impact,r=e.viewport,s=e.destination,a=e.draggables,i=e.maxScrollChange,o=h9(r,Fs(r.scroll.current,i)),l=s.frame?hP(s,Fs(s.frame.scroll.current,i)):s,c=t.displaced,d=Eg({afterDragging:kk(c.all,a),destination:s,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),f=Eg({afterDragging:kk(c.all,a),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),u={},h={},m=[c,d,f];c.all.forEach(function(g){var p=Rle(g,m);if(p){h[g]=p;return}u[g]=!0});var v=it({},t,{displaced:{all:c.all,invisible:u,visible:h}});return v},Fle=function(e,t){return Fs(e.scroll.diff.displacement,t)},yP=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,s=e.viewport,a=Fle(s,t),i=hi(a,r.page.borderBox.center);return Fs(r.client.borderBox.center,i)},m9=function(e){var t=e.draggable,r=e.destination,s=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=o===void 0?!1:o,c=hi(s,t.page.borderBox.center),d=Lx(t.page.borderBox,c),f={target:d,destination:r,withDroppableDisplacement:i,viewport:a};return l?Nle(f):u9(f)},Mle=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,d=e.afterCritical;if(!s.isEnabled)return null;var f=Hm(s.descriptor.id,a),u=Gm(r,s),h=ple({isMovingForward:t,draggable:r,destination:s,insideDestination:f,previousImpact:i})||Tle({isMovingForward:t,isInHomeList:u,draggable:r,draggables:a,destination:s,insideDestination:f,previousImpact:i,viewport:o,afterCritical:d});if(!h)return null;var m=aw({impact:h,draggable:r,droppable:s,draggables:a,afterCritical:d}),v=m9({draggable:r,destination:s,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var g=yP({pageBorderBoxCenter:m,draggable:r,viewport:o});return{clientSelection:g,impact:h,scrollJumpRequest:null}}var p=hi(m,l),x=$le({impact:h,viewport:o,destination:s,draggables:a,maxScrollChange:p});return{clientSelection:c,impact:x,scrollJumpRequest:p}},ma=function(t){var r=t.subject.active;return r||ut(!1),r},Ble=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,s=e.source,a=e.droppables,i=e.viewport,o=s.subject.active;if(!o)return null;var l=s.axis,c=Gi(o[l.start],o[l.end]),d=rw(a).filter(function(u){return u!==s}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return c9(i.frame)(ma(u))}).filter(function(u){var h=ma(u);return t?o[l.crossAxisEnd]<h[l.crossAxisEnd]:h[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(u){var h=ma(u),m=Gi(h[l.start],h[l.end]);return c(h[l.start])||c(h[l.end])||m(o[l.start])||m(o[l.end])}).sort(function(u,h){var m=ma(u)[l.crossAxisStart],v=ma(h)[l.crossAxisStart];return t?m-v:v-m}).filter(function(u,h,m){return ma(u)[l.crossAxisStart]===ma(m[0])[l.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var f=d.filter(function(u){var h=Gi(ma(u)[l.start],ma(u)[l.end]);return h(r[l.line])});return f.length===1?f[0]:f.length>1?f.sort(function(u,h){return ma(u)[l.start]-ma(h)[l.start]})[0]:d.sort(function(u,h){var m=Ek(r,Pk(ma(u))),v=Ek(r,Pk(ma(h)));return m!==v?m-v:ma(u)[l.start]-ma(h)[l.start]})[0]},Dk=function(t,r){var s=t.page.borderBox.center;return Dd(t.descriptor.id,r)?hi(s,r.displacedBy.point):s},zle=function(t,r){var s=t.page.borderBox;return Dd(t.descriptor.id,r)?Lx(s,qm(r.displacedBy.point)):s},Ule=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,s=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(l){return u9({target:zle(l,i),destination:s,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var d=Cg(t,_C(s,Dk(l,i))),f=Cg(t,_C(s,Dk(c,i)));return d<f?-1:f<d?1:l.descriptor.index-c.descriptor.index});return o[0]||null},Rx=Cs(function(t,r){var s=r[t.line];return{value:s,point:tf(t.line,s)}}),Vle=function(t,r,s){var a=t.axis;if(t.descriptor.mode==="virtual")return tf(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=Hm(t.descriptor.id,s),l=o.reduce(function(f,u){return f+u.client.marginBox[a.size]},0),c=l+r[a.line],d=c-i;return d<=0?null:tf(a.line,d)},p9=function(t,r){return it({},t,{scroll:it({},t.scroll,{max:r})})},v9=function(t,r,s){var a=t.frame;Gm(r,t)&&ut(!1),t.subject.withPlaceholder&&ut(!1);var i=Rx(t.axis,r.displaceBy).point,o=Vle(t,i,s),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=nm({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return it({},t,{subject:c})}var d=o?Fs(a.scroll.max,o):a.scroll.max,f=p9(a,d),u=nm({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:f});return it({},t,{subject:u,frame:f})},Wle=function(t){var r=t.subject.withPlaceholder;r||ut(!1);var s=t.frame;if(!s){var a=nm({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return it({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||ut(!1);var o=p9(s,i),l=nm({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return it({},t,{subject:l,frame:o})},qle=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,s=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,l=e.viewport,c=e.afterCritical;if(!r){if(s.length)return null;var d={displaced:Ag,displacedBy:l9,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},f=aw({impact:d,draggable:a,droppable:o,draggables:i,afterCritical:c}),u=Gm(a,o)?o:v9(o,a,i),h=m9({draggable:a,destination:u,newPageBorderBoxCenter:f,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?d:null}var m=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],v=function(){var p=r.descriptor.index;return r.descriptor.id===a.descriptor.id||m?p:p+1}(),g=Rx(o.axis,a.displaceBy);return t1({draggable:a,insideDestination:s,destination:o,viewport:l,displacedBy:g,last:Ag,index:v})},Hle=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,s=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,l=e.viewport,c=e.afterCritical,d=Ble({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:l});if(!d)return null;var f=Hm(d.descriptor.id,i),u=Ule({pageBorderBoxCenter:r,viewport:l,destination:d,insideDestination:f,afterCritical:c}),h=qle({previousPageBorderBoxCenter:r,destination:d,draggable:s,draggables:i,moveRelativeTo:u,insideDestination:f,viewport:l,afterCritical:c});if(!h)return null;var m=aw({impact:h,draggable:s,droppable:d,draggables:i,afterCritical:c}),v=yP({pageBorderBoxCenter:m,draggable:s,viewport:l});return{clientSelection:v,impact:h,scrollJumpRequest:null}},gi=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Gle=function(t,r){var s=gi(t);return s?r[s]:null},Kle=function(e){var t=e.state,r=e.type,s=Gle(t.impact,t.dimensions.droppables),a=!!s,i=t.dimensions.droppables[t.critical.droppable.id],o=s||i,l=o.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var d=r==="MOVE_DOWN"||r==="MOVE_RIGHT",f=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,h=t.dimensions,m=h.draggables,v=h.droppables;return c?Mle({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:f,destination:o,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Hle({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:f,isOver:o,draggables:m,droppables:v,viewport:t.viewport,afterCritical:t.afterCritical})};function mu(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function g9(e){var t=Gi(e.top,e.bottom),r=Gi(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function Yle(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Xle(e){var t=e.pageBorderBox,r=e.draggable,s=e.candidates,a=r.page.borderBox.center,i=s.map(function(o){var l=o.axis,c=tf(o.axis.line,t.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Cg(a,c)}}).sort(function(o,l){return l.distance-o.distance});return i[0]?i[0].id:null}function Qle(e){var t=e.pageBorderBox,r=e.draggable,s=e.droppables,a=rw(s).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!Yle(t,o))return!1;if(g9(o)(t.center))return!0;var l=i.axis,c=o.center[l.crossAxisLine],d=t[l.crossAxisStart],f=t[l.crossAxisEnd],u=Gi(o[l.crossAxisStart],o[l.crossAxisEnd]),h=u(d),m=u(f);return!h&&!m?!0:h?d<c:f>c});return a.length?a.length===1?a[0].descriptor.id:Xle({pageBorderBox:t,draggable:r,candidates:a}):null}var x9=function(t,r){return To(Lx(t,r))},Jle=function(e,t){var r=e.frame;return r?x9(t,r.scroll.diff.value):t};function y9(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function Zle(e){var t=e.draggable,r=e.closest,s=e.inHomeList;return r?s&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var ece=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,s=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,l=e.afterCritical,c=s.axis,d=Rx(s.axis,r.displaceBy),f=d.value,u=t[c.start],h=t[c.end],m=sw(r,a),v=Vd(m,function(p){var x=p.descriptor.id,b=p.page.borderBox.center[c.line],y=Dd(x,l),j=y9({displaced:i,id:x});return y?j?h<=b:u<b-f:j?h<=b+f:u<b}),g=Zle({draggable:r,closest:v,inHomeList:Gm(r,s)});return t1({draggable:r,insideDestination:a,destination:s,viewport:o,last:i,displacedBy:d,index:g})},tce=4,rce=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,s=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var l=a.axis,c=Rx(a.axis,t.displaceBy),d=c.value,f=r[l.start],u=r[l.end],h=sw(t,i),m=Vd(h,function(g){var p=g.descriptor.id,x=g.page.borderBox,b=x[l.size],y=b/tce,j=Dd(p,o),E=y9({displaced:s.displaced,id:p});return j?E?u>x[l.start]+y&&u<x[l.end]-y:f>x[l.start]-d+y&&f<x[l.end]-d-y:E?u>x[l.start]+d+y&&u<x[l.end]+d-y:f>x[l.start]+y&&f<x[l.end]-y});if(!m)return null;var v={displacedBy:c,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:a.descriptor.id}}};return v},b9=function(e){var t=e.pageOffset,r=e.draggable,s=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,l=e.afterCritical,c=x9(r.page.borderBox,t),d=Qle({pageBorderBox:c,draggable:r,droppables:a});if(!d)return vle;var f=a[d],u=Hm(f.descriptor.id,s),h=Jle(f,c);return rce({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:i,destination:f,insideDestination:u,afterCritical:l})||ece({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:f,insideDestination:u,last:i.displaced,viewport:o,afterCritical:l})},bP=function(e,t){var r;return it({},e,(r={},r[t.descriptor.id]=t,r))},nce=function(t){var r=t.previousImpact,s=t.impact,a=t.droppables,i=gi(r),o=gi(s);if(!i||i===o)return a;var l=a[i];if(!l.subject.withPlaceholder)return a;var c=Wle(l);return bP(a,c)},sce=function(e){var t=e.draggable,r=e.draggables,s=e.droppables,a=e.previousImpact,i=e.impact,o=nce({previousImpact:a,impact:i,droppables:s}),l=gi(i);if(!l)return o;var c=s[l];if(Gm(t,c)||c.subject.withPlaceholder)return o;var d=v9(c,t,r);return bP(o,d)},Rv=function(e){var t=e.state,r=e.clientSelection,s=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,l=a||t.viewport,c=s||t.dimensions,d=r||t.current.client.selection,f=hi(d,t.initial.client.selection),u={offset:f,selection:d,borderBoxCenter:Fs(t.initial.client.borderBoxCenter,f)},h={selection:Fs(u.selection,l.scroll.current),borderBoxCenter:Fs(u.borderBoxCenter,l.scroll.current),offset:Fs(u.offset,l.scroll.diff.value)},m={client:u,page:h};if(t.phase==="COLLECTING")return it({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:m});var v=c.draggables[t.critical.draggable.id],g=i||b9({pageOffset:h.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),p=sce({draggable:v,impact:g,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),x=it({},t,{current:m,dimensions:{draggables:c.draggables,droppables:p},impact:g,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function ace(e,t){return e.map(function(r){return t[r]})}var j9=function(e){var t=e.impact,r=e.viewport,s=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,l=ace(o.all,s),c=Eg({afterDragging:l,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return it({},t,{displaced:c})},w9=function(e){var t=e.impact,r=e.draggable,s=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,l=aw({impact:t,draggable:r,draggables:a,droppable:s,afterCritical:o});return yP({pageBorderBoxCenter:l,draggable:r,viewport:i})},N9=function(e){var t=e.state,r=e.dimensions,s=e.viewport;t.movementMode!=="SNAP"&&ut(!1);var a=t.impact,i=s||t.viewport,o=r||t.dimensions,l=o.draggables,c=o.droppables,d=l[t.critical.draggable.id],f=gi(a);f||ut(!1);var u=c[f],h=j9({impact:a,viewport:i,destination:u,draggables:l}),m=w9({impact:h,draggable:d,droppable:u,draggables:l,viewport:i,afterCritical:t.afterCritical});return Rv({impact:h,clientSelection:m,state:t,dimensions:o,viewport:i})},ice=function(e){return{index:e.index,droppableId:e.droppableId}},S9=function(e){var t=e.draggable,r=e.home,s=e.draggables,a=e.viewport,i=Rx(r.axis,t.displaceBy),o=Hm(r.descriptor.id,s),l=o.indexOf(t);l===-1&&ut(!1);var c=o.slice(l+1),d=c.reduce(function(m,v){return m[v.descriptor.id]=!0,m},{}),f={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:d},u=Eg({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),h={displaced:u,displacedBy:i,at:{type:"REORDER",destination:ice(t.descriptor)}};return{impact:h,afterCritical:f}},oce=function(e,t){return{draggables:e.draggables,droppables:bP(e.droppables,t)}},lce=function(e){var t=e.draggable,r=e.offset,s=e.initialWindowScroll,a=Xb(t.client,r),i=Qb(a,s),o=it({},t,{placeholder:it({},t.placeholder,{client:a}),client:a,page:i});return o},cce=function(e){var t=e.frame;return t||ut(!1),t},dce=function(e){var t=e.additions,r=e.updatedDroppables,s=e.viewport,a=s.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,l=r[o],c=cce(l),d=c.scroll.diff.value,f=Fs(a,d),u=lce({draggable:i,offset:f,initialWindowScroll:s.scroll.initial});return u})},uce=function(e){var t=e.state,r=e.published,s=r.modified.map(function(y){var j=t.dimensions.droppables[y.droppableId],E=hP(j,y.scroll);return E}),a=it({},t.dimensions.droppables,{},i9(s)),i=o9(dce({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=it({},t.dimensions.draggables,{},i);r.removals.forEach(function(y){delete o[y]});var l={droppables:a,draggables:o},c=gi(t.impact),d=c?l.droppables[c]:null,f=l.draggables[t.critical.draggable.id],u=l.droppables[t.critical.droppable.id],h=S9({draggable:f,home:u,draggables:o,viewport:t.viewport}),m=h.impact,v=h.afterCritical,g=d&&d.isCombineEnabled?t.impact:m,p=b9({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:g,viewport:t.viewport,afterCritical:v}),x=it({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:p,onLiftImpact:m,dimensions:l,afterCritical:v,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return x;var b=it({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return b},IC=function(t){return t.movementMode==="SNAP"},JN=function(t,r,s){var a=oce(t.dimensions,r);return!IC(t)||s?Rv({state:t,dimensions:a}):N9({state:t,dimensions:a})};function ZN(e){return e.isDragging&&e.movementMode==="SNAP"?it({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Ok={phase:"IDLE",completed:null,shouldFlush:!1},fce=function(e,t){if(e===void 0&&(e=Ok),t.type==="FLUSH")return it({},Ok,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ut(!1);var r=t.payload,s=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,l=r.movementMode,c=o.draggables[s.draggable.id],d=o.droppables[s.droppable.id],f={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Es},u={client:f,page:{selection:Fs(f.selection,i.scroll.initial),borderBoxCenter:Fs(f.selection,i.scroll.initial),offset:Fs(f.selection,i.scroll.diff.value)}},h=rw(o.droppables).every(function(ve){return!ve.isFixedOnPage}),m=S9({draggable:c,home:d,draggables:o.draggables,viewport:i}),v=m.impact,g=m.afterCritical,p={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:l,dimensions:o,initial:u,current:u,isWindowScrollAllowed:h,impact:v,afterCritical:g,onLiftImpact:v,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return p}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ut(!1);var x=it({phase:"COLLECTING"},e,{phase:"COLLECTING"});return x}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ut(!1),uce({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;mu(e)||ut(!1);var b=t.payload.client;return wd(b,e.current.client.selection)?e:Rv({state:e,clientSelection:b,impact:IC(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return ZN(e);mu(e)||ut(!1);var y=t.payload,j=y.id,E=y.newScroll,A=e.dimensions.droppables[j];if(!A)return e;var C=hP(A,E);return JN(e,C,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;mu(e)||ut(!1);var S=t.payload,T=S.id,O=S.isEnabled,_=e.dimensions.droppables[T];_||ut(!1),_.isEnabled===O&&ut(!1);var N=it({},_,{isEnabled:O});return JN(e,N,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;mu(e)||ut(!1);var D=t.payload,I=D.id,R=D.isCombineEnabled,M=e.dimensions.droppables[I];M||ut(!1),M.isCombineEnabled===R&&ut(!1);var $=it({},M,{isCombineEnabled:R});return JN(e,$,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;mu(e)||ut(!1),e.isWindowScrollAllowed||ut(!1);var B=t.payload.newScroll;if(wd(e.viewport.scroll.current,B))return ZN(e);var U=h9(e.viewport,B);return IC(e)?N9({state:e,viewport:U}):Rv({state:e,viewport:U})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!mu(e))return e;var q=t.payload.maxScroll;if(wd(q,e.viewport.scroll.max))return e;var W=it({},e.viewport,{scroll:it({},e.viewport.scroll,{max:q})});return it({phase:"DRAGGING"},e,{viewport:W})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ut(!1);var L=Kle({state:e,type:t.type});return L?Rv({state:e,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var V=t.payload.reason;e.phase!=="COLLECTING"&&ut(!1);var G=it({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:V});return G}if(t.type==="DROP_ANIMATE"){var Z=t.payload,ee=Z.completed,he=Z.dropDuration,me=Z.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ut(!1);var oe={phase:"DROP_ANIMATING",completed:ee,dropDuration:he,newHomeClientOffset:me,dimensions:e.dimensions};return oe}if(t.type==="DROP_COMPLETE"){var we=t.payload.completed;return{phase:"IDLE",completed:we,shouldFlush:!1}}return e},hce=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},mce=function(t){return{type:"LIFT",payload:t}},pce=function(t){return{type:"INITIAL_PUBLISH",payload:t}},vce=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},gce=function(){return{type:"COLLECTION_STARTING",payload:null}},xce=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},yce=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},bce=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},C9=function(t){return{type:"MOVE",payload:t}},jce=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},wce=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},Nce=function(){return{type:"MOVE_UP",payload:null}},Sce=function(){return{type:"MOVE_DOWN",payload:null}},Cce=function(){return{type:"MOVE_RIGHT",payload:null}},Ace=function(){return{type:"MOVE_LEFT",payload:null}},jP=function(){return{type:"FLUSH",payload:null}},Ece=function(t){return{type:"DROP_ANIMATE",payload:t}},wP=function(t){return{type:"DROP_COMPLETE",payload:t}},A9=function(t){return{type:"DROP",payload:t}},Pce=function(t){return{type:"DROP_PENDING",payload:t}},E9=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Tce=function(e){return function(t){var r=t.getState,s=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,l=o.id,c=o.clientSelection,d=o.movementMode,f=r();f.phase==="DROP_ANIMATING"&&s(wP({completed:f.completed})),r().phase!=="IDLE"&&ut(!1),s(jP()),s(hce({draggableId:l,movementMode:d}));var u={shouldPublishImmediately:d==="SNAP"},h={draggableId:l,scrollOptions:u},m=e.startPublishing(h),v=m.critical,g=m.dimensions,p=m.viewport;s(pce({critical:v,dimensions:g,clientSelection:c,movementMode:d,viewport:p}))}}}},_ce=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},NP={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Pg={opacity:{drop:0,combining:.7},scale:{drop:.75}},SP={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},cu=SP.outOfTheWay+"s "+NP.outOfTheWay,$v={fluid:"opacity "+cu,snap:"transform "+cu+", opacity "+cu,drop:function(t){var r=t+"s "+NP.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+cu,placeholder:"height "+cu+", width "+cu+", margin "+cu},Lk=function(t){return wd(t,Es)?null:"translate("+t.x+"px, "+t.y+"px)"},kC={moveTo:Lk,drop:function(t,r){var s=Lk(t);return s?r?s+" scale("+Pg.scale.drop+")":s:null}},DC=SP.minDropTime,P9=SP.maxDropTime,Ice=P9-DC,Rk=1500,kce=.6,Dce=function(e){var t=e.current,r=e.destination,s=e.reason,a=Cg(t,r);if(a<=0)return DC;if(a>=Rk)return P9;var i=a/Rk,o=DC+Ice*i,l=s==="CANCEL"?o*kce:o;return Number(l.toFixed(2))},Oce=function(e){var t=e.impact,r=e.draggable,s=e.dimensions,a=e.viewport,i=e.afterCritical,o=s.draggables,l=s.droppables,c=gi(t),d=c?l[c]:null,f=l[r.descriptor.droppableId],u=w9({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:d||f,viewport:a}),h=hi(u,r.client.borderBox.center);return h},Lce=function(e){var t=e.draggables,r=e.reason,s=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!s.at||r!=="DROP"){var l=j9({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var c=it({},s,{displaced:Ag});return{impact:c,didDropInsideDroppable:!0}},Rce=function(e){var t=e.getState,r=e.dispatch;return function(s){return function(a){if(a.type!=="DROP"){s(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(Pce({reason:o}));return}if(i.phase!=="IDLE"){var l=i.phase==="DROP_PENDING"&&i.isWaiting;l&&ut(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ut(!1);var c=i.critical,d=i.dimensions,f=d.draggables[i.critical.draggable.id],u=Lce({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=u.impact,m=u.didDropInsideDroppable,v=m?pP(h):null,g=m?nw(h):null,p={index:c.draggable.index,droppableId:c.droppable.id},x={draggableId:f.descriptor.id,type:f.descriptor.type,source:p,reason:o,mode:i.movementMode,destination:v,combine:g},b=Oce({impact:h,draggable:f,dimensions:d,viewport:i.viewport,afterCritical:i.afterCritical}),y={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:h},j=!wd(i.current.client.offset,b)||!!x.combine;if(!j){r(wP({completed:y}));return}var E=Dce({current:i.current.client.offset,destination:b,reason:o}),A={newHomeClientOffset:b,dropDuration:E,completed:y};r(Ece(A))}}}},T9=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function $ce(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function Fce(e){var t=e.onWindowScroll;function r(){t(T9())}var s=Sg(r),a=$ce(s),i=jd;function o(){return i!==jd}function l(){o()&&ut(!1),i=Vi(window,[a])}function c(){o()||ut(!1),s.cancel(),i(),i=jd}return{start:l,stop:c,isActive:o}}var Mce=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Bce=function(e){var t=Fce({onWindowScroll:function(s){e.dispatch(jce({newScroll:s}))}});return function(r){return function(s){!t.isActive()&&s.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Mce(s)&&t.stop(),r(s)}}},zce=function(e){var t=!1,r=!1,s=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(s))};return a.wasCalled=function(){return t},a},Uce=function(){var e=[],t=function(i){var o=mP(e,function(d){return d.timerId===i});o===-1&&ut(!1);var l=e.splice(o,1),c=l[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),l={timerId:o,callback:i};e.push(l)},s=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:s}},Vce=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Wce=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},qce=function(t,r){if(t===r)return!0;var s=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return s&&a},nv=function(t,r){r()},hy=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},eS=function(t,r,s,a){if(!t){s(a(r));return}var i=zce(s),o={announce:i};t(r,o),i.wasCalled()||s(a(r))},Hce=function(e,t){var r=Uce(),s=null,a=function(h,m){s&&ut(!1),nv("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var g={draggableId:h,mode:m};v(g)}})},i=function(h,m){s&&ut(!1),nv("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(hy(h,m))})},o=function(h,m){s&&ut(!1);var v=hy(h,m);s={mode:m,lastCritical:h,lastLocation:v.source,lastCombine:null},r.add(function(){nv("onDragStart",function(){return eS(e().onDragStart,v,t,ob.onDragStart)})})},l=function(h,m){var v=pP(m),g=nw(m);s||ut(!1);var p=!qce(h,s.lastCritical);p&&(s.lastCritical=h);var x=!Vce(s.lastLocation,v);x&&(s.lastLocation=v);var b=!Wce(s.lastCombine,g);if(b&&(s.lastCombine=g),!(!p&&!x&&!b)){var y=it({},hy(h,s.mode),{combine:g,destination:v});r.add(function(){nv("onDragUpdate",function(){return eS(e().onDragUpdate,y,t,ob.onDragUpdate)})})}},c=function(){s||ut(!1),r.flush()},d=function(h){s||ut(!1),s=null,nv("onDragEnd",function(){return eS(e().onDragEnd,h,t,ob.onDragEnd)})},f=function(){if(s){var h=it({},hy(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});d(h)}};return{beforeCapture:a,beforeStart:i,start:o,update:l,flush:c,drop:d,abort:f}},Gce=function(e,t){var r=Hce(e,t);return function(s){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var l=i.payload.completed.result;r.flush(),a(i),r.drop(l);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=s.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Kce=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var s=e.getState();s.phase!=="DROP_ANIMATING"&&ut(!1),e.dispatch(wP({completed:s.completed}))}}},Yce=function(e){var t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&s(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(E9())}};r=requestAnimationFrame(function(){r=null,t=Vi(window,[o])})}}}},Xce=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},Qce=function(e){var t=!1;return function(){return function(r){return function(s){if(s.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(s.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){t=!1;var a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Jce=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Zce=function(e){return function(t){return function(r){return function(s){if(Jce(s)){e.stop(),r(s);return}if(s.type==="INITIAL_PUBLISH"){r(s);var a=t.getState();a.phase!=="DRAGGING"&&ut(!1),e.start(a);return}r(s),e.scroll(t.getState())}}}},ede=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(A9({reason:s.reason})))}}}},tde=LB,rde=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,s=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return OB(fce,tde(Uie(_ce(s),Xce(t),Tce(t),Rce,Kce,Yce,ede,Zce(o),Bce,Qce(r),Gce(a,i))))},tS=function(){return{additions:{},removals:{},modified:{}}};function nde(e){var t=e.registry,r=e.callbacks,s=tS(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var f=s,u=f.additions,h=f.removals,m=f.modified,v=Object.keys(u).map(function(x){return t.draggable.getById(x).getDimension(Es)}).sort(function(x,b){return x.descriptor.index-b.descriptor.index}),g=Object.keys(m).map(function(x){var b=t.droppable.getById(x),y=b.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:y}}),p={additions:v,removals:Object.keys(h),modified:g};s=tS(),r.publish(p)}))},o=function(f){var u=f.descriptor.id;s.additions[u]=f,s.modified[f.descriptor.droppableId]=!0,s.removals[u]&&delete s.removals[u],i()},l=function(f){var u=f.descriptor;s.removals[u.id]=!0,s.modified[u.droppableId]=!0,s.additions[u.id]&&delete s.additions[u.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,s=tS())};return{add:o,remove:l,stop:c}}var _9=function(e){var t=e.scrollHeight,r=e.scrollWidth,s=e.height,a=e.width,i=hi({x:r,y:t},{x:a,y:s}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},I9=function(){var e=document.documentElement;return e||ut(!1),e},k9=function(){var e=I9(),t=_9({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},sde=function(){var e=T9(),t=k9(),r=e.y,s=e.x,a=I9(),i=a.clientWidth,o=a.clientHeight,l=s+i,c=r+o,d=To({top:r,left:s,right:l,bottom:c}),f={frame:d,scroll:{initial:e,current:e,max:t,diff:{value:Es,displacement:Es}}};return f},ade=function(e){var t=e.critical,r=e.scrollOptions,s=e.registry,a=sde(),i=a.scroll.current,o=t.droppable,l=s.droppable.getAllByType(o.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,r)}),c=s.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(i)}),d={draggables:o9(c),droppables:i9(l)},f={dimensions:d,critical:t,viewport:a};return f};function $k(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var s=e.droppable.getById(r.descriptor.droppableId);return s.descriptor.mode==="virtual"}var ide=function(e,t){var r=null,s=nde({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(m,v){e.droppable.exists(m)||ut(!1),r&&t.updateDroppableIsEnabled({id:m,isEnabled:v})},i=function(m,v){r&&(e.droppable.exists(m)||ut(!1),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:v}))},o=function(m,v){r&&(e.droppable.exists(m)||ut(!1),t.updateDroppableScroll({id:m,newScroll:v}))},l=function(m,v){r&&e.droppable.getById(m).callbacks.scroll(v)},c=function(){if(r){s.stop();var m=r.critical.droppable;e.droppable.getAllByType(m.type).forEach(function(v){return v.callbacks.dragStopped()}),r.unsubscribe(),r=null}},d=function(m){r||ut(!1);var v=r.critical.draggable;m.type==="ADDITION"&&$k(e,v,m.value)&&s.add(m.value),m.type==="REMOVAL"&&$k(e,v,m.value)&&s.remove(m.value)},f=function(m){r&&ut(!1);var v=e.draggable.getById(m.draggableId),g=e.droppable.getById(v.descriptor.droppableId),p={draggable:v.descriptor,droppable:g.descriptor},x=e.subscribe(d);return r={critical:p,unsubscribe:x},ade({critical:p,registry:e,scrollOptions:m.scrollOptions})},u={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:f,stopPublishing:c};return u},D9=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},ode=function(e){window.scrollBy(e.x,e.y)},lde=Cs(function(e){return rw(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),cde=function(t,r){var s=Vd(lde(r),function(a){return a.frame||ut(!1),g9(a.frame.pageMarginBox)(t)});return s},dde=function(e){var t=e.center,r=e.destination,s=e.droppables;if(r){var a=s[r];return a.frame?a:null}var i=cde(t,s);return i},Nd={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},ude=function(e,t){var r=e[t.size]*Nd.startFromPercentage,s=e[t.size]*Nd.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:s};return a},O9=function(e){var t=e.startOfRange,r=e.endOfRange,s=e.current,a=r-t;if(a===0)return 0;var i=s-t,o=i/a;return o},CP=1,fde=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Nd.maxPixelScroll;if(e===t.startScrollingFrom)return CP;var r=O9({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=1-r,a=Nd.maxPixelScroll*Nd.ease(s);return Math.ceil(a)},Fk=Nd.durationDampening.accelerateAt,Mk=Nd.durationDampening.stopDampeningAt,hde=function(e,t){var r=t,s=Mk,a=Date.now(),i=a-r;if(i>=Mk)return e;if(i<Fk)return CP;var o=O9({startOfRange:Fk,endOfRange:s,current:i}),l=e*Nd.ease(o);return Math.ceil(l)},Bk=function(e){var t=e.distanceToEdge,r=e.thresholds,s=e.dragStartTime,a=e.shouldUseTimeDampening,i=fde(t,r);return i===0?0:a?Math.max(hde(i,s),CP):i},zk=function(e){var t=e.container,r=e.distanceToEdges,s=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=ude(t,a),l=r[a.end]<r[a.start];return l?Bk({distanceToEdge:r[a.end],thresholds:o,dragStartTime:s,shouldUseTimeDampening:i}):-1*Bk({distanceToEdge:r[a.start],thresholds:o,dragStartTime:s,shouldUseTimeDampening:i})},mde=function(e){var t=e.container,r=e.subject,s=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?s:i&&a?null:{x:i?0:s.x,y:a?0:s.y}},pde=s9(function(e){return e===0?0:e}),L9=function(e){var t=e.dragStartTime,r=e.container,s=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},l=zk({container:r,distanceToEdges:o,dragStartTime:t,axis:vP,shouldUseTimeDampening:i}),c=zk({container:r,distanceToEdges:o,dragStartTime:t,axis:d9,shouldUseTimeDampening:i}),d=pde({x:c,y:l});if(wd(d,Es))return null;var f=mde({container:r,subject:s,proposedScroll:d});return f?wd(f,Es)?null:f:null},vde=s9(function(e){return e===0?0:e>0?1:-1}),AP=function(){var e=function(r,s){return r<0?r:r>s?r-s:0};return function(t){var r=t.current,s=t.max,a=t.change,i=Fs(r,a),o={x:e(i.x,s.x),y:e(i.y,s.y)};return wd(o,Es)?null:o}}(),R9=function(t){var r=t.max,s=t.current,a=t.change,i={x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)},o=vde(a),l=AP({max:i,current:s,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},EP=function(t,r){return R9({current:t.scroll.current,max:t.scroll.max,change:r})},gde=function(t,r){if(!EP(t,r))return null;var s=t.scroll.max,a=t.scroll.current;return AP({current:a,max:s,change:r})},PP=function(t,r){var s=t.frame;return s?R9({current:s.scroll.current,max:s.scroll.max,change:r}):!1},xde=function(t,r){var s=t.frame;return!s||!PP(t,r)?null:AP({current:s.scroll.current,max:s.scroll.max,change:r})},yde=function(e){var t=e.viewport,r=e.subject,s=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=L9({dragStartTime:a,container:t.frame,subject:r,center:s,shouldUseTimeDampening:i});return o&&EP(t,o)?o:null},bde=function(e){var t=e.droppable,r=e.subject,s=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var l=L9({dragStartTime:a,container:o.pageMarginBox,subject:r,center:s,shouldUseTimeDampening:i});return l&&PP(t,l)?l:null},Uk=function(e){var t=e.state,r=e.dragStartTime,s=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var d=t.viewport,f=yde({dragStartTime:r,viewport:d,subject:c,center:o,shouldUseTimeDampening:s});if(f){a(f);return}}var u=dde({center:o,destination:gi(t.impact),droppables:t.dimensions.droppables});if(u){var h=bde({dragStartTime:r,droppable:u,subject:c,center:o,shouldUseTimeDampening:s});h&&i(u.descriptor.id,h)}},jde=function(e){var t=e.scrollWindow,r=e.scrollDroppable,s=Sg(t),a=Sg(r),i=null,o=function(f){i||ut(!1);var u=i,h=u.shouldUseTimeDampening,m=u.dragStartTime;Uk({state:f,scrollWindow:s,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:h})},l=function(f){i&&ut(!1);var u=Date.now(),h=!1,m=function(){h=!0};Uk({state:f,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),i={dragStartTime:u,shouldUseTimeDampening:h},h&&o(f)},c=function(){i&&(s.cancel(),a.cancel(),i=null)};return{start:l,stop:c,scroll:o}},wde=function(e){var t=e.move,r=e.scrollDroppable,s=e.scrollWindow,a=function(d,f){var u=Fs(d.current.client.selection,f);t({client:u})},i=function(d,f){if(!PP(d,f))return f;var u=xde(d,f);if(!u)return r(d.descriptor.id,f),null;var h=hi(f,u);r(d.descriptor.id,h);var m=hi(f,h);return m},o=function(d,f,u){if(!d||!EP(f,u))return u;var h=gde(f,u);if(!h)return s(u),null;var m=hi(u,h);s(m);var v=hi(u,m);return v},l=function(d){var f=d.scrollJumpRequest;if(f){var u=gi(d.impact);u||ut(!1);var h=i(d.dimensions.droppables[u],f);if(h){var m=d.viewport,v=o(d.isWindowScrollAllowed,m,h);v&&a(d,v)}}};return l},Nde=function(e){var t=e.scrollDroppable,r=e.scrollWindow,s=e.move,a=jde({scrollWindow:r,scrollDroppable:t}),i=wde({move:s,scrollWindow:r,scrollDroppable:t}),o=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){a.scroll(d);return}d.scrollJumpRequest&&i(d)}},l={scroll:o,start:a.start,stop:a.stop};return l},sm="data-rbd",am=function(){var e=sm+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),OC=function(){var e=sm+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Sde=function(){var e=sm+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Vk={contextId:sm+"-scroll-container-context-id"},Cde=function(t){return function(r){return"["+r+'="'+t+'"]'}},sv=function(t,r){return t.map(function(s){var a=s.styles[r];return a?s.selector+" { "+a+" }":""}).join(" ")},Ade="pointer-events: none;",Ede=function(e){var t=Cde(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(am.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Ade,dropAnimating:l}}}(),s=function(){var l=`
      transition: `+$v.outOfTheWay+`;
    `;return{selector:t(OC.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),a={selector:t(Sde.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[s,r,a,i];return{always:sv(o,"always"),resting:sv(o,"resting"),dragging:sv(o,"dragging"),dropAnimating:sv(o,"dropAnimating"),userCancel:sv(o,"userCancel")}},xi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,rS=function(){var t=document.querySelector("head");return t||ut(!1),t},Wk=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function Pde(e,t){var r=Sr(function(){return Ede(e)},[e]),s=w.useRef(null),a=w.useRef(null),i=It(Cs(function(u){var h=a.current;h||ut(!1),h.textContent=u}),[]),o=It(function(u){var h=s.current;h||ut(!1),h.textContent=u},[]);xi(function(){!s.current&&!a.current||ut(!1);var u=Wk(t),h=Wk(t);return s.current=u,a.current=h,u.setAttribute(sm+"-always",e),h.setAttribute(sm+"-dynamic",e),rS().appendChild(u),rS().appendChild(h),o(r.always),i(r.resting),function(){var m=function(g){var p=g.current;p||ut(!1),rS().removeChild(p),g.current=null};m(s),m(a)}},[t,o,i,r.always,r.resting,e]);var l=It(function(){return i(r.dragging)},[i,r.dragging]),c=It(function(u){if(u==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),d=It(function(){a.current&&i(r.resting)},[i,r.resting]),f=Sr(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d]);return f}var $9=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function iw(e){return e instanceof $9(e).HTMLElement}function Tde(e,t){var r="["+am.contextId+'="'+e+'"]',s=a9(document.querySelectorAll(r));if(!s.length)return null;var a=Vd(s,function(i){return i.getAttribute(am.draggableId)===t});return!a||!iw(a)?null:a}function _de(e){var t=w.useRef({}),r=w.useRef(null),s=w.useRef(null),a=w.useRef(!1),i=It(function(h,m){var v={id:h,focus:m};return t.current[h]=v,function(){var p=t.current,x=p[h];x!==v&&delete p[h]}},[]),o=It(function(h){var m=Tde(e,h);m&&m!==document.activeElement&&m.focus()},[e]),l=It(function(h,m){r.current===h&&(r.current=m)},[]),c=It(function(){s.current||a.current&&(s.current=requestAnimationFrame(function(){s.current=null;var h=r.current;h&&o(h)}))},[o]),d=It(function(h){r.current=null;var m=document.activeElement;m&&m.getAttribute(am.draggableId)===h&&(r.current=h)},[]);xi(function(){return a.current=!0,function(){a.current=!1;var h=s.current;h&&cancelAnimationFrame(h)}},[]);var f=Sr(function(){return{register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[i,d,c,l]);return f}function Ide(){var e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){var m=t.indexOf(u);m!==-1&&t.splice(m,1)}}function s(u){t.length&&t.forEach(function(h){return h(u)})}function a(u){return e.draggables[u]||null}function i(u){var h=a(u);return h||ut(!1),h}var o={register:function(h){e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:function(h,m){var v=e.draggables[m.descriptor.id];v&&v.uniqueId===h.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var m=h.descriptor.id,v=a(m);v&&h.uniqueId===v.uniqueId&&(delete e.draggables[m],s({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:function(h){return!!a(h)},getAllByType:function(h){return e1(e.draggables).filter(function(m){return m.descriptor.type===h})}};function l(u){return e.droppables[u]||null}function c(u){var h=l(u);return h||ut(!1),h}var d={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var m=l(h.descriptor.id);m&&h.uniqueId===m.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:function(h){return!!l(h)},getAllByType:function(h){return e1(e.droppables).filter(function(m){return m.descriptor.type===h})}};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:r,clean:f}}function kde(){var e=Sr(Ide,[]);return w.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var TP=ce.createContext(null),r1=function(){var e=document.body;return e||ut(!1),e},Dde={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Ode=function(t){return"rbd-announcement-"+t};function Lde(e){var t=Sr(function(){return Ode(e)},[e]),r=w.useRef(null);w.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),it(i.style,Dde),r1().appendChild(i),function(){setTimeout(function(){var c=r1();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var s=It(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return s}var Rde=0,$de={separator:"::"};function _P(e,t){return t===void 0&&(t=$de),Sr(function(){return""+e+t.separator+Rde++},[t.separator,e])}function Fde(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function Mde(e){var t=e.contextId,r=e.text,s=_P("hidden-text",{separator:"-"}),a=Sr(function(){return Fde({contextId:t,uniqueId:s})},[s,t]);return w.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",r1().appendChild(o),function(){var c=r1();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var ow=ce.createContext(null);function F9(e){var t=w.useRef(e);return w.useEffect(function(){t.current=e}),t}function Bde(){var e=null;function t(){return!!e}function r(o){return o===e}function s(o){e&&ut(!1);var l={abandon:o};return e=l,l}function a(){e||ut(!1),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:s,release:a,tryAbandon:i}}var zde=9,Ude=13,IP=27,M9=32,Vde=33,Wde=34,qde=35,Hde=36,Gde=37,Kde=38,Yde=39,Xde=40,my,Qde=(my={},my[Ude]=!0,my[zde]=!0,my),B9=function(e){Qde[e.keyCode]&&e.preventDefault()},lw=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Vd(t,function(s){return"on"+s in document});return r||e}(),z9=0,qk=5;function Jde(e,t){return Math.abs(t.x-e.x)>=qk||Math.abs(t.y-e.y)>=qk}var Hk={type:"IDLE"};function Zde(e){var t=e.cancel,r=e.completed,s=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,d=o.clientY;if(l===z9){var f={x:c,y:d},u=s();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(f);return}u.type!=="PENDING"&&ut(!1);var h=u.point;if(Jde(h,f)){o.preventDefault();var m=u.actions.fluidLift(f);a({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(o){var l=s();if(l.type!=="DRAGGING"){t();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){s().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var l=s();if(l.type==="PENDING"){t();return}if(o.keyCode===IP){o.preventDefault(),t();return}B9(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=s();if(l.type==="IDLE"&&ut(!1),l.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:lw,fn:t}]}function eue(e){var t=w.useRef(Hk),r=w.useRef(jd),s=Sr(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===z9&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var h=e.findClosestDraggableId(u);if(h){var m=e.tryGetLock(h,o,{sourceEvent:u});if(m){u.preventDefault();var v={x:u.clientX,y:u.clientY};r.current(),d(m,v)}}}}}},[e]),a=Sr(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var h=e.findClosestDraggableId(u);if(h){var m=e.findOptionsForDraggable(h);m&&(m.shouldRespectForcePress||e.canGetLock(h)&&u.preventDefault())}}}}},[e]),i=It(function(){var u={passive:!1,capture:!0};r.current=Vi(window,[a,s],u)},[a,s]),o=It(function(){var f=t.current;f.type!=="IDLE"&&(t.current=Hk,r.current(),i())},[i]),l=It(function(){var f=t.current;o(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[o]),c=It(function(){var u={capture:!0,passive:!1},h=Zde({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(v){t.current=v}});r.current=Vi(window,h,u)},[l,o]),d=It(function(u,h){t.current.type!=="IDLE"&&ut(!1),t.current={type:"PENDING",point:h,actions:u},c()},[c]);xi(function(){return i(),function(){r.current()}},[i])}var Jf;function tue(){}var rue=(Jf={},Jf[Wde]=!0,Jf[Vde]=!0,Jf[Hde]=!0,Jf[qde]=!0,Jf);function nue(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===IP){i.preventDefault(),r();return}if(i.keyCode===M9){i.preventDefault(),s();return}if(i.keyCode===Xde){i.preventDefault(),e.moveDown();return}if(i.keyCode===Kde){i.preventDefault(),e.moveUp();return}if(i.keyCode===Yde){i.preventDefault(),e.moveRight();return}if(i.keyCode===Gde){i.preventDefault(),e.moveLeft();return}if(rue[i.keyCode]){i.preventDefault();return}B9(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:lw,fn:r}]}function sue(e){var t=w.useRef(tue),r=Sr(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==M9)return;var o=e.findClosestDraggableId(i);if(!o)return;var l=e.tryGetLock(o,f,{sourceEvent:i});if(!l)return;i.preventDefault();var c=!0,d=l.snapLift();t.current();function f(){c||ut(!1),c=!1,t.current(),s()}t.current=Vi(window,nue(d,f),{capture:!0,passive:!1})}}},[e]),s=It(function(){var i={passive:!1,capture:!0};t.current=Vi(window,[r],i)},[r]);xi(function(){return s(),function(){t.current()}},[s])}var nS={type:"IDLE"},aue=120,iue=.15;function oue(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===IP&&a.preventDefault(),t()}},{eventName:lw,fn:t}]}function lue(e){var t=e.cancel,r=e.completed,s=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=s();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var l=i.touches[0],c=l.clientX,d=l.clientY,f={x:c,y:d};i.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:function(i){var o=s();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(s().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=s();o.type==="IDLE"&&ut(!1);var l=i.touches[0];if(l){var c=l.force>=iue;if(c){var d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&t();return}if(d){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:lw,fn:t}]}function cue(e){var t=w.useRef(nS),r=w.useRef(jd),s=It(function(){return t.current},[]),a=It(function(m){t.current=m},[]),i=Sr(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var v=e.findClosestDraggableId(m);if(v){var g=e.tryGetLock(v,l,{sourceEvent:m});if(g){var p=m.touches[0],x=p.clientX,b=p.clientY,y={x,y:b};r.current(),u(g,y)}}}}}},[e]),o=It(function(){var m={capture:!0,passive:!1};r.current=Vi(window,[i],m)},[i]),l=It(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a(nS),r.current(),o())},[o,a]),c=It(function(){var h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),d=It(function(){var m={capture:!0,passive:!1},v={cancel:c,completed:l,getPhase:s},g=Vi(window,lue(v),m),p=Vi(window,oue(v),m);r.current=function(){g(),p()}},[c,s,l]),f=It(function(){var m=s();m.type!=="PENDING"&&ut(!1);var v=m.actions.fluidLift(m.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[s,a]),u=It(function(m,v){s().type!=="IDLE"&&ut(!1);var g=setTimeout(f,aue);a({type:"PENDING",point:v,actions:m,longPressTimerId:g}),d()},[d,s,a,f]);xi(function(){return o(),function(){r.current();var v=s();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a(nS))}},[s,o,a]),xi(function(){var m=Vi(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var due={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function U9(e,t){if(t==null)return!1;var r=!!due[t.tagName.toLowerCase()];if(r)return!0;var s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:U9(e,t.parentElement)}function uue(e,t){var r=t.target;return iw(r)?U9(e,r):!1}var fue=function(e){return To(e.getBoundingClientRect()).center};function hue(e){return e instanceof $9(e).Element}var mue=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Vd(t,function(s){return s in Element.prototype});return r||e}();function V9(e,t){return e==null?null:e[mue](t)?e:V9(e.parentElement,t)}function pue(e,t){return e.closest?e.closest(t):V9(e,t)}function vue(e){return"["+am.contextId+'="'+e+'"]'}function gue(e,t){var r=t.target;if(!hue(r))return null;var s=vue(e),a=pue(r,s);return!a||!iw(a)?null:a}function xue(e,t){var r=gue(e,t);return r?r.getAttribute(am.draggableId):null}function yue(e,t){var r="["+OC.contextId+'="'+e+'"]',s=a9(document.querySelectorAll(r)),a=Vd(s,function(i){return i.getAttribute(OC.id)===t});return!a||!iw(a)?null:a}function bue(e){e.preventDefault()}function py(e){var t=e.expected,r=e.phase,s=e.isLockActive;return e.shouldWarn,!(!s()||t!==r)}function W9(e){var t=e.lockAPI,r=e.store,s=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=s.draggable.findById(a);return!(!i||!i.options.isEnabled||!D9(r.getState(),a))}function jue(e){var t=e.lockAPI,r=e.contextId,s=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent,c=W9({lockAPI:t,store:s,registry:a,draggableId:i});if(!c)return null;var d=a.draggable.getById(i),f=yue(r,d.descriptor.id);if(!f||l&&!d.options.canDragInteractiveElements&&uue(f,l))return null;var u=t.claim(o||jd),h="PRE_DRAG";function m(){return d.options.shouldRespectForcePress}function v(){return t.isActive(u)}function g(A,C){py({expected:A,phase:h,isLockActive:v,shouldWarn:!0})&&s.dispatch(C())}var p=g.bind(null,"DRAGGING");function x(A){function C(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(C(),h!=="PRE_DRAG"&&ut(!1)),s.dispatch(mce(A.liftActionArgs)),h="DRAGGING";function S(T,O){if(O===void 0&&(O={shouldBlockNextClick:!1}),A.cleanup(),O.shouldBlockNextClick){var _=Vi(window,[{eventName:"click",fn:bue,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(_)}C(),s.dispatch(A9({reason:T}))}return it({isActive:function(){return py({expected:"DRAGGING",phase:h,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(O){return S("DROP",O)},cancel:function(O){return S("CANCEL",O)}},A.actions)}function b(A){var C=Sg(function(T){p(function(){return C9({client:T})})}),S=x({liftActionArgs:{id:i,clientSelection:A,movementMode:"FLUID"},cleanup:function(){return C.cancel()},actions:{move:C}});return it({},S,{move:C})}function y(){var A={moveUp:function(){return p(Nce)},moveRight:function(){return p(Cce)},moveDown:function(){return p(Sce)},moveLeft:function(){return p(Ace)}};return x({liftActionArgs:{id:i,clientSelection:fue(f),movementMode:"SNAP"},cleanup:jd,actions:A})}function j(){var A=py({expected:"PRE_DRAG",phase:h,isLockActive:v,shouldWarn:!0});A&&t.release()}var E={isActive:function(){return py({expected:"PRE_DRAG",phase:h,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:b,snapLift:y,abort:j};return E}var wue=[eue,sue,cue];function Nue(e){var t=e.contextId,r=e.store,s=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?wue:[],a||[]),l=w.useState(function(){return Bde()})[0],c=It(function(b,y){b.isDragging&&!y.isDragging&&l.tryAbandon()},[l]);xi(function(){var b=r.getState(),y=r.subscribe(function(){var j=r.getState();c(b,j),b=j});return y},[l,r,c]),xi(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=It(function(x){return W9({lockAPI:l,registry:s,store:r,draggableId:x})},[l,s,r]),f=It(function(x,b,y){return jue({lockAPI:l,registry:s,contextId:t,store:r,draggableId:x,forceSensorStop:b,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null})},[t,l,s,r]),u=It(function(x){return xue(t,x)},[t]),h=It(function(x){var b=s.draggable.findById(x);return b?b.options:null},[s.draggable]),m=It(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(jP()))},[l,r]),v=It(l.isClaimed,[l]),g=Sr(function(){return{canGetLock:d,tryGetLock:f,findClosestDraggableId:u,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:v}},[d,f,u,h,m,v]),p=0;p<o.length;p++)o[p](g)}var Sue=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function av(e){return e.current||ut(!1),e.current}function Cue(e){var t=e.contextId,r=e.setCallbacks,s=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=w.useRef(null),l=F9(e),c=It(function(){return Sue(l.current)},[l]),d=Lde(t),f=Mde({contextId:t,text:i}),u=Pde(t,a),h=It(function(T){av(o).dispatch(T)},[]),m=Sr(function(){return pk({publishWhileDragging:vce,updateDroppableScroll:xce,updateDroppableIsEnabled:yce,updateDroppableIsCombineEnabled:bce,collectionStarting:gce},h)},[h]),v=kde(),g=Sr(function(){return ide(v,m)},[v,m]),p=Sr(function(){return Nde(it({scrollWindow:ode,scrollDroppable:g.scrollDroppable},pk({move:C9},h)))},[g.scrollDroppable,h]),x=_de(t),b=Sr(function(){return rde({announce:d,autoScroller:p,dimensionMarshal:g,focusMarshal:x,getResponders:c,styleMarshal:u})},[d,p,g,x,c,u]);o.current=b;var y=It(function(){var T=av(o),O=T.getState();O.phase!=="IDLE"&&T.dispatch(jP())},[]),j=It(function(){var T=av(o).getState();return T.isDragging||T.phase==="DROP_ANIMATING"},[]),E=Sr(function(){return{isDragging:j,tryAbort:y}},[j,y]);r(E);var A=It(function(T){return D9(av(o).getState(),T)},[]),C=It(function(){return mu(av(o).getState())},[]),S=Sr(function(){return{marshal:g,focus:x,contextId:t,canLift:A,isMovementAllowed:C,dragHandleUsageInstructionsId:f,registry:v}},[t,g,f,x,A,C,v]);return Nue({contextId:t,store:b,registry:v,customSensors:s,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(function(){return y},[y]),ce.createElement(ow.Provider,{value:S},ce.createElement(Gie,{context:TP,store:b},e.children))}var Aue=0;function Eue(){return Sr(function(){return""+Aue++},[])}function Pue(e){var t=Eue(),r=e.dragHandleUsageInstructions||ob.dragHandleUsageInstructions;return ce.createElement(sle,null,function(s){return ce.createElement(Cue,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var q9=function(t){return function(r){return t===r}},Tue=q9("scroll"),_ue=q9("auto"),Gk=function(t,r){return r(t.overflowX)||r(t.overflowY)},Iue=function(t){var r=window.getComputedStyle(t),s={overflowX:r.overflowX,overflowY:r.overflowY};return Gk(s,Tue)||Gk(s,_ue)},kue=function(){return!1},Due=function e(t){return t==null?null:t===document.body?kue()?t:null:t===document.documentElement?null:Iue(t)?t:e(t.parentElement)},LC=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Oue=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},Lue=function(e){var t=Due(e),r=Oue(e);return{closestScrollable:t,isFixedOnPage:r}},Rue=function(e){var t=e.descriptor,r=e.isEnabled,s=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,l=e.page,c=e.closest,d=function(){if(!c)return null;var m=c.scrollSize,v=c.client,g=_9({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:m,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:g,diff:{value:Es,displacement:Es}}}}(),f=i==="vertical"?vP:d9,u=nm({page:l,withPlaceholder:null,axis:f,frame:d}),h={descriptor:t,isCombineEnabled:s,isFixedOnPage:a,axis:f,isEnabled:r,client:o,page:l,frame:d,subject:u};return h},$ue=function(t,r){var s=e9(t);if(!r||t!==r)return s;var a=s.paddingBox.top-r.scrollTop,i=s.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,l=i+r.scrollWidth,c={top:a,right:l,bottom:o,left:i},d=uP(c,s.border),f=fP({borderBox:d,margin:s.margin,border:s.border,padding:s.padding});return f},Fue=function(e){var t=e.ref,r=e.descriptor,s=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,d=s.closestScrollable,f=$ue(t,d),u=Qb(f,a),h=function(){if(!d)return null;var v=e9(d),g={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:v,page:Qb(v,a),scroll:LC(d),scrollSize:g,shouldClipSubject:c}}(),m=Rue({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:s.isFixedOnPage,direction:i,client:f,page:u,closest:h});return m},Mue={passive:!1},Bue={passive:!0},Kk=function(e){return e.shouldPublishImmediately?Mue:Bue};function n1(e){var t=w.useContext(e);return t||ut(!1),t}var vy=function(t){return t&&t.env.closestScrollable||null};function zue(e){var t=w.useRef(null),r=n1(ow),s=_P("droppable"),a=r.registry,i=r.marshal,o=F9(e),l=Sr(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=w.useRef(l),d=Sr(function(){return Cs(function(j,E){t.current||ut(!1);var A={x:j,y:E};i.updateDroppableScroll(l.id,A)})},[l.id,i]),f=It(function(){var j=t.current;return!j||!j.env.closestScrollable?Es:LC(j.env.closestScrollable)},[]),u=It(function(){var j=f();d(j.x,j.y)},[f,d]),h=Sr(function(){return Sg(u)},[u]),m=It(function(){var j=t.current,E=vy(j);j&&E||ut(!1);var A=j.scrollOptions;if(A.shouldPublishImmediately){u();return}h()},[h,u]),v=It(function(j,E){t.current&&ut(!1);var A=o.current,C=A.getDroppableRef();C||ut(!1);var S=Lue(C),T={ref:C,descriptor:l,env:S,scrollOptions:E};t.current=T;var O=Fue({ref:C,descriptor:l,env:S,windowScroll:j,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),_=S.closestScrollable;return _&&(_.setAttribute(Vk.contextId,r.contextId),_.addEventListener("scroll",m,Kk(T.scrollOptions))),O},[r.contextId,l,m,o]),g=It(function(){var j=t.current,E=vy(j);return j&&E||ut(!1),LC(E)},[]),p=It(function(){var j=t.current;j||ut(!1);var E=vy(j);t.current=null,E&&(h.cancel(),E.removeAttribute(Vk.contextId),E.removeEventListener("scroll",m,Kk(j.scrollOptions)))},[m,h]),x=It(function(j){var E=t.current;E||ut(!1);var A=vy(E);A||ut(!1),A.scrollTop+=j.y,A.scrollLeft+=j.x},[]),b=Sr(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:g,dragStopped:p,scroll:x}},[p,v,g,x]),y=Sr(function(){return{uniqueId:s,descriptor:l,callbacks:b}},[b,l,s]);xi(function(){return c.current=y.descriptor,a.droppable.register(y),function(){t.current&&p(),a.droppable.unregister(y)}},[b,l,p,y,i,a.droppable]),xi(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),xi(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function sS(){}var Yk={width:0,height:0,margin:dle},Uue=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,a=t.animate;return r||a==="close"?Yk:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},Vue=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,a=t.animate,i=Uue({isAnimatingOpenOnMount:r,placeholder:s,animate:a});return{display:s.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?$v.placeholder:null}};function Wue(e){var t=w.useRef(null),r=It(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),s=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,l=w.useState(e.animate==="open"),c=l[0],d=l[1];w.useEffect(function(){return c?s!=="open"?(r(),d(!1),sS):t.current?sS:(t.current=setTimeout(function(){t.current=null,d(!1)}),r):sS},[s,c,r]);var f=It(function(h){h.propertyName==="height"&&(a(),s==="close"&&i())},[s,i,a]),u=Vue({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return ce.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":o,onTransitionEnd:f,ref:e.innerRef})}var que=ce.memo(Wue),kP=ce.createContext(null),Hue=function(e){DB(t,e);function t(){for(var s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s=e.call.apply(e,[this].concat(i))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(ce.PureComponent),Xk={dragging:5e3,dropAnimating:4500},Gue=function(t,r){return r?$v.drop(r.duration):t?$v.snap:$v.fluid},Kue=function(t,r){return t?r?Pg.opacity.drop:Pg.opacity.combining:null},Yue=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Xue(e){var t=e.dimension,r=t.client,s=e.offset,a=e.combineWith,i=e.dropping,o=!!a,l=Yue(e),c=!!i,d=c?kC.drop(s,o):kC.moveTo(s),f={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Gue(l,i),transform:d,opacity:Kue(o,c),zIndex:c?Xk.dropAnimating:Xk.dragging,pointerEvents:"none"};return f}function Que(e){return{transform:kC.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Jue(e){return e.type==="DRAGGING"?Xue(e):Que(e)}function Zue(e,t,r){r===void 0&&(r=Es);var s=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=ZB(a,s),o=Qb(i,r),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height},d={descriptor:e,placeholder:l,displaceBy:c,client:i,page:o};return d}function efe(e){var t=_P("draggable"),r=e.descriptor,s=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=Sr(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}},[i,l,o]),d=It(function(m){var v=a();return v||ut(!1),Zue(r,v,m)},[r,a]),f=Sr(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:d}},[r,d,c,t]),u=w.useRef(f),h=w.useRef(!0);xi(function(){return s.draggable.register(u.current),function(){return s.draggable.unregister(u.current)}},[s.draggable]),xi(function(){if(h.current){h.current=!1;return}var m=u.current;u.current=f,s.draggable.update(f,m)},[f,s.draggable])}function tfe(e){e.preventDefault()}function rfe(e){var t=w.useRef(null),r=It(function(T){t.current=T},[]),s=It(function(){return t.current},[]),a=n1(ow),i=a.contextId,o=a.dragHandleUsageInstructionsId,l=a.registry,c=n1(kP),d=c.type,f=c.droppableId,u=Sr(function(){return{id:e.draggableId,index:e.index,type:d,droppableId:f}},[e.draggableId,e.index,d,f]),h=e.children,m=e.draggableId,v=e.isEnabled,g=e.shouldRespectForcePress,p=e.canDragInteractiveElements,x=e.isClone,b=e.mapped,y=e.dropAnimationFinished;if(!x){var j=Sr(function(){return{descriptor:u,registry:l,getDraggableRef:s,canDragInteractiveElements:p,shouldRespectForcePress:g,isEnabled:v}},[u,l,s,p,g,v]);efe(j)}var E=Sr(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:tfe}:null},[i,o,m,v]),A=It(function(T){b.type==="DRAGGING"&&b.dropping&&T.propertyName==="transform"&&y()},[y,b]),C=Sr(function(){var T=Jue(b),O=b.type==="DRAGGING"&&b.dropping?A:null,_={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":m,style:T,onTransitionEnd:O},dragHandleProps:E};return _},[i,E,m,b,A,r]),S=Sr(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return h(C,b.snapshot,S)}var H9=function(e,t){return e===t},G9=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},nfe=function(t){return t.combine?t.combine.draggableId:null},sfe=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function afe(){var e=Cs(function(a,i){return{x:a,y:i}}),t=Cs(function(a,i,o,l,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=Cs(function(a,i,o,l,c,d,f){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:i,offset:a,dimension:o,forceShouldAnimate:f,snapshot:t(i,l,c,d,null)}}}),s=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],d=gi(i.impact),f=sfe(i.impact),u=i.forceShouldAnimate;return r(e(l.x,l.y),i.movementMode,c,o.isClone,d,f,u)}if(i.phase==="DROP_ANIMATING"){var h=i.completed;if(h.result.draggableId!==o.draggableId)return null;var m=o.isClone,v=i.dimensions.draggables[o.draggableId],g=h.result,p=g.mode,x=G9(g),b=nfe(g),y=i.dropDuration,j={duration:y,curve:NP.drop,moveTo:i.newHomeClientOffset,opacity:b?Pg.opacity.drop:null,scale:b?Pg.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:v,dropping:j,draggingOver:x,combineWith:b,mode:p,forceShouldAnimate:null,snapshot:t(p,m,x,b,j)}}}return null};return s}function K9(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var ife={mapped:{type:"SECONDARY",offset:Es,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:K9(null)}};function ofe(){var e=Cs(function(o,l){return{x:o,y:l}}),t=Cs(K9),r=Cs(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),s=function(l){return l?r(Es,l,!0):null},a=function(l,c,d,f){var u=d.displaced.visible[l],h=!!(f.inVirtualList&&f.effected[l]),m=nw(d),v=m&&m.draggableId===l?c:null;if(!u){if(!h)return s(v);if(d.displaced.invisible[l])return null;var g=qm(f.displacedBy.point),p=e(g.x,g.y);return r(p,v,!0)}if(h)return s(v);var x=d.displacedBy.point,b=e(x.x,x.y);return r(b,v,u.shouldAnimate)},i=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:a(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var d=l.completed;return d.result.draggableId===c.draggableId?null:a(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return i}var lfe=function(){var t=afe(),r=ofe(),s=function(i,o){return t(i,o)||r(i,o)||ife};return s},cfe={dropAnimationFinished:E9},dfe=QB(lfe,cfe,null,{context:TP,pure:!0,areStatePropsEqual:H9})(rfe);function Y9(e){var t=n1(kP),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:ce.createElement(dfe,e)}function ufe(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ce.createElement(Y9,it({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}function ffe(e){var t=w.useContext(ow);t||ut(!1);var r=t.contextId,s=t.isMovementAllowed,a=w.useRef(null),i=w.useRef(null),o=e.children,l=e.droppableId,c=e.type,d=e.mode,f=e.direction,u=e.ignoreContainerClipping,h=e.isDropDisabled,m=e.isCombineEnabled,v=e.snapshot,g=e.useClone,p=e.updateViewportMaxScroll,x=e.getContainerForClone,b=It(function(){return a.current},[]),y=It(function(_){a.current=_},[]);It(function(){return i.current},[]);var j=It(function(_){i.current=_},[]),E=It(function(){s()&&p({maxScroll:k9()})},[s,p]);zue({droppableId:l,type:c,mode:d,direction:f,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:u,getDroppableRef:b});var A=ce.createElement(Hue,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(_){var N=_.onClose,D=_.data,I=_.animate;return ce.createElement(que,{placeholder:D,onClose:N,innerRef:j,animate:I,contextId:r,onTransitionEnd:E})}),C=Sr(function(){return{innerRef:y,placeholder:A,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,A,y]),S=g?g.dragging.draggableId:null,T=Sr(function(){return{droppableId:l,type:c,isUsingCloneFor:S}},[l,S,c]);function O(){if(!g)return null;var _=g.dragging,N=g.render,D=ce.createElement(Y9,{draggableId:_.draggableId,index:_.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(I,R){return N(I,R,_)});return w4.createPortal(D,x())}return ce.createElement(kP.Provider,{value:T},o(C,v),O())}var aS=function(t,r){return t===r.droppable.type},Qk=function(t,r){return r.draggables[t.draggable.id]},hfe=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=it({},t,{shouldAnimatePlaceholder:!1}),s=Cs(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=Cs(function(o,l,c,d,f,u){var h=f.descriptor.id,m=f.descriptor.droppableId===o;if(m){var v=u?{render:u,dragging:s(f.descriptor)}:null,g={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:v}}if(!l)return r;if(!d)return t;var p={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}),i=function(l,c){var d=c.droppableId,f=c.type,u=!c.isDropDisabled,h=c.renderClone;if(l.isDragging){var m=l.critical;if(!aS(f,m))return r;var v=Qk(m,l.dimensions),g=gi(l.impact)===d;return a(d,u,g,g,v,h)}if(l.phase==="DROP_ANIMATING"){var p=l.completed;if(!aS(f,p.critical))return r;var x=Qk(p.critical,l.dimensions);return a(d,u,G9(p.result)===d,gi(p.impact)===d,x,h)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var b=l.completed;if(!aS(f,b.critical))return r;var y=gi(b.impact)===d,j=!!(b.impact.at&&b.impact.at.type==="COMBINE"),E=b.critical.droppable.id===d;return y?j?t:r:E?t:r}return r};return i},mfe={updateViewportMaxScroll:wce};function pfe(){return document.body||ut(!1),document.body}var vfe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:pfe},X9=QB(hfe,mfe,null,{context:TP,pure:!0,areStatePropsEqual:H9})(ffe);X9.defaultProps=vfe;const Jk=[{stage:wt.PROSPECTING,name:"Prospecting",color:"bg-blue-500"},{stage:wt.QUALIFICATION,name:"Qualification",color:"bg-yellow-500"},{stage:wt.NEEDS_ANALYSIS,name:"Needs Analysis",color:"bg-orange-500"},{stage:wt.PROPOSAL,name:"Proposal",color:"bg-purple-500"},{stage:wt.NEGOTIATION,name:"Negotiation",color:"bg-indigo-500"},{stage:wt.CLOSED_WON,name:"Closed Won",color:"bg-green-500"},{stage:wt.CLOSED_LOST,name:"Closed Lost",color:"bg-red-500"}];function gfe({deals:e,onDealStageChange:t,onDealClick:r}){const[s,a]=w.useState(null),i=m=>{switch(m){case Rr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Rr.WON:return"bg-green-50 text-green-700 border-green-200";case Rr.LOST:return"bg-red-50 text-red-700 border-red-200";case Rr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=m=>{switch(m){case"critical":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},l=m=>new Date(m.expectedCloseDate)<new Date&&m.status===Rr.ACTIVE,c=m=>{if(a(null),!m.destination||m.source.droppableId===m.destination.droppableId)return;const v=m.draggableId,g=m.destination.droppableId;t(v,g)},d=m=>{a(m.draggableId)},f=m=>e.filter(v=>v.stage===m),u=m=>f(m).reduce((v,g)=>v+g.value,0),h=m=>f(m).reduce((v,g)=>v+g.value*g.probability/100,0);return n.jsxs("div",{className:"space-y-6 pb-10",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:Jk.map(m=>{const v=f(m.stage),g=u(m.stage),p=h(m.stage);return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:Ge("w-3 h-3 rounded-full",m.color)}),n.jsx("span",{className:"text-xs text-muted-foreground",children:v.length})]}),n.jsx(je,{className:"text-sm font-medium",children:m.name})]}),n.jsx(fe,{className:"pt-0",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-lg font-bold",children:Ie(g)}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Weighted: ",Ie(p)]})]})})]},m.stage)})}),n.jsx(Pue,{onDragEnd:c,onDragStart:d,children:n.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-7 min-h-[600px]",children:Jk.map(m=>n.jsx(X9,{droppableId:m.stage,children:(v,g)=>n.jsxs("div",{ref:v.innerRef,...v.droppableProps,className:Ge("space-y-3 p-3 rounded-lg border-2 border-dashed transition-colors min-h-[200px]",g.isDraggingOver?"border-primary bg-primary/5":"border-muted"),children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx("div",{className:Ge("w-3 h-3 rounded-full",m.color)}),n.jsx("h3",{className:"font-semibold text-sm",children:m.name})]}),f(m.stage).map((p,x)=>n.jsx(ufe,{draggableId:p.id,index:x,children:(b,y)=>n.jsx(ue,{ref:b.innerRef,...b.draggableProps,...b.dragHandleProps,className:Ge("cursor-pointer transition-all hover:shadow-md",y.isDragging&&"rotate-3 shadow-lg",s===p.id&&"opacity-50"),onClick:()=>r(p),children:n.jsx(fe,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm line-clamp-2",children:p.name}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:p.customerName})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-bold text-primary",children:Ie(p.value)}),n.jsx(Fe,{className:Ge("ri-badge-status text-xs",o(p.priority)),children:p.priority.toUpperCase()})]}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Lt,{className:"h-3 w-3"}),n.jsxs("span",{children:[p.probability,"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ur,{className:"h-3 w-3 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:new Date(p.expectedCloseDate).toLocaleDateString()})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Fe,{className:Ge("ri-badge-status text-xs",i(p.status)),children:p.status.toUpperCase()}),l(p)&&n.jsxs("div",{className:"flex items-center space-x-1 text-red-500",children:[n.jsx(Oh,{className:"h-3 w-3 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:"Overdue"})]})]})]})})},p.id)},p.id)),v.placeholder]})},m.stage))})})]})}function xfe({metrics:e}){const t=r=>r>=80?"text-green-600":r>=60?"text-yellow-600":"text-red-600";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),n.jsx($t,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Ie(e.totalValue)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(es,{className:"h-3 w-3 mr-1"}),e.totalDeals," active deals"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),n.jsx(Lt,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Ie(e.wonValue)}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ga,{className:"h-3 w-3 mr-1"}),e.wonDeals," deals closed"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Win Rate"}),n.jsx(Ga,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[e.winRate.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Industry average: 27%"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Avg Deal Size"}),n.jsx($t,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Ie(e.averageDealSize)}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(ur,{className:"h-3 w-3 mr-1"}),e.averageSalesCycle.toFixed(0)," day cycle"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Stage Conversion Rates"}),n.jsx(Be,{children:"Conversion rates and average time spent in each stage"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-6",children:e.conversionRates.map((r,s)=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm font-medium capitalize",children:[r.fromStage.replace("_"," ")," → ",r.toStage.replace("_"," ")]}),n.jsxs("span",{className:`text-sm font-bold ${t(r.rate)}`,children:[r.rate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[n.jsx(ur,{className:"h-3 w-3"}),n.jsxs("span",{children:[r.averageDuration,"h avg"]})]})]}),n.jsx(Bu,{value:r.rate,className:"h-2"})]},`${r.fromStage}-${r.toStage}`))})})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Pipeline Health"}),n.jsx(Be,{children:"Key performance indicators"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Lt,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Win Rate"})]}),n.jsxs("span",{className:"text-lg font-bold text-green-600",children:[e.winRate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($t,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Average Deal Size"})]}),n.jsx("span",{className:"text-lg font-bold text-blue-600",children:Ie(e.averageDealSize)})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ur,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Sales Cycle"})]}),n.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[e.averageSalesCycle.toFixed(0)," days"]})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Deal Breakdown"}),n.jsx(Be,{children:"Current pipeline composition"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Deals"}),n.jsx("span",{className:"font-bold",children:e.totalDeals})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Won Deals"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-bold text-green-600",children:e.wonDeals}),n.jsxs("span",{className:"text-xs text-green-600",children:["(",Ie(e.wonValue),")"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Lost Deals"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-bold text-red-600",children:e.lostDeals}),n.jsxs("span",{className:"text-xs text-red-600",children:["(",Ie(e.lostValue),")"]})]})]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Active Pipeline"}),n.jsx("span",{className:"font-bold text-primary",children:Ie(e.totalValue-e.wonValue-e.lostValue)})]})})]})})]})]})]})}const yfe=["Best Price","Superior Product Features","Excellent Service","Strong Relationship","Competitive Financing","Quick Delivery","Brand Reputation","Referral/Recommendation"],bfe=["Price Too High","Lost to Competitor","Budget Constraints","Timing Issues","Product Limitations","Service Concerns","Decision Delayed","Requirements Changed"],jfe=["Camping World","Lazydays","General RV","PPL Motor Homes","Local Dealer","Private Seller","Other"];function wfe({deals:e,winLossReports:t,onCreateReport:r}){const[s,a]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}),d=e.filter(A=>A.status==="won"||A.status==="lost"),f=e.filter(A=>A.status==="won"),u=e.filter(A=>A.status==="lost"),h=d.length>0?f.length/d.length*100:0,m=f.length>0?f.reduce((A,C)=>A+C.value,0)/f.length:0,v=u.length>0?u.reduce((A,C)=>A+C.value,0)/u.length:0,g=A=>{o(A),c({...l,outcome:A.status==="won"?"won":"lost"}),a(!0)},p=()=>{i&&(r(i.id,l.outcome,l),a(!1),o(null),c({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}))},x=(A,C,S)=>{C.trim()&&!A.includes(C.trim())&&S([...A,C.trim()])},b=(A,C,S)=>{S(A.filter((T,O)=>O!==C))},y=A=>{const C=t.filter(T=>T.outcome===A),S={};return C.forEach(T=>{S[T.primaryReason]=(S[T.primaryReason]||0)+1}),Object.entries(S).sort(([,T],[,O])=>O-T).slice(0,5).map(([T,O])=>({reason:T,count:O,percentage:C.length>0?O/C.length*100:0}))},j=y("won"),E=y("lost");return n.jsxs("div",{className:"space-y-6",children:[s&&i&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Win/Loss Report"}),n.jsxs(Be,{children:[i.name," - ",Ie(i.value)]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>a(!1),children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Outcome"}),n.jsxs(We,{value:l.outcome,onValueChange:A=>c(C=>({...C,outcome:A})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"won",children:"Won"}),n.jsx(K,{value:"lost",children:"Lost"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Primary Reason"}),n.jsxs(We,{value:l.primaryReason,onValueChange:A=>c(C=>({...C,primaryReason:A})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select primary reason"})}),n.jsx(Ve,{children:(l.outcome==="won"?yfe:bfe).map(A=>n.jsx(K,{value:A,children:A},A))})]})]}),l.outcome==="lost"&&n.jsxs("div",{children:[n.jsx(ae,{children:"Competitor Won"}),n.jsxs(We,{value:l.competitorWon,onValueChange:A=>c(C=>({...C,competitorWon:A})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select competitor"})}),n.jsx(Ve,{children:jfe.map(A=>n.jsx(K,{value:A,children:A},A))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Customer Feedback"}),n.jsx(ir,{value:l.feedback,onChange:A=>c(C=>({...C,feedback:A.target.value})),placeholder:"What did the customer say about their decision?",rows:3})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Lessons Learned"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{placeholder:"Add a lesson learned",onKeyDown:A=>{if(A.key==="Enter"){A.preventDefault();const C=A.currentTarget;x(l.lessonsLearned,C.value,S=>c(T=>({...T,lessonsLearned:S}))),C.value=""}}}),n.jsx(J,{type:"button",variant:"outline",onClick:A=>{const C=A.currentTarget.previousElementSibling;x(l.lessonsLearned,C.value,S=>c(T=>({...T,lessonsLearned:S}))),C.value=""},children:n.jsx(Et,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:l.lessonsLearned.map((A,C)=>n.jsxs(Fe,{variant:"secondary",className:"flex items-center gap-1",children:[A,n.jsx(qt,{className:"h-3 w-3 cursor-pointer",onClick:()=>b(l.lessonsLearned,C,S=>c(T=>({...T,lessonsLearned:S})))})]},C))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Action Items"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{placeholder:"Add an action item",onKeyDown:A=>{if(A.key==="Enter"){A.preventDefault();const C=A.currentTarget;x(l.actionItems,C.value,S=>c(T=>({...T,actionItems:S}))),C.value=""}}}),n.jsx(J,{type:"button",variant:"outline",onClick:A=>{const C=A.currentTarget.previousElementSibling;x(l.actionItems,C.value,S=>c(T=>({...T,actionItems:S}))),C.value=""},children:n.jsx(Et,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:l.actionItems.map((A,C)=>n.jsxs(Fe,{variant:"secondary",className:"flex items-center gap-1",children:[A,n.jsx(qt,{className:"h-3 w-3 cursor-pointer",onClick:()=>b(l.actionItems,C,S=>c(T=>({...T,actionItems:S})))})]},C))})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsxs(J,{onClick:p,children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Report"]})]})]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Win Rate"}),n.jsx(Ga,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[h.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(es,{className:"h-3 w-3 mr-1"}),d.length," closed deals"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),n.jsx(Lt,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:f.length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),Ie(m)," avg"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-red-900",children:"Lost Deals"}),n.jsx(Lh,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:u.length}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[n.jsx(Lh,{className:"h-3 w-3 mr-1"}),Ie(v)," avg"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Reports"}),n.jsx(es,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:t.length}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(es,{className:"h-3 w-3 mr-1"}),"Completed reports"]})]})]})]}),n.jsxs(Ar,{defaultValue:"analysis",className:"space-y-6",children:[n.jsxs(jr,{children:[n.jsx(Ze,{value:"analysis",children:"Analysis"}),n.jsx(Ze,{value:"closed-deals",children:"Closed Deals"}),n.jsx(Ze,{value:"reports",children:"Reports"})]}),n.jsxs(tt,{value:"analysis",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2 text-green-500"}),"Win Reasons"]}),n.jsx(Be,{children:"Top reasons for winning deals"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:j.length>0?j.map((A,C)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:A.reason}),n.jsxs("span",{className:"text-sm text-green-600",children:[A.percentage.toFixed(0),"%"]})]}),n.jsx(Bu,{value:A.percentage,className:"h-2"})]},C)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win reports available"})})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Lh,{className:"h-5 w-5 mr-2 text-red-500"}),"Loss Reasons"]}),n.jsx(Be,{children:"Top reasons for losing deals"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:E.length>0?E.map((A,C)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:A.reason}),n.jsxs("span",{className:"text-sm text-red-600",children:[A.percentage.toFixed(0),"%"]})]}),n.jsx(Bu,{value:A.percentage,className:"h-2"})]},C)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No loss reports available"})})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Lessons Learned"}),n.jsx(Be,{children:"Key insights from win/loss reports"})]}),n.jsx(fe,{children:t.length>0?n.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((A,C)=>n.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[A.outcome==="won"?n.jsx(Fe,{className:"bg-green-50 text-green-700 border-green-200",children:"WON"}):n.jsx(Fe,{className:"bg-red-50 text-red-700 border-red-200",children:"LOST"}),n.jsx("span",{className:"text-sm font-medium",children:A.primaryReason})]}),n.jsx("div",{className:"space-y-2",children:A.lessonsLearned.map((S,T)=>n.jsxs("p",{className:"text-sm text-muted-foreground",children:["• ",S]},T))})]},C))}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No lessons learned available"})})]})]}),n.jsx(tt,{value:"closed-deals",className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Recently Closed Deals"}),n.jsx(Be,{children:"Deals that have been won or lost"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:d.length>0?d.map(A=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold",children:A.name}),n.jsx(Fe,{className:A.status==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:A.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",A.customerName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Value:"})," ",Ie(A.value)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Closed:"})," ",A.actualCloseDate?ft(A.actualCloseDate):"N/A"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Rep:"})," ",A.assignedTo]})]})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g(A),className:"shadow-sm",children:[n.jsx(Et,{className:"h-3 w-3 mr-1"}),"Report"]})]},A.id)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No closed deals available"})})})]})}),n.jsx(tt,{value:"reports",className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Win/Loss Reports"}),n.jsx(Be,{children:"Detailed reports on won and lost deals"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:t.length>0?t.map(A=>{const C=e.find(S=>S.id===A.dealId);return n.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Fe,{className:A.outcome==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:A.outcome.toUpperCase()}),n.jsx("h3",{className:"font-semibold",children:(C==null?void 0:C.name)||"Unknown Deal"})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:ft(A.reportedAt)})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Reasons"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Primary:"})," ",A.primaryReason]}),A.secondaryReasons.length>0&&n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Secondary:"})," ",A.secondaryReasons.join(", ")]}),A.competitorWon&&n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Competitor:"})," ",A.competitorWon]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Feedback"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:A.feedback})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t",children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Lessons & Action Items"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Lessons Learned:"}),n.jsx("ul",{className:"text-sm space-y-1",children:A.lessonsLearned.map((S,T)=>n.jsxs("li",{children:["• ",S]},T))})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Action Items:"}),n.jsx("ul",{className:"text-sm space-y-1",children:A.actionItems.map((S,T)=>n.jsxs("li",{children:["• ",S]},T))})]})]})]})]},A.id)}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win/loss reports available"})})})]})})]})]})}function Nfe({deal:e,onClose:t,onEdit:r}){const s=l=>{switch(l){case Rr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Rr.WON:return"bg-green-50 text-green-700 border-green-200";case Rr.LOST:return"bg-red-50 text-red-700 border-red-200";case Rr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=l=>{switch(l){case il.CRITICAL:return"bg-red-50 text-red-700 border-red-200";case il.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case il.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case il.LOW:return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=l=>{switch(l){case wt.PROSPECTING:return"bg-blue-50 text-blue-700 border-blue-200";case wt.QUALIFICATION:return"bg-yellow-50 text-yellow-700 border-yellow-200";case wt.NEEDS_ANALYSIS:return"bg-orange-50 text-orange-700 border-orange-200";case wt.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case wt.NEGOTIATION:return"bg-indigo-50 text-indigo-700 border-indigo-200";case wt.CLOSED_WON:return"bg-green-50 text-green-700 border-green-200";case wt.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=l=>new Date(l.expectedCloseDate)<new Date&&l.status===Rr.ACTIVE;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:e.name}),n.jsx(Be,{children:"Deal details and information"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>r(e),size:"sm",children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Deal"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",s(e.status)),children:e.status.toUpperCase()}),n.jsx(Fe,{className:Ge("ri-badge-status",i(e.stage)),children:e.stage.replace("_"," ").toUpperCase()}),n.jsx(Fe,{className:Ge("ri-badge-status",a(e.priority)),children:e.priority.toUpperCase()}),o(e)&&n.jsxs(Fe,{className:"bg-red-50 text-red-700 border-red-200",children:[n.jsx(Po,{className:"h-3 w-3 mr-1"}),"OVERDUE"]}),e.requiresApproval&&n.jsx(Fe,{className:"bg-orange-50 text-orange-700 border-orange-200",children:"REQUIRES APPROVAL"})]}),n.jsxs(Ar,{defaultValue:"overview",className:"space-y-4",children:[n.jsxs(jr,{children:[n.jsx(Ze,{value:"overview",children:"Overview"}),n.jsx(Ze,{value:"products",children:"Products"}),n.jsx(Ze,{value:"history",children:"History"})]}),n.jsxs(tt,{value:"overview",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:e.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Value"}),n.jsx("p",{className:"font-bold text-primary text-lg",children:Ie(e.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Probability"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ga,{className:"h-4 w-4 text-blue-500"}),n.jsxs("p",{className:"font-medium",children:[e.probability,"%"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expected Close"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ur,{className:"h-4 w-4 text-purple-500"}),n.jsx("p",{className:"font-medium",children:ft(e.expectedCloseDate)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"h-4 w-4 text-green-500"}),n.jsx("p",{className:"font-medium",children:e.assignedTo||"Unassigned"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Territory"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(fc,{className:"h-4 w-4 text-orange-500"}),n.jsx("p",{className:"font-medium",children:e.territoryId||"No Territory"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ur,{className:"h-4 w-4 text-blue-500"}),n.jsx("p",{className:"font-medium",children:ft(e.createdAt)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ur,{className:"h-4 w-4 text-blue-500"}),n.jsx("p",{className:"font-medium",children:ft(e.updatedAt)})]})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.notes})})]}),Object.keys(e.customFields||{}).length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custom Fields"}),n.jsx("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:Object.entries(e.customFields||{}).map(([l,c])=>n.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[n.jsxs("span",{className:"text-sm font-medium capitalize",children:[l.replace(/([A-Z])/g," $1").trim(),": "]}),n.jsx("span",{className:"text-sm",children:c==null?void 0:c.toString()})]},l))})]})]}),n.jsxs(tt,{value:"products",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Products & Services"}),e.products&&e.products.length>0?n.jsxs("div",{className:"space-y-3",children:[e.products.map(l=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ia,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"font-medium",children:l.productName})]}),n.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Quantity: ",l.quantity]}),n.jsxs("span",{children:["Unit Price: ",Ie(l.unitPrice)]}),l.discount>0&&n.jsxs("span",{className:"text-green-600",children:["Discount: ",Ie(l.discount)]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold",children:Ie(l.total)})})]},l.id)),n.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),n.jsx("span",{className:"text-lg font-bold text-primary",children:Ie(e.value)})]})})]}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ia,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No products added to this deal"}),n.jsx("p",{className:"text-sm",children:"Edit the deal to add products"})]})]}),n.jsxs(tt,{value:"history",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Stage History"}),e.stageHistory&&e.stageHistory.length>0?n.jsx("div",{className:"space-y-3",children:e.stageHistory.map((l,c)=>n.jsxs("div",{className:"relative",children:[c<e.stageHistory.length-1&&n.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground",children:c+1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium capitalize",children:l.fromStage?`${l.fromStage.replace("_"," ")} → ${l.toStage.replace("_"," ")}`:`Started at ${l.toStage.replace("_"," ")}`}),n.jsx("span",{className:"text-xs text-muted-foreground",children:ft(l.changedAt)})]}),l.duration!==void 0&&n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Duration: ",l.duration," hours"]}),l.notes&&n.jsx("div",{className:"mt-1 text-sm bg-muted/30 p-2 rounded-md",children:l.notes})]})]})]},c))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ur,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No stage history available"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Close"}),n.jsxs(J,{onClick:()=>r(e),children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Deal"]})]})]})]})})}function Sfe({territories:e,salesReps:t,deals:r,onCreateTerritory:s,onUpdateTerritory:a,onDeleteTerritory:i}){var A,C,S;const[o,l]=w.useState(!1),[c,d]=w.useState(null),[f,u]=w.useState({name:"",type:Wc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),[h,m]=w.useState({field:"",operator:"equals",value:"",priority:1}),v=()=>{d(null),u({name:"",type:Wc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),l(!0)},g=T=>{d(T),u({name:T.name,type:T.type,description:T.description,assignedTo:[...T.assignedTo],rules:[...T.rules],isActive:T.isActive}),l(!0)},p=()=>{f.name&&(c?a(c.id,f):s(f),l(!1),d(null),u({name:"",type:Wc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}))},x=()=>{if(!h.field||!h.operator)return;const T={id:Math.random().toString(36).substr(2,9),field:h.field,operator:h.operator,value:h.value,priority:h.priority||1};u(O=>({...O,rules:[...O.rules||[],T]})),m({field:"",operator:"equals",value:"",priority:1})},b=T=>{u(O=>{var _;return{...O,rules:((_=O.rules)==null?void 0:_.filter(N=>N.id!==T))||[]}})},y=(T,O)=>{u(O?_=>({..._,assignedTo:[..._.assignedTo||[],T]}):_=>{var N;return{..._,assignedTo:((N=_.assignedTo)==null?void 0:N.filter(D=>D!==T))||[]}})},j=T=>r.filter(_=>_.territoryId===T).length,E=T=>{const O=e.find(_=>_.id===T);return O?t.filter(_=>O.assignedTo.includes(_.id)):[]};return n.jsxs("div",{className:"space-y-6",children:[o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:c?"Edit Territory":"Create Territory"}),n.jsx(Be,{children:c?"Update territory details and rules":"Define a new sales territory"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>l(!1),children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Territory Name *"}),n.jsx(Pe,{id:"name",value:f.name,onChange:T=>u(O=>({...O,name:T.target.value})),placeholder:"e.g., North Region"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Territory Type"}),n.jsxs(We,{value:f.type,onValueChange:T=>u(O=>({...O,type:T})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:Wc.GEOGRAPHIC,children:"Geographic"}),n.jsx(K,{value:Wc.INDUSTRY,children:"Industry"}),n.jsx(K,{value:Wc.ACCOUNT_SIZE,children:"Account Size"}),n.jsx(K,{value:Wc.PRODUCT_LINE,children:"Product Line"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"description",children:"Description"}),n.jsx(ir,{id:"description",value:f.description,onChange:T=>u(O=>({...O,description:T.target.value})),placeholder:"Describe the territory",rows:3})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx(ae,{children:"Territory Rules"})}),n.jsxs("div",{className:"space-y-4",children:[(A=f.rules)==null?void 0:A.map(T=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:T.field}),n.jsx("span",{className:"text-muted-foreground",children:T.operator}),n.jsx("span",{children:T.value.toString()})]}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Priority: ",T.priority]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>b(T.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]},T.id)),n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Field"}),n.jsxs(We,{value:h.field,onValueChange:T=>m(O=>({...O,field:T})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select field"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"state",children:"State"}),n.jsx(K,{value:"zipCode",children:"Zip Code"}),n.jsx(K,{value:"country",children:"Country"}),n.jsx(K,{value:"industry",children:"Industry"}),n.jsx(K,{value:"dealSize",children:"Deal Size"}),n.jsx(K,{value:"productType",children:"Product Type"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Operator"}),n.jsxs(We,{value:h.operator,onValueChange:T=>m(O=>({...O,operator:T})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"equals",children:"Equals"}),n.jsx(K,{value:"contains",children:"Contains"}),n.jsx(K,{value:"starts_with",children:"Starts With"}),n.jsx(K,{value:"in_range",children:"In Range"}),n.jsx(K,{value:"greater_than",children:"Greater Than"}),n.jsx(K,{value:"less_than",children:"Less Than"})]})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(ae,{children:"Value"}),n.jsx(Pe,{value:((C=h.value)==null?void 0:C.toString())||"",onChange:T=>m(O=>({...O,value:T.target.value})),placeholder:"Rule value"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"For multiple values, separate with commas"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(ae,{children:"Priority"}),n.jsxs(We,{value:((S=h.priority)==null?void 0:S.toString())||"1",onValueChange:T=>m(O=>({...O,priority:parseInt(T)})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"1",children:"1 - Highest"}),n.jsx(K,{value:"2",children:"2"}),n.jsx(K,{value:"3",children:"3"}),n.jsx(K,{value:"4",children:"4"}),n.jsx(K,{value:"5",children:"5 - Lowest"})]})]})]}),n.jsx("div",{className:"flex justify-end mt-4",children:n.jsxs(J,{onClick:x,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Rule"]})})]})})]})]}),n.jsxs("div",{children:[n.jsx(ae,{className:"mb-2 block",children:"Assign Sales Reps"}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-lg",children:t.map(T=>{var O;return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:`rep-${T.id}`,checked:(O=f.assignedTo)==null?void 0:O.includes(T.id),onCheckedChange:_=>y(T.id,!!_)}),n.jsx(ae,{htmlFor:`rep-${T.id}`,className:"text-sm cursor-pointer",children:T.name})]},T.id)})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isActive",checked:f.isActive,onCheckedChange:T=>u(O=>({...O,isActive:!!T}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active territory"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),n.jsxs(J,{onClick:p,children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),c?"Update":"Create"," Territory"]})]})]})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Territory Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Define and manage sales territories and assignment rules"})]}),n.jsxs(J,{onClick:v,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create Territory"]})]}),n.jsxs("div",{className:"space-y-6",children:[e.map(T=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(je,{children:T.name}),n.jsx(Fe,{className:T.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:T.isActive?"Active":"Inactive"}),n.jsx(Fe,{variant:"outline",children:T.type.replace("_"," ")})]}),n.jsx(Be,{className:"mt-1",children:T.description})]}),n.jsx("div",{className:"flex space-x-2",children:n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g(T),children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Rules"}),n.jsxs("div",{className:"space-y-2",children:[T.rules.map(O=>n.jsx("div",{className:"p-2 bg-muted/30 rounded-lg text-sm",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:O.field}),n.jsx("span",{className:"text-muted-foreground",children:O.operator}),n.jsx("span",{children:O.value.toString()})]})},O.id)),T.rules.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"No rules defined"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Assigned Sales Reps"}),n.jsxs("div",{className:"space-y-2",children:[E(T.id).map(O=>n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-lg",children:[n.jsx(Yn,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm",children:O.name})]},O.id)),T.assignedTo.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"No reps assigned"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Stats"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg",children:[n.jsx("span",{className:"text-sm text-blue-700",children:"Deals"}),n.jsx("span",{className:"font-bold text-blue-700",children:j(T.id)})]}),n.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg",children:[n.jsx("span",{className:"text-sm text-green-700",children:"Reps"}),n.jsx("span",{className:"font-bold text-green-700",children:T.assignedTo.length})]})]})]})]})})]},T.id)),e.length===0&&n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(fc,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Territories Defined"}),n.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create territories to organize your sales team and deals by region, industry, or other criteria."}),n.jsxs(J,{onClick:v,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create First Territory"]})]})})]})]})}function Cfe({deals:e,approvalWorkflows:t,onApprove:r,onReject:s,onEscalate:a}){var b;const[i,o]=w.useState("pending"),[l,c]=w.useState(null),[d,f]=w.useState(""),u=y=>{switch(y){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"escalated":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},h=y=>{switch(y){case"pending":return n.jsx(ur,{className:"h-4 w-4 text-yellow-500"});case"approved":return n.jsx(an,{className:"h-4 w-4 text-green-500"});case"rejected":return n.jsx(Do,{className:"h-4 w-4 text-red-500"});case"escalated":return n.jsx(Po,{className:"h-4 w-4 text-orange-500"});default:return n.jsx(ur,{className:"h-4 w-4 text-gray-500"})}},m=y=>t.filter(j=>j.status===y),v=y=>e.find(j=>j.id===y),g=()=>{if(!l)return;const y=l.steps.find(j=>j.stepNumber===l.currentStep);y&&(r(l.id,y.id,d),f(""),c(null))},p=()=>{if(!l)return;const y=l.steps.find(j=>j.stepNumber===l.currentStep);y&&(s(l.id,y.id,d),f(""),c(null))},x=()=>{if(!l)return;const y=l.steps.find(j=>j.stepNumber===l.currentStep);y&&(a(l.id,y.id,d),f(""),c(null))};return n.jsxs("div",{className:"space-y-6",children:[l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Approval Request"}),n.jsx(Be,{children:((b=v(l.dealId))==null?void 0:b.name)||"Unknown Deal"})]}),n.jsx(Fe,{className:Ge("ri-badge-status",u(l.status)),children:l.status.toUpperCase()})]})}),n.jsxs(fe,{className:"space-y-6",children:[n.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:(()=>{const y=v(l.dealId);return y?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Customer:"}),n.jsx("p",{className:"text-sm",children:y.customerName})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-sm font-bold",children:Ie(y.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Stage:"}),n.jsx("p",{className:"text-sm",children:y.stage.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Assigned To:"}),n.jsx("p",{className:"text-sm",children:y.assignedTo})]})]}):null})()})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Workflow Details"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Type:"}),n.jsx("p",{className:"text-sm",children:l.workflowType.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),n.jsx("p",{className:"text-sm",children:l.requestedBy})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:ft(l.requestedAt)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Current Step:"}),n.jsxs("p",{className:"text-sm",children:[l.currentStep," of ",l.totalSteps]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"comments",children:"Comments"}),n.jsx(ir,{id:"comments",value:d,onChange:y=>f(y.target.value),placeholder:"Add your comments here...",rows:3})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Approval Steps"}),n.jsx("div",{className:"space-y-4",children:l.steps.map((y,j)=>{const E=y.stepNumber===l.currentStep,A=y.stepNumber<l.currentStep;return n.jsxs("div",{className:Ge("p-3 rounded-lg border-2",E?"border-primary bg-primary/5":A?"border-muted bg-muted/10":"border-dashed border-muted"),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold",children:y.stepNumber}),n.jsx("span",{className:"font-medium",children:y.approverRole.replace("_"," ")})]}),n.jsxs(Fe,{className:Ge("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Requires ",y.requiredApprovals," approval(s) from ",y.approverIds.length," approver(s)"]}),y.currentApprovals.length>0&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx("h4",{className:"text-xs font-medium",children:"Approvals:"}),y.currentApprovals.map((C,S)=>n.jsxs("div",{className:"flex items-start space-x-2 text-xs p-2 bg-muted/30 rounded",children:[C.action==="approve"?n.jsx(UX,{className:"h-3 w-3 text-green-500 mt-0.5"}):C.action==="reject"?n.jsx(zX,{className:"h-3 w-3 text-red-500 mt-0.5"}):n.jsx(Po,{className:"h-3 w-3 text-orange-500 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:C.approverId}),n.jsx("div",{className:"text-muted-foreground",children:ft(C.actionDate)}),C.comments&&n.jsx("div",{className:"mt-1 italic",children:C.comments})]})]},S))]})]},y.id)})})]}),l.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"comments",children:"Comments"}),n.jsx(ir,{id:"comments",value:d,onChange:y=>f(y.target.value),placeholder:"Add your comments here...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),n.jsxs(J,{variant:"outline",onClick:x,children:[n.jsx(Po,{className:"h-4 w-4 mr-2"}),"Escalate"]}),n.jsxs(J,{variant:"destructive",onClick:p,children:[n.jsx(Do,{className:"h-4 w-4 mr-2"}),"Reject"]}),n.jsxs(J,{variant:"default",onClick:g,children:[n.jsx(an,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]}),l.status!=="pending"&&n.jsx("div",{className:"flex justify-end pt-6 border-t",children:n.jsx(J,{variant:"outline",onClick:()=>c(null),children:"Close"})})]})]})}),n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Approval Workflows"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage approval requests for deals above threshold"})]})}),n.jsxs(Ar,{value:i,onValueChange:o,className:"space-y-6",children:[n.jsxs(jr,{children:[n.jsxs(Ze,{value:"pending",children:["Pending",n.jsx(Fe,{className:"ml-2 bg-yellow-50 text-yellow-700 border-yellow-200",children:m("pending").length})]}),n.jsxs(Ze,{value:"approved",children:["Approved",n.jsx(Fe,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:m("approved").length})]}),n.jsxs(Ze,{value:"rejected",children:["Rejected",n.jsx(Fe,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:m("rejected").length})]}),n.jsxs(Ze,{value:"escalated",children:["Escalated",n.jsx(Fe,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",children:m("escalated").length})]})]}),n.jsx(tt,{value:"pending",className:"space-y-4",children:m("pending").length>0?m("pending").map(y=>{const j=v(y.dealId);return j?n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(y),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:j.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),n.jsxs(Fe,{className:Ge("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:Ie(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),n.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[n.jsx(As,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm",children:y.requestedBy})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:ft(y.requestedAt)})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"Approval Progress:"}),n.jsxs("span",{className:"text-sm",children:[y.currentStep," of ",y.totalSteps]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:y.steps.map((E,A)=>{const C=E.stepNumber<y.currentStep,S=E.stepNumber===y.currentStep;return n.jsxs(ce.Fragment,{children:[n.jsx("div",{className:Ge("flex items-center justify-center w-8 h-8 rounded-full",C?"bg-primary text-primary-foreground":S?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:E.stepNumber}),A<y.steps.length-1&&n.jsx(_X,{className:"h-4 w-4 text-muted-foreground"})]},E.id)})})]})]})},y.id):null}):n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(ur,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Pending Approvals"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no deals currently waiting for your approval."})]})})}),n.jsx(tt,{value:"approved",className:"space-y-4",children:m("approved").length>0?m("approved").map(y=>{const j=v(y.dealId);return j?n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(y),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:j.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),n.jsxs(Fe,{className:Ge("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:Ie(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),n.jsx("p",{className:"text-sm",children:y.completedAt?ft(y.completedAt):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:y.workflowType.replace("_"," ")})]})]})]})},y.id):null}):n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(an,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Approved Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no approved deal workflows yet."})]})})}),n.jsx(tt,{value:"rejected",className:"space-y-4",children:m("rejected").length>0?m("rejected").map(y=>{const j=v(y.dealId);return j?n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(y),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:j.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),n.jsxs(Fe,{className:Ge("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:Ie(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),n.jsx("p",{className:"text-sm",children:y.completedAt?ft(y.completedAt):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:y.workflowType.replace("_"," ")})]})]})]})},y.id):null}):n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Do,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Rejected Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no rejected deal workflows."})]})})}),n.jsx(tt,{value:"escalated",className:"space-y-4",children:m("escalated").length>0?m("escalated").map(y=>{const j=v(y.dealId);return j?n.jsx(ue,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(y),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:j.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),n.jsxs(Fe,{className:Ge("ri-badge-status",u(y.status)),children:[h(y.status),n.jsx("span",{className:"ml-1",children:y.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:Ie(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:ft(y.requestedAt)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:y.workflowType.replace("_"," ")})]})]})]})},y.id):null}):n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Po,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Escalated Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no escalated deal workflows."})]})})})]})]})}function Afe({deal:e,customers:t,salesReps:r,territories:s,products:a,onSave:i,onCancel:o}){const{toast:l}=_t(),[c,d]=w.useState(!1),[f,u]=w.useState({name:"",customerId:"",customerName:"",stage:wt.PROSPECTING,status:Rr.ACTIVE,priority:il.MEDIUM,value:0,probability:10,expectedCloseDate:new Date(Date.now()+30*24*60*60*1e3),assignedTo:"",territoryId:"",sourceId:"",competitorIds:[],products:[],notes:"",requiresApproval:!1,customFields:{}}),[h,m]=w.useState(!1),[v,g]=w.useState(!1),[p,x]=w.useState({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0});w.useEffect(()=>{e&&u({...e,expectedCloseDate:new Date(e.expectedCloseDate)})},[e]),w.useEffect(()=>{if(f.customerId){const C=t.find(S=>S.id===f.customerId);C&&u(S=>({...S,customerName:`${C.firstName} ${C.lastName}`}))}},[f.customerId,t]),w.useEffect(()=>{if(f.products&&f.products.length>0){const C=f.products.reduce((S,T)=>S+T.total,0);u(S=>({...S,value:C}))}},[f.products]),w.useEffect(()=>{const C=p.quantity||1,S=p.unitPrice||0,T=p.discount||0,O=C*S-T;x(_=>({..._,total:O}))},[p.quantity,p.unitPrice,p.discount]);const b=async C=>{if(C.preventDefault(),!f.name||!f.customerId||!f.expectedCloseDate){l({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}d(!0);try{await i(f),l({title:"Success",description:`Deal ${e?"updated":"created"} successfully`})}catch{l({title:"Error",description:`Failed to ${e?"update":"create"} deal`,variant:"destructive"})}finally{d(!1)}},y=()=>{if(!p.productId||!p.productName){l({title:"Validation Error",description:"Please select a product",variant:"destructive"});return}const C={id:Math.random().toString(36).substr(2,9),productId:p.productId,productName:p.productName,quantity:p.quantity||1,unitPrice:p.unitPrice||0,discount:p.discount||0,total:p.total||0};u(S=>({...S,products:[...S.products||[],C]})),x({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0}),m(!1)},j=C=>{u(S=>{var T;return{...S,products:((T=S.products)==null?void 0:T.filter(O=>O.id!==C))||[]}})},E=C=>{const S=a.find(T=>T.id===C);S&&x({productId:S.id,productName:S.name,quantity:1,unitPrice:S.price,discount:0,total:S.price})},A=C=>{u(S=>({...S,customerId:C.id,customerName:`${C.firstName} ${C.lastName}`})),g(!1),l({title:"Customer Added",description:`${C.firstName} ${C.lastName} has been added as a customer.`})};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[v&&n.jsx(gf,{onClose:()=>g(!1),onSuccess:A}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Deal":"Create Deal"}),n.jsx(Be,{children:e?"Update deal details":"Create a new sales deal"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:o,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Deal Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Deal Name *"}),n.jsx(Pe,{id:"name",value:f.name,onChange:C=>u(S=>({...S,name:C.target.value})),placeholder:"Enter deal name"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(We,{value:f.customerId||"",onValueChange:C=>u(S=>({...S,customerId:C})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsxs(Ve,{children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>g(!0),children:[n.jsx(Et,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),t.map(C=>n.jsxs(K,{value:C.id,children:[C.firstName," ",C.lastName]},C.id))]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"stage",children:"Stage"}),n.jsxs(We,{value:f.stage,onValueChange:C=>u(S=>({...S,stage:C,probability:C===wt.PROSPECTING?10:C===wt.QUALIFICATION?25:C===wt.NEEDS_ANALYSIS?40:C===wt.PROPOSAL?60:C===wt.NEGOTIATION?80:C===wt.CLOSED_WON?100:C===wt.CLOSED_LOST?0:10})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:wt.PROSPECTING,children:"Prospecting"}),n.jsx(K,{value:wt.QUALIFICATION,children:"Qualification"}),n.jsx(K,{value:wt.NEEDS_ANALYSIS,children:"Needs Analysis"}),n.jsx(K,{value:wt.PROPOSAL,children:"Proposal"}),n.jsx(K,{value:wt.NEGOTIATION,children:"Negotiation"}),n.jsx(K,{value:wt.CLOSED_WON,children:"Closed Won"}),n.jsx(K,{value:wt.CLOSED_LOST,children:"Closed Lost"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"priority",children:"Priority"}),n.jsxs(We,{value:f.priority,onValueChange:C=>u(S=>({...S,priority:C})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:il.LOW,children:"Low"}),n.jsx(K,{value:il.MEDIUM,children:"Medium"}),n.jsx(K,{value:il.HIGH,children:"High"}),n.jsx(K,{value:il.CRITICAL,children:"Critical"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"probability",children:"Probability (%)"}),n.jsx(Pe,{id:"probability",type:"number",min:"0",max:"100",value:f.probability,onChange:C=>u(S=>({...S,probability:parseInt(C.target.value)||0}))})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"expectedCloseDate",children:"Expected Close Date *"}),n.jsx(Pe,{id:"expectedCloseDate",type:"date",value:f.expectedCloseDate?new Date(f.expectedCloseDate).toISOString().split("T")[0]:"",onChange:C=>u(S=>({...S,expectedCloseDate:new Date(C.target.value)}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"assignedTo",children:"Assigned To"}),n.jsxs(We,{value:f.assignedTo,onValueChange:C=>u(S=>({...S,assignedTo:C})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select sales rep"})}),n.jsx(Ve,{children:r.map(C=>n.jsx(K,{value:C.id,children:C.name},C.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"territoryId",children:"Territory"}),n.jsxs(We,{value:f.territoryId,onValueChange:C=>u(S=>({...S,territoryId:C})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select territory"})}),n.jsx(Ve,{children:s.map(C=>n.jsx(K,{value:C.id,children:C.name},C.id))})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(ia,{className:"h-4 w-4 mr-2"}),"Products"]}),n.jsxs(J,{type:"button",onClick:()=>m(!0),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),h&&n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Product"}),n.jsxs(We,{onValueChange:E,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select product"})}),n.jsx(Ve,{children:a.map(C=>n.jsxs(K,{value:C.id,children:[C.name," - ",Ie(C.price)]},C.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Quantity"}),n.jsx(Pe,{type:"number",min:"1",value:p.quantity,onChange:C=>x(S=>({...S,quantity:parseInt(C.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Unit Price"}),n.jsx(Pe,{type:"number",min:"0",step:"0.01",value:p.unitPrice,onChange:C=>x(S=>({...S,unitPrice:parseFloat(C.target.value)||0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Discount"}),n.jsx(Pe,{type:"number",min:"0",step:"0.01",value:p.discount,onChange:C=>x(S=>({...S,discount:parseFloat(C.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:Ie(p.total||0)})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),n.jsx(J,{type:"button",onClick:y,children:"Add Product"})]})]})]})}),n.jsx("div",{className:"space-y-3",children:f.products&&f.products.length>0?f.products.map(C=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:C.productName}),n.jsxs(Fe,{variant:"outline",children:[C.quantity," × ",Ie(C.unitPrice)]})]}),C.discount>0&&n.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Discount: ",Ie(C.discount)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:Ie(C.total)}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(C.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]})]},C.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ia,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No products added yet"}),n.jsx("p",{className:"text-sm",children:"Add products to calculate deal value"})]})}),f.products&&f.products.length>0&&n.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),n.jsx("span",{className:"text-lg font-bold text-primary",children:Ie(f.value||0)})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),n.jsx(ir,{value:f.notes,onChange:C=>u(S=>({...S,notes:C.target.value})),placeholder:"Add any additional notes about this deal...",rows:3})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Approval Settings"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"requiresApproval",checked:f.requiresApproval,onCheckedChange:C=>u(S=>({...S,requiresApproval:!!C}))}),n.jsx(ae,{htmlFor:"requiresApproval",children:"This deal requires approval"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Deals over $100,000 automatically require approval"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:o,disabled:c,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Deal"]})})]})]})})]})]})}function Zk(){const{deals:e,territories:t,approvalWorkflows:r,winLossReports:s,stageHistory:a,createDeal:i,updateDealStage:o,assignTerritory:l,createApprovalWorkflow:c,createWinLossReport:d,getDealMetrics:f}=$ie(),{leads:u,salesReps:h}=Mo(),{vehicles:m}=Ud(),[v,g]=w.useState(""),[p,x]=w.useState("all"),[b,y]=w.useState("all"),[j,E]=w.useState(null),[A,C]=w.useState(!1),[S,T]=w.useState("pipeline"),[O,_]=w.useState(!1),{toast:N}=_t(),D=G=>{switch(G){case Rr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Rr.WON:return"bg-green-50 text-green-700 border-green-200";case Rr.LOST:return"bg-red-50 text-red-700 border-red-200";case Rr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},I=e.filter(G=>{const Z=G.name.toLowerCase().includes(v.toLowerCase())||G.customerName.toLowerCase().includes(v.toLowerCase()),ee=p==="all"||G.stage===p,he=b==="all"||G.assignedTo===b;return Z&&ee&&he}),R=async(G,Z)=>{try{await o(G,Z);const ee=e.find(he=>he.id===G);ee&&N({title:"Deal Stage Updated",description:`${ee.name} moved to ${Z.replace("_"," ").toLowerCase()}`})}catch{N({title:"Error",description:"Failed to update deal stage",variant:"destructive"})}},M=G=>{E(G),_(!0)},$=()=>{E(null),C(!0)},B=G=>{E(G),C(!0)},U=async G=>{j?await o(j.id,G.stage||j.stage):await i(G),C(!1),E(null)},q=async(G,Z)=>{await c(G,Z)},W=async(G,Z,ee)=>{await d(G,Z,ee)},L=f(),V=m.map(G=>({id:G.id,name:`${G.year} ${G.make} ${G.model}`,price:G.price,category:"vehicle"})).concat([{id:"prod-001",name:"Extended Warranty Package",price:3500,category:"warranty"},{id:"prod-002",name:"Premium Interior Upgrade",price:2200,category:"upgrade"},{id:"prod-003",name:"Solar Panel Package",price:3500,category:"accessory"}]);return n.jsxs("div",{className:"space-y-8",children:[O&&j&&n.jsx(Nfe,{deal:j,onClose:()=>_(!1),onEdit:B}),A&&n.jsx(Afe,{deal:j||void 0,customers:u,salesReps:h,territories:t,products:V,onSave:U,onCancel:()=>{C(!1),E(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Sales Deal Management"}),n.jsx("p",{className:"ri-page-description",children:"Track deals through the sales pipeline with approvals and territory management"})]}),n.jsxs(J,{className:"shadow-sm",onClick:$,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Deal"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),n.jsx($t,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Ie(L.totalValue)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),L.totalDeals," active deals"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Win Rate"}),n.jsx(Ga,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[L.winRate.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),L.wonDeals," won deals"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Avg Deal Size"}),n.jsx($t,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Ie(L.averageDealSize)}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),L.averageSalesCycle.toFixed(0)," day cycle"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Territories"}),n.jsx(fc,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Yn,{className:"h-3 w-3 mr-1"}),"Active territories"]})]})]})]}),n.jsxs(Ar,{value:S,onValueChange:T,className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-5",children:[n.jsx(Ze,{value:"pipeline",children:"Pipeline"}),n.jsx(Ze,{value:"deals",children:"Deals"}),n.jsx(Ze,{value:"analytics",children:"Analytics"}),n.jsx(Ze,{value:"territories",children:"Territories"}),n.jsx(Ze,{value:"approvals",children:"Approvals"})]}),n.jsx(tt,{value:"pipeline",className:"space-y-6",children:n.jsx(gfe,{deals:e,onDealStageChange:R,onDealClick:M})}),n.jsxs(tt,{value:"deals",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search deals...",value:v,onChange:G=>g(G.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(We,{value:p,onValueChange:x,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Stage"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Stages"}),n.jsx(K,{value:wt.PROSPECTING,children:"Prospecting"}),n.jsx(K,{value:wt.QUALIFICATION,children:"Qualification"}),n.jsx(K,{value:wt.NEEDS_ANALYSIS,children:"Needs Analysis"}),n.jsx(K,{value:wt.PROPOSAL,children:"Proposal"}),n.jsx(K,{value:wt.NEGOTIATION,children:"Negotiation"}),n.jsx(K,{value:wt.CLOSED_WON,children:"Closed Won"}),n.jsx(K,{value:wt.CLOSED_LOST,children:"Closed Lost"})]})]}),n.jsxs(We,{value:b,onValueChange:y,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Sales Rep"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Reps"}),h.map(G=>n.jsx(K,{value:G.id,children:G.name},G.id))]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Deals (",I.length,")"]}),n.jsx(Be,{children:"Manage your sales pipeline and deal progression"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[I.map(G=>{var Z;return n.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>B(G),children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:G.name}),n.jsx(Fe,{className:Ge("ri-badge-status",D(G.status)),children:G.status.toUpperCase()}),n.jsx(Fe,{variant:"outline",children:G.stage.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Yn,{className:"h-3 w-3 mr-2 text-blue-500"}),G.customerName]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx($t,{className:"h-3 w-3 mr-2 text-green-500"}),Ie(G.value)]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Ga,{className:"h-3 w-3 mr-2 text-purple-500"}),G.probability,"% probability"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(fc,{className:"h-3 w-3 mr-2 text-orange-500"}),((Z=t.find(ee=>ee.id===G.territoryId))==null?void 0:Z.name)||"No Territory"]})]}),G.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:G.notes})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:ee=>{ee.stopPropagation(),M(G)},children:"View"}),G.requiresApproval&&n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:ee=>{ee.stopPropagation(),q(G.id,"deal_value")},children:"Request Approval"})]})]},G.id)}),I.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No deals found"}),n.jsx("p",{className:"text-sm",children:"Create your first deal to get started"})]})]})})]})]}),n.jsx(tt,{value:"analytics",className:"space-y-6",children:n.jsxs(Ar,{defaultValue:"metrics",className:"space-y-6",children:[n.jsxs(jr,{children:[n.jsx(Ze,{value:"metrics",children:"Deal Metrics"}),n.jsx(Ze,{value:"win-loss",children:"Win/Loss Analysis"})]}),n.jsx(tt,{value:"metrics",children:n.jsx(xfe,{metrics:L})}),n.jsx(tt,{value:"win-loss",children:n.jsx(wfe,{deals:e,winLossReports:s,onCreateReport:W})})]})}),n.jsx(tt,{value:"territories",className:"space-y-6",children:n.jsx(Sfe,{territories:t,salesReps:h,deals:e,onCreateTerritory:()=>{},onUpdateTerritory:()=>{},onDeleteTerritory:()=>{}})}),n.jsx(tt,{value:"approvals",className:"space-y-6",children:n.jsx(Cfe,{deals:e,approvalWorkflows:r,onApprove:()=>{},onReject:()=>{},onEscalate:()=>{}})})]})]})}function Efe(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(Zk,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(Zk,{})})]})}const Pfe=[{id:"1",type:Pu.PURCHASE,customerId:"cust-1",vehicleId:"veh-1",quoteId:"quote-1",status:yo.SIGNED,signedDate:new Date("2024-01-18"),effectiveDate:new Date("2024-01-18"),expirationDate:new Date("2025-01-18"),terms:"Standard purchase agreement with 90-day warranty",documents:[{id:"1",name:"Purchase Agreement.pdf",type:"application/pdf",url:"/documents/purchase-agreement-1.pdf",size:245760,uploadedAt:new Date("2024-01-18")}],customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",type:Pu.SERVICE,customerId:"cust-2",status:yo.ACTIVE,effectiveDate:new Date("2024-01-10"),expirationDate:new Date("2024-07-10"),terms:"Extended service contract for 6 months",documents:[{id:"2",name:"Service Contract.pdf",type:"application/pdf",url:"/documents/service-contract-2.pdf",size:189440,uploadedAt:new Date("2024-01-10")}],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-10")}];function eD(){const[e]=w.useState(Pfe),[t,r]=w.useState(""),s=o=>{switch(o){case yo.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case yo.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case yo.SIGNED:return"bg-blue-50 text-blue-700 border-blue-200";case yo.ACTIVE:return"bg-green-50 text-green-700 border-green-200";case yo.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";case yo.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=o=>{switch(o){case Pu.PURCHASE:return"bg-blue-50 text-blue-700 border-blue-200";case Pu.LEASE:return"bg-purple-50 text-purple-700 border-purple-200";case Pu.SERVICE:return"bg-green-50 text-green-700 border-green-200";case Pu.WARRANTY:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=e.filter(o=>o.id.toLowerCase().includes(t.toLowerCase())||o.customerId.toLowerCase().includes(t.toLowerCase())||o.type.toLowerCase().includes(t.toLowerCase()));return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Agreement Vault"}),n.jsx("p",{className:"ri-page-description",children:"Manage contracts, agreements, and legal documents"})]}),n.jsxs(J,{className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Agreement"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Agreements"}),n.jsx(Zy,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"All contracts"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Active"}),n.jsx(Zy,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(o=>o.status===yo.ACTIVE).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(Zy,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(o=>o.status===yo.PENDING).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Awaiting signature"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Expiring Soon"}),n.jsx(Ur,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:"0"}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Next 30 days"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search agreements...",value:t,onChange:o=>r(o.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Agreements"}),n.jsx(Be,{children:"Manage contracts, purchase agreements, and legal documents"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:i.map(o=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Agreement #",o.id]}),n.jsx(Fe,{className:Ge("ri-badge-status",a(o.type)),children:o.type.toUpperCase()}),n.jsx(Fe,{className:Ge("ri-badge-status",s(o.status)),children:o.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",o.customerId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Effective:"})," ",ft(o.effectiveDate)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Documents:"})," ",o.documents.length]}),o.expirationDate&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Expires:"})," ",ft(o.expirationDate)]})]}),n.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:o.terms})})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(uc,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(Ka,{className:"h-3 w-3 mr-1"}),"Download"]})]})]},o.id))})})]})]})}function Tfe(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(eD,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(eD,{})})]})}function Q9(){const[e,t]=w.useState([]),[r,s]=w.useState(!1);w.useEffect(()=>{a()},[]);const a=()=>{const p=En("renter-insight-service-tickets",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",title:"Annual Maintenance Service",description:"Complete annual maintenance including oil change, filter replacement, and system checks",priority:hn.MEDIUM,status:gr.IN_PROGRESS,assignedTo:"Tech-001",scheduledDate:new Date("2024-01-20"),parts:[{id:"1",partNumber:"OIL-001",description:"Engine Oil Filter",quantity:1,unitCost:25.99,total:25.99}],labor:[{id:"1",description:"Annual Maintenance",hours:3,rate:85,total:255}],notes:"Customer requested additional inspection of brake system",customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"2024-01-22",customerAuthorization:!0,technicianNotes:"Check brake pads and rotors during service",customerPortalAccess:!0},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",title:"AC System Repair",description:"Air conditioning not cooling properly, needs diagnostic and repair",priority:hn.HIGH,status:gr.WAITING_PARTS,assignedTo:"Tech-002",scheduledDate:new Date("2024-01-22"),parts:[{id:"2",partNumber:"AC-COMP-001",description:"AC Compressor",quantity:1,unitCost:450,total:450}],labor:[{id:"2",description:"AC System Diagnostic",hours:2,rate:85,total:170}],notes:"Waiting for compressor part to arrive",customFields:{warrantyStatus:"partial",estimatedCompletionDate:"2024-01-25",customerAuthorization:!0,technicianNotes:"Compressor needs replacement, on order from supplier",customerPortalAccess:!0},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-16")}]);t(p)},i=p=>{rn("renter-insight-service-tickets",p)};return{tickets:e,loading:r,getTicketsByCustomerId:p=>e.filter(x=>x.customerId===p),getTicketsByVehicleId:p=>e.filter(x=>x.vehicleId===p),getTicketById:p=>e.find(x=>x.id===p),createTicket:async p=>{s(!0);try{const x={id:Math.random().toString(36).substr(2,9),customerId:p.customerId||"",vehicleId:p.vehicleId,title:p.title||"",description:p.description||"",priority:p.priority||hn.MEDIUM,status:p.status||gr.OPEN,assignedTo:p.assignedTo,scheduledDate:p.scheduledDate,parts:p.parts||[],labor:p.labor||[],notes:p.notes||"",customFields:p.customFields||{},createdAt:new Date,updatedAt:new Date},b=[...e,x];return t(b),i(b),x}finally{s(!1)}},updateTicket:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,...x,updatedAt:new Date}:y);t(b),i(b)},deleteTicket:async p=>{const x=e.filter(b=>b.id!==p);t(x),i(x)},updateTicketStatus:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,status:x,completedDate:x===gr.COMPLETED?new Date:y.completedDate,updatedAt:new Date}:y);t(b),i(b)},assignTechnician:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,assignedTo:x,updatedAt:new Date}:y);t(b),i(b)},addPart:async(p,x)=>{if(!e.find(E=>E.id===p))return null;const y={id:Math.random().toString(36).substr(2,9),partNumber:x.partNumber||"",description:x.description||"",quantity:x.quantity||1,unitCost:x.unitCost||0,total:x.total||0},j=e.map(E=>E.id===p?{...E,parts:[...E.parts,y],updatedAt:new Date}:E);return t(j),i(j),y},addLabor:async(p,x)=>{if(!e.find(E=>E.id===p))return null;const y={id:Math.random().toString(36).substr(2,9),description:x.description||"",hours:x.hours||1,rate:x.rate||85,total:x.total||85},j=e.map(E=>E.id===p?{...E,labor:[...E.labor,y],updatedAt:new Date}:E);return t(j),i(j),y}}}function _fe({ticket:e,onSave:t,onCancel:r}){var I,R,M,$,B,U,q;const{toast:s}=_t(),{vehicles:a}=Ud(),{leads:i}=Mo(),[o,l]=w.useState(!1),[c,d]=w.useState(!1),[f,u]=w.useState({customerId:"",vehicleId:"",title:"",description:"",priority:hn.MEDIUM,status:gr.OPEN,assignedTo:"",scheduledDate:void 0,notes:"",parts:[],labor:[],customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"",customerAuthorization:!1,technicianNotes:"",customerPortalAccess:!0}}),[h,m]=w.useState(!1),[v,g]=w.useState(!1),[p,x]=w.useState({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),[b,y]=w.useState({description:"",hours:1,rate:85,total:85});w.useEffect(()=>{var W,L,V,G,Z;e&&u({...e,customFields:{...e.customFields,warrantyStatus:((W=e.customFields)==null?void 0:W.warrantyStatus)||"not_covered",estimatedCompletionDate:((L=e.customFields)==null?void 0:L.estimatedCompletionDate)||"",customerAuthorization:((V=e.customFields)==null?void 0:V.customerAuthorization)||!1,technicianNotes:((G=e.customFields)==null?void 0:G.technicianNotes)||"",customerPortalAccess:((Z=e.customFields)==null?void 0:Z.customerPortalAccess)!==!1}})},[e]),w.useEffect(()=>{const W=p.quantity||1,L=p.unitCost||0;x(V=>({...V,total:W*L}))},[p.quantity,p.unitCost]),w.useEffect(()=>{const W=b.hours||1,L=b.rate||85;y(V=>({...V,total:W*L}))},[b.hours,b.rate]);const j=async W=>{if(W.preventDefault(),!f.customerId||!f.title||!f.description){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}l(!0);try{await t(f),s({title:"Success",description:`Service ticket ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} service ticket`,variant:"destructive"})}finally{l(!1)}},E=W=>{W==="add-new"?d(!0):u(L=>({...L,customerId:W}))},A=W=>{u(L=>({...L,customerId:W.id})),d(!1),s({title:"Customer Added",description:`${W.firstName} ${W.lastName} has been added as a customer.`})},C=()=>{if(!p.partNumber||!p.description){s({title:"Validation Error",description:"Part number and description are required",variant:"destructive"});return}const W={id:Math.random().toString(36).substr(2,9),partNumber:p.partNumber||"",description:p.description||"",quantity:p.quantity||1,unitCost:p.unitCost||0,total:p.total||0};u(L=>({...L,parts:[...L.parts||[],W]})),x({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),m(!1)},S=W=>{u(L=>{var V;return{...L,parts:((V=L.parts)==null?void 0:V.filter(G=>G.id!==W))||[]}})},T=()=>{if(!b.description){s({title:"Validation Error",description:"Labor description is required",variant:"destructive"});return}const W={id:Math.random().toString(36).substr(2,9),description:b.description||"",hours:b.hours||1,rate:b.rate||85,total:b.total||85};u(L=>({...L,labor:[...L.labor||[],W]})),y({description:"",hours:1,rate:85,total:85}),g(!1)},O=W=>{u(L=>{var V;return{...L,labor:((V=L.labor)==null?void 0:V.filter(G=>G.id!==W))||[]}})},N=(()=>{var V,G;const W=((V=f.parts)==null?void 0:V.reduce((Z,ee)=>Z+ee.total,0))||0,L=((G=f.labor)==null?void 0:G.reduce((Z,ee)=>Z+ee.total,0))||0;return{partsTotal:W,laborTotal:L,grandTotal:W+L}})(),D=[{id:"Tech-001",name:"John Smith"},{id:"Tech-002",name:"Sarah Johnson"},{id:"Tech-003",name:"Mike Davis"}];return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&n.jsx(gf,{onClose:()=>d(!1),onSuccess:A}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Service Ticket":"Create Service Ticket"}),n.jsx(Be,{children:e?"Update service ticket details":"Create a new service ticket"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Ticket Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(We,{value:f.customerId,onValueChange:E,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsxs(Ve,{children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>E("add-new"),children:[n.jsx(Et,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),i.map(W=>n.jsxs(K,{value:W.id,children:[W.firstName," ",W.lastName]},W.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle"}),n.jsxs(We,{value:f.vehicleId,onValueChange:W=>u(L=>({...L,vehicleId:W})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select vehicle (optional)"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"No Vehicle"}),a.map(W=>n.jsxs(K,{value:W.id,children:[W.year," ",W.make," ",W.model]},W.id))]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"title",children:"Service Title *"}),n.jsx(Pe,{id:"title",value:f.title,onChange:W=>u(L=>({...L,title:W.target.value})),placeholder:"e.g., Annual Maintenance Service"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"description",children:"Description *"}),n.jsx(ir,{id:"description",value:f.description,onChange:W=>u(L=>({...L,description:W.target.value})),placeholder:"Describe the service needed",rows:3})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"priority",children:"Priority"}),n.jsxs(We,{value:f.priority,onValueChange:W=>u(L=>({...L,priority:W})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:hn.LOW,children:"Low"}),n.jsx(K,{value:hn.MEDIUM,children:"Medium"}),n.jsx(K,{value:hn.HIGH,children:"High"}),n.jsx(K,{value:hn.URGENT,children:"Urgent"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(We,{value:f.status,onValueChange:W=>u(L=>({...L,status:W})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:gr.OPEN,children:"Open"}),n.jsx(K,{value:gr.IN_PROGRESS,children:"In Progress"}),n.jsx(K,{value:gr.WAITING_PARTS,children:"Waiting for Parts"}),n.jsx(K,{value:gr.COMPLETED,children:"Completed"}),n.jsx(K,{value:gr.CANCELLED,children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"assignedTo",children:"Assigned Technician"}),n.jsxs(We,{value:f.assignedTo,onValueChange:W=>u(L=>({...L,assignedTo:W})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select technician"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"Unassigned"}),D.map(W=>n.jsx(K,{value:W.id,children:W.name},W.id))]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"scheduledDate",children:"Scheduled Date"}),n.jsx(Pe,{id:"scheduledDate",type:"date",value:f.scheduledDate?new Date(f.scheduledDate).toISOString().split("T")[0]:"",onChange:W=>u(L=>({...L,scheduledDate:W.target.value?new Date(W.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"estimatedCompletionDate",children:"Estimated Completion"}),n.jsx(Pe,{id:"estimatedCompletionDate",type:"date",value:((I=f.customFields)==null?void 0:I.estimatedCompletionDate)||"",onChange:W=>u(L=>({...L,customFields:{...L.customFields,estimatedCompletionDate:W.target.value}}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Warranty Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"warrantyStatus",children:"Warranty Status"}),n.jsxs(We,{value:((R=f.customFields)==null?void 0:R.warrantyStatus)||"not_covered",onValueChange:W=>u(L=>({...L,customFields:{...L.customFields,warrantyStatus:W}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"covered",children:"Covered by Warranty"}),n.jsx(K,{value:"partial",children:"Partially Covered"}),n.jsx(K,{value:"not_covered",children:"Not Covered"}),n.jsx(K,{value:"extended",children:"Extended Warranty"}),n.jsx(K,{value:"expired",children:"Warranty Expired"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[n.jsx(Xt,{id:"customerAuthorization",checked:((M=f.customFields)==null?void 0:M.customerAuthorization)||!1,onCheckedChange:W=>u(L=>({...L,customFields:{...L.customFields,customerAuthorization:!!W}}))}),n.jsx(ae,{htmlFor:"customerAuthorization",children:"Customer has authorized work"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Parts"}),n.jsxs(J,{type:"button",onClick:()=>m(!0),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Part"]})]}),h&&n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"partNumber",children:"Part Number *"}),n.jsx(Pe,{id:"partNumber",value:p.partNumber,onChange:W=>x(L=>({...L,partNumber:W.target.value})),placeholder:"e.g., AC-COMP-001"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"partDescription",children:"Description *"}),n.jsx(Pe,{id:"partDescription",value:p.description,onChange:W=>x(L=>({...L,description:W.target.value})),placeholder:"e.g., AC Compressor"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"partQuantity",children:"Quantity"}),n.jsx(Pe,{id:"partQuantity",type:"number",min:"1",value:p.quantity,onChange:W=>x(L=>({...L,quantity:parseInt(W.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"partUnitCost",children:"Unit Cost"}),n.jsx(Pe,{id:"partUnitCost",type:"number",step:"0.01",min:"0",value:p.unitCost,onChange:W=>x(L=>({...L,unitCost:parseFloat(W.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:Ie(p.total||0)})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),n.jsx(J,{type:"button",onClick:C,children:"Add Part"})]})]})]})}),n.jsx("div",{className:"space-y-3",children:f.parts&&f.parts.length>0?f.parts.map(W=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:W.description}),n.jsx(Fe,{variant:"outline",children:W.partNumber})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",W.quantity," × ",Ie(W.unitCost)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:Ie(W.total)}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(W.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]})]},W.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Au,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No parts added yet"}),n.jsx("p",{className:"text-sm",children:"Add parts needed for this service"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Labor"}),n.jsxs(J,{type:"button",onClick:()=>g(!0),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Labor"]})]}),v&&n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"md:col-span-3",children:[n.jsx(ae,{htmlFor:"laborDescription",children:"Description *"}),n.jsx(Pe,{id:"laborDescription",value:b.description,onChange:W=>y(L=>({...L,description:W.target.value})),placeholder:"e.g., Diagnostic and Repair"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"laborHours",children:"Hours"}),n.jsx(Pe,{id:"laborHours",type:"number",step:"0.5",min:"0.5",value:b.hours,onChange:W=>y(L=>({...L,hours:parseFloat(W.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"laborRate",children:"Hourly Rate"}),n.jsx(Pe,{id:"laborRate",type:"number",step:"0.01",min:"0",value:b.rate,onChange:W=>y(L=>({...L,rate:parseFloat(W.target.value)||85}))})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Total"}),n.jsx("div",{className:"h-10 px-3 py-2 rounded-md border border-input bg-muted/50 flex items-center",children:Ie(b.total||0)})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),n.jsx(J,{type:"button",onClick:T,children:"Add Labor"})]})]})}),n.jsx("div",{className:"space-y-3",children:f.labor&&f.labor.length>0?f.labor.map(W=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:W.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[W.hours," hours × ",Ie(W.rate),"/hr"]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:Ie(W.total)}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>O(W.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]})]},W.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ur,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No labor added yet"}),n.jsx("p",{className:"text-sm",children:"Add labor for this service"})]})})]}),((($=f.parts)==null?void 0:$.length)>0||((B=f.labor)==null?void 0:B.length)>0)&&n.jsx(ue,{className:"bg-muted/30",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Parts Total:"}),n.jsx("span",{children:Ie(N.partsTotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Labor Total:"}),n.jsx("span",{children:Ie(N.laborTotal)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Grand Total:"}),n.jsx("span",{children:Ie(N.grandTotal)})]})]})})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"technicianNotes",children:"Technician Notes"}),n.jsx(ir,{id:"technicianNotes",value:((U=f.customFields)==null?void 0:U.technicianNotes)||"",onChange:W=>u(L=>({...L,customFields:{...L.customFields,technicianNotes:W.target.value}})),placeholder:"Notes for technicians only (not visible to customer)",rows:3})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Customer Notes"}),n.jsx(ir,{id:"notes",value:f.notes,onChange:W=>u(L=>({...L,notes:W.target.value})),placeholder:"Notes visible to the customer",rows:3})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"customerPortalAccess",checked:((q=f.customFields)==null?void 0:q.customerPortalAccess)!==!1,onCheckedChange:W=>u(L=>({...L,customFields:{...L.customFields,customerPortalAccess:!!W}}))}),n.jsx(ae,{htmlFor:"customerPortalAccess",children:"Allow customer to view this ticket in portal"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Ticket"]})})]})]})})]})]})}const Ife="modulepreload",kfe=function(e){return"/"+e},tD={},Od=function(t,r,s){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=kfe(i),i in tD)return;tD[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let f=a.length-1;f>=0;f--){const u=a[f];if(u.href===i&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Ife,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((f,u)=>{d.addEventListener("load",f),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var sa=Uint8Array,mi=Uint16Array,DP=Int32Array,cw=new sa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dw=new sa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),RC=new sa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),J9=function(e,t){for(var r=new mi(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var a=new DP(r[30]),s=1;s<30;++s)for(var i=r[s];i<r[s+1];++i)a[i]=i-r[s]<<5|s;return{b:r,r:a}},Z9=J9(cw,2),ez=Z9.b,$C=Z9.r;ez[28]=258,$C[258]=28;var tz=J9(dw,0),Dfe=tz.b,rD=tz.r,FC=new mi(32768);for(var mn=0;mn<32768;++mn){var zc=(mn&43690)>>1|(mn&21845)<<1;zc=(zc&52428)>>2|(zc&13107)<<2,zc=(zc&61680)>>4|(zc&3855)<<4,FC[mn]=((zc&65280)>>8|(zc&255)<<8)>>1}var pl=function(e,t,r){for(var s=e.length,a=0,i=new mi(t);a<s;++a)e[a]&&++i[e[a]-1];var o=new mi(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new mi(1<<t);var c=15-t;for(a=0;a<s;++a)if(e[a])for(var d=a<<4|e[a],f=t-e[a],u=o[e[a]-1]++<<f,h=u|(1<<f)-1;u<=h;++u)l[FC[u]>>c]=d}else for(l=new mi(s),a=0;a<s;++a)e[a]&&(l[a]=FC[o[e[a]-1]++]>>15-e[a]);return l},Ld=new sa(288);for(var mn=0;mn<144;++mn)Ld[mn]=8;for(var mn=144;mn<256;++mn)Ld[mn]=9;for(var mn=256;mn<280;++mn)Ld[mn]=7;for(var mn=280;mn<288;++mn)Ld[mn]=8;var Tg=new sa(32);for(var mn=0;mn<32;++mn)Tg[mn]=5;var Ofe=pl(Ld,9,0),Lfe=pl(Ld,9,1),Rfe=pl(Tg,5,0),$fe=pl(Tg,5,1),iS=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ho=function(e,t,r){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&r},oS=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},OP=function(e){return(e+7)/8|0},rz=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new sa(e.subarray(t,r))},Ffe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bo=function(e,t,r){var s=new Error(t||Ffe[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,bo),!r)throw s;return s},Mfe=function(e,t,r,s){var a=e.length,i=s?s.length:0;if(!a||t.f&&!t.l)return r||new sa(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new sa(a*3));var d=function(ve){var pe=r.length;if(ve>pe){var De=new sa(Math.max(pe*2,ve));De.set(r),r=De}},f=t.f||0,u=t.p||0,h=t.b||0,m=t.l,v=t.d,g=t.m,p=t.n,x=a*8;do{if(!m){f=ho(e,u,1);var b=ho(e,u+1,3);if(u+=3,b)if(b==1)m=Lfe,v=$fe,g=9,p=5;else if(b==2){var A=ho(e,u,31)+257,C=ho(e,u+10,15)+4,S=A+ho(e,u+5,31)+1;u+=14;for(var T=new sa(S),O=new sa(19),_=0;_<C;++_)O[RC[_]]=ho(e,u+_*3,7);u+=C*3;for(var N=iS(O),D=(1<<N)-1,I=pl(O,N,1),_=0;_<S;){var R=I[ho(e,u,D)];u+=R&15;var y=R>>4;if(y<16)T[_++]=y;else{var M=0,$=0;for(y==16?($=3+ho(e,u,3),u+=2,M=T[_-1]):y==17?($=3+ho(e,u,7),u+=3):y==18&&($=11+ho(e,u,127),u+=7);$--;)T[_++]=M}}var B=T.subarray(0,A),U=T.subarray(A);g=iS(B),p=iS(U),m=pl(B,g,1),v=pl(U,p,1)}else bo(1);else{var y=OP(u)+4,j=e[y-4]|e[y-3]<<8,E=y+j;if(E>a){c&&bo(0);break}l&&d(h+j),r.set(e.subarray(y,E),h),t.b=h+=j,t.p=u=E*8,t.f=f;continue}if(u>x){c&&bo(0);break}}l&&d(h+131072);for(var q=(1<<g)-1,W=(1<<p)-1,L=u;;L=u){var M=m[oS(e,u)&q],V=M>>4;if(u+=M&15,u>x){c&&bo(0);break}if(M||bo(2),V<256)r[h++]=V;else if(V==256){L=u,m=null;break}else{var G=V-254;if(V>264){var _=V-257,Z=cw[_];G=ho(e,u,(1<<Z)-1)+ez[_],u+=Z}var ee=v[oS(e,u)&W],he=ee>>4;ee||bo(3),u+=ee&15;var U=Dfe[he];if(he>3){var Z=dw[he];U+=oS(e,u)&(1<<Z)-1,u+=Z}if(u>x){c&&bo(0);break}l&&d(h+131072);var me=h+G;if(h<U){var oe=i-U,we=Math.min(U,me);for(oe+h<0&&bo(3);h<we;++h)r[h]=s[oe+h]}for(;h<me;++h)r[h]=r[h-U]}}t.l=m,t.p=L,t.b=h,t.f=f,m&&(f=1,t.m=g,t.d=v,t.n=p)}while(!f);return h!=r.length&&o?rz(r,0,h):r.subarray(0,h)},Fl=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8},iv=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},lS=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var a=r.length,i=r.slice();if(!a)return{t:sz,l:0};if(a==1){var o=new sa(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(E,A){return E.f-A.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,f=1,u=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};f!=a-1;)l=r[r[d].f<r[u].f?d++:u++],c=r[d!=f&&r[d].f<r[u].f?d++:u++],r[f++]={s:-1,f:l.f+c.f,l,r:c};for(var h=i[0].s,s=1;s<a;++s)i[s].s>h&&(h=i[s].s);var m=new mi(h+1),v=MC(r[f-1],m,0);if(v>t){var s=0,g=0,p=v-t,x=1<<p;for(i.sort(function(A,C){return m[C.s]-m[A.s]||A.f-C.f});s<a;++s){var b=i[s].s;if(m[b]>t)g+=x-(1<<v-m[b]),m[b]=t;else break}for(g>>=p;g>0;){var y=i[s].s;m[y]<t?g-=1<<t-m[y]++-1:++s}for(;s>=0&&g;--s){var j=i[s].s;m[j]==t&&(--m[j],++g)}v=t}return{t:new sa(m),l:v}},MC=function(e,t,r){return e.s==-1?Math.max(MC(e.l,t,r+1),MC(e.r,t,r+1)):t[e.s]=r},nD=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new mi(++t),s=0,a=e[0],i=1,o=function(c){r[s++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,s),n:t}},ov=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},nz=function(e,t,r){var s=r.length,a=OP(t+2);e[a]=s&255,e[a+1]=s>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<s;++i)e[a+i+4]=r[i];return(a+4+s)*8},sD=function(e,t,r,s,a,i,o,l,c,d,f){Fl(t,f++,r),++a[256];for(var u=lS(a,15),h=u.t,m=u.l,v=lS(i,15),g=v.t,p=v.l,x=nD(h),b=x.c,y=x.n,j=nD(g),E=j.c,A=j.n,C=new mi(19),S=0;S<b.length;++S)++C[b[S]&31];for(var S=0;S<E.length;++S)++C[E[S]&31];for(var T=lS(C,7),O=T.t,_=T.l,N=19;N>4&&!O[RC[N-1]];--N);var D=d+5<<3,I=ov(a,Ld)+ov(i,Tg)+o,R=ov(a,h)+ov(i,g)+o+14+3*N+ov(C,O)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&D<=I&&D<=R)return nz(t,f,e.subarray(c,c+d));var M,$,B,U;if(Fl(t,f,1+(R<I)),f+=2,R<I){M=pl(h,m,0),$=h,B=pl(g,p,0),U=g;var q=pl(O,_,0);Fl(t,f,y-257),Fl(t,f+5,A-1),Fl(t,f+10,N-4),f+=14;for(var S=0;S<N;++S)Fl(t,f+3*S,O[RC[S]]);f+=3*N;for(var W=[b,E],L=0;L<2;++L)for(var V=W[L],S=0;S<V.length;++S){var G=V[S]&31;Fl(t,f,q[G]),f+=O[G],G>15&&(Fl(t,f,V[S]>>5&127),f+=V[S]>>12)}}else M=Ofe,$=Ld,B=Rfe,U=Tg;for(var S=0;S<l;++S){var Z=s[S];if(Z>255){var G=Z>>18&31;iv(t,f,M[G+257]),f+=$[G+257],G>7&&(Fl(t,f,Z>>23&31),f+=cw[G]);var ee=Z&31;iv(t,f,B[ee]),f+=U[ee],ee>3&&(iv(t,f,Z>>5&8191),f+=dw[ee])}else iv(t,f,M[Z]),f+=$[Z]}return iv(t,f,M[256]),f+$[256]},Bfe=new DP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),sz=new sa(0),zfe=function(e,t,r,s,a,i){var o=i.z||e.length,l=new sa(s+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(s,l.length-a),d=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var u=Bfe[t-1],h=u>>13,m=u&8191,v=(1<<r)-1,g=i.p||new mi(32768),p=i.h||new mi(v+1),x=Math.ceil(r/3),b=2*x,y=function(xe){return(e[xe]^e[xe+1]<<x^e[xe+2]<<b)&v},j=new DP(25e3),E=new mi(288),A=new mi(32),C=0,S=0,T=i.i||0,O=0,_=i.w||0,N=0;T+2<o;++T){var D=y(T),I=T&32767,R=p[D];if(g[I]=R,p[D]=I,_<=T){var M=o-T;if((C>7e3||O>24576)&&(M>423||!d)){f=sD(e,c,0,j,E,A,S,O,N,T-N,f),O=C=S=0,N=T;for(var $=0;$<286;++$)E[$]=0;for(var $=0;$<30;++$)A[$]=0}var B=2,U=0,q=m,W=I-R&32767;if(M>2&&D==y(T-W))for(var L=Math.min(h,M)-1,V=Math.min(32767,T),G=Math.min(258,M);W<=V&&--q&&I!=R;){if(e[T+B]==e[T+B-W]){for(var Z=0;Z<G&&e[T+Z]==e[T+Z-W];++Z);if(Z>B){if(B=Z,U=W,Z>L)break;for(var ee=Math.min(W,Z-2),he=0,$=0;$<ee;++$){var me=T-W+$&32767,oe=g[me],we=me-oe&32767;we>he&&(he=we,R=me)}}}I=R,R=g[I],W+=I-R&32767}if(U){j[O++]=268435456|$C[B]<<18|rD[U];var ve=$C[B]&31,pe=rD[U]&31;S+=cw[ve]+dw[pe],++E[257+ve],++A[pe],_=T+B,++C}else j[O++]=e[T],++E[e[T]]}}for(T=Math.max(T,_);T<o;++T)j[O++]=e[T],++E[e[T]];f=sD(e,c,d,j,E,A,S,O,N,T-N,f),d||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=p,i.p=g,i.i=T,i.w=_)}else{for(var T=i.w||0;T<o+d;T+=65535){var De=T+65535;De>=o&&(c[f/8|0]=d,De=o),f=nz(c,f+1,e.subarray(T,De))}i.i=o}return rz(l,0,s+OP(f)+a)},az=function(){var e=1,t=0;return{p:function(r){for(var s=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=s+=r[o];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}e=s,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Ufe=function(e,t,r,s,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new sa(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return zfe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,s,a)},iz=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Vfe=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=az();a.p(t.dictionary),iz(e,2,a.d())}},Wfe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&bo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&bo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function BC(e,t){t||(t={});var r=az();r.p(e);var s=Ufe(e,t,t.dictionary?6:2,4);return Vfe(s,t),iz(s,s.length-4,r.d()),s}function qfe(e,t){return Mfe(e.subarray(Wfe(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Hfe=typeof TextDecoder<"u"&&new TextDecoder,Gfe=0;try{Hfe.decode(sz,{stream:!0}),Gfe=1}catch{}var Wt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function cS(){Wt.console&&typeof Wt.console.log=="function"&&Wt.console.log.apply(Wt.console,arguments)}var Hr={log:cS,warn:function(e){Wt.console&&(typeof Wt.console.warn=="function"?Wt.console.warn.apply(Wt.console,arguments):cS.call(null,arguments))},error:function(e){Wt.console&&(typeof Wt.console.error=="function"?Wt.console.error.apply(Wt.console,arguments):cS(e))}};function dS(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){pu(s.response,t,r)},s.onerror=function(){Hr.error("could not download file")},s.send()}function aD(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function gy(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Fv,zC,pu=Wt.saveAs||((typeof window>"u"?"undefined":Pr(window))!=="object"||window!==Wt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=Wt.URL||Wt.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?aD(a.href)?dS(e,t,r):gy(a,a.target="_blank"):gy(a)):(a.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){gy(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(aD(e))dS(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){gy(s)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Pr(i)!=="object"&&(Hr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return dS(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Wt.HTMLElement)||Wt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Pr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=f:location=f,s=null},l.readAsDataURL(e)}else{var c=Wt.URL||Wt.webkitURL,d=c.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function oz(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],s=0;s<r.length;s++){var a=r[s].re,i=r[s].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function uS(e,t){var r=e[0],s=e[1],a=e[2],i=e[3];r=Ys(r,s,a,i,t[0],7,-680876936),i=Ys(i,r,s,a,t[1],12,-389564586),a=Ys(a,i,r,s,t[2],17,606105819),s=Ys(s,a,i,r,t[3],22,-1044525330),r=Ys(r,s,a,i,t[4],7,-176418897),i=Ys(i,r,s,a,t[5],12,1200080426),a=Ys(a,i,r,s,t[6],17,-1473231341),s=Ys(s,a,i,r,t[7],22,-45705983),r=Ys(r,s,a,i,t[8],7,1770035416),i=Ys(i,r,s,a,t[9],12,-1958414417),a=Ys(a,i,r,s,t[10],17,-42063),s=Ys(s,a,i,r,t[11],22,-1990404162),r=Ys(r,s,a,i,t[12],7,1804603682),i=Ys(i,r,s,a,t[13],12,-40341101),a=Ys(a,i,r,s,t[14],17,-1502002290),r=Xs(r,s=Ys(s,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Xs(i,r,s,a,t[6],9,-1069501632),a=Xs(a,i,r,s,t[11],14,643717713),s=Xs(s,a,i,r,t[0],20,-373897302),r=Xs(r,s,a,i,t[5],5,-701558691),i=Xs(i,r,s,a,t[10],9,38016083),a=Xs(a,i,r,s,t[15],14,-660478335),s=Xs(s,a,i,r,t[4],20,-405537848),r=Xs(r,s,a,i,t[9],5,568446438),i=Xs(i,r,s,a,t[14],9,-1019803690),a=Xs(a,i,r,s,t[3],14,-187363961),s=Xs(s,a,i,r,t[8],20,1163531501),r=Xs(r,s,a,i,t[13],5,-1444681467),i=Xs(i,r,s,a,t[2],9,-51403784),a=Xs(a,i,r,s,t[7],14,1735328473),r=Qs(r,s=Xs(s,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Qs(i,r,s,a,t[8],11,-2022574463),a=Qs(a,i,r,s,t[11],16,1839030562),s=Qs(s,a,i,r,t[14],23,-35309556),r=Qs(r,s,a,i,t[1],4,-1530992060),i=Qs(i,r,s,a,t[4],11,1272893353),a=Qs(a,i,r,s,t[7],16,-155497632),s=Qs(s,a,i,r,t[10],23,-1094730640),r=Qs(r,s,a,i,t[13],4,681279174),i=Qs(i,r,s,a,t[0],11,-358537222),a=Qs(a,i,r,s,t[3],16,-722521979),s=Qs(s,a,i,r,t[6],23,76029189),r=Qs(r,s,a,i,t[9],4,-640364487),i=Qs(i,r,s,a,t[12],11,-421815835),a=Qs(a,i,r,s,t[15],16,530742520),r=Js(r,s=Qs(s,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Js(i,r,s,a,t[7],10,1126891415),a=Js(a,i,r,s,t[14],15,-1416354905),s=Js(s,a,i,r,t[5],21,-57434055),r=Js(r,s,a,i,t[12],6,1700485571),i=Js(i,r,s,a,t[3],10,-1894986606),a=Js(a,i,r,s,t[10],15,-1051523),s=Js(s,a,i,r,t[1],21,-2054922799),r=Js(r,s,a,i,t[8],6,1873313359),i=Js(i,r,s,a,t[15],10,-30611744),a=Js(a,i,r,s,t[6],15,-1560198380),s=Js(s,a,i,r,t[13],21,1309151649),r=Js(r,s,a,i,t[4],6,-145523070),i=Js(i,r,s,a,t[11],10,-1120210379),a=Js(a,i,r,s,t[2],15,718787259),s=Js(s,a,i,r,t[9],21,-343485551),e[0]=ld(r,e[0]),e[1]=ld(s,e[1]),e[2]=ld(a,e[2]),e[3]=ld(i,e[3])}function uw(e,t,r,s,a,i){return t=ld(ld(t,e),ld(s,i)),ld(t<<a|t>>>32-a,r)}function Ys(e,t,r,s,a,i,o){return uw(t&r|~t&s,e,t,a,i,o)}function Xs(e,t,r,s,a,i,o){return uw(t&s|r&~s,e,t,a,i,o)}function Qs(e,t,r,s,a,i,o){return uw(t^r^s,e,t,a,i,o)}function Js(e,t,r,s,a,i,o){return uw(r^(t|~s),e,t,a,i,o)}function lz(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)uS(s,Kfe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(uS(s,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,uS(s,a),s}function Kfe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Fv=Wt.atob.bind(Wt),zC=Wt.btoa.bind(Wt);var iD="0123456789abcdef".split("");function Yfe(e){for(var t="",r=0;r<4;r++)t+=iD[e>>8*r+4&15]+iD[e>>8*r&15];return t}function Xfe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function UC(e){return lz(e).map(Xfe).join("")}var Qfe=function(e){for(var t=0;t<e.length;t++)e[t]=Yfe(e[t]);return e.join("")}(lz("hello"))!="5d41402abc4b2a76b9719d911017c592";function ld(e,t){if(Qfe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function VC(e,t){var r,s,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var f=l[c];d=(d+f+o.charCodeAt(c))%256,l[c]=l[d],l[d]=f}r=e,s=l}else l=s;var u=t.length,h=0,m=0,v="";for(c=0;c<u;c++)m=(m+(f=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=f,o=l[(l[h]+l[m])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var oD={print:4,modify:8,copy:16,"annot-forms":32};function dh(e,t,r,s){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(oD.perm!==void 0)throw new Error("Invalid permission: "+l);a+=oD[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=UC(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=VC(this.encryptionKey,this.padding)}function uh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var a=e.charCodeAt(s);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[s]}return t}function lD(e){if(Pr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,a){if(a=a||!1,typeof r!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[s,!!a],i},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,s)}catch(l){Wt.console&&Hr.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _g(e){if(!(this instanceof _g))return new _g(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function cz(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ed(e,t,r,s,a){if(!(this instanceof ed))return new ed(e,t,r,s,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,cz.call(this,s,a)}function _u(e,t,r,s,a){if(!(this instanceof _u))return new _u(e,t,r,s,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,cz.call(this,s,a)}function Ot(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",f=null;Pr(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,a=e.format||a,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),s=s||"mm",r=(""+(r||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=lD;var v="1.3",g=m.__private__.getPdfVersion=function(){return v};m.__private__.setPdfVersion=function(F){v=F};var p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return p};var x=m.__private__.getPageFormat=function(F){return p[F]};a=a||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},y=b.COMPAT;function j(){this.saveGraphicsState(),re(new Rt(ct,0,0,-ct,0,Ac()*ct).toString()+" cm"),this.setFontSize(this.getFontSize()/ct),d="n",y=b.ADVANCED}function E(){this.restoreGraphicsState(),d="S",y=b.COMPAT}var A=m.__private__.combineFontStyleAndFontWeight=function(F,Q){if(F=="bold"&&Q=="normal"||F=="bold"&&Q==400||F=="normal"&&Q=="italic"||F=="bold"&&Q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Q&&(F=Q==400||Q==="normal"?F==="italic"?"italic":"normal":Q!=700&&Q!=="bold"||F!=="normal"?(Q==700?"bold":Q)+""+F:"bold"),F};m.advancedAPI=function(F){var Q=y===b.COMPAT;return Q&&j.call(this),typeof F!="function"||(F(this),Q&&E.call(this)),this},m.compatAPI=function(F){var Q=y===b.ADVANCED;return Q&&E.call(this),typeof F!="function"||(F(this),Q&&j.call(this)),this},m.isAdvancedAPI=function(){return y===b.ADVANCED};var C,S=function(F){if(y!==b.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=m.roundToPrecision=m.__private__.roundToPrecision=function(F,Q){var ge=t||Q;if(isNaN(F)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(ge).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof c=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return T(F,c)}:c==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return T(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return T(F,16)};var O=m.f2=m.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return T(F,2)},_=m.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return T(F,3)},N=m.scale=m.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return y===b.COMPAT?F*ct:y===b.ADVANCED?F:void 0},D=function(F){return y===b.COMPAT?Ac()-F:y===b.ADVANCED?F:void 0},I=function(F){return N(D(F))};m.__private__.setPrecision=m.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(t=parseInt(F,10))};var R,M="00000000000000000000000000000000",$=m.__private__.getFileId=function(){return M},B=m.__private__.setFileId=function(F){return M=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():M.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(qs=new dh(f.userPermissions,f.userPassword,f.ownerPassword,M)),M};m.setFileId=function(F){return B(F),this},m.getFileId=function(){return $()};var U=m.__private__.convertDateToPDFDate=function(F){var Q=F.getTimezoneOffset(),ge=Q<0?"+":"-",Ce=Math.floor(Math.abs(Q/60)),Oe=Math.abs(Q%60),He=[ge,G(Ce),"'",G(Oe),"'"].join("");return["D:",F.getFullYear(),G(F.getMonth()+1),G(F.getDate()),G(F.getHours()),G(F.getMinutes()),G(F.getSeconds()),He].join("")},q=m.__private__.convertPDFDateToDate=function(F){var Q=parseInt(F.substr(2,4),10),ge=parseInt(F.substr(6,2),10)-1,Ce=parseInt(F.substr(8,2),10),Oe=parseInt(F.substr(10,2),10),He=parseInt(F.substr(12,2),10),st=parseInt(F.substr(14,2),10);return new Date(Q,ge,Ce,Oe,He,st,0)},W=m.__private__.setCreationDate=function(F){var Q;if(F===void 0&&(F=new Date),F instanceof Date)Q=U(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Q=F}return R=Q},L=m.__private__.getCreationDate=function(F){var Q=R;return F==="jsDate"&&(Q=q(R)),Q};m.setCreationDate=function(F){return W(F),this},m.getCreationDate=function(F){return L(F)};var V,G=m.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},Z=m.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},ee=0,he=[],me=[],oe=0,we=[],ve=[],pe=!1,De=me,xe=function(){ee=0,oe=0,me=[],he=[],we=[],Ci=jn(),Mn=jn()};m.__private__.setCustomOutputDestination=function(F){pe=!0,De=F};var le=function(F){pe||(De=F)};m.__private__.resetCustomOutputDestination=function(){pe=!1,De=me};var re=m.__private__.out=function(F){return F=F.toString(),oe+=F.length+1,De.push(F),De},Se=m.__private__.write=function(F){return re(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},Ne=m.__private__.getArrayBuffer=function(F){for(var Q=F.length,ge=new ArrayBuffer(Q),Ce=new Uint8Array(ge);Q--;)Ce[Q]=F.charCodeAt(Q);return ge},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ye};var $e=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(F){return $e=y===b.ADVANCED?F/ct:F,this};var rt,nt=m.__private__.getFontSize=m.getFontSize=function(){return y===b.COMPAT?$e:$e*ct},vt=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(F){return vt=F,this},m.__private__.getR2L=m.getR2L=function(){return vt};var Me,Je=m.__private__.setZoomMode=function(F){var Q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))rt=F;else if(isNaN(F)){if(Q.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');rt=F}else rt=parseInt(F,10)};m.__private__.getZoomMode=function(){return rt};var dt,xt=m.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');Me=F};m.__private__.getPageMode=function(){return Me};var kt=m.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');dt=F};m.__private__.getLayoutMode=function(){return dt},m.__private__.setDisplayMode=m.setDisplayMode=function(F,Q,ge){return Je(F),kt(Q),xt(ge),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(F){if(Object.keys(Pt).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[F]},m.__private__.getDocumentProperties=function(){return Pt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(F){for(var Q in Pt)Pt.hasOwnProperty(Q)&&F[Q]&&(Pt[Q]=F[Q]);return this},m.__private__.setDocumentProperty=function(F,Q){if(Object.keys(Pt).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[F]=Q};var Mt,ct,hr,Gt,Dr,lr={},Er={},ps=[],mr={},Ca={},Wr={},Ja={},la=null,vn=0,Yt=[],zt=new lD(m),Aa=e.hotfixes||[],ss={},Za={},Ea=[],Rt=function F(Q,ge,Ce,Oe,He,st){if(!(this instanceof F))return new F(Q,ge,Ce,Oe,He,st);isNaN(Q)&&(Q=1),isNaN(ge)&&(ge=0),isNaN(Ce)&&(Ce=0),isNaN(Oe)&&(Oe=1),isNaN(He)&&(He=0),isNaN(st)&&(st=0),this._matrix=[Q,ge,Ce,Oe,He,st]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(F)},Rt.prototype.multiply=function(F){var Q=F.sx*this.sx+F.shy*this.shx,ge=F.sx*this.shy+F.shy*this.sy,Ce=F.shx*this.sx+F.sy*this.shx,Oe=F.shx*this.shy+F.sy*this.sy,He=F.tx*this.sx+F.ty*this.shx+this.tx,st=F.tx*this.shy+F.ty*this.sy+this.ty;return new Rt(Q,ge,Ce,Oe,He,st)},Rt.prototype.decompose=function(){var F=this.sx,Q=this.shy,ge=this.shx,Ce=this.sy,Oe=this.tx,He=this.ty,st=Math.sqrt(F*F+Q*Q),gt=(F/=st)*ge+(Q/=st)*Ce;ge-=F*gt,Ce-=Q*gt;var Dt=Math.sqrt(ge*ge+Ce*Ce);return gt/=Dt,F*(Ce/=Dt)<Q*(ge/=Dt)&&(F=-F,Q=-Q,gt=-gt,st=-st),{scale:new Rt(st,0,0,Dt,0,0),translate:new Rt(1,0,0,1,Oe,He),rotate:new Rt(F,Q,-Q,F,0,0),skew:new Rt(1,0,gt,1,0,0)}},Rt.prototype.toString=function(F){return this.join(" ")},Rt.prototype.inversed=function(){var F=this.sx,Q=this.shy,ge=this.shx,Ce=this.sy,Oe=this.tx,He=this.ty,st=1/(F*Ce-Q*ge),gt=Ce*st,Dt=-Q*st,er=-ge*st,Jt=F*st;return new Rt(gt,Dt,er,Jt,-gt*Oe-er*He,-Dt*Oe-Jt*He)},Rt.prototype.applyToPoint=function(F){var Q=F.x*this.sx+F.y*this.shx+this.tx,ge=F.x*this.shy+F.y*this.sy+this.ty;return new kf(Q,ge)},Rt.prototype.applyToRectangle=function(F){var Q=this.applyToPoint(F),ge=this.applyToPoint(new kf(F.x+F.w,F.y+F.h));return new yp(Q.x,Q.y,ge.x-Q.x,ge.y-Q.y)},Rt.prototype.clone=function(){var F=this.sx,Q=this.shy,ge=this.shx,Ce=this.sy,Oe=this.tx,He=this.ty;return new Rt(F,Q,ge,Ce,Oe,He)},m.Matrix=Rt;var Pa=m.matrixMult=function(F,Q){return Q.multiply(F)},Si=new Rt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Si;var ln=function(F,Q){if(!Ca[F]){var ge=(Q instanceof ed?"Sh":"P")+(Object.keys(mr).length+1).toString(10);Q.id=ge,Ca[F]=ge,mr[ge]=Q,zt.publish("addPattern",Q)}};m.ShadingPattern=ed,m.TilingPattern=_u,m.addShadingPattern=function(F,Q){return S("addShadingPattern()"),ln(F,Q),this},m.beginTilingPattern=function(F){S("beginTilingPattern()"),l0(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},m.endTilingPattern=function(F,Q){S("endTilingPattern()"),Q.stream=ve[V].join(`
`),ln(F,Q),zt.publish("endTilingPattern",Q),Ea.pop().restore()};var Qr=m.__private__.newObject=function(){var F=jn();return Vs(F,!0),F},jn=m.__private__.newObjectDeferred=function(){return ee++,he[ee]=function(){return oe},ee},Vs=function(F,Q){return Q=typeof Q=="boolean"&&Q,he[F]=oe,Q&&re(F+" 0 obj"),F},Wo=m.__private__.newAdditionalObject=function(){var F={objId:jn(),content:""};return we.push(F),F},Ci=jn(),Mn=jn(),Ta=m.__private__.decodeColorString=function(F){var Q=F.split(" ");if(Q.length!==2||Q[1]!=="g"&&Q[1]!=="G")Q.length===5&&(Q[4]==="k"||Q[4]==="K")&&(Q=[(1-Q[0])*(1-Q[3]),(1-Q[1])*(1-Q[3]),(1-Q[2])*(1-Q[3]),"r"]);else{var ge=parseFloat(Q[0]);Q=[ge,ge,ge,"r"]}for(var Ce="#",Oe=0;Oe<3;Oe++)Ce+=("0"+Math.floor(255*parseFloat(Q[Oe])).toString(16)).slice(-2);return Ce},_a=m.__private__.encodeColorString=function(F){var Q;typeof F=="string"&&(F={ch1:F});var ge=F.ch1,Ce=F.ch2,Oe=F.ch3,He=F.ch4,st=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var gt=new oz(ge);if(gt.ok)ge=gt.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var Dt=parseInt(ge.substr(1),16);ge=Dt>>16&255,Ce=Dt>>8&255,Oe=255&Dt}if(Ce===void 0||He===void 0&&ge===Ce&&Ce===Oe)if(typeof ge=="string")Q=ge+" "+st[0];else switch(F.precision){case 2:Q=O(ge/255)+" "+st[0];break;case 3:default:Q=_(ge/255)+" "+st[0]}else if(He===void 0||Pr(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return Q=["1.","1.","1.",st[1]].join(" ");if(typeof ge=="string")Q=[ge,Ce,Oe,st[1]].join(" ");else switch(F.precision){case 2:Q=[O(ge/255),O(Ce/255),O(Oe/255),st[1]].join(" ");break;default:case 3:Q=[_(ge/255),_(Ce/255),_(Oe/255),st[1]].join(" ")}}else if(typeof ge=="string")Q=[ge,Ce,Oe,He,st[2]].join(" ");else switch(F.precision){case 2:Q=[O(ge),O(Ce),O(Oe),O(He),st[2]].join(" ");break;case 3:default:Q=[_(ge),_(Ce),_(Oe),_(He),st[2]].join(" ")}return Q},ei=m.__private__.getFilters=function(){return o},ca=m.__private__.putStream=function(F){var Q=(F=F||{}).data||"",ge=F.filters||ei(),Ce=F.alreadyAppliedFilters||[],Oe=F.addLength1||!1,He=Q.length,st=F.objectId,gt=function(Hs){return Hs};if(f!==null&&st===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(gt=qs.encryptor(st,0));var Dt={};ge===!0&&(ge=["FlateEncode"]);var er=F.additionalKeyValues||[],Jt=(Dt=Ot.API.processDataByFilters!==void 0?Ot.API.processDataByFilters(Q,ge):{data:Q,reverseChain:[]}).reverseChain+(Array.isArray(Ce)?Ce.join(" "):Ce.toString());if(Dt.data.length!==0&&(er.push({key:"Length",value:Dt.data.length}),Oe===!0&&er.push({key:"Length1",value:He})),Jt.length!=0)if(Jt.split("/").length-1==1)er.push({key:"Filter",value:Jt});else{er.push({key:"Filter",value:"["+Jt+"]"});for(var yr=0;yr<er.length;yr+=1)if(er[yr].key==="DecodeParms"){for(var Nn=[],kn=0;kn<Dt.reverseChain.split("/").length-1;kn+=1)Nn.push("null");Nn.push(er[yr].value),er[yr].value="["+Nn.join(" ")+"]"}}re("<<");for(var Xn=0;Xn<er.length;Xn++)re("/"+er[Xn].key+" "+er[Xn].value);re(">>"),Dt.data.length!==0&&(re("stream"),re(gt(Dt.data)),re("endstream"))},Ai=m.__private__.putPage=function(F){var Q=F.number,ge=F.data,Ce=F.objId,Oe=F.contentsObjId;Vs(Ce,!0),re("<</Type /Page"),re("/Parent "+F.rootDictionaryObjId+" 0 R"),re("/Resources "+F.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(C(F.mediaBox.bottomLeftX))+" "+parseFloat(C(F.mediaBox.bottomLeftY))+" "+C(F.mediaBox.topRightX)+" "+C(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&re("/CropBox ["+C(F.cropBox.bottomLeftX)+" "+C(F.cropBox.bottomLeftY)+" "+C(F.cropBox.topRightX)+" "+C(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&re("/BleedBox ["+C(F.bleedBox.bottomLeftX)+" "+C(F.bleedBox.bottomLeftY)+" "+C(F.bleedBox.topRightX)+" "+C(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&re("/TrimBox ["+C(F.trimBox.bottomLeftX)+" "+C(F.trimBox.bottomLeftY)+" "+C(F.trimBox.topRightX)+" "+C(F.trimBox.topRightY)+"]"),F.artBox!==null&&re("/ArtBox ["+C(F.artBox.bottomLeftX)+" "+C(F.artBox.bottomLeftY)+" "+C(F.artBox.topRightX)+" "+C(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&re("/UserUnit "+F.userUnit),zt.publish("putPage",{objId:Ce,pageContext:Yt[Q],pageNumber:Q,page:ge}),re("/Contents "+Oe+" 0 R"),re(">>"),re("endobj");var He=ge.join(`
`);return y===b.ADVANCED&&(He+=`
Q`),Vs(Oe,!0),ca({data:He,filters:ei(),objectId:Oe}),re("endobj"),Ce},At=m.__private__.putPages=function(){var F,Q,ge=[];for(F=1;F<=vn;F++)Yt[F].objId=jn(),Yt[F].contentsObjId=jn();for(F=1;F<=vn;F++)ge.push(Ai({number:F,data:ve[F],objId:Yt[F].objId,contentsObjId:Yt[F].contentsObjId,mediaBox:Yt[F].mediaBox,cropBox:Yt[F].cropBox,bleedBox:Yt[F].bleedBox,trimBox:Yt[F].trimBox,artBox:Yt[F].artBox,userUnit:Yt[F].userUnit,rootDictionaryObjId:Ci,resourceDictionaryObjId:Mn}));Vs(Ci,!0),re("<</Type /Pages");var Ce="/Kids [";for(Q=0;Q<vn;Q++)Ce+=ge[Q]+" 0 R ";re(Ce+"]"),re("/Count "+vn),re(">>"),re("endobj"),zt.publish("postPutPages")},Te=function(F){zt.publish("putFont",{font:F,out:re,newObject:Qr,putStream:ca}),F.isAlreadyPutted!==!0&&(F.objectNumber=Qr(),re("<<"),re("/Type /Font"),re("/BaseFont /"+uh(F.postScriptName)),re("/Subtype /Type1"),typeof F.encoding=="string"&&re("/Encoding /"+F.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},at=function(){for(var F in lr)lr.hasOwnProperty(F)&&(u===!1||u===!0&&h.hasOwnProperty(F))&&Te(lr[F])},jt=function(F){F.objectNumber=Qr();var Q=[];Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Form"}),Q.push({key:"BBox",value:"["+[C(F.x),C(F.y),C(F.x+F.width),C(F.y+F.height)].join(" ")+"]"}),Q.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var ge=F.pages[1].join(`
`);ca({data:ge,additionalKeyValues:Q,objectId:F.objectNumber}),re("endobj")},_r=function(){for(var F in ss)ss.hasOwnProperty(F)&&jt(ss[F])},Bn=function(F,Q){var ge,Ce=[],Oe=1/(Q-1);for(ge=0;ge<1;ge+=Oe)Ce.push(ge);if(Ce.push(1),F[0].offset!=0){var He={offset:0,color:F[0].color};F.unshift(He)}if(F[F.length-1].offset!=1){var st={offset:1,color:F[F.length-1].color};F.push(st)}for(var gt="",Dt=0,er=0;er<Ce.length;er++){for(ge=Ce[er];ge>F[Dt+1].offset;)Dt++;var Jt=F[Dt].offset,yr=(ge-Jt)/(F[Dt+1].offset-Jt),Nn=F[Dt].color,kn=F[Dt+1].color;gt+=Z(Math.round((1-yr)*Nn[0]+yr*kn[0]).toString(16))+Z(Math.round((1-yr)*Nn[1]+yr*kn[1]).toString(16))+Z(Math.round((1-yr)*Nn[2]+yr*kn[2]).toString(16))}return gt.trim()},wn=function(F,Q){Q||(Q=21);var ge=Qr(),Ce=Bn(F.colors,Q),Oe=[];Oe.push({key:"FunctionType",value:"0"}),Oe.push({key:"Domain",value:"[0.0 1.0]"}),Oe.push({key:"Size",value:"["+Q+"]"}),Oe.push({key:"BitsPerSample",value:"8"}),Oe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ca({data:Ce,additionalKeyValues:Oe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),re("endobj"),F.objectNumber=Qr(),re("<< /ShadingType "+F.type),re("/ColorSpace /DeviceRGB");var He="/Coords ["+C(parseFloat(F.coords[0]))+" "+C(parseFloat(F.coords[1]))+" ";F.type===2?He+=C(parseFloat(F.coords[2]))+" "+C(parseFloat(F.coords[3])):He+=C(parseFloat(F.coords[2]))+" "+C(parseFloat(F.coords[3]))+" "+C(parseFloat(F.coords[4]))+" "+C(parseFloat(F.coords[5])),re(He+="]"),F.matrix&&re("/Matrix ["+F.matrix.toString()+"]"),re("/Function "+ge+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},vs=function(F,Q){var ge=jn(),Ce=Qr();Q.push({resourcesOid:ge,objectOid:Ce}),F.objectNumber=Ce;var Oe=[];Oe.push({key:"Type",value:"/Pattern"}),Oe.push({key:"PatternType",value:"1"}),Oe.push({key:"PaintType",value:"1"}),Oe.push({key:"TilingType",value:"1"}),Oe.push({key:"BBox",value:"["+F.boundingBox.map(C).join(" ")+"]"}),Oe.push({key:"XStep",value:C(F.xStep)}),Oe.push({key:"YStep",value:C(F.yStep)}),Oe.push({key:"Resources",value:ge+" 0 R"}),F.matrix&&Oe.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),ca({data:F.stream,additionalKeyValues:Oe,objectId:F.objectNumber}),re("endobj")},Ws=function(F){var Q;for(Q in mr)mr.hasOwnProperty(Q)&&(mr[Q]instanceof ed?wn(mr[Q]):mr[Q]instanceof _u&&vs(mr[Q],F))},qo=function(F){for(var Q in F.objectNumber=Qr(),re("<<"),F)switch(Q){case"opacity":re("/ca "+O(F[Q]));break;case"stroke-opacity":re("/CA "+O(F[Q]))}re(">>"),re("endobj")},Qd=function(){var F;for(F in Wr)Wr.hasOwnProperty(F)&&qo(Wr[F])},In=function(){for(var F in re("/XObject <<"),ss)ss.hasOwnProperty(F)&&ss[F].objectNumber>=0&&re("/"+F+" "+ss[F].objectNumber+" 0 R");zt.publish("putXobjectDict"),re(">>")},Sf=function(){qs.oid=Qr(),re("<<"),re("/Filter /Standard"),re("/V "+qs.v),re("/R "+qs.r),re("/U <"+qs.toHexString(qs.U)+">"),re("/O <"+qs.toHexString(qs.O)+">"),re("/P "+qs.P),re(">>"),re("endobj")},Jd=function(){for(var F in re("/Font <<"),lr)lr.hasOwnProperty(F)&&(u===!1||u===!0&&h.hasOwnProperty(F))&&re("/"+F+" "+lr[F].objectNumber+" 0 R");re(">>")},i2=function(){if(Object.keys(mr).length>0){for(var F in re("/Shading <<"),mr)mr.hasOwnProperty(F)&&mr[F]instanceof ed&&mr[F].objectNumber>=0&&re("/"+F+" "+mr[F].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),re(">>")}},Cf=function(F){if(Object.keys(mr).length>0){for(var Q in re("/Pattern <<"),mr)mr.hasOwnProperty(Q)&&mr[Q]instanceof m.TilingPattern&&mr[Q].objectNumber>=0&&mr[Q].objectNumber<F&&re("/"+Q+" "+mr[Q].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),re(">>")}},o2=function(){if(Object.keys(Wr).length>0){var F;for(F in re("/ExtGState <<"),Wr)Wr.hasOwnProperty(F)&&Wr[F].objectNumber>=0&&re("/"+F+" "+Wr[F].objectNumber+" 0 R");zt.publish("putGStateDict"),re(">>")}},zn=function(F){Vs(F.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Jd(),i2(),Cf(F.objectOid),o2(),In(),re(">>"),re("endobj")},Gx=function(){var F=[];at(),Qd(),_r(),Ws(F),zt.publish("putResources"),F.forEach(zn),zn({resourcesOid:Mn,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},Kx=function(){zt.publish("putAdditionalObjects");for(var F=0;F<we.length;F++){var Q=we[F];Vs(Q.objId,!0),re(Q.content),re("endobj")}zt.publish("postPutAdditionalObjects")},Yx=function(F){Er[F.fontName]=Er[F.fontName]||{},Er[F.fontName][F.fontStyle]=F.id},dp=function(F,Q,ge,Ce,Oe){var He={id:"F"+(Object.keys(lr).length+1).toString(10),postScriptName:F,fontName:Q,fontStyle:ge,encoding:Ce,isStandardFont:Oe||!1,metadata:{}};return zt.publish("addFont",{font:He,instance:this}),lr[He.id]=He,Yx(He),He.id},l2=function(F){for(var Q=0,ge=ye.length;Q<ge;Q++){var Ce=dp.call(this,F[Q][0],F[Q][1],F[Q][2],ye[Q][3],!0);u===!1&&(h[Ce]=!0);var Oe=F[Q][0].split("-");Yx({id:Ce,fontName:Oe[0],fontStyle:Oe[1]||""})}zt.publish("addFonts",{fonts:lr,dictionary:Er})},ao=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(Ce){var Q=Ce.stack||"";~Q.indexOf(" at ")&&(Q=Q.split(" at ")[1]);var ge="Error in function "+Q.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!Wt.console)throw new Error(ge);Wt.console.error(ge,Ce),Wt.alert&&alert(ge)}},F.foo.bar=F,F.foo},Af=function(F,Q){var ge,Ce,Oe,He,st,gt,Dt,er,Jt;if(Oe=(Q=Q||{}).sourceEncoding||"Unicode",st=Q.outputEncoding,(Q.autoencode||st)&&lr[Mt].metadata&&lr[Mt].metadata[Oe]&&lr[Mt].metadata[Oe].encoding&&(He=lr[Mt].metadata[Oe].encoding,!st&&lr[Mt].encoding&&(st=lr[Mt].encoding),!st&&He.codePages&&(st=He.codePages[0]),typeof st=="string"&&(st=He[st]),st)){for(Dt=!1,gt=[],ge=0,Ce=F.length;ge<Ce;ge++)(er=st[F.charCodeAt(ge)])?gt.push(String.fromCharCode(er)):gt.push(F[ge]),gt[ge].charCodeAt(0)>>8&&(Dt=!0);F=gt.join("")}for(ge=F.length;Dt===void 0&&ge!==0;)F.charCodeAt(ge-1)>>8&&(Dt=!0),ge--;if(!Dt)return F;for(gt=Q.noBOM?[]:[254,255],ge=0,Ce=F.length;ge<Ce;ge++){if((Jt=(er=F.charCodeAt(ge))>>8)>>8)throw new Error("Character at position "+ge+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gt.push(Jt),gt.push(er-(Jt<<8))}return String.fromCharCode.apply(void 0,gt)},Ia=m.__private__.pdfEscape=m.pdfEscape=function(F,Q){return Af(F,Q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},up=m.__private__.beginPage=function(F){ve[++vn]=[],Yt[vn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},Qx(vn),le(ve[V])},Xx=function(F,Q){var ge,Ce,Oe;switch(r=Q||r,typeof F=="string"&&(ge=x(F.toLowerCase()),Array.isArray(ge)&&(Ce=ge[0],Oe=ge[1])),Array.isArray(F)&&(Ce=F[0]*ct,Oe=F[1]*ct),isNaN(Ce)&&(Ce=a[0],Oe=a[1]),(Ce>14400||Oe>14400)&&(Hr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ce=Math.min(14400,Ce),Oe=Math.min(14400,Oe)),a=[Ce,Oe],r.substr(0,1)){case"l":Oe>Ce&&(a=[Oe,Ce]);break;case"p":Ce>Oe&&(a=[Oe,Ce])}up(a),n0(pp),re(io),gp!==0&&re(gp+" J"),xp!==0&&re(xp+" j"),zt.publish("addPage",{pageNumber:vn})},c2=function(F){F>0&&F<=vn&&(ve.splice(F,1),Yt.splice(F,1),vn--,V>vn&&(V=vn),this.setPage(V))},Qx=function(F){F>0&&F<=vn&&(V=F)},d2=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ve.length-1},Jx=function(F,Q,ge){var Ce,Oe=void 0;return ge=ge||{},F=F!==void 0?F:lr[Mt].fontName,Q=Q!==void 0?Q:lr[Mt].fontStyle,Ce=F.toLowerCase(),Er[Ce]!==void 0&&Er[Ce][Q]!==void 0?Oe=Er[Ce][Q]:Er[F]!==void 0&&Er[F][Q]!==void 0?Oe=Er[F][Q]:ge.disableWarning===!1&&Hr.warn("Unable to look up font label for font '"+F+"', '"+Q+"'. Refer to getFontList() for available fonts."),Oe||ge.noFallback||(Oe=Er.times[Q])==null&&(Oe=Er.times.normal),Oe},u2=m.__private__.putInfo=function(){var F=Qr(),Q=function(Ce){return Ce};for(var ge in f!==null&&(Q=qs.encryptor(F,0)),re("<<"),re("/Producer ("+Ia(Q("jsPDF "+Ot.version))+")"),Pt)Pt.hasOwnProperty(ge)&&Pt[ge]&&re("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+Ia(Q(Pt[ge]))+")");re("/CreationDate ("+Ia(Q(R))+")"),re(">>"),re("endobj")},fp=m.__private__.putCatalog=function(F){var Q=(F=F||{}).rootDictionaryObjId||Ci;switch(Qr(),re("<<"),re("/Type /Catalog"),re("/Pages "+Q+" 0 R"),rt||(rt="fullwidth"),rt){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+rt;ge.substr(ge.length-1)==="%"&&(rt=parseInt(rt)/100),typeof rt=="number"&&re("/OpenAction [3 0 R /XYZ null null "+O(rt)+"]")}switch(dt||(dt="continuous"),dt){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Me&&re("/PageMode /"+Me),zt.publish("putCatalog"),re(">>"),re("endobj")},f2=m.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(ee+1)),re("/Root "+ee+" 0 R"),re("/Info "+(ee-1)+" 0 R"),f!==null&&re("/Encrypt "+qs.oid+" 0 R"),re("/ID [ <"+M+"> <"+M+"> ]"),re(">>")},h2=m.__private__.putHeader=function(){re("%PDF-"+v),re("%ºß¬à")},m2=m.__private__.putXRef=function(){var F="0000000000";re("xref"),re("0 "+(ee+1)),re("0000000000 65535 f ");for(var Q=1;Q<=ee;Q++)typeof he[Q]=="function"?re((F+he[Q]()).slice(-10)+" 00000 n "):he[Q]!==void 0?re((F+he[Q]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Tl=m.__private__.buildDocument=function(){xe(),le(me),zt.publish("buildDocument"),h2(),At(),Kx(),Gx(),f!==null&&Sf(),u2(),fp();var F=oe;return m2(),f2(),re("startxref"),re(""+F),re("%%EOF"),le(ve[V]),me.join(`
`)},Ef=m.__private__.getBlob=function(F){return new Blob([Ne(F)],{type:"application/pdf"})},Pf=m.output=m.__private__.output=ao(function(F,Q){switch(typeof(Q=Q||{})=="string"?Q={filename:Q}:Q.filename=Q.filename||"generated.pdf",F){case void 0:return Tl();case"save":m.save(Q.filename);break;case"arraybuffer":return Ne(Tl());case"blob":return Ef(Tl());case"bloburi":case"bloburl":if(Wt.URL!==void 0&&typeof Wt.URL.createObjectURL=="function")return Wt.URL&&Wt.URL.createObjectURL(Ef(Tl()))||void 0;Hr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",Ce=Tl();try{ge=zC(Ce)}catch{ge=zC(unescape(encodeURIComponent(Ce)))}return"data:application/pdf;filename="+Q.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var Oe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Q.pdfObjectUrl&&(Oe=Q.pdfObjectUrl,He="");var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Oe+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Q)+");<\/script></body></html>",gt=Wt.open();return gt!==null&&gt.document.write(st),gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Q.filename+'" width="500px" height="400px" /></body></html>',er=Wt.open();if(er!==null){er.document.write(Dt);var Jt=this;er.document.documentElement.querySelector("#pdfViewer").onload=function(){er.document.title=Q.filename,er.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Jt.output("bloburl"))}}return er}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Q)+'"></iframe></body></html>',Nn=Wt.open();if(Nn!==null&&(Nn.document.write(yr),Nn.document.title=Q.filename),Nn||typeof safari>"u")return Nn;break;case"datauri":case"dataurl":return Wt.document.location.href=this.output("datauristring",Q);default:return null}}),Zx=function(F){return Array.isArray(Aa)===!0&&Aa.indexOf(F)>-1};switch(s){case"pt":ct=1;break;case"mm":ct=72/25.4;break;case"cm":ct=72/2.54;break;case"in":ct=72;break;case"px":ct=Zx("px_scaling")==1?.75:96/72;break;case"pc":case"em":ct=12;break;case"ex":ct=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);ct=s}var qs=null;W(),B();var p2=function(F){return f!==null?qs.encryptor(F,0):function(Q){return Q}},e0=m.__private__.getPageInfo=m.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Yt[F].objId,pageNumber:F,pageContext:Yt[F]}},Qt=m.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Q in Yt)if(Yt[Q].objId===F)break;return e0(Q)},v2=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Yt[V].objId,pageNumber:V,pageContext:Yt[V]}};m.addPage=function(){return Xx.apply(this,arguments),this},m.setPage=function(){return Qx.apply(this,arguments),le.call(this,ve[V]),this},m.insertPage=function(F){return this.addPage(),this.movePage(V,F),this},m.movePage=function(F,Q){var ge,Ce;if(F>Q){ge=ve[F],Ce=Yt[F];for(var Oe=F;Oe>Q;Oe--)ve[Oe]=ve[Oe-1],Yt[Oe]=Yt[Oe-1];ve[Q]=ge,Yt[Q]=Ce,this.setPage(Q)}else if(F<Q){ge=ve[F],Ce=Yt[F];for(var He=F;He<Q;He++)ve[He]=ve[He+1],Yt[He]=Yt[He+1];ve[Q]=ge,Yt[Q]=Ce,this.setPage(Q)}return this},m.deletePage=function(){return c2.apply(this,arguments),this},m.__private__.text=m.text=function(F,Q,ge,Ce,Oe){var He,st,gt,Dt,er,Jt,yr,Nn,kn,Xn=(Ce=Ce||{}).scope||this;if(typeof F=="number"&&typeof Q=="number"&&(typeof ge=="string"||Array.isArray(ge))){var Hs=ge;ge=Q,Q=F,F=Hs}if(arguments[3]instanceof Rt?(S("The transform parameter of text() with a Matrix value"),kn=Oe):(gt=arguments[4],Dt=arguments[5],Pr(yr=arguments[3])==="object"&&yr!==null||(typeof gt=="string"&&(Dt=gt,gt=null),typeof yr=="string"&&(Dt=yr,yr=null),typeof yr=="number"&&(gt=yr,yr=null),Ce={flags:yr,angle:gt,align:Dt})),isNaN(Q)||isNaN(ge)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return Xn;var gs="",oo=!1,ti=typeof Ce.lineHeightFactor=="number"?Ce.lineHeightFactor:eu,Ko=Xn.internal.scaleFactor;function c0(Jr){return Jr=Jr.split("	").join(Array(Ce.TabLen||9).join(" ")),Ia(Jr,yr)}function Np(Jr){for(var Zr,Vn=Jr.concat(),as=[],Ol=Vn.length;Ol--;)typeof(Zr=Vn.shift())=="string"?as.push(Zr):Array.isArray(Jr)&&(Zr.length===1||Zr[1]===void 0&&Zr[2]===void 0)?as.push(Zr[0]):as.push([Zr[0],Zr[1],Zr[2]]);return as}function Sp(Jr,Zr){var Vn;if(typeof Jr=="string")Vn=Zr(Jr)[0];else if(Array.isArray(Jr)){for(var as,Ol,kp=Jr.concat(),Vf=[],m0=kp.length;m0--;)typeof(as=kp.shift())=="string"?Vf.push(Zr(as)[0]):Array.isArray(as)&&typeof as[0]=="string"&&(Ol=Zr(as[0],as[1],as[2]),Vf.push([Ol[0],Ol[1],Ol[2]]));Vn=Vf}return Vn}var Of=!1,Cp=!0;if(typeof F=="string")Of=!0;else if(Array.isArray(F)){var Ap=F.concat();st=[];for(var Lf,_s=Ap.length;_s--;)(typeof(Lf=Ap.shift())!="string"||Array.isArray(Lf)&&typeof Lf[0]!="string")&&(Cp=!1);Of=Cp}if(Of===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var Rf=$e/Xn.internal.scaleFactor,$f=Rf*(ti-1);switch(Ce.baseline){case"bottom":ge-=$f;break;case"top":ge+=Rf-$f;break;case"hanging":ge+=Rf-2*$f;break;case"middle":ge+=Rf/2-$f}if((Jt=Ce.maxWidth||0)>0&&(typeof F=="string"?F=Xn.splitTextToSize(F,Jt):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Jr,Zr){return Jr.concat(Xn.splitTextToSize(Zr,Jt))},[]))),He={text:F,x:Q,y:ge,options:Ce,mutex:{pdfEscape:Ia,activeFontKey:Mt,fonts:lr,activeFontSize:$e}},zt.publish("preProcessText",He),F=He.text,gt=(Ce=He.options).angle,!(kn instanceof Rt)&&gt&&typeof gt=="number"){gt*=Math.PI/180,Ce.rotationDirection===0&&(gt=-gt),y===b.ADVANCED&&(gt=-gt);var Ff=Math.cos(gt),Ep=Math.sin(gt);kn=new Rt(Ff,Ep,-Ep,Ff,0,0)}else gt&&gt instanceof Rt&&(kn=gt);y!==b.ADVANCED||kn||(kn=Si),(er=Ce.charSpace||If)!==void 0&&(gs+=C(N(er))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Nn=Ce.horizontalScale)!==void 0&&(gs+=C(100*Nn)+` Tz
`),Ce.lang;var ka=-1,A2=Ce.renderingMode!==void 0?Ce.renderingMode:Ce.stroke,Pp=Xn.internal.getCurrentPageInfo().pageContext;switch(A2){case 0:case!1:case"fill":ka=0;break;case 1:case!0:case"stroke":ka=1;break;case 2:case"fillThenStroke":ka=2;break;case 3:case"invisible":ka=3;break;case 4:case"fillAndAddForClipping":ka=4;break;case 5:case"strokeAndAddPathForClipping":ka=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ka=6;break;case 7:case"addToPathForClipping":ka=7}var d0=Pp.usedRenderingMode!==void 0?Pp.usedRenderingMode:-1;ka!==-1?gs+=ka+` Tr
`:d0!==-1&&(gs+=`0 Tr
`),ka!==-1&&(Pp.usedRenderingMode=ka),Dt=Ce.align||"left";var Ei,Mf=$e*ti,u0=Xn.internal.pageSize.getWidth(),f0=lr[Mt];er=Ce.charSpace||If,Jt=Ce.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},Ce.flags);var Ec=[],nu=function(Jr){return Xn.getStringUnitWidth(Jr,{font:f0,charSpace:er,fontSize:$e,doKerning:!1})*$e/Ko};if(Object.prototype.toString.call(F)==="[object Array]"){var Da;st=Np(F),Dt!=="left"&&(Ei=st.map(nu));var da,Pc=0;if(Dt==="right"){Q-=Ei[0],F=[],_s=st.length;for(var Il=0;Il<_s;Il++)Il===0?(da=Go(Q),Da=_l(ge)):(da=N(Pc-Ei[Il]),Da=-Mf),F.push([st[Il],da,Da]),Pc=Ei[Il]}else if(Dt==="center"){Q-=Ei[0]/2,F=[],_s=st.length;for(var kl=0;kl<_s;kl++)kl===0?(da=Go(Q),Da=_l(ge)):(da=N((Pc-Ei[kl])/2),Da=-Mf),F.push([st[kl],da,Da]),Pc=Ei[kl]}else if(Dt==="left"){F=[],_s=st.length;for(var Bf=0;Bf<_s;Bf++)F.push(st[Bf])}else if(Dt==="justify"&&f0.encoding==="Identity-H"){F=[],_s=st.length,Jt=Jt!==0?Jt:u0;for(var Dl=0,Un=0;Un<_s;Un++)if(Da=Un===0?_l(ge):-Mf,da=Un===0?Go(Q):Dl,Un<_s-1){var Tp=N((Jt-Ei[Un])/(st[Un].split(" ").length-1)),ua=st[Un].split(" ");F.push([ua[0]+" ",da,Da]),Dl=0;for(var Pi=1;Pi<ua.length;Pi++){var zf=(nu(ua[Pi-1]+" "+ua[Pi])-nu(ua[Pi]))*Ko+Tp;Pi==ua.length-1?F.push([ua[Pi],zf,0]):F.push([ua[Pi]+" ",zf,0]),Dl-=zf}}else F.push([st[Un],da,Da]);F.push(["",Dl,0])}else{if(Dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],_s=st.length,Jt=Jt!==0?Jt:u0,Un=0;Un<_s;Un++)Da=Un===0?_l(ge):-Mf,da=Un===0?Go(Q):0,Un<_s-1?Ec.push(C(N((Jt-Ei[Un])/(st[Un].split(" ").length-1)))):Ec.push(0),F.push([st[Un],da,Da])}}var h0=typeof Ce.R2L=="boolean"?Ce.R2L:vt;h0===!0&&(F=Sp(F,function(Jr,Zr,Vn){return[Jr.split("").reverse().join(""),Zr,Vn]})),He={text:F,x:Q,y:ge,options:Ce,mutex:{pdfEscape:Ia,activeFontKey:Mt,fonts:lr,activeFontSize:$e}},zt.publish("postProcessText",He),F=He.text,oo=He.mutex.isHex||!1;var _p=lr[Mt].encoding;_p!=="WinAnsiEncoding"&&_p!=="StandardEncoding"||(F=Sp(F,function(Jr,Zr,Vn){return[c0(Jr),Zr,Vn]})),st=Np(F),F=[];for(var su,au,Tc,iu=0,Uf=1,ou=Array.isArray(st[0])?Uf:iu,_c="",Ip=function(Jr,Zr,Vn){var as="";return Vn instanceof Rt?(Vn=typeof Ce.angle=="number"?Pa(Vn,new Rt(1,0,0,1,Jr,Zr)):Pa(new Rt(1,0,0,1,Jr,Zr),Vn),y===b.ADVANCED&&(Vn=Pa(new Rt(1,0,0,-1,0,0),Vn)),as=Vn.join(" ")+` Tm
`):as=C(Jr)+" "+C(Zr)+` Td
`,as},Ti=0;Ti<st.length;Ti++){switch(_c="",ou){case Uf:Tc=(oo?"<":"(")+st[Ti][0]+(oo?">":")"),su=parseFloat(st[Ti][1]),au=parseFloat(st[Ti][2]);break;case iu:Tc=(oo?"<":"(")+st[Ti]+(oo?">":")"),su=Go(Q),au=_l(ge)}Ec!==void 0&&Ec[Ti]!==void 0&&(_c=Ec[Ti]+` Tw
`),Ti===0?F.push(_c+Ip(su,au,kn)+Tc):ou===iu?F.push(_c+Tc):ou===Uf&&F.push(_c+Ip(su,au,kn)+Tc)}F=ou===iu?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var _i=`BT
/`;return _i+=Mt+" "+$e+` Tf
`,_i+=C($e*ti)+` TL
`,_i+=tu+`
`,_i+=gs,_i+=F,re(_i+="ET"),h[Mt]=!0,Xn};var g2=m.__private__.clip=m.clip=function(F){return re(F==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return g2("evenodd")},m.__private__.discardPath=m.discardPath=function(){return re("n"),this};var Ho=m.__private__.isValidStyle=function(F){var Q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(Q=!0),Q};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(F){return Ho(F)&&(d=F),this};var t0=m.__private__.getStyle=m.getStyle=function(F){var Q=d;switch(F){case"D":case"S":Q="S";break;case"F":Q="f";break;case"FD":case"DF":Q="B";break;case"f":case"f*":case"B":case"B*":Q=F}return Q},r0=m.close=function(){return re("h"),this};m.stroke=function(){return re("S"),this},m.fill=function(F){return Tf("f",F),this},m.fillEvenOdd=function(F){return Tf("f*",F),this},m.fillStroke=function(F){return Tf("B",F),this},m.fillStrokeEvenOdd=function(F){return Tf("B*",F),this};var Tf=function(F,Q){Pr(Q)==="object"?y2(Q,F):re(F)},hp=function(F){F===null||y===b.ADVANCED&&F===void 0||(F=t0(F),re(F))};function x2(F,Q,ge,Ce,Oe){var He=new _u(Q||this.boundingBox,ge||this.xStep,Ce||this.yStep,this.gState,Oe||this.matrix);He.stream=this.stream;var st=F+"$$"+this.cloneIndex+++"$$";return ln(st,He),He}var y2=function(F,Q){var ge=Ca[F.key],Ce=mr[ge];if(Ce instanceof ed)re("q"),re(b2(Q)),Ce.gState&&m.setGState(Ce.gState),re(F.matrix.toString()+" cm"),re("/"+ge+" sh"),re("Q");else if(Ce instanceof _u){var Oe=new Rt(1,0,0,-1,0,Ac());F.matrix&&(Oe=Oe.multiply(F.matrix||Si),ge=x2.call(Ce,F.key,F.boundingBox,F.xStep,F.yStep,Oe).id),re("q"),re("/Pattern cs"),re("/"+ge+" scn"),Ce.gState&&m.setGState(Ce.gState),re(Q),re("Q")}},b2=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mp=m.moveTo=function(F,Q){return re(C(N(F))+" "+C(I(Q))+" m"),this},Zd=m.lineTo=function(F,Q){return re(C(N(F))+" "+C(I(Q))+" l"),this},Sc=m.curveTo=function(F,Q,ge,Ce,Oe,He){return re([C(N(F)),C(I(Q)),C(N(ge)),C(I(Ce)),C(N(Oe)),C(I(He)),"c"].join(" ")),this};m.__private__.line=m.line=function(F,Q,ge,Ce,Oe){if(isNaN(F)||isNaN(Q)||isNaN(ge)||isNaN(Ce)||!Ho(Oe))throw new Error("Invalid arguments passed to jsPDF.line");return y===b.COMPAT?this.lines([[ge-F,Ce-Q]],F,Q,[1,1],Oe||"S"):this.lines([[ge-F,Ce-Q]],F,Q,[1,1]).stroke()},m.__private__.lines=m.lines=function(F,Q,ge,Ce,Oe,He){var st,gt,Dt,er,Jt,yr,Nn,kn,Xn,Hs,gs,oo;if(typeof F=="number"&&(oo=ge,ge=Q,Q=F,F=oo),Ce=Ce||[1,1],He=He||!1,isNaN(Q)||isNaN(ge)||!Array.isArray(F)||!Array.isArray(Ce)||!Ho(Oe)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mp(Q,ge),st=Ce[0],gt=Ce[1],er=F.length,Hs=Q,gs=ge,Dt=0;Dt<er;Dt++)(Jt=F[Dt]).length===2?(Hs=Jt[0]*st+Hs,gs=Jt[1]*gt+gs,Zd(Hs,gs)):(yr=Jt[0]*st+Hs,Nn=Jt[1]*gt+gs,kn=Jt[2]*st+Hs,Xn=Jt[3]*gt+gs,Hs=Jt[4]*st+Hs,gs=Jt[5]*gt+gs,Sc(yr,Nn,kn,Xn,Hs,gs));return He&&r0(),hp(Oe),this},m.path=function(F){for(var Q=0;Q<F.length;Q++){var ge=F[Q],Ce=ge.c;switch(ge.op){case"m":mp(Ce[0],Ce[1]);break;case"l":Zd(Ce[0],Ce[1]);break;case"c":Sc.apply(this,Ce);break;case"h":r0()}}return this},m.__private__.rect=m.rect=function(F,Q,ge,Ce,Oe){if(isNaN(F)||isNaN(Q)||isNaN(ge)||isNaN(Ce)||!Ho(Oe))throw new Error("Invalid arguments passed to jsPDF.rect");return y===b.COMPAT&&(Ce=-Ce),re([C(N(F)),C(I(Q)),C(N(ge)),C(N(Ce)),"re"].join(" ")),hp(Oe),this},m.__private__.triangle=m.triangle=function(F,Q,ge,Ce,Oe,He,st){if(isNaN(F)||isNaN(Q)||isNaN(ge)||isNaN(Ce)||isNaN(Oe)||isNaN(He)||!Ho(st))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-F,Ce-Q],[Oe-ge,He-Ce],[F-Oe,Q-He]],F,Q,[1,1],st,!0),this},m.__private__.roundedRect=m.roundedRect=function(F,Q,ge,Ce,Oe,He,st){if(isNaN(F)||isNaN(Q)||isNaN(ge)||isNaN(Ce)||isNaN(Oe)||isNaN(He)||!Ho(st))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var gt=4/3*(Math.SQRT2-1);return Oe=Math.min(Oe,.5*ge),He=Math.min(He,.5*Ce),this.lines([[ge-2*Oe,0],[Oe*gt,0,Oe,He-He*gt,Oe,He],[0,Ce-2*He],[0,He*gt,-Oe*gt,He,-Oe,He],[2*Oe-ge,0],[-Oe*gt,0,-Oe,-He*gt,-Oe,-He],[0,2*He-Ce],[0,-He*gt,Oe*gt,-He,Oe,-He]],F+Oe,Q,[1,1],st,!0),this},m.__private__.ellipse=m.ellipse=function(F,Q,ge,Ce,Oe){if(isNaN(F)||isNaN(Q)||isNaN(ge)||isNaN(Ce)||!Ho(Oe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*ge,st=4/3*(Math.SQRT2-1)*Ce;return mp(F+ge,Q),Sc(F+ge,Q-st,F+He,Q-Ce,F,Q-Ce),Sc(F-He,Q-Ce,F-ge,Q-st,F-ge,Q),Sc(F-ge,Q+st,F-He,Q+Ce,F,Q+Ce),Sc(F+He,Q+Ce,F+ge,Q+st,F+ge,Q),hp(Oe),this},m.__private__.circle=m.circle=function(F,Q,ge,Ce){if(isNaN(F)||isNaN(Q)||isNaN(ge)||!Ho(Ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,Q,ge,ge,Ce)},m.setFont=function(F,Q,ge){return ge&&(Q=A(Q,ge)),Mt=Jx(F,Q,{disableWarning:!1}),this};var j2=m.__private__.getFont=m.getFont=function(){return lr[Jx.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var F,Q,ge={};for(F in Er)if(Er.hasOwnProperty(F))for(Q in ge[F]=[],Er[F])Er[F].hasOwnProperty(Q)&&ge[F].push(Q);return ge},m.addFont=function(F,Q,ge,Ce,Oe){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?Oe=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(ge=A(ge,Ce)),Oe=Oe||"Identity-H",dp.call(this,F,Q,ge,Oe)};var eu,pp=e.lineWidth||.200025,_f=m.__private__.getLineWidth=m.getLineWidth=function(){return pp},n0=m.__private__.setLineWidth=m.setLineWidth=function(F){return pp=F,re(C(N(F))+" w"),this};m.__private__.setLineDash=Ot.API.setLineDash=Ot.API.setLineDashPattern=function(F,Q){if(F=F||[],Q=Q||0,isNaN(Q)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(ge){return C(N(ge))}).join(" "),Q=C(N(Q)),re("["+F+"] "+Q+" d"),this};var s0=m.__private__.getLineHeight=m.getLineHeight=function(){return $e*eu};m.__private__.getLineHeight=m.getLineHeight=function(){return $e*eu};var a0=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(eu=F),this},i0=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return eu};a0(e.lineHeight);var Go=m.__private__.getHorizontalCoordinate=function(F){return N(F)},_l=m.__private__.getVerticalCoordinate=function(F){return y===b.ADVANCED?F:Yt[V].mediaBox.topRightY-Yt[V].mediaBox.bottomLeftY-N(F)},w2=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(F){return C(Go(F))},Cc=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(F){return C(_l(F))},io=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ta(io)},m.__private__.setStrokeColor=m.setDrawColor=function(F,Q,ge,Ce){return io=_a({ch1:F,ch2:Q,ch3:ge,ch4:Ce,pdfColorType:"draw",precision:2}),re(io),this};var vp=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ta(vp)},m.__private__.setFillColor=m.setFillColor=function(F,Q,ge,Ce){return vp=_a({ch1:F,ch2:Q,ch3:ge,ch4:Ce,pdfColorType:"fill",precision:2}),re(vp),this};var tu=e.textColor||"0 g",N2=m.__private__.getTextColor=m.getTextColor=function(){return Ta(tu)};m.__private__.setTextColor=m.setTextColor=function(F,Q,ge,Ce){return tu=_a({ch1:F,ch2:Q,ch3:ge,ch4:Ce,pdfColorType:"text",precision:3}),this};var If=e.charSpace,S2=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(If||0)};m.__private__.setCharSpace=m.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return If=F,this};var gp=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(F){var Q=m.CapJoinStyles[F];if(Q===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gp=Q,re(Q+" J"),this};var xp=0;m.__private__.setLineJoin=m.setLineJoin=function(F){var Q=m.CapJoinStyles[F];if(Q===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xp=Q,re(Q+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(C(N(F))+" M"),this},m.GState=_g,m.setGState=function(F){(F=typeof F=="string"?Wr[Ja[F]]:o0(null,F)).equals(la)||(re("/"+F.id+" gs"),la=F)};var o0=function(F,Q){if(!F||!Ja[F]){var ge=!1;for(var Ce in Wr)if(Wr.hasOwnProperty(Ce)&&Wr[Ce].equals(Q)){ge=!0;break}if(ge)Q=Wr[Ce];else{var Oe="GS"+(Object.keys(Wr).length+1).toString(10);Wr[Oe]=Q,Q.id=Oe}return F&&(Ja[F]=Q.id),zt.publish("addGState",Q),Q}};m.addGState=function(F,Q){return o0(F,Q),this},m.saveGraphicsState=function(){return re("q"),ps.push({key:Mt,size:$e,color:tu}),this},m.restoreGraphicsState=function(){re("Q");var F=ps.pop();return Mt=F.key,$e=F.size,tu=F.color,la=null,this},m.setCurrentTransformationMatrix=function(F){return re(F.toString()+" cm"),this},m.comment=function(F){return re("#"+F),this};var kf=function(F,Q){var ge=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(He){isNaN(He)||(ge=parseFloat(He))}});var Ce=Q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ce},set:function(He){isNaN(He)||(Ce=parseFloat(He))}});var Oe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Oe},set:function(He){Oe=He.toString()}}),this},yp=function(F,Q,ge,Ce){kf.call(this,F,Q),this.type="rect";var Oe=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Oe},set:function(st){isNaN(st)||(Oe=parseFloat(st))}});var He=Ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(st){isNaN(st)||(He=parseFloat(st))}}),this},bp=function(){this.page=vn,this.currentPage=V,this.pages=ve.slice(0),this.pagesContext=Yt.slice(0),this.x=hr,this.y=Gt,this.matrix=Dr,this.width=ru(V),this.height=Ac(V),this.outputDestination=De,this.id="",this.objectNumber=-1};bp.prototype.restore=function(){vn=this.page,V=this.currentPage,Yt=this.pagesContext,ve=this.pages,hr=this.x,Gt=this.y,Dr=this.matrix,jp(V,this.width),wp(V,this.height),De=this.outputDestination};var l0=function(F,Q,ge,Ce,Oe){Ea.push(new bp),vn=V=0,ve=[],hr=F,Gt=Q,Dr=Oe,up([ge,Ce])},C2=function(F){if(Za[F])Ea.pop().restore();else{var Q=new bp,ge="Xo"+(Object.keys(ss).length+1).toString(10);Q.id=ge,Za[F]=ge,ss[ge]=Q,zt.publish("addFormObject",Q),Ea.pop().restore()}};for(var Df in m.beginFormObject=function(F,Q,ge,Ce,Oe){return l0(F,Q,ge,Ce,Oe),this},m.endFormObject=function(F){return C2(F),this},m.doFormObject=function(F,Q){var ge=ss[Za[F]];return re("q"),re(Q.toString()+" cm"),re("/"+ge.id+" Do"),re("Q"),this},m.getFormObject=function(F){var Q=ss[Za[F]];return{x:Q.x,y:Q.y,width:Q.width,height:Q.height,matrix:Q.matrix}},m.save=function(F,Q){return F=F||"generated.pdf",(Q=Q||{}).returnPromise=Q.returnPromise||!1,Q.returnPromise===!1?(pu(Ef(Tl()),F),typeof pu.unload=="function"&&Wt.setTimeout&&setTimeout(pu.unload,911),this):new Promise(function(ge,Ce){try{var Oe=pu(Ef(Tl()),F);typeof pu.unload=="function"&&Wt.setTimeout&&setTimeout(pu.unload,911),ge(Oe)}catch(He){Ce(He.message)}})},Ot.API)Ot.API.hasOwnProperty(Df)&&(Df==="events"&&Ot.API.events.length?function(F,Q){var ge,Ce,Oe;for(Oe=Q.length-1;Oe!==-1;Oe--)ge=Q[Oe][0],Ce=Q[Oe][1],F.subscribe.apply(F,[ge].concat(typeof Ce=="function"?[Ce]:Ce))}(zt,Ot.API.events):m[Df]=Ot.API[Df]);var ru=m.getPageWidth=function(F){return(Yt[F=F||V].mediaBox.topRightX-Yt[F].mediaBox.bottomLeftX)/ct},jp=m.setPageWidth=function(F,Q){Yt[F].mediaBox.topRightX=Q*ct+Yt[F].mediaBox.bottomLeftX},Ac=m.getPageHeight=function(F){return(Yt[F=F||V].mediaBox.topRightY-Yt[F].mediaBox.bottomLeftY)/ct},wp=m.setPageHeight=function(F,Q){Yt[F].mediaBox.topRightY=Q*ct+Yt[F].mediaBox.bottomLeftY};return m.internal={pdfEscape:Ia,getStyle:t0,getFont:j2,getFontSize:nt,getCharSpace:S2,getTextColor:N2,getLineHeight:s0,getLineHeightFactor:i0,getLineWidth:_f,write:Se,getHorizontalCoordinate:Go,getVerticalCoordinate:_l,getCoordinateString:w2,getVerticalCoordinateString:Cc,collections:{},newObject:Qr,newAdditionalObject:Wo,newObjectDeferred:jn,newObjectDeferredBegin:Vs,getFilters:ei,putStream:ca,events:zt,scaleFactor:ct,pageSize:{getWidth:function(){return ru(V)},setWidth:function(F){jp(V,F)},getHeight:function(){return Ac(V)},setHeight:function(F){wp(V,F)}},encryptionOptions:f,encryption:qs,getEncryptor:p2,output:Pf,getNumberOfPages:d2,pages:ve,out:re,f2:O,f3:_,getPageInfo:e0,getPageInfoByObjId:Qt,getCurrentPageInfo:v2,getPDFVersion:g,Point:kf,Rectangle:yp,Matrix:Rt,hasHotfix:Zx},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ru(V)},set:function(F){jp(V,F)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ac(V)},set:function(F){wp(V,F)},enumerable:!0,configurable:!0}),l2.call(m,ye),Mt="F1",Xx(a,r),zt.publish("initialized"),m}dh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},dh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},dh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},dh.prototype.processOwnerPassword=function(e,t){return VC(UC(t).substr(0,5),e)},dh.prototype.encryptor=function(e,t){var r=UC(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return VC(r,s)}},_g.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Pr(e)!==Pr(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Ot.API={events:[]},Ot.version="2.5.2";var On=Ot.API,LP=1,xf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zt=function(e){return e.toFixed(2)},Uc=function(e){return e.toFixed(5)};On.__acroform__={};var Xa=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},cD=function(e){return e*LP},Jo=function(e){var t=new uz,r=Ct.internal.getHeight(e)||0,s=Ct.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Zt(s)),Number(Zt(r))],t},Jfe=On.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Zfe=On.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},ehe=On.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},qn=On.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ehe(e,t-1)},Hn=On.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Jfe(e,t-1)},Gn=On.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Zfe(e,t-1)},the=On.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=s(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=s(i)||0,[Number(Zt(c.lowerLeft_X)),Number(Zt(c.lowerLeft_Y)),Number(Zt(c.upperRight_X)),Number(Zt(c.upperRight_Y))]},rhe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=WC(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Zt(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Jo(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},WC=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(_){return _.split(`
`)}):a.map(function(_){return[_]});var i=r,o=Ct.internal.getHeight(e)||0;o=o<0?-o:o;var l=Ct.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(_,N,D){if(_+1<a.length){var I=N+" "+a[_+1][0];return xy(I,e,D).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,f,u=xy("3",e,i).height,h=e.multiline?o-i:(o-u)/2,m=h+=2,v=0,g=0,p=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+xy(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var x="",b=0,y=0;y<a.length;y++)if(a.hasOwnProperty(y)){var j=!1;if(a[y].length!==1&&p!==a[y].length-1){if((u+2)*(b+2)+2>o)continue e;x+=a[y][p],j=!0,g=y,y--}else{x=(x+=a[y][p]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var E=parseInt(y),A=c(E,x,i),C=y>=a.length-1;if(A&&!C){x+=" ",p=0;continue}if(A||C){if(C)g=E;else if(e.multiline&&(u+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(u+2)*(b+2)+2>o)continue e;g=E}}for(var S="",T=v;T<=g;T++){var O=a[T];if(e.multiline){if(T===g){S+=O[p]+" ",p=(p+1)%O.length;continue}if(T===v){S+=O[O.length-1]+" ";continue}}S+=O[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,f=xy(S,e,i).width,e.textAlign){case"right":d=l-f-2;break;case"center":d=(l-f)/2;break;case"left":default:d=2}t+=Zt(d)+" "+Zt(m)+` Td
`,t+="("+xf(S)+`) Tj
`,t+=-Zt(d)+` 0 Td
`,m=-(i+2),f=0,v=j?g:g+1,b++,x=""}break}return s.text=t,s.fontSize=i,s},xy=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},nhe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},she=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},ahe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var s=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),Pr(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[s]}},ihe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(zo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(nhe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");LP=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new fz,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];i.objId=void 0,i.hasAnnotation&&she(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,a){var i=!s;for(var o in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var l=s[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=the(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ct.createDefaultAppearanceStream(l),Pr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=rhe(l);c.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var u="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var v=m[o];typeof v=="function"&&(v=v.call(a,l)),u+="/"+o+" "+v+" ",a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v)}}else typeof(v=m)=="function"&&(v=v.call(a,l)),u+="/"+o+" "+v,a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v);u+=">>"}c.push({key:"AP",value:`<<
`+u+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&ahe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},dz=On.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Pr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),a+="("+xf(s(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},fS=function(e,t,r){var s=function(a){return a};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+xf(s(e))+")"},ll=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ll.prototype.toString=function(){return this.objId+" 0 R"},ll.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ll.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],a=this[s];a&&(Array.isArray(a)?e.push({key:s,value:dz(a,this.objId,this.scope)}):a instanceof ll?(a.scope=this.scope,e.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:s,value:a}))}return e};var uz=function(){ll.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Xa(uz,ll);var fz=function(){ll.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+xf(r(e))+")"}},set:function(r){e=r}})};Xa(fz,ll);var zo=function e(){ll.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qn(t,3)},set:function(x){x?this.F=Hn(t,3):this.F=Gn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(x){s=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(x){s[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(x){s[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(x){s[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(x){s[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof s1)return;i="FieldObject"+e.FieldNum++}var x=function(b){return b};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+xf(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/LP:d},set:function(x){d=x}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(x){f=x}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof s1||this instanceof Sd))return fS(u,this.objId,this.scope)},set:function(x){x=x.toString(),u=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ds?h:fS(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof ds?x:x.substr(0,1)==="("?Zf(x.substr(1,x.length-2)):Zf(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ds?Zf(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof ds?"/"+x:x}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ds?m:fS(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=this instanceof ds?x:x.substr(0,1)==="("?Zf(x.substr(1,x.length-2)):Zf(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ds?Zf(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof ds?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(x){x=!!x,g=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,1)},set:function(x){x?this.Ff=Hn(this.Ff,1):this.Ff=Gn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,2)},set:function(x){x?this.Ff=Hn(this.Ff,2):this.Ff=Gn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,3)},set:function(x){x?this.Ff=Hn(this.Ff,3):this.Ff=Gn(this.Ff,3)}});var p=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(p!==null)return p},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');p=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(p){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:p=2;break;case"center":case 1:p=1;break;case"left":case 0:default:p=0}}})};Xa(zo,ll);var zu=function(){zo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return dz(t,this.objId,this.scope)},set:function(r){var s,a;a=[],typeof(s=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(s,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,18)},set:function(r){r?this.Ff=Hn(this.Ff,18):this.Ff=Gn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Hn(this.Ff,19):this.Ff=Gn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,20)},set:function(r){r?(this.Ff=Hn(this.Ff,20),t.sort()):this.Ff=Gn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,22)},set:function(r){r?this.Ff=Hn(this.Ff,22):this.Ff=Gn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,23)},set:function(r){r?this.Ff=Hn(this.Ff,23):this.Ff=Gn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,27)},set:function(r){r?this.Ff=Hn(this.Ff,27):this.Ff=Gn(this.Ff,27)}}),this.hasAppearanceStream=!1};Xa(zu,zo);var Uu=function(){zu.call(this),this.fontName="helvetica",this.combo=!1};Xa(Uu,zu);var Vu=function(){Uu.call(this),this.combo=!0};Xa(Vu,Uu);var Mv=function(){Vu.call(this),this.edit=!0};Xa(Mv,Vu);var ds=function(){zo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,15)},set:function(r){r?this.Ff=Hn(this.Ff,15):this.Ff=Gn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,16)},set:function(r){r?this.Ff=Hn(this.Ff,16):this.Ff=Gn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,17)},set:function(r){r?this.Ff=Hn(this.Ff,17):this.Ff=Gn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,26)},set:function(r){r?this.Ff=Hn(this.Ff,26):this.Ff=Gn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,a=[];for(s in a.push("<<"),t)a.push("/"+s+" ("+xf(r(t[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Pr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Xa(ds,zo);var Bv=function(){ds.call(this),this.pushButton=!0};Xa(Bv,ds);var Wu=function(){ds.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Xa(Wu,ds);var s1=function(){var e,t;zo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),s)o.push("/"+i+" ("+xf(a(s[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Pr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xa(s1,zo),Wu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Wu.prototype.createOption=function(e){var t=new s1;return t.Parent=this,t.optionName=e,this.Kids.push(t),ohe.call(this.scope,t),t};var zv=function(){ds.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ct.CheckBox.createAppearanceStream()};Xa(zv,ds);var Sd=function(){zo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,13)},set:function(t){t?this.Ff=Hn(this.Ff,13):this.Ff=Gn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,21)},set:function(t){t?this.Ff=Hn(this.Ff,21):this.Ff=Gn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,23)},set:function(t){t?this.Ff=Hn(this.Ff,23):this.Ff=Gn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,24)},set:function(t){t?this.Ff=Hn(this.Ff,24):this.Ff=Gn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,25)},set:function(t){t?this.Ff=Hn(this.Ff,25):this.Ff=Gn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,26)},set:function(t){t?this.Ff=Hn(this.Ff,26):this.Ff=Gn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xa(Sd,zo);var Uv=function(){Sd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,14)},set:function(e){e?this.Ff=Hn(this.Ff,14):this.Ff=Gn(this.Ff,14)}}),this.password=!0};Xa(Uv,Sd);var Ct={CheckBox:{createAppearanceStream:function(){return{N:{On:Ct.CheckBox.YesNormal},D:{On:Ct.CheckBox.YesPushDown,Off:Ct.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Jo(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=WC(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Zt(Ct.internal.getWidth(e))+" "+Zt(Ct.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+Zt(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Jo(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=[],i=Ct.internal.getHeight(e),o=Ct.internal.getWidth(e),l=WC(e,e.caption);return a.push("1 g"),a.push("0 0 "+Zt(o)+" "+Zt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Zt(o-1)+" "+Zt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Zt(l.fontSize)+" Tf "+s),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Jo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Zt(Ct.internal.getWidth(e))+" "+Zt(Ct.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ct.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ct.RadioButton.Circle.YesNormal,t.D[e]=Ct.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Jo(e);t.scope=e.scope;var r=[],s=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Ct.internal.Bezier_C,i=Number((s*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Uc(Ct.internal.getWidth(e)/2)+" "+Uc(Ct.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Jo(e);t.scope=e.scope;var r=[],s=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*Ct.internal.Bezier_C).toFixed(5)),o=Number((s*Ct.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Uc(Ct.internal.getWidth(e)/2)+" "+Uc(Ct.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Uc(Ct.internal.getWidth(e)/2)+" "+Uc(Ct.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Jo(e);t.scope=e.scope;var r=[],s=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*Ct.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Uc(Ct.internal.getWidth(e)/2)+" "+Uc(Ct.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ct.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ct.RadioButton.Cross.YesNormal,t.D[e]=Ct.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Jo(e);t.scope=e.scope;var r=[],s=Ct.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Zt(Ct.internal.getWidth(e)-2)+" "+Zt(Ct.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Zt(s.x1.x)+" "+Zt(s.x1.y)+" m"),r.push(Zt(s.x2.x)+" "+Zt(s.x2.y)+" l"),r.push(Zt(s.x4.x)+" "+Zt(s.x4.y)+" m"),r.push(Zt(s.x3.x)+" "+Zt(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Jo(e);t.scope=e.scope;var r=Ct.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Zt(Ct.internal.getWidth(e))+" "+Zt(Ct.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Zt(Ct.internal.getWidth(e)-2)+" "+Zt(Ct.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Zt(r.x1.x)+" "+Zt(r.x1.y)+" m"),s.push(Zt(r.x2.x)+" "+Zt(r.x2.y)+" l"),s.push(Zt(r.x4.x)+" "+Zt(r.x4.y)+" m"),s.push(Zt(r.x3.x)+" "+Zt(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Jo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Zt(Ct.internal.getWidth(e))+" "+Zt(Ct.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ct.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ct.internal.getWidth(e),r=Ct.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},Ct.internal.getWidth=function(e){var t=0;return Pr(e)==="object"&&(t=cD(e.Rect[2])),t},Ct.internal.getHeight=function(e){var t=0;return Pr(e)==="object"&&(t=cD(e.Rect[3])),t};var ohe=On.addField=function(e){if(ihe(this,e),!(e instanceof zo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};On.AcroFormChoiceField=zu,On.AcroFormListBox=Uu,On.AcroFormComboBox=Vu,On.AcroFormEditBox=Mv,On.AcroFormButton=ds,On.AcroFormPushButton=Bv,On.AcroFormRadioButton=Wu,On.AcroFormCheckBox=zv,On.AcroFormTextField=Sd,On.AcroFormPasswordField=Uv,On.AcroFormAppearance=Ct,On.AcroForm={ChoiceField:zu,ListBox:Uu,ComboBox:Vu,EditBox:Mv,Button:ds,PushButton:Bv,RadioButton:Wu,CheckBox:zv,TextField:Sd,PasswordField:Uv,Appearance:Ct},Ot.AcroForm={ChoiceField:zu,ListBox:Uu,ComboBox:Vu,EditBox:Mv,Button:ds,PushButton:Bv,RadioButton:Wu,CheckBox:zv,TextField:Sd,PasswordField:Uv,Appearance:Ct};var lhe=Ot.AcroForm;function hz(e){return e.reduce(function(t,r,s){return t[r]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(_,N){var D,I,R,M,$,B=t;if((N=N||t)==="RGBA"||_.data!==void 0&&_.data instanceof Uint8ClampedArray&&"height"in _&&"width"in _)return"RGBA";if(A(_))for($ in r)for(R=r[$],D=0;D<R.length;D+=1){for(M=!0,I=0;I<R[D].length;I+=1)if(R[D][I]!==void 0&&R[D][I]!==_[I]){M=!1;break}if(M===!0){B=$;break}}else for($ in r)for(R=r[$],D=0;D<R.length;D+=1){for(M=!0,I=0;I<R[D].length;I+=1)if(R[D][I]!==void 0&&R[D][I]!==_.charCodeAt(I)){M=!1;break}if(M===!0){B=$;break}}return B===t&&N!==t&&(B=N),B},a=function _(N){for(var D=this.internal.write,I=this.internal.putStream,R=(0,this.internal.getFilters)();R.indexOf("FlateEncode")!==-1;)R.splice(R.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var M=[];if(M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Image"}),M.push({key:"Width",value:N.width}),M.push({key:"Height",value:N.height}),N.colorSpace===p.INDEXED?M.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(M.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===p.DEVICE_CMYK&&M.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),M.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&M.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var $="",B=0,U=N.transparency.length;B<U;B++)$+=N.transparency[B]+" "+N.transparency[B]+" ";M.push({key:"Mask",value:"["+$+"]"})}N.sMask!==void 0&&M.push({key:"SMask",value:N.objectId+1+" 0 R"});var q=N.filter!==void 0?["/"+N.filter]:void 0;if(I({data:N.data,additionalKeyValues:M,alreadyAppliedFilters:q,objectId:N.objectId}),D("endobj"),"sMask"in N&&N.sMask!==void 0){var W="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,L={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:W,data:N.sMask};"filter"in N&&(L.filter=N.filter),_.call(this,L)}if(N.colorSpace===p.INDEXED){var V=this.internal.newObject();I({data:S(new Uint8Array(N.palette)),objectId:V}),D("endobj")}},i=function(){var _=this.internal.collections.addImage_images;for(var N in _)a.call(this,_[N])},o=function(){var _,N=this.internal.collections.addImage_images,D=this.internal.write;for(var I in N)D("/I"+(_=N[I]).index,_.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var _=this.internal.collections.addImage_images;return l.call(this),_},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(_){return typeof e["process"+_.toUpperCase()]=="function"},u=function(_){return Pr(_)==="object"&&_.nodeType===1},h=function(_,N){if(_.nodeName==="IMG"&&_.hasAttribute("src")){var D=""+_.getAttribute("src");if(D.indexOf("data:image/")===0)return Fv(unescape(D).split("base64,").pop());var I=e.loadFile(D,!0);if(I!==void 0)return I}if(_.nodeName==="CANVAS"){if(_.width===0||_.height===0)throw new Error("Given canvas must have data. Canvas width: "+_.width+", height: "+_.height);var R;switch(N){case"PNG":R="image/png";break;case"WEBP":R="image/webp";break;case"JPEG":case"JPG":default:R="image/jpeg"}return Fv(_.toDataURL(R,1).split("base64,").pop())}},m=function(_){var N=this.internal.collections.addImage_images;if(N){for(var D in N)if(_===N[D].alias)return N[D]}},v=function(_,N,D){return _||N||(_=-96,N=-96),_<0&&(_=-1*D.width*72/_/this.internal.scaleFactor),N<0&&(N=-1*D.height*72/N/this.internal.scaleFactor),_===0&&(_=N*D.width/D.height),N===0&&(N=_*D.height/D.width),[_,N]},g=function(_,N,D,I,R,M){var $=v.call(this,D,I,R),B=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,q=c.call(this);if(D=$[0],I=$[1],q[R.index]=R,M){M*=Math.PI/180;var W=Math.cos(M),L=Math.sin(M),V=function(Z){return Z.toFixed(4)},G=[V(W),V(L),V(-1*L),V(W),0,0,"cm"]}this.internal.write("q"),M?(this.internal.write([1,"0","0",1,B(_),U(N+I),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([B(D),"0","0",B(I),"0","0","cm"].join(" "))):this.internal.write([B(D),"0","0",B(I),B(_),U(N+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+R.index+" Do"),this.internal.write("Q")},p=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(_){var N,D,I=0;if(typeof _=="string")for(D=_.length,N=0;N<D;N++)I=(I<<5)-I+_.charCodeAt(N),I|=0;else if(A(_))for(D=_.byteLength/2,N=0;N<D;N++)I=(I<<5)-I+_[N],I|=0;return I},y=e.__addimage__.validateStringAsBase64=function(_){(_=_||"").toString().trim();var N=!0;return _.length===0&&(N=!1),_.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(_.substr(0,_.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(_.substr(-2))===!1&&(N=!1),N},j=e.__addimage__.extractImageFromDataUrl=function(_){var N=(_=_||"").split("base64,"),D=null;if(N.length===2){var I=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray(I)&&(D={mimeType:I[1],charset:I[2],data:N[1]})}return D},E=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(_){return E()&&_ instanceof ArrayBuffer};var A=e.__addimage__.isArrayBufferView=function(_){return E()&&typeof Uint32Array<"u"&&(_ instanceof Int8Array||_ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array)},C=e.__addimage__.binaryStringToUint8Array=function(_){for(var N=_.length,D=new Uint8Array(N),I=0;I<N;I++)D[I]=_.charCodeAt(I);return D},S=e.__addimage__.arrayBufferToBinaryString=function(_){for(var N="",D=A(_)?_:new Uint8Array(_),I=0;I<D.length;I+=8192)N+=String.fromCharCode.apply(null,D.subarray(I,I+8192));return N};e.addImage=function(){var _,N,D,I,R,M,$,B,U;if(typeof arguments[1]=="number"?(N=t,D=arguments[1],I=arguments[2],R=arguments[3],M=arguments[4],$=arguments[5],B=arguments[6],U=arguments[7]):(N=arguments[1],D=arguments[2],I=arguments[3],R=arguments[4],M=arguments[5],$=arguments[6],B=arguments[7],U=arguments[8]),Pr(_=arguments[0])==="object"&&!u(_)&&"imageData"in _){var q=_;_=q.imageData,N=q.format||N||t,D=q.x||D||0,I=q.y||I||0,R=q.w||q.width||R,M=q.h||q.height||M,$=q.alias||$,B=q.compression||B,U=q.rotation||q.angle||U}var W=this.internal.getFilters();if(B===void 0&&W.indexOf("FlateEncode")!==-1&&(B="SLOW"),isNaN(D)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var L=T.call(this,_,N,$,B);return g.call(this,D,I,R,M,L,U),this};var T=function(_,N,D,I){var R,M,$;if(typeof _=="string"&&s(_)===t){_=unescape(_);var B=O(_,!1);(B!==""||(B=e.loadFile(_,!0))!==void 0)&&(_=B)}if(u(_)&&(_=h(_,N)),N=s(_,N),!f(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if((($=D)==null||$.length===0)&&(D=function(U){return typeof U=="string"||A(U)?b(U):A(U.data)?b(U.data):null}(_)),(R=m.call(this,D))||(E()&&(_ instanceof Uint8Array||N==="RGBA"||(M=_,_=C(_))),R=this["process"+N.toUpperCase()](_,d.call(this),D,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in e.image_compression?U:x.NONE}(I),M)),!R)throw new Error("An unknown error occurred whilst processing the image.");return R},O=e.__addimage__.convertBase64ToBinaryString=function(_,N){var D;N=typeof N!="boolean"||N;var I,R="";if(typeof _=="string"){I=(D=j(_))!==null?D.data:_;try{R=Fv(I)}catch(M){if(N)throw y(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+M.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return R};e.getImageProperties=function(_){var N,D,I="";if(u(_)&&(_=h(_)),typeof _=="string"&&s(_)===t&&((I=O(_,!1))===""&&(I=e.loadFile(_)||""),_=I),D=s(_),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(!E()||_ instanceof Uint8Array||(_=C(_)),!(N=this["process"+D.toUpperCase()](_)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=D,N}})(Ot.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ot.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,f=!1,u=0;u<d.length&&!f;u++)switch((s=d[u]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var h=0;h<d.length;h++){s=d[h];var m=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(g.objId),b=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y)+"] ")+"/Contents ("+m(x(s.contents))+")",i+=" /Popup "+p.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(x(b))+") >>",g.content=i;var y=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(s.bounds.x+30)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+l(s.bounds.y)+"] ")+" /Parent "+y,s.open&&(i+=" /Open true"),i+=" >>",p.content=i,this.internal.write(g.objId,"0 R",p.objId,"0 R");break;case"freetext":a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y+s.bounds.h)+"] ";var j=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(v(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var E=this.annotations._nameMap[s.options.name];s.options.pageNumber=E.page,s.options.top=E.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(v(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var A=l(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+A+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(s),w:c(r+a),h:d(s+i)},options:o,type:"link"})},e.textWithLink=function(r,s,a,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(d*f)}else l=c,o=d;return this.text(r,s,a,i),a+=.2*d,i.align==="center"&&(s-=c/2),i.align==="right"&&(s-=c),this.link(s,a-d,l,o,i),c},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Ot.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},u=e.__arabicParser__.resolveLigatures=function(g){var p=0,x=r,b="",y=0;for(p=0;p<g.length;p+=1)x[g.charCodeAt(p)]!==void 0?(y++,typeof(x=x[g.charCodeAt(p)])=="number"&&(b+=String.fromCharCode(x),x=r,y=0),p===g.length-1&&(x=r,b+=g.charAt(p-(y-1)),p-=y-1,y=0)):(x=r,b+=g.charAt(p-y),p-=y,y=0);return b};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&s[g.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(g,p,x){return o(g)?i(g)===!1?-1:!d(g)||!o(p)&&!o(x)||!o(x)&&l(p)||l(g)&&!o(p)||l(g)&&c(p)||l(g)&&l(p)?0:f(g)&&o(p)&&!l(p)&&o(x)&&d(x)?3:l(g)||!o(x)?1:2:-1},m=function(g){var p=0,x=0,b=0,y="",j="",E="",A=(g=g||"").split("\\s+"),C=[];for(p=0;p<A.length;p+=1){for(C.push(""),x=0;x<A[p].length;x+=1)y=A[p][x],j=A[p][x-1],E=A[p][x+1],o(y)?(b=h(y,j,E),C[p]+=b!==-1?String.fromCharCode(t[y.charCodeAt(0)][b]):y):C[p]+=y;C[p]=u(C[p])}return C.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var g,p=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(p)){var b=0;for(x=[],b=0;b<p.length;b+=1)Array.isArray(p[b])?x.push([m(p[b][0]),p[b][1],p[b][2]]):x.push([m(p[b])]);g=x}else g=m(p);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",v])}(Ot.API),Ot.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var a;if((r=r||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ot.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(g){v=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){s.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),h=d.scaleFactor||this.internal.scaleFactor,m=0,v=0,g=0,p=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=d.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(y,j){return y.concat(p.splitTextToSize(j,x))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)m<(g=this.getStringUnitWidth(c[b],{font:u})*f)&&(m=g);return m!==0&&(v=c.length),{w:m/=h,h:Math.max((v*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,u=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=u.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,f,u,h){if(s.call(this),!f)throw new Error("No data for PDF table.");var m,v,g,p,x=[],b=[],y=[],j={},E={},A=[],C=[],S=(h=h||{}).autoSize||!1,T=h.printHeaders!==!1,O=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,_=h.margins||Object.assign({width:this.getPageWidth()},t),N=typeof h.padding=="number"?h.padding:3,D=h.headerBackgroundColor||"#c8c8c8",I=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=_,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=I,this.setFontSize(O),u==null)b=x=Object.keys(f[0]),y=x.map(function(){return"left"});else if(Array.isArray(u)&&Pr(u[0])==="object")for(x=u.map(function(q){return q.name}),b=u.map(function(q){return q.prompt||q.name||""}),y=u.map(function(q){return q.align||"left"}),m=0;m<u.length;m+=1)E[u[m].name]=u[m].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(b=x=u,y=x.map(function(){return"left"}));if(S||Array.isArray(u)&&typeof u[0]=="string")for(m=0;m<x.length;m+=1){for(j[p=x[m]]=f.map(function(q){return q[p]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(b[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=j[p],this.setFont(void 0,"normal"),g=0;g<v.length;g+=1)A.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[p]=Math.max.apply(null,A)+N+N,A=[]}if(T){var R={};for(m=0;m<x.length;m+=1)R[x[m]]={},R[x[m]].text=b[m],R[x[m]].align=y[m];var M=l.call(this,R,E);C=x.map(function(q){return new i(c,d,E[q],M,R[q].text,void 0,R[q].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var $=u.reduce(function(q,W){return q[W.name]=W.align,q},{});for(m=0;m<f.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:f[m]},this);var B=l.call(this,f[m],E);for(g=0;g<x.length;g+=1){var U=f[m][x[g]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:g,data:U},this),o.call(this,new i(c,d,E[x[g]],B,U,m+2,$[x[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var f=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var v=c[m];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*u/h+f+f},this).reduce(function(m,v){return Math.max(m,v)},0)};e.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,h.push(f)),f.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(v)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Ot.API);var mz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},pz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],qC=hz(pz),vz=[100,200,300,400,500,600,700,800,900],che=hz(vz);function HC(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return mz[i=i||"normal"]?i:"normal"}(e.style),s=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof qC[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:s,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,s].join(" ")}}}function dD(e,t,r,s){var a;for(a=r;a>=0&&a<t.length;a+=s)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=s)if(e[t[a]])return e[t[a]]}var dhe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fD(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function uhe(e,t,r){for(var s=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},dhe,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=HC(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[s]))throw new Error("Could not find a font-family for the rule '"+fD(i)+"' and default family '"+s+"'.");if(o=function(c,d){if(d[c])return d[c];var f=qC[c],u=f<=qC.normal?-1:1,h=dD(d,pz,f,u);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var f=mz[c],u=0;u<f.length;++u)if(d[f[u]])return d[f[u]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var f=che[c],u=dD(d,vz,f,c<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+c);return u}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+fD(i)+"'.");return o}function hD(e){return e.trimLeft()}function fhe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function hhe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var yy,mD,pD,hS=["times"];(function(e){var t,r,s,a,i,o,l,c,d,f=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new f}]);var u=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=L;Object.defineProperty(this,"pdf",{get:function(){return V}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(le){G=!!le}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(le){Z=!!le}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(le){isNaN(le)||(ee=le)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(le){isNaN(le)||(he=le)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(le){var re;typeof le=="number"?re=[le,le,le,le]:((re=new Array(4))[0]=le[0],re[1]=le.length>=2?le[1]:re[0],re[2]=le.length>=3?le[2]:re[0],re[3]=le.length>=4?le[3]:re[1]),d.margin=re}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(le){me=le}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(le){oe=le}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(le){we=le}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(le){le instanceof f&&(d=le)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(le){d.path=le}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(le){ve=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var re;re=h(le),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var re=h(le);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var pe=null;function De(le,re){if(pe===null){var Se=function(Ne){var ye=[];return Object.keys(Ne).forEach(function($e){Ne[$e].forEach(function(rt){var nt=null;switch(rt){case"bold":nt={family:$e,weight:"bold"};break;case"italic":nt={family:$e,style:"italic"};break;case"bolditalic":nt={family:$e,weight:"bold",style:"italic"};break;case"":case"normal":nt={family:$e}}nt!==null&&(nt.ref={name:$e,style:rt},ye.push(nt))})}),ye}(le.getFontList());pe=function(Ne){for(var ye={},$e=0;$e<Ne.length;++$e){var rt=HC(Ne[$e]),nt=rt.family,vt=rt.stretch,Me=rt.style,Je=rt.weight;ye[nt]=ye[nt]||{},ye[nt][vt]=ye[nt][vt]||{},ye[nt][vt][Me]=ye[nt][vt][Me]||{},ye[nt][vt][Me][Je]=rt}return ye}(Se.concat(re))}return pe}var xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return xe},set:function(le){pe=null,xe=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var re;if(this.ctx.font=le,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(le))!==null){var Se=re[1],Ne=(re[2],re[3]),ye=re[4],$e=(re[5],re[6]),rt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(rt==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:rt==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var nt=function(Pt){var Mt,ct,hr=[],Gt=Pt.trim();if(Gt==="")return hS;if(Gt in uD)return[uD[Gt]];for(;Gt!=="";){switch(ct=null,Mt=(Gt=hD(Gt)).charAt(0)){case'"':case"'":ct=fhe(Gt.substring(1),Mt);break;default:ct=hhe(Gt)}if(ct===null||(hr.push(ct[0]),(Gt=hD(ct[1]))!==""&&Gt.charAt(0)!==","))return hS;Gt=Gt.replace(/^,/,"")}return hr}($e);if(this.fontFaces){var vt=uhe(De(this.pdf,this.fontFaces),nt.map(function(Pt){return{family:Pt,stretch:"normal",weight:Ne,style:Se}}));this.pdf.setFont(vt.ref.name,vt.ref.style)}else{var Me="";(Ne==="bold"||parseInt(Ne,10)>=700||Se==="bold")&&(Me="bold"),Se==="italic"&&(Me+="italic"),Me.length===0&&(Me="normal");for(var Je="",dt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xt=0;xt<nt.length;xt++){if(this.pdf.internal.getFont(nt[xt],Me,{noFallback:!0,disableWarning:!0})!==void 0){Je=nt[xt];break}if(Me==="bolditalic"&&this.pdf.internal.getFont(nt[xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Je=nt[xt],Me="bold";else if(this.pdf.internal.getFont(nt[xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Je=nt[xt],Me="normal";break}}if(Je===""){for(var kt=0;kt<nt.length;kt++)if(dt[nt[kt]]){Je=dt[nt[kt]];break}}Je=Je===""?"Times":Je,this.pdf.setFont(Je,Me)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,W.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,W.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};u.prototype.setLineDash=function(L){this.lineDash=L},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){j.call(this,"fill",!1)},u.prototype.stroke=function(){j.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(L,V){if(isNaN(L)||isNaN(V))throw Hr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(L,V));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(L,V)},u.prototype.closePath=function(){var L=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&Pr(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){L=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},u.prototype.lineTo=function(L,V){if(isNaN(L)||isNaN(V))throw Hr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(L,V));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},u.prototype.quadraticCurveTo=function(L,V,G,Z){if(isNaN(G)||isNaN(Z)||isNaN(L)||isNaN(V))throw Hr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new o(G,Z)),he=this.ctx.transform.applyToPoint(new o(L,V));this.path.push({type:"qct",x1:he.x,y1:he.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},u.prototype.bezierCurveTo=function(L,V,G,Z,ee,he){if(isNaN(ee)||isNaN(he)||isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Hr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(ee,he)),oe=this.ctx.transform.applyToPoint(new o(L,V)),we=this.ctx.transform.applyToPoint(new o(G,Z));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:we.x,y2:we.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},u.prototype.arc=function(L,V,G,Z,ee,he){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z)||isNaN(ee))throw Hr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(L,V));L=me.x,V=me.y;var oe=this.ctx.transform.applyToPoint(new o(0,G)),we=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(oe.x-we.x,2)+Math.pow(oe.y-we.y,2))}Math.abs(ee-Z)>=2*Math.PI&&(Z=0,ee=2*Math.PI),this.path.push({type:"arc",x:L,y:V,radius:G,startAngle:Z,endAngle:ee,counterclockwise:he})},u.prototype.arcTo=function(L,V,G,Z,ee){throw new Error("arcTo not implemented.")},u.prototype.rect=function(L,V,G,Z){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Hr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,V),this.lineTo(L+G,V),this.lineTo(L+G,V+Z),this.lineTo(L,V+Z),this.lineTo(L,V),this.lineTo(L+G,V),this.lineTo(L,V)},u.prototype.fillRect=function(L,V,G,Z){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Hr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,V,G,Z),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},u.prototype.strokeRect=function(L,V,G,Z){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Hr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(L,V,G,Z),this.stroke())},u.prototype.clearRect=function(L,V,G,Z){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z))throw Hr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,V,G,Z))},u.prototype.save=function(L){L=typeof L!="boolean"||L;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},u.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(V),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var V,G,Z,ee;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))V=0,G=0,Z=0,ee=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(he!==null)V=parseInt(he[1]),G=parseInt(he[2]),Z=parseInt(he[3]),ee=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)V=parseInt(he[1]),G=parseInt(he[2]),Z=parseInt(he[3]),ee=parseFloat(he[4]);else{if(ee=1,typeof L=="string"&&L.charAt(0)!=="#"){var me=new oz(L);L=me.ok?me.toHex():"#000000"}L.length===4?(V=L.substring(1,2),V+=V,G=L.substring(2,3),G+=G,Z=L.substring(3,4),Z+=Z):(V=L.substring(1,3),G=L.substring(3,5),Z=L.substring(5,7)),V=parseInt(V,16),G=parseInt(G,16),Z=parseInt(Z,16)}}return{r:V,g:G,b:Z,a:ee,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(L,V,G,Z){if(isNaN(V)||isNaN(G)||typeof L!="string")throw Hr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!m.call(this)){var ee=B(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;N.call(this,{text:L,x:V,y:G,scale:he,angle:ee,align:this.textAlign,maxWidth:Z})}},u.prototype.strokeText=function(L,V,G,Z){if(isNaN(V)||isNaN(G)||typeof L!="string")throw Hr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){Z=isNaN(Z)?void 0:Z;var ee=B(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;N.call(this,{text:L,x:V,y:G,scale:he,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:Z})}},u.prototype.measureText=function(L){if(typeof L!="string")throw Hr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,G=this.pdf.internal.scaleFactor,Z=V.internal.getFontSize(),ee=V.getStringUnitWidth(L)*Z/V.internal.scaleFactor,he=function(me){var oe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new he({width:ee*=Math.round(96*G/72*1e4)/1e4})},u.prototype.scale=function(L,V){if(isNaN(L)||isNaN(V))throw Hr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(L,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},u.prototype.rotate=function(L){if(isNaN(L))throw Hr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},u.prototype.translate=function(L,V){if(isNaN(L)||isNaN(V))throw Hr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,L,V);this.ctx.transform=this.ctx.transform.multiply(G)},u.prototype.transform=function(L,V,G,Z,ee,he){if(isNaN(L)||isNaN(V)||isNaN(G)||isNaN(Z)||isNaN(ee)||isNaN(he))throw Hr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(L,V,G,Z,ee,he);this.ctx.transform=this.ctx.transform.multiply(me)},u.prototype.setTransform=function(L,V,G,Z,ee,he){L=isNaN(L)?1:L,V=isNaN(V)?0:V,G=isNaN(G)?0:G,Z=isNaN(Z)?1:Z,ee=isNaN(ee)?0:ee,he=isNaN(he)?0:he,this.ctx.transform=new c(L,V,G,Z,ee,he)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(L,V,G,Z,ee,he,me,oe,we){var ve=this.pdf.getImageProperties(L),pe=1,De=1,xe=1,le=1;Z!==void 0&&oe!==void 0&&(xe=oe/Z,le=we/ee,pe=ve.width/Z*oe/Z,De=ve.height/ee*we/ee),he===void 0&&(he=V,me=G,V=0,G=0),Z!==void 0&&oe===void 0&&(oe=Z,we=ee),Z===void 0&&oe===void 0&&(oe=ve.width,we=ve.height);for(var re,Se=this.ctx.transform.decompose(),Ne=B(Se.rotate.shx),ye=new c,$e=(ye=(ye=(ye=ye.multiply(Se.translate)).multiply(Se.skew)).multiply(Se.scale)).applyToRectangle(new l(he-V*xe,me-G*le,Z*pe,ee*De)),rt=p.call(this,$e),nt=[],vt=0;vt<rt.length;vt+=1)nt.indexOf(rt[vt])===-1&&nt.push(rt[vt]);if(y(nt),this.autoPaging)for(var Me=nt[0],Je=nt[nt.length-1],dt=Me;dt<Je+1;dt++){this.pdf.setPage(dt);var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=dt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=dt===1?0:Pt+(dt-2)*Mt;if(this.ctx.clip_path.length!==0){var hr=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(re,this.posX+this.margin[3],-ct+kt+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=hr}var Gt=JSON.parse(JSON.stringify($e));Gt=b([Gt],this.posX+this.margin[3],-ct+kt+this.ctx.prevPageLastElemOffset)[0];var Dr=(dt>Me||dt<Je)&&g.call(this);Dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,Mt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,Ne),Dr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,Ne)};var p=function(L,V,G){var Z=[];V=V||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":Z.push(Math.floor((L.y+ee)/G)+1);break;case"arc":Z.push(Math.floor((L.y+ee-L.radius)/G)+1),Z.push(Math.floor((L.y+ee+L.radius)/G)+1);break;case"qct":var he=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);Z.push(Math.floor((he.y+ee)/G)+1),Z.push(Math.floor((he.y+he.h+ee)/G)+1);break;case"bct":var me=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);Z.push(Math.floor((me.y+ee)/G)+1),Z.push(Math.floor((me.y+me.h+ee)/G)+1);break;case"rect":Z.push(Math.floor((L.y+ee)/G)+1),Z.push(Math.floor((L.y+L.h+ee)/G)+1)}for(var oe=0;oe<Z.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<Z[oe];)x.call(this);return Z},x=function(){var L=this.fillStyle,V=this.strokeStyle,G=this.font,Z=this.lineCap,ee=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=V,this.font=G,this.lineCap=Z,this.lineWidth=ee,this.lineJoin=he},b=function(L,V,G){for(var Z=0;Z<L.length;Z++)switch(L[Z].type){case"bct":L[Z].x2+=V,L[Z].y2+=G;case"qct":L[Z].x1+=V,L[Z].y1+=G;case"mt":case"lt":case"arc":default:L[Z].x+=V,L[Z].y+=G}return L},y=function(L){return L.sort(function(V,G){return V-G})},j=function(L,V){for(var G,Z,ee=this.fillStyle,he=this.strokeStyle,me=this.lineCap,oe=this.lineWidth,we=Math.abs(oe*this.ctx.transform.scaleX),ve=this.lineJoin,pe=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),xe=[],le=0;le<De.length;le++)if(De[le].x!==void 0)for(var re=p.call(this,De[le]),Se=0;Se<re.length;Se+=1)xe.indexOf(re[Se])===-1&&xe.push(re[Se]);for(var Ne=0;Ne<xe.length;Ne++)for(;this.pdf.internal.getNumberOfPages()<xe[Ne];)x.call(this);if(y(xe),this.autoPaging)for(var ye=xe[0],$e=xe[xe.length-1],rt=ye;rt<$e+1;rt++){this.pdf.setPage(rt),this.fillStyle=ee,this.strokeStyle=he,this.lineCap=me,this.lineWidth=we,this.lineJoin=ve;var nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=rt===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=rt===1?0:Me+(rt-2)*Je;if(this.ctx.clip_path.length!==0){var xt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(G,this.posX+this.margin[3],-dt+vt+this.ctx.prevPageLastElemOffset),E.call(this,L,!0),this.path=xt}if(Z=JSON.parse(JSON.stringify(pe)),this.path=b(Z,this.posX+this.margin[3],-dt+vt+this.ctx.prevPageLastElemOffset),V===!1||rt===0){var kt=(rt>ye||rt<$e)&&g.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,Je,null).clip().discardPath()),E.call(this,L,V),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=we,E.call(this,L,V),this.lineWidth=oe;this.path=pe},E=function(L,V){if((L!=="stroke"||V||!v.call(this))&&(L==="stroke"||V||!m.call(this))){for(var G,Z,ee=[],he=this.path,me=0;me<he.length;me++){var oe=he[me];switch(oe.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:oe,deltas:[],abs:[]});break;case"lt":var we=ee.length;if(he[me-1]&&!isNaN(he[me-1].x)&&(G=[oe.x-he[me-1].x,oe.y-he[me-1].y],we>0)){for(;we>=0;we--)if(ee[we-1].close!==!0&&ee[we-1].begin!==!0){ee[we-1].deltas.push(G),ee[we-1].abs.push(oe);break}}break;case"bct":G=[oe.x1-he[me-1].x,oe.y1-he[me-1].y,oe.x2-he[me-1].x,oe.y2-he[me-1].y,oe.x-he[me-1].x,oe.y-he[me-1].y],ee[ee.length-1].deltas.push(G);break;case"qct":var ve=he[me-1].x+2/3*(oe.x1-he[me-1].x),pe=he[me-1].y+2/3*(oe.y1-he[me-1].y),De=oe.x+2/3*(oe.x1-oe.x),xe=oe.y+2/3*(oe.y1-oe.y),le=oe.x,re=oe.y;G=[ve-he[me-1].x,pe-he[me-1].y,De-he[me-1].x,xe-he[me-1].y,le-he[me-1].x,re-he[me-1].y],ee[ee.length-1].deltas.push(G);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(oe)}}Z=V?null:L==="stroke"?"stroke":"fill";for(var Se=!1,Ne=0;Ne<ee.length;Ne++)if(ee[Ne].arc)for(var ye=ee[Ne].abs,$e=0;$e<ye.length;$e++){var rt=ye[$e];rt.type==="arc"?S.call(this,rt.x,rt.y,rt.radius,rt.startAngle,rt.endAngle,rt.counterclockwise,void 0,V,!Se):D.call(this,rt.x,rt.y),Se=!0}else if(ee[Ne].close===!0)this.pdf.internal.out("h"),Se=!1;else if(ee[Ne].begin!==!0){var nt=ee[Ne].start.x,vt=ee[Ne].start.y;I.call(this,ee[Ne].deltas,nt,vt),Se=!0}Z&&T.call(this,Z),V&&O.call(this)}},A=function(L){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-G;case"top":return L+V-G;case"hanging":return L+V-2*G;case"middle":return L+V/2-G;case"ideographic":return L;case"alphabetic":default:return L}},C=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(V,G){this.colorStops.push([V,G])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(L,V,G,Z,ee,he,me,oe,we){for(var ve=M.call(this,G,Z,ee,he),pe=0;pe<ve.length;pe++){var De=ve[pe];pe===0&&(we?_.call(this,De.x1+L,De.y1+V):D.call(this,De.x1+L,De.y1+V)),R.call(this,L,V,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}oe?O.call(this):T.call(this,me)},T=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},_=function(L,V){this.pdf.internal.out(r(L)+" "+s(V)+" m")},N=function(L){var V;switch(L.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var G=this.pdf.getTextDimensions(L.text),Z=A.call(this,L.y),ee=C.call(this,Z)-G.h,he=this.ctx.transform.applyToPoint(new o(L.x,Z)),me=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var we,ve,pe,De=this.ctx.transform.applyToRectangle(new l(L.x,Z,G.w,G.h)),xe=oe.applyToRectangle(new l(L.x,ee,G.w,G.h)),le=p.call(this,xe),re=[],Se=0;Se<le.length;Se+=1)re.indexOf(le[Se])===-1&&re.push(le[Se]);if(y(re),this.autoPaging)for(var Ne=re[0],ye=re[re.length-1],$e=Ne;$e<ye+1;$e++){this.pdf.setPage($e);var rt=$e===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[2],Me=vt-this.margin[0],Je=this.pdf.internal.pageSize.width-this.margin[1],dt=Je-this.margin[3],xt=$e===1?0:nt+($e-2)*Me;if(this.ctx.clip_path.length!==0){var kt=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(we,this.posX+this.margin[3],-1*xt+rt),E.call(this,"fill",!0),this.path=kt}var Pt=b([JSON.parse(JSON.stringify(xe))],this.posX+this.margin[3],-xt+rt+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*L.scale),pe=this.lineWidth,this.lineWidth=pe*L.scale);var Mt=this.autoPaging!=="text";if(Mt||Pt.y+Pt.h<=vt){if(Mt||Pt.y>=rt&&Pt.x<=Je){var ct=Mt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Je-Pt.x)[0],hr=b([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-xt+rt+this.ctx.prevPageLastElemOffset)[0],Gt=Mt&&($e>Ne||$e<ye)&&g.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Me,null).clip().discardPath()),this.pdf.text(ct,hr.x,hr.y,{angle:L.angle,align:V,renderingMode:L.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else Pt.y<vt&&(this.ctx.prevPageLastElemOffset+=vt-Pt.y);L.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=pe)}else L.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*L.scale),pe=this.lineWidth,this.lineWidth=pe*L.scale),this.pdf.text(L.text,he.x+this.posX,he.y+this.posY,{angle:L.angle,align:V,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=pe)},D=function(L,V,G,Z){G=G||0,Z=Z||0,this.pdf.internal.out(r(L+G)+" "+s(V+Z)+" l")},I=function(L,V,G){return this.pdf.lines(L,V,G,null,null)},R=function(L,V,G,Z,ee,he,me,oe){this.pdf.internal.out([t(a(G+L)),t(i(Z+V)),t(a(ee+L)),t(i(he+V)),t(a(me+L)),t(i(oe+V)),"c"].join(" "))},M=function(L,V,G,Z){for(var ee=2*Math.PI,he=Math.PI/2;V>G;)V-=ee;var me=Math.abs(G-V);me<ee&&Z&&(me=ee-me);for(var oe=[],we=Z?-1:1,ve=V;me>1e-5;){var pe=ve+we*Math.min(me,he);oe.push($.call(this,L,ve,pe)),me-=Math.abs(pe-ve),ve=pe}return oe},$=function(L,V,G){var Z=(G-V)/2,ee=L*Math.cos(Z),he=L*Math.sin(Z),me=ee,oe=-he,we=me*me+oe*oe,ve=we+me*ee+oe*he,pe=4/3*(Math.sqrt(2*we*ve)-ve)/(me*he-oe*ee),De=me-pe*oe,xe=oe+pe*me,le=De,re=-xe,Se=Z+V,Ne=Math.cos(Se),ye=Math.sin(Se);return{x1:L*Math.cos(V),y1:L*Math.sin(V),x2:De*Ne-xe*ye,y2:De*ye+xe*Ne,x3:le*Ne-re*ye,y3:le*ye+re*Ne,x4:L*Math.cos(G),y4:L*Math.sin(G)}},B=function(L){return 180*L/Math.PI},U=function(L,V,G,Z,ee,he){var me=L+.5*(G-L),oe=V+.5*(Z-V),we=ee+.5*(G-ee),ve=he+.5*(Z-he),pe=Math.min(L,ee,me,we),De=Math.max(L,ee,me,we),xe=Math.min(V,he,oe,ve),le=Math.max(V,he,oe,ve);return new l(pe,xe,De-pe,le-xe)},q=function(L,V,G,Z,ee,he,me,oe){var we,ve,pe,De,xe,le,re,Se,Ne,ye,$e,rt,nt,vt,Me=G-L,Je=Z-V,dt=ee-G,xt=he-Z,kt=me-ee,Pt=oe-he;for(ve=0;ve<41;ve++)Ne=(re=(pe=L+(we=ve/40)*Me)+we*((xe=G+we*dt)-pe))+we*(xe+we*(ee+we*kt-xe)-re),ye=(Se=(De=V+we*Je)+we*((le=Z+we*xt)-De))+we*(le+we*(he+we*Pt-le)-Se),ve==0?($e=Ne,rt=ye,nt=Ne,vt=ye):($e=Math.min($e,Ne),rt=Math.min(rt,ye),nt=Math.max(nt,Ne),vt=Math.max(vt,ye));return new l(Math.round($e),Math.round(rt),Math.round(nt-$e),Math.round(vt-rt))},W=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,V,G=(L=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:V}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Ot.API),function(e){var t=function(i){var o,l,c,d,f,u,h,m,v,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(f=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(u=(f=((f=((f=((f=(f-(g=f%85))/85)-(v=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,l.push(u+33,h+33,m+33,v+33,g+33)):l.push(122);return function(p,x){for(var b=x;b>0;b--)p.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,f,u=String,h="length",m=255,v="charCodeAt",g="slice",p="replace";for(i[g](-2),i=i[g](0,-2)[p](/\s/g,"")[p]("z","!!!!!"),c=[],d=0,f=(i+=o="uuuuu"[g](i[h]%5||5))[h];f>d;d+=5)l=52200625*(i[v](d)-33)+614125*(i[v](d+1)-33)+7225*(i[v](d+2)-33)+85*(i[v](d+3)-33)+(i[v](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(x,b){for(var y=b;y>0;y--)x.pop()}(c,o[h]),u.fromCharCode.apply(u,c)},s=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=BC(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Ot.API),function(e){e.loadFile=function(t,r,s){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,f){var u=new XMLHttpRequest,h=0,m=function(v){var g=v.length,p=[],x=String.fromCharCode;for(h=0;h<g;h+=1)p.push(x(255&v.charCodeAt(h)));return p.join("")};if(u.open("GET",c,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?f(m(this.responseText)):f(void 0)}),u.send(null),d&&u.status===200)return m(u.responseText)}(a,i,o)}catch{}return l}(t,r,s)},e.loadImageFile=e.loadFile}(Ot.API),function(e){function t(){return(Wt.html2canvas?Promise.resolve(Wt.html2canvas):Od(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Wt.DOMPurify?Promise.resolve(Wt.DOMPurify):Od(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var s=function(o){var l=Pr(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(s(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,f){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)f!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(c(h,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],v=m.src.find(function(g){return g.format==="truetype"});v&&c.addFont(v.url,m.ref.name,m.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,c.context2d.save(!0),l(this.prop.container,u)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(s(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||Ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,f){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return c.updateProgress(null,d),u}).then(d,f).then(function(u){return c.updateProgress(1),u})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=c.call(d,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ot.getPageSize=function(o,l,c){if(Pr(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,u=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var m,v=0,g=0;if(h.hasOwnProperty(u))v=h[u][1]/f,g=h[u][0]/f;else try{v=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>v&&(m=g,g=v,v=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>g&&(m=g,g=v,v=m)}return{width:g,height:v,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(HC):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(Ot.API),Ot.API.addJS=function(e){return pD=e,this.internal.events.subscribe("postPutResources",function(){yy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),mD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+pD+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){yy!==void 0&&mD!==void 0&&this.internal.out("/Names <</JavaScript "+yy+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=s.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(i=0;i<d;i++){var u=r.internal.newObject();f.push(u);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,a,i){var o={title:a,options:i,children:[]};return s==null&&(s=this.root),s.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var o=s.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,a){for(var i=0;i<a.children.length;i++)s.count++,this.count_r(s,a.children[i]);return s.count}}])}(Ot.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,a,i,o,l){var c,d=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(u){for(var h,m=256*u.charCodeAt(4)+u.charCodeAt(5),v=u.length,g={width:0,height:0,numcomponents:1},p=4;p<v;p+=2){if(p+=m,t.indexOf(u.charCodeAt(p+1))!==-1){h=256*u.charCodeAt(p+5)+u.charCodeAt(p+6),g={width:256*u.charCodeAt(p+7)+u.charCodeAt(p+8),height:h,numcomponents:u.charCodeAt(p+9)};break}m=256*u.charCodeAt(p+2)+u.charCodeAt(p+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:s,alias:a}}return f}}(Ot.API);var eh,by,vD,gD,xD,mhe=function(){var e,t,r;function s(i){var o,l,c,d,f,u,h,m,v,g,p,x,b,y;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(o=this.readUInt32(),v=(function(){var j,E;for(E=[],j=0;j<4;++j)E.push(String.fromCharCode(this.data[this.pos++]));return E}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*f/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),i=(u!=null?u.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(b=0;0<=g?b<g:b>g;0<=g?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(p=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,p.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,p.slice(h+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(y=this.colorType)===4||y===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(u,h,m,v){var g,p,x,b,y,j,E,A,C,S,T,O,_,N,D,I,R,M,$,B,U,q=Math.ceil((d.width-u)/m),W=Math.ceil((d.height-h)/v),L=d.width==q&&d.height==W;for(N=o*q,O=L?l:new Uint8Array(N*W),j=i.length,_=0,p=0;_<W&&c<j;){switch(i[c++]){case 0:for(b=R=0;R<N;b=R+=1)O[p++]=i[c++];break;case 1:for(b=M=0;M<N;b=M+=1)g=i[c++],y=b<o?0:O[p-o],O[p++]=(g+y)%256;break;case 2:for(b=$=0;$<N;b=$+=1)g=i[c++],x=(b-b%o)/o,D=_&&O[(_-1)*N+x*o+b%o],O[p++]=(D+g)%256;break;case 3:for(b=B=0;B<N;b=B+=1)g=i[c++],x=(b-b%o)/o,y=b<o?0:O[p-o],D=_&&O[(_-1)*N+x*o+b%o],O[p++]=(g+Math.floor((y+D)/2))%256;break;case 4:for(b=U=0;U<N;b=U+=1)g=i[c++],x=(b-b%o)/o,y=b<o?0:O[p-o],_===0?D=I=0:(D=O[(_-1)*N+x*o+b%o],I=x&&O[(_-1)*N+(x-1)*o+b%o]),E=y+D-I,A=Math.abs(E-y),S=Math.abs(E-D),T=Math.abs(E-I),C=A<=S&&A<=T?y:S<=T?D:I,O[p++]=(g+C)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!L){var V=((h+_*v)*d.width+u)*o,G=_*N;for(b=0;b<q;b+=1){for(var Z=0;Z<o;Z+=1)l[V++]=O[G++];V+=(m-1)*o}}_++}}return i=qfe(i),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},s.prototype.decodePalette=function(){var i,o,l,c,d,f,u,h,m;for(l=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+l.length),c=0,i=0,o=u=0,h=l.length;u<h;o=u+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=f[i++])!=null?m:255;return d},s.prototype.copyToImageData=function(i,o){var l,c,d,f,u,h,m,v,g,p,x;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),c=4,l=!0),v=(d=i.data||i).length,u=g||o,f=h=0,c===1)for(;f<v;)m=g?4*o[f/4]:h,p=u[m++],d[f++]=p,d[f++]=p,d[f++]=p,d[f++]=l?u[m++]:255,h=m;else for(;f<v;)m=g?4*o[f/4]:h,d[f++]=u[m++],d[f++]=u[m++],d[f++]=u[m++],d[f++]=l?u[m++]:255,h=m},s.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Wt)==="[object Window]"){try{t=Wt.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(i){var o,l,c,d,f,u,h,m;if(this.animation){for(m=[],l=f=0,u=(h=this.animation.frames).length;f<u;l=++f)o=h[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=e(c));return m}},s.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},s.prototype.animate=function(i){var o,l,c,d,f,u,h=this;return l=0,u=this.animation,d=u.numFrames,c=u.frames,f=u.numPlays,(o=function(){var m,v;if(m=l++%d,v=c[m],h.renderFrame(i,m),d>1&&l/d<f)return h.animation._timeout=setTimeout(o,v.delay)})()},s.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},s.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function phe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,f=[],u=0,h=null,m=0,v=null;for(this.width=r,this.height=s;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],!(1&g)&&(h=null),m=g>>2&7,t++;break;case 254:for(;;){if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var p=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,j=e[t++],E=j>>6&1,A=1<<(7&j)+1,C=l,S=c,T=!1;j>>7&&(T=!0,C=t,S=A,t+=3*A);var O=t;for(t++;;){var _;if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}f.push({x:p,y:x,width:b,height:y,has_local_palette:T,palette_offset:C,palette_size:S,data_offset:O,data_length:t-O,transparent_index:h,interlaced:!!E,delay:u,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return v},this.frameInfo=function(N){if(N<0||N>=f.length)throw new Error("Frame index out of range.");return f[N]},this.decodeAndBlitFrameBGRA=function(N,D){var I=this.frameInfo(N),R=I.width*I.height,M=new Uint8Array(R);yD(e,I.data_offset,M,R);var $=I.palette_offset,B=I.transparent_index;B===null&&(B=256);var U=I.width,q=r-U,W=U,L=4*(I.y*r+I.x),V=4*((I.y+I.height)*r+I.x),G=L,Z=4*q;I.interlaced===!0&&(Z+=4*r*7);for(var ee=8,he=0,me=M.length;he<me;++he){var oe=M[he];if(W===0&&(W=U,(G+=Z)>=V&&(Z=4*q+4*r*(ee-1),G=L+(U+q)*(ee<<1),ee>>=1)),oe===B)G+=4;else{var we=e[$+3*oe],ve=e[$+3*oe+1],pe=e[$+3*oe+2];D[G++]=pe,D[G++]=ve,D[G++]=we,D[G++]=255}--W}},this.decodeAndBlitFrameRGBA=function(N,D){var I=this.frameInfo(N),R=I.width*I.height,M=new Uint8Array(R);yD(e,I.data_offset,M,R);var $=I.palette_offset,B=I.transparent_index;B===null&&(B=256);var U=I.width,q=r-U,W=U,L=4*(I.y*r+I.x),V=4*((I.y+I.height)*r+I.x),G=L,Z=4*q;I.interlaced===!0&&(Z+=4*r*7);for(var ee=8,he=0,me=M.length;he<me;++he){var oe=M[he];if(W===0&&(W=U,(G+=Z)>=V&&(Z=4*q+4*r*(ee-1),G=L+(U+q)*(ee<<1),ee>>=1)),oe===B)G+=4;else{var we=e[$+3*oe],ve=e[$+3*oe+1],pe=e[$+3*oe+2];D[G++]=we,D[G++]=ve,D[G++]=pe,D[G++]=255}--W}}}function yD(e,t,r,s){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,f=0,u=0,h=0,m=e[t++],v=new Int32Array(4096),g=null;;){for(;f<16&&m!==0;)u|=e[t++]<<f,f+=8,m===1?m=e[t++]:--m;if(f<c)break;var p=u&d;if(u>>=c,f-=c,p!==i){if(p===o)break;for(var x=p<l?p:g,b=0,y=x;y>i;)y=v[y]>>8,++b;var j=y;if(h+b+(x!==p?1:0)>s)return void Hr.log("Warning, gif stream longer than expected.");r[h++]=j;var E=h+=b;for(x!==p&&(r[h++]=j),y=x;b--;)y=v[y],r[--E]=255&y,y>>=8;g!==null&&l<4096&&(v[l++]=g<<8|j,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=p}else l=o+1,d=(1<<(c=a+1))-1,g=null}return h!==s&&Hr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function mS(e){var t,r,s,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),f=new Array(64),u=new Array(65535),h=new Array(65535),m=new Array(64),v=new Array(64),g=[],p=0,x=7,b=new Array(64),y=new Array(64),j=new Array(64),E=new Array(256),A=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(L,V){for(var G=0,Z=0,ee=new Array,he=1;he<=16;he++){for(var me=1;me<=L[he];me++)ee[V[Z]]=[],ee[V[Z]][0]=G,ee[V[Z]][1]=he,Z++,G++;G*=2}return ee}function $(L){for(var V=L[0],G=L[1]-1;G>=0;)V&1<<G&&(p|=1<<x),G--,--x<0&&(p==255?(B(255),B(0)):B(p),x=7,p=0)}function B(L){g.push(L)}function U(L){B(L>>8&255),B(255&L)}function q(L,V,G,Z,ee){for(var he,me=ee[0],oe=ee[240],we=function(ye,$e){var rt,nt,vt,Me,Je,dt,xt,kt,Pt,Mt,ct=0;for(Pt=0;Pt<8;++Pt){rt=ye[ct],nt=ye[ct+1],vt=ye[ct+2],Me=ye[ct+3],Je=ye[ct+4],dt=ye[ct+5],xt=ye[ct+6];var hr=rt+(kt=ye[ct+7]),Gt=rt-kt,Dr=nt+xt,lr=nt-xt,Er=vt+dt,ps=vt-dt,mr=Me+Je,Ca=Me-Je,Wr=hr+mr,Ja=hr-mr,la=Dr+Er,vn=Dr-Er;ye[ct]=Wr+la,ye[ct+4]=Wr-la;var Yt=.707106781*(vn+Ja);ye[ct+2]=Ja+Yt,ye[ct+6]=Ja-Yt;var zt=.382683433*((Wr=Ca+ps)-(vn=lr+Gt)),Aa=.5411961*Wr+zt,ss=1.306562965*vn+zt,Za=.707106781*(la=ps+lr),Ea=Gt+Za,Rt=Gt-Za;ye[ct+5]=Rt+Aa,ye[ct+3]=Rt-Aa,ye[ct+1]=Ea+ss,ye[ct+7]=Ea-ss,ct+=8}for(ct=0,Pt=0;Pt<8;++Pt){rt=ye[ct],nt=ye[ct+8],vt=ye[ct+16],Me=ye[ct+24],Je=ye[ct+32],dt=ye[ct+40],xt=ye[ct+48];var Pa=rt+(kt=ye[ct+56]),Si=rt-kt,ln=nt+xt,Qr=nt-xt,jn=vt+dt,Vs=vt-dt,Wo=Me+Je,Ci=Me-Je,Mn=Pa+Wo,Ta=Pa-Wo,_a=ln+jn,ei=ln-jn;ye[ct]=Mn+_a,ye[ct+32]=Mn-_a;var ca=.707106781*(ei+Ta);ye[ct+16]=Ta+ca,ye[ct+48]=Ta-ca;var Ai=.382683433*((Mn=Ci+Vs)-(ei=Qr+Si)),At=.5411961*Mn+Ai,Te=1.306562965*ei+Ai,at=.707106781*(_a=Vs+Qr),jt=Si+at,_r=Si-at;ye[ct+40]=_r+At,ye[ct+24]=_r-At,ye[ct+8]=jt+Te,ye[ct+56]=jt-Te,ct++}for(Pt=0;Pt<64;++Pt)Mt=ye[Pt]*$e[Pt],m[Pt]=Mt>0?Mt+.5|0:Mt-.5|0;return m}(L,V),ve=0;ve<64;++ve)v[C[ve]]=we[ve];var pe=v[0]-G;G=v[0],pe==0?$(Z[0]):($(Z[h[he=32767+pe]]),$(u[he]));for(var De=63;De>0&&v[De]==0;)De--;if(De==0)return $(me),G;for(var xe,le=1;le<=De;){for(var re=le;v[le]==0&&le<=De;)++le;var Se=le-re;if(Se>=16){xe=Se>>4;for(var Ne=1;Ne<=xe;++Ne)$(oe);Se&=15}he=32767+v[le],$(ee[(Se<<4)+h[he]]),$(u[he]),le++}return De!=63&&$(me),G}function W(L){L=Math.min(Math.max(L,1),100),i!=L&&(function(V){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ee=o((G[Z]*V+50)/100);ee=Math.min(Math.max(ee,1),255),l[C[Z]]=ee}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var oe=o((he[me]*V+50)/100);oe=Math.min(Math.max(oe,1),255),c[C[me]]=oe}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,pe=0;pe<8;pe++)for(var De=0;De<8;De++)d[ve]=1/(l[C[ve]]*we[pe]*we[De]*8),f[ve]=1/(c[C[ve]]*we[pe]*we[De]*8),ve++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,V){V&&W(V),g=new Array,p=0,x=7,U(65496),U(65504),U(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),U(1),U(1),B(0),B(0),function(){U(65499),U(132),B(0);for(var nt=0;nt<64;nt++)B(l[nt]);B(1);for(var vt=0;vt<64;vt++)B(c[vt])}(),function(nt,vt){U(65472),U(17),B(8),U(vt),U(nt),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(L.width,L.height),function(){U(65476),U(418),B(0);for(var nt=0;nt<16;nt++)B(S[nt+1]);for(var vt=0;vt<=11;vt++)B(T[vt]);B(16);for(var Me=0;Me<16;Me++)B(O[Me+1]);for(var Je=0;Je<=161;Je++)B(_[Je]);B(1);for(var dt=0;dt<16;dt++)B(N[dt+1]);for(var xt=0;xt<=11;xt++)B(D[xt]);B(17);for(var kt=0;kt<16;kt++)B(I[kt+1]);for(var Pt=0;Pt<=161;Pt++)B(R[Pt])}(),U(65498),U(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var G=0,Z=0,ee=0;p=0,x=7,this.encode.displayName="_encode_";for(var he,me,oe,we,ve,pe,De,xe,le,re=L.data,Se=L.width,Ne=L.height,ye=4*Se,$e=0;$e<Ne;){for(he=0;he<ye;){for(ve=ye*$e+he,De=-1,xe=0,le=0;le<64;le++)pe=ve+(xe=le>>3)*ye+(De=4*(7&le)),$e+xe>=Ne&&(pe-=ye*($e+1+xe-Ne)),he+De>=ye&&(pe-=he+De-ye+4),me=re[pe++],oe=re[pe++],we=re[pe++],b[le]=(A[me]+A[oe+256>>0]+A[we+512>>0]>>16)-128,y[le]=(A[me+768>>0]+A[oe+1024>>0]+A[we+1280>>0]>>16)-128,j[le]=(A[me+1280>>0]+A[oe+1536>>0]+A[we+1792>>0]>>16)-128;G=q(b,d,G,t,s),Z=q(y,f,Z,r,a),ee=q(j,f,ee,r,a),he+=32}$e+=8}if(x>=0){var rt=[];rt[1]=x+1,rt[0]=(1<<x+1)-1,$(rt)}return U(65497),new Uint8Array(g)},e=e||50,function(){for(var L=String.fromCharCode,V=0;V<256;V++)E[V]=L(V)}(),t=M(S,T),r=M(N,D),s=M(O,_),a=M(I,R),function(){for(var L=1,V=2,G=1;G<=15;G++){for(var Z=L;Z<V;Z++)h[32767+Z]=G,u[32767+Z]=[],u[32767+Z][1]=G,u[32767+Z][0]=Z;for(var ee=-(V-1);ee<=-L;ee++)h[32767+ee]=G,u[32767+ee]=[],u[32767+ee][1]=G,u[32767+ee][0]=V-1+ee;L<<=1,V<<=1}}(),function(){for(var L=0;L<256;L++)A[L]=19595*L,A[L+256>>0]=38470*L,A[L+512>>0]=7471*L+32768,A[L+768>>0]=-11059*L,A[L+1024>>0]=-21709*L,A[L+1280>>0]=32768*L+8421375,A[L+1536>>0]=-27439*L,A[L+1792>>0]=-5329*L}(),W(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function mo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bD(e){function t(S){if(!S)throw Error("assert :P")}function r(S,T,O){for(var _=0;4>_;_++)if(S[T+_]!=O.charCodeAt(_))return!0;return!1}function s(S,T,O,_,N){for(var D=0;D<N;D++)S[T+D]=O[_+D]}function a(S,T,O,_){for(var N=0;N<_;N++)S[T+N]=O}function i(S){return new Int32Array(S)}function o(S,T){for(var O=[],_=0;_<S;_++)O.push(new T);return O}function l(S,T){var O=[];return function _(N,D,I){for(var R=I[D],M=0;M<R&&(N.push(I.length>D+1?[]:new T),!(I.length<D+1));M++)_(N[M],D+1,I)}(O,0,S),O}var c=function(){var S=this;function T(P,k){for(var z=1<<k-1>>>0;P&z;)z>>>=1;return z?(P&z-1)+z:P}function O(P,k,z,H,Y){t(!(H%z));do P[k+(H-=z)]=Y;while(0<H)}function _(P,k,z,H,Y){if(t(2328>=Y),512>=Y)var te=i(512);else if((te=i(Y))==null)return 0;return function(ne,se,ie,de,Ae,Le){var Re,ke,Qe=se,ze=1<<ie,Ee=i(16),_e=i(16);for(t(Ae!=0),t(de!=null),t(ne!=null),t(0<ie),ke=0;ke<Ae;++ke){if(15<de[ke])return 0;++Ee[de[ke]]}if(Ee[0]==Ae)return 0;for(_e[1]=0,Re=1;15>Re;++Re){if(Ee[Re]>1<<Re)return 0;_e[Re+1]=_e[Re]+Ee[Re]}for(ke=0;ke<Ae;++ke)Re=de[ke],0<de[ke]&&(Le[_e[Re]++]=ke);if(_e[15]==1)return(de=new N).g=0,de.value=Le[0],O(ne,Qe,1,ze,de),ze;var Ye,et=-1,Xe=ze-1,yt=0,mt=1,Ft=1,pt=1<<ie;for(ke=0,Re=1,Ae=2;Re<=ie;++Re,Ae<<=1){if(mt+=Ft<<=1,0>(Ft-=Ee[Re]))return 0;for(;0<Ee[Re];--Ee[Re])(de=new N).g=Re,de.value=Le[ke++],O(ne,Qe+yt,Ae,pt,de),yt=T(yt,Re)}for(Re=ie+1,Ae=2;15>=Re;++Re,Ae<<=1){if(mt+=Ft<<=1,0>(Ft-=Ee[Re]))return 0;for(;0<Ee[Re];--Ee[Re]){if(de=new N,(yt&Xe)!=et){for(Qe+=pt,Ye=1<<(et=Re)-ie;15>et&&!(0>=(Ye-=Ee[et]));)++et,Ye<<=1;ze+=pt=1<<(Ye=et-ie),ne[se+(et=yt&Xe)].g=Ye+ie,ne[se+et].value=Qe-se-et}de.g=Re-ie,de.value=Le[ke++],O(ne,Qe+(yt>>ie),Ae,pt,de),yt=T(yt,Re)}}return mt!=2*_e[15]-1?0:ze}(P,k,z,H,Y,te)}function N(){this.value=this.g=0}function D(){this.value=this.g=0}function I(){this.G=o(5,N),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(_s,D)}function R(P,k,z,H){t(P!=null),t(k!=null),t(2147483648>H),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=k,P.pa=z,P.Jd=k,P.Yc=z+H,P.Zc=4<=H?z+H-4+1:z,he(P)}function M(P,k){for(var z=0;0<k--;)z|=oe(P,128)<<k;return z}function $(P,k){var z=M(P,k);return me(P)?-z:z}function B(P,k,z,H){var Y,te=0;for(t(P!=null),t(k!=null),t(4294967288>H),P.Sb=H,P.Ra=0,P.u=0,P.h=0,4<H&&(H=4),Y=0;Y<H;++Y)te+=k[z+Y]<<8*Y;P.Ra=te,P.bb=H,P.oa=k,P.pa=z}function U(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<Ff-8>>>0,++P.bb,P.u-=8;G(P)&&(P.h=1,P.u=0)}function q(P,k){if(t(0<=k),!P.h&&k<=$f){var z=V(P)&Rf[k];return P.u+=k,U(P),z}return P.h=1,P.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(P){return P.Ra>>>(P.u&Ff-1)>>>0}function G(P){return t(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>Ff}function Z(P,k){P.u=k,P.h=G(P)}function ee(P){P.u>=Ep&&(t(P.u>=Ep),U(P))}function he(P){t(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(t(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function me(P){return M(P,1)}function oe(P,k){var z=P.Ca;0>P.b&&he(P);var H=P.b,Y=z*k>>>8,te=(P.I>>>H>Y)+0;for(te?(z-=Y,P.I-=Y+1<<H>>>0):z=Y+1,H=z,Y=0;256<=H;)Y+=8,H>>=8;return H=7^Y+ka[H],P.b-=H,P.Ca=(z<<H)-1,te}function we(P,k,z){P[k+0]=z>>24&255,P[k+1]=z>>16&255,P[k+2]=z>>8&255,P[k+3]=z>>0&255}function ve(P,k){return P[k+0]<<0|P[k+1]<<8}function pe(P,k){return ve(P,k)|P[k+2]<<16}function De(P,k){return ve(P,k)|ve(P,k+2)<<16}function xe(P,k){var z=1<<k;return t(P!=null),t(0<k),P.X=i(z),P.X==null?0:(P.Mb=32-k,P.Xa=k,1)}function le(P,k){t(P!=null),t(k!=null),t(P.Xa==k.Xa),s(k.X,0,P.X,0,1<<k.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function Se(P,k,z,H){t(z!=null),t(H!=null);var Y=z[0],te=H[0];return Y==0&&(Y=(P*te+k/2)/k),te==0&&(te=(k*Y+P/2)/P),0>=Y||0>=te?0:(z[0]=Y,H[0]=te,1)}function Ne(P,k){return P+(1<<k)-1>>>k}function ye(P,k){return((4278255360&P)+(4278255360&k)>>>0&4278255360)+((16711935&P)+(16711935&k)>>>0&16711935)>>>0}function $e(P,k){S[k]=function(z,H,Y,te,ne,se,ie){var de;for(de=0;de<ne;++de){var Ae=S[P](se[ie+de-1],Y,te+de);se[ie+de]=ye(z[H+de],Ae)}}}function rt(){this.ud=this.hd=this.jd=0}function nt(P,k){return((4278124286&(P^k))>>>1)+(P&k)>>>0}function vt(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function Me(P,k){return vt(P+(P-k+.5>>1))}function Je(P,k,z){return Math.abs(k-z)-Math.abs(P-z)}function dt(P,k,z,H,Y,te,ne){for(H=te[ne-1],z=0;z<Y;++z)te[ne+z]=H=ye(P[k+z],H)}function xt(P,k,z,H,Y){var te;for(te=0;te<z;++te){var ne=P[k+te],se=ne>>8&255,ie=16711935&(ie=(ie=16711935&ne)+((se<<16)+se));H[Y+te]=(4278255360&ne)+ie>>>0}}function kt(P,k){k.jd=P>>0&255,k.hd=P>>8&255,k.ud=P>>16&255}function Pt(P,k,z,H,Y,te){var ne;for(ne=0;ne<H;++ne){var se=k[z+ne],ie=se>>>8,de=se,Ae=255&(Ae=(Ae=se>>>16)+((P.jd<<24>>24)*(ie<<24>>24)>>>5));de=255&(de=(de=de+((P.hd<<24>>24)*(ie<<24>>24)>>>5))+((P.ud<<24>>24)*(Ae<<24>>24)>>>5)),Y[te+ne]=(4278255360&se)+(Ae<<16)+de}}function Mt(P,k,z,H,Y){S[k]=function(te,ne,se,ie,de,Ae,Le,Re,ke){for(ie=Le;ie<Re;++ie)for(Le=0;Le<ke;++Le)de[Ae++]=Y(se[H(te[ne++])])},S[P]=function(te,ne,se,ie,de,Ae,Le){var Re=8>>te.b,ke=te.Ea,Qe=te.K[0],ze=te.w;if(8>Re)for(te=(1<<te.b)-1,ze=(1<<Re)-1;ne<se;++ne){var Ee,_e=0;for(Ee=0;Ee<ke;++Ee)Ee&te||(_e=H(ie[de++])),Ae[Le++]=Y(Qe[_e&ze]),_e>>=Re}else S["VP8LMapColor"+z](ie,de,Qe,ze,Ae,Le,ne,se,ke)}}function ct(P,k,z,H,Y){for(z=k+z;k<z;){var te=P[k++];H[Y++]=te>>16&255,H[Y++]=te>>8&255,H[Y++]=te>>0&255}}function hr(P,k,z,H,Y){for(z=k+z;k<z;){var te=P[k++];H[Y++]=te>>16&255,H[Y++]=te>>8&255,H[Y++]=te>>0&255,H[Y++]=te>>24&255}}function Gt(P,k,z,H,Y){for(z=k+z;k<z;){var te=(ne=P[k++])>>16&240|ne>>12&15,ne=ne>>0&240|ne>>28&15;H[Y++]=te,H[Y++]=ne}}function Dr(P,k,z,H,Y){for(z=k+z;k<z;){var te=(ne=P[k++])>>16&248|ne>>13&7,ne=ne>>5&224|ne>>3&31;H[Y++]=te,H[Y++]=ne}}function lr(P,k,z,H,Y){for(z=k+z;k<z;){var te=P[k++];H[Y++]=te>>0&255,H[Y++]=te>>8&255,H[Y++]=te>>16&255}}function Er(P,k,z,H,Y,te){if(te==0)for(z=k+z;k<z;)we(H,((te=P[k++])[0]>>24|te[1]>>8&65280|te[2]<<8&16711680|te[3]<<24)>>>0),Y+=32;else s(H,Y,P,k,z)}function ps(P,k){S[k][0]=S[P+"0"],S[k][1]=S[P+"1"],S[k][2]=S[P+"2"],S[k][3]=S[P+"3"],S[k][4]=S[P+"4"],S[k][5]=S[P+"5"],S[k][6]=S[P+"6"],S[k][7]=S[P+"7"],S[k][8]=S[P+"8"],S[k][9]=S[P+"9"],S[k][10]=S[P+"10"],S[k][11]=S[P+"11"],S[k][12]=S[P+"12"],S[k][13]=S[P+"13"],S[k][14]=S[P+"0"],S[k][15]=S[P+"0"]}function mr(P){return P==T2||P==_2||P==b0||P==I2}function Ca(){this.eb=[],this.size=this.A=this.fb=0}function Wr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ja(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ca,this.f.kb=new Wr,this.sd=null}function la(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Yt(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function zt(P,k){var z=P.T,H=k.ba.f.RGBA,Y=H.eb,te=H.fb+P.ka*H.A,ne=ki[k.ba.S],se=P.y,ie=P.O,de=P.f,Ae=P.N,Le=P.ea,Re=P.W,ke=k.cc,Qe=k.dc,ze=k.Mc,Ee=k.Nc,_e=P.ka,Ye=P.ka+P.T,et=P.U,Xe=et+1>>1;for(_e==0?ne(se,ie,null,null,de,Ae,Le,Re,de,Ae,Le,Re,Y,te,null,null,et):(ne(k.ec,k.fc,se,ie,ke,Qe,ze,Ee,de,Ae,Le,Re,Y,te-H.A,Y,te,et),++z);_e+2<Ye;_e+=2)ke=de,Qe=Ae,ze=Le,Ee=Re,Ae+=P.Rc,Re+=P.Rc,te+=2*H.A,ne(se,(ie+=2*P.fa)-P.fa,se,ie,ke,Qe,ze,Ee,de,Ae,Le,Re,Y,te-H.A,Y,te,et);return ie+=P.fa,P.j+Ye<P.o?(s(k.ec,k.fc,se,ie,et),s(k.cc,k.dc,de,Ae,Xe),s(k.Mc,k.Nc,Le,Re,Xe),z--):1&Ye||ne(se,ie,null,null,de,Ae,Le,Re,de,Ae,Le,Re,Y,te+H.A,null,null,et),z}function Aa(P,k,z){var H=P.F,Y=[P.J];if(H!=null){var te=P.U,ne=k.ba.S,se=ne==y0||ne==b0;k=k.ba.f.RGBA;var ie=[0],de=P.ka;ie[0]=P.T,P.Kb&&(de==0?--ie[0]:(--de,Y[0]-=P.width),P.j+P.ka+P.T==P.o&&(ie[0]=P.o-P.j-de));var Ae=k.eb;de=k.fb+de*k.A,P=Zr(H,Y[0],P.width,te,ie,Ae,de+(se?0:3),k.A),t(z==ie),P&&mr(ne)&&_i(Ae,de,se,te,ie,k.A)}return 0}function ss(P){var k=P.ma,z=k.ba.S,H=11>z,Y=z==g0||z==x0||z==y0||z==P2||z==12||mr(z);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!Cp(k.Oa,P,Y?11:12))return 0;if(Y&&mr(z)&&st(),P.da)alert("todo:use_scaling");else{if(H){if(k.Ib=Yt,P.Kb){if(z=P.U+1>>1,k.memory=i(P.U+2*z),k.memory==null)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+P.U,k.Mc=k.cc,k.Nc=k.dc+z,k.Ib=zt,st()}}else alert("todo:EmitYUV");Y&&(k.Jb=Aa,H&&Oe())}if(H&&!a3){for(P=0;256>P;++P)qq[P]=89858*(P-128)+w0>>j0,Kq[P]=-22014*(P-128)+w0,Gq[P]=-45773*(P-128),Hq[P]=113618*(P-128)+w0>>j0;for(P=Op;P<O2;++P)k=76283*(P-16)+w0>>j0,Yq[P-Op]=ti(k,255),Xq[P-Op]=ti(k+8>>4,15);a3=1}return 1}function Za(P){var k=P.ma,z=P.U,H=P.T;return t(!(1&P.ka)),0>=z||0>=H?0:(z=k.Ib(P,k),k.Jb!=null&&k.Jb(P,k,z),k.Dc+=z,1)}function Ea(P){P.ma.memory=null}function Rt(P,k,z,H){return q(P,8)!=47?0:(k[0]=q(P,14)+1,z[0]=q(P,14)+1,H[0]=q(P,1),q(P,3)!=0?0:!P.h)}function Pa(P,k){if(4>P)return P+1;var z=P-2>>1;return(2+(1&P)<<z)+q(k,z)+1}function Si(P,k){return 120<k?k-120:1<=(z=((z=Iq[k-1])>>4)*P+(8-(15&z)))?z:1;var z}function ln(P,k,z){var H=V(z),Y=P[k+=255&H].g-8;return 0<Y&&(Z(z,z.u+8),H=V(z),k+=P[k].value,k+=H&(1<<Y)-1),Z(z,z.u+P[k].g),P[k].value}function Qr(P,k,z){return z.g+=P.g,z.value+=P.value<<k>>>0,t(8>=z.g),P.g}function jn(P,k,z){var H=P.xc;return t((k=H==0?0:P.vc[P.md*(z>>H)+(k>>H)])<P.Wb),P.Ya[k]}function Vs(P,k,z,H){var Y=P.ab,te=P.c*k,ne=P.C;k=ne+k;var se=z,ie=H;for(H=P.Ta,z=P.Ua;0<Y--;){var de=P.gc[Y],Ae=ne,Le=k,Re=se,ke=ie,Qe=(ie=H,se=z,de.Ea);switch(t(Ae<Le),t(Le<=de.nc),de.hc){case 2:d0(Re,ke,(Le-Ae)*Qe,ie,se);break;case 0:var ze=Ae,Ee=Le,_e=ie,Ye=se,et=(pt=de).Ea;ze==0&&(A2(Re,ke,null,null,1,_e,Ye),dt(Re,ke+1,0,0,et-1,_e,Ye+1),ke+=et,Ye+=et,++ze);for(var Xe=1<<pt.b,yt=Xe-1,mt=Ne(et,pt.b),Ft=pt.K,pt=pt.w+(ze>>pt.b)*mt;ze<Ee;){var Ir=Ft,Or=pt,wr=1;for(Pp(Re,ke,_e,Ye-et,1,_e,Ye);wr<et;){var pr=(wr&~yt)+Xe;pr>et&&(pr=et),(0,Ec[Ir[Or++]>>8&15])(Re,ke+ +wr,_e,Ye+wr-et,pr-wr,_e,Ye+wr),wr=pr}ke+=et,Ye+=et,++ze&yt||(pt+=mt)}Le!=de.nc&&s(ie,se-Qe,ie,se+(Le-Ae-1)*Qe,Qe);break;case 1:for(Qe=Re,Ee=ke,et=(Re=de.Ea)-(Ye=Re&~(_e=(ke=1<<de.b)-1)),ze=Ne(Re,de.b),Xe=de.K,de=de.w+(Ae>>de.b)*ze;Ae<Le;){for(yt=Xe,mt=de,Ft=new rt,pt=Ee+Ye,Ir=Ee+Re;Ee<pt;)kt(yt[mt++],Ft),nu(Ft,Qe,Ee,ke,ie,se),Ee+=ke,se+=ke;Ee<Ir&&(kt(yt[mt++],Ft),nu(Ft,Qe,Ee,et,ie,se),Ee+=et,se+=et),++Ae&_e||(de+=ze)}break;case 3:if(Re==ie&&ke==se&&0<de.b){for(Ee=ie,Re=Qe=se+(Le-Ae)*Qe-(Ye=(Le-Ae)*Ne(de.Ea,de.b)),ke=ie,_e=se,ze=[],Ye=(et=Ye)-1;0<=Ye;--Ye)ze[Ye]=ke[_e+Ye];for(Ye=et-1;0<=Ye;--Ye)Ee[Re+Ye]=ze[Ye];Ei(de,Ae,Le,ie,Qe,ie,se)}else Ei(de,Ae,Le,Re,ke,ie,se)}se=H,ie=z}ie!=z&&s(H,z,se,ie,te)}function Wo(P,k){var z=P.V,H=P.Ba+P.c*P.C,Y=k-P.C;if(t(k<=P.l.o),t(16>=Y),0<Y){var te=P.l,ne=P.Ta,se=P.Ua,ie=te.width;if(Vs(P,Y,z,H),Y=se=[se],t((z=P.C)<(H=k)),t(te.v<te.va),H>te.o&&(H=te.o),z<te.j){var de=te.j-z;z=te.j,Y[0]+=de*ie}if(z>=H?z=0:(Y[0]+=4*te.v,te.ka=z-te.j,te.U=te.va-te.v,te.T=H-z,z=1),z){if(se=se[0],11>(z=P.ca).S){var Ae=z.f.RGBA,Le=(H=z.S,Y=te.U,te=te.T,de=Ae.eb,Ae.A),Re=te;for(Ae=Ae.fb+P.Ma*Ae.A;0<Re--;){var ke=ne,Qe=se,ze=Y,Ee=de,_e=Ae;switch(H){case v0:Da(ke,Qe,ze,Ee,_e);break;case g0:da(ke,Qe,ze,Ee,_e);break;case T2:da(ke,Qe,ze,Ee,_e),_i(Ee,_e,0,ze,1,0);break;case YT:kl(ke,Qe,ze,Ee,_e);break;case x0:Er(ke,Qe,ze,Ee,_e,1);break;case _2:Er(ke,Qe,ze,Ee,_e,1),_i(Ee,_e,0,ze,1,0);break;case y0:Er(ke,Qe,ze,Ee,_e,0);break;case b0:Er(ke,Qe,ze,Ee,_e,0),_i(Ee,_e,1,ze,1,0);break;case P2:Pc(ke,Qe,ze,Ee,_e);break;case I2:Pc(ke,Qe,ze,Ee,_e),Jr(Ee,_e,ze,1,0);break;case XT:Il(ke,Qe,ze,Ee,_e);break;default:t(0)}se+=ie,Ae+=Le}P.Ma+=te}else alert("todo:EmitRescaledRowsYUVA");t(P.Ma<=z.height)}}P.C=k,t(P.C<=P.i)}function Ci(P){var k;if(0<P.ua)return 0;for(k=0;k<P.Wb;++k){var z=P.Ya[k].G,H=P.Ya[k].H;if(0<z[1][H[1]+0].g||0<z[2][H[2]+0].g||0<z[3][H[3]+0].g)return 0}return 1}function Mn(P,k,z,H,Y,te){if(P.Z!=0){var ne=P.qd,se=P.rd;for(t(kc[P.Z]!=null);k<z;++k)kc[P.Z](ne,se,H,Y,H,Y,te),ne=H,se=Y,Y+=te;P.qd=ne,P.rd=se}}function Ta(P,k){var z=P.l.ma,H=z.Z==0||z.Z==1?P.l.j:P.C;if(H=P.C<H?H:P.C,t(k<=P.l.o),k>H){var Y=P.l.width,te=z.ca,ne=z.tb+Y*H,se=P.V,ie=P.Ba+P.c*H,de=P.gc;t(P.ab==1),t(de[0].hc==3),u0(de[0],H,k,se,ie,te,ne),Mn(z,H,k,te,ne,Y)}P.C=P.Ma=k}function _a(P,k,z,H,Y,te,ne){var se=P.$/H,ie=P.$%H,de=P.m,Ae=P.s,Le=z+P.$,Re=Le;Y=z+H*Y;var ke=z+H*te,Qe=280+Ae.ua,ze=P.Pb?se:16777216,Ee=0<Ae.ua?Ae.Wa:null,_e=Ae.wc,Ye=Le<ke?jn(Ae,ie,se):null;t(P.C<te),t(ke<=Y);var et=!1;e:for(;;){for(;et||Le<ke;){var Xe=0;if(se>=ze){var yt=Le-z;t((ze=P).Pb),ze.wd=ze.m,ze.xd=yt,0<ze.s.ua&&le(ze.s.Wa,ze.s.vb),ze=se+Dq}if(ie&_e||(Ye=jn(Ae,ie,se)),t(Ye!=null),Ye.Qb&&(k[Le]=Ye.qb,et=!0),!et)if(ee(de),Ye.jc){Xe=de,yt=k;var mt=Le,Ft=Ye.pd[V(Xe)&_s-1];t(Ye.jc),256>Ft.g?(Z(Xe,Xe.u+Ft.g),yt[mt]=Ft.value,Xe=0):(Z(Xe,Xe.u+Ft.g-256),t(256<=Ft.value),Xe=Ft.value),Xe==0&&(et=!0)}else Xe=ln(Ye.G[0],Ye.H[0],de);if(de.h)break;if(et||256>Xe){if(!et)if(Ye.nd)k[Le]=(Ye.qb|Xe<<8)>>>0;else{if(ee(de),et=ln(Ye.G[1],Ye.H[1],de),ee(de),yt=ln(Ye.G[2],Ye.H[2],de),mt=ln(Ye.G[3],Ye.H[3],de),de.h)break;k[Le]=(mt<<24|et<<16|Xe<<8|yt)>>>0}if(et=!1,++Le,++ie>=H&&(ie=0,++se,ne!=null&&se<=te&&!(se%16)&&ne(P,se),Ee!=null))for(;Re<Le;)Xe=k[Re++],Ee.X[(506832829*Xe&4294967295)>>>Ee.Mb]=Xe}else if(280>Xe){if(Xe=Pa(Xe-256,de),yt=ln(Ye.G[4],Ye.H[4],de),ee(de),yt=Si(H,yt=Pa(yt,de)),de.h)break;if(Le-z<yt||Y-Le<Xe)break e;for(mt=0;mt<Xe;++mt)k[Le+mt]=k[Le+mt-yt];for(Le+=Xe,ie+=Xe;ie>=H;)ie-=H,++se,ne!=null&&se<=te&&!(se%16)&&ne(P,se);if(t(Le<=Y),ie&_e&&(Ye=jn(Ae,ie,se)),Ee!=null)for(;Re<Le;)Xe=k[Re++],Ee.X[(506832829*Xe&4294967295)>>>Ee.Mb]=Xe}else{if(!(Xe<Qe))break e;for(et=Xe-280,t(Ee!=null);Re<Le;)Xe=k[Re++],Ee.X[(506832829*Xe&4294967295)>>>Ee.Mb]=Xe;Xe=Le,t(!(et>>>(yt=Ee).Xa)),k[Xe]=yt.X[et],et=!0}et||t(de.h==G(de))}if(P.Pb&&de.h&&Le<Y)t(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&le(P.s.vb,P.s.Wa);else{if(de.h)break e;ne!=null&&ne(P,se>te?te:se),P.a=0,P.$=Le-z}return 1}return P.a=3,0}function ei(P){t(P!=null),P.vc=null,P.yc=null,P.Ya=null;var k=P.Wa;k!=null&&(k.X=null),P.vb=null,t(P!=null)}function ca(){var P=new C2;return P==null?null:(P.a=0,P.xb=ZT,ps("Predictor","VP8LPredictors"),ps("Predictor","VP8LPredictors_C"),ps("PredictorAdd","VP8LPredictorsAdd"),ps("PredictorAdd","VP8LPredictorsAdd_C"),d0=xt,nu=Pt,Da=ct,da=hr,Pc=Gt,Il=Dr,kl=lr,S.VP8LMapColor32b=Mf,S.VP8LMapColor8b=f0,P)}function Ai(P,k,z,H,Y){var te=1,ne=[P],se=[k],ie=H.m,de=H.s,Ae=null,Le=0;e:for(;;){if(z)for(;te&&q(ie,1);){var Re=ne,ke=se,Qe=H,ze=1,Ee=Qe.m,_e=Qe.gc[Qe.ab],Ye=q(Ee,2);if(Qe.Oc&1<<Ye)te=0;else{switch(Qe.Oc|=1<<Ye,_e.hc=Ye,_e.Ea=Re[0],_e.nc=ke[0],_e.K=[null],++Qe.ab,t(4>=Qe.ab),Ye){case 0:case 1:_e.b=q(Ee,3)+2,ze=Ai(Ne(_e.Ea,_e.b),Ne(_e.nc,_e.b),0,Qe,_e.K),_e.K=_e.K[0];break;case 3:var et,Xe=q(Ee,8)+1,yt=16<Xe?0:4<Xe?1:2<Xe?2:3;if(Re[0]=Ne(_e.Ea,yt),_e.b=yt,et=ze=Ai(Xe,1,0,Qe,_e.K)){var mt,Ft=Xe,pt=_e,Ir=1<<(8>>pt.b),Or=i(Ir);if(Or==null)et=0;else{var wr=pt.K[0],pr=pt.w;for(Or[0]=pt.K[0][0],mt=1;mt<1*Ft;++mt)Or[mt]=ye(wr[pr+mt],Or[mt-1]);for(;mt<4*Ir;++mt)Or[mt]=0;pt.K[0]=null,pt.K[0]=Or,et=1}}ze=et;break;case 2:break;default:t(0)}te=ze}}if(ne=ne[0],se=se[0],te&&q(ie,1)&&!(te=1<=(Le=q(ie,4))&&11>=Le)){H.a=3;break e}var qr;if(qr=te)t:{var Br,rr,Qn,Oa=H,Jn=ne,La=se,Lr=Le,ni=z,si=Oa.m,xs=Oa.s,Is=[null],fa=1,Di=0,Yo=kq[Lr];r:for(;;){if(ni&&q(si,1)){var ys=q(si,3)+2,Rl=Ne(Jn,ys),lu=Ne(La,ys),Wf=Rl*lu;if(!Ai(Rl,lu,0,Oa,Is))break r;for(Is=Is[0],xs.xc=ys,Br=0;Br<Wf;++Br){var Dc=Is[Br]>>8&65535;Is[Br]=Dc,Dc>=fa&&(fa=Dc+1)}}if(si.h)break r;for(rr=0;5>rr;++rr){var Dn=QT[rr];!rr&&0<Lr&&(Dn+=1<<Lr),Di<Dn&&(Di=Dn)}var L2=o(fa*Yo,N),l3=fa,c3=o(l3,I);if(c3==null)var S0=null;else t(65536>=l3),S0=c3;var Lp=i(Di);if(S0==null||Lp==null||L2==null){Oa.a=1;break r}var C0=L2;for(Br=Qn=0;Br<fa;++Br){var co=S0[Br],qf=co.G,Hf=co.H,d3=0,A0=1,u3=0;for(rr=0;5>rr;++rr){Dn=QT[rr],qf[rr]=C0,Hf[rr]=Qn,!rr&&0<Lr&&(Dn+=1<<Lr);s:{var E0,R2=Dn,P0=Oa,Rp=Lp,Zq=C0,eH=Qn,$2=0,Oc=P0.m,tH=q(Oc,1);if(a(Rp,0,0,R2),tH){var rH=q(Oc,1)+1,nH=q(Oc,1),f3=q(Oc,nH==0?1:8);Rp[f3]=1,rH==2&&(Rp[f3=q(Oc,8)]=1);var T0=1}else{var h3=i(19),m3=q(Oc,4)+4;if(19<m3){P0.a=3;var _0=0;break s}for(E0=0;E0<m3;++E0)h3[_q[E0]]=q(Oc,3);var F2=void 0,$p=void 0,p3=P0,sH=h3,I0=R2,v3=Rp,M2=0,Lc=p3.m,g3=8,x3=o(128,N);n:for(;_(x3,0,7,sH,19);){if(q(Lc,1)){var aH=2+2*q(Lc,3);if((F2=2+q(Lc,aH))>I0)break n}else F2=I0;for($p=0;$p<I0&&F2--;){ee(Lc);var y3=x3[0+(127&V(Lc))];Z(Lc,Lc.u+y3.g);var Gf=y3.value;if(16>Gf)v3[$p++]=Gf,Gf!=0&&(g3=Gf);else{var iH=Gf==16,b3=Gf-16,oH=Pq[b3],j3=q(Lc,Eq[b3])+oH;if($p+j3>I0)break n;for(var lH=iH?g3:0;0<j3--;)v3[$p++]=lH}}M2=1;break n}M2||(p3.a=3),T0=M2}(T0=T0&&!Oc.h)&&($2=_(Zq,eH,8,Rp,R2)),T0&&$2!=0?_0=$2:(P0.a=3,_0=0)}if(_0==0)break r;if(A0&&Tq[rr]==1&&(A0=C0[Qn].g==0),d3+=C0[Qn].g,Qn+=_0,3>=rr){var Fp,B2=Lp[0];for(Fp=1;Fp<Dn;++Fp)Lp[Fp]>B2&&(B2=Lp[Fp]);u3+=B2}}if(co.nd=A0,co.Qb=0,A0&&(co.qb=(qf[3][Hf[3]+0].value<<24|qf[1][Hf[1]+0].value<<16|qf[2][Hf[2]+0].value)>>>0,d3==0&&256>qf[0][Hf[0]+0].value&&(co.Qb=1,co.qb+=qf[0][Hf[0]+0].value<<8)),co.jc=!co.Qb&&6>u3,co.jc){var k0,$l=co;for(k0=0;k0<_s;++k0){var Rc=k0,$c=$l.pd[Rc],D0=$l.G[0][$l.H[0]+Rc];256<=D0.value?($c.g=D0.g+256,$c.value=D0.value):($c.g=0,$c.value=0,Rc>>=Qr(D0,8,$c),Rc>>=Qr($l.G[1][$l.H[1]+Rc],16,$c),Rc>>=Qr($l.G[2][$l.H[2]+Rc],0,$c),Qr($l.G[3][$l.H[3]+Rc],24,$c))}}}xs.vc=Is,xs.Wb=fa,xs.Ya=S0,xs.yc=L2,qr=1;break t}qr=0}if(!(te=qr)){H.a=3;break e}if(0<Le){if(de.ua=1<<Le,!xe(de.Wa,Le)){H.a=1,te=0;break e}}else de.ua=0;var z2=H,w3=ne,cH=se,U2=z2.s,V2=U2.xc;if(z2.c=w3,z2.i=cH,U2.md=Ne(w3,V2),U2.wc=V2==0?-1:(1<<V2)-1,z){H.xb=Bq;break e}if((Ae=i(ne*se))==null){H.a=1,te=0;break e}te=(te=_a(H,Ae,0,ne,se,se,null))&&!ie.h;break e}return te?(Y!=null?Y[0]=Ae:(t(Ae==null),t(z)),H.$=0,z||ei(de)):ei(de),te}function At(P,k){var z=P.c*P.i,H=z+k+16*k;return t(P.c<=k),P.V=i(H),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+z+k,1)}function Te(P,k){var z=P.C,H=k-z,Y=P.V,te=P.Ba+P.c*z;for(t(k<=P.l.o);0<H;){var ne=16<H?16:H,se=P.l.ma,ie=P.l.width,de=ie*ne,Ae=se.ca,Le=se.tb+ie*z,Re=P.Ta,ke=P.Ua;Vs(P,ne,Y,te),Vn(Re,ke,Ae,Le,de),Mn(se,z,z+ne,Ae,Le,ie),H-=ne,Y+=ne*P.c,z+=ne}t(z==k),P.C=P.Ma=k}function at(){this.ub=this.yd=this.td=this.Rb=0}function jt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _r(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Bn(){this.Yb=function(){var P=[];return function k(z,H,Y){for(var te=Y[H],ne=0;ne<te&&(z.push(Y.length>H+1?[]:0),!(Y.length<H+1));ne++)k(z[ne],H+1,Y)}(P,0,[3,11]),P}()}function wn(){this.jb=i(3),this.Wc=l([4,8],Bn),this.Xc=l([4,17],Bn)}function vs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ws(){this.ld=this.La=this.dd=this.tc=0}function qo(){this.Na=this.la=0}function Qd(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function In(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sf(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ws),this.Y=0,this.ya=Array(new In),this.aa=0,this.l=new Cf}function Jd(){this.y=i(16),this.f=i(8),this.ea=i(8)}function i2(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new at,this.Kc=new jt,this.ed=new vs,this.Qa=new _r,this.Ic=this.$c=this.Aa=0,this.D=new Sf,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,W),this.ia=0,this.pb=o(4,Qd),this.Pa=new wn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Jd),this.Hd=0,this.rb=Array(new qo),this.sb=0,this.wa=Array(new Ws),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new In),this.L=this.aa=0,this.gd=l([4,2],Ws),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Cf(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function o2(){var P=new i2;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,Dp||(Dp=Yx)),P}function zn(P,k,z){return P.a==0&&(P.a=k,P.sc=z,P.cb=0),0}function Gx(P,k,z){return 3<=z&&P[k+0]==157&&P[k+1]==1&&P[k+2]==42}function Kx(P,k){if(P==null)return 0;if(P.a=0,P.sc="OK",k==null)return zn(P,2,"null VP8Io passed to VP8GetHeaders()");var z=k.data,H=k.w,Y=k.ha;if(4>Y)return zn(P,7,"Truncated header.");var te=z[H+0]|z[H+1]<<8|z[H+2]<<16,ne=P.Od;if(ne.Rb=!(1&te),ne.td=te>>1&7,ne.yd=te>>4&1,ne.ub=te>>5,3<ne.td)return zn(P,3,"Incorrect keyframe parameters.");if(!ne.yd)return zn(P,4,"Frame not displayable.");H+=3,Y-=3;var se=P.Kc;if(ne.Rb){if(7>Y)return zn(P,7,"cannot parse picture header");if(!Gx(z,H,Y))return zn(P,3,"Bad code word");se.c=16383&(z[H+4]<<8|z[H+3]),se.Td=z[H+4]>>6,se.i=16383&(z[H+6]<<8|z[H+5]),se.Ud=z[H+6]>>6,H+=7,Y-=7,P.za=se.c+15>>4,P.Ub=se.i+15>>4,k.width=se.c,k.height=se.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,a((te=P.Pa).jb,0,255,te.jb.length),t((te=P.Qa)!=null),te.Cb=0,te.Bb=0,te.Fb=1,a(te.Zb,0,0,te.Zb.length),a(te.Lb,0,0,te.Lb)}if(ne.ub>Y)return zn(P,7,"bad partition length");R(te=P.m,z,H,ne.ub),H+=ne.ub,Y-=ne.ub,ne.Rb&&(se.Ld=me(te),se.Kd=me(te)),se=P.Qa;var ie,de=P.Pa;if(t(te!=null),t(se!=null),se.Cb=me(te),se.Cb){if(se.Bb=me(te),me(te)){for(se.Fb=me(te),ie=0;4>ie;++ie)se.Zb[ie]=me(te)?$(te,7):0;for(ie=0;4>ie;++ie)se.Lb[ie]=me(te)?$(te,6):0}if(se.Bb)for(ie=0;3>ie;++ie)de.jb[ie]=me(te)?M(te,8):255}else se.Bb=0;if(te.Ka)return zn(P,3,"cannot parse segment header");if((se=P.ed).zd=me(te),se.Tb=M(te,6),se.wb=M(te,3),se.Pc=me(te),se.Pc&&me(te)){for(de=0;4>de;++de)me(te)&&(se.vd[de]=$(te,6));for(de=0;4>de;++de)me(te)&&(se.od[de]=$(te,6))}if(P.L=se.Tb==0?0:se.zd?1:2,te.Ka)return zn(P,3,"cannot parse filter header");var Ae=Y;if(Y=ie=H,H=ie+Ae,se=Ae,P.Xb=(1<<M(P.m,2))-1,Ae<3*(de=P.Xb))z=7;else{for(ie+=3*de,se-=3*de,Ae=0;Ae<de;++Ae){var Le=z[Y+0]|z[Y+1]<<8|z[Y+2]<<16;Le>se&&(Le=se),R(P.Jc[+Ae],z,ie,Le),ie+=Le,se-=Le,Y+=3}R(P.Jc[+de],z,ie,se),z=ie<H?0:5}if(z!=0)return zn(P,z,"cannot parse partitions");for(z=M(ie=P.m,7),Y=me(ie)?$(ie,4):0,H=me(ie)?$(ie,4):0,se=me(ie)?$(ie,4):0,de=me(ie)?$(ie,4):0,ie=me(ie)?$(ie,4):0,Ae=P.Qa,Le=0;4>Le;++Le){if(Ae.Cb){var Re=Ae.Zb[Le];Ae.Fb||(Re+=z)}else{if(0<Le){P.pb[Le]=P.pb[0];continue}Re=z}var ke=P.pb[Le];ke.Sc[0]=k2[ti(Re+Y,127)],ke.Sc[1]=D2[ti(Re+0,127)],ke.Eb[0]=2*k2[ti(Re+H,127)],ke.Eb[1]=101581*D2[ti(Re+se,127)]>>16,8>ke.Eb[1]&&(ke.Eb[1]=8),ke.Qc[0]=k2[ti(Re+de,117)],ke.Qc[1]=D2[ti(Re+ie,127)],ke.lc=Re+ie}if(!ne.Rb)return zn(P,4,"Not a key frame.");for(me(te),ne=P.Pa,z=0;4>z;++z){for(Y=0;8>Y;++Y)for(H=0;3>H;++H)for(se=0;11>se;++se)de=oe(te,Fq[z][Y][H][se])?M(te,8):Rq[z][Y][H][se],ne.Wc[z][Y].Yb[H][se]=de;for(Y=0;17>Y;++Y)ne.Xc[z][Y]=ne.Wc[z][Mq[Y]]}return P.kc=me(te),P.kc&&(P.Bd=M(te,8)),P.cb=1}function Yx(P,k,z,H,Y,te,ne){var se=k[Y].Yb[z];for(z=0;16>Y;++Y){if(!oe(P,se[z+0]))return Y;for(;!oe(P,se[z+1]);)if(se=k[++Y].Yb[0],z=0,Y==16)return 16;var ie=k[Y+1].Yb;if(oe(P,se[z+2])){var de=P,Ae=0;if(oe(de,(Re=se)[(Le=z)+3]))if(oe(de,Re[Le+6])){for(se=0,Le=2*(Ae=oe(de,Re[Le+8]))+(Re=oe(de,Re[Le+9+Ae])),Ae=0,Re=Oq[Le];Re[se];++se)Ae+=Ae+oe(de,Re[se]);Ae+=3+(8<<Le)}else oe(de,Re[Le+7])?(Ae=7+2*oe(de,165),Ae+=oe(de,145)):Ae=5+oe(de,159);else Ae=oe(de,Re[Le+4])?3+oe(de,Re[Le+5]):2;se=ie[2]}else Ae=1,se=ie[1];ie=ne+Lq[Y],0>(de=P).b&&he(de);var Le,Re=de.b,ke=(Le=de.Ca>>1)-(de.I>>Re)>>31;--de.b,de.Ca+=ke,de.Ca|=1,de.I-=(Le+1&ke)<<Re,te[ie]=((Ae^ke)-ke)*H[(0<Y)+0]}return 16}function dp(P){var k=P.rb[P.sb-1];k.la=0,k.Na=0,a(P.zc,0,0,P.zc.length),P.ja=0}function l2(P,k){if(P==null)return 0;if(k==null)return zn(P,2,"NULL VP8Io parameter in VP8Decode().");if(!P.cb&&!Kx(P,k))return 0;if(t(P.cb),k.ac==null||k.ac(k)){k.ob&&(P.L=0);var z=N0[P.L];if(P.L==2?(P.yb=0,P.zb=0):(P.yb=k.v-z>>4,P.zb=k.j-z>>4,0>P.yb&&(P.yb=0),0>P.zb&&(P.zb=0)),P.Va=k.o+15+z>>4,P.Hb=k.va+15+z>>4,P.Hb>P.za&&(P.Hb=P.za),P.Va>P.Ub&&(P.Va=P.Ub),0<P.L){var H=P.ed;for(z=0;4>z;++z){var Y;if(P.Qa.Cb){var te=P.Qa.Lb[z];P.Qa.Fb||(te+=H.Tb)}else te=H.Tb;for(Y=0;1>=Y;++Y){var ne=P.gd[z][Y],se=te;if(H.Pc&&(se+=H.vd[0],Y&&(se+=H.od[0])),0<(se=0>se?0:63<se?63:se)){var ie=se;0<H.wb&&(ie=4<H.wb?ie>>2:ie>>1)>9-H.wb&&(ie=9-H.wb),1>ie&&(ie=1),ne.dd=ie,ne.tc=2*se+ie,ne.ld=40<=se?2:15<=se?1:0}else ne.tc=0;ne.La=Y}}}z=0}else zn(P,6,"Frame setup failed"),z=P.a;if(z=z==0){if(z){P.$c=0,0<P.Aa||(P.Ic=Jq);e:{z=P.Ic,H=4*(ie=P.za);var de=32*ie,Ae=ie+1,Le=0<P.L?ie*(0<P.Aa?2:1):0,Re=(P.Aa==2?2:1)*ie;if((ne=H+832+(Y=3*(16*z+N0[P.L])/2*de)+(te=P.Fa!=null&&0<P.Fa.length?P.Kc.c*P.Kc.i:0))!=ne)z=0;else{if(ne>P.Vb){if(P.Vb=0,P.Ec=i(ne),P.Fc=0,P.Ec==null){z=zn(P,1,"no memory during frame initialization.");break e}P.Vb=ne}ne=P.Ec,se=P.Fc,P.Ac=ne,P.Bc=se,se+=H,P.Gd=o(de,Jd),P.Hd=0,P.rb=o(Ae+1,qo),P.sb=1,P.wa=Le?o(Le,Ws):null,P.Y=0,P.D.Nb=0,P.D.wa=P.wa,P.D.Y=P.Y,0<P.Aa&&(P.D.Y+=ie),t(!0),P.oc=ne,P.pc=se,se+=832,P.ya=o(Re,In),P.aa=0,P.D.ya=P.ya,P.D.aa=P.aa,P.Aa==2&&(P.D.aa+=ie),P.R=16*ie,P.B=8*ie,ie=(de=N0[P.L])*P.R,de=de/2*P.B,P.sa=ne,P.ta=se+ie,P.qa=P.sa,P.ra=P.ta+16*z*P.R+de,P.Ha=P.qa,P.Ia=P.ra+8*z*P.B+de,P.$c=0,se+=Y,P.mb=te?ne:null,P.nb=te?se:null,t(se+te<=P.Fc+P.Vb),dp(P),a(P.Ac,P.Bc,0,H),z=1}}if(z){if(k.ka=0,k.y=P.sa,k.O=P.ta,k.f=P.qa,k.N=P.ra,k.ea=P.Ha,k.Vd=P.Ia,k.fa=P.R,k.Rc=P.B,k.F=null,k.J=0,!m0){for(z=-255;255>=z;++z)as[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)Ol[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)kp[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)Vf[255+z]=0>z?0:255<z?255:z;m0=1}Bf=u2,Dl=c2,Tp=Qx,ua=d2,Pi=Jx,Un=Xx,zf=vp,h0=tu,_p=S2,su=gp,au=N2,Tc=If,iu=xp,Uf=o0,ou=i0,_c=Go,Ip=_l,Ti=w2,lo[0]=Ho,lo[1]=f2,lo[2]=v2,lo[3]=g2,lo[4]=t0,lo[5]=Tf,lo[6]=r0,lo[7]=hp,lo[8]=y2,lo[9]=x2,Ic[0]=Zx,Ic[1]=m2,Ic[2]=Tl,Ic[3]=Ef,Ic[4]=qs,Ic[5]=p2,Ic[6]=e0,Ll[0]=Sc,Ll[1]=h2,Ll[2]=b2,Ll[3]=mp,Ll[4]=eu,Ll[5]=j2,Ll[6]=pp,z=1}else z=0}z&&(z=function(ke,Qe){for(ke.M=0;ke.M<ke.Va;++ke.M){var ze,Ee=ke.Jc[ke.M&ke.Xb],_e=ke.m,Ye=ke;for(ze=0;ze<Ye.za;++ze){var et=_e,Xe=Ye,yt=Xe.Ac,mt=Xe.Bc+4*ze,Ft=Xe.zc,pt=Xe.ya[Xe.aa+ze];if(Xe.Qa.Bb?pt.$b=oe(et,Xe.Pa.jb[0])?2+oe(et,Xe.Pa.jb[2]):oe(et,Xe.Pa.jb[1]):pt.$b=0,Xe.kc&&(pt.Ad=oe(et,Xe.Bd)),pt.Za=!oe(et,145)+0,pt.Za){var Ir=pt.Ob,Or=0;for(Xe=0;4>Xe;++Xe){var wr,pr=Ft[0+Xe];for(wr=0;4>wr;++wr){pr=$q[yt[mt+wr]][pr];for(var qr=JT[oe(et,pr[0])];0<qr;)qr=JT[2*qr+oe(et,pr[qr])];pr=-qr,yt[mt+wr]=pr}s(Ir,Or,yt,mt,4),Or+=4,Ft[0+Xe]=pr}}else pr=oe(et,156)?oe(et,128)?1:3:oe(et,163)?2:0,pt.Ob[0]=pr,a(yt,mt,pr,4),a(Ft,0,pr,4);pt.Dd=oe(et,142)?oe(et,114)?oe(et,183)?1:3:2:0}if(Ye.m.Ka)return zn(ke,7,"Premature end-of-partition0 encountered.");for(;ke.ja<ke.za;++ke.ja){if(Ye=Ee,et=(_e=ke).rb[_e.sb-1],yt=_e.rb[_e.sb+_e.ja],ze=_e.ya[_e.aa+_e.ja],mt=_e.kc?ze.Ad:0)et.la=yt.la=0,ze.Za||(et.Na=yt.Na=0),ze.Hc=0,ze.Gc=0,ze.ia=0;else{var Br,rr;if(et=yt,yt=Ye,mt=_e.Pa.Xc,Ft=_e.ya[_e.aa+_e.ja],pt=_e.pb[Ft.$b],Xe=Ft.ad,Ir=0,Or=_e.rb[_e.sb-1],pr=wr=0,a(Xe,Ir,0,384),Ft.Za)var Qn=0,Oa=mt[3];else{qr=i(16);var Jn=et.Na+Or.Na;if(Jn=Dp(yt,mt[1],Jn,pt.Eb,0,qr,0),et.Na=Or.Na=(0<Jn)+0,1<Jn)Bf(qr,0,Xe,Ir);else{var La=qr[0]+3>>3;for(qr=0;256>qr;qr+=16)Xe[Ir+qr]=La}Qn=1,Oa=mt[0]}var Lr=15&et.la,ni=15&Or.la;for(qr=0;4>qr;++qr){var si=1&ni;for(La=rr=0;4>La;++La)Lr=Lr>>1|(si=(Jn=Dp(yt,Oa,Jn=si+(1&Lr),pt.Sc,Qn,Xe,Ir))>Qn)<<7,rr=rr<<2|(3<Jn?3:1<Jn?2:Xe[Ir+0]!=0),Ir+=16;Lr>>=4,ni=ni>>1|si<<7,wr=(wr<<8|rr)>>>0}for(Oa=Lr,Qn=ni>>4,Br=0;4>Br;Br+=2){for(rr=0,Lr=et.la>>4+Br,ni=Or.la>>4+Br,qr=0;2>qr;++qr){for(si=1&ni,La=0;2>La;++La)Jn=si+(1&Lr),Lr=Lr>>1|(si=0<(Jn=Dp(yt,mt[2],Jn,pt.Qc,0,Xe,Ir)))<<3,rr=rr<<2|(3<Jn?3:1<Jn?2:Xe[Ir+0]!=0),Ir+=16;Lr>>=2,ni=ni>>1|si<<5}pr|=rr<<4*Br,Oa|=Lr<<4<<Br,Qn|=(240&ni)<<Br}et.la=Oa,Or.la=Qn,Ft.Hc=wr,Ft.Gc=pr,Ft.ia=43690&pr?0:pt.ia,mt=!(wr|pr)}if(0<_e.L&&(_e.wa[_e.Y+_e.ja]=_e.gd[ze.$b][ze.Za],_e.wa[_e.Y+_e.ja].La|=!mt),Ye.Ka)return zn(ke,7,"Premature end-of-file encountered.")}if(dp(ke),_e=Qe,Ye=1,ze=(Ee=ke).D,et=0<Ee.L&&Ee.M>=Ee.zb&&Ee.M<=Ee.Va,Ee.Aa==0)e:{if(ze.M=Ee.M,ze.uc=et,Sp(Ee,ze),Ye=1,ze=(rr=Ee.D).Nb,et=(pr=N0[Ee.L])*Ee.R,yt=pr/2*Ee.B,qr=16*ze*Ee.R,La=8*ze*Ee.B,mt=Ee.sa,Ft=Ee.ta-et+qr,pt=Ee.qa,Xe=Ee.ra-yt+La,Ir=Ee.Ha,Or=Ee.Ia-yt+La,ni=(Lr=rr.M)==0,wr=Lr>=Ee.Va-1,Ee.Aa==2&&Sp(Ee,rr),rr.uc)for(si=(Jn=Ee).D.M,t(Jn.D.uc),rr=Jn.yb;rr<Jn.Hb;++rr){Qn=rr,Oa=si;var xs=(Is=(Dn=Jn).D).Nb;Br=Dn.R;var Is=Is.wa[Is.Y+Qn],fa=Dn.sa,Di=Dn.ta+16*xs*Br+16*Qn,Yo=Is.dd,ys=Is.tc;if(ys!=0)if(t(3<=ys),Dn.L==1)0<Qn&&_c(fa,Di,Br,ys+4),Is.La&&Ti(fa,Di,Br,ys),0<Oa&&ou(fa,Di,Br,ys+4),Is.La&&Ip(fa,Di,Br,ys);else{var Rl=Dn.B,lu=Dn.qa,Wf=Dn.ra+8*xs*Rl+8*Qn,Dc=Dn.Ha,Dn=Dn.Ia+8*xs*Rl+8*Qn;xs=Is.ld,0<Qn&&(h0(fa,Di,Br,ys+4,Yo,xs),su(lu,Wf,Dc,Dn,Rl,ys+4,Yo,xs)),Is.La&&(Tc(fa,Di,Br,ys,Yo,xs),Uf(lu,Wf,Dc,Dn,Rl,ys,Yo,xs)),0<Oa&&(zf(fa,Di,Br,ys+4,Yo,xs),_p(lu,Wf,Dc,Dn,Rl,ys+4,Yo,xs)),Is.La&&(au(fa,Di,Br,ys,Yo,xs),iu(lu,Wf,Dc,Dn,Rl,ys,Yo,xs))}}if(Ee.ia&&alert("todo:DitherRow"),_e.put!=null){if(rr=16*Lr,Lr=16*(Lr+1),ni?(_e.y=Ee.sa,_e.O=Ee.ta+qr,_e.f=Ee.qa,_e.N=Ee.ra+La,_e.ea=Ee.Ha,_e.W=Ee.Ia+La):(rr-=pr,_e.y=mt,_e.O=Ft,_e.f=pt,_e.N=Xe,_e.ea=Ir,_e.W=Or),wr||(Lr-=pr),Lr>_e.o&&(Lr=_e.o),_e.F=null,_e.J=null,Ee.Fa!=null&&0<Ee.Fa.length&&rr<Lr&&(_e.J=wp(Ee,_e,rr,Lr-rr),_e.F=Ee.mb,_e.F==null&&_e.F.length==0)){Ye=zn(Ee,3,"Could not decode alpha data.");break e}rr<_e.j&&(pr=_e.j-rr,rr=_e.j,t(!(1&pr)),_e.O+=Ee.R*pr,_e.N+=Ee.B*(pr>>1),_e.W+=Ee.B*(pr>>1),_e.F!=null&&(_e.J+=_e.width*pr)),rr<Lr&&(_e.O+=_e.v,_e.N+=_e.v>>1,_e.W+=_e.v>>1,_e.F!=null&&(_e.J+=_e.v),_e.ka=rr-_e.j,_e.U=_e.va-_e.v,_e.T=Lr-rr,Ye=_e.put(_e))}ze+1!=Ee.Ic||wr||(s(Ee.sa,Ee.ta-et,mt,Ft+16*Ee.R,et),s(Ee.qa,Ee.ra-yt,pt,Xe+8*Ee.B,yt),s(Ee.Ha,Ee.Ia-yt,Ir,Or+8*Ee.B,yt))}if(!Ye)return zn(ke,6,"Output aborted.")}return 1}(P,k)),k.bc!=null&&k.bc(k),z&=1}return z?(P.cb=0,z):0}function ao(P,k,z,H,Y){Y=P[k+z+32*H]+(Y>>3),P[k+z+32*H]=-256&Y?0>Y?0:255:Y}function Af(P,k,z,H,Y,te){ao(P,k,0,z,H+Y),ao(P,k,1,z,H+te),ao(P,k,2,z,H-te),ao(P,k,3,z,H-Y)}function Ia(P){return(20091*P>>16)+P}function up(P,k,z,H){var Y,te=0,ne=i(16);for(Y=0;4>Y;++Y){var se=P[k+0]+P[k+8],ie=P[k+0]-P[k+8],de=(35468*P[k+4]>>16)-Ia(P[k+12]),Ae=Ia(P[k+4])+(35468*P[k+12]>>16);ne[te+0]=se+Ae,ne[te+1]=ie+de,ne[te+2]=ie-de,ne[te+3]=se-Ae,te+=4,k++}for(Y=te=0;4>Y;++Y)se=(P=ne[te+0]+4)+ne[te+8],ie=P-ne[te+8],de=(35468*ne[te+4]>>16)-Ia(ne[te+12]),ao(z,H,0,0,se+(Ae=Ia(ne[te+4])+(35468*ne[te+12]>>16))),ao(z,H,1,0,ie+de),ao(z,H,2,0,ie-de),ao(z,H,3,0,se-Ae),te++,H+=32}function Xx(P,k,z,H){var Y=P[k+0]+4,te=35468*P[k+4]>>16,ne=Ia(P[k+4]),se=35468*P[k+1]>>16;Af(z,H,0,Y+ne,P=Ia(P[k+1]),se),Af(z,H,1,Y+te,P,se),Af(z,H,2,Y-te,P,se),Af(z,H,3,Y-ne,P,se)}function c2(P,k,z,H,Y){up(P,k,z,H),Y&&up(P,k+16,z,H+4)}function Qx(P,k,z,H){Dl(P,k+0,z,H,1),Dl(P,k+32,z,H+128,1)}function d2(P,k,z,H){var Y;for(P=P[k+0]+4,Y=0;4>Y;++Y)for(k=0;4>k;++k)ao(z,H,k,Y,P)}function Jx(P,k,z,H){P[k+0]&&ua(P,k+0,z,H),P[k+16]&&ua(P,k+16,z,H+4),P[k+32]&&ua(P,k+32,z,H+128),P[k+48]&&ua(P,k+48,z,H+128+4)}function u2(P,k,z,H){var Y,te=i(16);for(Y=0;4>Y;++Y){var ne=P[k+0+Y]+P[k+12+Y],se=P[k+4+Y]+P[k+8+Y],ie=P[k+4+Y]-P[k+8+Y],de=P[k+0+Y]-P[k+12+Y];te[0+Y]=ne+se,te[8+Y]=ne-se,te[4+Y]=de+ie,te[12+Y]=de-ie}for(Y=0;4>Y;++Y)ne=(P=te[0+4*Y]+3)+te[3+4*Y],se=te[1+4*Y]+te[2+4*Y],ie=te[1+4*Y]-te[2+4*Y],de=P-te[3+4*Y],z[H+0]=ne+se>>3,z[H+16]=de+ie>>3,z[H+32]=ne-se>>3,z[H+48]=de-ie>>3,H+=64}function fp(P,k,z){var H,Y=k-32,te=ri,ne=255-P[Y-1];for(H=0;H<z;++H){var se,ie=te,de=ne+P[k-1];for(se=0;se<z;++se)P[k+se]=ie[de+P[Y+se]];k+=32}}function f2(P,k){fp(P,k,4)}function h2(P,k){fp(P,k,8)}function m2(P,k){fp(P,k,16)}function Tl(P,k){var z;for(z=0;16>z;++z)s(P,k+32*z,P,k-32,16)}function Ef(P,k){var z;for(z=16;0<z;--z)a(P,k,P[k-1],16),k+=32}function Pf(P,k,z){var H;for(H=0;16>H;++H)a(k,z+32*H,P,16)}function Zx(P,k){var z,H=16;for(z=0;16>z;++z)H+=P[k-1+32*z]+P[k+z-32];Pf(H>>5,P,k)}function qs(P,k){var z,H=8;for(z=0;16>z;++z)H+=P[k-1+32*z];Pf(H>>4,P,k)}function p2(P,k){var z,H=8;for(z=0;16>z;++z)H+=P[k+z-32];Pf(H>>4,P,k)}function e0(P,k){Pf(128,P,k)}function Qt(P,k,z){return P+2*k+z+2>>2}function v2(P,k){var z,H=k-32;for(H=new Uint8Array([Qt(P[H-1],P[H+0],P[H+1]),Qt(P[H+0],P[H+1],P[H+2]),Qt(P[H+1],P[H+2],P[H+3]),Qt(P[H+2],P[H+3],P[H+4])]),z=0;4>z;++z)s(P,k+32*z,H,0,H.length)}function g2(P,k){var z=P[k-1],H=P[k-1+32],Y=P[k-1+64],te=P[k-1+96];we(P,k+0,16843009*Qt(P[k-1-32],z,H)),we(P,k+32,16843009*Qt(z,H,Y)),we(P,k+64,16843009*Qt(H,Y,te)),we(P,k+96,16843009*Qt(Y,te,te))}function Ho(P,k){var z,H=4;for(z=0;4>z;++z)H+=P[k+z-32]+P[k-1+32*z];for(H>>=3,z=0;4>z;++z)a(P,k+32*z,H,4)}function t0(P,k){var z=P[k-1+0],H=P[k-1+32],Y=P[k-1+64],te=P[k-1-32],ne=P[k+0-32],se=P[k+1-32],ie=P[k+2-32],de=P[k+3-32];P[k+0+96]=Qt(H,Y,P[k-1+96]),P[k+1+96]=P[k+0+64]=Qt(z,H,Y),P[k+2+96]=P[k+1+64]=P[k+0+32]=Qt(te,z,H),P[k+3+96]=P[k+2+64]=P[k+1+32]=P[k+0+0]=Qt(ne,te,z),P[k+3+64]=P[k+2+32]=P[k+1+0]=Qt(se,ne,te),P[k+3+32]=P[k+2+0]=Qt(ie,se,ne),P[k+3+0]=Qt(de,ie,se)}function r0(P,k){var z=P[k+1-32],H=P[k+2-32],Y=P[k+3-32],te=P[k+4-32],ne=P[k+5-32],se=P[k+6-32],ie=P[k+7-32];P[k+0+0]=Qt(P[k+0-32],z,H),P[k+1+0]=P[k+0+32]=Qt(z,H,Y),P[k+2+0]=P[k+1+32]=P[k+0+64]=Qt(H,Y,te),P[k+3+0]=P[k+2+32]=P[k+1+64]=P[k+0+96]=Qt(Y,te,ne),P[k+3+32]=P[k+2+64]=P[k+1+96]=Qt(te,ne,se),P[k+3+64]=P[k+2+96]=Qt(ne,se,ie),P[k+3+96]=Qt(se,ie,ie)}function Tf(P,k){var z=P[k-1+0],H=P[k-1+32],Y=P[k-1+64],te=P[k-1-32],ne=P[k+0-32],se=P[k+1-32],ie=P[k+2-32],de=P[k+3-32];P[k+0+0]=P[k+1+64]=te+ne+1>>1,P[k+1+0]=P[k+2+64]=ne+se+1>>1,P[k+2+0]=P[k+3+64]=se+ie+1>>1,P[k+3+0]=ie+de+1>>1,P[k+0+96]=Qt(Y,H,z),P[k+0+64]=Qt(H,z,te),P[k+0+32]=P[k+1+96]=Qt(z,te,ne),P[k+1+32]=P[k+2+96]=Qt(te,ne,se),P[k+2+32]=P[k+3+96]=Qt(ne,se,ie),P[k+3+32]=Qt(se,ie,de)}function hp(P,k){var z=P[k+0-32],H=P[k+1-32],Y=P[k+2-32],te=P[k+3-32],ne=P[k+4-32],se=P[k+5-32],ie=P[k+6-32],de=P[k+7-32];P[k+0+0]=z+H+1>>1,P[k+1+0]=P[k+0+64]=H+Y+1>>1,P[k+2+0]=P[k+1+64]=Y+te+1>>1,P[k+3+0]=P[k+2+64]=te+ne+1>>1,P[k+0+32]=Qt(z,H,Y),P[k+1+32]=P[k+0+96]=Qt(H,Y,te),P[k+2+32]=P[k+1+96]=Qt(Y,te,ne),P[k+3+32]=P[k+2+96]=Qt(te,ne,se),P[k+3+64]=Qt(ne,se,ie),P[k+3+96]=Qt(se,ie,de)}function x2(P,k){var z=P[k-1+0],H=P[k-1+32],Y=P[k-1+64],te=P[k-1+96];P[k+0+0]=z+H+1>>1,P[k+2+0]=P[k+0+32]=H+Y+1>>1,P[k+2+32]=P[k+0+64]=Y+te+1>>1,P[k+1+0]=Qt(z,H,Y),P[k+3+0]=P[k+1+32]=Qt(H,Y,te),P[k+3+32]=P[k+1+64]=Qt(Y,te,te),P[k+3+64]=P[k+2+64]=P[k+0+96]=P[k+1+96]=P[k+2+96]=P[k+3+96]=te}function y2(P,k){var z=P[k-1+0],H=P[k-1+32],Y=P[k-1+64],te=P[k-1+96],ne=P[k-1-32],se=P[k+0-32],ie=P[k+1-32],de=P[k+2-32];P[k+0+0]=P[k+2+32]=z+ne+1>>1,P[k+0+32]=P[k+2+64]=H+z+1>>1,P[k+0+64]=P[k+2+96]=Y+H+1>>1,P[k+0+96]=te+Y+1>>1,P[k+3+0]=Qt(se,ie,de),P[k+2+0]=Qt(ne,se,ie),P[k+1+0]=P[k+3+32]=Qt(z,ne,se),P[k+1+32]=P[k+3+64]=Qt(H,z,ne),P[k+1+64]=P[k+3+96]=Qt(Y,H,z),P[k+1+96]=Qt(te,Y,H)}function b2(P,k){var z;for(z=0;8>z;++z)s(P,k+32*z,P,k-32,8)}function mp(P,k){var z;for(z=0;8>z;++z)a(P,k,P[k-1],8),k+=32}function Zd(P,k,z){var H;for(H=0;8>H;++H)a(k,z+32*H,P,8)}function Sc(P,k){var z,H=8;for(z=0;8>z;++z)H+=P[k+z-32]+P[k-1+32*z];Zd(H>>4,P,k)}function j2(P,k){var z,H=4;for(z=0;8>z;++z)H+=P[k+z-32];Zd(H>>3,P,k)}function eu(P,k){var z,H=4;for(z=0;8>z;++z)H+=P[k-1+32*z];Zd(H>>3,P,k)}function pp(P,k){Zd(128,P,k)}function _f(P,k,z){var H=P[k-z],Y=P[k+0],te=3*(Y-H)+E2[1020+P[k-2*z]-P[k+z]],ne=p0[112+(te+4>>3)];P[k-z]=ri[255+H+p0[112+(te+3>>3)]],P[k+0]=ri[255+Y-ne]}function n0(P,k,z,H){var Y=P[k+0],te=P[k+z];return Ii[255+P[k-2*z]-P[k-z]]>H||Ii[255+te-Y]>H}function s0(P,k,z,H){return 4*Ii[255+P[k-z]-P[k+0]]+Ii[255+P[k-2*z]-P[k+z]]<=H}function a0(P,k,z,H,Y){var te=P[k-3*z],ne=P[k-2*z],se=P[k-z],ie=P[k+0],de=P[k+z],Ae=P[k+2*z],Le=P[k+3*z];return 4*Ii[255+se-ie]+Ii[255+ne-de]>H?0:Ii[255+P[k-4*z]-te]<=Y&&Ii[255+te-ne]<=Y&&Ii[255+ne-se]<=Y&&Ii[255+Le-Ae]<=Y&&Ii[255+Ae-de]<=Y&&Ii[255+de-ie]<=Y}function i0(P,k,z,H){var Y=2*H+1;for(H=0;16>H;++H)s0(P,k+H,z,Y)&&_f(P,k+H,z)}function Go(P,k,z,H){var Y=2*H+1;for(H=0;16>H;++H)s0(P,k+H*z,1,Y)&&_f(P,k+H*z,1)}function _l(P,k,z,H){var Y;for(Y=3;0<Y;--Y)i0(P,k+=4*z,z,H)}function w2(P,k,z,H){var Y;for(Y=3;0<Y;--Y)Go(P,k+=4,z,H)}function Cc(P,k,z,H,Y,te,ne,se){for(te=2*te+1;0<Y--;){if(a0(P,k,z,te,ne))if(n0(P,k,z,se))_f(P,k,z);else{var ie=P,de=k,Ae=z,Le=ie[de-2*Ae],Re=ie[de-Ae],ke=ie[de+0],Qe=ie[de+Ae],ze=ie[de+2*Ae],Ee=27*(Ye=E2[1020+3*(ke-Re)+E2[1020+Le-Qe]])+63>>7,_e=18*Ye+63>>7,Ye=9*Ye+63>>7;ie[de-3*Ae]=ri[255+ie[de-3*Ae]+Ye],ie[de-2*Ae]=ri[255+Le+_e],ie[de-Ae]=ri[255+Re+Ee],ie[de+0]=ri[255+ke-Ee],ie[de+Ae]=ri[255+Qe-_e],ie[de+2*Ae]=ri[255+ze-Ye]}k+=H}}function io(P,k,z,H,Y,te,ne,se){for(te=2*te+1;0<Y--;){if(a0(P,k,z,te,ne))if(n0(P,k,z,se))_f(P,k,z);else{var ie=P,de=k,Ae=z,Le=ie[de-Ae],Re=ie[de+0],ke=ie[de+Ae],Qe=p0[112+((ze=3*(Re-Le))+4>>3)],ze=p0[112+(ze+3>>3)],Ee=Qe+1>>1;ie[de-2*Ae]=ri[255+ie[de-2*Ae]+Ee],ie[de-Ae]=ri[255+Le+ze],ie[de+0]=ri[255+Re-Qe],ie[de+Ae]=ri[255+ke-Ee]}k+=H}}function vp(P,k,z,H,Y,te){Cc(P,k,z,1,16,H,Y,te)}function tu(P,k,z,H,Y,te){Cc(P,k,1,z,16,H,Y,te)}function N2(P,k,z,H,Y,te){var ne;for(ne=3;0<ne;--ne)io(P,k+=4*z,z,1,16,H,Y,te)}function If(P,k,z,H,Y,te){var ne;for(ne=3;0<ne;--ne)io(P,k+=4,1,z,16,H,Y,te)}function S2(P,k,z,H,Y,te,ne,se){Cc(P,k,Y,1,8,te,ne,se),Cc(z,H,Y,1,8,te,ne,se)}function gp(P,k,z,H,Y,te,ne,se){Cc(P,k,1,Y,8,te,ne,se),Cc(z,H,1,Y,8,te,ne,se)}function xp(P,k,z,H,Y,te,ne,se){io(P,k+4*Y,Y,1,8,te,ne,se),io(z,H+4*Y,Y,1,8,te,ne,se)}function o0(P,k,z,H,Y,te,ne,se){io(P,k+4,1,Y,8,te,ne,se),io(z,H+4,1,Y,8,te,ne,se)}function kf(){this.ba=new Ja,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function yp(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bp(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function l0(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new I,this.yc=new N}function C2(){this.xb=this.a=0,this.l=new Cf,this.ca=new Ja,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new l0,this.ab=0,this.gc=o(4,bp),this.Oc=0}function Df(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Cf,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ru(P,k,z,H,Y,te,ne){for(P=P==null?0:P[k+0],k=0;k<ne;++k)Y[te+k]=P+z[H+k]&255,P=Y[te+k]}function jp(P,k,z,H,Y,te,ne){var se;if(P==null)ru(null,null,z,H,Y,te,ne);else for(se=0;se<ne;++se)Y[te+se]=P[k+se]+z[H+se]&255}function Ac(P,k,z,H,Y,te,ne){if(P==null)ru(null,null,z,H,Y,te,ne);else{var se,ie=P[k+0],de=ie,Ae=ie;for(se=0;se<ne;++se)de=Ae+(ie=P[k+se])-de,Ae=z[H+se]+(-256&de?0>de?0:255:de)&255,de=ie,Y[te+se]=Ae}}function wp(P,k,z,H){var Y=k.width,te=k.o;if(t(P!=null&&k!=null),0>z||0>=H||z+H>te)return null;if(!P.Cc){if(P.ga==null){var ne;if(P.ga=new Df,(ne=P.ga==null)||(ne=k.width*k.o,t(P.Gb.length==0),P.Gb=i(ne),P.Uc=0,P.Gb==null?ne=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,ne=1),ne=!ne),!ne){ne=P.ga;var se=P.Fa,ie=P.P,de=P.qc,Ae=P.mb,Le=P.nb,Re=ie+1,ke=de-1,Qe=ne.l;if(t(se!=null&&Ae!=null&&k!=null),kc[0]=null,kc[1]=ru,kc[2]=jp,kc[3]=Ac,ne.ca=Ae,ne.tb=Le,ne.c=k.width,ne.i=k.height,t(0<ne.c&&0<ne.i),1>=de)k=0;else if(ne.$a=se[ie+0]>>0&3,ne.Z=se[ie+0]>>2&3,ne.Lc=se[ie+0]>>4&3,ie=se[ie+0]>>6&3,0>ne.$a||1<ne.$a||4<=ne.Z||1<ne.Lc||ie)k=0;else if(Qe.put=Za,Qe.ac=ss,Qe.bc=Ea,Qe.ma=ne,Qe.width=k.width,Qe.height=k.height,Qe.Da=k.Da,Qe.v=k.v,Qe.va=k.va,Qe.j=k.j,Qe.o=k.o,ne.$a)e:{t(ne.$a==1),k=ca();t:for(;;){if(k==null){k=0;break e}if(t(ne!=null),ne.mc=k,k.c=ne.c,k.i=ne.i,k.l=ne.l,k.l.ma=ne,k.l.width=ne.c,k.l.height=ne.i,k.a=0,B(k.m,se,Re,ke),!Ai(ne.c,ne.i,1,k,null)||(k.ab==1&&k.gc[0].hc==3&&Ci(k.s)?(ne.ic=1,se=k.c*k.i,k.Ta=null,k.Ua=0,k.V=i(se),k.Ba=0,k.V==null?(k.a=1,k=0):k=1):(ne.ic=0,k=At(k,ne.c)),!k))break t;k=1;break e}ne.mc=null,k=0}else k=ke>=ne.c*ne.i;ne=!k}if(ne)return null;P.ga.Lc!=1?P.Ga=0:H=te-z}t(P.ga!=null),t(z+H<=te);e:{if(k=(se=P.ga).c,te=se.l.o,se.$a==0){if(Re=P.rc,ke=P.Vc,Qe=P.Fa,ie=P.P+1+z*k,de=P.mb,Ae=P.nb+z*k,t(ie<=P.P+P.qc),se.Z!=0)for(t(kc[se.Z]!=null),ne=0;ne<H;++ne)kc[se.Z](Re,ke,Qe,ie,de,Ae,k),Re=de,ke=Ae,Ae+=k,ie+=k;else for(ne=0;ne<H;++ne)s(de,Ae,Qe,ie,k),Re=de,ke=Ae,Ae+=k,ie+=k;P.rc=Re,P.Vc=ke}else{if(t(se.mc!=null),k=z+H,t((ne=se.mc)!=null),t(k<=ne.i),ne.C>=k)k=1;else if(se.ic||Oe(),se.ic){se=ne.V,Re=ne.Ba,ke=ne.c;var ze=ne.i,Ee=(Qe=1,ie=ne.$/ke,de=ne.$%ke,Ae=ne.m,Le=ne.s,ne.$),_e=ke*ze,Ye=ke*k,et=Le.wc,Xe=Ee<Ye?jn(Le,de,ie):null;t(Ee<=_e),t(k<=ze),t(Ci(Le));t:for(;;){for(;!Ae.h&&Ee<Ye;){if(de&et||(Xe=jn(Le,de,ie)),t(Xe!=null),ee(Ae),256>(ze=ln(Xe.G[0],Xe.H[0],Ae)))se[Re+Ee]=ze,++Ee,++de>=ke&&(de=0,++ie<=k&&!(ie%16)&&Ta(ne,ie));else{if(!(280>ze)){Qe=0;break t}ze=Pa(ze-256,Ae);var yt,mt=ln(Xe.G[4],Xe.H[4],Ae);if(ee(Ae),!(Ee>=(mt=Si(ke,mt=Pa(mt,Ae)))&&_e-Ee>=ze)){Qe=0;break t}for(yt=0;yt<ze;++yt)se[Re+Ee+yt]=se[Re+Ee+yt-mt];for(Ee+=ze,de+=ze;de>=ke;)de-=ke,++ie<=k&&!(ie%16)&&Ta(ne,ie);Ee<Ye&&de&et&&(Xe=jn(Le,de,ie))}t(Ae.h==G(Ae))}Ta(ne,ie>k?k:ie);break t}!Qe||Ae.h&&Ee<_e?(Qe=0,ne.a=Ae.h?5:3):ne.$=Ee,k=Qe}else k=_a(ne,ne.V,ne.Ba,ne.c,ne.i,k,Te);if(!k){H=0;break e}}z+H>=te&&(P.Cc=1),H=1}if(!H)return null;if(P.Cc&&((H=P.ga)!=null&&(H.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+z*Y}function F(P,k,z,H,Y,te){for(;0<Y--;){var ne,se=P,ie=k+(z?1:0),de=P,Ae=k+(z?0:3);for(ne=0;ne<H;++ne){var Le=de[Ae+4*ne];Le!=255&&(Le*=32897,se[ie+4*ne+0]=se[ie+4*ne+0]*Le>>23,se[ie+4*ne+1]=se[ie+4*ne+1]*Le>>23,se[ie+4*ne+2]=se[ie+4*ne+2]*Le>>23)}k+=te}}function Q(P,k,z,H,Y){for(;0<H--;){var te;for(te=0;te<z;++te){var ne=P[k+2*te+0],se=15&(de=P[k+2*te+1]),ie=4369*se,de=(240&de|de>>4)*ie>>16;P[k+2*te+0]=(240&ne|ne>>4)*ie>>16&240|(15&ne|ne<<4)*ie>>16>>4&15,P[k+2*te+1]=240&de|se}k+=Y}}function ge(P,k,z,H,Y,te,ne,se){var ie,de,Ae=255;for(de=0;de<Y;++de){for(ie=0;ie<H;++ie){var Le=P[k+ie];te[ne+4*ie]=Le,Ae&=Le}k+=z,ne+=se}return Ae!=255}function Ce(P,k,z,H,Y){var te;for(te=0;te<Y;++te)z[H+te]=P[k+te]>>8}function Oe(){_i=F,Jr=Q,Zr=ge,Vn=Ce}function He(P,k,z){S[P]=function(H,Y,te,ne,se,ie,de,Ae,Le,Re,ke,Qe,ze,Ee,_e,Ye,et){var Xe,yt=et-1>>1,mt=se[ie+0]|de[Ae+0]<<16,Ft=Le[Re+0]|ke[Qe+0]<<16;t(H!=null);var pt=3*mt+Ft+131074>>2;for(k(H[Y+0],255&pt,pt>>16,ze,Ee),te!=null&&(pt=3*Ft+mt+131074>>2,k(te[ne+0],255&pt,pt>>16,_e,Ye)),Xe=1;Xe<=yt;++Xe){var Ir=se[ie+Xe]|de[Ae+Xe]<<16,Or=Le[Re+Xe]|ke[Qe+Xe]<<16,wr=mt+Ir+Ft+Or+524296,pr=wr+2*(Ir+Ft)>>3;pt=pr+mt>>1,mt=(wr=wr+2*(mt+Or)>>3)+Ir>>1,k(H[Y+2*Xe-1],255&pt,pt>>16,ze,Ee+(2*Xe-1)*z),k(H[Y+2*Xe-0],255&mt,mt>>16,ze,Ee+(2*Xe-0)*z),te!=null&&(pt=wr+Ft>>1,mt=pr+Or>>1,k(te[ne+2*Xe-1],255&pt,pt>>16,_e,Ye+(2*Xe-1)*z),k(te[ne+2*Xe+0],255&mt,mt>>16,_e,Ye+(2*Xe+0)*z)),mt=Ir,Ft=Or}1&et||(pt=3*mt+Ft+131074>>2,k(H[Y+et-1],255&pt,pt>>16,ze,Ee+(et-1)*z),te!=null&&(pt=3*Ft+mt+131074>>2,k(te[ne+et-1],255&pt,pt>>16,_e,Ye+(et-1)*z)))}}function st(){ki[v0]=zq,ki[g0]=e3,ki[YT]=Uq,ki[x0]=t3,ki[y0]=r3,ki[P2]=n3,ki[XT]=Vq,ki[T2]=e3,ki[_2]=t3,ki[b0]=r3,ki[I2]=n3}function gt(P){return P&~Wq?0>P?0:255:P>>s3}function Dt(P,k){return gt((19077*P>>8)+(26149*k>>8)-14234)}function er(P,k,z){return gt((19077*P>>8)-(6419*k>>8)-(13320*z>>8)+8708)}function Jt(P,k){return gt((19077*P>>8)+(33050*k>>8)-17685)}function yr(P,k,z,H,Y){H[Y+0]=Dt(P,z),H[Y+1]=er(P,k,z),H[Y+2]=Jt(P,k)}function Nn(P,k,z,H,Y){H[Y+0]=Jt(P,k),H[Y+1]=er(P,k,z),H[Y+2]=Dt(P,z)}function kn(P,k,z,H,Y){var te=er(P,k,z);k=te<<3&224|Jt(P,k)>>3,H[Y+0]=248&Dt(P,z)|te>>5,H[Y+1]=k}function Xn(P,k,z,H,Y){var te=240&Jt(P,k)|15;H[Y+0]=240&Dt(P,z)|er(P,k,z)>>4,H[Y+1]=te}function Hs(P,k,z,H,Y){H[Y+0]=255,yr(P,k,z,H,Y+1)}function gs(P,k,z,H,Y){Nn(P,k,z,H,Y),H[Y+3]=255}function oo(P,k,z,H,Y){yr(P,k,z,H,Y),H[Y+3]=255}function ti(P,k){return 0>P?0:P>k?k:P}function Ko(P,k,z){S[P]=function(H,Y,te,ne,se,ie,de,Ae,Le){for(var Re=Ae+(-2&Le)*z;Ae!=Re;)k(H[Y+0],te[ne+0],se[ie+0],de,Ae),k(H[Y+1],te[ne+0],se[ie+0],de,Ae+z),Y+=2,++ne,++ie,Ae+=2*z;1&Le&&k(H[Y+0],te[ne+0],se[ie+0],de,Ae)}}function c0(P,k,z){return z==0?P==0?k==0?6:5:k==0?4:0:z}function Np(P,k,z,H,Y){switch(P>>>30){case 3:Dl(k,z,H,Y,0);break;case 2:Un(k,z,H,Y);break;case 1:ua(k,z,H,Y)}}function Sp(P,k){var z,H,Y=k.M,te=k.Nb,ne=P.oc,se=P.pc+40,ie=P.oc,de=P.pc+584,Ae=P.oc,Le=P.pc+600;for(z=0;16>z;++z)ne[se+32*z-1]=129;for(z=0;8>z;++z)ie[de+32*z-1]=129,Ae[Le+32*z-1]=129;for(0<Y?ne[se-1-32]=ie[de-1-32]=Ae[Le-1-32]=129:(a(ne,se-32-1,127,21),a(ie,de-32-1,127,9),a(Ae,Le-32-1,127,9)),H=0;H<P.za;++H){var Re=k.ya[k.aa+H];if(0<H){for(z=-1;16>z;++z)s(ne,se+32*z-4,ne,se+32*z+12,4);for(z=-1;8>z;++z)s(ie,de+32*z-4,ie,de+32*z+4,4),s(Ae,Le+32*z-4,Ae,Le+32*z+4,4)}var ke=P.Gd,Qe=P.Hd+H,ze=Re.ad,Ee=Re.Hc;if(0<Y&&(s(ne,se-32,ke[Qe].y,0,16),s(ie,de-32,ke[Qe].f,0,8),s(Ae,Le-32,ke[Qe].ea,0,8)),Re.Za){var _e=ne,Ye=se-32+16;for(0<Y&&(H>=P.za-1?a(_e,Ye,ke[Qe].y[15],4):s(_e,Ye,ke[Qe+1].y,0,4)),z=0;4>z;z++)_e[Ye+128+z]=_e[Ye+256+z]=_e[Ye+384+z]=_e[Ye+0+z];for(z=0;16>z;++z,Ee<<=2)_e=ne,Ye=se+i3[z],lo[Re.Ob[z]](_e,Ye),Np(Ee,ze,16*+z,_e,Ye)}else if(_e=c0(H,Y,Re.Ob[0]),Ic[_e](ne,se),Ee!=0)for(z=0;16>z;++z,Ee<<=2)Np(Ee,ze,16*+z,ne,se+i3[z]);for(z=Re.Gc,_e=c0(H,Y,Re.Dd),Ll[_e](ie,de),Ll[_e](Ae,Le),Ee=ze,_e=ie,Ye=de,255&(Re=z>>0)&&(170&Re?Tp(Ee,256,_e,Ye):Pi(Ee,256,_e,Ye)),Re=Ae,Ee=Le,255&(z>>=8)&&(170&z?Tp(ze,320,Re,Ee):Pi(ze,320,Re,Ee)),Y<P.Ub-1&&(s(ke[Qe].y,0,ne,se+480,16),s(ke[Qe].f,0,ie,de+224,8),s(ke[Qe].ea,0,Ae,Le+224,8)),z=8*te*P.B,ke=P.sa,Qe=P.ta+16*H+16*te*P.R,ze=P.qa,Re=P.ra+8*H+z,Ee=P.Ha,_e=P.Ia+8*H+z,z=0;16>z;++z)s(ke,Qe+z*P.R,ne,se+32*z,16);for(z=0;8>z;++z)s(ze,Re+z*P.B,ie,de+32*z,8),s(Ee,_e+z*P.B,Ae,Le+32*z,8)}}function Of(P,k,z,H,Y,te,ne,se,ie){var de=[0],Ae=[0],Le=0,Re=ie!=null?ie.kd:0,ke=ie??new yp;if(P==null||12>z)return 7;ke.data=P,ke.w=k,ke.ha=z,k=[k],z=[z],ke.gb=[ke.gb];e:{var Qe=k,ze=z,Ee=ke.gb;if(t(P!=null),t(ze!=null),t(Ee!=null),Ee[0]=0,12<=ze[0]&&!r(P,Qe[0],"RIFF")){if(r(P,Qe[0]+8,"WEBP")){Ee=3;break e}var _e=De(P,Qe[0]+4);if(12>_e||4294967286<_e){Ee=3;break e}if(Re&&_e>ze[0]-8){Ee=7;break e}Ee[0]=_e,Qe[0]+=12,ze[0]-=12}Ee=0}if(Ee!=0)return Ee;for(_e=0<ke.gb[0],z=z[0];;){e:{var Ye=P;ze=k,Ee=z;var et=de,Xe=Ae,yt=Qe=[0];if((pt=Le=[Le])[0]=0,8>Ee[0])Ee=7;else{if(!r(Ye,ze[0],"VP8X")){if(De(Ye,ze[0]+4)!=10){Ee=3;break e}if(18>Ee[0]){Ee=7;break e}var mt=De(Ye,ze[0]+8),Ft=1+pe(Ye,ze[0]+12);if(2147483648<=Ft*(Ye=1+pe(Ye,ze[0]+15))){Ee=3;break e}yt!=null&&(yt[0]=mt),et!=null&&(et[0]=Ft),Xe!=null&&(Xe[0]=Ye),ze[0]+=18,Ee[0]-=18,pt[0]=1}Ee=0}}if(Le=Le[0],Qe=Qe[0],Ee!=0)return Ee;if(ze=!!(2&Qe),!_e&&Le)return 3;if(te!=null&&(te[0]=!!(16&Qe)),ne!=null&&(ne[0]=ze),se!=null&&(se[0]=0),ne=de[0],Qe=Ae[0],Le&&ze&&ie==null){Ee=0;break}if(4>z){Ee=7;break}if(_e&&Le||!_e&&!Le&&!r(P,k[0],"ALPH")){z=[z],ke.na=[ke.na],ke.P=[ke.P],ke.Sa=[ke.Sa];e:{mt=P,Ee=k,_e=z;var pt=ke.gb;et=ke.na,Xe=ke.P,yt=ke.Sa,Ft=22,t(mt!=null),t(_e!=null),Ye=Ee[0];var Ir=_e[0];for(t(et!=null),t(yt!=null),et[0]=null,Xe[0]=null,yt[0]=0;;){if(Ee[0]=Ye,_e[0]=Ir,8>Ir){Ee=7;break e}var Or=De(mt,Ye+4);if(4294967286<Or){Ee=3;break e}var wr=8+Or+1&-2;if(Ft+=wr,0<pt&&Ft>pt){Ee=3;break e}if(!r(mt,Ye,"VP8 ")||!r(mt,Ye,"VP8L")){Ee=0;break e}if(Ir[0]<wr){Ee=7;break e}r(mt,Ye,"ALPH")||(et[0]=mt,Xe[0]=Ye+8,yt[0]=Or),Ye+=wr,Ir-=wr}}if(z=z[0],ke.na=ke.na[0],ke.P=ke.P[0],ke.Sa=ke.Sa[0],Ee!=0)break}z=[z],ke.Ja=[ke.Ja],ke.xa=[ke.xa];e:if(pt=P,Ee=k,_e=z,et=ke.gb[0],Xe=ke.Ja,yt=ke.xa,mt=Ee[0],Ye=!r(pt,mt,"VP8 "),Ft=!r(pt,mt,"VP8L"),t(pt!=null),t(_e!=null),t(Xe!=null),t(yt!=null),8>_e[0])Ee=7;else{if(Ye||Ft){if(pt=De(pt,mt+4),12<=et&&pt>et-12){Ee=3;break e}if(Re&&pt>_e[0]-8){Ee=7;break e}Xe[0]=pt,Ee[0]+=8,_e[0]-=8,yt[0]=Ft}else yt[0]=5<=_e[0]&&pt[mt+0]==47&&!(pt[mt+4]>>5),Xe[0]=_e[0];Ee=0}if(z=z[0],ke.Ja=ke.Ja[0],ke.xa=ke.xa[0],k=k[0],Ee!=0)break;if(4294967286<ke.Ja)return 3;if(se==null||ze||(se[0]=ke.xa?2:1),ne=[ne],Qe=[Qe],ke.xa){if(5>z){Ee=7;break}se=ne,Re=Qe,ze=te,P==null||5>z?P=0:5<=z&&P[k+0]==47&&!(P[k+4]>>5)?(_e=[0],pt=[0],et=[0],B(Xe=new L,P,k,z),Rt(Xe,_e,pt,et)?(se!=null&&(se[0]=_e[0]),Re!=null&&(Re[0]=pt[0]),ze!=null&&(ze[0]=et[0]),P=1):P=0):P=0}else{if(10>z){Ee=7;break}se=Qe,P==null||10>z||!Gx(P,k+3,z-3)?P=0:(Re=P[k+0]|P[k+1]<<8|P[k+2]<<16,ze=16383&(P[k+7]<<8|P[k+6]),P=16383&(P[k+9]<<8|P[k+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=ke.Ja||!ze||!P?P=0:(ne&&(ne[0]=ze),se&&(se[0]=P),P=1))}if(!P||(ne=ne[0],Qe=Qe[0],Le&&(de[0]!=ne||Ae[0]!=Qe)))return 3;ie!=null&&(ie[0]=ke,ie.offset=k-ie.w,t(4294967286>k-ie.w),t(ie.offset==ie.ha-z));break}return Ee==0||Ee==7&&Le&&ie==null?(te!=null&&(te[0]|=ke.na!=null&&0<ke.na.length),H!=null&&(H[0]=ne),Y!=null&&(Y[0]=Qe),0):Ee}function Cp(P,k,z){var H=k.width,Y=k.height,te=0,ne=0,se=H,ie=Y;if(k.Da=P!=null&&0<P.Da,k.Da&&(se=P.cd,ie=P.bd,te=P.v,ne=P.j,11>z||(te&=-2,ne&=-2),0>te||0>ne||0>=se||0>=ie||te+se>H||ne+ie>Y))return 0;if(k.v=te,k.j=ne,k.va=te+se,k.o=ne+ie,k.U=se,k.T=ie,k.da=P!=null&&0<P.da,k.da){if(!Se(se,ie,z=[P.ib],te=[P.hb]))return 0;k.ib=z[0],k.hb=te[0]}return k.ob=P!=null&&P.ob,k.Kb=P==null||!P.Sd,k.da&&(k.ob=k.ib<3*H/4&&k.hb<3*Y/4,k.Kb=0),1}function Ap(P){if(P==null)return 2;if(11>P.S){var k=P.f.RGBA;k.fb+=(P.height-1)*k.A,k.A=-k.A}else k=P.f.kb,P=P.height,k.O+=(P-1)*k.fa,k.fa=-k.fa,k.N+=(P-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(P-1>>1)*k.Db,k.Db=-k.Db,k.F!=null&&(k.J+=(P-1)*k.lb,k.lb=-k.lb);return 0}function Lf(P,k,z,H){if(H==null||0>=P||0>=k)return 2;if(z!=null){if(z.Da){var Y=z.cd,te=z.bd,ne=-2&z.v,se=-2&z.j;if(0>ne||0>se||0>=Y||0>=te||ne+Y>P||se+te>k)return 2;P=Y,k=te}if(z.da){if(!Se(P,k,Y=[z.ib],te=[z.hb]))return 2;P=Y[0],k=te[0]}}H.width=P,H.height=k;e:{var ie=H.width,de=H.height;if(P=H.S,0>=ie||0>=de||!(P>=v0&&13>P))P=2;else{if(0>=H.Rd&&H.sd==null){ne=te=Y=k=0;var Ae=(se=ie*o3[P])*de;if(11>P||(te=(de+1)/2*(k=(ie+1)/2),P==12&&(ne=(Y=ie)*de)),(de=i(Ae+2*te+ne))==null){P=1;break e}H.sd=de,11>P?((ie=H.f.RGBA).eb=de,ie.fb=0,ie.A=se,ie.size=Ae):((ie=H.f.kb).y=de,ie.O=0,ie.fa=se,ie.Fd=Ae,ie.f=de,ie.N=0+Ae,ie.Ab=k,ie.Cd=te,ie.ea=de,ie.W=0+Ae+te,ie.Db=k,ie.Ed=te,P==12&&(ie.F=de,ie.J=0+Ae+2*te),ie.Tc=ne,ie.lb=Y)}if(k=1,Y=H.S,te=H.width,ne=H.height,Y>=v0&&13>Y)if(11>Y)P=H.f.RGBA,k&=(se=Math.abs(P.A))*(ne-1)+te<=P.size,k&=se>=te*o3[Y],k&=P.eb!=null;else{P=H.f.kb,se=(te+1)/2,Ae=(ne+1)/2,ie=Math.abs(P.fa),de=Math.abs(P.Ab);var Le=Math.abs(P.Db),Re=Math.abs(P.lb),ke=Re*(ne-1)+te;k&=ie*(ne-1)+te<=P.Fd,k&=de*(Ae-1)+se<=P.Cd,k=(k&=Le*(Ae-1)+se<=P.Ed)&ie>=te&de>=se&Le>=se,k&=P.y!=null,k&=P.f!=null,k&=P.ea!=null,Y==12&&(k&=Re>=te,k&=ke<=P.Tc,k&=P.F!=null)}else k=0;P=k?0:2}}return P!=0||z!=null&&z.fd&&(P=Ap(H)),P}var _s=64,Rf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$f=24,Ff=32,Ep=8,ka=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$e("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(P){return P},S.Predictor2=function(P,k,z){return k[z+0]},S.Predictor3=function(P,k,z){return k[z+1]},S.Predictor4=function(P,k,z){return k[z-1]},S.Predictor5=function(P,k,z){return nt(nt(P,k[z+1]),k[z+0])},S.Predictor6=function(P,k,z){return nt(P,k[z-1])},S.Predictor7=function(P,k,z){return nt(P,k[z+0])},S.Predictor8=function(P,k,z){return nt(k[z-1],k[z+0])},S.Predictor9=function(P,k,z){return nt(k[z+0],k[z+1])},S.Predictor10=function(P,k,z){return nt(nt(P,k[z-1]),nt(k[z+0],k[z+1]))},S.Predictor11=function(P,k,z){var H=k[z+0];return 0>=Je(H>>24&255,P>>24&255,(k=k[z-1])>>24&255)+Je(H>>16&255,P>>16&255,k>>16&255)+Je(H>>8&255,P>>8&255,k>>8&255)+Je(255&H,255&P,255&k)?H:P},S.Predictor12=function(P,k,z){var H=k[z+0];return(vt((P>>24&255)+(H>>24&255)-((k=k[z-1])>>24&255))<<24|vt((P>>16&255)+(H>>16&255)-(k>>16&255))<<16|vt((P>>8&255)+(H>>8&255)-(k>>8&255))<<8|vt((255&P)+(255&H)-(255&k)))>>>0},S.Predictor13=function(P,k,z){var H=k[z-1];return(Me((P=nt(P,k[z+0]))>>24&255,H>>24&255)<<24|Me(P>>16&255,H>>16&255)<<16|Me(P>>8&255,H>>8&255)<<8|Me(P>>0&255,H>>0&255))>>>0};var A2=S.PredictorAdd0;S.PredictorAdd1=dt,$e("Predictor2","PredictorAdd2"),$e("Predictor3","PredictorAdd3"),$e("Predictor4","PredictorAdd4"),$e("Predictor5","PredictorAdd5"),$e("Predictor6","PredictorAdd6"),$e("Predictor7","PredictorAdd7"),$e("Predictor8","PredictorAdd8"),$e("Predictor9","PredictorAdd9"),$e("Predictor10","PredictorAdd10"),$e("Predictor11","PredictorAdd11"),$e("Predictor12","PredictorAdd12"),$e("Predictor13","PredictorAdd13");var Pp=S.PredictorAdd2;Mt("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),Mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var d0,Ei=S.ColorIndexInverseTransform,Mf=S.MapARGB,u0=S.VP8LColorIndexInverseTransformAlpha,f0=S.MapAlpha,Ec=S.VP8LPredictorsAdd=[];Ec.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var nu,Da,da,Pc,Il,kl,Bf,Dl,Un,Tp,ua,Pi,zf,h0,_p,su,au,Tc,iu,Uf,ou,_c,Ip,Ti,_i,Jr,Zr,Vn,as=i(511),Ol=i(2041),kp=i(225),Vf=i(767),m0=0,E2=Ol,p0=kp,ri=Vf,Ii=as,v0=0,g0=1,YT=2,x0=3,y0=4,P2=5,XT=6,T2=7,_2=8,b0=9,I2=10,Eq=[2,3,7],Pq=[3,3,11],QT=[280,256,256,256,40],Tq=[0,1,1,1,0],_q=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Iq=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],kq=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Dq=8,k2=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],D2=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Dp=null,Oq=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lq=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],JT=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Rq=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],$q=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fq=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Mq=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ic=[],lo=[],Ll=[],Bq=1,ZT=2,kc=[],ki=[];He("UpsampleRgbLinePair",yr,3),He("UpsampleBgrLinePair",Nn,3),He("UpsampleRgbaLinePair",oo,4),He("UpsampleBgraLinePair",gs,4),He("UpsampleArgbLinePair",Hs,4),He("UpsampleRgba4444LinePair",Xn,2),He("UpsampleRgb565LinePair",kn,2);var zq=S.UpsampleRgbLinePair,Uq=S.UpsampleBgrLinePair,e3=S.UpsampleRgbaLinePair,t3=S.UpsampleBgraLinePair,r3=S.UpsampleArgbLinePair,n3=S.UpsampleRgba4444LinePair,Vq=S.UpsampleRgb565LinePair,j0=16,w0=1<<j0-1,Op=-227,O2=482,s3=6,Wq=(256<<s3)-1,a3=0,qq=i(256),Hq=i(256),Gq=i(256),Kq=i(256),Yq=i(O2-Op),Xq=i(O2-Op);Ko("YuvToRgbRow",yr,3),Ko("YuvToBgrRow",Nn,3),Ko("YuvToRgbaRow",oo,4),Ko("YuvToBgraRow",gs,4),Ko("YuvToArgbRow",Hs,4),Ko("YuvToRgba4444Row",Xn,2),Ko("YuvToRgb565Row",kn,2);var i3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],N0=[0,2,8],Qq=[8,7,6,4,4,2,2,2,1,1,1,1],Jq=1;this.WebPDecodeRGBA=function(P,k,z,H,Y){var te=g0,ne=new kf,se=new Ja;ne.ba=se,se.S=te,se.width=[se.width],se.height=[se.height];var ie=se.width,de=se.height,Ae=new la;if(Ae==null||P==null)var Le=2;else t(Ae!=null),Le=Of(P,k,z,Ae.width,Ae.height,Ae.Pd,Ae.Qd,Ae.format,null);if(Le!=0?ie=0:(ie!=null&&(ie[0]=Ae.width[0]),de!=null&&(de[0]=Ae.height[0]),ie=1),ie){se.width=se.width[0],se.height=se.height[0],H!=null&&(H[0]=se.width),Y!=null&&(Y[0]=se.height);e:{if(H=new Cf,(Y=new yp).data=P,Y.w=k,Y.ha=z,Y.kd=1,k=[0],t(Y!=null),((P=Of(Y.data,Y.w,Y.ha,null,null,null,k,null,Y))==0||P==7)&&k[0]&&(P=4),(k=P)==0){if(t(ne!=null),H.data=Y.data,H.w=Y.w+Y.offset,H.ha=Y.ha-Y.offset,H.put=Za,H.ac=ss,H.bc=Ea,H.ma=ne,Y.xa){if((P=ca())==null){ne=1;break e}if(function(Re,ke){var Qe=[0],ze=[0],Ee=[0];t:for(;;){if(Re==null)return 0;if(ke==null)return Re.a=2,0;if(Re.l=ke,Re.a=0,B(Re.m,ke.data,ke.w,ke.ha),!Rt(Re.m,Qe,ze,Ee)){Re.a=3;break t}if(Re.xb=ZT,ke.width=Qe[0],ke.height=ze[0],!Ai(Qe[0],ze[0],1,Re,null))break t;return 1}return t(Re.a!=0),0}(P,H)){if(H=(k=Lf(H.width,H.height,ne.Oa,ne.ba))==0){t:{H=P;r:for(;;){if(H==null){H=0;break t}if(t(H.s.yc!=null),t(H.s.Ya!=null),t(0<H.s.Wb),t((z=H.l)!=null),t((Y=z.ma)!=null),H.xb!=0){if(H.ca=Y.ba,H.tb=Y.tb,t(H.ca!=null),!Cp(Y.Oa,z,x0)){H.a=2;break r}if(!At(H,z.width)||z.da)break r;if((z.da||mr(H.ca.S))&&Oe(),11>H.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),H.ca.f.kb.F!=null&&Oe()),H.Pb&&0<H.s.ua&&H.s.vb.X==null&&!xe(H.s.vb,H.s.Wa.Xa)){H.a=1;break r}H.xb=0}if(!_a(H,H.V,H.Ba,H.c,H.i,z.o,Wo))break r;Y.Dc=H.Ma,H=1;break t}t(H.a!=0),H=0}H=!H}H&&(k=P.a)}else k=P.a}else{if((P=new o2)==null){ne=1;break e}if(P.Fa=Y.na,P.P=Y.P,P.qc=Y.Sa,Kx(P,H)){if((k=Lf(H.width,H.height,ne.Oa,ne.ba))==0){if(P.Aa=0,z=ne.Oa,t((Y=P)!=null),z!=null){if(0<(ie=0>(ie=z.Md)?0:100<ie?255:255*ie/100)){for(de=Ae=0;4>de;++de)12>(Le=Y.pb[de]).lc&&(Le.ia=ie*Qq[0>Le.lc?0:Le.lc]>>3),Ae|=Le.ia;Ae&&(alert("todo:VP8InitRandom"),Y.ia=1)}Y.Ga=z.Id,100<Y.Ga?Y.Ga=100:0>Y.Ga&&(Y.Ga=0)}l2(P,H)||(k=P.a)}}else k=P.a}k==0&&ne.Oa!=null&&ne.Oa.fd&&(k=Ap(ne.ba))}ne=k}te=ne!=0?null:11>te?se.f.RGBA.eb:se.f.kb.y}else te=null;return te};var o3=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(S,T){for(var O="",_=0;_<4;_++)O+=String.fromCharCode(S[T++]);return O}function f(S,T){return(S[T+0]<<0|S[T+1]<<8|S[T+2]<<16)>>>0}function u(S,T){return(S[T+0]<<0|S[T+1]<<8|S[T+2]<<16|S[T+3]<<24)>>>0}new c;var h=[0],m=[0],v=[],g=new c,p=e,x=function(S,T){var O={},_=0,N=!1,D=0,I=0;if(O.frames=[],!function(V,G,Z,ee){for(var he=0;he<ee;he++)if(V[G+he]!=Z.charCodeAt(he))return!0;return!1}(S,T,"RIFF",4)){var R,M;for(u(S,T+=4),T+=8;T<S.length;){var $=d(S,T),B=u(S,T+=4);T+=4;var U=B+(1&B);switch($){case"VP8 ":case"VP8L":O.frames[_]===void 0&&(O.frames[_]={}),(L=O.frames[_]).src_off=N?I:T-8,L.src_size=D+B+8,_++,N&&(N=!1,D=0,I=0);break;case"VP8X":(L=O.header={}).feature_flags=S[T];var q=T+4;L.canvas_width=1+f(S,q),q+=3,L.canvas_height=1+f(S,q),q+=3;break;case"ALPH":N=!0,D=U+8,I=T-8;break;case"ANIM":(L=O.header).bgcolor=u(S,T),q=T+4,L.loop_count=(R=S)[(M=q)+0]<<0|R[M+1]<<8,q+=2;break;case"ANMF":var W,L;(L=O.frames[_]={}).offset_x=2*f(S,T),T+=3,L.offset_y=2*f(S,T),T+=3,L.width=1+f(S,T),T+=3,L.height=1+f(S,T),T+=3,L.duration=f(S,T),T+=3,W=S[T++],L.dispose=1&W,L.blend=W>>1&1}$!="ANMF"&&(T+=U)}return O}}(p,0);x.response=p,x.rgbaoutput=!0,x.dataurl=!1;var b=x.header?x.header:null,y=x.frames?x.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<y.length&&y[j].blend!=0;j++);}var E=y[0],A=g.WebPDecodeRGBA(p,E.src_off,E.src_size,m,h);E.rgba=A,E.imgwidth=m[0],E.imgheight=h[0];for(var C=0;C<m[0]*h[0]*4;C++)v[C]=A[C];return this.width=m,this.height=h,this.data=v,this}(function(e){var t=function(){return typeof BC=="function"},r=function(h,m,v,g){var p=4,x=o;switch(g){case e.image_compression.FAST:p=1,x=i;break;case e.image_compression.MEDIUM:p=6,x=l;break;case e.image_compression.SLOW:p=9,x=c}h=s(h,m,v,x);var b=BC(h,{level:p});return e.__addimage__.arrayBufferToBinaryString(b)},s=function(h,m,v,g){for(var p,x,b,y=h.length/m,j=new Uint8Array(h.length+y),E=f(),A=0;A<y;A+=1){if(b=A*m,p=h.subarray(b,b+m),g)j.set(g(p,v,x),b+A);else{for(var C,S=E.length,T=[];C<S;C+=1)T[C]=E[C](p,v,x);var O=u(T.concat());j.set(T[O],b+A)}x=p}return j},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},i=function(h,m){var v,g=[],p=h.length;g[0]=1;for(var x=0;x<p;x+=1)v=h[x-m]||0,g[x+1]=h[x]-v+256&255;return g},o=function(h,m,v){var g,p=[],x=h.length;p[0]=2;for(var b=0;b<x;b+=1)g=v&&v[b]||0,p[b+1]=h[b]-g+256&255;return p},l=function(h,m,v){var g,p,x=[],b=h.length;x[0]=3;for(var y=0;y<b;y+=1)g=h[y-m]||0,p=v&&v[y]||0,x[y+1]=h[y]+256-(g+p>>>1)&255;return x},c=function(h,m,v){var g,p,x,b,y=[],j=h.length;y[0]=4;for(var E=0;E<j;E+=1)g=h[E-m]||0,p=v&&v[E]||0,x=v&&v[E-m]||0,b=d(g,p,x),y[E+1]=h[E]-b+256&255;return y},d=function(h,m,v){if(h===m&&m===v)return h;var g=Math.abs(m-v),p=Math.abs(h-v),x=Math.abs(h+m-v-v);return g<=p&&g<=x?h:p<=x?m:v},f=function(){return[a,i,o,l,c]},u=function(h){var m=h.map(function(v){return v.reduce(function(g,p){return g+Math.abs(p)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,v,g){var p,x,b,y,j,E,A,C,S,T,O,_,N,D,I,R=this.decode.FLATE_DECODE,M="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(b=new mhe(h)).imgData,x=b.bits,p=b.colorSpace,j=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){S=(C=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,O=new Uint8Array(S*b.colors),T=new Uint8Array(S);var $,B=b.pixelBitlength-b.bits;for(D=0,I=0;D<S;D++){for(N=C[D],$=0;$<B;)O[I++]=N>>>$&255,$+=b.bits;T[D]=N>>>$&255}}if(b.bits===16){S=(C=new Uint32Array(b.decodePixels().buffer)).length,O=new Uint8Array(S*(32/b.pixelBitlength)*b.colors),T=new Uint8Array(S*(32/b.pixelBitlength)),_=b.colors>1,D=0,I=0;for(var U=0;D<S;)N=C[D++],O[I++]=N>>>0&255,_&&(O[I++]=N>>>16&255,N=C[D++],O[I++]=N>>>0&255),T[U++]=N>>>16&255;x=8}g!==e.image_compression.NONE&&t()?(h=r(O,b.width*b.colors,b.colors,g),A=r(T,b.width,1,g)):(h=O,A=T,R=void 0)}if(b.colorType===3&&(p=this.color_spaces.INDEXED,E=b.palette,b.transparency.indexed)){var q=b.transparency.indexed,W=0;for(D=0,S=q.length;D<S;++D)W+=q[D];if((W/=255)===S-1&&q.indexOf(0)!==-1)y=[q.indexOf(0)];else if(W!==S){for(C=b.decodePixels(),T=new Uint8Array(C.length),D=0,S=C.length;D<S;D++)T[D]=q[C[D]];A=r(T,b.width,1)}}var L=function(V){var G;switch(V){case e.image_compression.FAST:G=11;break;case e.image_compression.MEDIUM:G=13;break;case e.image_compression.SLOW:G=14;break;default:G=12}return G}(g);return R===this.decode.FLATE_DECODE&&(M="/Predictor "+L+" "),M+="/Colors "+j+" /BitsPerComponent "+x+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:v,data:h,index:m,filter:R,decodeParameters:M,transparency:y,palette:E,sMask:A,predictor:L,width:b.width,height:b.height,bitsPerComponent:x,colorSpace:p}}}})(Ot.API),function(e){e.processGIF89A=function(t,r,s,a){var i=new phe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},f=new mS(100).encode(d,100);return e.processJPEG.call(this,f,r,s,a)},e.processGIF87A=e.processGIF89A}(Ot.API),mo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:s,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},mo.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Hr.log("bit decode error:"+r)}},mo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},mo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},mo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*s;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},mo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,f=s*this.width*4+4*a;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=d}this.pos+=e}},mo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,f=a*this.width*4+4*i;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},mo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},mo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=s,this.data[l+3]=o}},mo.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,s,a){var i=new mo(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new mS(100).encode(c,100);return e.processJPEG.call(this,d,r,s,a)}}(Ot.API),bD.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,s,a){var i=new bD(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new mS(100).encode(c,100);return e.processJPEG.call(this,d,r,s,a)}}(Ot.API),Ot.API.processRGBA=function(e,t,r){for(var s=e.data,a=s.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var f=s[d],u=s[d+1],h=s[d+2],m=s[d+3];i[l++]=f,i[l++]=u,i[l++]=h,o[c++]=m}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ot.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},eh=Ot.API,by=eh.getCharWidthsArray=function(e,t){var r,s,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,f=d.fof?d.fof:1,u=t.doKerning!==!1,h=0,m=e.length,v=0,g=l[0]||c,p=[];for(r=0;r<m;r++)s=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?p.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+o*(1e3/i)||0)/1e3):(h=u&&Pr(d[s])==="object"&&!isNaN(parseInt(d[s][v],10))?d[s][v]/f:0,p.push((l[s]||g)/c+h)),v=s;return p},vD=eh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return eh.processArabic&&(e=eh.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,a)/r:by.apply(this,arguments).reduce(function(i,o){return i+o},0)},gD=function(e,t,r,s){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>s&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},xD=function(e,t,r){r||(r={});var s,a,i,o,l,c,d,f=[],u=[f],h=r.textIndent||0,m=0,v=0,g=e.split(" "),p=by.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),b=[];g.map(function(j){(j=j.split(/\s*\n/)).length>1?b=b.concat(j.map(function(E,A){return(A&&E.length?`
`:"")+E})):b.push(j[0])}),g=b,c=vD.apply(this,[x,r])}for(i=0,o=g.length;i<o;i++){var y=0;if(s=g[i],c&&s[0]==`
`&&(s=s.substr(1),y=1),h+m+(v=(a=by.apply(this,[s,r])).reduce(function(j,E){return j+E},0))>t||y){if(v>t){for(l=gD.apply(this,[s,a,t-(h+m),t]),f.push(l.shift()),f=[l.pop()];l.length;)u.push([l.shift()]);v=a.slice(s.length-(f[0]?f[0].length:0)).reduce(function(j,E){return j+E},0)}else f=[s];u.push(f),h=v+c,m=p}else f.push(s),h+=m+v,m=p}return d=c?function(j,E){return(E?x:"")+j.join(" ")}:function(j){return j.join(" ")},u.map(d)},eh.splitTextToSize=function(e,t,r){var s,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var u=this.internal.getFont(f.fontName,f.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=s.length;l<c;l++)d=d.concat(xD.apply(this,[s[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},s={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],s["0123456789abcdef"[a]]=t[a];var i=function(u){return"0x"+parseInt(u,10).toString(16)},o=e.__fontmetrics__.compress=function(u){var h,m,v,g,p=["{"];for(var x in u){if(h=u[x],isNaN(parseInt(x,10))?m="'"+x+"'":(x=parseInt(x,10),m=(m=i(x).slice(2)).slice(0,-1)+s[m.slice(-1)]),typeof h=="number")h<0?(v=i(h).slice(3),g="-"):(v=i(h).slice(2),g=""),v=g+v.slice(0,-1)+s[v.slice(-1)];else{if(Pr(h)!=="object")throw new Error("Don't know what to do with value type "+Pr(h)+".");v=o(h)}p.push(m+v)}return p.push("}"),p.join("")},l=e.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,v,g,p={},x=1,b=p,y=[],j="",E="",A=u.length-1,C=1;C<A;C+=1)(g=u[C])=="'"?h?(v=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(y.push([b,v]),b={},v=void 0):g=="}"?((m=y.pop())[0][m[1]]=b,v=void 0,b=m[0]):g=="-"?x=-1:v===void 0?r.hasOwnProperty(g)?(j+=r[g],v=parseInt(j,16)*x,x=1,j=""):j+=g:r.hasOwnProperty(g)?(E+=r[g],b[v]=parseInt(E,16)*x,x=1,v=void 0,E=""):E+=g;return p},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(u){var h=u.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var v=d.Unicode[h.postScriptName];v&&(h.metadata.Unicode.encoding=v,h.encoding=v.codePages[0])}])}(Ot.API),function(e){var t=function(r){for(var s=r.length,a=new Uint8Array(s),i=0;i<s;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var s=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Fv(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,s)}}])}(Ot),function(e){function t(){return(Wt.canvg?Promise.resolve(Wt.canvg):Od(()=>import("./index.es-848e698c.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Ot.API.addSvgAsImage=function(r,s,a,i,o,l,c,d){if(isNaN(s)||isNaN(a))throw Hr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Hr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var u=f.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,f.width,f.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(v){return v.fromString(u,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),s,a,i,o,c,d)})}}(),Ot.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(t,r);return this},Ot.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,f=0,u=0;function h(v,g){var p,x=!1;for(p=0;p<v.length;p+=1)v[p]===g&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(u=0;u<m;u+=1)r[l[u]].value=r[l[u]].defaultValue,r[l[u]].explicitSet=!1}if(Pr(e)==="object"){for(a in e)if(i=e[a],h(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(s=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(f=0;f<i[d].length;f+=1)typeof i[d][f]!="number"&&(s=!1);s===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,g=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?g.push("/"+v+" /"+r[v].value):g.push("/"+v+" "+r[v].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Ot.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],u=0,h=i.length;u<h;++u){if(l=o.metadata.characterToGlyph(i.charCodeAt(u)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(u),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(d[4-l.length],l)}return f.join("")},s=function(i){var o,l,c,d,f,u,h;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],u=0,h=(l=Object.keys(i).sort(function(m,v){return m-v})).length;u<h;u++)o=l[u],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var u=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",v=0;v<h.length;v++)m+=String.fromCharCode(h[v]);var g=d();f({data:m,addLength1:!0,objectId:g}),c("endobj");var p=d();f({data:s(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var x=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+uh(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+uh(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+e.API.PDFObject.convert(u)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+p+" 0 R"),c("/BaseFont /"+uh(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var u=l.metadata.rawData,h="",m=0;m<u.length;m++)h+=String.fromCharCode(u[m]);var v=d();f({data:h,addLength1:!0,objectId:v}),c("endobj");var g=d();f({data:s(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var p=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+uh(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+uh(l.fontName)+"/FontDescriptor "+p+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,f=i.options||{},u=i.mutex||{},h=u.pdfEscape,m=u.activeFontKey,v=u.fonts,g=m,p="",x=0,b="",y=v[g].encoding;if(v[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:f,mutex:u};for(b=l,g=m,Array.isArray(l)&&(b=l[0]),x=0;x<b.length;x+=1)v[g].metadata.hasOwnProperty("cmap")&&(o=v[g].metadata.cmap.unicode.codeMap[b[x].charCodeAt(0)]),o||b[x].charCodeAt(0)<256&&v[g].metadata.hasOwnProperty("Unicode")?p+=b[x]:p+="";var j="";return parseInt(g.slice(1))<14||y==="WinAnsiEncoding"?j=h(p,g).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):y==="Identity-H"&&(j=r(p,v[g])),u.isHex=!0,{text:j,x:c,y:d,options:f,mutex:u}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(Ot),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ot.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var a,i,o,l,c,d,f,u=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,y=0;this.__bidiEngine__={};var j=function(_){var N=_.charCodeAt(),D=N>>8,I=g[D];return I!==void 0?u[256*I+(255&N)]:D===252||D===253?"AL":x.test(D)?"L":D===8?"R":"N"},E=function(_){for(var N,D=0;D<_.length;D++){if((N=j(_.charAt(D)))==="L")return!1;if(N==="R")return!0}return!1},A=function(_,N,D,I){var R,M,$,B,U=N[I];switch(U){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(U="AN");break;case"AL":b=!0,U="R";break;case"WS":U="N";break;case"CS":I<1||I+1>=N.length||(R=D[I-1])!=="EN"&&R!=="AN"||(M=N[I+1])!=="EN"&&M!=="AN"?U="N":b&&(M="AN"),U=M===R?M:"N";break;case"ES":U=(R=I>0?D[I-1]:"B")==="EN"&&I+1<N.length&&N[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&D[I-1]==="EN"){U="EN";break}if(b){U="N";break}for($=I+1,B=N.length;$<B&&N[$]==="ET";)$++;U=$<B&&N[$]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(B=N.length,$=I+1;$<B&&N[$]==="NSM";)$++;if($<B){var q=_[I],W=q>=1425&&q<=2303||q===64286;if(R=N[$],W&&(R==="R"||R==="AL")){U="R";break}}}U=I<1||(R=N[I-1])==="B"?"N":D[I-1];break;case"B":b=!1,a=!0,U=y;break;case"S":i=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":U="N"}return U},C=function(_,N,D){var I=_.split("");return D&&S(I,D,{hiLevel:y}),I.reverse(),N&&N.reverse(),I.join("")},S=function(_,N,D){var I,R,M,$,B,U=-1,q=_.length,W=0,L=[],V=y?m:h,G=[];for(b=!1,a=!1,i=!1,R=0;R<q;R++)G[R]=j(_[R]);for(M=0;M<q;M++){if(B=W,L[M]=A(_,G,L,M),I=240&(W=V[B][v[L[M]]]),W&=15,N[M]=$=V[W][5],I>0)if(I===16){for(R=U;R<M;R++)N[R]=1;U=-1}else U=-1;if(V[W][6])U===-1&&(U=M);else if(U>-1){for(R=U;R<M;R++)N[R]=$;U=-1}G[M]==="B"&&(N[M]=0),D.hiLevel|=$}i&&function(Z,ee,he){for(var me=0;me<he;me++)if(Z[me]==="S"){ee[me]=y;for(var oe=me-1;oe>=0&&Z[oe]==="WS";oe--)ee[oe]=y}}(G,N,q)},T=function(_,N,D,I,R){if(!(R.hiLevel<_)){if(_===1&&y===1&&!a)return N.reverse(),void(D&&D.reverse());for(var M,$,B,U,q=N.length,W=0;W<q;){if(I[W]>=_){for(B=W+1;B<q&&I[B]>=_;)B++;for(U=W,$=B-1;U<$;U++,$--)M=N[U],N[U]=N[$],N[$]=M,D&&(M=D[U],D[U]=D[$],D[$]=M);W=B}W++}}},O=function(_,N,D){var I=_.split(""),R={hiLevel:y};return D||(D=[]),S(I,D,R),function(M,$,B){if(B.hiLevel!==0&&f)for(var U,q=0;q<M.length;q++)$[q]===1&&(U=p.indexOf(M[q]))>=0&&(M[q]=p[U+1])}(I,D,R),T(2,I,N,D,R),T(1,I,N,D,R),I.join("")};return this.__bidiEngine__.doBidiReorder=function(_,N,D){if(function(R,M){if(M)for(var $=0;$<R.length;$++)M[$]=$;l===void 0&&(l=E(R)),d===void 0&&(d=E(R))}(_,N),o||!c||d)if(o&&c&&l^d)y=l?1:0,_=C(_,N,D);else if(!o&&c&&d)y=l?1:0,_=O(_,N,D),_=C(_,N);else if(!o||l||c||d){if(o&&!c&&l^d)_=C(_,N),l?(y=0,_=O(_,N,D)):(y=1,_=O(_,N,D),_=C(_,N));else if(o&&l&&!c&&d)y=1,_=O(_,N,D),_=C(_,N);else if(!o&&!c&&l^d){var I=f;l?(y=1,_=O(_,N,D),y=0,f=!1,_=O(_,N,D),f=I):(y=0,_=O(_,N,D),_=C(_,N),y=1,f=!1,_=O(_,N,D),f=I,_=C(_,N))}}else y=0,_=O(_,N,D);else y=l?1:0,_=O(_,N,D);return _},this.__bidiEngine__.setOptions=function(_){_&&(o=_.isInputVisual,c=_.isOutputVisual,l=_.isInputRtl,d=_.isOutputRtl,f=_.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var a=s.text,i=(s.x,s.y,s.options||{}),o=(s.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);s.text=o}else s.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Ot),Ot.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Rd(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new _he(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new vhe(this.contents),this.head=new xhe(this),this.name=new Nhe(this),this.cmap=new gz(this),this.toUnicode={},this.hhea=new yhe(this),this.maxp=new She(this),this.hmtx=new Che(this),this.post=new jhe(this),this.os2=new bhe(this),this.loca=new The(this),this.glyf=new Ahe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var Uo,Rd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,a;for(a=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,a,i;for(i=[],s=0,a=t.length;s<a;s++)r=t[s],i.push(this.writeByte(r));return i},e}(),vhe=function(){var e;function t(r){var s,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,a,i,o,l,c,d,f,u,h,m,v,g;for(g in m=Object.keys(r).length,c=Math.log(2),u=16*Math.floor(Math.log(m)/c),o=Math.floor(u/c),f=16*m-u,(a=new Rd).writeInt(this.scalarType),a.writeShort(m),a.writeShort(u),a.writeShort(o),a.writeShort(f),i=16*m,d=a.pos+i,l=null,v=[],r)for(h=r[g],a.writeString(g),a.writeInt(e(h)),a.writeInt(d),a.writeInt(h.length),v=v.concat(h),g==="head"&&(l=d),d+=h.length;d%4;)v.push(0),d++;return a.write(v),s=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(s),a.data},e=function(r){var s,a,i,o;for(r=xz.call(r);r.length%4;)r.push(0);for(i=new Rd(r),a=0,s=0,o=r.length;s<o;s=s+=4)a+=i.readUInt32();return 4294967295&a},t}(),ghe={}.hasOwnProperty,El=function(e,t){for(var r in t)ghe.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};Uo=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var xhe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new Rd).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t}(),jD=function(){function e(t,r){var s,a,i,o,l,c,d,f,u,h,m,v,g,p,x,b,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var j,E;for(E=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)E.push(t.readUInt16());return E}(),t.pos+=2,g=function(){var j,E;for(E=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)E.push(t.readUInt16());return E}(),d=function(){var j,E;for(E=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)E.push(t.readUInt16());return E}(),f=function(){var j,E;for(E=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)E.push(t.readUInt16());return E}(),a=(this.length-t.pos+this.offset)/2,l=function(){var j,E;for(E=[],c=j=0;0<=a?j<a:j>a;c=0<=a?++j:--j)E.push(t.readUInt16());return E}(),c=x=0,y=i.length;x<y;c=++x)for(p=i[c],s=b=v=g[c];v<=p?b<=p:b>=p;s=v<=p?++b:--b)f[c]===0?o=s+d[c]:(o=l[f[c]/2+(s-v)-(h-c)]||0)!==0&&(o+=d[c]),this.codeMap[s]=65535&o}t.pos=u}return e.encode=function(t,r){var s,a,i,o,l,c,d,f,u,h,m,v,g,p,x,b,y,j,E,A,C,S,T,O,_,N,D,I,R,M,$,B,U,q,W,L,V,G,Z,ee,he,me,oe,we,ve,pe;switch(I=new Rd,o=Object.keys(t).sort(function(De,xe){return De-xe}),r){case"macroman":for(g=0,p=function(){var De=[];for(v=0;v<256;++v)De.push(0);return De}(),b={0:0},i={},R=0,U=o.length;R<U;R++)b[oe=t[a=o[R]]]==null&&(b[oe]=++g),i[a]={old:t[a],new:b[t[a]]},p[a]=b[t[a]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(p),{charMap:i,subtable:I.data,maxGlyphID:g+1};case"unicode":for(N=[],u=[],y=0,b={},s={},x=d=null,M=0,q=o.length;M<q;M++)b[E=t[a=o[M]]]==null&&(b[E]=++y),s[a]={old:E,new:b[E]},l=b[E]-a,x!=null&&l===d||(x&&u.push(x),N.push(a),d=l),x=a;for(x&&u.push(x),u.push(65535),N.push(65535),O=2*(T=N.length),S=2*Math.pow(Math.log(T)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,C=2*T-S,c=[],A=[],m=[],v=$=0,W=N.length;$<W;v=++$){if(_=N[v],f=u[v],_===65535){c.push(0),A.push(0);break}if(_-(D=s[_].new)>=32768)for(c.push(0),A.push(2*(m.length+T-v)),a=B=_;_<=f?B<=f:B>=f;a=_<=f?++B:--B)m.push(s[a].new);else c.push(D-_),A.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*T+2*m.length),I.writeUInt16(0),I.writeUInt16(O),I.writeUInt16(S),I.writeUInt16(h),I.writeUInt16(C),he=0,L=u.length;he<L;he++)a=u[he],I.writeUInt16(a);for(I.writeUInt16(0),me=0,V=N.length;me<V;me++)a=N[me],I.writeUInt16(a);for(we=0,G=c.length;we<G;we++)l=c[we],I.writeUInt16(l);for(ve=0,Z=A.length;ve<Z;ve++)j=A[ve],I.writeUInt16(j);for(pe=0,ee=m.length;pe<ee;pe++)g=m[pe],I.writeUInt16(g);return{charMap:s,subtable:I.data,maxGlyphID:y+1}}},e}(),gz=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)s=new jD(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var a,i;return s==null&&(s="macroman"),a=jD.encode(r,s),(i=new Rd).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),yhe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),bhe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var s,a;for(a=[],s=0;s<10;++s)a.push(r.readByte());return a}(),this.charRange=function(){var s,a;for(a=[],s=0;s<4;++s)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var s,a;for(a=[],s=0;s<2;s=++s)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),jhe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="post",t.prototype.parse=function(r){var s,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)s=r.readByte(),i.push(this.names.push(r.readString(s)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),whe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Nhe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="name",t.prototype.parse=function(r){var s,a,i,o,l,c,d,f,u,h,m;for(r.pos=this.offset,r.readShort(),s=r.readShort(),c=r.readShort(),a=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=u=0,h=a.length;u<h;o=++u)i=a[o],r.pos=i.offset,f=r.readString(i.length),l=new whe(f,i),d[m=i.nameID]==null&&(d[m]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),She=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),Che=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,a,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],s=0,c=this.file.hhea.numberOfMetrics;0<=c?s<c:s>c;s=0<=c?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,u;for(u=[],s=f=0;0<=i?f<i:f>i;s=0<=i?++f:--f)u.push(r.readInt16());return u}(),this.widths=(function(){var f,u,h,m;for(m=[],f=0,u=(h=this.metrics).length;f<u;f++)o=h[f],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],d=[],s=l=0;0<=i?l<i:l>i;s=0<=i?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),xz=[].slice,Ahe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,a,i,o,l,c,d,f,u,h;return r in this.cache?this.cache[r]:(o=this.file.loca,s=this.file.contents,a=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+a,l=(c=new Rd(s.read(i))).readShort(),f=c.readShort(),h=c.readShort(),d=c.readShort(),u=c.readShort(),this.cache[r]=l===-1?new Phe(c,f,h,d,u):new Ehe(c,l,f,h,d,u),this.cache[r]))},t.prototype.encode=function(r,s,a){var i,o,l,c,d;for(l=[],o=[],c=0,d=s.length;c<d;c++)i=r[s[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),Ehe=function(){function e(t,r,s,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Phe=function(){function e(t,r,s,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new Rd(xz.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),The=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return El(t,Uo),t.prototype.tag="loca",t.prototype.parse=function(r){var s,a;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<s.length&&s[o]==l){++o,a[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var f=new Array(4*a.length),u=0;u<a.length;++u)f[4*u+3]=255&a[u],f[4*u+2]=(65280&a[u])>>8,f[4*u+1]=(16711680&a[u])>>16,f[4*u]=(4278190080&a[u])>>24;return f},t}(),_he=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)s=i[r],t[r]=a[s];return t},e.prototype.glyphsFor=function(t){var r,s,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(s=a[i])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))s=c[i],a[i]=s;return a},e.prototype.encode=function(t,r){var s,a,i,o,l,c,d,f,u,h,m,v,g,p,x;for(a in s=gz.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},x=s.charMap)m[(c=x[a]).old]=c.new;for(v in h=s.maxGlyphID,o)v in m||(m[v]=h++);return f=function(b){var y,j;for(y in j={},b)j[b[y]]=y;return j}(m),u=Object.keys(f).sort(function(b,y){return b-y}),g=function(){var b,y,j;for(j=[],b=0,y=u.length;b<y;b++)l=u[b],j.push(f[l]);return j}(),i=this.font.glyf.encode(o,g,m),d=this.font.loca.encode(i.offsets,g),p={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();Ot.API.PDFObject=function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)s=r[l],d.push(t.convert(s));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();const Ihe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:lhe,AcroFormAppearance:Ct,AcroFormButton:ds,AcroFormCheckBox:zv,AcroFormChoiceField:zu,AcroFormComboBox:Vu,AcroFormEditBox:Mv,AcroFormListBox:Uu,AcroFormPasswordField:Uv,AcroFormPushButton:Bv,AcroFormRadioButton:Wu,AcroFormTextField:Sd,GState:_g,ShadingPattern:ed,TilingPattern:_u,default:Ot,jsPDF:Ot},Symbol.toStringTag,{value:"Module"}));var khe={exports:{}};const Dhe=JR(Ihe);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(s,a){e.exports=a(function(){try{return Dhe}catch{}}())})(typeof globalThis<"u"?globalThis:typeof rs<"u"?rs:typeof window<"u"?window:typeof self<"u"?self:rs,function(r){return function(){var s={172:function(l,c){var d=this&&this.__extends||function(){var h=function(m,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(g[x]=p[x])},h(m,v)};return function(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");h(m,v);function g(){this.constructor=m}m.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var f=function(){function h(m,v,g){this.table=v,this.pageNumber=v.pageNumber,this.pageCount=this.pageNumber,this.settings=v.settings,this.cursor=g,this.doc=m.getDocument()}return h}();c.HookData=f;var u=function(h){d(m,h);function m(v,g,p,x,b,y){var j=h.call(this,v,g,y)||this;return j.cell=p,j.row=x,j.column=b,j.section=x.section,j}return m}(f);c.CellHookData=u},340:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0});var f=d(4),u=d(136),h=d(744),m=d(776),v=d(664),g=d(972);function p(x){x.API.autoTable=function(){for(var b=[],y=0;y<arguments.length;y++)b[y]=arguments[y];var j;b.length===1?j=b[0]:(console.error("Use of deprecated autoTable initiation"),j=b[2]||{},j.columns=b[0],j.body=b[1]);var E=(0,m.parseInput)(this,j),A=(0,g.createTable)(this,E);return(0,v.drawTable)(this,A),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(b,y,j,E){(0,u.default)(b,y,j,E,this)},x.API.autoTableSetDefaults=function(b){return h.DocHandler.setDefaults(b,this),this},x.autoTableSetDefaults=function(b,y){h.DocHandler.setDefaults(b,y)},x.API.autoTableHtmlToJson=function(b,y){var j;if(y===void 0&&(y=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var E=new h.DocHandler(this),A=(0,f.parseHtml)(E,b,window,y,!1),C=A.head,S=A.body,T=((j=C[0])===null||j===void 0?void 0:j.map(function(O){return O.content}))||[];return{columns:T,rows:S,data:S}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var b=this.lastAutoTable;return b&&b.finalY?b.finalY:0},x.API.autoTableAddPageContent=function(b){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=b,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=p},136:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(f,u,h,m,v){m=m||{};var g=1.15,p=v.internal.scaleFactor,x=v.internal.getFontSize()/p,b=v.getLineHeightFactor?v.getLineHeightFactor():g,y=x*b,j=/\r\n|\r|\n/g,E="",A=1;if((m.valign==="middle"||m.valign==="bottom"||m.halign==="center"||m.halign==="right")&&(E=typeof f=="string"?f.split(j):f,A=E.length||1),h+=x*(2-g),m.valign==="middle"?h-=A/2*y:m.valign==="bottom"&&(h-=A*y),m.halign==="center"||m.halign==="right"){var C=x;if(m.halign==="center"&&(C*=.5),E&&A>=1){for(var S=0;S<E.length;S++)v.text(E[S],u-v.getStringUnitWidth(E[S])*C,h),h+=y;return v}u-=v.getStringUnitWidth(f)*C}return m.halign==="justify"?v.text(f,u,h,{maxWidth:m.maxWidth||100,align:"justify"}):v.text(f,u,h),v}c.default=d},420:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function d(v,g,p){p.applyStyles(g,!0);var x=Array.isArray(v)?v:[v],b=x.map(function(y){return p.getTextWidth(y)}).reduce(function(y,j){return Math.max(y,j)},0);return b}c.getStringWidth=d;function f(v,g,p,x){var b=g.settings.tableLineWidth,y=g.settings.tableLineColor;v.applyStyles({lineWidth:b,lineColor:y});var j=u(b,!1);j&&v.rect(p.x,p.y,g.getWidth(v.pageSize().width),x.y-p.y,j)}c.addTableBorder=f;function u(v,g){var p=v>0,x=g||g===0;return p&&x?"DF":p?"S":x?"F":null}c.getFillStyle=u;function h(v,g){var p,x,b,y;if(v=v||g,Array.isArray(v)){if(v.length>=4)return{top:v[0],right:v[1],bottom:v[2],left:v[3]};if(v.length===3)return{top:v[0],right:v[1],bottom:v[2],left:v[1]};if(v.length===2)return{top:v[0],right:v[1],bottom:v[0],left:v[1]};v.length===1?v=v[0]:v=g}return typeof v=="object"?(typeof v.vertical=="number"&&(v.top=v.vertical,v.bottom=v.vertical),typeof v.horizontal=="number"&&(v.right=v.horizontal,v.left=v.horizontal),{left:(p=v.left)!==null&&p!==void 0?p:g,top:(x=v.top)!==null&&x!==void 0?x:g,right:(b=v.right)!==null&&b!==void 0?b:g,bottom:(y=v.bottom)!==null&&y!==void 0?y:g}):(typeof v!="number"&&(v=g),{top:v,right:v,bottom:v,left:v})}c.parseSpacing=h;function m(v,g){var p=h(g.settings.margin,0);return v.pageSize().width-(p.left+p.right)}c.getPageAvailableWidth=m},796:function(l,c){var d=this&&this.__extends||function(){var m=function(v,g){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,x){p.__proto__=x}||function(p,x){for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(p[b]=x[b])},m(v,g)};return function(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");m(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var f=function(m){d(v,m);function v(g){var p=m.call(this)||this;return p._element=g,p}return v}(Array);c.HtmlRowInput=f;function u(m){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/m,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=u;function h(m){var v={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return v[m]}c.getTheme=h},903:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var f=d(420);function u(p,x,b,y,j){var E={},A=1.3333333333333333,C=m(x,function(U){return j.getComputedStyle(U).backgroundColor});C!=null&&(E.fillColor=C);var S=m(x,function(U){return j.getComputedStyle(U).color});S!=null&&(E.textColor=S);var T=g(y,b);T&&(E.cellPadding=T);var O="borderTopColor",_=A*b,N=y.borderTopWidth;if(y.borderBottomWidth===N&&y.borderRightWidth===N&&y.borderLeftWidth===N){var D=(parseFloat(N)||0)/_;D&&(E.lineWidth=D)}else E.lineWidth={top:(parseFloat(y.borderTopWidth)||0)/_,right:(parseFloat(y.borderRightWidth)||0)/_,bottom:(parseFloat(y.borderBottomWidth)||0)/_,left:(parseFloat(y.borderLeftWidth)||0)/_},E.lineWidth.top||(E.lineWidth.right?O="borderRightColor":E.lineWidth.bottom?O="borderBottomColor":E.lineWidth.left&&(O="borderLeftColor"));var I=m(x,function(U){return j.getComputedStyle(U)[O]});I!=null&&(E.lineColor=I);var R=["left","right","center","justify"];R.indexOf(y.textAlign)!==-1&&(E.halign=y.textAlign),R=["middle","bottom","top"],R.indexOf(y.verticalAlign)!==-1&&(E.valign=y.verticalAlign);var M=parseInt(y.fontSize||"");isNaN(M)||(E.fontSize=M/A);var $=h(y);$&&(E.fontStyle=$);var B=(y.fontFamily||"").toLowerCase();return p.indexOf(B)!==-1&&(E.font=B),E}c.parseCss=u;function h(p){var x="";return(p.fontWeight==="bold"||p.fontWeight==="bolder"||parseInt(p.fontWeight)>=700)&&(x="bold"),(p.fontStyle==="italic"||p.fontStyle==="oblique")&&(x+="italic"),x}function m(p,x){var b=v(p,x);if(!b)return null;var y=b.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!y||!Array.isArray(y))return null;var j=[parseInt(y[1]),parseInt(y[2]),parseInt(y[3])],E=parseInt(y[4]);return E===0||isNaN(j[0])||isNaN(j[1])||isNaN(j[2])?null:j}function v(p,x){var b=x(p);return b==="rgba(0, 0, 0, 0)"||b==="transparent"||b==="initial"||b==="inherit"?p.parentElement==null?null:v(p.parentElement,x):b}function g(p,x){var b=[p.paddingTop,p.paddingRight,p.paddingBottom,p.paddingLeft],y=96/(72/x),j=(parseInt(p.lineHeight)-parseInt(p.fontSize))/x/2,E=b.map(function(C){return parseInt(C||"0")/y}),A=(0,f.parseSpacing)(E,0);return j>A.top&&(A.top=j),j>A.bottom&&(A.bottom=j),A}},744:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var d={},f=function(){function u(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return u.setDefaults=function(h,m){m===void 0&&(m=null),m?m.__autoTableDocumentDefaults=h:d=h},u.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},u.prototype.applyStyles=function(h,m){var v,g,p;m===void 0&&(m=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var x=this.jsPDFDocument.internal.getFont(),b=x.fontStyle,y=x.fontName;if(h.font&&(y=h.font),h.fontStyle){b=h.fontStyle;var j=this.getFontList()[y];j&&j.indexOf(b)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(j[0]),b=j[0])}if(this.jsPDFDocument.setFont(y,b),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!m){var E=u.unifyColor(h.fillColor);E&&(v=this.jsPDFDocument).setFillColor.apply(v,E),E=u.unifyColor(h.textColor),E&&(g=this.jsPDFDocument).setTextColor.apply(g,E),E=u.unifyColor(h.lineColor),E&&(p=this.jsPDFDocument).setDrawColor.apply(p,E),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},u.prototype.splitTextToSize=function(h,m,v){return this.jsPDFDocument.splitTextToSize(h,m,v)},u.prototype.rect=function(h,m,v,g,p){return this.jsPDFDocument.rect(h,m,v,g,p)},u.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},u.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},u.prototype.getDocument=function(){return this.jsPDFDocument},u.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},u.prototype.addPage=function(){return this.jsPDFDocument.addPage()},u.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},u.prototype.getGlobalOptions=function(){return d||{}},u.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},u.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},u.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},u.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},u.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},u.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},u}();c.DocHandler=f},4:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var f=d(903),u=d(796);function h(g,p,x,b,y){var j,E;b===void 0&&(b=!1),y===void 0&&(y=!1);var A;typeof p=="string"?A=x.document.querySelector(p):A=p;var C=Object.keys(g.getFontList()),S=g.scaleFactor(),T=[],O=[],_=[];if(!A)return console.error("Html table could not be found with input: ",p),{head:T,body:O,foot:_};for(var N=0;N<A.rows.length;N++){var D=A.rows[N],I=(E=(j=D==null?void 0:D.parentElement)===null||j===void 0?void 0:j.tagName)===null||E===void 0?void 0:E.toLowerCase(),R=m(C,S,x,D,b,y);R&&(I==="thead"?T.push(R):I==="tfoot"?_.push(R):O.push(R))}return{head:T,body:O,foot:_}}c.parseHtml=h;function m(g,p,x,b,y,j){for(var E=new u.HtmlRowInput(b),A=0;A<b.cells.length;A++){var C=b.cells[A],S=x.getComputedStyle(C);if(y||S.display!=="none"){var T=void 0;j&&(T=(0,f.parseCss)(g,C,p,S,x)),E.push({rowSpan:C.rowSpan,colSpan:C.colSpan,styles:T,_element:C,content:v(C)})}}var O=x.getComputedStyle(b);if(E.length>0&&(y||O.display!=="none"))return E}function v(g){var p=g.cloneNode(!0);return p.innerHTML=p.innerHTML.replace(/\n/g,"").replace(/ +/g," "),p.innerHTML=p.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),p.innerText||p.textContent||""}},776:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var f=d(4),u=d(356),h=d(420),m=d(744),v=d(792);function g(A,C){var S=new m.DocHandler(A),T=S.getDocumentOptions(),O=S.getGlobalOptions();(0,v.default)(S,O,T,C);var _=(0,u.assign)({},O,T,C),N;typeof window<"u"&&(N=window);var D=p(O,T,C),I=x(O,T,C),R=b(S,_),M=j(S,_,N);return{id:C.tableId,content:M,hooks:I,styles:D,settings:R}}c.parseInput=g;function p(A,C,S){for(var T={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},O=function(I){if(I==="columnStyles"){var R=A[I],M=C[I],$=S[I];T.columnStyles=(0,u.assign)({},R,M,$)}else{var B=[A,C,S],U=B.map(function(q){return q[I]||{}});T[I]=(0,u.assign)({},U[0],U[1],U[2])}},_=0,N=Object.keys(T);_<N.length;_++){var D=N[_];O(D)}return T}function x(A,C,S){for(var T=[A,C,S],O={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},_=0,N=T;_<N.length;_++){var D=N[_];D.didParseCell&&O.didParseCell.push(D.didParseCell),D.willDrawCell&&O.willDrawCell.push(D.willDrawCell),D.didDrawCell&&O.didDrawCell.push(D.didDrawCell),D.willDrawPage&&O.willDrawPage.push(D.willDrawPage),D.didDrawPage&&O.didDrawPage.push(D.didDrawPage)}return O}function b(A,C){var S,T,O,_,N,D,I,R,M,$,B,U,q=(0,h.parseSpacing)(C.margin,40/A.scaleFactor()),W=(S=y(A,C.startY))!==null&&S!==void 0?S:q.top,L;C.showFoot===!0?L="everyPage":C.showFoot===!1?L="never":L=(T=C.showFoot)!==null&&T!==void 0?T:"everyPage";var V;C.showHead===!0?V="everyPage":C.showHead===!1?V="never":V=(O=C.showHead)!==null&&O!==void 0?O:"everyPage";var G=(_=C.useCss)!==null&&_!==void 0?_:!1,Z=C.theme||(G?"plain":"striped"),ee=!!C.horizontalPageBreak,he=(N=C.horizontalPageBreakRepeat)!==null&&N!==void 0?N:null;return{includeHiddenHtml:(D=C.includeHiddenHtml)!==null&&D!==void 0?D:!1,useCss:G,theme:Z,startY:W,margin:q,pageBreak:(I=C.pageBreak)!==null&&I!==void 0?I:"auto",rowPageBreak:(R=C.rowPageBreak)!==null&&R!==void 0?R:"auto",tableWidth:(M=C.tableWidth)!==null&&M!==void 0?M:"auto",showHead:V,showFoot:L,tableLineWidth:($=C.tableLineWidth)!==null&&$!==void 0?$:0,tableLineColor:(B=C.tableLineColor)!==null&&B!==void 0?B:200,horizontalPageBreak:ee,horizontalPageBreakRepeat:he,horizontalPageBreakBehaviour:(U=C.horizontalPageBreakBehaviour)!==null&&U!==void 0?U:"afterAllRows"}}function y(A,C){var S=A.getLastAutoTable(),T=A.scaleFactor(),O=A.pageNumber(),_=!1;if(S&&S.startPageNumber){var N=S.startPageNumber+S.pageNumber-1;_=N===O}return typeof C=="number"?C:(C==null||C===!1)&&_&&(S==null?void 0:S.finalY)!=null?S.finalY+20/T:null}function j(A,C,S){var T=C.head||[],O=C.body||[],_=C.foot||[];if(C.html){var N=C.includeHiddenHtml;if(S){var D=(0,f.parseHtml)(A,C.html,S,N,C.useCss)||{};T=D.head||T,O=D.body||T,_=D.foot||T}else console.error("Cannot parse html in non browser environment")}var I=C.columns||E(T,O,_);return{columns:I,head:T,body:O,foot:_}}function E(A,C,S){var T=A[0]||C[0]||S[0]||[],O=[];return Object.keys(T).filter(function(_){return _!=="_element"}).forEach(function(_){var N=1,D;Array.isArray(T)?D=T[parseInt(_)]:D=T[_],typeof D=="object"&&!Array.isArray(D)&&(N=(D==null?void 0:D.colSpan)||1);for(var I=0;I<N;I++){var R=void 0;Array.isArray(T)?R=O.length:R=_+(I>0?"_".concat(I):"");var M={dataKey:R};O.push(M)}}),O}},792:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(u,h,m,v){for(var g=function(y){y&&typeof y!="object"&&console.error("The options parameter should be of type object, is: "+typeof y),typeof y.extendWidth<"u"&&(y.tableWidth=y.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof y.margins<"u"&&(typeof y.margin>"u"&&(y.margin=y.margins),console.error("Use of deprecated option: margins, use margin instead.")),y.startY&&typeof y.startY!="number"&&(console.error("Invalid value for startY option",y.startY),delete y.startY),!y.didDrawPage&&(y.afterPageContent||y.beforePageContent||y.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),y.didDrawPage=function(_){u.applyStyles(u.userStyles),y.beforePageContent&&y.beforePageContent(_),u.applyStyles(u.userStyles),y.afterPageContent&&y.afterPageContent(_),u.applyStyles(u.userStyles),y.afterPageAdd&&_.pageNumber>1&&_.afterPageAdd(_),u.applyStyles(u.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(_){y[_]&&console.error('The "'.concat(_,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(_){var N=_[0],D=_[1];y[D]&&(console.error("Use of deprecated option ".concat(D,". Use ").concat(N," instead")),y[N]=y[D])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(_){var N=typeof _=="string"?_:_[0],D=typeof _=="string"?_:_[1];typeof y[N]<"u"&&(typeof y.styles[D]>"u"&&(y.styles[D]=y[N]),console.error("Use of deprecated option: "+N+", use the style "+D+" instead."))});for(var j=0,E=["styles","bodyStyles","headStyles","footStyles"];j<E.length;j++){var A=E[j];f(y[A]||{})}for(var C=y.columnStyles||{},S=0,T=Object.keys(C);S<T.length;S++){var O=T[S];f(C[O]||{})}},p=0,x=[h,m,v];p<x.length;p++){var b=x[p];g(b)}}c.default=d;function f(u){u.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),u.minCellHeight||(u.minCellHeight=u.rowHeight)):u.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),u.cellWidth||(u.cellWidth=u.columnWidth))}},260:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var f=d(796),u=d(172),h=d(420),m=function(){function x(b,y){this.pageNumber=1,this.pageCount=1,this.id=b.id,this.settings=b.settings,this.styles=b.styles,this.hooks=b.hooks,this.columns=y.columns,this.head=y.head,this.body=y.body,this.foot=y.foot}return x.prototype.getHeadHeight=function(b){return this.head.reduce(function(y,j){return y+j.getMaxCellHeight(b)},0)},x.prototype.getFootHeight=function(b){return this.foot.reduce(function(y,j){return y+j.getMaxCellHeight(b)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(b,y,j,E,A,C){for(var S=0,T=y;S<T.length;S++){var O=T[S],_=new u.CellHookData(b,this,j,E,A,C),N=O(_)===!1;if(j.text=Array.isArray(j.text)?j.text:[j.text],N)return!1}return!0},x.prototype.callEndPageHooks=function(b,y){b.applyStyles(b.userStyles);for(var j=0,E=this.hooks.didDrawPage;j<E.length;j++){var A=E[j];A(new u.HookData(b,this,y))}},x.prototype.callWillDrawPageHooks=function(b,y){for(var j=0,E=this.hooks.willDrawPage;j<E.length;j++){var A=E[j];A(new u.HookData(b,this,y))}},x.prototype.getWidth=function(b){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var y=this.columns.reduce(function(E,A){return E+A.wrappedWidth},0);return y}else{var j=this.settings.margin;return b-j.left-j.right}},x}();c.Table=m;var v=function(){function x(b,y,j,E,A){A===void 0&&(A=!1),this.height=0,this.raw=b,b instanceof f.HtmlRowInput&&(this.raw=b._element,this.element=b._element),this.index=y,this.section=j,this.cells=E,this.spansMultiplePages=A}return x.prototype.getMaxCellHeight=function(b){var y=this;return b.reduce(function(j,E){var A;return Math.max(j,((A=y.cells[E.index])===null||A===void 0?void 0:A.height)||0)},0)},x.prototype.hasRowSpan=function(b){var y=this;return b.filter(function(j){var E=y.cells[j.index];return E?E.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(b,y){return this.getMaxCellHeight(y)<=b},x.prototype.getMinimumRowHeight=function(b,y){var j=this;return b.reduce(function(E,A){var C=j.cells[A.index];if(!C)return 0;var S=y.getLineHeight(C.styles.fontSize),T=C.padding("vertical"),O=T+S;return O>E?O:E},0)},x}();c.Row=v;var g=function(){function x(b,y,j){var E,A;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=y,this.section=j,this.raw=b;var C=b;b!=null&&typeof b=="object"&&!Array.isArray(b)?(this.rowSpan=b.rowSpan||1,this.colSpan=b.colSpan||1,C=(A=(E=b.content)!==null&&E!==void 0?E:b.title)!==null&&A!==void 0?A:b,b._element&&(this.raw=b._element)):(this.rowSpan=1,this.colSpan=1);var S=C!=null?""+C:"",T=/\r\n|\r|\n/g;this.text=S.split(T)}return x.prototype.getTextPos=function(){var b;if(this.styles.valign==="top")b=this.y+this.padding("top");else if(this.styles.valign==="bottom")b=this.y+this.height-this.padding("bottom");else{var y=this.height-this.padding("vertical");b=this.y+y/2+this.padding("top")}var j;if(this.styles.halign==="right")j=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var E=this.width-this.padding("horizontal");j=this.x+E/2+this.padding("left")}else j=this.x+this.padding("left");return{x:j,y:b}},x.prototype.getContentHeight=function(b,y){y===void 0&&(y=1.15);var j=Array.isArray(this.text)?this.text.length:1,E=this.styles.fontSize/b*y,A=j*E+this.padding("vertical");return Math.max(A,this.styles.minCellHeight)},x.prototype.padding=function(b){var y=(0,h.parseSpacing)(this.styles.cellPadding,0);return b==="vertical"?y.top+y.bottom:b==="horizontal"?y.left+y.right:y[b]},x}();c.Cell=g;var p=function(){function x(b,y,j){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=b,this.raw=y,this.index=j}return x.prototype.getMaxCustomCellWidth=function(b){for(var y=0,j=0,E=b.allRows();j<E.length;j++){var A=E[j],C=A.cells[this.index];C&&typeof C.styles.cellWidth=="number"&&(y=Math.max(y,C.styles.cellWidth))}return y},x}();c.Column=p},356:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function d(f,u,h,m,v){if(f==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(f),p=1;p<arguments.length;p++){var x=arguments[p];if(x!=null)for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(g[b]=x[b])}return g}c.assign=d},972:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var f=d(744),u=d(260),h=d(324),m=d(796),v=d(356);function g(A,C){var S=new f.DocHandler(A),T=p(C,S.scaleFactor()),O=new u.Table(C,T);return(0,h.calculateWidths)(S,O),S.applyStyles(S.userStyles),O}c.createTable=g;function p(A,C){var S=A.content,T=j(S.columns);if(S.head.length===0){var O=b(T,"head");O&&S.head.push(O)}if(S.foot.length===0){var O=b(T,"foot");O&&S.foot.push(O)}var _=A.settings.theme,N=A.styles;return{columns:T,head:x("head",S.head,T,N,_,C),body:x("body",S.body,T,N,_,C),foot:x("foot",S.foot,T,N,_,C)}}function x(A,C,S,T,O,_){var N={},D=C.map(function(I,R){for(var M=0,$={},B=0,U=0,q=0,W=S;q<W.length;q++){var L=W[q];if(N[L.index]==null||N[L.index].left===0)if(U===0){var V=void 0;Array.isArray(I)?V=I[L.index-B-M]:V=I[L.dataKey];var G={};typeof V=="object"&&!Array.isArray(V)&&(G=(V==null?void 0:V.styles)||{});var Z=E(A,L,R,O,T,_,G),ee=new u.Cell(V,Z,A);$[L.dataKey]=ee,$[L.index]=ee,U=ee.colSpan-1,N[L.index]={left:ee.rowSpan-1,times:U}}else U--,B++;else N[L.index].left--,U=N[L.index].times,M++}return new u.Row(I,R,A,$)});return D}function b(A,C){var S={};return A.forEach(function(T){if(T.raw!=null){var O=y(C,T.raw);O!=null&&(S[T.dataKey]=O)}}),Object.keys(S).length>0?S:null}function y(A,C){if(A==="head"){if(typeof C=="object")return C.header||C.title||null;if(typeof C=="string"||typeof C=="number")return C}else if(A==="foot"&&typeof C=="object")return C.footer;return null}function j(A){return A.map(function(C,S){var T,O,_;return typeof C=="object"?_=(O=(T=C.dataKey)!==null&&T!==void 0?T:C.key)!==null&&O!==void 0?O:S:_=S,new u.Column(_,C,S)})}function E(A,C,S,T,O,_,N){var D=(0,m.getTheme)(T),I;A==="head"?I=O.headStyles:A==="body"?I=O.bodyStyles:A==="foot"&&(I=O.footStyles);var R=(0,v.assign)({},D.table,D[A],O.styles,I),M=O.columnStyles[C.dataKey]||O.columnStyles[C.index]||{},$=A==="body"?M:{},B=A==="body"&&S%2===0?(0,v.assign)({},D.alternateRow,O.alternateRowStyles):{},U=(0,m.defaultStyles)(_),q=(0,v.assign)({},U,R,B,$);return(0,v.assign)(q,N)}},664:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var f=d(420),u=d(260),h=d(744),m=d(356),v=d(136),g=d(224);function p(M,$){var B=$.settings,U=B.startY,q=B.margin,W={x:q.left,y:U},L=$.getHeadHeight($.columns)+$.getFootHeight($.columns),V=U+q.bottom+L;if(B.pageBreak==="avoid"){var G=$.body,Z=G.reduce(function(me,oe){return me+oe.height},0);V+=Z}var ee=new h.DocHandler(M);(B.pageBreak==="always"||B.startY!=null&&V>ee.pageSize().height)&&(R(ee),W.y=q.top),$.callWillDrawPageHooks(ee,W);var he=(0,m.assign)({},W);$.startPageNumber=ee.pageNumber(),B.horizontalPageBreak?x(ee,$,he,W):(ee.applyStyles(ee.userStyles),(B.showHead==="firstPage"||B.showHead==="everyPage")&&$.head.forEach(function(me){return O(ee,$,me,W,$.columns)}),ee.applyStyles(ee.userStyles),$.body.forEach(function(me,oe){var we=oe===$.body.length-1;T(ee,$,me,we,he,W,$.columns)}),ee.applyStyles(ee.userStyles),(B.showFoot==="lastPage"||B.showFoot==="everyPage")&&$.foot.forEach(function(me){return O(ee,$,me,W,$.columns)})),(0,f.addTableBorder)(ee,$,he,W),$.callEndPageHooks(ee,W),$.finalY=W.y,M.lastAutoTable=$,M.previousAutoTable=$,M.autoTable&&(M.autoTable.previous=$),ee.applyStyles(ee.userStyles)}c.drawTable=p;function x(M,$,B,U){var q=(0,g.calculateAllColumnsCanFitInPage)(M,$),W=$.settings;if(W.horizontalPageBreakBehaviour==="afterAllRows")q.forEach(function(Z,ee){M.applyStyles(M.userStyles),ee>0?I(M,$,B,U,Z.columns,!0):b(M,$,U,Z.columns),y(M,$,B,U,Z.columns),E(M,$,U,Z.columns)});else for(var L=-1,V=q[0],G=function(){var Z=L;if(V){M.applyStyles(M.userStyles);var ee=V.columns;L>=0?I(M,$,B,U,ee,!0):b(M,$,U,ee),Z=j(M,$,L+1,U,ee),E(M,$,U,ee)}var he=Z-L;q.slice(1).forEach(function(me){M.applyStyles(M.userStyles),I(M,$,B,U,me.columns,!0),j(M,$,L+1,U,me.columns,he),E(M,$,U,me.columns)}),L=Z};L<$.body.length-1;)G()}function b(M,$,B,U){var q=$.settings;M.applyStyles(M.userStyles),(q.showHead==="firstPage"||q.showHead==="everyPage")&&$.head.forEach(function(W){return O(M,$,W,B,U)})}function y(M,$,B,U,q){M.applyStyles(M.userStyles),$.body.forEach(function(W,L){var V=L===$.body.length-1;T(M,$,W,V,B,U,q)})}function j(M,$,B,U,q,W){M.applyStyles(M.userStyles),W=W??$.body.length;var L=Math.min(B+W,$.body.length),V=-1;return $.body.slice(B,L).forEach(function(G,Z){var ee=B+Z===$.body.length-1,he=D(M,$,ee,U);G.canEntireRowFit(he,q)&&(O(M,$,G,U,q),V=B+Z)}),V}function E(M,$,B,U){var q=$.settings;M.applyStyles(M.userStyles),(q.showFoot==="lastPage"||q.showFoot==="everyPage")&&$.foot.forEach(function(W){return O(M,$,W,B,U)})}function A(M,$,B){var U=B.getLineHeight(M.styles.fontSize),q=M.padding("vertical"),W=Math.floor(($-q)/U);return Math.max(0,W)}function C(M,$,B,U){var q={};M.spansMultiplePages=!0,M.height=0;for(var W=0,L=0,V=B.columns;L<V.length;L++){var G=V[L],Z=M.cells[G.index];if(Z){Array.isArray(Z.text)||(Z.text=[Z.text]);var ee=new u.Cell(Z.raw,Z.styles,Z.section);ee=(0,m.assign)(ee,Z),ee.text=[];var he=A(Z,$,U);Z.text.length>he&&(ee.text=Z.text.splice(he,Z.text.length));var me=U.scaleFactor(),oe=U.getLineHeightFactor();Z.contentHeight=Z.getContentHeight(me,oe),Z.contentHeight>=$&&(Z.contentHeight=$,ee.styles.minCellHeight-=$),Z.contentHeight>M.height&&(M.height=Z.contentHeight),ee.contentHeight=ee.getContentHeight(me,oe),ee.contentHeight>W&&(W=ee.contentHeight),q[G.index]=ee}}var we=new u.Row(M.raw,-1,M.section,q,!0);we.height=W;for(var ve=0,pe=B.columns;ve<pe.length;ve++){var G=pe[ve],ee=we.cells[G.index];ee&&(ee.height=we.height);var Z=M.cells[G.index];Z&&(Z.height=M.height)}return we}function S(M,$,B,U){var q=M.pageSize().height,W=U.settings.margin,L=W.top+W.bottom,V=q-L;$.section==="body"&&(V-=U.getHeadHeight(U.columns)+U.getFootHeight(U.columns));var G=$.getMinimumRowHeight(U.columns,M),Z=G<B;if(G>V)return console.error("Will not be able to print row ".concat($.index," correctly since it's minimum height is larger than page height")),!0;if(!Z)return!1;var ee=$.hasRowSpan(U.columns),he=$.getMaxCellHeight(U.columns)>V;return he?(ee&&console.error("The content of row ".concat($.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ee||U.settings.rowPageBreak==="avoid")}function T(M,$,B,U,q,W,L){var V=D(M,$,U,W);if(B.canEntireRowFit(V,L))O(M,$,B,W,L);else if(S(M,B,V,$)){var G=C(B,V,$,M);O(M,$,B,W,L),I(M,$,q,W,L),T(M,$,G,U,q,W,L)}else I(M,$,q,W,L),T(M,$,B,U,q,W,L)}function O(M,$,B,U,q){U.x=$.settings.margin.left;for(var W=0,L=q;W<L.length;W++){var V=L[W],G=B.cells[V.index];if(!G){U.x+=V.width;continue}M.applyStyles(G.styles),G.x=U.x,G.y=U.y;var Z=$.callCellHooks(M,$.hooks.willDrawCell,G,B,V,U);if(Z===!1){U.x+=V.width;continue}_(M,G,U);var ee=G.getTextPos();(0,v.default)(G.text,ee.x,ee.y,{halign:G.styles.halign,valign:G.styles.valign,maxWidth:Math.ceil(G.width-G.padding("left")-G.padding("right"))},M.getDocument()),$.callCellHooks(M,$.hooks.didDrawCell,G,B,V,U),U.x+=V.width}U.y+=B.height}function _(M,$,B){var U=$.styles;if(M.getDocument().setFillColor(M.getDocument().getFillColor()),typeof U.lineWidth=="number"){var q=(0,f.getFillStyle)(U.lineWidth,U.fillColor);q&&M.rect($.x,B.y,$.width,$.height,q)}else typeof U.lineWidth=="object"&&(U.fillColor&&M.rect($.x,B.y,$.width,$.height,"F"),N(M,$,B,U.lineWidth))}function N(M,$,B,U){var q,W,L,V;U.top&&(q=B.x,W=B.y,L=B.x+$.width,V=B.y,U.right&&(L+=.5*U.right),U.left&&(q-=.5*U.left),G(U.top,q,W,L,V)),U.bottom&&(q=B.x,W=B.y+$.height,L=B.x+$.width,V=B.y+$.height,U.right&&(L+=.5*U.right),U.left&&(q-=.5*U.left),G(U.bottom,q,W,L,V)),U.left&&(q=B.x,W=B.y,L=B.x,V=B.y+$.height,U.top&&(W-=.5*U.top),U.bottom&&(V+=.5*U.bottom),G(U.left,q,W,L,V)),U.right&&(q=B.x+$.width,W=B.y,L=B.x+$.width,V=B.y+$.height,U.top&&(W-=.5*U.top),U.bottom&&(V+=.5*U.bottom),G(U.right,q,W,L,V));function G(Z,ee,he,me,oe){M.getDocument().setLineWidth(Z),M.getDocument().line(ee,he,me,oe,"S")}}function D(M,$,B,U){var q=$.settings.margin.bottom,W=$.settings.showFoot;return(W==="everyPage"||W==="lastPage"&&B)&&(q+=$.getFootHeight($.columns)),M.pageSize().height-U.y-q}function I(M,$,B,U,q,W){q===void 0&&(q=[]),W===void 0&&(W=!1),M.applyStyles(M.userStyles),$.settings.showFoot==="everyPage"&&!W&&$.foot.forEach(function(V){return O(M,$,V,U,q)}),$.callEndPageHooks(M,U);var L=$.settings.margin;(0,f.addTableBorder)(M,$,B,U),R(M),$.pageNumber++,$.pageCount++,U.x=L.left,U.y=L.top,B.y=L.top,$.callWillDrawPageHooks(M,U),$.settings.showHead==="everyPage"&&($.head.forEach(function(V){return O(M,$,V,U,q)}),M.applyStyles(M.userStyles))}c.addPage=I;function R(M){var $=M.pageNumber();M.setPage($+1);var B=M.pageNumber();return B===$?(M.addPage(),!0):!1}},224:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var f=d(420);function u(m,v,g){var p;g===void 0&&(g={});var x=(0,f.getPageAvailableWidth)(m,v),b=new Map,y=[],j=[],E=[];v.settings.horizontalPageBreakRepeat,Array.isArray(v.settings.horizontalPageBreakRepeat)?E=v.settings.horizontalPageBreakRepeat:(typeof v.settings.horizontalPageBreakRepeat=="string"||typeof v.settings.horizontalPageBreakRepeat=="number")&&(E=[v.settings.horizontalPageBreakRepeat]),E.forEach(function(T){var O=v.columns.find(function(_){return _.dataKey===T||_.index===T});O&&!b.has(O.index)&&(b.set(O.index,!0),y.push(O.index),j.push(v.columns[O.index]),x-=O.wrappedWidth)});for(var A=!0,C=(p=g==null?void 0:g.start)!==null&&p!==void 0?p:0;C<v.columns.length;){if(b.has(C)){C++;continue}var S=v.columns[C].wrappedWidth;if(A||x>=S)A=!1,y.push(C),j.push(v.columns[C]),x-=S;else break;C++}return{colIndexes:y,columns:j,lastIndex:C-1}}function h(m,v){for(var g=[],p=0;p<v.columns.length;p++){var x=u(m,v,{start:p});x.columns.length&&(g.push(x),p=x.lastIndex)}return g}c.calculateAllColumnsCanFitInPage=h},324:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var f=d(420);function u(y,j){h(y,j);var E=[],A=0;j.columns.forEach(function(S){var T=S.getMaxCustomCellWidth(j);T?S.width=T:(S.width=S.wrappedWidth,E.push(S)),A+=S.width});var C=j.getWidth(y.pageSize().width)-A;C&&(C=m(E,C,function(S){return Math.max(S.minReadableWidth,S.minWidth)})),C&&(C=m(E,C,function(S){return S.minWidth})),C=Math.abs(C),!j.settings.horizontalPageBreak&&C>.1/y.scaleFactor()&&(C=C<1?C:Math.round(C),console.warn("Of the table content, ".concat(C," units width could not fit page"))),g(j),p(j,y),v(j)}c.calculateWidths=u;function h(y,j){var E=y.scaleFactor(),A=j.settings.horizontalPageBreak,C=(0,f.getPageAvailableWidth)(y,j);j.allRows().forEach(function(S){for(var T=0,O=j.columns;T<O.length;T++){var _=O[T],N=S.cells[_.index];if(N){var D=j.hooks.didParseCell;j.callCellHooks(y,D,N,S,_,null);var I=N.padding("horizontal");N.contentWidth=(0,f.getStringWidth)(N.text,N.styles,y)+I;var R=(0,f.getStringWidth)(N.text.join(" ").split(/[^\S\u00A0]+/),N.styles,y);if(N.minReadableWidth=R+N.padding("horizontal"),typeof N.styles.cellWidth=="number")N.minWidth=N.styles.cellWidth,N.wrappedWidth=N.styles.cellWidth;else if(N.styles.cellWidth==="wrap"||A===!0)N.contentWidth>C?(N.minWidth=C,N.wrappedWidth=C):(N.minWidth=N.contentWidth,N.wrappedWidth=N.contentWidth);else{var M=10/E;N.minWidth=N.styles.minCellWidth||M,N.wrappedWidth=N.contentWidth,N.minWidth>N.wrappedWidth&&(N.wrappedWidth=N.minWidth)}}}}),j.allRows().forEach(function(S){for(var T=0,O=j.columns;T<O.length;T++){var _=O[T],N=S.cells[_.index];if(N&&N.colSpan===1)_.wrappedWidth=Math.max(_.wrappedWidth,N.wrappedWidth),_.minWidth=Math.max(_.minWidth,N.minWidth),_.minReadableWidth=Math.max(_.minReadableWidth,N.minReadableWidth);else{var D=j.styles.columnStyles[_.dataKey]||j.styles.columnStyles[_.index]||{},I=D.cellWidth||D.minCellWidth;I&&typeof I=="number"&&(_.minWidth=I,_.wrappedWidth=I)}N&&(N.colSpan>1&&!_.minWidth&&(_.minWidth=N.minWidth),N.colSpan>1&&!_.wrappedWidth&&(_.wrappedWidth=N.minWidth))}})}function m(y,j,E){for(var A=j,C=y.reduce(function(M,$){return M+$.wrappedWidth},0),S=0;S<y.length;S++){var T=y[S],O=T.wrappedWidth/C,_=A*O,N=T.width+_,D=E(T),I=N<D?D:N;j-=I-T.width,T.width=I}if(j=Math.round(j*1e10)/1e10,j){var R=y.filter(function(M){return j<0?M.width>E(M):!0});R.length&&(j=m(R,j,E))}return j}c.resizeColumns=m;function v(y){for(var j={},E=1,A=y.allRows(),C=0;C<A.length;C++)for(var S=A[C],T=0,O=y.columns;T<O.length;T++){var _=O[T],N=j[_.index];if(E>1)E--,delete S.cells[_.index];else if(N)N.cell.height+=S.height,E=N.cell.colSpan,delete S.cells[_.index],N.left--,N.left<=1&&delete j[_.index];else{var D=S.cells[_.index];if(!D)continue;if(D.height=S.height,D.rowSpan>1){var I=A.length-C,R=D.rowSpan>I?I:D.rowSpan;j[_.index]={cell:D,left:R,row:S}}}}}function g(y){for(var j=y.allRows(),E=0;E<j.length;E++)for(var A=j[E],C=null,S=0,T=0,O=0;O<y.columns.length;O++){var _=y.columns[O];if(T-=1,T>1&&y.columns[O+1])S+=_.width,delete A.cells[_.index];else if(C){var N=C;delete A.cells[_.index],C=null,N.width=_.width+S}else{var N=A.cells[_.index];if(!N)continue;if(T=N.colSpan,S=0,N.colSpan>1){C=N,S+=_.width;continue}N.width=_.width+S}}}function p(y,j){for(var E={count:0,height:0},A=0,C=y.allRows();A<C.length;A++){for(var S=C[A],T=0,O=y.columns;T<O.length;T++){var _=O[T],N=S.cells[_.index];if(N){j.applyStyles(N.styles,!0);var D=N.width-N.padding("horizontal");if(N.styles.overflow==="linebreak")N.text=j.splitTextToSize(N.text,D+1/j.scaleFactor(),{fontSize:N.styles.fontSize});else if(N.styles.overflow==="ellipsize")N.text=x(N.text,D,N.styles,j,"...");else if(N.styles.overflow==="hidden")N.text=x(N.text,D,N.styles,j,"");else if(typeof N.styles.overflow=="function"){var I=N.styles.overflow(N.text,D);typeof I=="string"?N.text=[I]:N.text=I}N.contentHeight=N.getContentHeight(j.scaleFactor(),j.getLineHeightFactor());var R=N.contentHeight/N.rowSpan;N.rowSpan>1&&E.count*E.height<R*N.rowSpan?E={height:R,count:N.rowSpan}:E&&E.count>0&&E.height>R&&(R=E.height),R>S.height&&(S.height=R)}}E.count--}}function x(y,j,E,A,C){return y.map(function(S){return b(S,j,E,A,C)})}c.ellipsize=x;function b(y,j,E,A,C){var S=1e4*A.scaleFactor();if(j=Math.ceil(j*S)/S,j>=(0,f.getStringWidth)(y,E,A))return y;for(;j<(0,f.getStringWidth)(y+C,E,A)&&!(y.length<=1);)y=y.substring(0,y.length-1);return y.trim()+C}},964:function(l){if(typeof r>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}l.exports=r}},a={};function i(l){var c=a[l];if(c!==void 0)return c.exports;var d=a[l]={exports:{}};return s[l].call(d.exports,d,d.exports,i),d.exports}var o={};return function(){var l=o;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var c=i(340),d=i(776),f=i(664),u=i(972),h=i(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return h.Table}});var m=i(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return m.CellHookData}});var v=i(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return v.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return v.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return v.Row}});function g(j){(0,c.default)(j)}l.applyPlugin=g;function p(j,E){var A=(0,d.parseInput)(j,E),C=(0,u.createTable)(j,A);(0,f.drawTable)(j,C)}function x(j,E){var A=(0,d.parseInput)(j,E);return(0,u.createTable)(j,A)}l.__createTable=x;function b(j,E){(0,f.drawTable)(j,E)}l.__drawTable=b;try{var y=i(964);y.jsPDF&&(y=y.jsPDF),g(y)}catch{}l.default=p}(),o}()})})(khe);function Ohe({ticket:e,onClose:t,onEdit:r}){var m,v,g,p,x,b;const{toast:s}=_t(),[a,i]=w.useState("details"),o=y=>{switch(y){case gr.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case gr.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case gr.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case gr.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case gr.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},l=y=>{switch(y){case hn.LOW:return"bg-green-50 text-green-700 border-green-200";case hn.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case hn.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case hn.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},c=y=>{switch(y){case"covered":return"Covered by Warranty";case"partial":return"Partially Covered";case"not_covered":return"Not Covered";case"extended":return"Extended Warranty";case"expired":return"Warranty Expired";default:return"Unknown"}},d=y=>{switch(y){case"covered":return"bg-green-50 text-green-700 border-green-200";case"partial":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"not_covered":return"bg-red-50 text-red-700 border-red-200";case"extended":return"bg-blue-50 text-blue-700 border-blue-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=(()=>{const y=e.parts.reduce((E,A)=>E+A.total,0),j=e.labor.reduce((E,A)=>E+A.total,0);return{partsTotal:y,laborTotal:j,grandTotal:y+j}})(),h=()=>{try{const y=new Ot;y.setFontSize(20),y.text("Service Ticket",105,15,{align:"center"}),y.setFontSize(12),y.text(`Ticket #: ${e.id}`,20,30),y.text(`Date: ${ft(e.createdAt)}`,20,40),y.text(`Customer: ${e.customerId}`,20,50),y.text(`Status: ${e.status.replace("_"," ")}`,20,60),y.setFontSize(16),y.text("Service Details",20,75),y.setFontSize(12),y.text(`Title: ${e.title}`,20,85);const j=y.splitTextToSize(e.description,170);if(y.text(j,20,95),e.parts.length>0&&(y.setFontSize(16),y.text("Parts",20,120),y.autoTable({startY:125,head:[["Part Number","Description","Quantity","Unit Cost","Total"]],body:e.parts.map(A=>[A.partNumber,A.description,A.quantity,Ie(A.unitCost),Ie(A.total)]),foot:[["","","","Parts Total:",Ie(u.partsTotal)]]})),e.labor.length>0){const A=y.lastAutoTable.finalY||125;y.setFontSize(16),y.text("Labor",20,A+15),y.autoTable({startY:A+20,head:[["Description","Hours","Rate","Total"]],body:e.labor.map(C=>[C.description,C.hours,Ie(C.rate),Ie(C.total)]),foot:[["","","Labor Total:",Ie(u.laborTotal)]]})}const E=y.lastAutoTable.finalY||125;if(y.setFontSize(14),y.text(`Grand Total: ${Ie(u.grandTotal)}`,150,E+20,{align:"right"}),e.notes){y.setFontSize(16),y.text("Notes",20,E+35),y.setFontSize(12);const A=y.splitTextToSize(e.notes,170);y.text(A,20,E+45)}y.save(`service-ticket-${e.id}.pdf`),s({title:"PDF Generated",description:"Service ticket PDF has been downloaded"})}catch(y){console.error("Error generating PDF:",y),s({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:e.title}),n.jsxs(Be,{children:["Service Ticket #",e.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>r(e),size:"sm",children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Ticket"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{children:[n.jsxs(Ar,{value:a,onValueChange:i,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"details",children:"Details"}),n.jsx(Ze,{value:"parts-labor",children:"Parts & Labor"}),n.jsx(Ze,{value:"notes",children:"Notes"})]}),n.jsxs(tt,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",o(e.status)),children:e.status.replace("_"," ").toUpperCase()}),n.jsxs(Fe,{className:Ge("ri-badge-status",l(e.priority)),children:[e.priority.toUpperCase()," PRIORITY"]}),((m=e.customFields)==null?void 0:m.warrantyStatus)&&n.jsx(Fe,{className:Ge("ri-badge-status",d(e.customFields.warrantyStatus)),children:c(e.customFields.warrantyStatus)}),((v=e.customFields)==null?void 0:v.customerAuthorization)&&n.jsx(Fe,{className:"bg-green-50 text-green-700 border-green-200",children:"AUTHORIZED"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),n.jsx("p",{className:"font-medium",children:e.vehicleId||"No Vehicle"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsx("p",{className:"font-medium",children:e.assignedTo||"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),n.jsx("p",{className:"font-medium",children:ft(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"font-medium",children:e.scheduledDate?ft(e.scheduledDate):"Not scheduled"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Completion"}),n.jsx("p",{className:"font-medium",children:((g=e.customFields)==null?void 0:g.estimatedCompletionDate)||"Not specified"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.description})})]}),n.jsxs("div",{className:"p-3 bg-blue-50 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"font-medium text-blue-700",children:"Customer Portal Access:"}),n.jsx("span",{className:"text-blue-700",children:((p=e.customFields)==null?void 0:p.customerPortalAccess)!==!1?"Enabled":"Disabled"})]}),n.jsx("p",{className:"text-sm text-blue-600 mt-1",children:((x=e.customFields)==null?void 0:x.customerPortalAccess)!==!1?"Customer can view this ticket in the portal":"Customer cannot view this ticket in the portal"})]})]}),n.jsxs(tt,{value:"parts-labor",className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Parts"}),e.parts.length>0?n.jsxs("div",{className:"space-y-3",children:[e.parts.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:y.description}),n.jsx(Fe,{variant:"outline",children:y.partNumber})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",y.quantity," × ",Ie(y.unitCost)]})]}),n.jsx("div",{className:"font-bold",children:Ie(y.total)})]},y.id)),n.jsx("div",{className:"flex justify-end p-2",children:n.jsxs("span",{className:"font-medium",children:["Parts Total: ",Ie(u.partsTotal)]})})]}):n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{children:"No parts added to this service ticket"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Labor"}),e.labor.length>0?n.jsxs("div",{className:"space-y-3",children:[e.labor.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:y.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[y.hours," hours × ",Ie(y.rate),"/hr"]})]}),n.jsx("div",{className:"font-bold",children:Ie(y.total)})]},y.id)),n.jsx("div",{className:"flex justify-end p-2",children:n.jsxs("span",{className:"font-medium",children:["Labor Total: ",Ie(u.laborTotal)]})})]}):n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{children:"No labor added to this service ticket"})})]}),n.jsx(ue,{className:"bg-muted/30",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Parts Total:"}),n.jsx("span",{children:Ie(u.partsTotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Labor Total:"}),n.jsx("span",{children:Ie(u.laborTotal)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Grand Total:"}),n.jsx("span",{children:Ie(u.grandTotal)})]})]})})})]}),n.jsxs(tt,{value:"notes",className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Customer Notes"}),e.notes?n.jsx("div",{className:"p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})}):n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{children:"No customer notes for this service ticket"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Technician Notes"}),(b=e.customFields)!=null&&b.technicianNotes?n.jsx("div",{className:"p-3 bg-yellow-50 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap text-yellow-800",children:e.customFields.technicianNotes})}):n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{children:"No technician notes for this service ticket"})})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Close"}),n.jsxs(J,{variant:"outline",onClick:h,children:[n.jsx(uf,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),n.jsxs(J,{onClick:()=>r(e),children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Ticket"]})]})]})]})})}function Lhe({ticket:e,onClose:t}){var l;const r=c=>{switch(c){case gr.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case gr.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case gr.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case gr.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case gr.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},s=c=>{switch(c){case hn.LOW:return"bg-green-50 text-green-700 border-green-200";case hn.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case hn.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case hn.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=(()=>{const c=e.parts.reduce((f,u)=>f+u.total,0),d=e.labor.reduce((f,u)=>f+u.total,0);return{partsTotal:c,laborTotal:d,grandTotal:c+d}})(),o=()=>{try{const c=new Ot;c.setFontSize(20),c.text("Service Ticket",105,15,{align:"center"}),c.setFontSize(12),c.text(`Ticket #: ${e.id}`,20,30),c.text(`Date: ${ft(e.createdAt)}`,20,40),c.text(`Status: ${e.status.replace("_"," ")}`,20,50),c.setFontSize(16),c.text("Service Details",20,65),c.setFontSize(12),c.text(`Title: ${e.title}`,20,75);const d=c.splitTextToSize(e.description,170);if(c.text(d,20,85),e.parts.length>0&&(c.setFontSize(16),c.text("Parts",20,110),c.autoTable({startY:115,head:[["Description","Quantity","Unit Cost","Total"]],body:e.parts.map(u=>[u.description,u.quantity,Ie(u.unitCost),Ie(u.total)]),foot:[["","","Parts Total:",Ie(i.partsTotal)]]})),e.labor.length>0){const u=c.lastAutoTable.finalY||115;c.setFontSize(16),c.text("Labor",20,u+15),c.autoTable({startY:u+20,head:[["Description","Hours","Rate","Total"]],body:e.labor.map(h=>[h.description,h.hours,Ie(h.rate),Ie(h.total)]),foot:[["","","Labor Total:",Ie(i.laborTotal)]]})}const f=c.lastAutoTable.finalY||115;if(c.setFontSize(14),c.text(`Grand Total: ${Ie(i.grandTotal)}`,150,f+20,{align:"right"}),e.notes){c.setFontSize(16),c.text("Notes",20,f+35),c.setFontSize(12);const u=c.splitTextToSize(e.notes,170);c.text(u,20,f+45)}c.save(`service-ticket-${e.id}.pdf`)}catch(c){console.error("Error generating PDF:",c)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Service Ticket"}),n.jsxs(Be,{children:["Ticket #",e.id]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Au,{className:"h-5 w-5 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-blue-700",children:"Customer Portal View"})]}),n.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"This is how your service ticket appears in the customer portal"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:e.title}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",r(e.status)),children:e.status.replace("_"," ").toUpperCase()}),n.jsxs(Fe,{className:Ge("ri-badge-status",s(e.priority)),children:[e.priority.toUpperCase()," PRIORITY"]})]})]}),n.jsxs(Ar,{defaultValue:"details",className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"details",children:"Details"}),n.jsx(Ze,{value:"parts-labor",children:"Parts & Labor"}),n.jsx(Ze,{value:"timeline",children:"Timeline"})]}),n.jsxs(tt,{value:"details",className:"space-y-4",children:[n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Description"})}),n.jsx(fe,{children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.description})})]}),n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Schedule Information"})}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:ft(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"font-medium",children:e.scheduledDate?ft(e.scheduledDate):"Not scheduled"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Completion"}),n.jsx("p",{className:"font-medium",children:((l=e.customFields)==null?void 0:l.estimatedCompletionDate)||"Not specified"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Completed Date"}),n.jsx("p",{className:"font-medium",children:e.completedDate?ft(e.completedDate):"Not completed"})]})]})})]}),e.notes&&n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Notes"})}),n.jsx(fe,{children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]})]}),n.jsxs(tt,{value:"parts-labor",className:"space-y-6",children:[n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Parts"})}),n.jsx(fe,{children:e.parts.length>0?n.jsxs("div",{className:"space-y-3",children:[e.parts.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:c.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",c.quantity," × ",Ie(c.unitCost)]})]}),n.jsx("div",{className:"font-bold",children:Ie(c.total)})]},c.id)),n.jsx("div",{className:"flex justify-end p-2",children:n.jsxs("span",{className:"font-medium",children:["Parts Total: ",Ie(i.partsTotal)]})})]}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:n.jsx("p",{children:"No parts added to this service ticket"})})})]}),n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Labor"})}),n.jsx(fe,{children:e.labor.length>0?n.jsxs("div",{className:"space-y-3",children:[e.labor.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:c.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.hours," hours × ",Ie(c.rate),"/hr"]})]}),n.jsx("div",{className:"font-bold",children:Ie(c.total)})]},c.id)),n.jsx("div",{className:"flex justify-end p-2",children:n.jsxs("span",{className:"font-medium",children:["Labor Total: ",Ie(i.laborTotal)]})})]}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:n.jsx("p",{children:"No labor added to this service ticket"})})})]}),n.jsx(ue,{className:"bg-muted/30",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Parts Total:"}),n.jsx("span",{children:Ie(i.partsTotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Labor Total:"}),n.jsx("span",{children:Ie(i.laborTotal)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Grand Total:"}),n.jsx("span",{children:Ie(i.grandTotal)})]})]})})})]}),n.jsx(tt,{value:"timeline",className:"space-y-4",children:n.jsxs(ue,{children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Service Timeline"})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),n.jsx("div",{className:"font-medium",children:"Ticket Created"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ft(e.createdAt)})]}),e.status!==gr.OPEN&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),n.jsx("div",{className:"font-medium",children:"Work Started"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt.getTime()+864e5).toLocaleDateString()})]}),e.status===gr.WAITING_PARTS&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-orange-500"}),n.jsx("div",{className:"font-medium",children:"Waiting for Parts"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt.getTime()+1728e5).toLocaleDateString()})]}),e.status===gr.COMPLETED&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),n.jsx("div",{className:"font-medium",children:"Service Completed"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:e.completedDate?ft(e.completedDate):"Date not recorded"})]})]})})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{variant:"outline",onClick:t,children:"Close"}),n.jsxs(J,{variant:"outline",onClick:o,children:[n.jsx(uf,{className:"h-4 w-4 mr-2"}),"Print PDF"]})]})]})})]})})}function Rhe(){const{tickets:e,createTicket:t,updateTicket:r,deleteTicket:s,updateTicketStatus:a}=Q9(),{toast:i}=_t(),[o,l]=w.useState(""),[c,d]=w.useState("all"),[f,u]=w.useState("all"),[h,m]=w.useState(!1),[v,g]=w.useState(!1),[p,x]=w.useState(!1),[b,y]=w.useState(!1),[j,E]=w.useState(null),A=R=>{switch(R){case gr.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case gr.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case gr.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case gr.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case gr.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=R=>{switch(R){case hn.LOW:return"bg-green-50 text-green-700 border-green-200";case hn.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case hn.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case hn.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=e.filter(R=>R.title.toLowerCase().includes(o.toLowerCase())||R.description.toLowerCase().includes(o.toLowerCase())||R.customerId.toLowerCase().includes(o.toLowerCase())||R.id.toLowerCase().includes(o.toLowerCase())).filter(R=>c==="all"||R.status===c).filter(R=>f==="all"||R.priority===f),T=()=>{E(null),m(!0)},O=R=>{E(R),m(!0),g(!1)},_=R=>{E(R),g(!0)},N=R=>{E(R),x(!0)},D=async R=>{try{j?(await r(j.id,R),i({title:"Success",description:"Service ticket updated successfully"})):(await t(R),i({title:"Success",description:"Service ticket created successfully"})),m(!1),E(null)}catch{i({title:"Error",description:`Failed to ${j?"update":"create"} service ticket`,variant:"destructive"})}},I=R=>{i({title:"Customer Added",description:`${R.firstName} ${R.lastName} has been added.`}),E(null),y(!1),m(!0)};return n.jsxs("div",{className:"space-y-8",children:[b&&n.jsx(gf,{onClose:()=>y(!1),onSuccess:I}),h&&n.jsx(_fe,{ticket:j||void 0,onSave:D,onCancel:()=>{m(!1),E(null)}}),v&&j&&n.jsx(Ohe,{ticket:j,onClose:()=>g(!1),onEdit:O}),p&&j&&n.jsx(Lhe,{ticket:j,onClose:()=>x(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Service Operations"}),n.jsx("p",{className:"ri-page-description",children:"Manage service tickets and maintenance schedules"})]}),n.jsxs(J,{className:"shadow-sm",onClick:T,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Service Ticket"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Tickets"}),n.jsx(Au,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"All service requests"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),n.jsx(Au,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(R=>R.status===gr.IN_PROGRESS).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(ur,{className:"h-3 w-3 mr-1"}),"Currently working"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Waiting Parts"}),n.jsx(Au,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.filter(R=>R.status===gr.WAITING_PARTS).length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(ur,{className:"h-3 w-3 mr-1"}),"Parts on order"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Revenue"}),n.jsx($t,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Ie(e.reduce((R,M)=>R+M.parts.reduce(($,B)=>$+B.total,0)+M.labor.reduce(($,B)=>$+B.total,0),0))}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Service revenue"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search service tickets...",value:o,onChange:R=>l(R.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(We,{value:c,onValueChange:d,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:gr.OPEN,children:"Open"}),n.jsx(K,{value:gr.IN_PROGRESS,children:"In Progress"}),n.jsx(K,{value:gr.WAITING_PARTS,children:"Waiting Parts"}),n.jsx(K,{value:gr.COMPLETED,children:"Completed"}),n.jsx(K,{value:gr.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(We,{value:f,onValueChange:u,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Priority"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Priorities"}),n.jsx(K,{value:hn.LOW,children:"Low"}),n.jsx(K,{value:hn.MEDIUM,children:"Medium"}),n.jsx(K,{value:hn.HIGH,children:"High"}),n.jsx(K,{value:hn.URGENT,children:"Urgent"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Service Tickets"}),n.jsx(Be,{children:"Manage service requests and maintenance schedules"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[S.map(R=>{var M;return n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:R.title}),n.jsx(Fe,{className:Ge("ri-badge-status",C(R.priority)),children:R.priority.toUpperCase()}),n.jsx(Fe,{className:Ge("ri-badge-status",A(R.status)),children:R.status.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(As,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:R.customerId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(As,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Assigned:"}),n.jsx("span",{className:"ml-1",children:R.assignedTo||"Unassigned"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Scheduled:"}),n.jsx("span",{className:"ml-1",children:R.scheduledDate?ft(R.scheduledDate):"Not scheduled"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(ur,{className:"h-3 w-3 mr-2 text-orange-500"}),n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{className:"ml-1",children:ft(R.createdAt)})]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:R.description}),R.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",R.notes]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm",children:[n.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Parts:"})," ",Ie(R.parts.reduce(($,B)=>$+B.total,0))]}),n.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Labor:"})," ",Ie(R.labor.reduce(($,B)=>$+B.total,0))]}),n.jsxs("span",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded-md font-semibold",children:[n.jsx("span",{className:"font-medium",children:"Total:"})," ",Ie(R.parts.reduce(($,B)=>$+B.total,0)+R.labor.reduce(($,B)=>$+B.total,0))]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>_(R),children:"View"}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>O(R),children:"Edit"}),((M=R.customFields)==null?void 0:M.customerPortalAccess)!==!1&&n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>N(R),children:"Customer View"})]})]},R.id)}),S.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Au,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No service tickets found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function $he(){return n.jsx(Us,{children:n.jsx(Vt,{path:"/*",element:n.jsx(Rhe,{})})})}function yz(){const[e,t]=w.useState([]),[r,s]=w.useState(!1);w.useEffect(()=>{a()},[]);const a=()=>{const p=En("renter-insight-deliveries",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",status:Kt.SCHEDULED,scheduledDate:new Date("2024-01-25"),address:{street:"123 Main St",city:"Springfield",state:"IL",zipCode:"62701",country:"USA"},driver:"Driver-001",notes:"Customer prefers morning delivery",customFields:{contactPhone:"(555) 123-4567",contactEmail:"customer@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"10:00"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",status:Kt.IN_TRANSIT,scheduledDate:new Date("2024-01-20"),deliveredDate:void 0,address:{street:"456 Oak Ave",city:"Chicago",state:"IL",zipCode:"60601",country:"USA"},driver:"Driver-002",notes:"Call customer 30 minutes before arrival",customFields:{contactPhone:"(555) 987-6543",contactEmail:"customer2@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"14:30",departureTime:"2024-01-20T08:00:00",departureNotes:"Left dealership on schedule",customerNotified:"2024-01-20T08:15:00",notificationMethod:"SMS",etaUpdated:"2024-01-20T10:30:00"},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-20")}]);t(p)},i=p=>{rn("renter-insight-deliveries",p)};return{deliveries:e,loading:r,getDeliveriesByCustomerId:p=>e.filter(x=>x.customerId===p),getDeliveriesByVehicleId:p=>e.filter(x=>x.vehicleId===p),getDeliveryById:p=>e.find(x=>x.id===p),createDelivery:async p=>{s(!0);try{const x={id:Math.random().toString(36).substr(2,9),customerId:p.customerId||"",vehicleId:p.vehicleId||"",status:p.status||Kt.SCHEDULED,scheduledDate:p.scheduledDate||new Date,deliveredDate:p.deliveredDate,address:p.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:p.driver||"",notes:p.notes||"",customFields:p.customFields||{},createdAt:new Date,updatedAt:new Date},b=[...e,x];return t(b),i(b),x}finally{s(!1)}},updateDelivery:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,...x,updatedAt:new Date}:y);t(b),i(b)},deleteDelivery:async p=>{const x=e.filter(b=>b.id!==p);t(x),i(x)},updateDeliveryStatus:async(p,x)=>{const b=e.map(y=>y.id===p?{...y,status:x,deliveredDate:x===Kt.DELIVERED?new Date:y.deliveredDate,updatedAt:new Date}:y);t(b),i(b)},sendNotification:async(p,x,b)=>{if(!e.find(E=>E.id===p))return;const j=e.map(E=>E.id===p?{...E,customFields:{...E.customFields,customerNotified:new Date().toISOString(),notificationMethod:x==="sms"?"SMS":"Email",lastNotificationMessage:b},updatedAt:new Date}:E);return t(j),i(j),await new Promise(E=>setTimeout(E,1e3)),!0},updateETA:async(p,x)=>{if(!e.find(j=>j.id===p))return;const y=e.map(j=>j.id===p?{...j,customFields:{...j.customFields,estimatedArrival:x,etaUpdated:new Date().toISOString()},updatedAt:new Date}:j);t(y),i(y)},addDeliveryPhotos:async(p,x,b)=>{if(!e.find(A=>A.id===p))return;const j=x.map((A,C)=>({url:A,caption:b[C]||""})),E=e.map(A=>{var C,S;return A.id===p?{...A,customFields:{...A.customFields,deliveryPhotos:[...((C=A.customFields)==null?void 0:C.deliveryPhotos)||[],...x],photoDetails:[...((S=A.customFields)==null?void 0:S.photoDetails)||[],...j]},updatedAt:new Date}:A});t(E),i(E)}}}function bz({delivery:e,vehicles:t,customers:r,onSave:s,onCancel:a}){var b,y,j,E,A,C,S,T,O,_,N,D,I;const{toast:i}=_t(),[o,l]=w.useState(!1),[c,d]=w.useState(!1),[f,u]=w.useState({customerId:"",vehicleId:"",status:Kt.SCHEDULED,scheduledDate:new Date,address:{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:"",notes:"",customFields:{contactPhone:"",contactEmail:"",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"",departureTime:"",departureNotes:"",deliveryNotes:"",deliveryPhotos:[]}});w.useEffect(()=>{var R,M,$,B,U,q,W,L,V;e&&u({...e,customFields:{...e.customFields,contactPhone:((R=e.customFields)==null?void 0:R.contactPhone)||"",contactEmail:((M=e.customFields)==null?void 0:M.contactEmail)||"",sendSMSUpdates:(($=e.customFields)==null?void 0:$.sendSMSUpdates)!==!1,sendEmailUpdates:((B=e.customFields)==null?void 0:B.sendEmailUpdates)!==!1,estimatedArrival:((U=e.customFields)==null?void 0:U.estimatedArrival)||"",departureTime:((q=e.customFields)==null?void 0:q.departureTime)||"",departureNotes:((W=e.customFields)==null?void 0:W.departureNotes)||"",deliveryNotes:((L=e.customFields)==null?void 0:L.deliveryNotes)||"",deliveryPhotos:((V=e.customFields)==null?void 0:V.deliveryPhotos)||[]}})},[e]);const{getRootProps:h,getInputProps:m}=Cx({accept:{"image/*":[]},onDrop:R=>{const M=R.map($=>URL.createObjectURL($));u($=>{var B;return{...$,customFields:{...$.customFields,deliveryPhotos:[...((B=$.customFields)==null?void 0:B.deliveryPhotos)||[],...M]}}}),i({title:"Photos Added",description:`Added ${R.length} delivery photos`})}}),v=R=>{R==="__add_new_customer__"?d(!0):u(M=>({...M,customerId:R}))},g=R=>{u(M=>({...M,customerId:R.id})),d(!1),i({title:"Customer Added",description:`${R.firstName} ${R.lastName} has been added as a customer.`})},p=async R=>{var M,$,B,U;if(R.preventDefault(),!f.customerId||!f.vehicleId||!f.scheduledDate){i({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!((M=f.address)!=null&&M.street)||!(($=f.address)!=null&&$.city)||!((B=f.address)!=null&&B.state)||!((U=f.address)!=null&&U.zipCode)){i({title:"Validation Error",description:"Please provide a complete delivery address",variant:"destructive"});return}l(!0);try{await s(f),i({title:"Success",description:`Delivery ${e?"updated":"scheduled"} successfully`})}catch{i({title:"Error",description:`Failed to ${e?"update":"schedule"} delivery`,variant:"destructive"})}finally{l(!1)}},x=R=>{u(M=>{var $,B;return{...M,customFields:{...M.customFields,deliveryPhotos:((B=($=M.customFields)==null?void 0:$.deliveryPhotos)==null?void 0:B.filter(U=>U!==R))||[]}}})};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&n.jsx(gf,{onClose:()=>d(!1),onSuccess:g}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Delivery":"Schedule Delivery"}),n.jsx(Be,{children:e?"Update delivery details":"Schedule a new delivery"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(We,{value:f.customerId,onValueChange:v,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsxs(Ve,{className:"z-50",children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>v("__add_new_customer__"),children:[n.jsx(Et,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),r.map(R=>n.jsx(K,{value:R.id,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("span",{children:[R.firstName," ",R.lastName]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:R.phone})]})},R.id)),r.length===0&&n.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:"No customers found"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle *"}),n.jsxs(We,{value:f.vehicleId,onValueChange:R=>u(M=>({...M,vehicleId:R})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select vehicle"})}),n.jsx(Ve,{className:"z-50",children:t.map(R=>n.jsxs(K,{value:R.id,children:[R.year," ",R.make," ",R.model]},R.id))})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"scheduledDate",children:"Scheduled Date *"}),n.jsx(Pe,{id:"scheduledDate",type:"date",value:f.scheduledDate?new Date(f.scheduledDate).toISOString().split("T")[0]:"",onChange:R=>u(M=>({...M,scheduledDate:R.target.value?new Date(R.target.value):new Date}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"estimatedArrival",children:"Estimated Arrival Time"}),n.jsx(Pe,{id:"estimatedArrival",type:"time",value:((b=f.customFields)==null?void 0:b.estimatedArrival)||"",onChange:R=>u(M=>({...M,customFields:{...M.customFields,estimatedArrival:R.target.value}}))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(We,{value:f.status,onValueChange:R=>u(M=>({...M,status:R})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{className:"z-50",children:[n.jsx(K,{value:Kt.SCHEDULED,children:"Scheduled"}),n.jsx(K,{value:Kt.IN_TRANSIT,children:"In Transit"}),n.jsx(K,{value:Kt.DELIVERED,children:"Delivered"}),n.jsx(K,{value:Kt.CANCELLED,children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"driver",children:"Driver"}),n.jsx(Pe,{id:"driver",value:f.driver||"",onChange:R=>u(M=>({...M,driver:R.target.value})),placeholder:"Driver name"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Address"}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"street",children:"Street Address *"}),n.jsx(Pe,{id:"street",value:((y=f.address)==null?void 0:y.street)||"",onChange:R=>u(M=>({...M,address:{...M.address,street:R.target.value}})),placeholder:"123 Main St"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"city",children:"City *"}),n.jsx(Pe,{id:"city",value:((j=f.address)==null?void 0:j.city)||"",onChange:R=>u(M=>({...M,address:{...M.address,city:R.target.value}})),placeholder:"City"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"state",children:"State *"}),n.jsx(Pe,{id:"state",value:((E=f.address)==null?void 0:E.state)||"",onChange:R=>u(M=>({...M,address:{...M.address,state:R.target.value}})),placeholder:"State"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"zipCode",children:"Zip Code *"}),n.jsx(Pe,{id:"zipCode",value:((A=f.address)==null?void 0:A.zipCode)||"",onChange:R=>u(M=>({...M,address:{...M.address,zipCode:R.target.value}})),placeholder:"Zip Code"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"country",children:"Country"}),n.jsx(Pe,{id:"country",value:((C=f.address)==null?void 0:C.country)||"USA",onChange:R=>u(M=>({...M,address:{...M.address,country:R.target.value}})),placeholder:"Country"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"contactPhone",children:"Contact Phone"}),n.jsx(Pe,{id:"contactPhone",value:((S=f.customFields)==null?void 0:S.contactPhone)||"",onChange:R=>u(M=>({...M,customFields:{...M.customFields,contactPhone:R.target.value}})),placeholder:"(555) 123-4567"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"contactEmail",children:"Contact Email"}),n.jsx(Pe,{id:"contactEmail",type:"email",value:((T=f.customFields)==null?void 0:T.contactEmail)||"",onChange:R=>u(M=>({...M,customFields:{...M.customFields,contactEmail:R.target.value}})),placeholder:"customer@example.com"})]})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"sendSMSUpdates",checked:((O=f.customFields)==null?void 0:O.sendSMSUpdates)!==!1,onCheckedChange:R=>u(M=>({...M,customFields:{...M.customFields,sendSMSUpdates:!!R}}))}),n.jsx(ae,{htmlFor:"sendSMSUpdates",children:"Send SMS updates"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"sendEmailUpdates",checked:((_=f.customFields)==null?void 0:_.sendEmailUpdates)!==!1,onCheckedChange:R=>u(M=>({...M,customFields:{...M.customFields,sendEmailUpdates:!!R}}))}),n.jsx(ae,{htmlFor:"sendEmailUpdates",children:"Send email updates"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),(f.status===Kt.IN_TRANSIT||f.status===Kt.DELIVERED)&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"departureTime",children:"Departure Time"}),n.jsx(Pe,{id:"departureTime",type:"datetime-local",value:((N=f.customFields)==null?void 0:N.departureTime)||"",onChange:R=>u(M=>({...M,customFields:{...M.customFields,departureTime:R.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"departureNotes",children:"Departure Notes"}),n.jsx(Pe,{id:"departureNotes",value:((D=f.customFields)==null?void 0:D.departureNotes)||"",onChange:R=>u(M=>({...M,customFields:{...M.customFields,departureNotes:R.target.value}})),placeholder:"Notes about departure"})]})]}),f.status===Kt.DELIVERED&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"deliveredDate",children:"Delivery Date"}),n.jsx(Pe,{id:"deliveredDate",type:"datetime-local",value:f.deliveredDate?new Date(f.deliveredDate).toISOString().slice(0,16):"",onChange:R=>u(M=>({...M,deliveredDate:R.target.value?new Date(R.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Delivery Notes"}),n.jsx(ir,{id:"notes",value:f.notes||"",onChange:R=>u(M=>({...M,notes:R.target.value})),placeholder:"Add any notes about this delivery",rows:3})]})]}),(f.status===Kt.DELIVERED||f.status===Kt.IN_TRANSIT)&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),n.jsxs("div",{...h(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[n.jsx("input",{...m()}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(Camera,{className:"h-8 w-8 mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop photos here, or click to select files"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload photos for delivery verification"})]})]}),((I=f.customFields)==null?void 0:I.deliveryPhotos)&&f.customFields.deliveryPhotos.length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:f.customFields.deliveryPhotos.map((R,M)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:R,alt:`Delivery photo ${M+1}`,className:"h-24 w-full object-cover rounded-md"}),n.jsx(J,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>x(R),children:n.jsx(qt,{className:"h-3 w-3"})})]},M))})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:a,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Scheduling..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Schedule"," Delivery"]})})]})]})})]})]})}function Fhe({delivery:e,onAddMilestone:t}){const s=(()=>{try{const a=[],i=e.customFields||{},o=c=>c?new Date(c):new Date;return a.push({id:"scheduled",title:"Delivery Scheduled",description:`Scheduled for ${ft(e.scheduledDate)}`,date:o(e.createdAt),icon:Ur}),[Kt.IN_TRANSIT,Kt.DELIVERED].includes(e.status)&&(a.push({id:"preparation",title:"Preparation Complete",description:"Vehicle prepared and ready for delivery",date:new Date(new Date(e.scheduledDate).getTime()-864e5),icon:an}),a.push({id:"in_transit",title:"In Transit",description:i.departureNotes||"Vehicle has left the dealership",date:o(i.departureTime),icon:Ba})),i.etaUpdated&&i.estimatedArrival&&a.push({id:"eta_update",title:"ETA Updated",description:`New estimated arrival: ${i.estimatedArrival}`,date:o(i.etaUpdated),icon:ur}),i.customerNotified&&a.push({id:"customer_notified",title:"Customer Notified",description:`${i.notificationMethod||"SMS"} notification sent to customer`,date:o(i.customerNotified),icon:Pn}),e.status===Kt.DELIVERED&&(a.push({id:"arrived",title:"Arrived at Destination",description:"Vehicle arrived at delivery location",date:o(e.deliveredDate),icon:fc}),a.push({id:"delivered",title:"Delivery Confirmed",description:i.deliveryNotes||"Delivery completed successfully",date:o(e.deliveredDate),icon:an}),Array.isArray(i.deliveryPhotos)&&i.deliveryPhotos.length>0&&a.push({id:"photos",title:"Delivery Photos",description:`${i.deliveryPhotos.length} photo(s) captured`,date:o(e.deliveredDate),icon:Yl})),Array.from(new Map(a.map(c=>[c.id,c])).values()).sort((c,d)=>c.date.getTime()-d.date.getTime())}catch(a){return console.error("Failed to generate milestones:",a),[]}})();return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Ba,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Timeline"]}),n.jsx(Be,{children:"Track the progress of this delivery"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"relative pl-8 space-y-8",children:[n.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-px bg-border"}),s.map((a,i)=>{var l;const o=a.icon;return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:Ge("absolute left-[-21px] w-6 h-6 rounded-full flex items-center justify-center","bg-primary text-primary-foreground"),children:n.jsx(o,{className:"h-3 w-3"})}),n.jsxs("div",{className:"mb-1 flex items-center",children:[n.jsx("h3",{className:"text-base font-semibold",children:a.title}),n.jsx(Fe,{className:"ml-2 text-xs",variant:"outline",children:ft(a.date)})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),a.id==="photos"&&((l=e.customFields)==null?void 0:l.deliveryPhotos)&&n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:e.customFields.deliveryPhotos.map((c,d)=>n.jsx("img",{src:c,alt:`Delivery photo ${d+1}`,className:"h-20 w-full object-cover rounded-md"},d))})]},a.id)})]})})]})}function Mhe({delivery:e,vehicle:t,onClose:r,onEdit:s,onSendNotification:a}){var m,v,g,p,x,b,y,j,E;const{toast:i}=_t(),[o,l]=w.useState("details"),[c,d]=w.useState(!1),f=A=>{switch(A){case Kt.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case Kt.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Kt.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case Kt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=async A=>{if(a){d(!0);try{await a(e.id,A),i({title:"Notification Sent",description:`${A==="sms"?"SMS":"Email"} notification sent successfully`})}catch{i({title:"Error",description:`Failed to send ${A==="sms"?"SMS":"email"} notification`,variant:"destructive"})}finally{d(!1)}}},h=()=>{var A,C;try{const S=new Ot;if(S.setFontSize(20),S.text("Delivery Information Sheet",105,15,{align:"center"}),S.setFontSize(12),S.text(`Delivery #: ${e.id}`,20,30),S.text(`Status: ${e.status.replace("_"," ")}`,20,40),S.text(`Scheduled Date: ${ft(e.scheduledDate)}`,20,50),S.setFontSize(16),S.text("Vehicle Information",20,65),S.setFontSize(12),t?(S.text(`Vehicle: ${t.year} ${t.make} ${t.model}`,20,75),S.text(`VIN: ${t.vin}`,20,85)):S.text(`Vehicle ID: ${e.vehicleId}`,20,75),S.setFontSize(16),S.text("Delivery Address",20,105),S.setFontSize(12),S.text(`${e.address.street}`,20,115),S.text(`${e.address.city}, ${e.address.state} ${e.address.zipCode}`,20,125),S.text(`${e.address.country}`,20,135),S.setFontSize(16),S.text("Contact Information",20,155),S.setFontSize(12),S.text(`Customer ID: ${e.customerId}`,20,165),(A=e.customFields)!=null&&A.contactPhone&&S.text(`Phone: ${e.customFields.contactPhone}`,20,175),(C=e.customFields)!=null&&C.contactEmail&&S.text(`Email: ${e.customFields.contactEmail}`,20,185),e.notes){S.setFontSize(16),S.text("Delivery Notes",20,205),S.setFontSize(12);const T=S.splitTextToSize(e.notes,170);S.text(T,20,215)}S.setFontSize(16),S.text("Signatures",20,245),S.setFontSize(12),S.text("Driver: _______________________________",20,255),S.text("Customer: _____________________________",20,270),S.save(`delivery-${e.id}.pdf`),i({title:"PDF Generated",description:"Delivery information sheet has been downloaded"})}catch(S){console.error("Error generating PDF:",S),i({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Delivery Details"}),n.jsxs(Be,{children:["Delivery #",e.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>s(e),size:"sm",children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{children:[n.jsxs(Ar,{value:o,onValueChange:l,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"details",children:"Details"}),n.jsx(Ze,{value:"timeline",children:"Timeline"}),n.jsx(Ze,{value:"photos",children:"Photos"})]}),n.jsxs(tt,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",f(e.status)),children:e.status.replace("_"," ").toUpperCase()}),e.driver&&n.jsxs(Fe,{variant:"outline",children:["Driver: ",e.driver]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),n.jsx("p",{className:"font-medium",children:t?`${t.year} ${t.make} ${t.model}`:e.vehicleId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"font-medium",children:ft(e.scheduledDate)})]}),e.deliveredDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivered Date"}),n.jsx("p",{className:"font-medium",children:ft(e.deliveredDate)})]}),((m=e.customFields)==null?void 0:m.estimatedArrival)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Arrival"}),n.jsx("p",{className:"font-medium",children:e.customFields.estimatedArrival})]}),((v=e.customFields)==null?void 0:v.departureTime)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Departure Time"}),n.jsx("p",{className:"font-medium",children:new Date(e.customFields.departureTime).toLocaleString()})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivery Address"}),n.jsxs("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:[n.jsx("p",{children:e.address.street}),n.jsxs("p",{children:[e.address.city,", ",e.address.state," ",e.address.zipCode]}),n.jsx("p",{children:e.address.country})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Contact Information"}),n.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[((g=e.customFields)==null?void 0:g.contactPhone)&&n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx($m,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:e.customFields.contactPhone})]}),((p=e.customFields)==null?void 0:p.contactEmail)&&n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(on,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:e.customFields.contactEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notification Preferences"}),n.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["SMS Updates: ",((x=e.customFields)==null?void 0:x.sendSMSUpdates)!==!1?"Enabled":"Disabled"]})]}),n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(on,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Email Updates: ",((b=e.customFields)==null?void 0:b.sendEmailUpdates)!==!1?"Enabled":"Disabled"]})]})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]}),(e.status===Kt.SCHEDULED||e.status===Kt.IN_TRANSIT)&&n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>u("sms"),disabled:c||!((y=e.customFields)!=null&&y.contactPhone),children:[n.jsx(Pn,{className:"h-4 w-4 mr-2"}),"Send SMS Update"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>u("email"),disabled:c||!((j=e.customFields)!=null&&j.contactEmail),children:[n.jsx(on,{className:"h-4 w-4 mr-2"}),"Send Email Update"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:h,children:[n.jsx(uf,{className:"h-4 w-4 mr-2"}),"Print Delivery Sheet"]})]})]}),n.jsx(tt,{value:"timeline",children:n.jsx(Fhe,{delivery:e})}),n.jsxs(tt,{value:"photos",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),(E=e.customFields)!=null&&E.deliveryPhotos&&e.customFields.deliveryPhotos.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.customFields.deliveryPhotos.map((A,C)=>n.jsx("div",{className:"overflow-hidden rounded-md",children:n.jsx("img",{src:A,alt:`Delivery photo ${C+1}`,className:"w-full h-auto object-cover"})},C))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Yl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No delivery photos available"}),e.status!==Kt.DELIVERED&&n.jsx("p",{className:"text-sm",children:"Photos will be added during delivery"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(J,{onClick:()=>s(e),children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]})]})]})]})})}function Bhe({delivery:e,onSend:t,onCancel:r}){var j,E,A;const{toast:s}=_t(),[a,i]=w.useState(!1),[o,l]=w.useState("sms"),[c,d]=w.useState(""),[f,u]=w.useState(""),[h,m]=w.useState(""),v=((j=e.customer)==null?void 0:j.name)||"Customer",g=e.vehicle?`${e.vehicle.year||""} ${e.vehicle.make||""} ${e.vehicle.model||""}`.trim():"your Home/RV",p=!!((E=e.customer)!=null&&E.phone),x=!!((A=e.customer)!=null&&A.email),b=()=>{try{const C=f||new Date(e.scheduledDate).toLocaleDateString(),S=c||"the scheduled time";return o==="sms"?`Hi ${v}, your delivery of ${g} is scheduled for ${C} at ${S}. Reply HELP for assistance or STOP to opt out.`:`Dear ${v},

We're writing to confirm the delivery of ${g} scheduled for ${C} at ${S}.

If you have any questions or need to reschedule, please contact our delivery team.

Thank you,
The Delivery Team`}catch(C){return console.error("Failed to generate default message:",C),""}};w.useEffect(()=>{try{const C=b();m(C)}catch(C){console.error("Message generation error:",C)}},[o,c,f]);const y=async C=>{if(C.preventDefault(),!h.trim()){s({title:"Validation Error",description:"Please enter a message",variant:"destructive"});return}if(!f||!c){s({title:"Missing ETA",description:"Please select both a date and time for estimated arrival.",variant:"destructive"});return}if(o==="sms"&&!p){s({title:"Missing Phone Number",description:"Customer does not have a valid phone number for SMS.",variant:"destructive"});return}if(o==="email"&&!x){s({title:"Missing Email Address",description:"Customer does not have a valid email address.",variant:"destructive"});return}i(!0);try{await t(e.id,{type:o,estimatedArrival:`${f}T${c}`,message:h,updateDelivery:!0}),s({title:"Notification Sent",description:`${o.toUpperCase()} sent successfully.`}),r()}catch(S){console.error("Notification send failed:",S),s({title:"Error",description:`Failed to send ${o==="sms"?"SMS":"Email"} notification`,variant:"destructive"})}finally{i(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Send ETA Notification"}),n.jsx(Be,{children:"Notify the customer about delivery status"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-sm mb-4 text-muted-foreground",children:["Delivering to: ",n.jsx("strong",{children:v}),n.jsx("br",{}),"Home/RV: ",n.jsx("strong",{children:g}),n.jsx("br",{}),o==="sms"&&!p&&n.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid phone number on file"}),o==="email"&&!x&&n.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid email address on file"})]}),n.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notificationType",children:"Notification Type"}),n.jsxs(We,{value:o,onValueChange:C=>l(C),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{className:"z-50",children:[n.jsx(K,{value:"sms",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Pn,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:"SMS"})]})}),n.jsx(K,{value:"email",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(on,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:"Email"})]})})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"w-1/2",children:[n.jsx(ae,{htmlFor:"arrivalDate",children:"Arrival Date"}),n.jsx(Pe,{id:"arrivalDate",type:"date",value:f,onChange:C=>u(C.target.value)})]}),n.jsxs("div",{className:"w-1/2",children:[n.jsx(ae,{htmlFor:"arrivalTime",children:"Arrival Time"}),n.jsx(Pe,{id:"arrivalTime",type:"time",value:c,onChange:C=>d(C.target.value)})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"message",children:"Message"}),n.jsx(ir,{id:"message",value:h,onChange:C=>m(C.target.value),rows:o==="sms"?3:6,maxLength:o==="sms"?160:void 0}),o==="sms"&&n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[n.jsxs("span",{children:[h.length," characters"]}),n.jsxs("span",{children:[160-h.length," remaining"]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(hl,{className:"h-4 w-4 mr-2"}),"Send Notification"]})})]})]})]})]})})}function zhe({onCapture:e,onCancel:t}){const{toast:r}=_t(),[s,a]=w.useState(!1),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,f]=w.useState([]),[u,h]=w.useState(!1),m=w.useRef(null);w.useRef(null);const v=async j=>new Promise(E=>{const A=new Image;A.onload=()=>{const C=document.createElement("canvas"),S=C.getContext("2d"),T=800,O=T/A.width;C.width=T,C.height=A.height*O,S==null||S.drawImage(A,0,0,C.width,C.height),E(C.toDataURL("image/jpeg",.7))},A.src=j});Cx({accept:{"image/*":[]},multiple:!0,maxFiles:10,onDrop:async j=>{try{const E=j.map(C=>new Promise(S=>{const T=new FileReader;T.onload=async()=>{const O=await v(T.result);S(O)},T.readAsDataURL(C)})),A=await Promise.all(E);o(C=>[...C,...A]),c(C=>[...C,...A.map(()=>"")]),f(C=>[...C,...A.map(()=>[])]),r({title:"Upload Successful",description:`${j.length} photo(s) added.`})}catch(E){console.error("File processing error:",E),r({title:"Upload Error",description:"An error occurred while processing files.",variant:"destructive"})}},onError:j=>{r({title:"Upload Failed",description:j.message,variant:"destructive"})}});const g=()=>{var j;(j=m.current)!=null&&j.srcObject&&(m.current.srcObject.getTracks().forEach(E=>E.stop()),m.current.srcObject=null,h(!1),r({title:"Camera Stopped"}))},p=(j,E)=>{c(A=>{const C=[...A];return C[j]=E,C})},x=(j,E)=>{const A=E.split(",").map(C=>C.trim()).filter(Boolean);f(C=>{const S=[...C];return S[j]=A,S})},b=j=>{o(E=>E.filter((A,C)=>C!==j)),c(E=>E.filter((A,C)=>C!==j)),f(E=>E.filter((A,C)=>C!==j))},y=async()=>{if(!i.length){r({title:"No Photos",description:"Please add or take at least one photo.",variant:"destructive"});return}a(!0);try{await e(i,l,d),r({title:"Photos Saved",description:`${i.length} photo(s) saved.`})}catch(j){console.error("Save error:",j),r({title:"Save Failed",description:"Unable to save photos.",variant:"destructive"})}finally{a(!1),g()}};return w.useEffect(()=>()=>{g()},[]),n.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex justify-center items-center p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(be,{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Delivery Photo Capture"}),n.jsx(Be,{children:"Take or upload photos and add optional captions & tags"})]}),n.jsx(J,{size:"sm",variant:"ghost",onClick:t,children:n.jsx(qt,{className:"w-4 h-4"})})]}),n.jsxs(fe,{className:"space-y-6",children:[i.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"font-semibold text-lg",children:["Photos (",i.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map((j,E)=>{var A;return n.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:j,className:"w-full h-40 object-cover rounded-md",alt:`Photo ${E+1}`}),n.jsx(J,{size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>b(E),children:n.jsx(qt,{className:"w-4 h-4"})})]}),n.jsx(ae,{htmlFor:`caption-${E}`,children:"Caption"}),n.jsx(Pe,{id:`caption-${E}`,value:l[E]||"",placeholder:"Optional caption",onChange:C=>p(E,C.target.value)}),n.jsx(ae,{htmlFor:`tags-${E}`,children:"Tags (comma-separated)"}),n.jsx(Pe,{id:`tags-${E}`,value:((A=d[E])==null?void 0:A.join(", "))||"",placeholder:"e.g. front, side, receipt",onChange:C=>x(E,C.target.value)})]},E)})})]}),n.jsxs("div",{className:"flex justify-end space-x-2 border-t pt-4",children:[n.jsx(J,{onClick:t,variant:"outline",disabled:s,children:"Cancel"}),n.jsxs(J,{onClick:y,disabled:s||i.length===0,children:[s?n.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-white rounded-full mr-2"}):n.jsx(Tj,{className:"w-4 h-4 mr-2"}),s?"Saving...":"Save Photos"]})]})]})]})})}function Uhe({delivery:e,className:t}){const r=w.useRef(null);return w.useEffect(()=>{if(r.current){const s=r.current;s.innerHTML="";const a=document.createElement("div");a.className="relative w-full h-full bg-muted/30 rounded-lg overflow-hidden",a.innerHTML=`
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-center">
            <div class="text-muted-foreground mb-2">Map would display here in a real application</div>
            <div class="flex flex-col items-center">
              <div class="text-sm font-medium">Delivery Address:</div>
              <div class="text-sm">${e.address.street}</div>
              <div class="text-sm">${e.address.city}, ${e.address.state} ${e.address.zipCode}</div>
            </div>
          </div>
        </div>
        
        <!-- Simulated map markers -->
        <div class="absolute bottom-4 right-4 bg-background p-2 rounded-md shadow-sm">
          <div class="flex items-center space-x-2 text-xs">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-green-500 mr-1"></div>
              <span>Origin</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-red-500 mr-1"></div>
              <span>Destination</span>
            </div>
            ${e.status==="in_transit"?`
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-blue-500 mr-1"></div>
                <span>Current Location</span>
              </div>
            `:""}
          </div>
        </div>
        
        <!-- Simulated route -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
          <svg width="200" height="100" viewBox="0 0 200 100">
            <path d="M20,80 Q100,20 180,80" stroke="#3b82f6" stroke-width="3" fill="none" stroke-dasharray="5,5" />
            ${e.status==="in_transit"?`
              <circle cx="100" cy="50" r="5" fill="#3b82f6" />
            `:""}
            <circle cx="20" cy="80" r="5" fill="#22c55e" />
            <circle cx="180" cy="80" r="5" fill="#ef4444" />
          </svg>
        </div>
      `,s.appendChild(a)}},[e]),n.jsxs(ue,{className:t,children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(fc,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),n.jsx(Be,{children:"Track delivery location and route"})]}),n.jsx(fe,{children:n.jsx("div",{ref:r,className:"h-64 w-full",children:n.jsx("div",{className:"flex items-center justify-center h-full bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ba,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading map..."})]})})})})]})}function Vhe({deliveries:e,onScheduleDelivery:t}){const r=e.length,s=e.filter(h=>h.status===Kt.SCHEDULED).length,a=e.filter(h=>h.status===Kt.IN_TRANSIT).length,i=e.filter(h=>h.status===Kt.DELIVERED).length,o=new Date,l=new Date(o.getTime()+7*24*60*60*1e3),c=e.filter(h=>h.status===Kt.SCHEDULED&&h.scheduledDate>=o&&h.scheduledDate<=l).sort((h,m)=>h.scheduledDate.getTime()-m.scheduledDate.getTime()),d=e.filter(h=>h.status===Kt.IN_TRANSIT).sort((h,m)=>h.scheduledDate.getTime()-m.scheduledDate.getTime()),f=new Date(o.getTime()-30*24*60*60*1e3),u=e.filter(h=>h.status===Kt.DELIVERED&&h.deliveredDate&&h.deliveredDate>=f).sort((h,m)=>{var v,g;return(((v=m.deliveredDate)==null?void 0:v.getTime())||0)-(((g=h.deliveredDate)==null?void 0:g.getTime())||0)}).slice(0,5);return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[{title:"Total Deliveries",count:r,icon:n.jsx(Ba,{className:"h-4 w-4 text-blue-800"}),description:"All time",bg:"bg-blue-100"},{title:"Scheduled",count:s,icon:n.jsx(Ur,{className:"h-4 w-4 text-yellow-700"}),description:"Upcoming deliveries",bg:"bg-yellow-100"},{title:"In Transit",count:a,icon:n.jsx(Ba,{className:"h-4 w-4 text-orange-700"}),description:"Currently in transit",bg:"bg-orange-100"},{title:"Completed",count:i,icon:n.jsx(an,{className:"h-4 w-4 text-green-700"}),description:"Successful deliveries",bg:"bg-green-100"}].map((h,m)=>n.jsxs(ue,{className:`${h.bg} border-0 shadow-sm`,children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:h.title}),h.icon]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:h.count}),n.jsxs("p",{className:"text-xs text-gray-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),h.description]})]})]},m))}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(je,{children:"Upcoming Deliveries"}),n.jsxs(J,{size:"sm",onClick:t,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Schedule"]})]}),n.jsx(Be,{children:"Deliveries scheduled for the next 7 days"})]}),n.jsx(fe,{children:c.length>0?n.jsx("div",{className:"space-y-4",children:c.map(h=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(Ur,{className:"h-5 w-5 text-blue-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:ft(h.scheduledDate)})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",h.customerId]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[h.address.city,", ",h.address.state]})]})]},h.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ur,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No upcoming deliveries"}),n.jsx("p",{className:"text-sm",children:"Schedule a new delivery to get started"})]})})]}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"In-Transit Deliveries"}),n.jsx(Be,{children:"Deliveries currently on the road"})]}),n.jsx(fe,{children:d.length>0?n.jsx("div",{className:"space-y-4",children:d.map(h=>{var m;return n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(Ba,{className:"h-5 w-5 text-yellow-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["ETA: ",((m=h.customFields)==null?void 0:m.estimatedArrival)||"Unknown"]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Driver: ",h.driver||"Unassigned"]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[h.address.city,", ",h.address.state]})]})]},h.id)})}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ba,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No deliveries in transit"})]})})]})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsx("div",{className:"md:col-span-2",children:d.length>0?n.jsx(Uhe,{delivery:d[0]}):n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(fc,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),n.jsx(Be,{children:"No active deliveries to display"})]}),n.jsx(fe,{children:n.jsx("div",{className:"h-64 w-full flex items-center justify-center bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx(fc,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"No active deliveries to track"})]})})})]})}),n.jsxs(ue,{children:[n.jsxs(be,{children:[n.jsx(je,{children:"Recent Deliveries"}),n.jsx(Be,{children:"Recently completed deliveries"})]}),n.jsx(fe,{children:u.length>0?n.jsx("div",{className:"space-y-4",children:u.map(h=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(an,{className:"h-5 w-5 text-green-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.deliveredDate?ft(h.deliveredDate):"Unknown"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",h.customerId]})]})]},h.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(an,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No recent deliveries"})]})})]})]})]})}function wD(){const{deliveries:e,createDelivery:t,updateDelivery:r,deleteDelivery:s,updateDeliveryStatus:a,sendNotification:i,updateETA:o,addDeliveryPhotos:l}=yz(),{vehicles:c}=Ud(),{leads:d}=Mo(),{toast:f}=_t(),[u,h]=w.useState(""),[m,v]=w.useState("all"),[g,p]=w.useState(!1),[x,b]=w.useState(!1),[y,j]=w.useState(!1),[E,A]=w.useState(!1),[C,S]=w.useState(null),T=B=>{switch(B){case Kt.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case Kt.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Kt.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case Kt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},O=e.filter(B=>B.id.toLowerCase().includes(u.toLowerCase())||B.customerId.toLowerCase().includes(u.toLowerCase())||B.address.city.toLowerCase().includes(u.toLowerCase())).filter(B=>m==="all"||B.status===m),_=()=>{S(null),p(!0)},N=B=>{S(B),p(!0),b(!1)},D=B=>{S(B),b(!0)},I=async B=>{try{C?(await r(C.id,B),f({title:"Success",description:"Delivery updated successfully"})):(await t(B),f({title:"Success",description:"Delivery scheduled successfully"})),p(!1),S(null)}catch{f({title:"Error",description:`Failed to ${C?"update":"schedule"} delivery`,variant:"destructive"})}},R=async(B,U)=>{try{return U.estimatedArrival&&await o(B,U.estimatedArrival),await i(B,U.type,U.message),!0}catch(q){throw console.error("Error sending notification:",q),q}},M=async(B,U)=>{if(C)try{await l(C.id,B,U),C.status===Kt.IN_TRANSIT&&await a(C.id,Kt.DELIVERED),A(!1),f({title:"Photos Added",description:`${B.length} photos added to delivery`})}catch{f({title:"Error",description:"Failed to add photos",variant:"destructive"})}},$=B=>c.find(U=>U.id===B);return n.jsxs("div",{className:"space-y-8",children:[g&&n.jsx(bz,{delivery:C||void 0,vehicles:c,customers:d,onSave:I,onCancel:()=>{p(!1),S(null)}}),x&&C&&n.jsx(Mhe,{delivery:C,vehicle:$(C.vehicleId),onClose:()=>b(!1),onEdit:N,onSendNotification:async(B,U)=>{b(!1),j(!0)}}),y&&C&&n.jsx(Bhe,{delivery:C,onSend:R,onCancel:()=>{j(!1),b(!0)}}),E&&C&&n.jsx(zhe,{onCapture:M,onCancel:()=>{A(!1),b(!0)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Delivery Tracker"}),n.jsx("p",{className:"ri-page-description",children:"Track vehicle deliveries and logistics"})]}),n.jsxs(J,{className:"shadow-sm",onClick:_,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Schedule Delivery"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Deliveries"}),n.jsx(Ba,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"All deliveries"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Scheduled"}),n.jsx(Ba,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.filter(B=>B.status===Kt.SCHEDULED).length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Upcoming deliveries"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"In Transit"}),n.jsx(Ba,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(B=>B.status===Kt.IN_TRANSIT).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Ba,{className:"h-3 w-3 mr-1"}),"On the road"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Delivered"}),n.jsx(Ba,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(B=>B.status===Kt.DELIVERED).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Completed"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Notifications"}),n.jsx(Pn,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.filter(B=>{var U;return(U=B.customFields)==null?void 0:U.customerNotified}).length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Pn,{className:"h-3 w-3 mr-1"}),"Sent to customers"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search deliveries...",value:u,onChange:B=>h(B.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("select",{value:m,onChange:B=>v(B.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:Kt.SCHEDULED,children:"Scheduled"}),n.jsx("option",{value:Kt.IN_TRANSIT,children:"In Transit"}),n.jsx("option",{value:Kt.DELIVERED,children:"Delivered"}),n.jsx("option",{value:Kt.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Deliveries"}),n.jsx(Be,{children:"Track and manage vehicle deliveries"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[O.map(B=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Delivery #",B.id]}),n.jsx(Fe,{className:Ge("ri-badge-status",T(B.status)),children:B.status.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(As,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:B.customerId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(As,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Driver:"}),n.jsx("span",{className:"ml-1",children:B.driver||"Not assigned"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Scheduled:"}),n.jsx("span",{className:"ml-1",children:ft(B.scheduledDate)})]}),B.deliveredDate&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Delivered:"}),n.jsx("span",{className:"ml-1",children:ft(B.deliveredDate)})]})]}),n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"flex items-start bg-muted/30 p-2 rounded-md",children:[n.jsx(fc,{className:"h-3 w-3 mr-2 mt-0.5 text-red-500"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[B.address.street,", ",B.address.city,", ",B.address.state," ",B.address.zipCode]})]}),B.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-2 bg-blue-50 p-2 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",B.notes]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D(B),children:[n.jsx(uc,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>N(B),children:"Edit"}),B.status===Kt.IN_TRANSIT&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{S(B),A(!0)},children:[n.jsx(Yl,{className:"h-3 w-3 mr-1"}),"Photos"]}),(B.status===Kt.SCHEDULED||B.status===Kt.IN_TRANSIT)&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{S(B),j(!0)},children:[n.jsx(Pn,{className:"h-3 w-3 mr-1"}),"Notify"]})]})]},B.id)),O.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Ba,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No deliveries found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function Whe(){const{deliveries:e}=yz(),[t,r]=w.useState(!1);return n.jsxs(n.Fragment,{children:[t&&n.jsx(bz,{vehicles:[],customers:[],onSave:async()=>{},onCancel:()=>r(!1)}),n.jsx(Vhe,{deliveries:e,onScheduleDelivery:()=>r(!0)})]})}function qhe(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(Whe,{})}),n.jsx(Vt,{path:"/list",element:n.jsx(wD,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(wD,{})})]})}var Cn=(e=>(e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.APPROVED="approved",e.REJECTED="rejected",e))(Cn||{}),br=(e=>(e.PENDING="pending",e.PASSED="passed",e.FAILED="failed",e.NA="na",e))(br||{}),Rs=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(Rs||{}),lb=(e=>(e.OPEN="open",e.IN_PROGRESS="in_progress",e.RESOLVED="resolved",e.VERIFIED="verified",e))(lb||{}),Iu=(e=>(e.INSPECTOR="inspector",e.MANAGER="manager",e.QUALITY_CONTROL="quality_control",e))(Iu||{});function Hhe(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState(!1);w.useEffect(()=>{o()},[]);const o=()=>{const _=En("renter-insight-pdi-templates",[{id:"1",name:"RV Pre-Delivery Inspection",description:"Standard PDI checklist for recreational vehicles",vehicleType:bt.RV,isActive:!0,sections:[{id:"1-1",templateId:"1",name:"Exterior",description:"Exterior inspection items",orderIndex:1,items:[{id:"1-1-1",sectionId:"1-1",name:"Exterior Body Condition",description:"Check for scratches, dents, or damage",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-1-2",sectionId:"1-1",name:"Roof Inspection",description:"Check roof seals, vents, and AC units",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")},{id:"1-1-3",sectionId:"1-1",name:"Exterior Photos",description:"Take photos of all sides of the vehicle",itemType:"photo",isRequired:!0,orderIndex:3,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")},{id:"1-2",templateId:"1",name:"Interior",description:"Interior inspection items",orderIndex:2,items:[{id:"1-2-1",sectionId:"1-2",name:"Interior Cleanliness",description:"Verify interior is clean and free of debris",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-2-2",sectionId:"1-2",name:"Furniture Condition",description:"Check all furniture for damage or defects",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Motorhome Pre-Delivery Inspection",description:"Comprehensive PDI checklist for motorhomes",vehicleType:bt.MOTORHOME,isActive:!0,sections:[],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),N=En("renter-insight-pdi-inspections",[{id:"1",templateId:"1",vehicleId:"1",inspectorId:"user-001",status:Cn.IN_PROGRESS,startedAt:new Date("2024-01-15"),notes:"Initial inspection for new RV",items:[{id:"1-1",inspectionId:"1",templateItemId:"1-1-1",status:br.PASSED,notes:"No exterior damage found",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"1-2",inspectionId:"1",templateItemId:"1-1-2",status:br.FAILED,notes:"Roof seal damaged near AC unit",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],defects:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",title:"Roof Seal Damage",description:"Damaged roof seal near AC unit on passenger side",severity:Rs.MEDIUM,status:lb.OPEN,assignedTo:"user-002",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],photos:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",defectId:"1-1",url:"https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg",caption:"Damaged roof seal",createdAt:new Date("2024-01-15")}],signoffs:[],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);t(_),s(N)},l=_=>{rn("renter-insight-pdi-templates",_)},c=_=>{rn("renter-insight-pdi-inspections",_)};return{templates:e,inspections:r,loading:a,getTemplatesByVehicleType:_=>e.filter(N=>N.vehicleType===_&&N.isActive),getTemplateById:_=>e.find(N=>N.id===_),createTemplate:async _=>{i(!0);try{const N={id:Math.random().toString(36).substr(2,9),name:_.name||"",description:_.description||"",vehicleType:_.vehicleType||bt.RV,isActive:_.isActive??!0,sections:_.sections||[],createdAt:new Date,updatedAt:new Date},D=[...e,N];return t(D),l(D),N}finally{i(!1)}},updateTemplate:async(_,N)=>{const D=e.map(I=>I.id===_?{...I,...N,updatedAt:new Date}:I);t(D),l(D)},deleteTemplate:async _=>{const N=e.filter(D=>D.id!==_);t(N),l(N)},createTemplateSection:async(_,N)=>{const D=e.find($=>$.id===_);if(!D)return null;const I={id:Math.random().toString(36).substr(2,9),templateId:_,name:N.name||"",description:N.description||"",orderIndex:N.orderIndex||D.sections.length+1,items:N.items||[],createdAt:new Date},R={...D,sections:[...D.sections,I],updatedAt:new Date},M=e.map($=>$.id===_?R:$);return t(M),l(M),I},createTemplateItem:async(_,N)=>{const D=e.findIndex(L=>L.sections.some(V=>V.id===_));if(D===-1)return null;const I=e[D],R=I.sections.findIndex(L=>L.id===_);if(R===-1)return null;const M=I.sections[R],$={id:Math.random().toString(36).substr(2,9),sectionId:_,name:N.name||"",description:N.description||"",itemType:N.itemType||"checkbox",isRequired:N.isRequired??!0,orderIndex:N.orderIndex||M.items.length+1,createdAt:new Date},B={...M,items:[...M.items,$]},U=[...I.sections];U[R]=B;const q={...I,sections:U,updatedAt:new Date},W=[...e];return W[D]=q,t(W),l(W),$},getInspectionsByVehicleId:_=>r.filter(N=>N.vehicleId===_),getInspectionById:_=>r.find(N=>N.id===_),createInspection:async _=>{i(!0);try{const N=e.find(M=>M.id===_.templateId);if(!N)throw new Error("Template not found");const D=[];N.sections.forEach(M=>{M.items.forEach($=>{D.push({id:Math.random().toString(36).substr(2,9),inspectionId:"",templateItemId:$.id,templateItem:$,status:br.PENDING,createdAt:new Date,updatedAt:new Date})})});const I={id:Math.random().toString(36).substr(2,9),templateId:_.templateId||"",template:N||void 0,vehicleId:_.vehicleId||"",inspectorId:_.inspectorId||"",status:Cn.IN_PROGRESS,startedAt:new Date,notes:_.notes||"",items:[],defects:[],photos:[],signoffs:[],createdAt:new Date,updatedAt:new Date};D.forEach(M=>{M.inspectionId=I.id}),I.items=D;const R=[...r,I];return s(R),c(R),I}finally{i(!1)}},updateInspection:async(_,N)=>{const D=r.map(I=>I.id===_?{...I,...N,updatedAt:new Date}:I);s(D),c(D)},updateInspectionItem:async(_,N,D)=>{const I=r.findIndex(q=>q.id===_);if(I===-1)return;const R=r[I],M=R.items.findIndex(q=>q.id===N);if(M===-1)return;const $=[...R.items];$[M]={...$[M],...D,updatedAt:new Date};const B={...R,items:$,updatedAt:new Date},U=[...r];U[I]=B,s(U),c(U)},completeInspection:async(_,N)=>{const D=r.findIndex(B=>B.id===_);if(D===-1)return;const I=r[D];if(!I.items.every(B=>{const U=e.flatMap(q=>q.sections).flatMap(q=>q.items).find(q=>q.id===B.templateItemId);return!(U!=null&&U.isRequired)||B.status!==br.PENDING}))throw new Error("All required items must be completed");const M={...I,status:Cn.COMPLETED,completedAt:new Date,notes:N||I.notes,updatedAt:new Date},$=[...r];$[D]=M,s($),c($)},createDefect:async(_,N)=>{const D=r.findIndex(B=>B.id===_);if(D===-1)return null;const I=r[D],R={id:Math.random().toString(36).substr(2,9),inspectionId:_,inspectionItemId:N.inspectionItemId,title:N.title||"",description:N.description||"",severity:N.severity||Rs.MEDIUM,status:lb.OPEN,assignedTo:N.assignedTo,photos:[],createdAt:new Date,updatedAt:new Date},M={...I,defects:[...I.defects,R],updatedAt:new Date},$=[...r];return $[D]=M,s($),c($),R},updateDefect:async(_,N,D)=>{const I=r.findIndex(q=>q.id===_);if(I===-1)return;const R=r[I],M=R.defects.findIndex(q=>q.id===N);if(M===-1)return;const $=[...R.defects];$[M]={...$[M],...D,updatedAt:new Date};const B={...R,defects:$,updatedAt:new Date},U=[...r];U[I]=B,s(U),c(U)},resolveDefect:async(_,N,D)=>{const I=r.findIndex(q=>q.id===_);if(I===-1)return;const R=r[I],M=R.defects.findIndex(q=>q.id===N);if(M===-1)return;const $=[...R.defects];$[M]={...$[M],status:lb.RESOLVED,resolvedAt:new Date,resolutionNotes:D,updatedAt:new Date};const B={...R,defects:$,updatedAt:new Date},U=[...r];U[I]=B,s(U),c(U)},addPhoto:async(_,N)=>{const D=r.findIndex(B=>B.id===_);if(D===-1)return null;const I=r[D],R={id:Math.random().toString(36).substr(2,9),inspectionId:_,inspectionItemId:N.inspectionItemId,defectId:N.defectId,url:N.url||"",caption:N.caption,createdAt:new Date},M={...I,photos:[...I.photos,R],updatedAt:new Date},$=[...r];return $[D]=M,s($),c($),R},addSignoff:async(_,N)=>{const D=r.findIndex(U=>U.id===_);if(D===-1)return null;const I=r[D],R={id:Math.random().toString(36).substr(2,9),inspectionId:_,userId:N.userId||"",role:N.role||Iu.INSPECTOR,signatureUrl:N.signatureUrl,notes:N.notes,signedAt:new Date,createdAt:new Date};let M=I.status;N.role===Iu.MANAGER&&(M=Cn.APPROVED);const $={...I,signoffs:[...I.signoffs,R],status:M,updatedAt:new Date},B=[...r];return B[D]=$,s(B),c(B),R}}}function Ghe({templates:e,onCreateTemplate:t,onEditTemplate:r,onDeleteTemplate:s,onDuplicateTemplate:a,onViewTemplate:i}){const[o,l]=w.useState(""),[c,d]=w.useState("all"),f=e.filter(h=>{var g;const m=h.name.toLowerCase().includes(o.toLowerCase())||((g=h.description)==null?void 0:g.toLowerCase().includes(o.toLowerCase())),v=c==="all"||h.vehicleType===c;return m&&v}),u=h=>h.replace("_"," ").toUpperCase();return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search templates...",value:o,onChange:h=>l(h.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"rv",children:"RV"}),n.jsx("option",{value:"motorhome",children:"Motorhome"}),n.jsx("option",{value:"travel_trailer",children:"Travel Trailer"}),n.jsx("option",{value:"fifth_wheel",children:"Fifth Wheel"}),n.jsx("option",{value:"toy_hauler",children:"Toy Hauler"})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs(J,{onClick:t,className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["PDI Templates (",f.length,")"]}),n.jsx(Be,{children:"Manage pre-delivery inspection templates for different vehicle types"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[f.map(h=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:h.name}),n.jsx(Fe,{variant:"outline",children:u(h.vehicleType)}),h.isActive?n.jsx(Fe,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):n.jsx(Fe,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:h.description}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(X5,{className:"h-3 w-3 mr-1 text-blue-500"}),h.sections.length," sections"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(k4,{className:"h-3 w-3 mr-1 text-green-500"}),h.sections.reduce((m,v)=>m+v.items.length,0)," items"]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>i(h),children:"View"}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(h),children:[n.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>a(h),children:[n.jsx(D4,{className:"h-3 w-3 mr-1"}),"Duplicate"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>s(h.id),children:n.jsx($n,{className:"h-3 w-3"})})]})]},h.id)),f.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(X5,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No templates found"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})})]})]})}function Khe({template:e,onSave:t,onCancel:r}){var _;const{toast:s}=_t(),[a,i]=w.useState(!1),[o,l]=w.useState({name:"",description:"",vehicleType:bt.RV,isActive:!0,sections:[]}),[c,d]=w.useState(!1),[f,u]=w.useState({name:"",description:"",items:[]}),[h,m]=w.useState(null),[v,g]=w.useState(!1),[p,x]=w.useState({name:"",description:"",itemType:"checkbox",isRequired:!0});w.useEffect(()=>{e&&l({...e})},[e]);const b=async N=>{if(N.preventDefault(),!o.name){s({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!o.vehicleType){s({title:"Validation Error",description:"Vehicle type is required",variant:"destructive"});return}if(!o.sections||o.sections.length===0){s({title:"Validation Error",description:"At least one section is required",variant:"destructive"});return}const D=o.sections.filter(I=>!I.items||I.items.length===0);if(D.length>0){s({title:"Validation Error",description:`Section "${D[0].name}" must have at least one item`,variant:"destructive"});return}i(!0);try{await t(o),s({title:"Success",description:`Template ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} template`,variant:"destructive"})}finally{i(!1)}},y=()=>{var D;if(!f.name){s({title:"Validation Error",description:"Section name is required",variant:"destructive"});return}const N={id:Math.random().toString(36).substr(2,9),templateId:(e==null?void 0:e.id)||"",name:f.name,description:f.description||"",orderIndex:(((D=o.sections)==null?void 0:D.length)||0)+1,items:[],createdAt:new Date};l(I=>({...I,sections:[...I.sections||[],N]})),u({name:"",description:"",items:[]}),d(!1)},j=N=>{l(D=>{var I;return{...D,sections:((I=D.sections)==null?void 0:I.filter(R=>R.id!==N))||[]}})},E=N=>{const D=[...o.sections||[]],I=D.findIndex(R=>R.id===N);I<=0||([D[I-1],D[I]]=[D[I],D[I-1]],D.forEach((R,M)=>{R.orderIndex=M+1}),l(R=>({...R,sections:D})))},A=N=>{const D=[...o.sections||[]],I=D.findIndex(R=>R.id===N);I===-1||I>=D.length-1||([D[I],D[I+1]]=[D[I+1],D[I]],D.forEach((R,M)=>{R.orderIndex=M+1}),l(R=>({...R,sections:D})))},C=N=>{var $;if(!p.name){s({title:"Validation Error",description:"Item name is required",variant:"destructive"});return}const D=[...o.sections||[]],I=D.findIndex(B=>B.id===N);if(I===-1)return;const R=D[I],M={id:Math.random().toString(36).substr(2,9),sectionId:N,name:p.name,description:p.description||"",itemType:p.itemType||"checkbox",isRequired:p.isRequired??!0,orderIndex:((($=R.items)==null?void 0:$.length)||0)+1,createdAt:new Date};R.items=[...R.items||[],M],D[I]=R,l(B=>({...B,sections:D})),x({name:"",description:"",itemType:"checkbox",isRequired:!0}),g(!1)},S=(N,D)=>{const I=[...o.sections||[]],R=I.findIndex($=>$.id===N);if(R===-1)return;const M=I[R];M.items=M.items.filter($=>$.id!==D),I[R]=M,l($=>({...$,sections:I}))},T=(N,D)=>{const I=[...o.sections||[]],R=I.findIndex(U=>U.id===N);if(R===-1)return;const M=I[R],$=[...M.items],B=$.findIndex(U=>U.id===D);B<=0||([$[B-1],$[B]]=[$[B],$[B-1]],$.forEach((U,q)=>{U.orderIndex=q+1}),M.items=$,I[R]=M,l(U=>({...U,sections:I})))},O=(N,D)=>{const I=[...o.sections||[]],R=I.findIndex(U=>U.id===N);if(R===-1)return;const M=I[R],$=[...M.items],B=$.findIndex(U=>U.id===D);B===-1||B>=$.length-1||([$[B],$[B+1]]=[$[B+1],$[B]],$.forEach((U,q)=>{U.orderIndex=q+1}),M.items=$,I[R]=M,l(U=>({...U,sections:I})))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Template":"Create Template"}),n.jsx(Be,{children:e?"Update PDI template details":"Create a new PDI template"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Template Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Template Name *"}),n.jsx(Pe,{id:"name",value:o.name,onChange:N=>l(D=>({...D,name:N.target.value})),placeholder:"e.g., RV Pre-Delivery Inspection"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicleType",children:"Home/Vehicle Type *"}),n.jsxs(We,{value:o.vehicleType,onValueChange:N=>l(D=>({...D,vehicleType:N})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:bt.RV,children:"RV"}),n.jsx(K,{value:bt.MOTORHOME,children:"Motorhome"}),n.jsx(K,{value:bt.TRAVEL_TRAILER,children:"Travel Trailer"}),n.jsx(K,{value:bt.FIFTH_WHEEL,children:"Fifth Wheel"}),n.jsx(K,{value:bt.TOY_HAULER,children:"Toy Hauler"}),n.jsx(K,{value:bt.SINGLE_WIDE,children:"Single Wide MH"}),n.jsx(K,{value:bt.DOUBLE_WIDE,children:"Double Wide MH"}),n.jsx(K,{value:bt.TRIPLE_WIDE,children:"Triple Wide MH"}),n.jsx(K,{value:bt.PARK_MODEL,children:"Park Model"}),n.jsx(K,{value:bt.MODULAR_HOME,children:"Modular Home"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"description",children:"Description"}),n.jsx(ir,{id:"description",value:o.description,onChange:N=>l(D=>({...D,description:N.target.value})),placeholder:"Describe the purpose and scope of this template",rows:3})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isActive",checked:o.isActive,onCheckedChange:N=>l(D=>({...D,isActive:!!N}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active template"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),n.jsxs(J,{type:"button",onClick:()=>d(!0),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),c&&n.jsx(ue,{className:"border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"sectionName",children:"Section Name *"}),n.jsx(Pe,{id:"sectionName",value:f.name,onChange:N=>u(D=>({...D,name:N.target.value})),placeholder:"e.g., Exterior Inspection"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"sectionDescription",children:"Description"}),n.jsx(ir,{id:"sectionDescription",value:f.description,onChange:N=>u(D=>({...D,description:N.target.value})),placeholder:"Describe this section",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),n.jsx(J,{type:"button",onClick:y,children:"Add Section"})]})]})})}),n.jsxs("div",{className:"space-y-6",children:[(_=o.sections)==null?void 0:_.map(N=>{var D;return n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-lg",children:N.name}),N.description&&n.jsx(Be,{children:N.description})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(N.id),disabled:N.orderIndex<=1,children:n.jsx(rl,{className:"h-4 w-4"})}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(N.id),disabled:N.orderIndex>=(((D=o.sections)==null?void 0:D.length)||0),children:n.jsx(tl,{className:"h-4 w-4"})}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(N.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"text-sm font-semibold",children:["Items (",N.items.length,")"]}),n.jsxs(J,{type:"button",size:"sm",variant:"outline",onClick:()=>{m(N.id),g(!0)},children:[n.jsx(Et,{className:"h-3 w-3 mr-1"}),"Add Item"]})]}),v&&h===N.id&&n.jsx(ue,{className:"border-dashed",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"itemName",children:"Item Name *"}),n.jsx(Pe,{id:"itemName",value:p.name,onChange:I=>x(R=>({...R,name:I.target.value})),placeholder:"e.g., Check Exterior Body Condition"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"itemType",children:"Item Type"}),n.jsxs(We,{value:p.itemType,onValueChange:I=>x(R=>({...R,itemType:I})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"checkbox",children:"Checkbox"}),n.jsx(K,{value:"text",children:"Text Input"}),n.jsx(K,{value:"number",children:"Number Input"}),n.jsx(K,{value:"photo",children:"Photo Upload"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"itemDescription",children:"Description"}),n.jsx(ir,{id:"itemDescription",value:p.description,onChange:I=>x(R=>({...R,description:I.target.value})),placeholder:"Describe this inspection item",rows:2})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isRequired",checked:p.isRequired,onCheckedChange:I=>x(R=>({...R,isRequired:!!I}))}),n.jsx(ae,{htmlFor:"isRequired",children:"Required item"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>{g(!1),m(null)},children:"Cancel"}),n.jsx(J,{type:"button",onClick:()=>C(N.id),children:"Add Item"})]})]})})}),n.jsxs("div",{className:"space-y-2",children:[N.items.map(I=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:I.name}),n.jsx(Fe,{variant:"outline",className:"text-xs",children:I.itemType}),I.isRequired&&n.jsx(Fe,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"})]}),I.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:I.description})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(N.id,I.id),disabled:I.orderIndex<=1,children:n.jsx(rl,{className:"h-3 w-3"})}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>O(N.id,I.id),disabled:I.orderIndex>=N.items.length,children:n.jsx(tl,{className:"h-3 w-3"})}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(N.id,I.id),children:n.jsx($n,{className:"h-3 w-3 text-red-500"})})]})]},I.id)),N.items.length===0&&n.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(k4,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),n.jsx("p",{children:"No items added yet"}),n.jsx("p",{className:"text-xs",children:"Add items to this section"})]})]})]})})]},N.id)}),(!o.sections||o.sections.length===0)&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(X5,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No sections added yet"}),n.jsx("p",{className:"text-sm",children:"Add sections to organize your checklist"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Template"]})})]})]})})]})})}function Yhe({inspections:e,onCreateInspection:t,onViewInspection:r,onContinueInspection:s}){const[a,i]=w.useState(""),[o,l]=w.useState("all"),c=e.filter(u=>{const h=u.id.toLowerCase().includes(a.toLowerCase())||u.vehicleId.toLowerCase().includes(a.toLowerCase()),m=o==="all"||u.status===o;return h&&m}),d=u=>{switch(u){case Cn.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Cn.COMPLETED:return"bg-blue-50 text-blue-700 border-blue-200";case Cn.APPROVED:return"bg-green-50 text-green-700 border-green-200";case Cn.REJECTED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=u=>{switch(u){case Cn.IN_PROGRESS:return n.jsx(ur,{className:"h-4 w-4 text-yellow-500"});case Cn.COMPLETED:return n.jsx(an,{className:"h-4 w-4 text-blue-500"});case Cn.APPROVED:return n.jsx(an,{className:"h-4 w-4 text-green-500"});case Cn.REJECTED:return n.jsx(Oh,{className:"h-4 w-4 text-red-500"});default:return n.jsx(ur,{className:"h-4 w-4 text-gray-500"})}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search inspections...",value:a,onChange:u=>i(u.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:o,onChange:u=>l(u.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"in_progress",children:"In Progress"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs(J,{onClick:t,className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Home/Vehicle PDI Inspections (",c.length,")"]}),n.jsx(Be,{children:"Manage pre-delivery inspections for homes and vehicles"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[c.map(u=>{var h,m,v;return n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Inspection #",u.id.substring(0,8)]}),n.jsxs(Fe,{className:Ge("ri-badge-status",d(u.status)),children:[f(u.status),n.jsx("span",{className:"ml-1",children:u.status.replace("_"," ").toUpperCase()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle:"}),n.jsxs("span",{className:"ml-1",children:[(h=u.vehicle)==null?void 0:h.make," ",(m=u.vehicle)==null?void 0:m.model," (",u.vehicleId,")"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Inspector:"}),n.jsx("span",{className:"ml-1",children:((v=u.inspector)==null?void 0:v.name)||u.inspectorId})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Started:"}),n.jsx("span",{className:"ml-1",children:ft(u.startedAt)})]}),u.completedAt&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Completed:"}),n.jsx("span",{className:"ml-1",children:ft(u.completedAt)})]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(an,{className:"h-3 w-3 mr-1 text-green-500"}),u.items.filter(g=>g.status==="passed").length," passed"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Oh,{className:"h-3 w-3 mr-1 text-red-500"}),u.items.filter(g=>g.status==="failed").length," failed"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(ur,{className:"h-3 w-3 mr-1 text-yellow-500"}),u.items.filter(g=>g.status==="pending").length," pending"]})]}),u.defects.length>0&&n.jsx("div",{className:"mt-2 bg-red-50 p-2 rounded-md",children:n.jsxs("p",{className:"text-sm text-red-700 flex items-center",children:[n.jsx(Oh,{className:"h-3 w-3 mr-1"}),u.defects.length," defect",u.defects.length!==1?"s":""," found"]})})]})}),n.jsx("div",{className:"ri-action-buttons",children:u.status===Cn.IN_PROGRESS?n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>s(u),children:[n.jsx(Zu,{className:"h-3 w-3 mr-1"}),"Continue"]}):n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(u),children:[n.jsx(uc,{className:"h-3 w-3 mr-1"}),"View"]})})]},u.id)}),c.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Zu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No inspections found"}),n.jsx("p",{className:"text-sm",children:"Create your first inspection to get started"})]})]})})]})]})}function Xhe({inspection:e,vehicles:t,onSave:r,onComplete:s,onUpdateItem:a,onAddDefect:i,onAddPhoto:o,onCancel:l}){var U;const{toast:c}=_t(),[d,f]=w.useState(!1),[u,h]=w.useState("checklist"),[m,v]=w.useState(e.notes||""),[g,p]=w.useState(!1),[x,b]=w.useState(null),[y,j]=w.useState({title:"",description:"",severity:Rs.MEDIUM}),[E,A]=w.useState(!1),[C,S]=w.useState("");w.useEffect(()=>{v(e.notes||"")},[e]);const{getRootProps:T,getInputProps:O}=Cx({accept:{"image/*":[]},onDrop:q=>{if(q.length===0)return;const W=q[0],L=URL.createObjectURL(W);R(L)}}),_=async()=>{f(!0);try{await r({notes:m}),c({title:"Success",description:"Inspection saved successfully"})}catch{c({title:"Error",description:"Failed to save inspection",variant:"destructive"})}finally{f(!1)}},N=async()=>{const q=e.items.filter(W=>{const L=W.templateItem;return(L==null?void 0:L.isRequired)&&W.status===br.PENDING});if(q.length>0){c({title:"Incomplete Inspection",description:`${q.length} required items are still pending`,variant:"destructive"});return}f(!0);try{await s(e.id,m),c({title:"Success",description:"Inspection completed successfully"}),l()}catch{c({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}finally{f(!1)}},D=async(q,W,L,V)=>{try{await a(e.id,q,{status:W,value:L,notes:V}),W===br.FAILED&&(b(q),p(!0))}catch{c({title:"Error",description:"Failed to update item",variant:"destructive"})}},I=async()=>{if(!y.title||!y.description){c({title:"Validation Error",description:"Title and description are required",variant:"destructive"});return}try{await i(e.id,{...y,inspectionItemId:x||void 0}),j({title:"",description:"",severity:Rs.MEDIUM}),b(null),p(!1),c({title:"Success",description:"Defect added successfully"})}catch{c({title:"Error",description:"Failed to add defect",variant:"destructive"})}},R=async q=>{try{await o(e.id,{url:q,inspectionItemId:x||void 0,caption:C}),S(""),A(!1),c({title:"Success",description:"Photo added successfully"})}catch{c({title:"Error",description:"Failed to add photo",variant:"destructive"})}},M=q=>{switch(q){case br.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case br.PASSED:return"bg-green-50 text-green-700 border-green-200";case br.FAILED:return"bg-red-50 text-red-700 border-red-200";case br.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},$=q=>{switch(q){case Rs.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case Rs.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rs.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Rs.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},B=t.find(q=>q.id===e.vehicleId);return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"PDI Inspection"}),n.jsx(Be,{children:B?`${B.year} ${B.make} ${B.model}`:e.vehicleId})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",e.status===Cn.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":e.status===Cn.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":e.status===Cn.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:e.status.replace("_"," ").toUpperCase()}),n.jsx(J,{variant:"ghost",size:"sm",onClick:l,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsx(fe,{children:n.jsxs(Ar,{value:u,onValueChange:h,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"checklist",children:"Checklist"}),n.jsxs(Ze,{value:"defects",children:["Defects",e.defects.length>0&&n.jsx(Fe,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:e.defects.length})]}),n.jsxs(Ze,{value:"photos",children:["Photos",e.photos.length>0&&n.jsx(Fe,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:e.photos.length})]})]}),n.jsxs(tt,{value:"checklist",className:"space-y-6",children:[g&&n.jsxs(ue,{className:"border-2 border-red-200",children:[n.jsxs(be,{className:"bg-red-50",children:[n.jsxs(je,{className:"text-lg text-red-700 flex items-center",children:[n.jsx(Po,{className:"h-5 w-5 mr-2"}),"Report Defect"]}),n.jsx(Be,{className:"text-red-600",children:"Record details about the issue found"})]}),n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"defectTitle",children:"Defect Title *"}),n.jsx(Pe,{id:"defectTitle",value:y.title,onChange:q=>j(W=>({...W,title:q.target.value})),placeholder:"e.g., Damaged Roof Seal"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"defectDescription",children:"Description *"}),n.jsx(ir,{id:"defectDescription",value:y.description,onChange:q=>j(W=>({...W,description:q.target.value})),placeholder:"Describe the defect in detail",rows:3})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"defectSeverity",children:"Severity"}),n.jsxs(We,{value:y.severity,onValueChange:q=>j(W=>({...W,severity:q})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:Rs.LOW,children:"Low"}),n.jsx(K,{value:Rs.MEDIUM,children:"Medium"}),n.jsx(K,{value:Rs.HIGH,children:"High"}),n.jsx(K,{value:Rs.CRITICAL,children:"Critical"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>{p(!1),b(null)},children:"Cancel"}),n.jsx(J,{type:"button",onClick:I,children:"Add Defect"})]})]})]}),E&&n.jsxs(ue,{className:"border-2 border-blue-200",children:[n.jsxs(be,{className:"bg-blue-50",children:[n.jsxs(je,{className:"text-lg text-blue-700 flex items-center",children:[n.jsx(Yl,{className:"h-5 w-5 mr-2"}),"Add Photo"]}),n.jsx(Be,{className:"text-blue-600",children:"Upload a photo for documentation"})]}),n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{...T(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[n.jsx("input",{...O()}),n.jsx(Qh,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop an image here, or click to select a file"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"photoCaption",children:"Caption (Optional)"}),n.jsx(Pe,{id:"photoCaption",value:C,onChange:q=>S(q.target.value),placeholder:"e.g., Front view of vehicle"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>{A(!1),b(null),S("")},children:"Cancel"}),n.jsx(J,{type:"button",onClick:()=>{R("https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg")},children:"Simulate Upload"})]})]})]}),(U=e.template)==null?void 0:U.sections.map(q=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:q.name}),q.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:q.description}),n.jsx("div",{className:"space-y-3",children:q.items.map(W=>{const L=e.items.find(V=>V.templateItemId===W.id);return L?n.jsx(ue,{className:"shadow-sm",children:n.jsx(fe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("h4",{className:"font-medium",children:W.name}),W.isRequired&&n.jsx(Fe,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),n.jsx(Fe,{className:Ge("ri-badge-status text-xs",M(L.status)),children:L.status.toUpperCase()})]}),W.description&&n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:W.description}),W.itemType==="text"&&n.jsx("div",{className:"mb-3",children:n.jsx(Pe,{value:L.value||"",onChange:V=>D(L.id,br.PASSED,V.target.value),placeholder:"Enter text"})}),W.itemType==="number"&&n.jsx("div",{className:"mb-3",children:n.jsx(Pe,{type:"number",value:L.value||"",onChange:V=>D(L.id,br.PASSED,V.target.value),placeholder:"Enter number"})}),W.itemType==="photo"&&n.jsxs("div",{className:"mb-3",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>{b(L.id),A(!0)},children:[n.jsx(Yl,{className:"h-4 w-4 mr-2"}),"Add Photo"]}),e.photos.filter(V=>V.inspectionItemId===L.id).length>0&&n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:e.photos.filter(V=>V.inspectionItemId===L.id).map(V=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:V.url,alt:V.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),V.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:V.caption})]},V.id))})]}),L.notes&&n.jsx("div",{className:"mb-3 p-2 bg-muted/30 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",L.notes]})}),L.status!==br.PENDING&&n.jsx("div",{className:"mb-3",children:n.jsx(ir,{value:L.notes||"",onChange:V=>D(L.id,L.status,L.value,V.target.value),placeholder:"Add notes (optional)",rows:2})})]}),W.itemType==="checkbox"&&n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.jsxs(J,{variant:L.status===br.PASSED?"default":"outline",size:"sm",onClick:()=>D(L.id,br.PASSED),className:L.status===br.PASSED?"":"border-green-200 text-green-700",children:[n.jsx(an,{className:"h-4 w-4 mr-1"}),"Pass"]}),n.jsxs(J,{variant:L.status===br.FAILED?"default":"outline",size:"sm",onClick:()=>D(L.id,br.FAILED),className:L.status===br.FAILED?"":"border-red-200 text-red-700",children:[n.jsx(Do,{className:"h-4 w-4 mr-1"}),"Fail"]}),n.jsx(J,{variant:L.status===br.NA?"default":"outline",size:"sm",onClick:()=>D(L.id,br.NA),className:L.status===br.NA?"":"border-gray-200 text-gray-700",children:"N/A"})]})]})})},W.id):null})})]},q.id)),n.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"inspectionNotes",children:"Inspection Notes"}),n.jsx(ir,{id:"inspectionNotes",value:m,onChange:q=>v(q.target.value),placeholder:"Add general notes about this inspection",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(J,{type:"button",variant:"outline",onClick:l,disabled:d,children:"Cancel"}),n.jsxs(J,{type:"button",onClick:_,disabled:d,children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Progress"]}),n.jsxs(J,{type:"button",onClick:N,disabled:d||e.status!=="in_progress",children:[n.jsx(Zu,{className:"h-4 w-4 mr-2"}),"Complete Inspection"]})]})]})]}),n.jsxs(tt,{value:"defects",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),n.jsxs(J,{size:"sm",onClick:()=>{b(null),p(!0)},children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Defect"]})]}),e.defects.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Po,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No defects reported"}),n.jsx("p",{className:"text-sm",children:"Add defects when issues are found"})]}):n.jsx("div",{className:"space-y-4",children:e.defects.map(q=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{className:"pb-3",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-semibold",children:q.title}),n.jsx(Fe,{className:Ge("ri-badge-status",$(q.severity)),children:q.severity.toUpperCase()}),n.jsx(Fe,{className:q.status==="open"?"bg-red-50 text-red-700 border-red-200":q.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":q.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:q.status.replace("_"," ").toUpperCase()})]})})}),n.jsxs(fe,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:q.description}),e.photos.filter(W=>W.defectId===q.id).length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(W=>W.defectId===q.id).map(W=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:W.url,alt:W.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),W.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:W.caption})]},W.id))})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:q.assignedTo?n.jsxs("span",{children:["Assigned to: ",q.assignedTo]}):n.jsx("span",{children:"Unassigned"})}),n.jsx("div",{className:"flex space-x-2",children:n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>{b(null),A(!0)},children:[n.jsx(Yl,{className:"h-3 w-3 mr-1"}),"Add Photo"]})})]})]})]},q.id))})]}),n.jsxs(tt,{value:"photos",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Photos"}),n.jsxs(J,{size:"sm",onClick:()=>{b(null),A(!0)},children:[n.jsx(Yl,{className:"h-4 w-4 mr-2"}),"Add Photo"]})]}),e.photos.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Qh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No photos added"}),n.jsx("p",{className:"text-sm",children:"Add photos to document the inspection"})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.photos.map(q=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:q.url,alt:q.caption||"Inspection photo",className:"h-40 w-full object-cover rounded-md"}),q.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:q.caption})]},q.id))})]})]})})]})})}function Qhe({inspection:e,vehicles:t,onAddSignoff:r,onClose:s}){var A,C;const{toast:a}=_t(),[i,o]=w.useState("summary"),[l,c]=w.useState(!1),[d,f]=w.useState(""),[u,h]=w.useState(Iu.INSPECTOR),m=async()=>{try{await r(e.id,{role:u,notes:d,signatureUrl:"https://via.placeholder.com/200x100?text=Signature"}),c(!1),f(""),a({title:"Success",description:"Signoff added successfully"})}catch{a({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},v=S=>{switch(S){case br.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case br.PASSED:return"bg-green-50 text-green-700 border-green-200";case br.FAILED:return"bg-red-50 text-red-700 border-red-200";case br.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=S=>{switch(S){case Rs.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case Rs.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rs.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Rs.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},p=t.find(S=>S.id===e.vehicleId),x=e.items.filter(S=>S.status===br.PASSED).length,b=e.items.filter(S=>S.status===br.FAILED).length,y=e.items.filter(S=>S.status===br.NA).length,j=e.items.length,E=Math.round((x+b+y)/j*100);return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"PDI Inspection Report"}),n.jsx(Be,{children:p?`${p.year} ${p.make} ${p.model}`:e.vehicleId})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",e.status===Cn.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":e.status===Cn.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":e.status===Cn.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:e.status.replace("_"," ").toUpperCase()}),n.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsx(fe,{children:n.jsxs(Ar,{value:i,onValueChange:o,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-4",children:[n.jsx(Ze,{value:"summary",children:"Summary"}),n.jsx(Ze,{value:"checklist",children:"Checklist"}),n.jsxs(Ze,{value:"defects",children:["Defects",e.defects.length>0&&n.jsx(Fe,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:e.defects.length})]}),n.jsxs(Ze,{value:"signoffs",children:["Signoffs",e.signoffs.length>0&&n.jsx(Fe,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:e.signoffs.length})]})]}),n.jsxs(tt,{value:"summary",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Inspection Details"})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx("p",{className:"font-medium",children:e.status.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Inspector"}),n.jsx("p",{className:"font-medium",children:((A=e.inspector)==null?void 0:A.name)||e.inspectorId})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Started"}),n.jsx("p",{className:"font-medium",children:ft(e.startedAt)})]}),e.completedAt&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),n.jsx("p",{className:"font-medium",children:ft(e.completedAt)})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"text-sm mt-1 p-3 bg-muted/30 rounded-md",children:e.notes})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsx(je,{className:"text-lg",children:"Inspection Results"})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Completion"}),n.jsxs("span",{className:"text-sm font-bold",children:[E,"%"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:n.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${E}%`}})}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-green-700",children:x}),n.jsx("p",{className:"text-xs text-green-600",children:"Passed"})]}),n.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-red-700",children:b}),n.jsx("p",{className:"text-xs text-red-600",children:"Failed"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-gray-700",children:y}),n.jsx("p",{className:"text-xs text-gray-600",children:"N/A"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Defects"}),n.jsx("span",{className:"text-sm font-bold text-red-600",children:e.defects.length})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Photos"}),n.jsx("span",{className:"text-sm font-bold",children:e.photos.length})]})]})})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(J,{variant:"outline",onClick:s,children:"Close"}),n.jsxs(J,{variant:"outline",children:[n.jsx(uf,{className:"h-4 w-4 mr-2"}),"Print Report"]}),n.jsxs(J,{variant:"outline",children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),e.status==="completed"&&n.jsxs(J,{onClick:()=>c(!0),children:[n.jsx(Z0,{className:"h-4 w-4 mr-2"}),"Add Signoff"]})]})]}),n.jsx(tt,{value:"checklist",className:"space-y-6",children:(C=e.template)==null?void 0:C.sections.map(S=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:S.name}),S.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:S.description}),n.jsx("div",{className:"space-y-3",children:S.items.map(T=>{const O=e.items.find(_=>_.templateItemId===T.id);return O?n.jsx(ue,{className:"shadow-sm",children:n.jsx(fe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("h4",{className:"font-medium",children:T.name}),T.isRequired&&n.jsx(Fe,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),n.jsx(Fe,{className:Ge("ri-badge-status text-xs",v(O.status)),children:O.status.toUpperCase()})]}),T.description&&n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.description}),O.value&&n.jsx("div",{className:"mb-2 p-2 bg-muted/30 rounded-md",children:n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Value:"})," ",O.value]})}),O.notes&&n.jsx("div",{className:"mb-2 p-2 bg-muted/30 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",O.notes]})}),e.photos.filter(_=>_.inspectionItemId===O.id).length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Photos"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(_=>_.inspectionItemId===O.id).map(_=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:_.url,alt:_.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),_.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:_.caption})]},_.id))})]}),e.defects.filter(_=>_.inspectionItemId===O.id).length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("h5",{className:"text-sm font-medium mb-1 text-red-600",children:"Defects"}),e.defects.filter(_=>_.inspectionItemId===O.id).map(_=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-md mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-red-700",children:_.title}),n.jsx(Fe,{className:Ge("ri-badge-status text-xs",g(_.severity)),children:_.severity.toUpperCase()})]}),n.jsx("p",{className:"text-sm text-red-600 mt-1",children:_.description})]},_.id))]})]}),n.jsxs("div",{className:"ml-4",children:[O.status===br.PASSED&&n.jsx(an,{className:"h-6 w-6 text-green-500"}),O.status===br.FAILED&&n.jsx(Do,{className:"h-6 w-6 text-red-500"}),O.status===br.PENDING&&n.jsx(ur,{className:"h-6 w-6 text-yellow-500"}),O.status===br.NA&&n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"N/A"})]})]})})},T.id):null})})]},S.id))}),n.jsxs(tt,{value:"defects",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),e.defects.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(an,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),n.jsx("p",{children:"No defects reported"}),n.jsx("p",{className:"text-sm",children:"This vehicle passed inspection without issues"})]}):n.jsx("div",{className:"space-y-4",children:e.defects.map(S=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{className:"pb-3",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-semibold",children:S.title}),n.jsx(Fe,{className:Ge("ri-badge-status",g(S.severity)),children:S.severity.toUpperCase()}),n.jsx(Fe,{className:S.status==="open"?"bg-red-50 text-red-700 border-red-200":S.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":S.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:S.status.replace("_"," ").toUpperCase()})]})})}),n.jsxs(fe,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:S.description}),e.photos.filter(T=>T.defectId===S.id).length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(T=>T.defectId===S.id).map(T=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:T.url,alt:T.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),T.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:T.caption})]},T.id))})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:S.assignedTo?n.jsxs("span",{children:["Assigned to: ",S.assignedTo]}):n.jsx("span",{children:"Unassigned"})}),S.resolvedAt&&n.jsxs("div",{className:"text-sm text-green-600",children:["Resolved: ",ft(S.resolvedAt)]})]}),S.resolutionNotes&&n.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-md",children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-medium",children:"Resolution:"})," ",S.resolutionNotes]})})]})]},S.id))})]}),n.jsxs(tt,{value:"signoffs",className:"space-y-4",children:[l&&n.jsxs(ue,{className:"border-2 border-green-200 mb-6",children:[n.jsxs(be,{className:"bg-green-50",children:[n.jsxs(je,{className:"text-lg text-green-700 flex items-center",children:[n.jsx(Z0,{className:"h-5 w-5 mr-2"}),"Add Signoff"]}),n.jsx(Be,{className:"text-green-600",children:"Sign off on the completed inspection"})]}),n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"signoffRole",children:"Role"}),n.jsxs("select",{id:"signoffRole",value:u,onChange:S=>h(S.target.value),className:"w-full p-2 border rounded-md",children:[n.jsx("option",{value:Iu.INSPECTOR,children:"Inspector"}),n.jsx("option",{value:Iu.MANAGER,children:"Manager"}),n.jsx("option",{value:Iu.QUALITY_CONTROL,children:"Quality Control"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"signoffNotes",children:"Notes (Optional)"}),n.jsx(ir,{id:"signoffNotes",value:d,onChange:S=>f(S.target.value),placeholder:"Add any notes about this signoff",rows:3})]}),n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Signature Capture"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"In a real app, this would be a signature pad"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>{c(!1),f("")},children:"Cancel"}),n.jsx(J,{type:"button",onClick:m,children:"Add Signoff"})]})]})]}),n.jsx("h3",{className:"text-lg font-semibold",children:"Signoffs"}),e.signoffs.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Z0,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No signoffs yet"}),n.jsx("p",{className:"text-sm",children:"Add signoffs to approve the inspection"})]}):n.jsx("div",{className:"space-y-4",children:e.signoffs.map(S=>{var T;return n.jsx(ue,{className:"shadow-sm",children:n.jsx(fe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("h4",{className:"font-medium",children:((T=S.user)==null?void 0:T.name)||S.userId}),n.jsx(Fe,{className:"bg-blue-50 text-blue-700 border-blue-200",children:S.role.replace("_"," ").toUpperCase()})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Signed: ",ft(S.signedAt)]}),S.notes&&n.jsx("p",{className:"text-sm text-muted-foreground p-2 bg-muted/30 rounded-md",children:S.notes})]}),n.jsx("div",{className:"ml-4",children:S.signatureUrl?n.jsx("img",{src:S.signatureUrl,alt:"Signature",className:"h-12 object-contain"}):n.jsx("div",{className:"h-12 w-32 border-2 border-dashed rounded flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-muted-foreground",children:"No signature"})})})]})})},S.id)})}),e.status==="completed"&&!l&&n.jsx("div",{className:"flex justify-end mt-4",children:n.jsxs(J,{onClick:()=>c(!0),children:[n.jsx(Z0,{className:"h-4 w-4 mr-2"}),"Add Signoff"]})})]})]})})]})})}function Jhe({templates:e,vehicles:t,currentUserId:r,onCreateInspection:s,onCancel:a}){const{toast:i}=_t(),[o,l]=w.useState(!1),[c,d]=w.useState(""),[f,u]=w.useState(""),[h,m]=w.useState(""),[v,g]=w.useState([]);w.useEffect(()=>{if(c){const x=t.find(b=>b.id===c);if(x){const b=x.type,y=e.filter(j=>j.isActive&&j.vehicleType===b);g(y),y.length===1?u(y[0].id):u("")}}else g([]),u("")},[c,e,t]);const p=async x=>{if(x.preventDefault(),!c){i({title:"Validation Error",description:"Please select a vehicle",variant:"destructive"});return}if(!f){i({title:"Validation Error",description:"Please select a template",variant:"destructive"});return}l(!0);try{await s({templateId:f,vehicleId:c,inspectorId:r,notes:h}),i({title:"Success",description:"Inspection created successfully"})}catch{i({title:"Error",description:"Failed to create inspection",variant:"destructive"})}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"New PDI Inspection"}),n.jsx(Be,{children:"Create a new pre-delivery inspection"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:p,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"vehicle",children:"Vehicle *"}),n.jsxs(We,{value:c,onValueChange:d,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select a home/vehicle"})}),n.jsx(Ve,{children:t.map(x=>n.jsxs(K,{value:x.id,children:[x.year," ",x.make," ",x.model," - ",x.vin]},x.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"template",children:"Inspection Template *"}),n.jsxs(We,{value:f,onValueChange:u,disabled:v.length===0,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:v.length===0?"Select a home/vehicle first":"Select a template"})}),n.jsx(Ve,{children:v.map(x=>n.jsx(K,{value:x.id,children:x.name},x.id))})]}),v.length===0&&c&&n.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No templates available for this vehicle type"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(ir,{id:"notes",value:h,onChange:x=>m(x.target.value),placeholder:"Add any initial notes about this inspection",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:a,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o||!c||!f,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zu,{className:"h-4 w-4 mr-2"}),"Start Inspection"]})})]})]})})]})})}function ND(){const{templates:e,inspections:t,createTemplate:r,updateTemplate:s,deleteTemplate:a,createInspection:i,updateInspection:o,updateInspectionItem:l,completeInspection:c,createDefect:d,addPhoto:f,addSignoff:u}=Hhe(),{vehicles:h}=Ud(),{user:m}=Fm(),{toast:v}=_t(),[g,p]=w.useState("inspections"),[x,b]=w.useState(!1),[y,j]=w.useState(!1),[E,A]=w.useState(!1),[C,S]=w.useState(!1),[T,O]=w.useState(null),[_,N]=w.useState(null),D=()=>{O(null),b(!0)},I=re=>{O(re),b(!0)},R=re=>{O(re),b(!0)},M=async re=>{if(window.confirm("Are you sure you want to delete this template?"))try{await a(re),v({title:"Success",description:"Template deleted successfully"})}catch{v({title:"Error",description:"Failed to delete template",variant:"destructive"})}},$=async re=>{try{const Se={...re,id:void 0,name:`${re.name} (Copy)`};await r(Se),v({title:"Success",description:"Template duplicated successfully"})}catch{v({title:"Error",description:"Failed to duplicate template",variant:"destructive"})}},B=async re=>{try{T?await s(T.id,re):await r(re),b(!1),O(null)}catch{v({title:"Error",description:`Failed to ${T?"update":"create"} template`,variant:"destructive"})}},U=()=>{A(!0)},q=async re=>{try{const Se=await i(re);A(!1),N(Se),j(!0)}catch{v({title:"Error",description:"Failed to create inspection",variant:"destructive"})}},W=re=>{N(re),S(!0)},L=re=>{N(re),j(!0)},V=async re=>{if(_)try{await o(_.id,re),v({title:"Success",description:"Inspection saved successfully"})}catch{v({title:"Error",description:"Failed to save inspection",variant:"destructive"})}},G=async(re,Se)=>{try{await c(re,Se),j(!1),N(null),v({title:"Success",description:"Inspection completed successfully"})}catch{v({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}},Z=async(re,Se,Ne)=>{try{await l(re,Se,Ne)}catch{v({title:"Error",description:"Failed to update item",variant:"destructive"})}},ee=async(re,Se)=>{try{await d(re,Se)}catch{v({title:"Error",description:"Failed to add defect",variant:"destructive"})}},he=async(re,Se)=>{try{await f(re,Se)}catch{v({title:"Error",description:"Failed to add photo",variant:"destructive"})}},me=async(re,Se)=>{try{await u(re,{...Se,userId:(m==null?void 0:m.id)||"current-user"})}catch{v({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},oe=e.length,we=e.filter(re=>re.isActive).length,ve=t.length,pe=t.filter(re=>re.status===Cn.COMPLETED||re.status===Cn.APPROVED).length,De=t.filter(re=>re.status===Cn.IN_PROGRESS).length,xe=t.reduce((re,Se)=>re+Se.defects.length,0),le=t.reduce((re,Se)=>re+Se.defects.filter(Ne=>Ne.status==="open"||Ne.status==="in_progress").length,0);return t.reduce((re,Se)=>re+Se.photos.length,0),n.jsxs("div",{className:"space-y-8",children:[x&&n.jsx(Khe,{template:T||void 0,onSave:B,onCancel:()=>{b(!1),O(null)}}),E&&n.jsx(Jhe,{templates:e,vehicles:h,currentUserId:(m==null?void 0:m.id)||"current-user",onCreateInspection:q,onCancel:()=>A(!1)}),y&&_&&n.jsx(Xhe,{inspection:_,vehicles:h,onSave:V,onComplete:G,onUpdateItem:Z,onAddDefect:ee,onAddPhoto:he,onCancel:()=>{j(!1),N(null)}}),C&&_&&n.jsx(Qhe,{inspection:_,vehicles:h,onAddSignoff:me,onClose:()=>{S(!1),N(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"PDI Checklist - Home/Vehicle"}),n.jsx("p",{className:"ri-page-description",children:"Manage pre-delivery inspections and quality control for homes and vehicles"})]}),n.jsxs(J,{className:"shadow-sm",onClick:U,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Inspections"}),n.jsx(Zu,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:ve}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),pe," completed"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),n.jsx(Zu,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:De}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Active inspections"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-red-900",children:"Open Defects"}),n.jsx(Po,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:le}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),xe," total defects"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Templates"}),n.jsx(k4,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:oe}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),we," active"]})]})]})]}),n.jsxs(Ar,{value:g,onValueChange:p,className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-2",children:[n.jsx(Ze,{value:"inspections",children:"Inspections"}),n.jsx(Ze,{value:"templates",children:"Templates"})]}),n.jsx(tt,{value:"inspections",children:n.jsx(Yhe,{inspections:t,onCreateInspection:U,onViewInspection:W,onContinueInspection:L})}),n.jsx(tt,{value:"templates",children:n.jsx(Ghe,{templates:e,onCreateTemplate:D,onEditTemplate:I,onDeleteTemplate:M,onDuplicateTemplate:$,onViewTemplate:R})})]})]})}function Zhe(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(ND,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(ND,{})})]})}function eme(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(!1);w.useEffect(()=>{c()},[]);const c=()=>{const N=En("renter-insight-commissions",[{id:"1",salesPersonId:"sales-001",dealId:"deal-001",type:Nr.PERCENTAGE,rate:.05,amount:6875,status:Ut.APPROVED,paidDate:new Date("2024-01-20"),notes:"Commission for Georgetown sale",customFields:{},createdAt:new Date("2024-01-18"),updatedAt:new Date("2024-01-20")},{id:"2",salesPersonId:"sales-002",dealId:"deal-002",type:Nr.FLAT,rate:0,amount:2500,status:Ut.PENDING,notes:"Flat commission for service contract",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]),D=En("renter-insight-commission-rules",[{id:"1",name:"Standard Sales Commission",type:"percentage",rate:.05,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Service Contract Bonus",type:"flat",amount:500,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"3",name:"Tiered Sales Commission",type:"tiered",tiers:[{id:"1",ruleId:"3",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"3",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"3",minAmount:1e5,rate:.07}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),I=En("renter-insight-commission-audit",[{id:"1",commissionId:"1",userId:"user-001",userName:"Admin User",action:"created",newValue:{salesPersonId:"sales-001",dealId:"deal-001",type:Nr.PERCENTAGE,rate:.05,amount:6875,status:Ut.PENDING},timestamp:new Date("2024-01-18")},{id:"2",commissionId:"1",userId:"user-001",userName:"Admin User",action:"approved",previousValue:{status:Ut.PENDING},newValue:{status:Ut.APPROVED},notes:"Approved after deal verification",timestamp:new Date("2024-01-19")}]);t(N),s(D),i(I)},d=N=>{rn("renter-insight-commissions",N)},f=N=>{rn("renter-insight-commission-rules",N)},u=N=>{rn("renter-insight-commission-audit",N)},h=N=>e.filter(D=>D.salesPersonId===N),m=N=>e.filter(D=>D.dealId===N),v=N=>e.find(D=>D.id===N),g=N=>r.find(D=>D.id===N),p=N=>a.filter(D=>D.commissionId===N).sort((D,I)=>I.timestamp.getTime()-D.timestamp.getTime()),x=async(N,D,I)=>{l(!0);try{const R={id:Math.random().toString(36).substr(2,9),salesPersonId:N.salesPersonId||"",dealId:N.dealId||"",type:N.type||Nr.PERCENTAGE,rate:N.rate||0,amount:N.amount||0,status:Ut.PENDING,notes:N.notes||"",customFields:N.customFields||{},createdAt:new Date,updatedAt:new Date},M=[...e,R];t(M),d(M);const $={id:Math.random().toString(36).substr(2,9),commissionId:R.id,userId:D,userName:I,action:"created",newValue:{...R},timestamp:new Date},B=[...a,$];return i(B),u(B),R}finally{l(!1)}},b=async(N,D,I,R,M)=>{const $=e.find(L=>L.id===N);if(!$)return null;const B={...$,...D,updatedAt:new Date},U=e.map(L=>L.id===N?B:L);t(U),d(U);const q={id:Math.random().toString(36).substr(2,9),commissionId:N,userId:I,userName:R,action:"updated",previousValue:{...$},newValue:D,notes:M,timestamp:new Date},W=[...a,q];return i(W),u(W),B};return{commissions:e,rules:r,auditTrail:a,loading:o,getCommissionsBySalesPerson:h,getCommissionsByDeal:m,getCommissionById:v,getRuleById:g,getAuditTrailByCommission:p,createCommission:x,updateCommission:b,approveCommission:async(N,D,I,R)=>b(N,{status:Ut.APPROVED},D,I,R),rejectCommission:async(N,D,I,R)=>b(N,{status:Ut.CANCELLED},D,I,R),markCommissionPaid:async(N,D,I,R)=>b(N,{status:Ut.PAID,paidDate:new Date},D,I,R),createRule:async N=>{l(!0);try{let D;switch(N.type){case"flat":D={id:Math.random().toString(36).substr(2,9),name:N.name||"",type:"flat",amount:N.amount||0,isActive:N.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"percentage":D={id:Math.random().toString(36).substr(2,9),name:N.name||"",type:"percentage",rate:N.rate||0,isActive:N.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"tiered":D={id:Math.random().toString(36).substr(2,9),name:N.name||"",type:"tiered",tiers:N.tiers||[],isActive:N.isActive??!0,createdAt:new Date,updatedAt:new Date};break;default:throw new Error("Invalid commission rule type")}const I=[...r,D];return s(I),f(I),D}finally{l(!1)}},updateRule:async(N,D)=>{const I=r.find($=>$.id===N);if(!I)return null;const R={...I,...D,updatedAt:new Date},M=r.map($=>$.id===N?R:$);return s(M),f(M),R},deleteRule:async N=>{const D=r.filter(I=>I.id!==N);s(D),f(D)},calculateCommission:(N,D)=>{const I=r.find(R=>R.id===D);if(!I)return 0;switch(I.type){case"flat":return I.amount;case"percentage":return N*I.rate;case"tiered":const M=I.tiers.find($=>N>=$.minAmount&&($.maxAmount===void 0||N<$.maxAmount));return M?N*M.rate:0;default:return 0}},generateCommissionReport:N=>{let D=[...e];N.startDate&&(D=D.filter(R=>new Date(R.createdAt)>=new Date(N.startDate))),N.endDate&&(D=D.filter(R=>new Date(R.createdAt)<=new Date(N.endDate))),N.salesPersonId&&(D=D.filter(R=>R.salesPersonId===N.salesPersonId)),N.status&&(D=D.filter(R=>R.status===N.status)),N.type&&(D=D.filter(R=>R.type===N.type));const I={totalCommissions:D.length,totalAmount:D.reduce((R,M)=>R+M.amount,0),pendingAmount:D.filter(R=>R.status===Ut.PENDING).reduce((R,M)=>R+M.amount,0),approvedAmount:D.filter(R=>R.status===Ut.APPROVED).reduce((R,M)=>R+M.amount,0),paidAmount:D.filter(R=>R.status===Ut.PAID).reduce((R,M)=>R+M.amount,0),byType:{flat:D.filter(R=>R.type===Nr.FLAT).reduce((R,M)=>R+M.amount,0),percentage:D.filter(R=>R.type===Nr.PERCENTAGE).reduce((R,M)=>R+M.amount,0),tiered:D.filter(R=>R.type===Nr.TIERED).reduce((R,M)=>R+M.amount,0)}};return{commissions:D,summary:I}},exportCommissionsToCSV:N=>{const D=["ID","Sales Person","Deal ID","Type","Rate","Amount","Status","Paid Date","Notes","Created At"],I=N.map(R=>[R.id,R.salesPersonId,R.dealId,R.type,R.rate,R.amount,R.status,R.paidDate?R.paidDate.toISOString():"",R.notes,R.createdAt.toISOString()]);return[D,...I]}}}function tme({commission:e,salesReps:t,deals:r,rules:s,onSave:a,onCancel:i}){const{toast:o}=_t(),[l,c]=w.useState(!1),[d,f]=w.useState({salesPersonId:"",dealId:"",type:Nr.PERCENTAGE,rate:.05,amount:0,notes:""}),[u,h]=w.useState(""),[m,v]=w.useState(0),[g,p]=w.useState("");w.useEffect(()=>{if(e){f({...e}),p("");const j=r.find(E=>E.id===e.dealId);j&&v(j.value)}},[e,r]),w.useEffect(()=>{if(d.dealId){const j=r.find(E=>E.id===d.dealId);j&&v(j.value)}},[d.dealId,r]),w.useEffect(()=>{if(u){const j=s.find(A=>A.id===u);if(!j)return;let E=0;switch(j.type){case"flat":E=j.amount,f(T=>({...T,type:Nr.FLAT,rate:0,amount:E}));break;case"percentage":const A=j.rate;E=m*A,f(T=>({...T,type:Nr.PERCENTAGE,rate:A,amount:E}));break;case"tiered":const S=j.tiers.find(T=>m>=T.minAmount&&(T.maxAmount===void 0||m<T.maxAmount));S&&(E=m*S.rate,f(T=>({...T,type:Nr.TIERED,rate:S.rate,amount:E})));break}}else if(d.type===Nr.PERCENTAGE){const j=m*(d.rate||0);f(E=>({...E,amount:j}))}},[u,m,d.rate,d.type,s]);const x=async j=>{if(j.preventDefault(),!d.salesPersonId||!d.dealId){o({title:"Validation Error",description:"Sales rep and deal are required",variant:"destructive"});return}if(d.amount<=0){o({title:"Validation Error",description:"Commission amount must be greater than zero",variant:"destructive"});return}c(!0);try{await a(d,g),o({title:"Success",description:`Commission ${e?"updated":"created"} successfully`})}catch{o({title:"Error",description:`Failed to ${e?"update":"create"} commission`,variant:"destructive"})}finally{c(!1)}},b=j=>{h(j)},y=()=>{if(d.type===Nr.PERCENTAGE){const j=m*(d.rate||0);f(E=>({...E,amount:j}))}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Commission":"Create Commission"}),n.jsx(Be,{children:e?"Update commission details":"Create a new commission record"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:i,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"salesPersonId",children:"Sales Rep *"}),n.jsxs(We,{value:d.salesPersonId,onValueChange:j=>f(E=>({...E,salesPersonId:j})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select sales rep"})}),n.jsx(Ve,{className:"z-50",children:t.map(j=>n.jsx(K,{value:j.id,children:j.name},j.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dealId",children:"Deal *"}),n.jsxs(We,{value:d.dealId,onValueChange:j=>f(E=>({...E,dealId:j})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select deal"})}),n.jsx(Ve,{className:"z-50",children:r.map(j=>n.jsxs(K,{value:j.id,children:[j.name," - ",Ie(j.value)]},j.id))})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"commissionRule",children:"Commission Rule"}),n.jsxs(We,{value:u,onValueChange:b,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select rule or enter manually"})}),n.jsxs(Ve,{className:"z-50",children:[n.jsx(K,{value:"",children:"Manual Entry"}),s.filter(j=>j.isActive).map(j=>n.jsxs(K,{value:j.id,children:[j.name," (",j.type,")"]},j.id))]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dealValue",children:"Deal Value"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"dealValue",type:"number",value:m,onChange:j=>v(parseFloat(j.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"commissionType",children:"Commission Type"}),n.jsxs(We,{value:d.type,onValueChange:j=>f(E=>({...E,type:j})),disabled:!!u,children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{className:"z-50",children:[n.jsx(K,{value:Nr.FLAT,children:"Flat"}),n.jsx(K,{value:Nr.PERCENTAGE,children:"Percentage"}),n.jsx(K,{value:Nr.TIERED,children:"Tiered"})]})]})]})]}),d.type===Nr.PERCENTAGE&&!u&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"rate",children:"Commission Rate (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx(yg,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"rate",type:"number",value:d.rate?d.rate*100:"",onChange:j=>f(E=>({...E,rate:parseFloat(j.target.value)/100||0})),className:"pl-10",min:"0",max:"100",step:"0.01"})]})]}),d.type===Nr.FLAT&&!u&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"amount",children:"Flat Commission Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"amount",type:"number",value:d.amount||"",onChange:j=>f(E=>({...E,amount:parseFloat(j.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]}),!u&&d.type===Nr.PERCENTAGE&&n.jsx("div",{className:"flex justify-end",children:n.jsxs(J,{type:"button",variant:"outline",onClick:y,size:"sm",children:[n.jsx(dc,{className:"h-4 w-4 mr-2"}),"Calculate"]})}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"commissionAmount",children:"Commission Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"commissionAmount",type:"number",value:d.amount||"",onChange:j=>f(E=>({...E,amount:parseFloat(j.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Commission Notes"}),n.jsx(ir,{id:"notes",value:d.notes||"",onChange:j=>f(E=>({...E,notes:j.target.value})),placeholder:"Add any notes about this commission",rows:3})]}),e&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"auditNotes",children:"Audit Notes"}),n.jsx(ir,{id:"auditNotes",value:g,onChange:j=>p(j.target.value),placeholder:"Add notes about this update (for audit trail)",rows:2})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:i,disabled:l,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Commission"]})})]})]})})]})})}function rme({auditEntries:e}){const t=a=>{switch(a){case"created":return n.jsx(Et,{className:"h-4 w-4 text-blue-500"});case"updated":return n.jsx(Yr,{className:"h-4 w-4 text-yellow-500"});case"approved":return n.jsx(an,{className:"h-4 w-4 text-green-500"});case"rejected":return n.jsx(Do,{className:"h-4 w-4 text-red-500"});case"paid":return n.jsx($t,{className:"h-4 w-4 text-green-500"});default:return n.jsx(xN,{className:"h-4 w-4 text-gray-500"})}},r=a=>{switch(a){case"created":return"bg-blue-50 text-blue-700 border-blue-200";case"updated":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"paid":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},s=a=>{if(!a.previousValue&&!a.newValue)return null;const i=[];if(a.action==="created"&&a.newValue)return n.jsx("div",{className:"text-sm text-muted-foreground",children:n.jsx("p",{children:"Commission created with initial values"})});if(a.previousValue&&a.newValue)for(const[o,l]of Object.entries(a.newValue)){const c=a.previousValue[o];c!==l&&i.push(n.jsxs("div",{className:"text-sm",children:[n.jsxs("span",{className:"font-medium capitalize",children:[o.replace(/([A-Z])/g," $1").trim(),": "]}),n.jsx("span",{className:"line-through text-red-600 mr-2",children:c}),n.jsx("span",{className:"text-green-600",children:l})]},o))}return i.length>0?n.jsx("div",{className:"space-y-1",children:i}):null};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(xN,{className:"h-5 w-5 mr-2 text-primary"}),"Audit Trail"]}),n.jsx(Be,{children:"History of changes to this commission"})]}),n.jsx(fe,{children:e.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(xN,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No audit history available"})]}):n.jsx("div",{className:"space-y-4",children:e.map(a=>n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-0 top-1.5",children:t(a.action)}),n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx(Fe,{className:Ge("ri-badge-status",r(a.action)),children:a.action.toUpperCase()}),n.jsx("span",{className:"text-sm text-muted-foreground",children:ft(a.timestamp)})]}),n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:a.userName})," ",a.action," this commission"]}),s(a),a.notes&&n.jsx("div",{className:"mt-2 p-2 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:a.notes})})]},a.id))})})]})}function nme({commission:e,salesReps:t,deals:r,auditTrail:s,onClose:a,onEdit:i,onApprove:o,onReject:l,onMarkPaid:c}){const{toast:d}=_t(),[f,u]=w.useState("details"),[h,m]=w.useState(""),[v,g]=w.useState(!1),p=C=>{switch(C){case Ut.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ut.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Ut.PAID:return"bg-green-50 text-green-700 border-green-200";case Ut.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},x=C=>{switch(C){case Nr.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case Nr.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case Nr.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},b=async()=>{g(!0);try{await o(e.id,h),m(""),d({title:"Commission Approved",description:"The commission has been approved successfully"})}catch{d({title:"Error",description:"Failed to approve commission",variant:"destructive"})}finally{g(!1)}},y=async()=>{g(!0);try{await l(e.id,h),m(""),d({title:"Commission Rejected",description:"The commission has been rejected"})}catch{d({title:"Error",description:"Failed to reject commission",variant:"destructive"})}finally{g(!1)}},j=async()=>{g(!0);try{await c(e.id,h),m(""),d({title:"Commission Marked as Paid",description:"The commission has been marked as paid"})}catch{d({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}finally{g(!1)}},E=t.find(C=>C.id===e.salesPersonId),A=r.find(C=>C.id===e.dealId);return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Commission Details"}),n.jsxs(Be,{children:["Commission #",e.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>i(e),size:"sm",children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Commission"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{children:[n.jsxs(Ar,{value:f,onValueChange:u,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-2",children:[n.jsx(Ze,{value:"details",children:"Details"}),n.jsxs(Ze,{value:"audit",children:["Audit Trail",s.length>0&&n.jsx(Fe,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:s.length})]})]}),n.jsxs(tt,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",p(e.status)),children:e.status.toUpperCase()}),n.jsx(Fe,{className:Ge("ri-badge-status",x(e.type)),children:e.type.toUpperCase()}),n.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:Ie(e.amount)})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sales Rep"}),n.jsx("p",{className:"font-medium",children:(E==null?void 0:E.name)||e.salesPersonId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Deal"}),n.jsx("p",{className:"font-medium",children:(A==null?void 0:A.name)||e.dealId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Commission Type"}),n.jsx("p",{className:"font-medium",children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),n.jsx("p",{className:"font-medium text-primary",children:Ie(e.amount)})]}),e.type===Nr.PERCENTAGE&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Rate"}),n.jsxs("p",{className:"font-medium",children:[(e.rate*100).toFixed(2),"%"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),n.jsx("p",{className:"font-medium",children:ft(e.createdAt)})]}),e.paidDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),n.jsx("p",{className:"font-medium",children:ft(e.paidDate)})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]}),(e.status===Ut.PENDING||e.status===Ut.APPROVED)&&n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"actionNotes",children:"Action Notes"}),n.jsx(ir,{id:"actionNotes",value:h,onChange:C=>m(C.target.value),placeholder:"Add notes about this action (for audit trail)",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[e.status===Ut.PENDING&&n.jsxs(n.Fragment,{children:[n.jsxs(J,{variant:"outline",onClick:y,disabled:v,children:[n.jsx(Do,{className:"h-4 w-4 mr-2"}),"Reject"]}),n.jsxs(J,{onClick:b,disabled:v,children:[n.jsx(an,{className:"h-4 w-4 mr-2"}),"Approve"]})]}),e.status===Ut.APPROVED&&n.jsxs(J,{onClick:j,disabled:v,children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]})]})]})]}),n.jsx(tt,{value:"audit",children:n.jsx(rme,{auditEntries:s})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:a,children:"Close"}),n.jsxs(J,{onClick:()=>i(e),children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Commission"]})]})]})]})})}function sme({rules:e,onCreateRule:t,onEditRule:r,onDeleteRule:s}){const[a,i]=w.useState(""),[o,l]=w.useState("all"),c=u=>{switch(u){case"flat":return"bg-blue-50 text-blue-700 border-blue-200";case"percentage":return"bg-green-50 text-green-700 border-green-200";case"tiered":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=e.filter(u=>{const h=u.name.toLowerCase().includes(a.toLowerCase()),m=o==="all"||u.type===o;return h&&m}),f=u=>{switch(u.type){case"flat":return`${Ie(u.amount)} flat rate`;case"percentage":return`${(u.rate*100).toFixed(2)}% of deal value`;case"tiered":const h=u.tiers;return h.length===0?"No tiers defined":`${h.length} tiers, ${(h[0].rate*100).toFixed(2)}% to ${(h[h.length-1].rate*100).toFixed(2)}%`;default:return""}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search rules...",value:a,onChange:u=>i(u.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:o,onChange:u=>l(u.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"flat",children:"Flat"}),n.jsx("option",{value:"percentage",children:"Percentage"}),n.jsx("option",{value:"tiered",children:"Tiered"})]}),n.jsxs(J,{onClick:t,className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Rule"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"text-xl",children:["Commission Rules (",d.length,")"]}),n.jsx(Be,{children:"Define how commissions are calculated for different scenarios"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[d.map(u=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:u.name}),n.jsx(Fe,{className:Ge("ri-badge-status",c(u.type)),children:u.type.toUpperCase()}),u.isActive?n.jsx(Fe,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):n.jsx(Fe,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),n.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:u.type==="flat"?n.jsxs("span",{className:"flex items-center",children:[n.jsx($t,{className:"h-3 w-3 mr-1 text-blue-500"}),f(u)]}):u.type==="percentage"?n.jsxs("span",{className:"flex items-center",children:[n.jsx(yg,{className:"h-3 w-3 mr-1 text-green-500"}),f(u)]}):n.jsxs("span",{className:"flex items-center",children:[n.jsx(dc,{className:"h-3 w-3 mr-1 text-purple-500"}),f(u)]})}),u.type==="tiered"&&n.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:u.tiers.map((h,m)=>n.jsxs("div",{className:"text-xs p-1 bg-muted/30 rounded",children:[Ie(h.minAmount),h.maxAmount?` - ${Ie(h.maxAmount)}`:"+",":",n.jsxs("span",{className:"font-semibold ml-1",children:[(h.rate*100).toFixed(2),"%"]})]},h.id))})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(u),children:[n.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>s(u.id),children:n.jsx($n,{className:"h-3 w-3"})})]})]},u.id)),d.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(dc,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No commission rules found"}),n.jsx("p",{className:"text-sm",children:"Create your first rule to get started"})]})]})})]})]})}function ame({rule:e,onSave:t,onCancel:r}){const{toast:s}=_t(),[a,i]=w.useState(!1),[o,l]=w.useState((e==null?void 0:e.type)||"percentage"),[c,d]=w.useState((e==null?void 0:e.name)||""),[f,u]=w.useState((e==null?void 0:e.isActive)!==!1),[h,m]=w.useState((e==null?void 0:e.type)==="flat"?e.amount:500),[v,g]=w.useState((e==null?void 0:e.type)==="percentage"?e.rate:.05),[p,x]=w.useState((e==null?void 0:e.type)==="tiered"?e.tiers:[{id:"1",ruleId:"",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"",minAmount:1e5,rate:.07}]),b=async A=>{if(A.preventDefault(),!c){s({title:"Validation Error",description:"Rule name is required",variant:"destructive"});return}i(!0);try{let C;switch(o){case"flat":C={name:c,type:"flat",amount:h,isActive:f};break;case"percentage":C={name:c,type:"percentage",rate:v,isActive:f};break;case"tiered":for(let S=0;S<p.length;S++)if(S<p.length-1&&p[S].maxAmount!==p[S+1].minAmount){s({title:"Validation Error",description:"Tier ranges must be continuous without gaps",variant:"destructive"});return}C={name:c,type:"tiered",tiers:p,isActive:f};break;default:throw new Error("Invalid rule type")}await t(C)}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} commission rule`,variant:"destructive"})}finally{i(!1)}},y=()=>{if(p.length===0){x([{id:"1",ruleId:"",minAmount:0,rate:.03}]);return}const A=p[p.length-1],C={id:Math.random().toString(36).substr(2,9),ruleId:"",minAmount:A.maxAmount||A.minAmount+5e4,rate:A.rate+.01};x([...p,C])},j=A=>{x(p.filter(C=>C.id!==A))},E=(A,C)=>{x(p.map(S=>S.id===A?{...S,...C}:S))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Commission Rule":"Create Commission Rule"}),n.jsx(Be,{children:e?"Update commission rule details":"Define a new commission calculation rule"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Rule Name *"}),n.jsx(Pe,{id:"name",value:c,onChange:A=>d(A.target.value),placeholder:"e.g., Standard Sales Commission"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Commission Type"}),n.jsxs(We,{value:o,onValueChange:A=>l(A),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"flat",children:"Flat Amount"}),n.jsx(K,{value:"percentage",children:"Percentage"}),n.jsx(K,{value:"tiered",children:"Tiered Percentage"})]})]})]})]}),o==="flat"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(ae,{htmlFor:"flatAmount",children:"Flat Commission Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"flatAmount",type:"number",value:h,onChange:A=>m(parseFloat(A.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"A fixed amount will be paid regardless of the deal value"})]}),o==="percentage"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(ae,{htmlFor:"percentageRate",children:"Commission Rate (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx(yg,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"percentageRate",type:"number",value:v*100,onChange:A=>g(parseFloat(A.target.value)/100||0),className:"pl-10",min:"0",max:"100",step:"0.01"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"A percentage of the deal value will be paid as commission"})]}),o==="tiered"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ae,{children:"Tiered Commission Rates"}),n.jsxs(J,{type:"button",onClick:y,size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Tier"]})]}),n.jsxs("div",{className:"space-y-3",children:[p.map((A,C)=>n.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[n.jsxs("div",{children:[n.jsx(ae,{className:"text-xs",children:"Min Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),n.jsx(Pe,{type:"number",value:A.minAmount,onChange:S=>E(A.id,{minAmount:parseFloat(S.target.value)||0}),className:"pl-7 h-9 text-sm",min:"0",step:"1000"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{className:"text-xs",children:"Max Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),n.jsx(Pe,{type:"number",value:A.maxAmount,onChange:S=>{const T=S.target.value?parseFloat(S.target.value):void 0;E(A.id,{maxAmount:T})},className:"pl-7 h-9 text-sm",min:A.minAmount,step:"1000",placeholder:C===p.length-1?"No limit":""})]})]}),n.jsxs("div",{children:[n.jsx(ae,{className:"text-xs",children:"Rate (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx(yg,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),n.jsx(Pe,{type:"number",value:A.rate*100,onChange:S=>E(A.id,{rate:parseFloat(S.target.value)/100||0}),className:"pl-7 h-9 text-sm",min:"0",max:"100",step:"0.01"})]})]})]}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(A.id),disabled:p.length<=1,children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]},A.id)),p.length===0&&n.jsxs("div",{className:"text-center py-4 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx("p",{children:"No tiers defined"}),n.jsx("p",{className:"text-sm",children:'Click "Add Tier" to create commission tiers'})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Different commission rates will apply based on the deal value tiers"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isActive",checked:f,onCheckedChange:A=>u(!!A)}),n.jsx(ae,{htmlFor:"isActive",children:"Active rule"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Rule"]})})]})]})})]})})}function ime({salesReps:e,onGenerateReport:t,onExportCSV:r}){const{toast:s}=_t(),[a,i]=w.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,salesPersonId:"",status:"",type:""}),[o,l]=w.useState(!1),[c,d]=w.useState(null),[f,u]=w.useState("none"),h=()=>{try{const b=t(a);d(b),s({title:"Report Generated",description:`Generated report with ${b.commissions.length} commissions`})}catch{s({title:"Error",description:"Failed to generate report",variant:"destructive"})}},m=()=>{if(c)try{const b=r(c.commissions),y=tm.unparse(b),j=new Blob([y],{type:"text/csv;charset=utf-8;"}),E=URL.createObjectURL(j),A=document.createElement("a");A.href=E,A.setAttribute("download",`commission_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(A),A.click(),document.body.removeChild(A),s({title:"Export Successful",description:"Commission report exported to CSV"})}catch{s({title:"Export Failed",description:"Failed to export report to CSV",variant:"destructive"})}},v=b=>{if(f==="none")return{"All Commissions":b};const y={};return b.forEach(j=>{let E="";switch(f){case"salesPerson":E=j.salesPersonId;break;case"status":E=j.status;break;case"type":E=j.type;break}y[E]||(y[E]=[]),y[E].push(j)}),y},g=b=>{switch(f){case"salesPerson":const y=e.find(j=>j.id===b);return y?y.name:b;case"status":return b.charAt(0).toUpperCase()+b.slice(1);case"type":return b.charAt(0).toUpperCase()+b.slice(1);default:return b}},p=b=>{switch(b){case Ut.PENDING:return"Pending";case Ut.APPROVED:return"Approved";case Ut.PAID:return"Paid";case Ut.CANCELLED:return"Cancelled";default:return b}},x=b=>{switch(b){case Nr.FLAT:return"Flat";case Nr.PERCENTAGE:return"Percentage";case Nr.TIERED:return"Tiered";default:return b}};return n.jsx("div",{className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(es,{className:"h-5 w-5 mr-2 text-primary"}),"Commission Report Generator"]}),n.jsx(Be,{children:"Generate detailed commission reports with custom filters"})]}),n.jsxs(J,{variant:"outline",onClick:()=>l(!o),className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),o?"Hide Filters":"Show Filters"]})]})}),n.jsxs(fe,{children:[o&&n.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-muted/30 rounded-lg",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"startDate",children:"Start Date"}),n.jsx(Pe,{id:"startDate",type:"date",value:a.startDate?new Date(a.startDate).toISOString().split("T")[0]:"",onChange:b=>i(y=>({...y,startDate:b.target.value?new Date(b.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"endDate",children:"End Date"}),n.jsx(Pe,{id:"endDate",type:"date",value:a.endDate?new Date(a.endDate).toISOString().split("T")[0]:"",onChange:b=>i(y=>({...y,endDate:b.target.value?new Date(b.target.value):void 0}))})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"salesPersonId",children:"Sales Rep"}),n.jsxs(We,{value:a.salesPersonId||"",onValueChange:b=>i(y=>({...y,salesPersonId:b})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"All Sales Reps"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"All Sales Reps"}),e.map(b=>n.jsx(K,{value:b.id,children:b.name},b.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(We,{value:a.status||"",onValueChange:b=>i(y=>({...y,status:b})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"All Statuses"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"All Statuses"}),n.jsx(K,{value:Ut.PENDING,children:"Pending"}),n.jsx(K,{value:Ut.APPROVED,children:"Approved"}),n.jsx(K,{value:Ut.PAID,children:"Paid"}),n.jsx(K,{value:Ut.CANCELLED,children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Commission Type"}),n.jsxs(We,{value:a.type||"",onValueChange:b=>i(y=>({...y,type:b})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"All Types"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"All Types"}),n.jsx(K,{value:Nr.FLAT,children:"Flat"}),n.jsx(K,{value:Nr.PERCENTAGE,children:"Percentage"}),n.jsx(K,{value:Nr.TIERED,children:"Tiered"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(J,{onClick:h,children:[n.jsx(es,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}),!o&&n.jsx("div",{className:"flex justify-end mb-6",children:n.jsxs(J,{onClick:h,children:[n.jsx(es,{className:"h-4 w-4 mr-2"}),"Generate Report"]})}),c&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsx(ue,{className:"shadow-sm bg-blue-50",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Commissions"}),n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:c.summary.totalCommissions}),n.jsx("div",{className:"text-sm text-blue-700 mt-1",children:Ie(c.summary.totalAmount)})]})})}),n.jsx(ue,{className:"shadow-sm bg-yellow-50",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-yellow-700 mb-1",children:"Pending"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Ie(c.summary.pendingAmount)}),n.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"Awaiting approval"})]})})}),n.jsx(ue,{className:"shadow-sm bg-green-50",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"Paid"}),n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Ie(c.summary.paidAmount)}),n.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Commissions paid"})]})})}),n.jsx(ue,{className:"shadow-sm bg-purple-50",children:n.jsx(fe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Approved"}),n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Ie(c.summary.approvedAmount)}),n.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"Ready for payment"})]})})})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(ae,{htmlFor:"groupBy",className:"whitespace-nowrap",children:"Group By:"}),n.jsxs(We,{value:f,onValueChange:b=>u(b),children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"none",children:"No Grouping"}),n.jsx(K,{value:"salesPerson",children:"Sales Rep"}),n.jsx(K,{value:"status",children:"Status"}),n.jsx(K,{value:"type",children:"Commission Type"})]})]})]}),n.jsxs(J,{variant:"outline",onClick:m,disabled:!c,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsx("div",{className:"space-y-6",children:Object.entries(v(c.commissions)).map(([b,y])=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[f==="salesPerson"&&n.jsx(As,{className:"h-4 w-4 mr-2 text-blue-500"}),f==="status"&&n.jsx(Ns,{className:"h-4 w-4 mr-2 text-yellow-500"}),f==="type"&&n.jsx(es,{className:"h-4 w-4 mr-2 text-purple-500"}),g(b),n.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",y.length," commissions, ",Ie(y.reduce((j,E)=>j+E.amount,0)),")"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Sales Rep"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Deal"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Type"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Amount"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Status"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Created"})]})}),n.jsx("tbody",{children:y.map(j=>{const E=e.find(A=>A.id===j.salesPersonId);return n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:(E==null?void 0:E.name)||j.salesPersonId}),n.jsx("td",{className:"p-2",children:j.dealId}),n.jsx("td",{className:"p-2",children:x(j.type)}),n.jsx("td",{className:"p-2 font-medium",children:Ie(j.amount)}),n.jsx("td",{className:"p-2",children:p(j.status)}),n.jsx("td",{className:"p-2",children:new Date(j.createdAt).toLocaleDateString()})]},j.id)})})]})})]},b))})]}),!c&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(es,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No report generated yet"}),n.jsx("p",{className:"text-sm",children:"Use the filters above to generate a commission report"})]})]})]})})}const jy=[{id:"sales-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"sales-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"sales-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],pS=[{id:"deal-001",name:"Georgetown Class A Sale - Smith Family",customerName:"John & Mary Smith",value:137500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-15")},{id:"deal-002",name:"Travel Trailer - Johnson Family",customerName:"Sarah Johnson",value:75e3,stage:"closed_won",status:"active",createdAt:new Date("2024-01-10")},{id:"deal-003",name:"Service Contract - Davis",customerName:"Mike Davis",value:2500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-20")}];function SD(){const{commissions:e,rules:t,auditTrail:r,createCommission:s,updateCommission:a,approveCommission:i,rejectCommission:o,markCommissionPaid:l,createRule:c,updateRule:d,deleteRule:f,getAuditTrailByCommission:u,generateCommissionReport:h,exportCommissionsToCSV:m}=eme(),{user:v}=Fm(),{toast:g}=_t(),[p,x]=w.useState(""),[b,y]=w.useState("all"),[j,E]=w.useState("commissions"),[A,C]=w.useState(!1),[S,T]=w.useState(!1),[O,_]=w.useState(!1),[N,D]=w.useState(null),[I,R]=w.useState(null),M=ye=>{switch(ye){case Ut.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ut.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Ut.PAID:return"bg-green-50 text-green-700 border-green-200";case Ut.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},$=ye=>{switch(ye){case Nr.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case Nr.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case Nr.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},B=ye=>{switch(ye){case Ut.PENDING:return n.jsx(ur,{className:"h-4 w-4 text-yellow-500"});case Ut.APPROVED:return n.jsx(an,{className:"h-4 w-4 text-blue-500"});case Ut.PAID:return n.jsx($t,{className:"h-4 w-4 text-green-500"});case Ut.CANCELLED:return n.jsx(Do,{className:"h-4 w-4 text-red-500"});default:return null}},U=e.filter(ye=>{const $e=ye.salesPersonId.toLowerCase().includes(p.toLowerCase())||ye.dealId.toLowerCase().includes(p.toLowerCase())||ye.id.toLowerCase().includes(p.toLowerCase()),rt=b==="all"||ye.status===b;return $e&&rt}),q=()=>{D(null),C(!0)},W=ye=>{D(ye),C(!0),T(!1)},L=ye=>{D(ye),T(!0)},V=async(ye,$e)=>{try{N?(await a(N.id,ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",$e),g({title:"Success",description:"Commission updated successfully"})):(await s(ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User"),g({title:"Success",description:"Commission created successfully"})),C(!1),D(null)}catch{g({title:"Error",description:`Failed to ${N?"update":"create"} commission`,variant:"destructive"})}},G=async(ye,$e)=>{try{await i(ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",$e),g({title:"Success",description:"Commission approved successfully"})}catch{g({title:"Error",description:"Failed to approve commission",variant:"destructive"})}},Z=async(ye,$e)=>{try{await o(ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",$e),g({title:"Success",description:"Commission rejected successfully"})}catch{g({title:"Error",description:"Failed to reject commission",variant:"destructive"})}},ee=async(ye,$e)=>{try{await l(ye,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",$e),g({title:"Success",description:"Commission marked as paid successfully"})}catch{g({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}},he=()=>{R(null),_(!0)},me=ye=>{R(ye),_(!0)},oe=async ye=>{try{I?(await d(I.id,ye),g({title:"Success",description:"Commission rule updated successfully"})):(await c(ye),g({title:"Success",description:"Commission rule created successfully"})),_(!1),R(null)}catch{g({title:"Error",description:`Failed to ${I?"update":"create"} commission rule`,variant:"destructive"})}},we=async ye=>{if(window.confirm("Are you sure you want to delete this commission rule?"))try{await f(ye),g({title:"Success",description:"Commission rule deleted successfully"})}catch{g({title:"Error",description:"Failed to delete commission rule",variant:"destructive"})}},ve=e.length,pe=e.filter(ye=>ye.status===Ut.PENDING).length,De=e.filter(ye=>ye.status===Ut.APPROVED).length,xe=e.filter(ye=>ye.status===Ut.PAID).length,le=e.reduce((ye,$e)=>ye+$e.amount,0),re=e.filter(ye=>ye.status===Ut.PENDING).reduce((ye,$e)=>ye+$e.amount,0),Se=e.filter(ye=>ye.status===Ut.APPROVED).reduce((ye,$e)=>ye+$e.amount,0),Ne=e.filter(ye=>ye.status===Ut.PAID).reduce((ye,$e)=>ye+$e.amount,0);return n.jsxs("div",{className:"space-y-8",children:[A&&n.jsx(tme,{commission:N||void 0,salesReps:jy,deals:pS,rules:t,onSave:V,onCancel:()=>{C(!1),D(null)}}),S&&N&&n.jsx(nme,{commission:N,salesReps:jy,deals:pS,auditTrail:u(N.id),onClose:()=>T(!1),onEdit:W,onApprove:G,onReject:Z,onMarkPaid:ee}),O&&n.jsx(ame,{rule:I||void 0,onSave:oe,onCancel:()=>{_(!1),R(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),n.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),n.jsxs(J,{className:"shadow-sm",onClick:q,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),n.jsx($t,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Ie(le)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(As,{className:"h-3 w-3 mr-1"}),ve," commissions"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(ur,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Ie(re)}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(ur,{className:"h-3 w-3 mr-1"}),pe," pending approval"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Approved"}),n.jsx(an,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Ie(Se)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(an,{className:"h-3 w-3 mr-1"}),De," approved"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Paid"}),n.jsx($t,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Ie(Ne)}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx($t,{className:"h-3 w-3 mr-1"}),xe," paid out"]})]})]})]}),n.jsxs(Ar,{value:j,onValueChange:E,className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"commissions",children:"Commissions"}),n.jsx(Ze,{value:"rules",children:"Commission Rules"}),n.jsx(Ze,{value:"reports",children:"Reports"})]}),n.jsxs(tt,{value:"commissions",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search commissions...",value:p,onChange:ye=>x(ye.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(We,{value:b,onValueChange:y,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:Ut.PENDING,children:"Pending"}),n.jsx(K,{value:Ut.APPROVED,children:"Approved"}),n.jsx(K,{value:Ut.PAID,children:"Paid"}),n.jsx(K,{value:Ut.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs(J,{onClick:q,className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Commission"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Commissions"}),n.jsx(Be,{children:"Track and manage sales commissions"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[U.map(ye=>{const $e=jy.find(nt=>nt.id===ye.salesPersonId),rt=pS.find(nt=>nt.id===ye.dealId);return n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Commission #",ye.id]}),n.jsx(Fe,{className:Ge("ri-badge-status",$(ye.type)),children:ye.type.toUpperCase()}),n.jsxs(Fe,{className:Ge("ri-badge-status",M(ye.status)),children:[B(ye.status),n.jsx("span",{className:"ml-1",children:ye.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(As,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Sales Rep:"}),n.jsx("span",{className:"ml-1",children:($e==null?void 0:$e.name)||ye.salesPersonId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx($t,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Deal:"}),n.jsx("span",{className:"ml-1",children:(rt==null?void 0:rt.name)||ye.dealId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx($t,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Amount:"}),n.jsx("span",{className:"ml-1 font-bold text-primary",children:Ie(ye.amount)})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-2 text-orange-500"}),n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{className:"ml-1",children:ft(ye.createdAt)})]})]}),ye.notes&&n.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",ye.notes]})})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>L(ye),children:"View"}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>W(ye),children:"Edit"}),ye.status===Ut.PENDING&&n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>G(ye.id),children:"Approve"}),ye.status===Ut.APPROVED&&n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>ee(ye.id),children:"Mark Paid"})]})]},ye.id)}),U.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx($t,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No commissions found"}),n.jsx("p",{className:"text-sm",children:"Create your first commission to get started"})]})]})})]})]}),n.jsx(tt,{value:"rules",children:n.jsx(sme,{rules:t,onCreateRule:he,onEditRule:me,onDeleteRule:we})}),n.jsx(tt,{value:"reports",children:n.jsx(ime,{salesReps:jy,onGenerateReport:h,onExportCSV:m})})]})]})}function ome(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(SD,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(SD,{})})]})}function lme({user:e,onSave:t,onCancel:r}){const{toast:s}=_t(),[a,i]=w.useState(!1),[o,l]=w.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",sendInvite:!0,inviteMethod:"email",notes:(e==null?void 0:e.notes)||"",status:(e==null?void 0:e.status)||"active"}),c=async d=>{if(d.preventDefault(),!o.firstName||!o.lastName||!o.email){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}i(!0);try{await new Promise(f=>setTimeout(f,1e3)),t({...o,id:(e==null?void 0:e.id)||Math.random().toString(36).substring(2,9)}),s({title:"Success",description:`Portal user ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} portal user`,variant:"destructive"})}finally{i(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Portal User":"Add Portal User"}),n.jsx(Be,{children:e?"Update user details":"Create a new portal user account"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"firstName",children:"First Name *"}),n.jsx(Pe,{id:"firstName",value:o.firstName,onChange:d=>l(f=>({...f,firstName:d.target.value})),placeholder:"Enter first name"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"lastName",children:"Last Name *"}),n.jsx(Pe,{id:"lastName",value:o.lastName,onChange:d=>l(f=>({...f,lastName:d.target.value})),placeholder:"Enter last name"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"email",children:"Email Address *"}),n.jsxs("div",{className:"relative",children:[n.jsx(on,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"email",type:"email",value:o.email,onChange:d=>l(f=>({...f,email:d.target.value})),placeholder:"Enter email address",className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"phone",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx($m,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"phone",type:"tel",value:o.phone,onChange:d=>l(f=>({...f,phone:d.target.value})),placeholder:"Enter phone number",className:"pl-10"})]})]}),!e&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"sendInvite",checked:o.sendInvite,onCheckedChange:d=>l(f=>({...f,sendInvite:!!d}))}),n.jsx(ae,{htmlFor:"sendInvite",children:"Send invitation to user"})]}),o.sendInvite&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"inviteMethod",children:"Invitation Method"}),n.jsxs(We,{value:o.inviteMethod,onValueChange:d=>l(f=>({...f,inviteMethod:d})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"sms",children:"SMS"}),n.jsx(K,{value:"both",children:"Both Email & SMS"})]})]})]})]}),e&&n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Account Status"}),n.jsxs(We,{value:o.status,onValueChange:d=>l(f=>({...f,status:d})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"active",children:"Active"}),n.jsx(K,{value:"inactive",children:"Inactive"}),n.jsx(K,{value:"suspended",children:"Suspended"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(ir,{id:"notes",value:o.notes,onChange:d=>l(f=>({...f,notes:d.target.value})),placeholder:"Add any notes about this user",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," User"]})})]})]})})]})})}const cme=[{id:"user-1",firstName:"John",lastName:"Smith",email:"john.smith@example.com",phone:"(555) 123-4567",status:"active",lastLogin:new Date("2024-01-18"),createdAt:new Date("2023-12-15")},{id:"user-2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@example.com",phone:"(555) 987-6543",status:"active",lastLogin:new Date("2024-01-16"),createdAt:new Date("2023-12-10")},{id:"user-3",firstName:"Michael",lastName:"Davis",email:"michael.d@example.com",phone:"(555) 456-7890",status:"inactive",lastLogin:new Date("2023-12-05"),createdAt:new Date("2023-11-20")}];function dme({onImpersonate:e}){const{toast:t}=_t(),[r,s]=w.useState(cme),[a,i]=w.useState(""),[o,l]=w.useState("all"),c=h=>{switch(h){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=r.filter(h=>{const m=`${h.firstName} ${h.lastName}`.toLowerCase().includes(a.toLowerCase())||h.email.toLowerCase().includes(a.toLowerCase())||h.phone.includes(a),v=o==="all"||h.status===o;return m&&v}),f=h=>{t({title:"Password Reset Link Sent",description:"A password reset link has been sent to the user's email address."})},u=h=>{console.log("Edit user:",h)};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search users...",value:a,onChange:h=>i(h.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(We,{value:o,onValueChange:l,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:"active",children:"Active"}),n.jsx(K,{value:"inactive",children:"Inactive"}),n.jsx(K,{value:"suspended",children:"Suspended"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Portal Users"}),n.jsx(Be,{children:"Manage customer portal access and permissions"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[d.map(h=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:[h.firstName," ",h.lastName]}),n.jsx(Fe,{className:Ge("ri-badge-status",c(h.status)),children:h.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(on,{className:"h-3 w-3 mr-2 text-blue-500"}),h.email]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx($m,{className:"h-3 w-3 mr-2 text-green-500"}),h.phone]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-2 text-purple-500"}),"Last login: ",h.lastLogin.toLocaleDateString()]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>u(h),children:[n.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>f(h.id),children:"Reset Password"}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>e(h.id,`${h.firstName} ${h.lastName}`),children:[n.jsx(kX,{className:"h-3 w-3 mr-1"}),"Proxy as Client"]})]})]},h.id)),d.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Users,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No users found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function ume(){const{toast:e}=_t(),[t,r]=w.useState("general"),[s,a]=w.useState("Customer Self-Service Portal"),[i,o]=w.useState("Access your quotes, service history, and more"),[l,c]=w.useState(""),[d,f]=w.useState("Welcome to your customer portal. Here you can view your quotes, track deliveries, and request service."),[u,h]=w.useState(!0),[m,v]=w.useState(!0),[g,p]=w.useState(!0),[x,b]=w.useState(!0),[y,j]=w.useState(!0),[E,A]=w.useState(!0),[C,S]=w.useState(90),[T,O]=w.useState(5),[_,N]=w.useState(30),[D,I]=w.useState(!1),R=()=>{e({title:"Settings Saved",description:"Portal settings have been updated successfully."})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Ar,{value:t,onValueChange:r,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"general",children:"General"}),n.jsx(Ze,{value:"notifications",children:"Notifications"}),n.jsx(Ze,{value:"security",children:"Security"})]}),n.jsxs(tt,{value:"general",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(yx,{className:"h-5 w-5 mr-2 text-primary"}),"Portal Configuration"]}),n.jsx(Be,{children:"Configure general portal settings and appearance"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"portalName",children:"Portal Name"}),n.jsx(Pe,{id:"portalName",value:s,onChange:M=>a(M.target.value)})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"portalDescription",children:"Portal Description"}),n.jsx(Pe,{id:"portalDescription",value:i,onChange:M=>o(M.target.value)})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"portalLogo",children:"Logo URL (Optional)"}),n.jsx(Pe,{id:"portalLogo",value:l,onChange:M=>c(M.target.value),placeholder:"https://example.com/logo.png"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"welcomeMessage",children:"Welcome Message"}),n.jsx(ir,{id:"welcomeMessage",value:d,onChange:M=>f(M.target.value),rows:3})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-lg",children:"Portal Features"}),n.jsx(Be,{children:"Enable or disable portal features"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"enableQuotes",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableQuotes",children:"Enable Quotes"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"enableService",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableService",children:"Enable Service Requests"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"enableDelivery",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableDelivery",children:"Enable Delivery Tracking"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"enableDocuments",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableDocuments",children:"Enable Document Signing"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"enableSurveys",defaultChecked:!0}),n.jsx(ae,{htmlFor:"enableSurveys",children:"Enable Satisfaction Surveys"})]})]})})]})]}),n.jsxs(tt,{value:"notifications",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(KM,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Settings"]}),n.jsx(Be,{children:"Configure how and when notifications are sent"})]}),n.jsx(fe,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{className:"text-base",children:"Notification Channels"}),n.jsxs("div",{className:"mt-2 space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"emailNotifications",checked:u,onCheckedChange:M=>h(!!M)}),n.jsxs(ae,{htmlFor:"emailNotifications",className:"flex items-center",children:[n.jsx(on,{className:"h-4 w-4 mr-2 text-blue-500"}),"Email Notifications"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"smsNotifications",checked:m,onCheckedChange:M=>v(!!M)}),n.jsxs(ae,{htmlFor:"smsNotifications",className:"flex items-center",children:[n.jsx(Pn,{className:"h-4 w-4 mr-2 text-green-500"}),"SMS Notifications"]})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{className:"text-base",children:"Notification Events"}),n.jsxs("div",{className:"mt-2 space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"notifyOnQuoteViewed",checked:g,onCheckedChange:M=>p(!!M)}),n.jsx(ae,{htmlFor:"notifyOnQuoteViewed",children:"Quote Viewed by Customer"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"notifyOnQuoteAccepted",checked:x,onCheckedChange:M=>b(!!M)}),n.jsx(ae,{htmlFor:"notifyOnQuoteAccepted",children:"Quote Accepted by Customer"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"notifyOnServiceRequest",checked:y,onCheckedChange:M=>j(!!M)}),n.jsx(ae,{htmlFor:"notifyOnServiceRequest",children:"New Service Request Submitted"})]})]})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-lg",children:"Email Templates"}),n.jsx(Be,{children:"Customize notification email templates"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"welcomeEmailTemplate",children:"Welcome Email"}),n.jsxs(We,{defaultValue:"default",children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"default",children:"Default Welcome Template"}),n.jsx(K,{value:"minimal",children:"Minimal Welcome Template"}),n.jsx(K,{value:"branded",children:"Branded Welcome Template"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"passwordResetTemplate",children:"Password Reset Email"}),n.jsxs(We,{defaultValue:"default",children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"default",children:"Default Password Reset Template"}),n.jsx(K,{value:"minimal",children:"Minimal Password Reset Template"}),n.jsx(K,{value:"secure",children:"Secure Password Reset Template"})]})]})]})]})})]})]}),n.jsxs(tt,{value:"security",className:"space-y-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx($X,{className:"h-5 w-5 mr-2 text-primary"}),"Security Settings"]}),n.jsx(Be,{children:"Configure portal security and access controls"})]}),n.jsx(fe,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"requireStrongPasswords",checked:E,onCheckedChange:M=>A(!!M)}),n.jsx(ae,{htmlFor:"requireStrongPasswords",children:"Require Strong Passwords"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"passwordExpiryDays",children:"Password Expiry (Days)"}),n.jsx(Pe,{id:"passwordExpiryDays",type:"number",min:"0",value:C,onChange:M=>S(parseInt(M.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for no expiration"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),n.jsx(Pe,{id:"maxLoginAttempts",type:"number",min:"1",value:T,onChange:M=>O(parseInt(M.target.value)||5)})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"sessionTimeoutMinutes",children:"Session Timeout (Minutes)"}),n.jsx(Pe,{id:"sessionTimeoutMinutes",type:"number",min:"5",value:_,onChange:M=>N(parseInt(M.target.value)||30)})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"twoFactorAuth",checked:D,onCheckedChange:M=>I(!!M)}),n.jsx(ae,{htmlFor:"twoFactorAuth",children:"Enable Two-Factor Authentication"})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-lg",children:"Access Controls"}),n.jsx(Be,{children:"Configure IP restrictions and access limits"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"ipWhitelist",children:"IP Whitelist (Optional)"}),n.jsx(ir,{id:"ipWhitelist",placeholder:"Enter IP addresses, one per line",rows:3}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty to allow access from any IP address"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"limitConcurrentSessions",defaultChecked:!0}),n.jsx(ae,{htmlFor:"limitConcurrentSessions",children:"Limit to One Active Session Per User"})]})]})})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(J,{onClick:R,children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})}function CD(){const[e,t]=w.useState("users"),[r,s]=w.useState(!1),a=()=>{s(!0)},i=(o,l)=>{const c=`/customer-portal?impersonateClientId=${o}`;window.open(c,"_blank")};return n.jsxs("div",{className:"space-y-8",children:[r&&n.jsx(lme,{onSave:()=>{s(!1)},onCancel:()=>s(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Client Portal Management"}),n.jsx("p",{className:"ri-page-description",children:"Manage customer portal access and self-service features"})]}),n.jsxs(J,{className:"shadow-sm",onClick:a,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Portal User"]})]})}),n.jsxs(Ar,{value:e,onValueChange:t,className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"users",children:"Portal Users"}),n.jsx(Ze,{value:"settings",children:"Portal Settings"}),n.jsx(Ze,{value:"activity",children:"User Activity"})]}),n.jsx(tt,{value:"users",children:n.jsx(dme,{onImpersonate:i})}),n.jsx(tt,{value:"settings",children:n.jsx(ume,{})}),n.jsx(tt,{value:"activity",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Portal Activity"}),n.jsx(Be,{children:"Recent user activity in the customer portal"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(yx,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No recent activity to display"})]})})})]})})]})]})}function fme(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(CD,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(CD,{})})]})}function jz(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState(!1);w.useEffect(()=>{o()},[]);const o=()=>{const j=En("renter-insight-invoices",[{id:"1",customerId:"cust-1",number:"INV-2024-001",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:Ht.PAID,dueDate:new Date("2024-02-15"),paidDate:new Date("2024-01-20"),paymentMethod:"Credit Card",notes:"Payment received via Zego",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",customerId:"cust-2",number:"INV-2024-002",items:[{id:"3",description:"Service - AC Repair",quantity:1,unitPrice:620,total:620}],subtotal:620,tax:49.6,total:669.6,status:Ht.SENT,dueDate:new Date("2024-02-20"),notes:"Service invoice for AC repair",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}]),E=En("renter-insight-payments",[{id:"1",invoiceId:"1",amount:137700,method:Hl.CREDIT_CARD,status:id.COMPLETED,transactionId:"txn_1234567890",processedDate:new Date("2024-01-20"),notes:"Processed via Zego payment gateway",customFields:{},createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20")}]);t(j),s(E)},l=j=>{rn("renter-insight-invoices",j)},c=j=>{rn("renter-insight-payments",j)},d=j=>e.filter(E=>E.customerId===j),f=j=>e.find(E=>E.id===j),u=j=>r.filter(E=>E.invoiceId===j),h=async j=>{i(!0);try{const E={id:Math.random().toString(36).substr(2,9),customerId:j.customerId||"",number:j.number||"",items:j.items||[],subtotal:j.subtotal||0,tax:j.tax||0,total:j.total||0,status:j.status||Ht.DRAFT,dueDate:j.dueDate||new Date,notes:j.notes||"",customFields:j.customFields||{},createdAt:new Date,updatedAt:new Date},A=[...e,E];return t(A),l(A),E}finally{i(!1)}},m=async(j,E)=>{const A=e.map(C=>C.id===j?{...C,...E,updatedAt:new Date}:C);t(A),l(A)},v=async j=>{const E=e.filter(A=>A.id!==j);t(E),l(E)},g=async(j,E)=>{const A=e.map(C=>C.id===j?{...C,status:E,updatedAt:new Date}:C);t(A),l(A)},p=async(j,E)=>{const A=e.map(C=>C.id===j?{...C,status:Ht.PAID,paidDate:new Date,paymentMethod:E,updatedAt:new Date}:C);t(A),l(A)};return{invoices:e,payments:r,loading:a,getInvoicesByCustomerId:d,getInvoiceById:f,getPaymentsByInvoiceId:u,createInvoice:h,updateInvoice:m,deleteInvoice:v,updateInvoiceStatus:g,markInvoiceAsPaid:p,sendInvoice:async j=>{const E=e.map(A=>A.id===j?{...A,status:Ht.SENT,updatedAt:new Date}:A);t(E),l(E)},recordPayment:async j=>{i(!0);try{const E={id:Math.random().toString(36).substr(2,9),invoiceId:j.invoiceId||"",amount:j.amount||0,method:j.method||Hl.CREDIT_CARD,status:j.status||id.COMPLETED,transactionId:j.transactionId,processedDate:j.processedDate||new Date,notes:j.notes||"",customFields:j.customFields||{},createdAt:new Date,updatedAt:new Date},A=[...r,E];return s(A),c(A),E.status===id.COMPLETED&&await p(E.invoiceId,E.method),E}finally{i(!1)}},sendPaymentRequest:async j=>(await g(j,Ht.SENT),await new Promise(E=>setTimeout(E,1e3)),!0)}}function hme({invoice:e,onSave:t,onCancel:r}){const{toast:s}=_t(),{leads:a}=Mo(),[i,o]=w.useState(!1),[l,c]=w.useState({customerId:"",number:`INV-${new Date().getFullYear()}-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`,items:[],subtotal:0,tax:0,total:0,status:Ht.DRAFT,dueDate:new Date(Date.now()+30*24*60*60*1e3),notes:"",customFields:{}}),[d,f]=w.useState({description:"",quantity:1,unitPrice:0,total:0}),[u,h]=w.useState(.08);w.useEffect(()=>{e&&(c({...e,dueDate:new Date(e.dueDate)}),e.subtotal>0&&h(e.tax/e.subtotal))},[e]),w.useEffect(()=>{const p=d.quantity||1,x=d.unitPrice||0;f(b=>({...b,total:p*x}))},[d.quantity,d.unitPrice]),w.useEffect(()=>{if(l.items&&l.items.length>0){const p=l.items.reduce((y,j)=>y+j.total,0),x=p*u,b=p+x;c(y=>({...y,subtotal:p,tax:x,total:b}))}else c(p=>({...p,subtotal:0,tax:0,total:0}))},[l.items,u]);const m=async p=>{if(p.preventDefault(),!l.customerId||!l.number||!l.dueDate){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!l.items||l.items.length===0){s({title:"Validation Error",description:"Please add at least one item to the invoice",variant:"destructive"});return}o(!0);try{await t(l),s({title:"Success",description:`Invoice ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} invoice`,variant:"destructive"})}finally{o(!1)}},v=()=>{if(!d.description||!d.unitPrice){s({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const p={id:Math.random().toString(36).substr(2,9),description:d.description||"",quantity:d.quantity||1,unitPrice:d.unitPrice||0,total:d.total||0};c(x=>({...x,items:[...x.items||[],p]})),f({description:"",quantity:1,unitPrice:0,total:0})},g=p=>{c(x=>{var b;return{...x,items:((b=x.items)==null?void 0:b.filter(y=>y.id!==p))||[]}})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Invoice":"Create Invoice"}),n.jsx(Be,{children:e?"Update invoice details":"Create a new invoice"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(We,{value:l.customerId,onValueChange:p=>c(x=>({...x,customerId:p})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select customer"})}),n.jsx(Ve,{children:a.map(p=>n.jsxs(K,{value:p.id,children:[p.firstName," ",p.lastName]},p.id))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"invoiceNumber",children:"Invoice Number *"}),n.jsx(Pe,{id:"invoiceNumber",value:l.number,onChange:p=>c(x=>({...x,number:p.target.value})),placeholder:"e.g., INV-2024-001"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dueDate",children:"Due Date *"}),n.jsx(Pe,{id:"dueDate",type:"date",value:l.dueDate?new Date(l.dueDate).toISOString().split("T")[0]:"",onChange:p=>c(x=>({...x,dueDate:p.target.value?new Date(p.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(We,{value:l.status,onValueChange:p=>c(x=>({...x,status:p})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:Ht.DRAFT,children:"Draft"}),n.jsx(K,{value:Ht.SENT,children:"Sent"}),n.jsx(K,{value:Ht.VIEWED,children:"Viewed"}),n.jsx(K,{value:Ht.PAID,children:"Paid"}),n.jsx(K,{value:Ht.OVERDUE,children:"Overdue"}),n.jsx(K,{value:Ht.CANCELLED,children:"Cancelled"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Items"}),n.jsxs(J,{type:"button",onClick:v,size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(ae,{htmlFor:"description",children:"Description *"}),n.jsx(Pe,{id:"description",value:d.description,onChange:p=>f(x=>({...x,description:p.target.value})),placeholder:"e.g., Service Labor"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"quantity",children:"Quantity"}),n.jsx(Pe,{id:"quantity",type:"number",min:"1",value:d.quantity,onChange:p=>f(x=>({...x,quantity:parseInt(p.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"unitPrice",children:"Unit Price"}),n.jsx(Pe,{id:"unitPrice",type:"number",step:"0.01",min:"0",value:d.unitPrice,onChange:p=>f(x=>({...x,unitPrice:parseFloat(p.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:Ie(d.total||0)})]}),n.jsx(J,{type:"button",onClick:v,children:"Add Item"})]})]})}),n.jsx("div",{className:"space-y-3",children:l.items&&l.items.length>0?l.items.map(p=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:p.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",p.quantity," × ",Ie(p.unitPrice)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:Ie(p.total)}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(p.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]})]},p.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(va,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No items added yet"}),n.jsx("p",{className:"text-sm",children:"Add items to this invoice"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Totals"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Pe,{id:"taxRate",type:"number",step:"0.01",min:"0",max:"100",value:u*100,onChange:p=>h(parseFloat(p.target.value)/100||0)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Ie(l.subtotal||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",(u*100).toFixed(2),"%):"]}),n.jsx("span",{children:Ie(l.tax||0)})]}),n.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Ie(l.total||0)})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes"}),n.jsx(ir,{id:"notes",value:l.notes,onChange:p=>c(x=>({...x,notes:p.target.value})),placeholder:"Add any additional notes about this invoice",rows:3})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Invoice"]})})]})]})})]})})}function mme({invoiceId:e,invoiceTotal:t,remainingBalance:r,onSave:s,onCancel:a}){const{toast:i}=_t(),[o,l]=w.useState(!1),[c,d]=w.useState({invoiceId:e,amount:r,method:Hl.CREDIT_CARD,status:id.COMPLETED,processedDate:new Date,notes:""}),f=async u=>{if(u.preventDefault(),!c.amount||c.amount<=0){i({title:"Validation Error",description:"Payment amount must be greater than zero",variant:"destructive"});return}if(c.amount>r){i({title:"Validation Error",description:"Payment amount cannot exceed the remaining balance",variant:"destructive"});return}l(!0);try{await s(c),i({title:"Success",description:"Payment recorded successfully"})}catch{i({title:"Error",description:"Failed to record payment",variant:"destructive"})}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Hi,{className:"h-5 w-5 mr-2 text-primary"}),"Record Payment"]}),n.jsxs(Be,{children:["Record a payment for invoice #",e]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"amount",children:"Payment Amount *"}),n.jsxs("div",{className:"relative",children:[n.jsx($t,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"amount",type:"number",step:"0.01",min:"0.01",max:r,value:c.amount,onChange:u=>d(h=>({...h,amount:parseFloat(u.target.value)||0})),className:"pl-10"})]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Remaining balance: ",Ie(r)]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"method",children:"Payment Method *"}),n.jsxs(We,{value:c.method,onValueChange:u=>d(h=>({...h,method:u})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:Hl.CREDIT_CARD,children:"Credit Card"}),n.jsx(K,{value:Hl.BANK_TRANSFER,children:"Bank Transfer"}),n.jsx(K,{value:Hl.CASH,children:"Cash"}),n.jsx(K,{value:Hl.CHECK,children:"Check"}),n.jsx(K,{value:Hl.FINANCING,children:"Financing"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Payment Status *"}),n.jsxs(We,{value:c.status,onValueChange:u=>d(h=>({...h,status:u})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:id.COMPLETED,children:"Completed"}),n.jsx(K,{value:id.PENDING,children:"Pending"}),n.jsx(K,{value:id.PROCESSING,children:"Processing"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"processedDate",children:"Payment Date *"}),n.jsx(Pe,{id:"processedDate",type:"date",value:c.processedDate?new Date(c.processedDate).toISOString().split("T")[0]:"",onChange:u=>d(h=>({...h,processedDate:u.target.value?new Date(u.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"transactionId",children:"Transaction ID"}),n.jsx(Pe,{id:"transactionId",value:c.transactionId||"",onChange:u=>d(h=>({...h,transactionId:u.target.value})),placeholder:"e.g., txn_1234567890"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"notes",children:"Notes"}),n.jsx(ir,{id:"notes",value:c.notes||"",onChange:u=>d(h=>({...h,notes:u.target.value})),placeholder:"Add any notes about this payment",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:a,disabled:o,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Recording..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Record Payment"]})})]})]})})]})})}function pme({invoice:e,payments:t,onClose:r,onEdit:s,onSendPaymentRequest:a,onRecordPayment:i}){const{toast:o}=_t(),[l,c]=w.useState("details"),[d,f]=w.useState(!1),[u,h]=w.useState(!1),m=A=>{switch(A){case Ht.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Ht.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Ht.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ht.PAID:return"bg-green-50 text-green-700 border-green-200";case Ht.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Ht.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},v=A=>{switch(A){case"completed":return n.jsx(an,{className:"h-4 w-4 text-green-500"});case"pending":return n.jsx(ur,{className:"h-4 w-4 text-yellow-500"});case"processing":return n.jsx(ur,{className:"h-4 w-4 text-blue-500"});case"failed":return n.jsx(Do,{className:"h-4 w-4 text-red-500"});case"refunded":return n.jsx(Oh,{className:"h-4 w-4 text-purple-500"});default:return null}},g=A=>{switch(A){case"credit_card":return n.jsx(Hi,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return n.jsx($t,{className:"h-4 w-4 text-green-500"});case"cash":return n.jsx($t,{className:"h-4 w-4 text-green-500"});case"check":return n.jsx(va,{className:"h-4 w-4 text-blue-500"});case"financing":return n.jsx($t,{className:"h-4 w-4 text-purple-500"});default:return n.jsx($t,{className:"h-4 w-4 text-gray-500"})}},p=()=>{try{const A=new Ot;if(A.setFontSize(20),A.text("INVOICE",105,15,{align:"center"}),A.setFontSize(12),A.text(`Invoice #: ${e.number}`,20,30),A.text(`Date: ${ft(e.createdAt)}`,20,40),A.text(`Due Date: ${ft(e.dueDate)}`,20,50),A.text(`Status: ${e.status.toUpperCase()}`,20,60),A.setFontSize(14),A.text("Bill To:",20,75),A.setFontSize(12),A.text(`Customer ID: ${e.customerId}`,20,85),A.setFontSize(14),A.text("Invoice Items",20,105),A.autoTable({startY:110,head:[["Description","Quantity","Unit Price","Total"]],body:e.items.map(C=>[C.description,C.quantity,Ie(C.unitPrice),Ie(C.total)]),foot:[["","","Subtotal:",Ie(e.subtotal)],["","","Tax:",Ie(e.tax)],["","","Total:",Ie(e.total)]],theme:"striped",headStyles:{fillColor:[66,139,202]}}),e.notes){const C=A.lastAutoTable.finalY||110;A.setFontSize(14),A.text("Notes",20,C+20),A.setFontSize(12);const S=A.splitTextToSize(e.notes,170);A.text(S,20,C+30)}A.save(`invoice-${e.number}.pdf`),o({title:"PDF Generated",description:"Invoice PDF has been downloaded"})}catch(A){console.error("Error generating PDF:",A),o({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},x=async()=>{if(a){f(!0);try{await a(e.id),o({title:"Payment Request Sent",description:"Payment request has been sent to the customer"})}catch{o({title:"Error",description:"Failed to send payment request",variant:"destructive"})}finally{f(!1)}}},b=async A=>{if(i)try{await i(A),h(!1)}catch(C){throw C}},y=t.filter(A=>A.invoiceId===e.id),j=y.reduce((A,C)=>A+C.amount,0),E=e.total-j;return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[u&&n.jsx(mme,{invoiceId:e.id,invoiceTotal:e.total,remainingBalance:E,onSave:b,onCancel:()=>h(!1)}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"text-xl",children:["Invoice #",e.number]}),n.jsx(Be,{children:"Invoice details and payment information"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(J,{onClick:()=>s(e),size:"sm",children:[n.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Edit Invoice"]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})]})}),n.jsxs(fe,{children:[n.jsxs(Ar,{value:l,onValueChange:c,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"details",children:"Details"}),n.jsxs(Ze,{value:"payments",children:["Payments",y.length>0&&n.jsx(Fe,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:y.length})]}),n.jsx(Ze,{value:"history",children:"History"})]}),n.jsxs(tt,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Fe,{className:Ge("ri-badge-status",m(e.status)),children:e.status.toUpperCase()}),e.paidDate&&n.jsxs(Fe,{className:"bg-green-50 text-green-700 border-green-200",children:["PAID ON ",ft(e.paidDate)]}),e.status===Ht.OVERDUE&&n.jsx(Fe,{className:"bg-red-50 text-red-700 border-red-200",children:"OVERDUE"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:e.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Invoice Number"}),n.jsx("p",{className:"font-medium",children:e.number})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:ft(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),n.jsx("p",{className:"font-medium",children:ft(e.dueDate)})]}),e.paidDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),n.jsx("p",{className:"font-medium",children:ft(e.paidDate)})]}),e.paymentMethod&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),n.jsx("p",{className:"font-medium",children:e.paymentMethod})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),n.jsx("div",{className:"space-y-3",children:e.items.map((A,C)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:A.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",A.quantity," × ",Ie(A.unitPrice)]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg",children:Ie(A.total)})})]},A.id))})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Ie(e.subtotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:Ie(e.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Ie(e.total)})]}),y.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between text-green-600",children:[n.jsx("span",{children:"Paid:"}),n.jsx("span",{children:Ie(j)})]}),n.jsxs("div",{className:"flex justify-between font-bold",children:[n.jsx("span",{children:"Balance Due:"}),n.jsx("span",{children:Ie(E)})]})]})]})}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:e.notes})})]})]}),n.jsxs(tt,{value:"payments",className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Payment History"}),n.jsx("div",{className:"flex space-x-2",children:e.status!==Ht.PAID&&e.status!==Ht.CANCELLED&&n.jsxs(n.Fragment,{children:[n.jsxs(J,{onClick:x,disabled:d,size:"sm",variant:"outline",children:[n.jsx(hl,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Send Payment Request"]}),i&&E>0&&n.jsxs(J,{onClick:()=>h(!0),size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})})]}),y.length>0?n.jsxs("div",{className:"space-y-4",children:[y.map(A=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsxs("h4",{className:"font-medium",children:["Payment #",A.id.substring(0,8)]}),n.jsx(Fe,{className:A.status==="completed"?"bg-green-50 text-green-700 border-green-200":A.status==="pending"?"bg-yellow-50 text-yellow-700 border-yellow-200":A.status==="processing"?"bg-blue-50 text-blue-700 border-blue-200":A.status==="failed"?"bg-red-50 text-red-700 border-red-200":A.status==="refunded"?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200",children:n.jsxs("span",{className:"flex items-center",children:[v(A.status),n.jsx("span",{className:"ml-1",children:A.status.toUpperCase()})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Date:"}),n.jsx("span",{className:"ml-1",children:ft(A.processedDate)})]}),n.jsxs("div",{className:"flex items-center",children:[g(A.method),n.jsx("span",{className:"font-medium ml-1",children:"Method:"}),n.jsx("span",{className:"ml-1",children:A.method.replace("_"," ").replace(/\b\w/g,C=>C.toUpperCase())})]}),A.transactionId&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(va,{className:"h-3 w-3 mr-1 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Transaction ID:"}),n.jsx("span",{className:"ml-1 font-mono text-xs",children:A.transactionId})]})]}),A.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/20 p-2 rounded-md",children:A.notes})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg text-green-600",children:Ie(A.amount)})})]},A.id)),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Invoice Total:"}),n.jsx("span",{children:Ie(e.total)})]}),n.jsxs("div",{className:"flex justify-between text-green-700",children:[n.jsx("span",{className:"font-medium",children:"Total Paid:"}),n.jsx("span",{children:Ie(j)})]}),n.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[n.jsx("span",{className:E>0?"text-red-700":"text-green-700",children:"Balance Due:"}),n.jsx("span",{className:E>0?"text-red-700":"text-green-700",children:Ie(E)})]})]})})]}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Hi,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No payments recorded for this invoice"}),e.status!==Ht.PAID&&e.status!==Ht.CANCELLED&&i&&n.jsxs(J,{onClick:()=>h(!0),className:"mt-4",size:"sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]}),n.jsxs(ue,{className:"bg-blue-50 border-blue-200",children:[n.jsxs(be,{className:"pb-2",children:[n.jsx(je,{className:"text-lg text-blue-800",children:"Zego Payment Integration"}),n.jsx(Be,{className:"text-blue-700",children:"Secure payment processing for your customers"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-3 text-blue-700",children:[n.jsx("p",{className:"text-sm",children:"When you send a payment request, your customer will receive an email with a secure link to make their payment online."}),n.jsx("p",{className:"text-sm",children:"Payments are processed securely through Zego's payment gateway, supporting credit cards, ACH transfers, and more."}),n.jsx("p",{className:"text-sm font-medium",children:"Processing fee: 2.9% + $0.30 per transaction"})]})})]})]}),n.jsxs(tt,{value:"history",className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice History"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Created"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ft(e.createdAt)})]}),e.status!==Ht.DRAFT&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Sent"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ft(e.updatedAt)})]}),e.status===Ht.VIEWED&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-purple-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Viewed by Customer"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ft(e.updatedAt)})]}),e.status===Ht.PAID&&e.paidDate&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),n.jsx("div",{className:"font-medium",children:"Payment Received"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ft(e.paidDate)})]}),e.status===Ht.OVERDUE&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-red-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Overdue"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ft(e.dueDate)})]}),e.status===Ht.CANCELLED&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-gray-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Cancelled"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ft(e.updatedAt)})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(J,{variant:"outline",onClick:p,children:[n.jsx(uf,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),n.jsxs("div",{className:"flex space-x-2",children:[e.status===Ht.DRAFT&&n.jsxs(J,{children:[n.jsx(hl,{className:"h-4 w-4 mr-2"}),"Send Invoice"]}),e.status!==Ht.PAID&&e.status!==Ht.CANCELLED&&n.jsxs(n.Fragment,{children:[n.jsxs(J,{onClick:x,disabled:d,variant:"outline",children:[n.jsx(hl,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Request Payment"]}),i&&E>0&&n.jsxs(J,{onClick:()=>h(!0),children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})]})]})]})]})]})}function vme({payments:e,onViewPaymentDetails:t}){const{toast:r}=_t(),[s,a]=w.useState(""),[i,o]=w.useState("all"),[l,c]=w.useState("all"),[d,f]=w.useState("all"),u=C=>{switch(C){case"completed":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"processing":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"refunded":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},h=C=>{switch(C){case"completed":return n.jsx(an,{className:"h-4 w-4 text-green-500"});case"pending":return n.jsx(ur,{className:"h-4 w-4 text-yellow-500"});case"processing":return n.jsx(ur,{className:"h-4 w-4 text-blue-500"});case"failed":return n.jsx(Do,{className:"h-4 w-4 text-red-500"});case"refunded":return n.jsx(va,{className:"h-4 w-4 text-purple-500"});default:return null}},m=C=>{switch(C){case"credit_card":return"Credit Card";case"bank_transfer":return"Bank Transfer";case"cash":return"Cash";case"check":return"Check";case"financing":return"Financing";default:return C}},v=C=>{switch(C){case"credit_card":return n.jsx(Hi,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return n.jsx(va,{className:"h-4 w-4 text-green-500"});case"cash":return n.jsx(va,{className:"h-4 w-4 text-green-500"});case"check":return n.jsx(va,{className:"h-4 w-4 text-blue-500"});case"financing":return n.jsx(va,{className:"h-4 w-4 text-purple-500"});default:return n.jsx(va,{className:"h-4 w-4 text-gray-500"})}},g=e.filter(C=>{const S=C.invoiceId.toLowerCase().includes(s.toLowerCase())||C.id.toLowerCase().includes(s.toLowerCase())||C.transactionId&&C.transactionId.toLowerCase().includes(s.toLowerCase()),T=i==="all"||C.status===i,O=l==="all"||C.method===l;let _=!0;const N=new Date,D=C.processedDate;if(d==="today")_=D.toDateString()===N.toDateString();else if(d==="this_week"){const I=new Date(N);I.setDate(N.getDate()-N.getDay());const R=new Date(I);R.setDate(I.getDate()+6),_=D>=I&&D<=R}else d==="this_month"&&(_=D.getMonth()===N.getMonth()&&D.getFullYear()===N.getFullYear());return S&&T&&O&&_}),p=()=>{const S=[["ID","Invoice ID","Amount","Method","Status","Transaction ID","Date","Notes"].join(","),...g.map(N=>[N.id,N.invoiceId,N.amount.toFixed(2),N.method,N.status,N.transactionId||"",N.processedDate.toISOString().split("T")[0],N.notes||""].join(","))].join(`
`),T=new Blob([S],{type:"text/csv;charset=utf-8;"}),O=URL.createObjectURL(T),_=document.createElement("a");_.href=O,_.setAttribute("download","payment_history.csv"),document.body.appendChild(_),_.click(),document.body.removeChild(_),r({title:"Export Successful",description:"Payment history exported to CSV"})},x=e.length,b=e.reduce((C,S)=>C+S.amount,0),y=e.filter(C=>C.status==="completed").length,j=e.filter(C=>C.status==="pending"||C.status==="processing").length,E=e.filter(C=>C.status==="failed").length,A=e.reduce((C,S)=>{const T=S.method;return C[T]||(C[T]=0),S.status==="completed"&&(C[T]+=S.amount),C},{});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Payments"}),n.jsx(Hi,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:x}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[Ie(b)," processed"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Completed"}),n.jsx(an,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:y}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(y/x*100||0).toFixed(1),"% success rate"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(ur,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:j}),n.jsx("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:"Awaiting processing"})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-red-900",children:"Failed"}),n.jsx(Do,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:E}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[(E/x*100||0).toFixed(1),"% failure rate"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-lg",children:"Payment Methods"}),n.jsx(Be,{children:"Breakdown of payments by method"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[Object.entries(A).map(([C,S])=>n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v(C),n.jsx("span",{className:"font-medium",children:m(C)})]}),n.jsx("div",{className:"text-2xl font-bold text-primary",children:Ie(S)}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.filter(T=>T.method===C&&T.status==="completed").length," payments"]})]},C)),Object.keys(A).length===0&&n.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"No payment data available"})})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(hs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{placeholder:"Search payments...",value:s,onChange:C=>a(C.target.value),className:"pl-10"})]}),n.jsxs(We,{value:i,onValueChange:o,children:[n.jsx(Ue,{className:"w-[150px]",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:"completed",children:"Completed"}),n.jsx(K,{value:"pending",children:"Pending"}),n.jsx(K,{value:"processing",children:"Processing"}),n.jsx(K,{value:"failed",children:"Failed"}),n.jsx(K,{value:"refunded",children:"Refunded"})]})]}),n.jsxs(We,{value:l,onValueChange:c,children:[n.jsx(Ue,{className:"w-[150px]",children:n.jsx(qe,{placeholder:"Method"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Methods"}),n.jsx(K,{value:"credit_card",children:"Credit Card"}),n.jsx(K,{value:"bank_transfer",children:"Bank Transfer"}),n.jsx(K,{value:"cash",children:"Cash"}),n.jsx(K,{value:"check",children:"Check"}),n.jsx(K,{value:"financing",children:"Financing"})]})]}),n.jsxs(We,{value:d,onValueChange:f,children:[n.jsx(Ue,{className:"w-[150px]",children:n.jsx(qe,{placeholder:"Date"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Dates"}),n.jsx(K,{value:"today",children:"Today"}),n.jsx(K,{value:"this_week",children:"This Week"}),n.jsx(K,{value:"this_month",children:"This Month"})]})]}),n.jsxs(J,{variant:"outline",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Payment History"}),n.jsx(Be,{children:"Track and manage customer payments"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:p,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs(J,{variant:"outline",size:"sm",children:[n.jsx(uf,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),n.jsx(fe,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Invoice"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Amount"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Method"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Status"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Date"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Transaction ID"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Actions"})]})}),n.jsxs("tbody",{children:[g.map(C=>n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"font-medium",children:["#",C.invoiceId.substring(0,8)]})}),n.jsx("td",{className:"p-3 font-medium",children:Ie(C.amount)}),n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[v(C.method),n.jsx("span",{children:m(C.method)})]})}),n.jsx("td",{className:"p-3",children:n.jsxs(Fe,{className:Ge("flex items-center space-x-1",u(C.status)),children:[h(C.status),n.jsx("span",{children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]})}),n.jsx("td",{className:"p-3",children:ft(C.processedDate)}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:"font-mono text-xs",children:C.transactionId?C.transactionId:"-"})}),n.jsx("td",{className:"p-3",children:n.jsx("div",{className:"flex space-x-2",children:n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>t==null?void 0:t(C),children:"View"})})})]},C.id)),g.length===0&&n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:[n.jsx(Hi,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No payments found matching your filters"})]})})]})]})})})]})]})}function AD(){const{invoices:e,payments:t,createInvoice:r,updateInvoice:s,deleteInvoice:a,updateInvoiceStatus:i,sendInvoice:o,sendPaymentRequest:l,recordPayment:c}=jz(),{toast:d}=_t(),[f,u]=w.useState(""),[h,m]=w.useState("all"),[v,g]=w.useState("invoices"),[p,x]=w.useState(!1),[b,y]=w.useState(!1),[j,E]=w.useState(null),A=I=>{switch(I){case Ht.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Ht.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Ht.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ht.PAID:return"bg-green-50 text-green-700 border-green-200";case Ht.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Ht.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=e.filter(I=>I.number.toLowerCase().includes(f.toLowerCase())||I.customerId.toLowerCase().includes(f.toLowerCase())).filter(I=>h==="all"||I.status===h),S=()=>{E(null),x(!0)},T=I=>{E(I),x(!0),y(!1)},O=I=>{E(I),y(!0)},_=async I=>{try{j?(await s(j.id,I),d({title:"Success",description:"Invoice updated successfully"})):(await r(I),d({title:"Success",description:"Invoice created successfully"})),x(!1),E(null)}catch{d({title:"Error",description:`Failed to ${j?"update":"create"} invoice`,variant:"destructive"})}},N=async I=>{try{return await l(I),!0}catch(R){throw console.error("Error sending payment request:",R),R}},D=async I=>{try{return await c(I),d({title:"Success",description:"Payment recorded successfully"}),!0}catch(R){throw d({title:"Error",description:"Failed to record payment",variant:"destructive"}),R}};return n.jsxs("div",{className:"space-y-8",children:[p&&n.jsx(hme,{invoice:j||void 0,onSave:_,onCancel:()=>{x(!1),E(null)}}),b&&j&&n.jsx(pme,{invoice:j,payments:t.filter(I=>I.invoiceId===j.id),onClose:()=>y(!1),onEdit:T,onSendPaymentRequest:N,onRecordPayment:D}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Invoice & Payments"}),n.jsx("p",{className:"ri-page-description",children:"Manage invoices and process payments via Zego integration"})]}),n.jsxs(J,{className:"shadow-sm",onClick:S,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Invoice"]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Invoices"}),n.jsx(va,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"All invoices"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Outstanding"}),n.jsx(va,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Ie(e.filter(I=>I.status!==Ht.PAID).reduce((I,R)=>I+R.total,0))}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx($t,{className:"h-3 w-3 mr-1"}),"Unpaid invoices"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Paid This Month"}),n.jsx(va,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Ie(e.filter(I=>I.status===Ht.PAID).reduce((I,R)=>I+R.total,0))}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Revenue collected"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Payment Success Rate"}),n.jsx(Hi,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"98.5%"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(an,{className:"h-3 w-3 mr-1"}),t.filter(I=>I.status==="completed").length," successful payments"]})]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center space-x-2 text-blue-900",children:[n.jsx(Hi,{className:"h-5 w-5 text-blue-600"}),n.jsx("span",{children:"Zego Payment Integration"})]}),n.jsx(Be,{className:"text-blue-700",children:"Seamlessly process payments and send payment requests to customers"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"99.9%"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Uptime"})]}),n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"2.9%"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Processing Fee"})]}),n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"24/7"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Support"})]})]})})]}),n.jsxs(Ar,{value:v,onValueChange:g,className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-2",children:[n.jsxs(Ze,{value:"invoices",className:"flex items-center",children:[n.jsx(va,{className:"h-4 w-4 mr-2"}),"Invoices"]}),n.jsxs(Ze,{value:"payments",className:"flex items-center",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Payments"]})]}),n.jsxs(tt,{value:"invoices",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search invoices...",value:f,onChange:I=>u(I.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(We,{value:h,onValueChange:m,children:[n.jsx(Ue,{className:"w-40",children:n.jsx(qe,{placeholder:"Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Status"}),n.jsx(K,{value:Ht.DRAFT,children:"Draft"}),n.jsx(K,{value:Ht.SENT,children:"Sent"}),n.jsx(K,{value:Ht.VIEWED,children:"Viewed"}),n.jsx(K,{value:Ht.PAID,children:"Paid"}),n.jsx(K,{value:Ht.OVERDUE,children:"Overdue"}),n.jsx(K,{value:Ht.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Invoices"}),n.jsx(Be,{children:"Manage invoices and track payments"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[C.map(I=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:I.number}),n.jsx(Fe,{className:Ge("ri-badge-status",A(I.status)),children:I.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:I.customerId})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"}),n.jsx("span",{className:"ml-1 font-bold text-primary",children:Ie(I.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Due Date:"}),n.jsx("span",{className:"ml-1",children:ft(I.dueDate)})]}),I.paidDate&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Paid Date:"}),n.jsx("span",{className:"ml-1",children:ft(I.paidDate)})]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.items.length," item(s) - ",I.notes]}),I.paymentMethod&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",I.paymentMethod]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>O(I),children:[n.jsx(uc,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>T(I),children:"Edit"}),n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(Ka,{className:"h-3 w-3 mr-1"}),"PDF"]}),I.status!==Ht.PAID&&n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>N(I.id),children:[n.jsx(hl,{className:"h-3 w-3 mr-1"}),"Send Payment Request"]})]})]},I.id)),C.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(va,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No invoices found"}),n.jsx("p",{className:"text-sm",children:"Create your first invoice to get started"})]})]})})]})]}),n.jsx(tt,{value:"payments",children:n.jsx(vme,{payments:t,onViewPaymentDetails:I=>{const R=e.find(M=>M.id===I.invoiceId);R&&(E(R),y(!0),setTimeout(()=>{const M=document.querySelector('[role="tablist"]');if(M){const $=Array.from(M.children).find(B=>{var U;return(U=B.textContent)==null?void 0:U.includes("Payments")});$&&$.click()}},100))}})})]})]})}function gme(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(AD,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(AD,{})})]})}function xme({field:e,onSave:t,onCancel:r,modules:s}){var g;const{toast:a}=_t(),[i,o]=w.useState(!1),[l,c]=w.useState({name:"",type:Fi.TEXT,required:!1,options:[],module:"",section:""}),[d,f]=w.useState("");w.useEffect(()=>{e&&c({...e})},[e]);const u=async p=>{if(p.preventDefault(),!l.name||!l.module||!l.section){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if((l.type===Fi.SELECT||l.type===Fi.MULTISELECT)&&(!l.options||l.options.length===0)){a({title:"Validation Error",description:"Please add at least one option for select fields",variant:"destructive"});return}o(!0);try{await t(l),a({title:"Success",description:`Custom field ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} custom field`,variant:"destructive"})}finally{o(!1)}},h=()=>{var p;d.trim()&&!((p=l.options)!=null&&p.includes(d.trim()))&&(c(x=>({...x,options:[...x.options||[],d.trim()]})),f(""))},m=p=>{c(x=>{var b;return{...x,options:((b=x.options)==null?void 0:b.filter(y=>y!==p))||[]}})},v=p=>{switch(p){case"crm":return["Lead Information","Contact Details","Preferences","Notes"];case"inventory":return["Vehicle Details","Specifications","Pricing","Features"];case"quotes":return["Quote Details","Terms","Pricing"];case"agreements":return["Agreement Details","Terms","Conditions"];case"service":return["Service Details","Customer Requirements","Technical Notes"];case"delivery":return["Delivery Details","Customer Instructions","Logistics"];case"invoices":return["Invoice Details","Payment Terms","Additional Charges"];default:return["General","Details","Other"]}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:e?"Edit Custom Field":"Add Custom Field"}),n.jsx(Be,{children:e?"Update custom field details":"Create a new custom field"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Field Name *"}),n.jsx(Pe,{id:"name",value:l.name,onChange:p=>c(x=>({...x,name:p.target.value})),placeholder:"e.g., Customer Budget"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"module",children:"Module *"}),n.jsxs(We,{value:l.module,onValueChange:p=>{c(x=>({...x,module:p,section:""}))},children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"Select module"})}),n.jsx(Ve,{children:s.map(p=>n.jsx(K,{value:p,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"section",children:"Section *"}),n.jsxs(We,{value:l.section,onValueChange:p=>c(x=>({...x,section:p})),disabled:!l.module,children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:l.module?"Select section":"Select module first"})}),n.jsx(Ve,{children:l.module&&v(l.module).map(p=>n.jsx(K,{value:p,children:p},p))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"type",children:"Field Type *"}),n.jsxs(We,{value:l.type,onValueChange:p=>c(x=>({...x,type:p})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:Fi.TEXT,children:"Text"}),n.jsx(K,{value:Fi.NUMBER,children:"Number"}),n.jsx(K,{value:Fi.DATE,children:"Date"}),n.jsx(K,{value:Fi.BOOLEAN,children:"Boolean"}),n.jsx(K,{value:Fi.SELECT,children:"Select"}),n.jsx(K,{value:Fi.MULTISELECT,children:"Multi-select"})]})]})]}),(l.type===Fi.SELECT||l.type===Fi.MULTISELECT)&&n.jsxs("div",{children:[n.jsx(ae,{children:"Options"}),n.jsxs("div",{className:"flex space-x-2 mb-2",children:[n.jsx(Pe,{value:d,onChange:p=>f(p.target.value),placeholder:"Add an option",onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),h())}}),n.jsx(J,{type:"button",onClick:h,children:n.jsx(Et,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(g=l.options)==null?void 0:g.map((p,x)=>n.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[n.jsx("span",{className:"mr-2",children:p}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>m(p),children:n.jsx($n,{className:"h-3 w-3"})})]},x)),(!l.options||l.options.length===0)&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No options added yet"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"required",checked:l.required,onCheckedChange:p=>c(x=>({...x,required:!!p}))}),n.jsx(ae,{htmlFor:"required",children:"Required field"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Field"]})})]})]})})]})})}function yme(){const{tenant:e,updateTenantSettings:t}=Mm(),{toast:r}=_t(),[s,a]=w.useState(!1),[i,o]=w.useState((e==null?void 0:e.branding.primaryColor)||"#3b82f6"),[l,c]=w.useState((e==null?void 0:e.branding.secondaryColor)||"#64748b"),[d,f]=w.useState((e==null?void 0:e.branding.fontFamily)||"Inter"),[u,h]=w.useState((e==null?void 0:e.branding.logo)||""),[m,v]=w.useState((e==null?void 0:e.branding.logo)||""),g=w.useRef(null),p=[{value:"Inter",label:"Inter"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Montserrat",label:"Montserrat"},{value:"Lato",label:"Lato"},{value:"Poppins",label:"Poppins"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Oswald",label:"Oswald"}],x=y=>{var E;const j=(E=y.target.files)==null?void 0:E[0];if(j){const A=URL.createObjectURL(j);v(A),h(A)}},b=async()=>{a(!0);try{await t({branding:{primaryColor:i,secondaryColor:l,fontFamily:d,logo:u}}),r({title:"Branding Updated",description:"Your branding settings have been saved successfully."})}catch{r({title:"Error",description:"Failed to update branding settings.",variant:"destructive"})}finally{a(!1)}};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(QM,{className:"h-5 w-5 mr-2 text-primary"}),"Branding & Appearance"]}),n.jsx(Be,{children:"Customize your dealership's visual identity"})]}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx(ae,{children:"Company Logo"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:m?n.jsx("img",{src:m,alt:"Company Logo",className:"max-w-full max-h-full object-contain"}):n.jsx(Qh,{className:"h-12 w-12 text-muted-foreground"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{variant:"outline",onClick:()=>{var y;return(y=g.current)==null?void 0:y.click()},children:[n.jsx(L4,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),n.jsx(Pe,{type:"file",ref:g,className:"hidden",accept:"image/*",onChange:x}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Recommended size: 200x200px. Max file size: 2MB.",n.jsx("br",{}),"Supported formats: PNG, JPG, SVG"]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"primaryColor",children:"Primary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"primaryColor",value:i,onChange:y=>o(y.target.value),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:i,onChange:y=>o(y.target.value),className:"shadow-sm"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for buttons, links, and primary actions"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"secondaryColor",children:"Secondary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"secondaryColor",value:l,onChange:y=>c(y.target.value),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:l,onChange:y=>c(y.target.value),className:"shadow-sm"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for secondary elements and accents"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"fontFamily",children:"Font Family"}),n.jsxs(We,{value:d,onValueChange:f,children:[n.jsx(Ue,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select font family"})}),n.jsx(Ve,{children:p.map(y=>n.jsx(K,{value:y.value,children:y.label},y.value))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The primary font used throughout your application"})]}),n.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),n.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:d},children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Text Preview"}),n.jsx("p",{children:"This is how your text will appear with the selected font."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Color Preview"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:i},children:"Primary"}),n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:l},children:"Secondary"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Button Preview"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("button",{className:"px-4 py-2 rounded-md text-white",style:{backgroundColor:i},children:"Primary Button"}),n.jsx("button",{className:"px-4 py-2 rounded-md border",style:{borderColor:l,color:l},children:"Secondary Button"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:b,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Branding"]})})})]})]})}function bme(){var p,x;const{tenant:e,updateTenantSettings:t}=Mm(),{toast:r}=_t(),[s,a]=w.useState(!1),[i,o]=w.useState("general"),[l,c]=w.useState(((p=e==null?void 0:e.settings)==null?void 0:p.labelOverrides)||{}),[d,f]=w.useState(((x=e==null?void 0:e.settings)==null?void 0:x.platformType)||"both"),u={general:{vehicle:"Home/RV",customer:"Customer",deal:"Deal",quote:"Quote",service:"Service",inventory:"Inventory"},crm:{lead:"Lead",prospect:"Prospect",contact:"Contact",activity:"Activity",source:"Source"},inventory:{vin:"VIN",make:"Make",model:"Model",year:"Year",type:"Type",price:"Price",cost:"Cost",features:"Features"},sales:{salesperson:"Sales Rep",commission:"Commission",deal_stage:"Deal Stage",close_date:"Close Date",financing:"Financing"},service:{technician:"Technician",service_ticket:"Service Ticket",parts:"Parts",labor:"Labor",warranty:"Warranty"}},h=(b,y,j)=>{c({...l,[`${b}.${y}`]:j})},m=(b,y)=>l[`${b}.${y}`]||"",v=b=>{const y={...l};Object.keys(y).forEach(j=>{j.startsWith(`${b}.`)&&delete y[j]}),c(y),r({title:"Labels Reset",description:`Default labels restored for ${b} module.`})},g=async()=>{a(!0);try{await t({labelOverrides:l,platformType:d}),r({title:"Labels Updated",description:"Your label overrides have been saved successfully."})}catch{r({title:"Error",description:"Failed to update label overrides.",variant:"destructive"})}finally{a(!1)}};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(O4,{className:"h-5 w-5 mr-2 text-primary"}),"Label Overrides"]}),n.jsx(Be,{children:"Customize terminology throughout the platform"})]}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"platformType",children:"Platform Type"}),n.jsxs(We,{value:d,onValueChange:f,children:[n.jsx(Ue,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select platform type"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"rv",children:"RV Dealership"}),n.jsx(K,{value:"mh",children:"Manufactured Housing"}),n.jsx(K,{value:"both",children:"Both RV & Manufactured Housing"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This setting affects terminology and features throughout the platform"})]}),n.jsxs(Ar,{value:i,onValueChange:o,className:"space-y-4",children:[n.jsxs(jr,{className:"grid grid-cols-5",children:[n.jsx(Ze,{value:"general",children:"General"}),n.jsx(Ze,{value:"crm",children:"CRM"}),n.jsx(Ze,{value:"inventory",children:"Inventory"}),n.jsx(Ze,{value:"sales",children:"Sales"}),n.jsx(Ze,{value:"service",children:"Service"})]}),Object.entries(u).map(([b,y])=>n.jsxs(tt,{value:b,className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[b," Labels"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>v(b),children:[n.jsx(Jh,{className:"h-3 w-3 mr-2"}),"Reset to Defaults"]})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(y).map(([j,E])=>{let A=E;return j==="vehicle"&&(d==="rv"?A="RV":d==="mh"?A="Home":A="Home/RV"),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ae,{htmlFor:`${b}-${j}`,className:"capitalize",children:j.replace(/_/g," ")}),n.jsx("div",{className:"flex space-x-2",children:n.jsx(Pe,{id:`${b}-${j}`,value:m(b,j),onChange:C=>h(b,j,C.target.value),placeholder:A,className:"shadow-sm"})}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default: ",n.jsx("span",{className:"font-medium",children:A})]})]},j)})})]},b))]}),n.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm",children:"Here's how your customized labels will appear in the application:"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(u.general).map(([b,y])=>{const j=m("general",b);let A=j||y;return b==="vehicle"&&!j&&(d==="rv"?A="RV":d==="mh"?A="Home":A="Home/RV"),n.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[n.jsxs("span",{className:"font-medium capitalize",children:[b.replace(/_/g," "),":"]})," ",n.jsx("span",{children:A})]},b)})})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:g,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Labels"]})})})]})]})}function jme(){var le,re;const{tenant:e,updateTenantSettings:t}=Mm(),{toast:r}=_t(),[s,a]=w.useState(!1),[i,o]=w.useState("email"),[l,c]=w.useState(((le=e==null?void 0:e.settings)==null?void 0:le.emailTemplates)||[]),[d,f]=w.useState(null),[u,h]=w.useState(""),[m,v]=w.useState(""),[g,p]=w.useState(""),[x,b]=w.useState("welcome"),[y,j]=w.useState(((re=e==null?void 0:e.settings)==null?void 0:re.smsTemplates)||[]),[E,A]=w.useState(null),[C,S]=w.useState(""),[T,O]=w.useState(""),[_,N]=w.useState("welcome"),[D,I]=w.useState(!1),[R,M]=w.useState("email"),[$,B]=w.useState(null),U=[{value:"welcome",label:"Welcome Email"},{value:"quote",label:"Quote Email"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"invoice",label:"Invoice Email"},{value:"password_reset",label:"Password Reset"},{value:"custom",label:"Custom Email"}],q=[{value:"welcome",label:"Welcome SMS"},{value:"quote",label:"Quote SMS"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"appointment",label:"Appointment Reminder"},{value:"custom",label:"Custom SMS"}],W=["{{first_name}}","{{last_name}}","{{company_name}}","{{quote_number}}","{{invoice_number}}","{{service_ticket}}","{{delivery_date}}","{{appointment_date}}","{{appointment_time}}","{{login_url}}","{{reset_url}}"],L=()=>{f(null),h(""),v(""),p(""),b("welcome")},V=()=>{A(null),S(""),O(""),N("welcome")},G=Se=>{f(Se),h(Se.name),v(Se.subject),p(Se.body),b(Se.type)},Z=Se=>{A(Se),S(Se.name),O(Se.message),N(Se.type)},ee=()=>{if(!u||!m||!g){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Se=/\{\{([^}]+)\}\}/g,Ne=[];let ye;for(;(ye=Se.exec(m+g))!==null;)Ne.includes(ye[1])||Ne.push(ye[1]);c(d?l.map($e=>$e.id===d.id?{...$e,name:u,subject:m,body:g,type:x,variables:Ne}:$e):[...l,{id:Math.random().toString(36).substring(2,9),name:u,subject:m,body:g,type:x,variables:Ne,isActive:!0}]),L()},he=()=>{if(!C||!T){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Se=/\{\{([^}]+)\}\}/g,Ne=[];let ye;for(;(ye=Se.exec(T))!==null;)Ne.includes(ye[1])||Ne.push(ye[1]);j(E?y.map($e=>$e.id===E.id?{...$e,name:C,message:T,type:_,variables:Ne}:$e):[...y,{id:Math.random().toString(36).substring(2,9),name:C,message:T,type:_,variables:Ne,isActive:!0}]),V()},me=Se=>{c(l.filter(Ne=>Ne.id!==Se))},oe=Se=>{j(y.filter(Ne=>Ne.id!==Se))},we=Se=>{c(l.map(Ne=>Ne.id===Se?{...Ne,isActive:!Ne.isActive}:Ne))},ve=Se=>{j(y.map(Ne=>Ne.id===Se?{...Ne,isActive:!Ne.isActive}:Ne))},pe=(Se,Ne)=>{M(Se),B(Ne),I(!0)},De=Se=>{i==="email"?p(g+Se):O(T+Se)},xe=async()=>{a(!0);try{await t({emailTemplates:l,smsTemplates:y}),r({title:"Templates Updated",description:"Your notification templates have been saved successfully."})}catch{r({title:"Error",description:"Failed to update notification templates.",variant:"destructive"})}finally{a(!1)}};return n.jsxs(n.Fragment,{children:[D&&$&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:"Template Preview"}),n.jsx(Be,{children:$.name})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>I(!1),children:n.jsx(X,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{className:"space-y-4",children:[R==="email"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{children:"Subject"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:$.subject})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Body"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1 whitespace-pre-wrap",children:$.body})]})]}),R==="sms"&&n.jsxs("div",{children:[n.jsx(ae,{children:"Message"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:$.message})]}),n.jsxs("div",{children:[n.jsx(ae,{children:"Variables"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[$.variables.map((Se,Ne)=>n.jsx(Fe,{variant:"secondary",children:`{{${Se}}}`},Ne)),$.variables.length===0&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No variables used"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:()=>I(!1),children:"Close Preview"})})]})]})}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(on,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Templates"]}),n.jsx(Be,{children:"Customize email and SMS notification templates"})]}),n.jsxs(fe,{className:"space-y-6",children:[n.jsxs(Ar,{value:i,onValueChange:o,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-2",children:[n.jsx(Ze,{value:"email",children:"Email Templates"}),n.jsx(Ze,{value:"sms",children:"SMS Templates"})]}),n.jsx(tt,{value:"email",className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Email Templates"}),n.jsxs(J,{variant:"outline",size:"sm",onClick:L,disabled:!d,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailName",children:"Template Name *"}),n.jsx(Pe,{id:"emailName",value:u,onChange:Se=>h(Se.target.value),placeholder:"e.g., Welcome Email",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailType",children:"Template Type"}),n.jsxs(We,{value:x,onValueChange:b,children:[n.jsx(Ue,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select template type"})}),n.jsx(Ve,{children:U.map(Se=>n.jsx(K,{value:Se.value,children:Se.label},Se.value))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailSubject",children:"Subject Line *"}),n.jsx(Pe,{id:"emailSubject",value:m,onChange:Se=>v(Se.target.value),placeholder:"e.g., Welcome to {{company_name}}!",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ae,{htmlFor:"emailBody",children:"Email Body *"}),n.jsxs(We,{value:"",onValueChange:Se=>De(Se),children:[n.jsx(Ue,{className:"w-[200px] shadow-sm",children:n.jsx(qe,{placeholder:"Insert variable"})}),n.jsx(Ve,{children:W.map(Se=>n.jsx(K,{value:Se,children:Se},Se))})]})]}),n.jsx(ir,{id:"emailBody",value:g,onChange:Se=>p(Se.target.value),placeholder:"Enter your email content here...",className:"shadow-sm",rows:10})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:L,children:"Cancel"}),n.jsx(J,{type:"button",onClick:ee,children:d?"Update Template":"Add Template"})]})]})}),n.jsxs("div",{className:"space-y-3 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),l.length>0?l.map(Se=>{var Ne;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium",children:Se.name}),n.jsx(Fe,{variant:"outline",children:((Ne=U.find(ye=>ye.value===Se.type))==null?void 0:Ne.label)||Se.type}),!Se.isActive&&n.jsx(Fe,{variant:"secondary",children:"Inactive"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Subject: ",Se.subject]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>we(Se.id),children:Se.isActive?"Disable":"Enable"}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>pe("email",Se),children:n.jsx(uc,{className:"h-4 w-4"})}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>G(Se),children:"Edit"}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>me(Se.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]})]},Se.id)}):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(on,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No email templates created yet"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})}),n.jsx(tt,{value:"sms",className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"SMS Templates"}),n.jsxs(J,{variant:"outline",size:"sm",onClick:V,disabled:!E,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),n.jsx(ue,{className:"border-dashed",children:n.jsxs(fe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsName",children:"Template Name *"}),n.jsx(Pe,{id:"smsName",value:C,onChange:Se=>S(Se.target.value),placeholder:"e.g., Appointment Reminder",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsType",children:"Template Type"}),n.jsxs(We,{value:_,onValueChange:N,children:[n.jsx(Ue,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select template type"})}),n.jsx(Ve,{children:q.map(Se=>n.jsx(K,{value:Se.value,children:Se.label},Se.value))})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ae,{htmlFor:"smsMessage",children:"Message *"}),n.jsxs(We,{value:"",onValueChange:Se=>De(Se),children:[n.jsx(Ue,{className:"w-[200px] shadow-sm",children:n.jsx(qe,{placeholder:"Insert variable"})}),n.jsx(Ve,{children:W.map(Se=>n.jsx(K,{value:Se,children:Se},Se))})]})]}),n.jsx(ir,{id:"smsMessage",value:T,onChange:Se=>O(Se.target.value),placeholder:"Enter your SMS message here...",className:"shadow-sm",rows:4}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[n.jsxs("span",{children:[T.length," characters"]}),n.jsxs("span",{children:[160-T.length," remaining"]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(J,{type:"button",variant:"outline",onClick:V,children:"Cancel"}),n.jsx(J,{type:"button",onClick:he,children:E?"Update Template":"Add Template"})]})]})}),n.jsxs("div",{className:"space-y-3 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),y.length>0?y.map(Se=>{var Ne;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium",children:Se.name}),n.jsx(Fe,{variant:"outline",children:((Ne=q.find(ye=>ye.value===Se.type))==null?void 0:Ne.label)||Se.type}),!Se.isActive&&n.jsx(Fe,{variant:"secondary",children:"Inactive"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:Se.message})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ve(Se.id),children:Se.isActive?"Disable":"Enable"}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>pe("sms",Se),children:n.jsx(uc,{className:"h-4 w-4"})}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>Z(Se),children:"Edit"}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>oe(Se.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]})]},Se.id)}):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Pn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No SMS templates created yet"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:xe,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Templates"]})})})]})]})]})}function wme(){var he,me,oe,we,ve,pe,De,xe,le,re,Se;const{tenant:e,updateTenantSettings:t}=Mm(),{toast:r}=_t(),[s,a]=w.useState(!1),[i,o]=w.useState(((he=e==null?void 0:e.settings)==null?void 0:he.emailProvider)||"default"),[l,c]=w.useState(((me=e==null?void 0:e.settings)==null?void 0:me.emailApiKey)||""),[d,f]=w.useState(((oe=e==null?void 0:e.settings)==null?void 0:oe.emailFromAddress)||""),[u,h]=w.useState(((we=e==null?void 0:e.settings)==null?void 0:we.emailFromName)||""),[m,v]=w.useState(((ve=e==null?void 0:e.settings)==null?void 0:ve.smsProvider)||"default"),[g,p]=w.useState(((pe=e==null?void 0:e.settings)==null?void 0:pe.smsApiKey)||""),[x,b]=w.useState(((De=e==null?void 0:e.settings)==null?void 0:De.smsFromNumber)||""),[y,j]=w.useState(((xe=e==null?void 0:e.settings)==null?void 0:xe.webhooks)||[]),[E,A]=w.useState(""),[C,S]=w.useState(""),[T,O]=w.useState(((le=e==null?void 0:e.settings)==null?void 0:le.apiEnabled)||!1),[_,N]=w.useState(((re=e==null?void 0:e.settings)==null?void 0:re.apiKey)||""),[D,I]=w.useState(((Se=e==null?void 0:e.settings)==null?void 0:Se.allowedOrigins)||[]),[R,M]=w.useState(""),$=[{value:"default",label:"Default (Platform)"},{value:"sendgrid",label:"SendGrid"},{value:"mailchimp",label:"Mailchimp"},{value:"mailgun",label:"Mailgun"},{value:"smtp",label:"Custom SMTP"}],B=[{value:"default",label:"Default (Platform)"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}],U=[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"quote.created",label:"Quote Created"},{value:"quote.accepted",label:"Quote Accepted"},{value:"service.created",label:"Service Ticket Created"},{value:"service.completed",label:"Service Completed"},{value:"vehicle.created",label:"Home/RV Created"},{value:"vehicle.sold",label:"Home/RV Sold"}],q=()=>{!E||!C||(j([...y,{id:Math.random().toString(36).substring(2,9),event:E,url:C,active:!0}]),A(""),S(""))},W=Ne=>{j(y.filter(ye=>ye.id!==Ne))},L=Ne=>{j(y.map(ye=>ye.id===Ne?{...ye,active:!ye.active}:ye))},V=()=>{R&&(I([...D,R]),M(""))},G=Ne=>{I(D.filter(ye=>ye!==Ne))},Z=()=>{const Ne=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(ye=>ye.toString(16).padStart(2,"0")).join("");N(Ne)},ee=async()=>{a(!0);try{await t({emailProvider:i,emailApiKey:l,emailFromAddress:d,emailFromName:u,smsProvider:m,smsApiKey:g,smsFromNumber:x,webhooks:y,apiEnabled:T,apiKey:_,allowedOrigins:D}),r({title:"Integrations Updated",description:"Your integration settings have been saved successfully."})}catch{r({title:"Error",description:"Failed to update integration settings.",variant:"destructive"})}finally{a(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(on,{className:"h-5 w-5 mr-2 text-primary"}),"Email Provider"]}),n.jsx(Be,{children:"Configure your email delivery service"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailProvider",children:"Provider"}),n.jsxs(We,{value:i,onValueChange:o,children:[n.jsx(Ue,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select email provider"})}),n.jsx(Ve,{children:$.map(Ne=>n.jsx(K,{value:Ne.value,children:Ne.label},Ne.value))})]})]}),i!=="default"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailApiKey",children:"API Key"}),n.jsx(Pe,{id:"emailApiKey",type:"password",value:l,onChange:Ne=>c(Ne.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailFromAddress",children:"From Email Address"}),n.jsx(Pe,{id:"emailFromAddress",type:"email",value:d,onChange:Ne=>f(Ne.target.value),className:"shadow-sm",placeholder:"noreply@yourdomain.com"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"emailFromName",children:"From Name"}),n.jsx(Pe,{id:"emailFromName",value:u,onChange:Ne=>h(Ne.target.value),className:"shadow-sm",placeholder:"Your Company Name"})]})]})]}),i==="default"&&n.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:n.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform email provider. No additional configuration needed."})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Pn,{className:"h-5 w-5 mr-2 text-primary"}),"SMS Provider"]}),n.jsx(Be,{children:"Configure your SMS delivery service"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsProvider",children:"Provider"}),n.jsxs(We,{value:m,onValueChange:v,children:[n.jsx(Ue,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select SMS provider"})}),n.jsx(Ve,{children:B.map(Ne=>n.jsx(K,{value:Ne.value,children:Ne.label},Ne.value))})]})]}),m!=="default"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsApiKey",children:"API Key"}),n.jsx(Pe,{id:"smsApiKey",type:"password",value:g,onChange:Ne=>p(Ne.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"smsFromNumber",children:"From Number"}),n.jsx(Pe,{id:"smsFromNumber",value:x,onChange:Ne=>b(Ne.target.value),className:"shadow-sm",placeholder:"+1234567890"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +1234567890)"})]})]}),m==="default"&&n.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:n.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform SMS provider. No additional configuration needed."})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(Y_,{className:"h-5 w-5 mr-2 text-primary"}),"Webhooks"]}),n.jsx(Be,{children:"Configure webhooks to receive event notifications"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"webhookEvent",children:"Event"}),n.jsxs(We,{value:E,onValueChange:A,children:[n.jsx(Ue,{className:"shadow-sm",children:n.jsx(qe,{placeholder:"Select event"})}),n.jsx(Ve,{children:U.map(Ne=>n.jsx(K,{value:Ne.value,children:Ne.label},Ne.value))})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"webhookUrl",children:"Webhook URL"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{id:"webhookUrl",value:C,onChange:Ne=>S(Ne.target.value),className:"shadow-sm flex-1",placeholder:"https://your-endpoint.com/webhook"}),n.jsx(J,{type:"button",onClick:q,children:n.jsx(Et,{className:"h-4 w-4"})})]})]})]}),n.jsx("div",{className:"space-y-3 mt-4",children:y.length>0?y.map(Ne=>{var ye;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Xt,{checked:Ne.active,onCheckedChange:()=>L(Ne.id)}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:((ye=U.find($e=>$e.value===Ne.event))==null?void 0:ye.label)||Ne.event}),n.jsx("div",{className:"text-sm text-muted-foreground",children:Ne.url})]})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:()=>W(Ne.id),children:n.jsx($n,{className:"h-4 w-4 text-red-500"})})]},Ne.id)}):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Y_,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No webhooks configured"}),n.jsx("p",{className:"text-sm",children:"Add webhooks to receive event notifications"})]})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(yx,{className:"h-5 w-5 mr-2 text-primary"}),"API Access"]}),n.jsx(Be,{children:"Configure API access for external integrations"})]}),n.jsxs(fe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"apiEnabled",checked:T,onCheckedChange:Ne=>O(!!Ne)}),n.jsx(ae,{htmlFor:"apiEnabled",children:"Enable API access"})]}),T&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"apiKey",children:"API Key"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{id:"apiKey",type:"password",value:_,onChange:Ne=>N(Ne.target.value),className:"shadow-sm flex-1",placeholder:"API key will appear here",readOnly:!0}),n.jsx(J,{type:"button",onClick:Z,children:"Generate"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keep this key secure. It provides full access to your account."})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"allowedOrigins",children:"Allowed Origins (CORS)"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Pe,{id:"allowedOrigins",value:R,onChange:Ne=>M(Ne.target.value),className:"shadow-sm flex-1",placeholder:"https://your-domain.com"}),n.jsx(J,{type:"button",onClick:V,children:n.jsx(Et,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Domains that are allowed to make API requests"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[D.map((Ne,ye)=>n.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[n.jsx("span",{className:"mr-2",children:Ne}),n.jsx(J,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>G(Ne),children:n.jsx($n,{className:"h-3 w-3"})})]},ye)),D.length===0&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No origins added yet"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:ee,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Integrations"]})})})]})}function ED(){const{tenant:e,customFields:t,updateTenantSettings:r,addCustomField:s,updateCustomField:a,deleteCustomField:i}=Mm(),{toast:o}=_t(),[l,c]=w.useState("general"),[d,f]=w.useState(!1),u=[{id:"general",name:"General",icon:xg},{id:"branding",name:"Branding",icon:QM},{id:"labels",name:"Labels",icon:O4},{id:"notifications",name:"Notifications",icon:on},{id:"integrations",name:"Integrations",icon:yx},{id:"users",name:"Users",icon:Yn},{id:"custom-fields",name:"Custom Fields",icon:bg}],h=["crm","inventory","quotes","agreements","service","delivery","invoices"],m=()=>{setSelectedCustomField(null),f(!0)},v=S=>{setSelectedCustomField(S),f(!0)},g=async S=>{if(window.confirm("Are you sure you want to delete this custom field?"))try{await i(S),o({title:"Success",description:"Custom field deleted successfully"})}catch{o({title:"Error",description:"Failed to delete custom field",variant:"destructive"})}},p=async S=>{try{return selectedCustomField?await a(selectedCustomField.id,S):await s(S),f(!1),!0}catch{return!1}},x=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Company Information"}),n.jsx(Be,{children:"Basic information about your dealership"})]}),n.jsx(fe,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Company Name"}),n.jsx(Pe,{defaultValue:e==null?void 0:e.name,className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Domain"}),n.jsx(Pe,{defaultValue:e==null?void 0:e.domain,className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Timezone"}),n.jsx(Pe,{defaultValue:e==null?void 0:e.settings.timezone,className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Currency"}),n.jsx(Pe,{defaultValue:e==null?void 0:e.settings.currency,className:"mt-1 shadow-sm"})]})]})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Business Hours"}),n.jsx(Be,{children:"Set your dealership operating hours"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:(e==null?void 0:e.settings.businessHours)&&Object.entries(e.settings.businessHours).map(([S,T])=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[n.jsx("div",{className:"w-24 capitalize font-medium",children:S}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Pe,{type:"time",defaultValue:T.open,disabled:T.closed,className:"w-32 shadow-sm"}),n.jsx("span",{className:"text-muted-foreground",children:"to"}),n.jsx(Pe,{type:"time",defaultValue:T.close,disabled:T.closed,className:"w-32 shadow-sm"}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",defaultChecked:T.closed,className:"rounded"}),n.jsx("span",{className:"text-sm",children:"Closed"})]})]})]},S))})})]})]}),b=()=>n.jsx(yme,{}),y=()=>n.jsx(bme,{}),j=()=>n.jsx(jme,{}),E=()=>n.jsx(wme,{}),A=()=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"User Management"}),n.jsx(Be,{children:"Manage user accounts and permissions"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage users, roles, and permissions for your dealership"}),n.jsxs(J,{className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:"Admin User"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"admin@renterinsight.com"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Fe,{className:"bg-blue-50 text-blue-700 border-blue-200",children:"Admin"}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",children:n.jsx(Yr,{className:"h-3 w-3"})})]})]})})]})]}),C=()=>n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{className:"text-xl",children:"Custom Fields"}),n.jsx(Be,{children:"Add custom fields to capture additional information"})]}),n.jsxs(J,{className:"shadow-sm",onClick:m,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Custom Field"]})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[t.map(S=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:S.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[S.module," - ",S.section," - ",S.type,S.required&&n.jsx(Fe,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",variant:"secondary",children:"Required"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>v(S),children:"Edit"}),n.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>g(S.id),children:"Delete"})]})]},S.id)),t.length===0&&n.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/30 rounded-lg",children:"No custom fields configured yet"})]})})]});return n.jsxs("div",{className:"space-y-8",children:[d&&n.jsx(xme,{field:selectedCustomField||void 0,onSave:p,onCancel:()=>f(!1),modules:h}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Company Settings"}),n.jsx("p",{className:"ri-page-description",children:"Configure your dealership settings and preferences"})]}),n.jsxs(J,{onClick:Nme,className:"shadow-sm",children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})}),n.jsx("div",{className:"border-b",children:n.jsx("nav",{className:"-mb-px flex flex-wrap space-x-4 md:space-x-8",children:u.map(S=>n.jsxs("button",{onClick:()=>c(S.id),className:Ge("flex items-center space-x-2 py-3 px-1 border-b-2 font-medium text-sm transition-colors",l===S.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"),children:[n.jsx(S.icon,{className:"h-4 w-4"}),n.jsx("span",{children:S.name})]},S.id))})}),n.jsxs("div",{children:[l==="general"&&x(),l==="branding"&&b(),l==="labels"&&y(),l==="notifications"&&j(),l==="integrations"&&E(),l==="users"&&A(),l==="custom-fields"&&C()]})]})}const Nme=async()=>{console.log("Saving settings...")};function Sme(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(ED,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(ED,{})})]})}function wz(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=wz(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function xr(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=wz(e))&&(s&&(s+=" "),s+=t);return s}var Cme=Array.isArray,Qa=Cme,Ame=typeof rs=="object"&&rs&&rs.Object===Object&&rs,Nz=Ame,Eme=Nz,Pme=typeof self=="object"&&self&&self.Object===Object&&self,Tme=Eme||Pme||Function("return this")(),Pl=Tme,_me=Pl,Ime=_me.Symbol,$x=Ime,PD=$x,Sz=Object.prototype,kme=Sz.hasOwnProperty,Dme=Sz.toString,lv=PD?PD.toStringTag:void 0;function Ome(e){var t=kme.call(e,lv),r=e[lv];try{e[lv]=void 0;var s=!0}catch{}var a=Dme.call(e);return s&&(t?e[lv]=r:delete e[lv]),a}var Lme=Ome,Rme=Object.prototype,$me=Rme.toString;function Fme(e){return $me.call(e)}var Mme=Fme,TD=$x,Bme=Lme,zme=Mme,Ume="[object Null]",Vme="[object Undefined]",_D=TD?TD.toStringTag:void 0;function Wme(e){return e==null?e===void 0?Vme:Ume:_D&&_D in Object(e)?Bme(e):zme(e)}var bc=Wme;function qme(e){return e!=null&&typeof e=="object"}var jc=qme,Hme=bc,Gme=jc,Kme="[object Symbol]";function Yme(e){return typeof e=="symbol"||Gme(e)&&Hme(e)==Kme}var Km=Yme,Xme=Qa,Qme=Km,Jme=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zme=/^\w*$/;function epe(e,t){if(Xme(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Qme(e)?!0:Zme.test(e)||!Jme.test(e)||t!=null&&e in Object(t)}var RP=epe;function tpe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Wd=tpe;const Ym=kr(Wd);var rpe=bc,npe=Wd,spe="[object AsyncFunction]",ape="[object Function]",ipe="[object GeneratorFunction]",ope="[object Proxy]";function lpe(e){if(!npe(e))return!1;var t=rpe(e);return t==ape||t==ipe||t==spe||t==ope}var $P=lpe;const sr=kr($P);var cpe=Pl,dpe=cpe["__core-js_shared__"],upe=dpe,vS=upe,ID=function(){var e=/[^.]+$/.exec(vS&&vS.keys&&vS.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function fpe(e){return!!ID&&ID in e}var hpe=fpe,mpe=Function.prototype,ppe=mpe.toString;function vpe(e){if(e!=null){try{return ppe.call(e)}catch{}try{return e+""}catch{}}return""}var Cz=vpe,gpe=$P,xpe=hpe,ype=Wd,bpe=Cz,jpe=/[\\^$.*+?()[\]{}|]/g,wpe=/^\[object .+?Constructor\]$/,Npe=Function.prototype,Spe=Object.prototype,Cpe=Npe.toString,Ape=Spe.hasOwnProperty,Epe=RegExp("^"+Cpe.call(Ape).replace(jpe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ppe(e){if(!ype(e)||xpe(e))return!1;var t=gpe(e)?Epe:wpe;return t.test(bpe(e))}var Tpe=Ppe;function _pe(e,t){return e==null?void 0:e[t]}var Ipe=_pe,kpe=Tpe,Dpe=Ipe;function Ope(e,t){var r=Dpe(e,t);return kpe(r)?r:void 0}var yf=Ope,Lpe=yf,Rpe=Lpe(Object,"create"),fw=Rpe,kD=fw;function $pe(){this.__data__=kD?kD(null):{},this.size=0}var Fpe=$pe;function Mpe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Bpe=Mpe,zpe=fw,Upe="__lodash_hash_undefined__",Vpe=Object.prototype,Wpe=Vpe.hasOwnProperty;function qpe(e){var t=this.__data__;if(zpe){var r=t[e];return r===Upe?void 0:r}return Wpe.call(t,e)?t[e]:void 0}var Hpe=qpe,Gpe=fw,Kpe=Object.prototype,Ype=Kpe.hasOwnProperty;function Xpe(e){var t=this.__data__;return Gpe?t[e]!==void 0:Ype.call(t,e)}var Qpe=Xpe,Jpe=fw,Zpe="__lodash_hash_undefined__";function eve(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Jpe&&t===void 0?Zpe:t,this}var tve=eve,rve=Fpe,nve=Bpe,sve=Hpe,ave=Qpe,ive=tve;function Xm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Xm.prototype.clear=rve;Xm.prototype.delete=nve;Xm.prototype.get=sve;Xm.prototype.has=ave;Xm.prototype.set=ive;var ove=Xm;function lve(){this.__data__=[],this.size=0}var cve=lve;function dve(e,t){return e===t||e!==e&&t!==t}var FP=dve,uve=FP;function fve(e,t){for(var r=e.length;r--;)if(uve(e[r][0],t))return r;return-1}var hw=fve,hve=hw,mve=Array.prototype,pve=mve.splice;function vve(e){var t=this.__data__,r=hve(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():pve.call(t,r,1),--this.size,!0}var gve=vve,xve=hw;function yve(e){var t=this.__data__,r=xve(t,e);return r<0?void 0:t[r][1]}var bve=yve,jve=hw;function wve(e){return jve(this.__data__,e)>-1}var Nve=wve,Sve=hw;function Cve(e,t){var r=this.__data__,s=Sve(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var Ave=Cve,Eve=cve,Pve=gve,Tve=bve,_ve=Nve,Ive=Ave;function Qm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Qm.prototype.clear=Eve;Qm.prototype.delete=Pve;Qm.prototype.get=Tve;Qm.prototype.has=_ve;Qm.prototype.set=Ive;var mw=Qm,kve=yf,Dve=Pl,Ove=kve(Dve,"Map"),MP=Ove,DD=ove,Lve=mw,Rve=MP;function $ve(){this.size=0,this.__data__={hash:new DD,map:new(Rve||Lve),string:new DD}}var Fve=$ve;function Mve(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Bve=Mve,zve=Bve;function Uve(e,t){var r=e.__data__;return zve(t)?r[typeof t=="string"?"string":"hash"]:r.map}var pw=Uve,Vve=pw;function Wve(e){var t=Vve(this,e).delete(e);return this.size-=t?1:0,t}var qve=Wve,Hve=pw;function Gve(e){return Hve(this,e).get(e)}var Kve=Gve,Yve=pw;function Xve(e){return Yve(this,e).has(e)}var Qve=Xve,Jve=pw;function Zve(e,t){var r=Jve(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var ege=Zve,tge=Fve,rge=qve,nge=Kve,sge=Qve,age=ege;function Jm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Jm.prototype.clear=tge;Jm.prototype.delete=rge;Jm.prototype.get=nge;Jm.prototype.has=sge;Jm.prototype.set=age;var BP=Jm,Az=BP,ige="Expected a function";function zP(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ige);var r=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,s);return r.cache=i.set(a,o)||i,o};return r.cache=new(zP.Cache||Az),r}zP.Cache=Az;var Ez=zP;const oge=kr(Ez);var lge=Ez,cge=500;function dge(e){var t=lge(e,function(s){return r.size===cge&&r.clear(),s}),r=t.cache;return t}var uge=dge,fge=uge,hge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mge=/\\(\\)?/g,pge=fge(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(hge,function(r,s,a,i){t.push(a?i.replace(mge,"$1"):s||r)}),t}),vge=pge;function gge(e,t){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=t(e[r],r,e);return a}var UP=gge,OD=$x,xge=UP,yge=Qa,bge=Km,jge=1/0,LD=OD?OD.prototype:void 0,RD=LD?LD.toString:void 0;function Pz(e){if(typeof e=="string")return e;if(yge(e))return xge(e,Pz)+"";if(bge(e))return RD?RD.call(e):"";var t=e+"";return t=="0"&&1/e==-jge?"-0":t}var wge=Pz,Nge=wge;function Sge(e){return e==null?"":Nge(e)}var Tz=Sge,Cge=Qa,Age=RP,Ege=vge,Pge=Tz;function Tge(e,t){return Cge(e)?e:Age(e,t)?[e]:Ege(Pge(e))}var _z=Tge,_ge=Km,Ige=1/0;function kge(e){if(typeof e=="string"||_ge(e))return e;var t=e+"";return t=="0"&&1/e==-Ige?"-0":t}var vw=kge,Dge=_z,Oge=vw;function Lge(e,t){t=Dge(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[Oge(t[r++])];return r&&r==s?e:void 0}var VP=Lge,Rge=VP;function $ge(e,t,r){var s=e==null?void 0:Rge(e,t);return s===void 0?r:s}var Iz=$ge;const Ki=kr(Iz);function Fge(e){return e==null}var Mge=Fge;const or=kr(Mge);var Bge=bc,zge=Qa,Uge=jc,Vge="[object String]";function Wge(e){return typeof e=="string"||!zge(e)&&Uge(e)&&Bge(e)==Vge}var qge=Wge;const rf=kr(qge);var kz={exports:{}},Mr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WP=Symbol.for("react.element"),qP=Symbol.for("react.portal"),gw=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),yw=Symbol.for("react.profiler"),bw=Symbol.for("react.provider"),jw=Symbol.for("react.context"),Hge=Symbol.for("react.server_context"),ww=Symbol.for("react.forward_ref"),Nw=Symbol.for("react.suspense"),Sw=Symbol.for("react.suspense_list"),Cw=Symbol.for("react.memo"),Aw=Symbol.for("react.lazy"),Gge=Symbol.for("react.offscreen"),Dz;Dz=Symbol.for("react.module.reference");function no(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case WP:switch(e=e.type,e){case gw:case yw:case xw:case Nw:case Sw:return e;default:switch(e=e&&e.$$typeof,e){case Hge:case jw:case ww:case Aw:case Cw:case bw:return e;default:return t}}case qP:return t}}}Mr.ContextConsumer=jw;Mr.ContextProvider=bw;Mr.Element=WP;Mr.ForwardRef=ww;Mr.Fragment=gw;Mr.Lazy=Aw;Mr.Memo=Cw;Mr.Portal=qP;Mr.Profiler=yw;Mr.StrictMode=xw;Mr.Suspense=Nw;Mr.SuspenseList=Sw;Mr.isAsyncMode=function(){return!1};Mr.isConcurrentMode=function(){return!1};Mr.isContextConsumer=function(e){return no(e)===jw};Mr.isContextProvider=function(e){return no(e)===bw};Mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===WP};Mr.isForwardRef=function(e){return no(e)===ww};Mr.isFragment=function(e){return no(e)===gw};Mr.isLazy=function(e){return no(e)===Aw};Mr.isMemo=function(e){return no(e)===Cw};Mr.isPortal=function(e){return no(e)===qP};Mr.isProfiler=function(e){return no(e)===yw};Mr.isStrictMode=function(e){return no(e)===xw};Mr.isSuspense=function(e){return no(e)===Nw};Mr.isSuspenseList=function(e){return no(e)===Sw};Mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===gw||e===yw||e===xw||e===Nw||e===Sw||e===Gge||typeof e=="object"&&e!==null&&(e.$$typeof===Aw||e.$$typeof===Cw||e.$$typeof===bw||e.$$typeof===jw||e.$$typeof===ww||e.$$typeof===Dz||e.getModuleId!==void 0)};Mr.typeOf=no;kz.exports=Mr;var Kge=kz.exports,Yge=bc,Xge=jc,Qge="[object Number]";function Jge(e){return typeof e=="number"||Xge(e)&&Yge(e)==Qge}var Oz=Jge;const Zge=kr(Oz);var exe=Oz;function txe(e){return exe(e)&&e!=+e}var rxe=txe;const Zm=kr(rxe);var _o=function(t){return t===0?0:t>0?1:-1},ku=function(t){return rf(t)&&t.indexOf("%")===t.length-1},lt=function(t){return Zge(t)&&!Zm(t)},nxe=function(t){return or(t)},fs=function(t){return lt(t)||rf(t)},sxe=0,ep=function(t){var r=++sxe;return"".concat(t||"").concat(r)},nf=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(t)&&!rf(t))return s;var i;if(ku(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Zm(i)&&(i=s),a&&i>r&&(i=r),i},td=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},axe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,s={},a=0;a<r;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},$s=function(t,r){return lt(t)&&lt(r)?function(s){return t+s*(r-t)}:function(){return r}};function a1(e,t,r){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):Ki(s,t))===r})}var ixe=function(t,r){return lt(t)&&lt(r)?t-r:rf(t)&&rf(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Fh(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function GC(e){"@babel/helpers - typeof";return GC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GC(e)}var oxe=["viewBox","children"],lxe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$D=["points","pathLength"],gS={svg:oxe,polygon:$D,polyline:$D},HP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],i1=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(w.isValidElement(t)&&(s=t.props),!Ym(s))return null;var a={};return Object.keys(s).forEach(function(i){HP.includes(i)&&(a[i]=r||function(o){return s[i](s,o)})}),a},cxe=function(t,r,s){return function(a){return t(r,s,a),null}},o1=function(t,r,s){if(!Ym(t)||GC(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];HP.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=cxe(o,r,s))}),a},dxe=["children"],uxe=["children"];function FD(e,t){if(e==null)return{};var r=fxe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function fxe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function KC(e){"@babel/helpers - typeof";return KC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KC(e)}var MD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},rc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},BD=null,xS=null,GP=function e(t){if(t===BD&&Array.isArray(xS))return xS;var r=[];return w.Children.forEach(t,function(s){or(s)||(Kge.isFragment(s)?r=r.concat(e(s.props.children)):r.push(s))}),xS=r,BD=t,r};function Yi(e,t){var r=[],s=[];return Array.isArray(t)?s=t.map(function(a){return rc(a)}):s=[rc(t)],GP(e).forEach(function(a){var i=Ki(a,"type.displayName")||Ki(a,"type.name");s.indexOf(i)!==-1&&r.push(a)}),r}function li(e,t){var r=Yi(e,t);return r&&r[0]}var zD=function(t){if(!t||!t.props)return!1;var r=t.props,s=r.width,a=r.height;return!(!lt(s)||s<=0||!lt(a)||a<=0)},hxe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],mxe=function(t){return t&&t.type&&rf(t.type)&&hxe.indexOf(t.type)>=0},Lz=function(t){return t&&KC(t)==="object"&&"clipDot"in t},pxe=function(t,r,s,a){var i,o=(i=gS==null?void 0:gS[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!sr(t)&&(a&&o.includes(r)||lxe.includes(r))||s&&HP.includes(r)},ar=function(t,r,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(w.isValidElement(t)&&(a=t.props),!Ym(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;pxe((l=a)===null||l===void 0?void 0:l[o],o,r,s)&&(i[o]=a[o])}),i},YC=function e(t,r){if(t===r)return!0;var s=w.Children.count(t);if(s!==w.Children.count(r))return!1;if(s===0)return!0;if(s===1)return UD(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<s;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!UD(i,o))return!1}return!0},UD=function(t,r){if(or(t)&&or(r))return!0;if(!or(t)&&!or(r)){var s=t.props||{},a=s.children,i=FD(s,dxe),o=r.props||{},l=o.children,c=FD(o,uxe);return a&&l?Fh(i,c)&&YC(a,l):!a&&!l?Fh(i,c):!1}return!1},VD=function(t,r){var s=[],a={};return GP(t).forEach(function(i,o){if(mxe(i))s.push(i);else if(i){var l=rc(i.type),c=r[l]||{},d=c.handler,f=c.once;if(d&&(!f||!a[l])){var u=d(i,l,o);s.push(u),a[l]=!0}}}),s},vxe=function(t){var r=t&&t.type;return r&&MD[r]?MD[r]:null},gxe=function(t,r){return GP(r).indexOf(t)},xxe=["children","width","height","viewBox","className","style","title","desc"];function XC(){return XC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},XC.apply(this,arguments)}function yxe(e,t){if(e==null)return{};var r=bxe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function bxe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function QC(e){var t=e.children,r=e.width,s=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=yxe(e,xxe),f=a||{width:r,height:s,x:0,y:0},u=xr("recharts-surface",i);return ce.createElement("svg",XC({},ar(d,!0,"svg"),{className:u,width:r,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ce.createElement("title",null,l),ce.createElement("desc",null,c),t)}var jxe=["children","className"];function JC(){return JC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},JC.apply(this,arguments)}function wxe(e,t){if(e==null)return{};var r=Nxe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Nxe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var sn=ce.forwardRef(function(e,t){var r=e.children,s=e.className,a=wxe(e,jxe),i=xr("recharts-layer",s);return ce.createElement("g",JC({className:i},ar(a,!0),{ref:t}),r)}),nc=function(t,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function Sxe(e,t,r){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var Cxe=Sxe,Axe=Cxe;function Exe(e,t,r){var s=e.length;return r=r===void 0?s:r,!t&&r>=s?e:Axe(e,t,r)}var Pxe=Exe,Txe="\\ud800-\\udfff",_xe="\\u0300-\\u036f",Ixe="\\ufe20-\\ufe2f",kxe="\\u20d0-\\u20ff",Dxe=_xe+Ixe+kxe,Oxe="\\ufe0e\\ufe0f",Lxe="\\u200d",Rxe=RegExp("["+Lxe+Txe+Dxe+Oxe+"]");function $xe(e){return Rxe.test(e)}var Rz=$xe;function Fxe(e){return e.split("")}var Mxe=Fxe,$z="\\ud800-\\udfff",Bxe="\\u0300-\\u036f",zxe="\\ufe20-\\ufe2f",Uxe="\\u20d0-\\u20ff",Vxe=Bxe+zxe+Uxe,Wxe="\\ufe0e\\ufe0f",qxe="["+$z+"]",ZC="["+Vxe+"]",eA="\\ud83c[\\udffb-\\udfff]",Hxe="(?:"+ZC+"|"+eA+")",Fz="[^"+$z+"]",Mz="(?:\\ud83c[\\udde6-\\uddff]){2}",Bz="[\\ud800-\\udbff][\\udc00-\\udfff]",Gxe="\\u200d",zz=Hxe+"?",Uz="["+Wxe+"]?",Kxe="(?:"+Gxe+"(?:"+[Fz,Mz,Bz].join("|")+")"+Uz+zz+")*",Yxe=Uz+zz+Kxe,Xxe="(?:"+[Fz+ZC+"?",ZC,Mz,Bz,qxe].join("|")+")",Qxe=RegExp(eA+"(?="+eA+")|"+Xxe+Yxe,"g");function Jxe(e){return e.match(Qxe)||[]}var Zxe=Jxe,e0e=Mxe,t0e=Rz,r0e=Zxe;function n0e(e){return t0e(e)?r0e(e):e0e(e)}var s0e=n0e,a0e=Pxe,i0e=Rz,o0e=s0e,l0e=Tz;function c0e(e){return function(t){t=l0e(t);var r=i0e(t)?o0e(t):void 0,s=r?r[0]:t.charAt(0),a=r?a0e(r,1).join(""):t.slice(1);return s[e]()+a}}var d0e=c0e,u0e=d0e,f0e=u0e("toUpperCase"),h0e=f0e;const Ew=kr(h0e);function tn(e){return function(){return e}}const Vz=Math.cos,l1=Math.sin,Vo=Math.sqrt,c1=Math.PI,Pw=2*c1,tA=Math.PI,rA=2*tA,vu=1e-6,m0e=rA-vu;function Wz(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function p0e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Wz;const r=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class v0e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Wz:p0e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,s,a){this._append`Q${+t},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,r,s,a,i,o){this._append`C${+t},${+r},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,s,a,i){if(t=+t,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=a-r,f=o-t,u=l-r,h=f*f+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>vu)if(!(Math.abs(u*c-d*f)>vu)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=s-o,v=a-l,g=c*c+d*d,p=m*m+v*v,x=Math.sqrt(g),b=Math.sqrt(h),y=i*Math.tan((tA-Math.acos((g+h-p)/(2*x*b)))/2),j=y/b,E=y/x;Math.abs(j-1)>vu&&this._append`L${t+j*f},${r+j*u}`,this._append`A${i},${i},0,0,${+(u*m>f*v)},${this._x1=t+E*c},${this._y1=r+E*d}`}}arc(t,r,s,a,i,o){if(t=+t,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),c=s*Math.sin(a),d=t+l,f=r+c,u=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>vu||Math.abs(this._y1-f)>vu)&&this._append`L${d},${f}`,s&&(h<0&&(h=h%rA+rA),h>m0e?this._append`A${s},${s},0,1,${u},${t-l},${r-c}A${s},${s},0,1,${u},${this._x1=d},${this._y1=f}`:h>vu&&this._append`A${s},${s},0,${+(h>=tA)},${u},${this._x1=t+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(t,r,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function KP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);t=s}return e},()=>new v0e(t)}function YP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qz(e){this._context=e}qz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Tw(e){return new qz(e)}function Hz(e){return e[0]}function Gz(e){return e[1]}function Kz(e,t){var r=tn(!0),s=null,a=Tw,i=null,o=KP(l);e=typeof e=="function"?e:e===void 0?Hz:tn(e),t=typeof t=="function"?t:t===void 0?Gz:tn(t);function l(c){var d,f=(c=YP(c)).length,u,h=!1,m;for(s==null&&(i=a(m=o())),d=0;d<=f;++d)!(d<f&&r(u=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(u,d,c),+t(u,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:tn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:tn(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:tn(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),l):s},l}function wy(e,t,r){var s=null,a=tn(!0),i=null,o=Tw,l=null,c=KP(d);e=typeof e=="function"?e:e===void 0?Hz:tn(+e),t=typeof t=="function"?t:tn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Gz:tn(+r);function d(u){var h,m,v,g=(u=YP(u)).length,p,x=!1,b,y=new Array(g),j=new Array(g);for(i==null&&(l=o(b=c())),h=0;h<=g;++h){if(!(h<g&&a(p=u[h],h,u))===x)if(x=!x)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=h-1;v>=m;--v)l.point(y[v],j[v]);l.lineEnd(),l.areaEnd()}x&&(y[h]=+e(p,h,u),j[h]=+t(p,h,u),l.point(s?+s(p,h,u):y[h],r?+r(p,h,u):j[h]))}if(b)return l=null,b+""||null}function f(){return Kz().defined(a).curve(o).context(i)}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:tn(+u),s=null,d):e},d.x0=function(u){return arguments.length?(e=typeof u=="function"?u:tn(+u),d):e},d.x1=function(u){return arguments.length?(s=u==null?null:typeof u=="function"?u:tn(+u),d):s},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:tn(+u),r=null,d):t},d.y0=function(u){return arguments.length?(t=typeof u=="function"?u:tn(+u),d):t},d.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:tn(+u),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(s).y(t)},d.defined=function(u){return arguments.length?(a=typeof u=="function"?u:tn(!!u),d):a},d.curve=function(u){return arguments.length?(o=u,i!=null&&(l=o(i)),d):o},d.context=function(u){return arguments.length?(u==null?i=l=null:l=o(i=u),d):i},d}class Yz{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function g0e(e){return new Yz(e,!0)}function x0e(e){return new Yz(e,!1)}const XP={draw(e,t){const r=Vo(t/c1);e.moveTo(r,0),e.arc(0,0,r,0,Pw)}},y0e={draw(e,t){const r=Vo(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Xz=Vo(1/3),b0e=Xz*2,j0e={draw(e,t){const r=Vo(t/b0e),s=r*Xz;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},w0e={draw(e,t){const r=Vo(t),s=-r/2;e.rect(s,s,r,r)}},N0e=.8908130915292852,Qz=l1(c1/10)/l1(7*c1/10),S0e=l1(Pw/10)*Qz,C0e=-Vz(Pw/10)*Qz,A0e={draw(e,t){const r=Vo(t*N0e),s=S0e*r,a=C0e*r;e.moveTo(0,-r),e.lineTo(s,a);for(let i=1;i<5;++i){const o=Pw*i/5,l=Vz(o),c=l1(o);e.lineTo(c*r,-l*r),e.lineTo(l*s-c*a,c*s+l*a)}e.closePath()}},yS=Vo(3),E0e={draw(e,t){const r=-Vo(t/(yS*3));e.moveTo(0,r*2),e.lineTo(-yS*r,-r),e.lineTo(yS*r,-r),e.closePath()}},Li=-.5,Ri=Vo(3)/2,nA=1/Vo(12),P0e=(nA/2+1)*3,T0e={draw(e,t){const r=Vo(t/P0e),s=r/2,a=r*nA,i=s,o=r*nA+r,l=-i,c=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Li*s-Ri*a,Ri*s+Li*a),e.lineTo(Li*i-Ri*o,Ri*i+Li*o),e.lineTo(Li*l-Ri*c,Ri*l+Li*c),e.lineTo(Li*s+Ri*a,Li*a-Ri*s),e.lineTo(Li*i+Ri*o,Li*o-Ri*i),e.lineTo(Li*l+Ri*c,Li*c-Ri*l),e.closePath()}};function _0e(e,t){let r=null,s=KP(a);e=typeof e=="function"?e:tn(e||XP),t=typeof t=="function"?t:tn(t===void 0?64:+t);function a(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:tn(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:tn(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function d1(){}function u1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Jz(e){this._context=e}Jz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:u1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:u1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I0e(e){return new Jz(e)}function Zz(e){this._context=e}Zz.prototype={areaStart:d1,areaEnd:d1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:u1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function k0e(e){return new Zz(e)}function eU(e){this._context=e}eU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:u1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function D0e(e){return new eU(e)}function tU(e){this._context=e}tU.prototype={areaStart:d1,areaEnd:d1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function O0e(e){return new tU(e)}function WD(e){return e<0?-1:1}function qD(e,t,r){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(r-e._y1)/(a||s<0&&-0),l=(i*a+o*s)/(s+a);return(WD(i)+WD(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function HD(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function bS(e,t,r){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,a+l*t,i-l,o-l*r,i,o)}function f1(e){this._context=e}f1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bS(this,this._t0,HD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bS(this,HD(this,r=qD(this,e,t)),r);break;default:bS(this,this._t0,r=qD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function rU(e){this._context=new nU(e)}(rU.prototype=Object.create(f1.prototype)).point=function(e,t){f1.prototype.point.call(this,t,e)};function nU(e){this._context=e}nU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,a,i){this._context.bezierCurveTo(t,e,s,r,i,a)}};function L0e(e){return new f1(e)}function R0e(e){return new rU(e)}function sU(e){this._context=e}sU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var s=GD(e),a=GD(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function GD(e){var t,r=e.length-1,s,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=a[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function $0e(e){return new sU(e)}function _w(e,t){this._context=e,this._t=t}_w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function F0e(e){return new _w(e,.5)}function M0e(e){return new _w(e,0)}function B0e(e){return new _w(e,1)}function im(e,t){if((o=e.length)>1)for(var r=1,s,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function sA(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function z0e(e,t){return e[t]}function U0e(e){const t=[];return t.key=e,t}function V0e(){var e=tn([]),t=sA,r=im,s=z0e;function a(i){var o=Array.from(e.apply(this,arguments),U0e),l,c=o.length,d=-1,f;for(const u of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(u,o[l].key,d,i)]).data=u;for(l=0,f=YP(t(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:tn(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:tn(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?sA:typeof i=="function"?i:tn(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??im,a):r},a}function W0e(e,t){if((s=e.length)>0){for(var r,s,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<s;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<s;++r)e[r][a][1]/=o}im(e,t)}}function q0e(e,t){if((a=e.length)>0){for(var r=0,s=e[t[0]],a,i=s.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;s[r][1]+=s[r][0]=-l/2}im(e,t)}}function H0e(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,s=1,a,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var f=e[t[l]],u=f[s][1]||0,h=f[s-1][1]||0,m=(u-h)/2,v=0;v<l;++v){var g=e[t[v]],p=g[s][1]||0,x=g[s-1][1]||0;m+=p-x}c+=u,d+=m*u}a[s-1][1]+=a[s-1][0]=r,c&&(r-=d/c)}a[s-1][1]+=a[s-1][0]=r,im(e,t)}}function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}var G0e=["type","size","sizeType"];function aA(){return aA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},aA.apply(this,arguments)}function KD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function YD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KD(Object(r),!0).forEach(function(s){K0e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function K0e(e,t,r){return t=Y0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y0e(e){var t=X0e(e,"string");return Ig(t)=="symbol"?t:t+""}function X0e(e,t){if(Ig(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Ig(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q0e(e,t){if(e==null)return{};var r=J0e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function J0e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var aU={symbolCircle:XP,symbolCross:y0e,symbolDiamond:j0e,symbolSquare:w0e,symbolStar:A0e,symbolTriangle:E0e,symbolWye:T0e},Z0e=Math.PI/180,eye=function(t){var r="symbol".concat(Ew(t));return aU[r]||XP},tye=function(t,r,s){if(r==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Z0e;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},rye=function(t,r){aU["symbol".concat(Ew(t))]=r},QP=function(t){var r=t.type,s=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Q0e(t,G0e),d=YD(YD({},c),{},{type:s,size:i,sizeType:l}),f=function(){var p=eye(s),x=_0e().type(p).size(tye(i,l,s));return x()},u=d.className,h=d.cx,m=d.cy,v=ar(d,!0);return h===+h&&m===+m&&i===+i?ce.createElement("path",aA({},v,{className:xr("recharts-symbols",u),transform:"translate(".concat(h,", ").concat(m,")"),d:f()})):null};QP.registerSymbol=rye;function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function iA(){return iA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},iA.apply(this,arguments)}function XD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function nye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XD(Object(r),!0).forEach(function(s){kg(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function sye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QD(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,oU(s.key),s)}}function aye(e,t,r){return t&&QD(e.prototype,t),r&&QD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iye(e,t,r){return t=h1(t),oye(e,iU()?Reflect.construct(t,r||[],h1(e).constructor):t.apply(e,r))}function oye(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lye(e)}function lye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iU=function(){return!!e})()}function h1(e){return h1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h1(e)}function cye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oA(e,t)}function oA(e,t){return oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},oA(e,t)}function kg(e,t,r){return t=oU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oU(e){var t=dye(e,"string");return om(t)=="symbol"?t:t+""}function dye(e,t){if(om(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(om(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $i=32,JP=function(e){function t(){return sye(this,t),iye(this,t,arguments)}return cye(t,e),aye(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=$i/2,o=$i/6,l=$i/3,c=s.inactive?a:s.color;if(s.type==="plainline")return ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:$i,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat($i,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat($i/8,"h").concat($i,"v").concat($i*3/4,"h").concat(-$i,"z"),className:"recharts-legend-icon"});if(ce.isValidElement(s.legendIcon)){var d=nye({},s);return delete d.legendIcon,ce.cloneElement(s.legendIcon,d)}return ce.createElement(QP,{fill:c,cx:i,cy:i,size:$i,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,f={x:0,y:0,width:$i,height:$i},u={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,v){var g=m.formatter||c,p=xr(kg(kg({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=sr(m.value)?null:m.value;nc(!sr(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?d:m.color;return ce.createElement("li",iA({className:p,style:u,key:"legend-item-".concat(v)},o1(s.props,m,v)),ce.createElement(QC,{width:o,height:o,viewBox:f,style:h},s.renderIcon(m)),ce.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(x,m,v):x))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,o=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ce.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(w.PureComponent);kg(JP,"displayName","Legend");kg(JP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var uye=mw;function fye(){this.__data__=new uye,this.size=0}var hye=fye;function mye(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var pye=mye;function vye(e){return this.__data__.get(e)}var gye=vye;function xye(e){return this.__data__.has(e)}var yye=xye,bye=mw,jye=MP,wye=BP,Nye=200;function Sye(e,t){var r=this.__data__;if(r instanceof bye){var s=r.__data__;if(!jye||s.length<Nye-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new wye(s)}return r.set(e,t),this.size=r.size,this}var Cye=Sye,Aye=mw,Eye=hye,Pye=pye,Tye=gye,_ye=yye,Iye=Cye;function tp(e){var t=this.__data__=new Aye(e);this.size=t.size}tp.prototype.clear=Eye;tp.prototype.delete=Pye;tp.prototype.get=Tye;tp.prototype.has=_ye;tp.prototype.set=Iye;var lU=tp,kye="__lodash_hash_undefined__";function Dye(e){return this.__data__.set(e,kye),this}var Oye=Dye;function Lye(e){return this.__data__.has(e)}var Rye=Lye,$ye=BP,Fye=Oye,Mye=Rye;function m1(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new $ye;++t<r;)this.add(e[t])}m1.prototype.add=m1.prototype.push=Fye;m1.prototype.has=Mye;var cU=m1;function Bye(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}var dU=Bye;function zye(e,t){return e.has(t)}var uU=zye,Uye=cU,Vye=dU,Wye=uU,qye=1,Hye=2;function Gye(e,t,r,s,a,i){var o=r&qye,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var u=-1,h=!0,m=r&Hye?new Uye:void 0;for(i.set(e,t),i.set(t,e);++u<l;){var v=e[u],g=t[u];if(s)var p=o?s(g,v,u,t,e,i):s(v,g,u,e,t,i);if(p!==void 0){if(p)continue;h=!1;break}if(m){if(!Vye(t,function(x,b){if(!Wye(m,b)&&(v===x||a(v,x,r,s,i)))return m.push(b)})){h=!1;break}}else if(!(v===g||a(v,g,r,s,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var fU=Gye,Kye=Pl,Yye=Kye.Uint8Array,Xye=Yye;function Qye(e){var t=-1,r=Array(e.size);return e.forEach(function(s,a){r[++t]=[a,s]}),r}var Jye=Qye;function Zye(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var ZP=Zye,JD=$x,ZD=Xye,ebe=FP,tbe=fU,rbe=Jye,nbe=ZP,sbe=1,abe=2,ibe="[object Boolean]",obe="[object Date]",lbe="[object Error]",cbe="[object Map]",dbe="[object Number]",ube="[object RegExp]",fbe="[object Set]",hbe="[object String]",mbe="[object Symbol]",pbe="[object ArrayBuffer]",vbe="[object DataView]",eO=JD?JD.prototype:void 0,jS=eO?eO.valueOf:void 0;function gbe(e,t,r,s,a,i,o){switch(r){case vbe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pbe:return!(e.byteLength!=t.byteLength||!i(new ZD(e),new ZD(t)));case ibe:case obe:case dbe:return ebe(+e,+t);case lbe:return e.name==t.name&&e.message==t.message;case ube:case hbe:return e==t+"";case cbe:var l=rbe;case fbe:var c=s&sbe;if(l||(l=nbe),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=abe,o.set(e,t);var f=tbe(l(e),l(t),s,a,i,o);return o.delete(e),f;case mbe:if(jS)return jS.call(e)==jS.call(t)}return!1}var xbe=gbe;function ybe(e,t){for(var r=-1,s=t.length,a=e.length;++r<s;)e[a+r]=t[r];return e}var hU=ybe,bbe=hU,jbe=Qa;function wbe(e,t,r){var s=t(e);return jbe(e)?s:bbe(s,r(e))}var Nbe=wbe;function Sbe(e,t){for(var r=-1,s=e==null?0:e.length,a=0,i=[];++r<s;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var Cbe=Sbe;function Abe(){return[]}var Ebe=Abe,Pbe=Cbe,Tbe=Ebe,_be=Object.prototype,Ibe=_be.propertyIsEnumerable,tO=Object.getOwnPropertySymbols,kbe=tO?function(e){return e==null?[]:(e=Object(e),Pbe(tO(e),function(t){return Ibe.call(e,t)}))}:Tbe,Dbe=kbe;function Obe(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var Lbe=Obe,Rbe=bc,$be=jc,Fbe="[object Arguments]";function Mbe(e){return $be(e)&&Rbe(e)==Fbe}var Bbe=Mbe,rO=Bbe,zbe=jc,mU=Object.prototype,Ube=mU.hasOwnProperty,Vbe=mU.propertyIsEnumerable,Wbe=rO(function(){return arguments}())?rO:function(e){return zbe(e)&&Ube.call(e,"callee")&&!Vbe.call(e,"callee")},eT=Wbe,p1={exports:{}};function qbe(){return!1}var Hbe=qbe;p1.exports;(function(e,t){var r=Pl,s=Hbe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(p1,p1.exports);var pU=p1.exports,Gbe=9007199254740991,Kbe=/^(?:0|[1-9]\d*)$/;function Ybe(e,t){var r=typeof e;return t=t??Gbe,!!t&&(r=="number"||r!="symbol"&&Kbe.test(e))&&e>-1&&e%1==0&&e<t}var tT=Ybe,Xbe=9007199254740991;function Qbe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xbe}var rT=Qbe,Jbe=bc,Zbe=rT,e1e=jc,t1e="[object Arguments]",r1e="[object Array]",n1e="[object Boolean]",s1e="[object Date]",a1e="[object Error]",i1e="[object Function]",o1e="[object Map]",l1e="[object Number]",c1e="[object Object]",d1e="[object RegExp]",u1e="[object Set]",f1e="[object String]",h1e="[object WeakMap]",m1e="[object ArrayBuffer]",p1e="[object DataView]",v1e="[object Float32Array]",g1e="[object Float64Array]",x1e="[object Int8Array]",y1e="[object Int16Array]",b1e="[object Int32Array]",j1e="[object Uint8Array]",w1e="[object Uint8ClampedArray]",N1e="[object Uint16Array]",S1e="[object Uint32Array]",un={};un[v1e]=un[g1e]=un[x1e]=un[y1e]=un[b1e]=un[j1e]=un[w1e]=un[N1e]=un[S1e]=!0;un[t1e]=un[r1e]=un[m1e]=un[n1e]=un[p1e]=un[s1e]=un[a1e]=un[i1e]=un[o1e]=un[l1e]=un[c1e]=un[d1e]=un[u1e]=un[f1e]=un[h1e]=!1;function C1e(e){return e1e(e)&&Zbe(e.length)&&!!un[Jbe(e)]}var A1e=C1e;function E1e(e){return function(t){return e(t)}}var vU=E1e,v1={exports:{}};v1.exports;(function(e,t){var r=Nz,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(v1,v1.exports);var P1e=v1.exports,T1e=A1e,_1e=vU,nO=P1e,sO=nO&&nO.isTypedArray,I1e=sO?_1e(sO):T1e,gU=I1e,k1e=Lbe,D1e=eT,O1e=Qa,L1e=pU,R1e=tT,$1e=gU,F1e=Object.prototype,M1e=F1e.hasOwnProperty;function B1e(e,t){var r=O1e(e),s=!r&&D1e(e),a=!r&&!s&&L1e(e),i=!r&&!s&&!a&&$1e(e),o=r||s||a||i,l=o?k1e(e.length,String):[],c=l.length;for(var d in e)(t||M1e.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||R1e(d,c)))&&l.push(d);return l}var z1e=B1e,U1e=Object.prototype;function V1e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||U1e;return e===r}var W1e=V1e;function q1e(e,t){return function(r){return e(t(r))}}var xU=q1e,H1e=xU,G1e=H1e(Object.keys,Object),K1e=G1e,Y1e=W1e,X1e=K1e,Q1e=Object.prototype,J1e=Q1e.hasOwnProperty;function Z1e(e){if(!Y1e(e))return X1e(e);var t=[];for(var r in Object(e))J1e.call(e,r)&&r!="constructor"&&t.push(r);return t}var eje=Z1e,tje=$P,rje=rT;function nje(e){return e!=null&&rje(e.length)&&!tje(e)}var Fx=nje,sje=z1e,aje=eje,ije=Fx;function oje(e){return ije(e)?sje(e):aje(e)}var Iw=oje,lje=Nbe,cje=Dbe,dje=Iw;function uje(e){return lje(e,dje,cje)}var fje=uje,aO=fje,hje=1,mje=Object.prototype,pje=mje.hasOwnProperty;function vje(e,t,r,s,a,i){var o=r&hje,l=aO(e),c=l.length,d=aO(t),f=d.length;if(c!=f&&!o)return!1;for(var u=c;u--;){var h=l[u];if(!(o?h in t:pje.call(t,h)))return!1}var m=i.get(e),v=i.get(t);if(m&&v)return m==t&&v==e;var g=!0;i.set(e,t),i.set(t,e);for(var p=o;++u<c;){h=l[u];var x=e[h],b=t[h];if(s)var y=o?s(b,x,h,t,e,i):s(x,b,h,e,t,i);if(!(y===void 0?x===b||a(x,b,r,s,i):y)){g=!1;break}p||(p=h=="constructor")}if(g&&!p){var j=e.constructor,E=t.constructor;j!=E&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof E=="function"&&E instanceof E)&&(g=!1)}return i.delete(e),i.delete(t),g}var gje=vje,xje=yf,yje=Pl,bje=xje(yje,"DataView"),jje=bje,wje=yf,Nje=Pl,Sje=wje(Nje,"Promise"),Cje=Sje,Aje=yf,Eje=Pl,Pje=Aje(Eje,"Set"),yU=Pje,Tje=yf,_je=Pl,Ije=Tje(_je,"WeakMap"),kje=Ije,lA=jje,cA=MP,dA=Cje,uA=yU,fA=kje,bU=bc,rp=Cz,iO="[object Map]",Dje="[object Object]",oO="[object Promise]",lO="[object Set]",cO="[object WeakMap]",dO="[object DataView]",Oje=rp(lA),Lje=rp(cA),Rje=rp(dA),$je=rp(uA),Fje=rp(fA),gu=bU;(lA&&gu(new lA(new ArrayBuffer(1)))!=dO||cA&&gu(new cA)!=iO||dA&&gu(dA.resolve())!=oO||uA&&gu(new uA)!=lO||fA&&gu(new fA)!=cO)&&(gu=function(e){var t=bU(e),r=t==Dje?e.constructor:void 0,s=r?rp(r):"";if(s)switch(s){case Oje:return dO;case Lje:return iO;case Rje:return oO;case $je:return lO;case Fje:return cO}return t});var Mje=gu,wS=lU,Bje=fU,zje=xbe,Uje=gje,uO=Mje,fO=Qa,hO=pU,Vje=gU,Wje=1,mO="[object Arguments]",pO="[object Array]",Ny="[object Object]",qje=Object.prototype,vO=qje.hasOwnProperty;function Hje(e,t,r,s,a,i){var o=fO(e),l=fO(t),c=o?pO:uO(e),d=l?pO:uO(t);c=c==mO?Ny:c,d=d==mO?Ny:d;var f=c==Ny,u=d==Ny,h=c==d;if(h&&hO(e)){if(!hO(t))return!1;o=!0,f=!1}if(h&&!f)return i||(i=new wS),o||Vje(e)?Bje(e,t,r,s,a,i):zje(e,t,c,r,s,a,i);if(!(r&Wje)){var m=f&&vO.call(e,"__wrapped__"),v=u&&vO.call(t,"__wrapped__");if(m||v){var g=m?e.value():e,p=v?t.value():t;return i||(i=new wS),a(g,p,r,s,i)}}return h?(i||(i=new wS),Uje(e,t,r,s,a,i)):!1}var Gje=Hje,Kje=Gje,gO=jc;function jU(e,t,r,s,a){return e===t?!0:e==null||t==null||!gO(e)&&!gO(t)?e!==e&&t!==t:Kje(e,t,r,s,jU,a)}var nT=jU,Yje=lU,Xje=nT,Qje=1,Jje=2;function Zje(e,t,r,s){var a=r.length,i=a,o=!s;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],d=e[c],f=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var u=new Yje;if(s)var h=s(d,f,c,e,t,u);if(!(h===void 0?Xje(f,d,Qje|Jje,s,u):h))return!1}}return!0}var ewe=Zje,twe=Wd;function rwe(e){return e===e&&!twe(e)}var wU=rwe,nwe=wU,swe=Iw;function awe(e){for(var t=swe(e),r=t.length;r--;){var s=t[r],a=e[s];t[r]=[s,a,nwe(a)]}return t}var iwe=awe;function owe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var NU=owe,lwe=ewe,cwe=iwe,dwe=NU;function uwe(e){var t=cwe(e);return t.length==1&&t[0][2]?dwe(t[0][0],t[0][1]):function(r){return r===e||lwe(r,e,t)}}var fwe=uwe;function hwe(e,t){return e!=null&&t in Object(e)}var mwe=hwe,pwe=_z,vwe=eT,gwe=Qa,xwe=tT,ywe=rT,bwe=vw;function jwe(e,t,r){t=pwe(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var o=bwe(t[s]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&ywe(a)&&xwe(o,a)&&(gwe(e)||vwe(e)))}var wwe=jwe,Nwe=mwe,Swe=wwe;function Cwe(e,t){return e!=null&&Swe(e,t,Nwe)}var Awe=Cwe,Ewe=nT,Pwe=Iz,Twe=Awe,_we=RP,Iwe=wU,kwe=NU,Dwe=vw,Owe=1,Lwe=2;function Rwe(e,t){return _we(e)&&Iwe(t)?kwe(Dwe(e),t):function(r){var s=Pwe(r,e);return s===void 0&&s===t?Twe(r,e):Ewe(t,s,Owe|Lwe)}}var $we=Rwe;function Fwe(e){return e}var np=Fwe;function Mwe(e){return function(t){return t==null?void 0:t[e]}}var Bwe=Mwe,zwe=VP;function Uwe(e){return function(t){return zwe(t,e)}}var Vwe=Uwe,Wwe=Bwe,qwe=Vwe,Hwe=RP,Gwe=vw;function Kwe(e){return Hwe(e)?Wwe(Gwe(e)):qwe(e)}var Ywe=Kwe,Xwe=fwe,Qwe=$we,Jwe=np,Zwe=Qa,e2e=Ywe;function t2e(e){return typeof e=="function"?e:e==null?Jwe:typeof e=="object"?Zwe(e)?Qwe(e[0],e[1]):Xwe(e):e2e(e)}var qd=t2e;function r2e(e,t,r,s){for(var a=e.length,i=r+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var SU=r2e;function n2e(e){return e!==e}var s2e=n2e;function a2e(e,t,r){for(var s=r-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var i2e=a2e,o2e=SU,l2e=s2e,c2e=i2e;function d2e(e,t,r){return t===t?c2e(e,t,r):o2e(e,l2e,r)}var u2e=d2e,f2e=u2e;function h2e(e,t){var r=e==null?0:e.length;return!!r&&f2e(e,t,0)>-1}var m2e=h2e;function p2e(e,t,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(t,e[s]))return!0;return!1}var v2e=p2e;function g2e(){}var x2e=g2e,NS=yU,y2e=x2e,b2e=ZP,j2e=1/0,w2e=NS&&1/b2e(new NS([,-0]))[1]==j2e?function(e){return new NS(e)}:y2e,N2e=w2e,S2e=cU,C2e=m2e,A2e=v2e,E2e=uU,P2e=N2e,T2e=ZP,_2e=200;function I2e(e,t,r){var s=-1,a=C2e,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=A2e;else if(i>=_2e){var d=t?null:P2e(e);if(d)return T2e(d);o=!1,a=E2e,c=new S2e}else c=t?[]:l;e:for(;++s<i;){var f=e[s],u=t?t(f):f;if(f=r||f!==0?f:0,o&&u===u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),l.push(f)}else a(c,u,r)||(c!==l&&c.push(u),l.push(f))}return l}var k2e=I2e,D2e=qd,O2e=k2e;function L2e(e,t){return e&&e.length?O2e(e,D2e(t)):[]}var R2e=L2e;const xO=kr(R2e);function CU(e,t,r){return t===!0?xO(e,r):sr(t)?xO(e,t):e}function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}var $2e=["ref"];function yO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(r),!0).forEach(function(s){kw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function F2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,EU(s.key),s)}}function M2e(e,t,r){return t&&bO(e.prototype,t),r&&bO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function B2e(e,t,r){return t=g1(t),z2e(e,AU()?Reflect.construct(t,r||[],g1(e).constructor):t.apply(e,r))}function z2e(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U2e(e)}function U2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AU=function(){return!!e})()}function g1(e){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g1(e)}function V2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hA(e,t)}function hA(e,t){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},hA(e,t)}function kw(e,t,r){return t=EU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EU(e){var t=W2e(e,"string");return lm(t)=="symbol"?t:t+""}function W2e(e,t){if(lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(lm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q2e(e,t){if(e==null)return{};var r=H2e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function H2e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function G2e(e){return e.value}function K2e(e,t){if(ce.isValidElement(e))return ce.cloneElement(e,t);if(typeof e=="function")return ce.createElement(e,t);t.ref;var r=q2e(t,$2e);return ce.createElement(JP,r)}var jO=1,Mh=function(e){function t(){var r;F2e(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=B2e(this,t,[].concat(a)),kw(r,"lastBoundingBox",{width:-1,height:-1}),r}return V2e(t,e),M2e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>jO||Math.abs(a.height-this.lastBoundingBox.height)>jO)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ml({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,f=a.chartHeight,u,h;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();u={left:((d||0)-m.width)/2}}else u=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();h={top:((f||0)-v.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ml(Ml({},u),h)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,f=a.payload,u=Ml(Ml({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ce.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(m){s.wrapperNode=m}},K2e(i,Ml(Ml({},this.props),{},{payload:CU(f,d,G2e)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Ml(Ml({},this.defaultProps),s.props),o=i.layout;return o==="vertical"&&lt(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||a}:null}}])}(w.PureComponent);kw(Mh,"displayName","Legend");kw(Mh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var wO=$x,Y2e=eT,X2e=Qa,NO=wO?wO.isConcatSpreadable:void 0;function Q2e(e){return X2e(e)||Y2e(e)||!!(NO&&e&&e[NO])}var J2e=Q2e,Z2e=hU,eNe=J2e;function PU(e,t,r,s,a){var i=-1,o=e.length;for(r||(r=eNe),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?PU(l,t-1,r,s,a):Z2e(a,l):s||(a[a.length]=l)}return a}var TU=PU;function tNe(e){return function(t,r,s){for(var a=-1,i=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var rNe=tNe,nNe=rNe,sNe=nNe(),aNe=sNe,iNe=aNe,oNe=Iw;function lNe(e,t){return e&&iNe(e,t,oNe)}var _U=lNe,cNe=Fx;function dNe(e,t){return function(r,s){if(r==null)return r;if(!cNe(r))return e(r,s);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&s(o[i],i,o)!==!1;);return r}}var uNe=dNe,fNe=_U,hNe=uNe,mNe=hNe(fNe),sT=mNe,pNe=sT,vNe=Fx;function gNe(e,t){var r=-1,s=vNe(e)?Array(e.length):[];return pNe(e,function(a,i,o){s[++r]=t(a,i,o)}),s}var IU=gNe;function xNe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var yNe=xNe,SO=Km;function bNe(e,t){if(e!==t){var r=e!==void 0,s=e===null,a=e===e,i=SO(e),o=t!==void 0,l=t===null,c=t===t,d=SO(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||s&&o&&c||!r&&c||!a)return 1;if(!s&&!i&&!d&&e<t||d&&r&&a&&!s&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var jNe=bNe,wNe=jNe;function NNe(e,t,r){for(var s=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++s<o;){var c=wNe(a[s],i[s]);if(c){if(s>=l)return c;var d=r[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var SNe=NNe,SS=UP,CNe=VP,ANe=qd,ENe=IU,PNe=yNe,TNe=vU,_Ne=SNe,INe=np,kNe=Qa;function DNe(e,t,r){t.length?t=SS(t,function(i){return kNe(i)?function(o){return CNe(o,i.length===1?i[0]:i)}:i}):t=[INe];var s=-1;t=SS(t,TNe(ANe));var a=ENe(e,function(i,o,l){var c=SS(t,function(d){return d(i)});return{criteria:c,index:++s,value:i}});return PNe(a,function(i,o){return _Ne(i,o,r)})}var ONe=DNe;function LNe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var RNe=LNe,$Ne=RNe,CO=Math.max;function FNe(e,t,r){return t=CO(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=CO(s.length-t,0),o=Array(i);++a<i;)o[a]=s[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=s[a];return l[t]=r(o),$Ne(e,this,l)}}var MNe=FNe;function BNe(e){return function(){return e}}var zNe=BNe,UNe=yf,VNe=function(){try{var e=UNe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),kU=VNe,WNe=zNe,AO=kU,qNe=np,HNe=AO?function(e,t){return AO(e,"toString",{configurable:!0,enumerable:!1,value:WNe(t),writable:!0})}:qNe,GNe=HNe,KNe=800,YNe=16,XNe=Date.now;function QNe(e){var t=0,r=0;return function(){var s=XNe(),a=YNe-(s-r);if(r=s,a>0){if(++t>=KNe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var JNe=QNe,ZNe=GNe,eSe=JNe,tSe=eSe(ZNe),rSe=tSe,nSe=np,sSe=MNe,aSe=rSe;function iSe(e,t){return aSe(sSe(e,t,nSe),e+"")}var oSe=iSe,lSe=FP,cSe=Fx,dSe=tT,uSe=Wd;function fSe(e,t,r){if(!uSe(r))return!1;var s=typeof t;return(s=="number"?cSe(r)&&dSe(t,r.length):s=="string"&&t in r)?lSe(r[t],e):!1}var Dw=fSe,hSe=TU,mSe=ONe,pSe=oSe,EO=Dw,vSe=pSe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&EO(e,t[0],t[1])?t=[]:r>2&&EO(t[0],t[1],t[2])&&(t=[t[0]]),mSe(e,hSe(t,1),[])}),gSe=vSe;const aT=kr(gSe);function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function mA(){return mA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},mA.apply(this,arguments)}function xSe(e,t){return wSe(e)||jSe(e,t)||bSe(e,t)||ySe()}function ySe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bSe(e,t){if(e){if(typeof e=="string")return PO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PO(e,t)}}function PO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function jSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function wSe(e){if(Array.isArray(e))return e}function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function CS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(r),!0).forEach(function(s){NSe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function NSe(e,t,r){return t=SSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SSe(e){var t=CSe(e,"string");return Dg(t)=="symbol"?t:t+""}function CSe(e,t){if(Dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Dg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ASe(e){return Array.isArray(e)&&fs(e[0])&&fs(e[1])?e.join(" ~ "):e}var ESe=function(t){var r=t.separator,s=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,f=t.payload,u=t.formatter,h=t.itemSorter,m=t.wrapperClassName,v=t.labelClassName,g=t.label,p=t.labelFormatter,x=t.accessibilityLayer,b=x===void 0?!1:x,y=function(){if(f&&f.length){var N={padding:0,margin:0},D=(h?aT(f,h):f).map(function(I,R){if(I.type==="none")return null;var M=CS({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},l),$=I.formatter||u||ASe,B=I.value,U=I.name,q=B,W=U;if($&&q!=null&&W!=null){var L=$(B,U,I,R,f);if(Array.isArray(L)){var V=xSe(L,2);q=V[0],W=V[1]}else q=L}return ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:M},fs(W)?ce.createElement("span",{className:"recharts-tooltip-item-name"},W):null,fs(W)?ce.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,ce.createElement("span",{className:"recharts-tooltip-item-value"},q),ce.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return ce.createElement("ul",{className:"recharts-tooltip-item-list",style:N},D)}return null},j=CS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),E=CS({margin:0},d),A=!or(g),C=A?g:"",S=xr("recharts-default-tooltip",m),T=xr("recharts-tooltip-label",v);A&&p&&f!==void 0&&f!==null&&(C=p(g,f));var O=b?{role:"status","aria-live":"assertive"}:{};return ce.createElement("div",mA({className:S,style:j},O),ce.createElement("p",{className:T,style:E},ce.isValidElement(C)?C:"".concat(C)),y())};function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}function Sy(e,t,r){return t=PSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PSe(e){var t=TSe(e,"string");return Og(t)=="symbol"?t:t+""}function TSe(e,t){if(Og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Og(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cv="recharts-tooltip-wrapper",_Se={visibility:"hidden"};function ISe(e){var t=e.coordinate,r=e.translateX,s=e.translateY;return xr(cv,Sy(Sy(Sy(Sy({},"".concat(cv,"-right"),lt(r)&&t&&lt(t.x)&&r>=t.x),"".concat(cv,"-left"),lt(r)&&t&&lt(t.x)&&r<t.x),"".concat(cv,"-bottom"),lt(s)&&t&&lt(t.y)&&s>=t.y),"".concat(cv,"-top"),lt(s)&&t&&lt(t.y)&&s<t.y))}function _O(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&lt(i[s]))return i[s];var f=r[s]-l-a,u=r[s]+a;if(t[s])return o[s]?f:u;if(o[s]){var h=f,m=c[s];return h<m?Math.max(u,c[s]):Math.max(f,c[s])}var v=u+l,g=c[s]+d;return v>g?Math.max(f,c[s]):Math.max(u,c[s])}function kSe(e){var t=e.translateX,r=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function DSe(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,f,u;return o.height>0&&o.width>0&&r?(f=_O({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),u=_O({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=kSe({translateX:f,translateY:u,useTranslate3d:l})):d=_Se,{cssProperties:d,cssClasses:ISe({translateX:f,translateY:u,coordinate:r})}}function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function IO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function kO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IO(Object(r),!0).forEach(function(s){vA(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function OSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,OU(s.key),s)}}function LSe(e,t,r){return t&&DO(e.prototype,t),r&&DO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RSe(e,t,r){return t=x1(t),$Se(e,DU()?Reflect.construct(t,r||[],x1(e).constructor):t.apply(e,r))}function $Se(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FSe(e)}function FSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DU=function(){return!!e})()}function x1(e){return x1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x1(e)}function MSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pA(e,t)}function pA(e,t){return pA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},pA(e,t)}function vA(e,t,r){return t=OU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OU(e){var t=BSe(e,"string");return cm(t)=="symbol"?t:t+""}function BSe(e,t){if(cm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(cm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OO=1,zSe=function(e){function t(){var r;OSe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=RSe(this,t,[].concat(a)),vA(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),vA(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),r}return MSe(t,e),LSe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>OO||Math.abs(s.height-this.state.lastBoundingBox.height)>OO)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,f=a.coordinate,u=a.hasPayload,h=a.isAnimationActive,m=a.offset,v=a.position,g=a.reverseDirection,p=a.useTranslate3d,x=a.viewBox,b=a.wrapperStyle,y=DSe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:x}),j=y.cssClasses,E=y.cssProperties,A=kO(kO({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return ce.createElement("div",{tabIndex:-1,className:j,style:A,ref:function(S){s.wrapperNode=S}},d)}}])}(w.PureComponent),USe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},vl={isSsr:USe(),get:function(t){return vl[t]},set:function(t,r){if(typeof t=="string")vl[t]=r;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(a){vl[a]=t[a]})}}};function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function RO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(s){iT(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function VSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $O(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,RU(s.key),s)}}function WSe(e,t,r){return t&&$O(e.prototype,t),r&&$O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qSe(e,t,r){return t=y1(t),HSe(e,LU()?Reflect.construct(t,r||[],y1(e).constructor):t.apply(e,r))}function HSe(e,t){if(t&&(dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GSe(e)}function GSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LU=function(){return!!e})()}function y1(e){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y1(e)}function KSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gA(e,t)}function gA(e,t){return gA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},gA(e,t)}function iT(e,t,r){return t=RU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RU(e){var t=YSe(e,"string");return dm(t)=="symbol"?t:t+""}function YSe(e,t){if(dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(dm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XSe(e){return e.dataKey}function QSe(e,t){return ce.isValidElement(e)?ce.cloneElement(e,t):typeof e=="function"?ce.createElement(e,t):ce.createElement(ESe,t)}var Fa=function(e){function t(){return VSe(this,t),qSe(this,t,arguments)}return KSe(t,e),WSe(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,f=a.coordinate,u=a.filterNull,h=a.isAnimationActive,m=a.offset,v=a.payload,g=a.payloadUniqBy,p=a.position,x=a.reverseDirection,b=a.useTranslate3d,y=a.viewBox,j=a.wrapperStyle,E=v??[];u&&E.length&&(E=CU(v.filter(function(C){return C.value!=null&&(C.hide!==!0||s.props.includeHidden)}),g,XSe));var A=E.length>0;return ce.createElement(zSe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:f,hasPayload:A,offset:m,position:p,reverseDirection:x,useTranslate3d:b,viewBox:y,wrapperStyle:j},QSe(d,RO(RO({},this.props),{},{payload:E})))}}])}(w.PureComponent);iT(Fa,"displayName","Tooltip");iT(Fa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!vl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var JSe=Pl,ZSe=function(){return JSe.Date.now()},e5e=ZSe,t5e=/\s/;function r5e(e){for(var t=e.length;t--&&t5e.test(e.charAt(t)););return t}var n5e=r5e,s5e=n5e,a5e=/^\s+/;function i5e(e){return e&&e.slice(0,s5e(e)+1).replace(a5e,"")}var o5e=i5e,l5e=o5e,FO=Wd,c5e=Km,MO=0/0,d5e=/^[-+]0x[0-9a-f]+$/i,u5e=/^0b[01]+$/i,f5e=/^0o[0-7]+$/i,h5e=parseInt;function m5e(e){if(typeof e=="number")return e;if(c5e(e))return MO;if(FO(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=FO(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=l5e(e);var r=u5e.test(e);return r||f5e.test(e)?h5e(e.slice(2),r?2:8):d5e.test(e)?MO:+e}var $U=m5e,p5e=Wd,AS=e5e,BO=$U,v5e="Expected a function",g5e=Math.max,x5e=Math.min;function y5e(e,t,r){var s,a,i,o,l,c,d=0,f=!1,u=!1,h=!0;if(typeof e!="function")throw new TypeError(v5e);t=BO(t)||0,p5e(r)&&(f=!!r.leading,u="maxWait"in r,i=u?g5e(BO(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(A){var C=s,S=a;return s=a=void 0,d=A,o=e.apply(S,C),o}function v(A){return d=A,l=setTimeout(x,t),f?m(A):o}function g(A){var C=A-c,S=A-d,T=t-C;return u?x5e(T,i-S):T}function p(A){var C=A-c,S=A-d;return c===void 0||C>=t||C<0||u&&S>=i}function x(){var A=AS();if(p(A))return b(A);l=setTimeout(x,g(A))}function b(A){return l=void 0,h&&s?m(A):(s=a=void 0,o)}function y(){l!==void 0&&clearTimeout(l),d=0,s=c=a=l=void 0}function j(){return l===void 0?o:b(AS())}function E(){var A=AS(),C=p(A);if(s=arguments,a=this,c=A,C){if(l===void 0)return v(c);if(u)return clearTimeout(l),l=setTimeout(x,t),m(c)}return l===void 0&&(l=setTimeout(x,t)),o}return E.cancel=y,E.flush=j,E}var b5e=y5e,j5e=b5e,w5e=Wd,N5e="Expected a function";function S5e(e,t,r){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(N5e);return w5e(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),j5e(e,t,{leading:s,maxWait:t,trailing:a})}var C5e=S5e;const FU=kr(C5e);function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Cy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(s){A5e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function A5e(e,t,r){return t=E5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E5e(e){var t=P5e(e,"string");return Lg(t)=="symbol"?t:t+""}function P5e(e,t){if(Lg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Lg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T5e(e,t){return D5e(e)||k5e(e,t)||I5e(e,t)||_5e()}function _5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I5e(e,t){if(e){if(typeof e=="string")return UO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UO(e,t)}}function UO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function k5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function D5e(e){if(Array.isArray(e))return e}var Vv=w.forwardRef(function(e,t){var r=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,f=d===void 0?0:d,u=e.minHeight,h=e.maxHeight,m=e.children,v=e.debounce,g=v===void 0?0:v,p=e.id,x=e.className,b=e.onResize,y=e.style,j=y===void 0?{}:y,E=w.useRef(null),A=w.useRef();A.current=b,w.useImperativeHandle(t,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var C=w.useState({containerWidth:a.width,containerHeight:a.height}),S=T5e(C,2),T=S[0],O=S[1],_=w.useCallback(function(D,I){O(function(R){var M=Math.round(D),$=Math.round(I);return R.containerWidth===M&&R.containerHeight===$?R:{containerWidth:M,containerHeight:$}})},[]);w.useEffect(function(){var D=function(U){var q,W=U[0].contentRect,L=W.width,V=W.height;_(L,V),(q=A.current)===null||q===void 0||q.call(A,L,V)};g>0&&(D=FU(D,g,{trailing:!0,leading:!1}));var I=new ResizeObserver(D),R=E.current.getBoundingClientRect(),M=R.width,$=R.height;return _(M,$),I.observe(E.current),function(){I.disconnect()}},[_,g]);var N=w.useMemo(function(){var D=T.containerWidth,I=T.containerHeight;if(D<0||I<0)return null;nc(ku(o)||ku(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),nc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=ku(o)?D:o,M=ku(c)?I:c;r&&r>0&&(R?M=R/r:M&&(R=M*r),h&&M>h&&(M=h)),nc(R>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,M,o,c,f,u,r);var $=!Array.isArray(m)&&rc(m.type).endsWith("Chart");return ce.Children.map(m,function(B){return ce.isValidElement(B)?w.cloneElement(B,Cy({width:R,height:M},$?{style:Cy({height:"100%",width:"100%",maxHeight:M,maxWidth:R},B.props.style)}:{})):B})},[r,m,c,h,u,f,T,o]);return ce.createElement("div",{id:p?"".concat(p):void 0,className:xr("recharts-responsive-container",x),style:Cy(Cy({},j),{},{width:o,height:c,minWidth:f,minHeight:u,maxHeight:h}),ref:E},N)}),MU=function(t){return null};MU.displayName="Cell";function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function xA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(s){O5e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function O5e(e,t,r){return t=L5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L5e(e){var t=R5e(e,"string");return Rg(t)=="symbol"?t:t+""}function R5e(e,t){if(Rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Rg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var th={widthCache:{},cacheCount:0},$5e=2e3,F5e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WO="recharts_measurement_span";function M5e(e){var t=xA({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Wv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||vl.isSsr)return{width:0,height:0};var s=M5e(r),a=JSON.stringify({text:t,copyStyle:s});if(th.widthCache[a])return th.widthCache[a];try{var i=document.getElementById(WO);i||(i=document.createElement("span"),i.setAttribute("id",WO),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=xA(xA({},F5e),s);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return th.widthCache[a]=c,++th.cacheCount>$5e&&(th.cacheCount=0,th.widthCache={}),c}catch{return{width:0,height:0}}},B5e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}function b1(e,t){return W5e(e)||V5e(e,t)||U5e(e,t)||z5e()}function z5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U5e(e,t){if(e){if(typeof e=="string")return qO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qO(e,t)}}function qO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function V5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function W5e(e){if(Array.isArray(e))return e}function q5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HO(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,G5e(s.key),s)}}function H5e(e,t,r){return t&&HO(e.prototype,t),r&&HO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function G5e(e){var t=K5e(e,"string");return $g(t)=="symbol"?t:t+""}function K5e(e,t){if($g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if($g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Y5e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,X5e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,BU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Q5e=Object.keys(BU),Ch="NaN";function J5e(e,t){return e*BU[t]}var Ay=function(){function e(t,r){q5e(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Y5e.test(r)&&(this.num=NaN,this.unit=""),Q5e.includes(r)&&(this.num=J5e(t,r),this.unit="px")}return H5e(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,a=(s=X5e.exec(r))!==null&&s!==void 0?s:[],i=b1(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function zU(e){if(e.includes(Ch))return Ch;for(var t=e;t.includes("*")||t.includes("/");){var r,s=(r=GO.exec(t))!==null&&r!==void 0?r:[],a=b1(s,4),i=a[1],o=a[2],l=a[3],c=Ay.parse(i??""),d=Ay.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Ch;t=t.replace(GO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,h=(u=KO.exec(t))!==null&&u!==void 0?u:[],m=b1(h,4),v=m[1],g=m[2],p=m[3],x=Ay.parse(v??""),b=Ay.parse(p??""),y=g==="+"?x.add(b):x.subtract(b);if(y.isNaN())return Ch;t=t.replace(KO,y.toString())}return t}var YO=/\(([^()]*)\)/;function Z5e(e){for(var t=e;t.includes("(");){var r=YO.exec(t),s=b1(r,2),a=s[1];t=t.replace(YO,zU(a))}return t}function eCe(e){var t=e.replace(/\s+/g,"");return t=Z5e(t),t=zU(t),t}function tCe(e){try{return eCe(e)}catch{return Ch}}function ES(e){var t=tCe(e.slice(5,-1));return t===Ch?"":t}var rCe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],nCe=["dx","dy","angle","className","breakAll"];function yA(){return yA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yA.apply(this,arguments)}function XO(e,t){if(e==null)return{};var r=sCe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function sCe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function QO(e,t){return lCe(e)||oCe(e,t)||iCe(e,t)||aCe()}function aCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iCe(e,t){if(e){if(typeof e=="string")return JO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JO(e,t)}}function JO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function oCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function lCe(e){if(Array.isArray(e))return e}var UU=/[ \f\n\r\t\v\u2028\u2029]+/,VU=function(t){var r=t.children,s=t.breakAll,a=t.style;try{var i=[];or(r)||(s?i=r.toString().split(""):i=r.toString().split(UU));var o=i.map(function(c){return{word:c,width:Wv(c,a).width}}),l=s?0:Wv(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},cCe=function(t,r,s,a,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,f=lt(o),u=l,h=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(M,$){var B=$.word,U=$.width,q=M[M.length-1];if(q&&(a==null||i||q.width+U+s<Number(a)))q.words.push(B),q.width+=U+s;else{var W={words:[B],width:U};M.push(W)}return M},[])},m=h(r),v=function(R){return R.reduce(function(M,$){return M.width>$.width?M:$})};if(!f)return m;for(var g="…",p=function(R){var M=u.slice(0,R),$=VU({breakAll:d,style:c,children:M+g}).wordsWithComputedWidth,B=h($),U=B.length>o||v(B).width>Number(a);return[U,B]},x=0,b=u.length-1,y=0,j;x<=b&&y<=u.length-1;){var E=Math.floor((x+b)/2),A=E-1,C=p(A),S=QO(C,2),T=S[0],O=S[1],_=p(E),N=QO(_,1),D=N[0];if(!T&&!D&&(x=E+1),T&&D&&(b=E-1),!T&&D){j=O;break}y++}return j||m},ZO=function(t){var r=or(t)?[]:t.toString().split(UU);return[{words:r}]},dCe=function(t){var r=t.width,s=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||s)&&!vl.isSsr){var c,d,f=VU({breakAll:o,children:a,style:i});if(f){var u=f.wordsWithComputedWidth,h=f.spaceWidth;c=u,d=h}else return ZO(a);return cCe({breakAll:o,children:a,maxLines:l,style:i},c,d,r,s)}return ZO(a)},eL="#808080",j1=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,f=t.scaleToFit,u=f===void 0?!1:f,h=t.textAnchor,m=h===void 0?"start":h,v=t.verticalAnchor,g=v===void 0?"end":v,p=t.fill,x=p===void 0?eL:p,b=XO(t,rCe),y=w.useMemo(function(){return dCe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),j=b.dx,E=b.dy,A=b.angle,C=b.className,S=b.breakAll,T=XO(b,nCe);if(!fs(s)||!fs(i))return null;var O=s+(lt(j)?j:0),_=i+(lt(E)?E:0),N;switch(g){case"start":N=ES("calc(".concat(d,")"));break;case"middle":N=ES("calc(".concat((y.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:N=ES("calc(".concat(y.length-1," * -").concat(l,")"));break}var D=[];if(u){var I=y[0].width,R=b.width;D.push("scale(".concat((lt(R)?R/I:1)/I,")"))}return A&&D.push("rotate(".concat(A,", ").concat(O,", ").concat(_,")")),D.length&&(T.transform=D.join(" ")),ce.createElement("text",yA({},ar(T,!0),{x:O,y:_,className:xr("recharts-text",C),textAnchor:m,fill:x.includes("url")?eL:x}),y.map(function(M,$){var B=M.words.join(S?"":" ");return ce.createElement("tspan",{x:O,dy:$===0?N:l,key:"".concat(B,"-").concat($)},B)}))};function Cd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uCe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oT(e){let t,r,s;e.length!==2?(t=Cd,r=(l,c)=>Cd(e(l),c),s=(l,c)=>e(l)-c):(t=e===Cd||e===uCe?e:fCe,r=e,s=e);function a(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const u=d+f>>>1;r(l[u],c)<0?d=u+1:f=u}while(d<f)}return d}function i(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const u=d+f>>>1;r(l[u],c)<=0?d=u+1:f=u}while(d<f)}return d}function o(l,c,d=0,f=l.length){const u=a(l,c,d,f-1);return u>d&&s(l[u-1],c)>-s(l[u],c)?u-1:u}return{left:a,center:o,right:i}}function fCe(){return 0}function WU(e){return e===null?NaN:+e}function*hCe(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(yield s)}}const mCe=oT(Cd),pCe=mCe.right;oT(WU).center;const Mx=pCe;class tL extends Map{constructor(t,r=xCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(rL(this,t))}has(t){return super.has(rL(this,t))}set(t,r){return super.set(vCe(this,t),r)}delete(t){return super.delete(gCe(this,t))}}function rL({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function vCe({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function gCe({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function xCe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function yCe(e=Cd){if(e===Cd)return qU;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||s===0?s:(e(r,r)===0)-(e(t,t)===0)}}function qU(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const bCe=Math.sqrt(50),jCe=Math.sqrt(10),wCe=Math.sqrt(2);function w1(e,t,r){const s=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=bCe?10:i>=jCe?5:i>=wCe?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?w1(e,t,r*2):[l,c,d]}function bA(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[a,i,o]=s?w1(t,e,r):w1(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function jA(e,t,r){return t=+t,e=+e,r=+r,w1(e,t,r)[2]}function wA(e,t,r){t=+t,e=+e,r=+r;const s=t<e,a=s?jA(t,e,r):jA(e,t,r);return(s?-1:1)*(a<0?1/-a:a)}function nL(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function sL(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function HU(e,t,r=0,s=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(a=a===void 0?qU:yCe(a);s>r;){if(s-r>600){const c=s-r+1,d=t-r+1,f=Math.log(c),u=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*u*(c-u)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*u/c+h)),v=Math.min(s,Math.floor(t+(c-d)*u/c+h));HU(e,t,m,v,a)}const i=e[t];let o=r,l=s;for(dv(e,r,t),a(e[s],i)>0&&dv(e,r,s);o<l;){for(dv(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?dv(e,r,l):(++l,dv(e,l,s)),l<=t&&(r=l+1),t<=l&&(s=l-1)}return e}function dv(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function NCe(e,t,r){if(e=Float64Array.from(hCe(e,r)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return sL(e);if(t>=1)return nL(e);var s,a=(s-1)*t,i=Math.floor(a),o=nL(HU(e,i).subarray(0,i+1)),l=sL(e.subarray(i+1));return o+(l-o)*(a-i)}}function SCe(e,t,r=WU){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function CCe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++s<a;)i[s]=e+s*r;return i}function so(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const NA=Symbol("implicit");function lT(){var e=new tL,t=[],r=[],s=NA;function a(i){let o=e.get(i);if(o===void 0){if(s!==NA)return s;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new tL;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return lT(t,r).unknown(s)},so.apply(a,arguments),a}function Fg(){var e=lT().unknown(void 0),t=e.domain,r=e.range,s=0,a=1,i,o,l=!1,c=0,d=0,f=.5;delete e.unknown;function u(){var h=t().length,m=a<s,v=m?a:s,g=m?s:a;i=(g-v)/Math.max(1,h-c+d*2),l&&(i=Math.floor(i)),v+=(g-v-i*(h-c))*f,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var p=CCe(h).map(function(x){return v+i*x});return r(m?p.reverse():p)}return e.domain=function(h){return arguments.length?(t(h),u()):t()},e.range=function(h){return arguments.length?([s,a]=h,s=+s,a=+a,u()):[s,a]},e.rangeRound=function(h){return[s,a]=h,s=+s,a=+a,l=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,u()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),u()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),u()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,u()):d},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),u()):f},e.copy=function(){return Fg(t(),[s,a]).round(l).paddingInner(c).paddingOuter(d).align(f)},so.apply(u(),arguments)}function GU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return GU(t())},e}function qv(){return GU(Fg.apply(null,arguments).paddingInner(1))}function cT(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function KU(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function Bx(){}var Mg=.7,N1=1/Mg,Bh="\\s*([+-]?\\d+)\\s*",Bg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ACe=/^#([0-9a-f]{3,8})$/,ECe=new RegExp(`^rgb\\(${Bh},${Bh},${Bh}\\)$`),PCe=new RegExp(`^rgb\\(${gl},${gl},${gl}\\)$`),TCe=new RegExp(`^rgba\\(${Bh},${Bh},${Bh},${Bg}\\)$`),_Ce=new RegExp(`^rgba\\(${gl},${gl},${gl},${Bg}\\)$`),ICe=new RegExp(`^hsl\\(${Bg},${gl},${gl}\\)$`),kCe=new RegExp(`^hsla\\(${Bg},${gl},${gl},${Bg}\\)$`),aL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cT(Bx,zg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iL,formatHex:iL,formatHex8:DCe,formatHsl:OCe,formatRgb:oL,toString:oL});function iL(){return this.rgb().formatHex()}function DCe(){return this.rgb().formatHex8()}function OCe(){return YU(this).formatHsl()}function oL(){return this.rgb().formatRgb()}function zg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ACe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?lL(t):r===3?new Va(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ey(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ey(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ECe.exec(e))?new Va(t[1],t[2],t[3],1):(t=PCe.exec(e))?new Va(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=TCe.exec(e))?Ey(t[1],t[2],t[3],t[4]):(t=_Ce.exec(e))?Ey(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ICe.exec(e))?uL(t[1],t[2]/100,t[3]/100,1):(t=kCe.exec(e))?uL(t[1],t[2]/100,t[3]/100,t[4]):aL.hasOwnProperty(e)?lL(aL[e]):e==="transparent"?new Va(NaN,NaN,NaN,0):null}function lL(e){return new Va(e>>16&255,e>>8&255,e&255,1)}function Ey(e,t,r,s){return s<=0&&(e=t=r=NaN),new Va(e,t,r,s)}function LCe(e){return e instanceof Bx||(e=zg(e)),e?(e=e.rgb(),new Va(e.r,e.g,e.b,e.opacity)):new Va}function SA(e,t,r,s){return arguments.length===1?LCe(e):new Va(e,t,r,s??1)}function Va(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}cT(Va,SA,KU(Bx,{brighter(e){return e=e==null?N1:Math.pow(N1,e),new Va(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mg:Math.pow(Mg,e),new Va(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Va(qu(this.r),qu(this.g),qu(this.b),S1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cL,formatHex:cL,formatHex8:RCe,formatRgb:dL,toString:dL}));function cL(){return`#${Du(this.r)}${Du(this.g)}${Du(this.b)}`}function RCe(){return`#${Du(this.r)}${Du(this.g)}${Du(this.b)}${Du((isNaN(this.opacity)?1:this.opacity)*255)}`}function dL(){const e=S1(this.opacity);return`${e===1?"rgb(":"rgba("}${qu(this.r)}, ${qu(this.g)}, ${qu(this.b)}${e===1?")":`, ${e})`}`}function S1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Du(e){return e=qu(e),(e<16?"0":"")+e.toString(16)}function uL(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Eo(e,t,r,s)}function YU(e){if(e instanceof Eo)return new Eo(e.h,e.s,e.l,e.opacity);if(e instanceof Bx||(e=zg(e)),!e)return new Eo;if(e instanceof Eo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(t,r,s),i=Math.max(t,r,s),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-s)/l+(r<s)*6:r===i?o=(s-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Eo(o,l,c,e.opacity)}function $Ce(e,t,r,s){return arguments.length===1?YU(e):new Eo(e,t,r,s??1)}function Eo(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}cT(Eo,$Ce,KU(Bx,{brighter(e){return e=e==null?N1:Math.pow(N1,e),new Eo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mg:Math.pow(Mg,e),new Eo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,a=2*r-s;return new Va(PS(e>=240?e-240:e+120,a,s),PS(e,a,s),PS(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Eo(fL(this.h),Py(this.s),Py(this.l),S1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=S1(this.opacity);return`${e===1?"hsl(":"hsla("}${fL(this.h)}, ${Py(this.s)*100}%, ${Py(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fL(e){return e=(e||0)%360,e<0?e+360:e}function Py(e){return Math.max(0,Math.min(1,e||0))}function PS(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const dT=e=>()=>e;function FCe(e,t){return function(r){return e+r*t}}function MCe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function BCe(e){return(e=+e)==1?XU:function(t,r){return r-t?MCe(t,r,e):dT(isNaN(t)?r:t)}}function XU(e,t){var r=t-e;return r?FCe(e,r):dT(isNaN(e)?t:e)}const hL=function e(t){var r=BCe(t);function s(a,i){var o=r((a=SA(a)).r,(i=SA(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),d=XU(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=d(f),a+""}}return s.gamma=e,s}(1);function zCe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function UCe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VCe(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)a[o]=sp(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=a[o](l);return i}}function WCe(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function C1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function qCe(e,t){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=sp(e[a],t[a]):s[a]=t[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var CA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TS=new RegExp(CA.source,"g");function HCe(e){return function(){return e}}function GCe(e){return function(t){return e(t)+""}}function KCe(e,t){var r=CA.lastIndex=TS.lastIndex=0,s,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=CA.exec(e))&&(a=TS.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:C1(s,a)})),r=TS.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?GCe(c[0].x):HCe(t):(t=c.length,function(d){for(var f=0,u;f<t;++f)l[(u=c[f]).i]=u.x(d);return l.join("")})}function sp(e,t){var r=typeof t,s;return t==null||r==="boolean"?dT(t):(r==="number"?C1:r==="string"?(s=zg(t))?(t=s,hL):KCe:t instanceof zg?hL:t instanceof Date?WCe:UCe(t)?zCe:Array.isArray(t)?VCe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qCe:C1)(e,t)}function uT(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function YCe(e,t){t===void 0&&(t=e,e=sp);for(var r=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);r<s;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function XCe(e){return function(){return e}}function A1(e){return+e}var mL=[0,1];function xa(e){return e}function AA(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:XCe(isNaN(t)?NaN:.5)}function QCe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function JCe(e,t,r){var s=e[0],a=e[1],i=t[0],o=t[1];return a<s?(s=AA(a,s),i=r(o,i)):(s=AA(s,a),i=r(i,o)),function(l){return i(s(l))}}function ZCe(e,t,r){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)a[o]=AA(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Mx(e,l,1,s)-1;return i[c](a[c](l))}}function zx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ow(){var e=mL,t=mL,r=sp,s,a,i,o=xa,l,c,d;function f(){var h=Math.min(e.length,t.length);return o!==xa&&(o=QCe(e[0],e[h-1])),l=h>2?ZCe:JCe,c=d=null,u}function u(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(s),t,r)))(s(o(h)))}return u.invert=function(h){return o(a((d||(d=l(t,e.map(s),C1)))(h)))},u.domain=function(h){return arguments.length?(e=Array.from(h,A1),f()):e.slice()},u.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},u.rangeRound=function(h){return t=Array.from(h),r=uT,f()},u.clamp=function(h){return arguments.length?(o=h?!0:xa,f()):o!==xa},u.interpolate=function(h){return arguments.length?(r=h,f()):r},u.unknown=function(h){return arguments.length?(i=h,u):i},function(h,m){return s=h,a=m,f()}}function fT(){return Ow()(xa,xa)}function eAe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function E1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function um(e){return e=E1(Math.abs(e)),e?e[1]:NaN}function tAe(e,t){return function(r,s){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function rAe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var nAe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ug(e){if(!(t=nAe.exec(e)))throw new Error("invalid format: "+e);var t;return new hT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ug.prototype=hT.prototype;function hT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sAe(e){e:for(var t=e.length,r=1,s=-1,a;r<t;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var QU;function aAe(e,t){var r=E1(e,t);if(!r)return e+"";var s=r[0],a=r[1],i=a-(QU=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+E1(e,Math.max(0,t+i-1))[0]}function pL(e,t){var r=E1(e,t);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const vL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:eAe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pL(e*100,t),r:pL,s:aAe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gL(e){return e}var xL=Array.prototype.map,yL=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function iAe(e){var t=e.grouping===void 0||e.thousands===void 0?gL:tAe(xL.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?gL:rAe(xL.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(u){u=Ug(u);var h=u.fill,m=u.align,v=u.sign,g=u.symbol,p=u.zero,x=u.width,b=u.comma,y=u.precision,j=u.trim,E=u.type;E==="n"?(b=!0,E="g"):vL[E]||(y===void 0&&(y=12),j=!0,E="g"),(p||h==="0"&&m==="=")&&(p=!0,h="0",m="=");var A=g==="$"?r:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",C=g==="$"?s:/[%p]/.test(E)?o:"",S=vL[E],T=/[defgprs%]/.test(E);y=y===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function O(_){var N=A,D=C,I,R,M;if(E==="c")D=S(_)+D,_="";else{_=+_;var $=_<0||1/_<0;if(_=isNaN(_)?c:S(Math.abs(_),y),j&&(_=sAe(_)),$&&+_==0&&v!=="+"&&($=!1),N=($?v==="("?v:l:v==="-"||v==="("?"":v)+N,D=(E==="s"?yL[8+QU/3]:"")+D+($&&v==="("?")":""),T){for(I=-1,R=_.length;++I<R;)if(M=_.charCodeAt(I),48>M||M>57){D=(M===46?a+_.slice(I+1):_.slice(I))+D,_=_.slice(0,I);break}}}b&&!p&&(_=t(_,1/0));var B=N.length+_.length+D.length,U=B<x?new Array(x-B+1).join(h):"";switch(b&&p&&(_=t(U+_,U.length?x-D.length:1/0),U=""),m){case"<":_=N+_+D+U;break;case"=":_=N+U+_+D;break;case"^":_=U.slice(0,B=U.length>>1)+N+_+D+U.slice(B);break;default:_=U+N+_+D;break}return i(_)}return O.toString=function(){return u+""},O}function f(u,h){var m=d((u=Ug(u),u.type="f",u)),v=Math.max(-8,Math.min(8,Math.floor(um(h)/3)))*3,g=Math.pow(10,-v),p=yL[8+v/3];return function(x){return m(g*x)+p}}return{format:d,formatPrefix:f}}var Ty,mT,JU;oAe({thousands:",",grouping:[3],currency:["$",""]});function oAe(e){return Ty=iAe(e),mT=Ty.format,JU=Ty.formatPrefix,Ty}function lAe(e){return Math.max(0,-um(Math.abs(e)))}function cAe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(um(t)/3)))*3-um(Math.abs(e)))}function dAe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,um(t)-um(e))+1}function ZU(e,t,r,s){var a=wA(e,t,r),i;switch(s=Ug(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=cAe(a,o))&&(s.precision=i),JU(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=dAe(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=lAe(a))&&(s.precision=i-(s.type==="%")*2);break}}return mT(s)}function Hd(e){var t=e.domain;return e.ticks=function(r){var s=t();return bA(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=t();return ZU(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),a=0,i=s.length-1,o=s[a],l=s[i],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);f-- >0;){if(d=jA(o,l,r),d===c)return s[a]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function P1(){var e=fT();return e.copy=function(){return zx(e,P1())},so.apply(e,arguments),Hd(e)}function eV(e){var t;function r(s){return s==null||isNaN(s=+s)?t:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,A1),r):e.slice()},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return eV(e).unknown(t)},e=arguments.length?Array.from(e,A1):[0,1],Hd(r)}function tV(e,t){e=e.slice();var r=0,s=e.length-1,a=e[r],i=e[s],o;return i<a&&(o=r,r=s,s=o,o=a,a=i,i=o),e[r]=t.floor(a),e[s]=t.ceil(i),e}function bL(e){return Math.log(e)}function jL(e){return Math.exp(e)}function uAe(e){return-Math.log(-e)}function fAe(e){return-Math.exp(-e)}function hAe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mAe(e){return e===10?hAe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pAe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wL(e){return(t,r)=>-e(-t,r)}function pT(e){const t=e(bL,jL),r=t.domain;let s=10,a,i;function o(){return a=pAe(s),i=mAe(s),r()[0]<0?(a=wL(a),i=wL(i),e(uAe,fAe)):e(bL,jL),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],f=c[c.length-1];const u=f<d;u&&([d,f]=[f,d]);let h=a(d),m=a(f),v,g;const p=l==null?10:+l;let x=[];if(!(s%1)&&m-h<p){if(h=Math.floor(h),m=Math.ceil(m),d>0){for(;h<=m;++h)for(v=1;v<s;++v)if(g=h<0?v/i(-h):v*i(h),!(g<d)){if(g>f)break;x.push(g)}}else for(;h<=m;++h)for(v=s-1;v>=1;--v)if(g=h>0?v/i(-h):v*i(h),!(g<d)){if(g>f)break;x.push(g)}x.length*2<p&&(x=bA(d,f,p))}else x=bA(h,m,Math.min(m-h,p)).map(i);return u?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Ug(c)).precision==null&&(c.trim=!0),c=mT(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return f=>{let u=f/i(Math.round(a(f)));return u*s<s-.5&&(u*=s),u<=d?c(f):""}},t.nice=()=>r(tV(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function rV(){const e=pT(Ow()).domain([1,10]);return e.copy=()=>zx(e,rV()).base(e.base()),so.apply(e,arguments),e}function NL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function SL(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vT(e){var t=1,r=e(NL(t),SL(t));return r.constant=function(s){return arguments.length?e(NL(t=+s),SL(t)):t},Hd(r)}function nV(){var e=vT(Ow());return e.copy=function(){return zx(e,nV()).constant(e.constant())},so.apply(e,arguments)}function CL(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function vAe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function gAe(e){return e<0?-e*e:e*e}function gT(e){var t=e(xa,xa),r=1;function s(){return r===1?e(xa,xa):r===.5?e(vAe,gAe):e(CL(r),CL(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,s()):r},Hd(t)}function xT(){var e=gT(Ow());return e.copy=function(){return zx(e,xT()).exponent(e.exponent())},so.apply(e,arguments),e}function xAe(){return xT.apply(null,arguments).exponent(.5)}function AL(e){return Math.sign(e)*e*e}function yAe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function sV(){var e=fT(),t=[0,1],r=!1,s;function a(i){var o=yAe(e(i));return isNaN(o)?s:r?Math.round(o):o}return a.invert=function(i){return e.invert(AL(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,A1)).map(AL)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return sV(e.domain(),t).round(r).clamp(e.clamp()).unknown(s)},so.apply(a,arguments),Hd(a)}function aV(){var e=[],t=[],r=[],s;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=SCe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[Mx(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Cd),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return aV().domain(e).range(t).unknown(s)},so.apply(i,arguments)}function iV(){var e=0,t=1,r=1,s=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Mx(s,c,0,r)]:i}function l(){var c=-1;for(s=new Array(r);++c<r;)s[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=r?[s[r-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return iV().domain([e,t]).range(a).unknown(i)},so.apply(Hd(o),arguments)}function oV(){var e=[.5],t=[0,1],r,s=1;function a(i){return i!=null&&i<=i?t[Mx(e,i,0,s)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return oV().domain(e).range(t).unknown(r)},so.apply(a,arguments)}const _S=new Date,IS=new Date;function ms(e,t,r,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},a.filter=i=>ms(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(_S.setTime(+i),IS.setTime(+o),e(_S),e(IS),Math.floor(r(_S,IS))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const T1=ms(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);T1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ms(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):T1);T1.range;const Xl=1e3,Wi=Xl*60,Ql=Wi*60,vc=Ql*24,yT=vc*7,EL=vc*30,kS=vc*365,Ou=ms(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Xl)},(e,t)=>(t-e)/Xl,e=>e.getUTCSeconds());Ou.range;const bT=ms(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xl)},(e,t)=>{e.setTime(+e+t*Wi)},(e,t)=>(t-e)/Wi,e=>e.getMinutes());bT.range;const jT=ms(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Wi)},(e,t)=>(t-e)/Wi,e=>e.getUTCMinutes());jT.range;const wT=ms(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xl-e.getMinutes()*Wi)},(e,t)=>{e.setTime(+e+t*Ql)},(e,t)=>(t-e)/Ql,e=>e.getHours());wT.range;const NT=ms(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ql)},(e,t)=>(t-e)/Ql,e=>e.getUTCHours());NT.range;const Ux=ms(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Wi)/vc,e=>e.getDate()-1);Ux.range;const Lw=ms(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vc,e=>e.getUTCDate()-1);Lw.range;const lV=ms(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vc,e=>Math.floor(e/vc));lV.range;function bf(e){return ms(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Wi)/yT)}const Rw=bf(0),_1=bf(1),bAe=bf(2),jAe=bf(3),fm=bf(4),wAe=bf(5),NAe=bf(6);Rw.range;_1.range;bAe.range;jAe.range;fm.range;wAe.range;NAe.range;function jf(e){return ms(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/yT)}const $w=jf(0),I1=jf(1),SAe=jf(2),CAe=jf(3),hm=jf(4),AAe=jf(5),EAe=jf(6);$w.range;I1.range;SAe.range;CAe.range;hm.range;AAe.range;EAe.range;const ST=ms(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ST.range;const CT=ms(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());CT.range;const gc=ms(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());gc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ms(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});gc.range;const xc=ms(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ms(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});xc.range;function cV(e,t,r,s,a,i){const o=[[Ou,1,Xl],[Ou,5,5*Xl],[Ou,15,15*Xl],[Ou,30,30*Xl],[i,1,Wi],[i,5,5*Wi],[i,15,15*Wi],[i,30,30*Wi],[a,1,Ql],[a,3,3*Ql],[a,6,6*Ql],[a,12,12*Ql],[s,1,vc],[s,2,2*vc],[r,1,yT],[t,1,EL],[t,3,3*EL],[e,1,kS]];function l(d,f,u){const h=f<d;h&&([d,f]=[f,d]);const m=u&&typeof u.range=="function"?u:c(d,f,u),v=m?m.range(d,+f+1):[];return h?v.reverse():v}function c(d,f,u){const h=Math.abs(f-d)/u,m=oT(([,,p])=>p).right(o,h);if(m===o.length)return e.every(wA(d/kS,f/kS,u));if(m===0)return T1.every(Math.max(wA(d,f,u),1));const[v,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return v.every(g)}return[l,c]}const[PAe,TAe]=cV(xc,CT,$w,lV,NT,jT),[_Ae,IAe]=cV(gc,ST,Rw,Ux,wT,bT);function DS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function OS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uv(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function kAe(e){var t=e.dateTime,r=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=fv(a),f=hv(a),u=fv(i),h=hv(i),m=fv(o),v=hv(o),g=fv(l),p=hv(l),x=fv(c),b=hv(c),y={a:$,A:B,b:U,B:q,c:null,d:DL,e:DL,f:tEe,g:uEe,G:hEe,H:JAe,I:ZAe,j:eEe,L:dV,m:rEe,M:nEe,p:W,q:L,Q:RL,s:$L,S:sEe,u:aEe,U:iEe,V:oEe,w:lEe,W:cEe,x:null,X:null,y:dEe,Y:fEe,Z:mEe,"%":LL},j={a:V,A:G,b:Z,B:ee,c:null,d:OL,e:OL,f:xEe,g:PEe,G:_Ee,H:pEe,I:vEe,j:gEe,L:fV,m:yEe,M:bEe,p:he,q:me,Q:RL,s:$L,S:jEe,u:wEe,U:NEe,V:SEe,w:CEe,W:AEe,x:null,X:null,y:EEe,Y:TEe,Z:IEe,"%":LL},E={a:O,A:_,b:N,B:D,c:I,d:IL,e:IL,f:KAe,g:_L,G:TL,H:kL,I:kL,j:WAe,L:GAe,m:VAe,M:qAe,p:T,q:UAe,Q:XAe,s:QAe,S:HAe,u:$Ae,U:FAe,V:MAe,w:RAe,W:BAe,x:R,X:M,y:_L,Y:TL,Z:zAe,"%":YAe};y.x=A(r,y),y.X=A(s,y),y.c=A(t,y),j.x=A(r,j),j.X=A(s,j),j.c=A(t,j);function A(oe,we){return function(ve){var pe=[],De=-1,xe=0,le=oe.length,re,Se,Ne;for(ve instanceof Date||(ve=new Date(+ve));++De<le;)oe.charCodeAt(De)===37&&(pe.push(oe.slice(xe,De)),(Se=PL[re=oe.charAt(++De)])!=null?re=oe.charAt(++De):Se=re==="e"?" ":"0",(Ne=we[re])&&(re=Ne(ve,Se)),pe.push(re),xe=De+1);return pe.push(oe.slice(xe,De)),pe.join("")}}function C(oe,we){return function(ve){var pe=uv(1900,void 0,1),De=S(pe,oe,ve+="",0),xe,le;if(De!=ve.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(we&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(xe=OS(uv(pe.y,0,1)),le=xe.getUTCDay(),xe=le>4||le===0?I1.ceil(xe):I1(xe),xe=Lw.offset(xe,(pe.V-1)*7),pe.y=xe.getUTCFullYear(),pe.m=xe.getUTCMonth(),pe.d=xe.getUTCDate()+(pe.w+6)%7):(xe=DS(uv(pe.y,0,1)),le=xe.getDay(),xe=le>4||le===0?_1.ceil(xe):_1(xe),xe=Ux.offset(xe,(pe.V-1)*7),pe.y=xe.getFullYear(),pe.m=xe.getMonth(),pe.d=xe.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),le="Z"in pe?OS(uv(pe.y,0,1)).getUTCDay():DS(uv(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(le+5)%7:pe.w+pe.U*7-(le+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,OS(pe)):DS(pe)}}function S(oe,we,ve,pe){for(var De=0,xe=we.length,le=ve.length,re,Se;De<xe;){if(pe>=le)return-1;if(re=we.charCodeAt(De++),re===37){if(re=we.charAt(De++),Se=E[re in PL?we.charAt(De++):re],!Se||(pe=Se(oe,ve,pe))<0)return-1}else if(re!=ve.charCodeAt(pe++))return-1}return pe}function T(oe,we,ve){var pe=d.exec(we.slice(ve));return pe?(oe.p=f.get(pe[0].toLowerCase()),ve+pe[0].length):-1}function O(oe,we,ve){var pe=m.exec(we.slice(ve));return pe?(oe.w=v.get(pe[0].toLowerCase()),ve+pe[0].length):-1}function _(oe,we,ve){var pe=u.exec(we.slice(ve));return pe?(oe.w=h.get(pe[0].toLowerCase()),ve+pe[0].length):-1}function N(oe,we,ve){var pe=x.exec(we.slice(ve));return pe?(oe.m=b.get(pe[0].toLowerCase()),ve+pe[0].length):-1}function D(oe,we,ve){var pe=g.exec(we.slice(ve));return pe?(oe.m=p.get(pe[0].toLowerCase()),ve+pe[0].length):-1}function I(oe,we,ve){return S(oe,t,we,ve)}function R(oe,we,ve){return S(oe,r,we,ve)}function M(oe,we,ve){return S(oe,s,we,ve)}function $(oe){return o[oe.getDay()]}function B(oe){return i[oe.getDay()]}function U(oe){return c[oe.getMonth()]}function q(oe){return l[oe.getMonth()]}function W(oe){return a[+(oe.getHours()>=12)]}function L(oe){return 1+~~(oe.getMonth()/3)}function V(oe){return o[oe.getUTCDay()]}function G(oe){return i[oe.getUTCDay()]}function Z(oe){return c[oe.getUTCMonth()]}function ee(oe){return l[oe.getUTCMonth()]}function he(oe){return a[+(oe.getUTCHours()>=12)]}function me(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var we=A(oe+="",y);return we.toString=function(){return oe},we},parse:function(oe){var we=C(oe+="",!1);return we.toString=function(){return oe},we},utcFormat:function(oe){var we=A(oe+="",j);return we.toString=function(){return oe},we},utcParse:function(oe){var we=C(oe+="",!0);return we.toString=function(){return oe},we}}}var PL={"-":"",_:" ",0:"0"},Ts=/^\s*\d+/,DAe=/^%/,OAe=/[\\^$*+?|[\]().{}]/g;function Tr(e,t,r){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(t)+a:a)}function LAe(e){return e.replace(OAe,"\\$&")}function fv(e){return new RegExp("^(?:"+e.map(LAe).join("|")+")","i")}function hv(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function RAe(e,t,r){var s=Ts.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function $Ae(e,t,r){var s=Ts.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function FAe(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function MAe(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function BAe(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function TL(e,t,r){var s=Ts.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function _L(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function zAe(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function UAe(e,t,r){var s=Ts.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function VAe(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function IL(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function WAe(e,t,r){var s=Ts.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function kL(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function qAe(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function HAe(e,t,r){var s=Ts.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function GAe(e,t,r){var s=Ts.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function KAe(e,t,r){var s=Ts.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function YAe(e,t,r){var s=DAe.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function XAe(e,t,r){var s=Ts.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function QAe(e,t,r){var s=Ts.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function DL(e,t){return Tr(e.getDate(),t,2)}function JAe(e,t){return Tr(e.getHours(),t,2)}function ZAe(e,t){return Tr(e.getHours()%12||12,t,2)}function eEe(e,t){return Tr(1+Ux.count(gc(e),e),t,3)}function dV(e,t){return Tr(e.getMilliseconds(),t,3)}function tEe(e,t){return dV(e,t)+"000"}function rEe(e,t){return Tr(e.getMonth()+1,t,2)}function nEe(e,t){return Tr(e.getMinutes(),t,2)}function sEe(e,t){return Tr(e.getSeconds(),t,2)}function aEe(e){var t=e.getDay();return t===0?7:t}function iEe(e,t){return Tr(Rw.count(gc(e)-1,e),t,2)}function uV(e){var t=e.getDay();return t>=4||t===0?fm(e):fm.ceil(e)}function oEe(e,t){return e=uV(e),Tr(fm.count(gc(e),e)+(gc(e).getDay()===4),t,2)}function lEe(e){return e.getDay()}function cEe(e,t){return Tr(_1.count(gc(e)-1,e),t,2)}function dEe(e,t){return Tr(e.getFullYear()%100,t,2)}function uEe(e,t){return e=uV(e),Tr(e.getFullYear()%100,t,2)}function fEe(e,t){return Tr(e.getFullYear()%1e4,t,4)}function hEe(e,t){var r=e.getDay();return e=r>=4||r===0?fm(e):fm.ceil(e),Tr(e.getFullYear()%1e4,t,4)}function mEe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Tr(t/60|0,"0",2)+Tr(t%60,"0",2)}function OL(e,t){return Tr(e.getUTCDate(),t,2)}function pEe(e,t){return Tr(e.getUTCHours(),t,2)}function vEe(e,t){return Tr(e.getUTCHours()%12||12,t,2)}function gEe(e,t){return Tr(1+Lw.count(xc(e),e),t,3)}function fV(e,t){return Tr(e.getUTCMilliseconds(),t,3)}function xEe(e,t){return fV(e,t)+"000"}function yEe(e,t){return Tr(e.getUTCMonth()+1,t,2)}function bEe(e,t){return Tr(e.getUTCMinutes(),t,2)}function jEe(e,t){return Tr(e.getUTCSeconds(),t,2)}function wEe(e){var t=e.getUTCDay();return t===0?7:t}function NEe(e,t){return Tr($w.count(xc(e)-1,e),t,2)}function hV(e){var t=e.getUTCDay();return t>=4||t===0?hm(e):hm.ceil(e)}function SEe(e,t){return e=hV(e),Tr(hm.count(xc(e),e)+(xc(e).getUTCDay()===4),t,2)}function CEe(e){return e.getUTCDay()}function AEe(e,t){return Tr(I1.count(xc(e)-1,e),t,2)}function EEe(e,t){return Tr(e.getUTCFullYear()%100,t,2)}function PEe(e,t){return e=hV(e),Tr(e.getUTCFullYear()%100,t,2)}function TEe(e,t){return Tr(e.getUTCFullYear()%1e4,t,4)}function _Ee(e,t){var r=e.getUTCDay();return e=r>=4||r===0?hm(e):hm.ceil(e),Tr(e.getUTCFullYear()%1e4,t,4)}function IEe(){return"+0000"}function LL(){return"%"}function RL(e){return+e}function $L(e){return Math.floor(+e/1e3)}var rh,mV,pV;kEe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function kEe(e){return rh=kAe(e),mV=rh.format,rh.parse,pV=rh.utcFormat,rh.utcParse,rh}function DEe(e){return new Date(e)}function OEe(e){return e instanceof Date?+e:+new Date(+e)}function AT(e,t,r,s,a,i,o,l,c,d){var f=fT(),u=f.invert,h=f.domain,m=d(".%L"),v=d(":%S"),g=d("%I:%M"),p=d("%I %p"),x=d("%a %d"),b=d("%b %d"),y=d("%B"),j=d("%Y");function E(A){return(c(A)<A?m:l(A)<A?v:o(A)<A?g:i(A)<A?p:s(A)<A?a(A)<A?x:b:r(A)<A?y:j)(A)}return f.invert=function(A){return new Date(u(A))},f.domain=function(A){return arguments.length?h(Array.from(A,OEe)):h().map(DEe)},f.ticks=function(A){var C=h();return e(C[0],C[C.length-1],A??10)},f.tickFormat=function(A,C){return C==null?E:d(C)},f.nice=function(A){var C=h();return(!A||typeof A.range!="function")&&(A=t(C[0],C[C.length-1],A??10)),A?h(tV(C,A)):f},f.copy=function(){return zx(f,AT(e,t,r,s,a,i,o,l,c,d))},f}function LEe(){return so.apply(AT(_Ae,IAe,gc,ST,Rw,Ux,wT,bT,Ou,mV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function REe(){return so.apply(AT(PAe,TAe,xc,CT,$w,Lw,NT,jT,Ou,pV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fw(){var e=0,t=1,r,s,a,i,o=xa,l=!1,c;function d(u){return u==null||isNaN(u=+u)?c:o(a===0?.5:(u=(i(u)-r)*a,l?Math.max(0,Math.min(1,u)):u))}d.domain=function(u){return arguments.length?([e,t]=u,r=i(e=+e),s=i(t=+t),a=r===s?0:1/(s-r),d):[e,t]},d.clamp=function(u){return arguments.length?(l=!!u,d):l},d.interpolator=function(u){return arguments.length?(o=u,d):o};function f(u){return function(h){var m,v;return arguments.length?([m,v]=h,o=u(m,v),d):[o(0),o(1)]}}return d.range=f(sp),d.rangeRound=f(uT),d.unknown=function(u){return arguments.length?(c=u,d):c},function(u){return i=u,r=u(e),s=u(t),a=r===s?0:1/(s-r),d}}function Gd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function vV(){var e=Hd(Fw()(xa));return e.copy=function(){return Gd(e,vV())},wc.apply(e,arguments)}function gV(){var e=pT(Fw()).domain([1,10]);return e.copy=function(){return Gd(e,gV()).base(e.base())},wc.apply(e,arguments)}function xV(){var e=vT(Fw());return e.copy=function(){return Gd(e,xV()).constant(e.constant())},wc.apply(e,arguments)}function ET(){var e=gT(Fw());return e.copy=function(){return Gd(e,ET()).exponent(e.exponent())},wc.apply(e,arguments)}function $Ee(){return ET.apply(null,arguments).exponent(.5)}function yV(){var e=[],t=xa;function r(s){if(s!=null&&!isNaN(s=+s))return t((Mx(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Cd),r},r.interpolator=function(s){return arguments.length?(t=s,r):t},r.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>NCe(e,i/s))},r.copy=function(){return yV(t).domain(e)},wc.apply(r,arguments)}function Mw(){var e=0,t=.5,r=1,s=1,a,i,o,l,c,d=xa,f,u=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+f(g))-i)*(s*g<s*i?l:c),d(u?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=f(e=+e),i=f(t=+t),o=f(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(u=!!g,m):u},m.interpolator=function(g){return arguments.length?(d=g,m):d};function v(g){return function(p){var x,b,y;return arguments.length?([x,b,y]=p,d=YCe(g,[x,b,y]),m):[d(0),d(.5),d(1)]}}return m.range=v(sp),m.rangeRound=v(uT),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return f=g,a=g(e),i=g(t),o=g(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,m}}function bV(){var e=Hd(Mw()(xa));return e.copy=function(){return Gd(e,bV())},wc.apply(e,arguments)}function jV(){var e=pT(Mw()).domain([.1,1,10]);return e.copy=function(){return Gd(e,jV()).base(e.base())},wc.apply(e,arguments)}function wV(){var e=vT(Mw());return e.copy=function(){return Gd(e,wV()).constant(e.constant())},wc.apply(e,arguments)}function PT(){var e=gT(Mw());return e.copy=function(){return Gd(e,PT()).exponent(e.exponent())},wc.apply(e,arguments)}function FEe(){return PT.apply(null,arguments).exponent(.5)}const FL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Fg,scaleDiverging:bV,scaleDivergingLog:jV,scaleDivergingPow:PT,scaleDivergingSqrt:FEe,scaleDivergingSymlog:wV,scaleIdentity:eV,scaleImplicit:NA,scaleLinear:P1,scaleLog:rV,scaleOrdinal:lT,scalePoint:qv,scalePow:xT,scaleQuantile:aV,scaleQuantize:iV,scaleRadial:sV,scaleSequential:vV,scaleSequentialLog:gV,scaleSequentialPow:ET,scaleSequentialQuantile:yV,scaleSequentialSqrt:$Ee,scaleSequentialSymlog:xV,scaleSqrt:xAe,scaleSymlog:nV,scaleThreshold:oV,scaleTime:LEe,scaleUtc:REe,tickFormat:ZU},Symbol.toStringTag,{value:"Module"}));var MEe=Km;function BEe(e,t,r){for(var s=-1,a=e.length;++s<a;){var i=e[s],o=t(i);if(o!=null&&(l===void 0?o===o&&!MEe(o):r(o,l)))var l=o,c=i}return c}var NV=BEe;function zEe(e,t){return e>t}var UEe=zEe,VEe=NV,WEe=UEe,qEe=np;function HEe(e){return e&&e.length?VEe(e,qEe,WEe):void 0}var GEe=HEe;const cd=kr(GEe);function KEe(e,t){return e<t}var YEe=KEe,XEe=NV,QEe=YEe,JEe=np;function ZEe(e){return e&&e.length?XEe(e,JEe,QEe):void 0}var e4e=ZEe;const Bw=kr(e4e);var t4e=UP,r4e=qd,n4e=IU,s4e=Qa;function a4e(e,t){var r=s4e(e)?t4e:n4e;return r(e,r4e(t))}var i4e=a4e,o4e=TU,l4e=i4e;function c4e(e,t){return o4e(l4e(e,t),1)}var d4e=c4e;const u4e=kr(d4e);var f4e=nT;function h4e(e,t){return f4e(e,t)}var m4e=h4e;const mm=kr(m4e);var ap=1e9,p4e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_T,bn=!0,to="[DecimalError] ",Hu=to+"Invalid argument: ",TT=to+"Exponent out of range: ",ip=Math.floor,xu=Math.pow,v4e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ui,js=1e7,fn=7,SV=9007199254740991,k1=ip(SV/fn),St={};St.absoluteValue=St.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};St.comparedTo=St.cmp=function(e){var t,r,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,r=s<a?s:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};St.decimalPlaces=St.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*fn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};St.dividedBy=St.div=function(e){return sc(this,new this.constructor(e))};St.dividedToIntegerBy=St.idiv=function(e){var t=this,r=t.constructor;return Kr(sc(t,new r(e),0,1),r.precision)};St.equals=St.eq=function(e){return!this.cmp(e)};St.exponent=function(){return ns(this)};St.greaterThan=St.gt=function(e){return this.cmp(e)>0};St.greaterThanOrEqualTo=St.gte=function(e){return this.cmp(e)>=0};St.isInteger=St.isint=function(){return this.e>this.d.length-2};St.isNegative=St.isneg=function(){return this.s<0};St.isPositive=St.ispos=function(){return this.s>0};St.isZero=function(){return this.s===0};St.lessThan=St.lt=function(e){return this.cmp(e)<0};St.lessThanOrEqualTo=St.lte=function(e){return this.cmp(e)<1};St.logarithm=St.log=function(e){var t,r=this,s=r.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(ui))throw Error(to+"NaN");if(r.s<1)throw Error(to+(r.s?"NaN":"-Infinity"));return r.eq(ui)?new s(0):(bn=!1,t=sc(Vg(r,i),Vg(e,i),i),bn=!0,Kr(t,a))};St.minus=St.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EV(t,e):CV(t,(e.s=-e.s,e))};St.modulo=St.mod=function(e){var t,r=this,s=r.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(to+"NaN");return r.s?(bn=!1,t=sc(r,e,0,1).times(e),bn=!0,r.minus(t)):Kr(new s(r),a)};St.naturalExponential=St.exp=function(){return AV(this)};St.naturalLogarithm=St.ln=function(){return Vg(this)};St.negated=St.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};St.plus=St.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?CV(t,e):EV(t,(e.s=-e.s,e))};St.precision=St.sd=function(e){var t,r,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Hu+e);if(t=ns(a)+1,s=a.d.length-1,r=s*fn+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return e&&t>r?t:r};St.squareRoot=St.sqrt=function(){var e,t,r,s,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(to+"NaN")}for(e=ns(l),bn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=cl(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ip((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=s,s=i.plus(sc(l,i,o+2)).times(.5),cl(i.d).slice(0,o)===(t=cl(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Kr(i,r+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return bn=!0,Kr(s,r)};St.times=St.mul=function(e){var t,r,s,a,i,o,l,c,d,f=this,u=f.constructor,h=f.d,m=(e=new u(e)).d;if(!f.s||!e.s)return new u(0);for(e.s*=f.s,r=f.e+e.e,c=h.length,d=m.length,c<d&&(i=h,h=m,m=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)l=i[a]+m[s]*h[a-s-1]+t,i[a--]=l%js|0,t=l/js|0;i[a]=(i[a]+t)%js|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,bn?Kr(e,u.precision):e};St.toDecimalPlaces=St.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(Nl(e,0,ap),t===void 0?t=s.rounding:Nl(t,0,8),Kr(r,e+ns(r)+1,t))};St.toExponential=function(e,t){var r,s=this,a=s.constructor;return e===void 0?r=sf(s,!0):(Nl(e,0,ap),t===void 0?t=a.rounding:Nl(t,0,8),s=Kr(new a(s),e+1,t),r=sf(s,!0,e+1)),r};St.toFixed=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?sf(a):(Nl(e,0,ap),t===void 0?t=i.rounding:Nl(t,0,8),s=Kr(new i(a),e+ns(a)+1,t),r=sf(s.abs(),!1,e+ns(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};St.toInteger=St.toint=function(){var e=this,t=e.constructor;return Kr(new t(e),ns(e)+1,t.rounding)};St.toNumber=function(){return+this};St.toPower=St.pow=function(e){var t,r,s,a,i,o,l=this,c=l.constructor,d=12,f=+(e=new c(e));if(!e.s)return new c(ui);if(l=new c(l),!l.s){if(e.s<1)throw Error(to+"Infinity");return l}if(l.eq(ui))return l;if(s=c.precision,e.eq(ui))return Kr(l,s);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=SV){for(a=new c(ui),t=Math.ceil(s/fn+4),bn=!1;r%2&&(a=a.times(l),BL(a.d,t)),r=ip(r/2),r!==0;)l=l.times(l),BL(l.d,t);return bn=!0,e.s<0?new c(ui).div(a):Kr(a,s)}}else if(i<0)throw Error(to+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,bn=!1,a=e.times(Vg(l,s+d)),bn=!0,a=AV(a),a.s=i,a};St.toPrecision=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?(r=ns(a),s=sf(a,r<=i.toExpNeg||r>=i.toExpPos)):(Nl(e,1,ap),t===void 0?t=i.rounding:Nl(t,0,8),a=Kr(new i(a),e,t),r=ns(a),s=sf(a,e<=r||r<=i.toExpNeg,e)),s};St.toSignificantDigits=St.tosd=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Nl(e,1,ap),t===void 0?t=s.rounding:Nl(t,0,8)),Kr(new s(r),e,t)};St.toString=St.valueOf=St.val=St.toJSON=St[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ns(e),r=e.constructor;return sf(e,t<=r.toExpNeg||t>=r.toExpPos)};function CV(e,t){var r,s,a,i,o,l,c,d,f=e.constructor,u=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),bn?Kr(t,u):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,a=o,l=c.length),o=Math.ceil(u/fn),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/js|0,c[i]%=js;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,bn?Kr(t,u):t}function Nl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Hu+e)}function cl(e){var t,r,s,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)s=e[t]+"",r=fn-s.length,r&&(i+=Yc(r)),i+=s;o=e[t],s=o+"",r=fn-s.length,r&&(i+=Yc(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var sc=function(){function e(s,a){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*a+o,s[l]=i%js|0,o=i/js|0;return o&&s.unshift(o),s}function t(s,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=a[l]){c=s[l]>a[l]?1:-1;break}return c}function r(s,a,i){for(var o=0;i--;)s[i]-=o,o=s[i]<a[i]?1:0,s[i]=o*js+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,o){var l,c,d,f,u,h,m,v,g,p,x,b,y,j,E,A,C,S,T=s.constructor,O=s.s==a.s?1:-1,_=s.d,N=a.d;if(!s.s)return new T(s);if(!a.s)throw Error(to+"Division by zero");for(c=s.e-a.e,C=N.length,E=_.length,m=new T(O),v=m.d=[],d=0;N[d]==(_[d]||0);)++d;if(N[d]>(_[d]||0)&&--c,i==null?b=i=T.precision:o?b=i+(ns(s)-ns(a))+1:b=i,b<0)return new T(0);if(b=b/fn+2|0,d=0,C==1)for(f=0,N=N[0],b++;(d<E||f)&&b--;d++)y=f*js+(_[d]||0),v[d]=y/N|0,f=y%N|0;else{for(f=js/(N[0]+1)|0,f>1&&(N=e(N,f),_=e(_,f),C=N.length,E=_.length),j=C,g=_.slice(0,C),p=g.length;p<C;)g[p++]=0;S=N.slice(),S.unshift(0),A=N[0],N[1]>=js/2&&++A;do f=0,l=t(N,g,C,p),l<0?(x=g[0],C!=p&&(x=x*js+(g[1]||0)),f=x/A|0,f>1?(f>=js&&(f=js-1),u=e(N,f),h=u.length,p=g.length,l=t(u,g,h,p),l==1&&(f--,r(u,C<h?S:N,h))):(f==0&&(l=f=1),u=N.slice()),h=u.length,h<p&&u.unshift(0),r(g,u,p),l==-1&&(p=g.length,l=t(N,g,C,p),l<1&&(f++,r(g,C<p?S:N,p))),p=g.length):l===0&&(f++,g=[0]),v[d++]=f,l&&g[0]?g[p++]=_[j]||0:(g=[_[j]],p=1);while((j++<E||g[0]!==void 0)&&b--)}return v[0]||v.shift(),m.e=c,Kr(m,o?i+ns(m)+1:i)}}();function AV(e,t){var r,s,a,i,o,l,c=0,d=0,f=e.constructor,u=f.precision;if(ns(e)>16)throw Error(TT+ns(e));if(!e.s)return new f(ui);for(t==null?(bn=!1,l=u):l=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(xu(2,d))/Math.LN10*2+5|0,l+=s,r=a=i=new f(ui),f.precision=l;;){if(a=Kr(a.times(e),l),r=r.times(++c),o=i.plus(sc(a,r,l)),cl(o.d).slice(0,l)===cl(i.d).slice(0,l)){for(;d--;)i=Kr(i.times(i),l);return f.precision=u,t==null?(bn=!0,Kr(i,u)):i}i=o}}function ns(e){for(var t=e.e*fn,r=e.d[0];r>=10;r/=10)t++;return t}function LS(e,t,r){if(t>e.LN10.sd())throw bn=!0,r&&(e.precision=r),Error(to+"LN10 precision limit exceeded");return Kr(new e(e.LN10),t)}function Yc(e){for(var t="";e--;)t+="0";return t}function Vg(e,t){var r,s,a,i,o,l,c,d,f,u=1,h=10,m=e,v=m.d,g=m.constructor,p=g.precision;if(m.s<1)throw Error(to+(m.s?"NaN":"-Infinity"));if(m.eq(ui))return new g(0);if(t==null?(bn=!1,d=p):d=t,m.eq(10))return t==null&&(bn=!0),LS(g,d);if(d+=h,g.precision=d,r=cl(v),s=r.charAt(0),i=ns(m),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)m=m.times(e),r=cl(m.d),s=r.charAt(0),u++;i=ns(m),s>1?(m=new g("0."+r),i++):m=new g(s+"."+r.slice(1))}else return c=LS(g,d+2,p).times(i+""),m=Vg(new g(s+"."+r.slice(1)),d-h).plus(c),g.precision=p,t==null?(bn=!0,Kr(m,p)):m;for(l=o=m=sc(m.minus(ui),m.plus(ui),d),f=Kr(m.times(m),d),a=3;;){if(o=Kr(o.times(f),d),c=l.plus(sc(o,new g(a),d)),cl(c.d).slice(0,d)===cl(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(LS(g,d+2,p).times(i+""))),l=sc(l,new g(u),d),g.precision=p,t==null?(bn=!0,Kr(l,p)):l;l=c,a+=2}}function ML(e,t){var r,s,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,r=r-s-1,e.e=ip(r/fn),e.d=[],s=(r+1)%fn,r<0&&(s+=fn),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=fn;s<a;)e.d.push(+t.slice(s,s+=fn));t=t.slice(s),s=fn-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),bn&&(e.e>k1||e.e<-k1))throw Error(TT+r)}else e.s=0,e.e=0,e.d=[0];return e}function Kr(e,t,r){var s,a,i,o,l,c,d,f,u=e.d;for(o=1,i=u[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=fn,a=t,d=u[f=0];else{if(f=Math.ceil((s+1)/fn),i=u.length,f>=i)return e;for(d=i=u[f],o=1;i>=10;i/=10)o++;s%=fn,a=s-fn+o}if(r!==void 0&&(i=xu(10,o-a-1),l=d/i%10|0,c=t<0||u[f+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(s>0?a>0?d/xu(10,o-a):0:u[f-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return c?(i=ns(e),u.length=1,t=t-i-1,u[0]=xu(10,(fn-t%fn)%fn),e.e=ip(-t/fn)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(s==0?(u.length=f,i=1,f--):(u.length=f+1,i=xu(10,fn-s),u[f]=a>0?(d/xu(10,o-a)%xu(10,a)|0)*i:0),c)for(;;)if(f==0){(u[0]+=i)==js&&(u[0]=1,++e.e);break}else{if(u[f]+=i,u[f]!=js)break;u[f--]=0,i=1}for(s=u.length;u[--s]===0;)u.pop();if(bn&&(e.e>k1||e.e<-k1))throw Error(TT+ns(e));return e}function EV(e,t){var r,s,a,i,o,l,c,d,f,u,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),bn?Kr(t,m):t;if(c=e.d,u=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(f=o<0,f?(r=c,o=-o,l=u.length):(r=u,s=d,l=c.length),a=Math.max(Math.ceil(m/fn),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=u.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=u[a]){f=c[a]<u[a];break}o=0}for(f&&(r=c,c=u,u=r,t.s=-t.s),l=c.length,a=u.length-l;a>0;--a)c[l++]=0;for(a=u.length;a>o;){if(c[--a]<u[a]){for(i=a;i&&c[--i]===0;)c[i]=js-1;--c[i],c[a]+=js}c[a]-=u[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,bn?Kr(t,m):t):new h(0)}function sf(e,t,r){var s,a=ns(e),i=cl(e.d),o=i.length;return t?(r&&(s=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Yc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Yc(-a-1)+i,r&&(s=r-o)>0&&(i+=Yc(s))):a>=o?(i+=Yc(a+1-o),r&&(s=r-a-1)>0&&(i=i+"."+Yc(s))):((s=a+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-o)>0&&(a+1===o&&(i+="."),i+=Yc(s))),e.s<0?"-"+i:i}function BL(e,t){if(e.length>t)return e.length=t,!0}function PV(e){var t,r,s;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Hu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return ML(o,i.toString())}else if(typeof i!="string")throw Error(Hu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,v4e.test(i))ML(o,i);else throw Error(Hu+i)}if(a.prototype=St,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=PV,a.config=a.set=g4e,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return a.config(e),a}function g4e(e){if(!e||typeof e!="object")throw Error(to+"Object expected");var t,r,s,a=["precision",1,ap,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[r=a[t]])!==void 0)if(ip(s)===s&&s>=a[t+1]&&s<=a[t+2])this[r]=s;else throw Error(Hu+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(Hu+r+": "+s);return this}var _T=PV(p4e);ui=new _T(1);const zr=_T;function x4e(e){return w4e(e)||j4e(e)||b4e(e)||y4e()}function y4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b4e(e,t){if(e){if(typeof e=="string")return EA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EA(e,t)}}function j4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function w4e(e){if(Array.isArray(e))return EA(e)}function EA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var N4e=function(t){return t},TV={"@@functional/placeholder":!0},_V=function(t){return t===TV},zL=function(t){return function r(){return arguments.length===0||arguments.length===1&&_V(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},S4e=function e(t,r){return t===1?r:zL(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==TV}).length;return o>=t?r.apply(void 0,a):e(t-o,zL(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=a.map(function(u){return _V(u)?c.shift():u});return r.apply(void 0,x4e(f).concat(c))}))})},zw=function(t){return S4e(t.length,t)},PA=function(t,r){for(var s=[],a=t;a<r;++a)s[a-t]=a;return s},C4e=zw(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),A4e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];if(!r.length)return N4e;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},TA=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},IV=function(t){var r=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,s=t.apply(void 0,i)),s}};function E4e(e){var t;return e===0?t=1:t=Math.floor(new zr(e).abs().log(10).toNumber())+1,t}function P4e(e,t,r){for(var s=new zr(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(r),a++;return i}var T4e=zw(function(e,t,r){var s=+e,a=+t;return s+r*(a-s)}),_4e=zw(function(e,t,r){var s=t-+e;return s=s||1/0,(r-e)/s}),I4e=zw(function(e,t,r){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});const Uw={rangeStep:P4e,getDigitCount:E4e,interpolateNumber:T4e,uninterpolateNumber:_4e,uninterpolateTruncation:I4e};function _A(e){return O4e(e)||D4e(e)||kV(e)||k4e()}function k4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function O4e(e){if(Array.isArray(e))return IA(e)}function Wg(e,t){return $4e(e)||R4e(e,t)||kV(e,t)||L4e()}function L4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kV(e,t){if(e){if(typeof e=="string")return IA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IA(e,t)}}function IA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function R4e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function $4e(e){if(Array.isArray(e))return e}function DV(e){var t=Wg(e,2),r=t[0],s=t[1],a=r,i=s;return r>s&&(a=s,i=r),[a,i]}function OV(e,t,r){if(e.lte(0))return new zr(0);var s=Uw.getDigitCount(e.toNumber()),a=new zr(10).pow(s),i=e.div(a),o=s!==1?.05:.1,l=new zr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new zr(Math.ceil(c))}function F4e(e,t,r){var s=1,a=new zr(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(s=new zr(10).pow(Uw.getDigitCount(e)-1),a=new zr(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new zr(Math.floor(e)))}else e===0?a=new zr(Math.floor((t-1)/2)):r||(a=new zr(Math.floor(e)));var o=Math.floor((t-1)/2),l=A4e(C4e(function(c){return a.add(new zr(c-o).mul(s)).toNumber()}),PA);return l(0,t)}function LV(e,t,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new zr(0),tickMin:new zr(0),tickMax:new zr(0)};var i=OV(new zr(t).sub(e).div(r-1),s,a),o;e<=0&&t>=0?o=new zr(0):(o=new zr(e).add(t).div(2),o=o.sub(new zr(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new zr(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?LV(e,t,r,s,a+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new zr(l).mul(i)),tickMax:o.add(new zr(c).mul(i))})}function M4e(e){var t=Wg(e,2),r=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=DV([r,s]),c=Wg(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var u=f===1/0?[d].concat(_A(PA(0,a-1).map(function(){return 1/0}))):[].concat(_A(PA(0,a-1).map(function(){return-1/0})),[f]);return r>s?TA(u):u}if(d===f)return F4e(d,a,i);var h=LV(d,f,o,i),m=h.step,v=h.tickMin,g=h.tickMax,p=Uw.rangeStep(v,g.add(new zr(.1).mul(m)),m);return r>s?TA(p):p}function B4e(e,t){var r=Wg(e,2),s=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=DV([s,a]),l=Wg(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var f=Math.max(t,2),u=OV(new zr(d).sub(c).div(f-1),i,0),h=[].concat(_A(Uw.rangeStep(new zr(c),new zr(d).sub(new zr(.99).mul(u)),u)),[d]);return s>a?TA(h):h}var z4e=IV(M4e),U4e=IV(B4e),V4e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},D1.apply(this,arguments)}function W4e(e,t){return K4e(e)||G4e(e,t)||H4e(e,t)||q4e()}function q4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H4e(e,t){if(e){if(typeof e=="string")return UL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UL(e,t)}}function UL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function G4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function K4e(e){if(Array.isArray(e))return e}function Y4e(e,t){if(e==null)return{};var r=X4e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function X4e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Q4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VL(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,FV(s.key),s)}}function J4e(e,t,r){return t&&VL(e.prototype,t),r&&VL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z4e(e,t,r){return t=O1(t),ePe(e,RV()?Reflect.construct(t,r||[],O1(e).constructor):t.apply(e,r))}function ePe(e,t){if(t&&(pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tPe(e)}function tPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RV=function(){return!!e})()}function O1(e){return O1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},O1(e)}function rPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kA(e,t)}function kA(e,t){return kA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},kA(e,t)}function $V(e,t,r){return t=FV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FV(e){var t=nPe(e,"string");return pm(t)=="symbol"?t:t+""}function nPe(e,t){if(pm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(pm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vx=function(e){function t(){return Q4e(this,t),Z4e(this,t,arguments)}return rPe(t,e),J4e(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,f=s.xAxis,u=s.yAxis,h=Y4e(s,V4e),m=ar(h,!1);this.props.direction==="x"&&f.type!=="number"&&kd(!1);var v=c.map(function(g){var p=d(g,l),x=p.x,b=p.y,y=p.value,j=p.errorVal;if(!j)return null;var E=[],A,C;if(Array.isArray(j)){var S=W4e(j,2);A=S[0],C=S[1]}else A=C=j;if(i==="vertical"){var T=f.scale,O=b+a,_=O+o,N=O-o,D=T(y-A),I=T(y+C);E.push({x1:I,y1:_,x2:I,y2:N}),E.push({x1:D,y1:O,x2:I,y2:O}),E.push({x1:D,y1:_,x2:D,y2:N})}else if(i==="horizontal"){var R=u.scale,M=x+a,$=M-o,B=M+o,U=R(y-A),q=R(y+C);E.push({x1:$,y1:q,x2:B,y2:q}),E.push({x1:M,y1:U,x2:M,y2:q}),E.push({x1:$,y1:U,x2:B,y2:U})}return ce.createElement(sn,D1({className:"recharts-errorBar",key:"bar-".concat(E.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},m),E.map(function(W){return ce.createElement("line",D1({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return ce.createElement(sn,{className:"recharts-errorBars"},v)}}])}(ce.Component);$V(Vx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});$V(Vx,"displayName","ErrorBar");function qg(e){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(e)}function WL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function du(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WL(Object(r),!0).forEach(function(s){sPe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function sPe(e,t,r){return t=aPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aPe(e){var t=iPe(e,"string");return qg(t)=="symbol"?t:t+""}function iPe(e,t){if(qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(qg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MV=function(t){var r=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=li(r,Mh);if(!o)return null;var l=Mh.defaultProps,c=l!==void 0?du(du({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(s||[]).reduce(function(f,u){var h=u.item,m=u.props,v=m.sectors||m.data||[];return f.concat(v.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):d=(s||[]).map(function(f){var u=f.item,h=u.type.defaultProps,m=h!==void 0?du(du({},h),u.props):{},v=m.dataKey,g=m.name,p=m.legendType,x=m.hide;return{inactive:x,dataKey:v,type:c.iconType||p||"square",color:IT(u),value:g||v,payload:m}}),du(du(du({},c),Mh.getWithHeight(o,a)),{},{payload:d,item:o})};function Hg(e){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(e)}function qL(e){return dPe(e)||cPe(e)||lPe(e)||oPe()}function oPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lPe(e,t){if(e){if(typeof e=="string")return DA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DA(e,t)}}function cPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dPe(e){if(Array.isArray(e))return DA(e)}function DA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function HL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HL(Object(r),!0).forEach(function(s){zh(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function zh(e,t,r){return t=uPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uPe(e){var t=fPe(e,"string");return Hg(t)=="symbol"?t:t+""}function fPe(e,t){if(Hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Hg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wa(e,t,r){return or(e)||or(t)?r:fs(t)?Ki(e,t,r):sr(t)?t(e):r}function Hv(e,t,r,s){var a=u4e(e,function(l){return wa(l,t)});if(r==="number"){var i=a.filter(function(l){return lt(l)||parseFloat(l)});return i.length?[Bw(i),cd(i)]:[1/0,-1/0]}var o=s?a.filter(function(l){return!or(l)}):a;return o.map(function(l){return fs(l)||l instanceof Date?l:""})}var hPe=function(t){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var f=d>0?a[d-1].coordinate:a[l-1].coordinate,u=a[d].coordinate,h=d>=l-1?a[0].coordinate:a[d+1].coordinate,m=void 0;if(_o(u-f)!==_o(h-u)){var v=[];if(_o(h-u)===_o(c[1]-c[0])){m=h;var g=u+c[1]-c[0];v[0]=Math.min(g,(g+f)/2),v[1]=Math.max(g,(g+f)/2)}else{m=f;var p=h+c[1]-c[0];v[0]=Math.min(u,(p+u)/2),v[1]=Math.max(u,(p+u)/2)}var x=[Math.min(u,(m+u)/2),Math.max(u,(m+u)/2)];if(t>x[0]&&t<=x[1]||t>=v[0]&&t<=v[1]){o=a[d].index;break}}else{var b=Math.min(f,h),y=Math.max(f,h);if(t>(b+u)/2&&t<=(y+u)/2){o=a[d].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(s[j].coordinate+s[j+1].coordinate)/2||j>0&&j<l-1&&t>(s[j].coordinate+s[j-1].coordinate)/2&&t<=(s[j].coordinate+s[j+1].coordinate)/2||j===l-1&&t>(s[j].coordinate+s[j-1].coordinate)/2){o=s[j].index;break}return o},IT=function(t){var r,s=t,a=s.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Rn(Rn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},mPe=function(t){var r=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var f=i[l[c]].stackGroups,u=Object.keys(f),h=0,m=u.length;h<m;h++){var v=f[u[h]],g=v.items,p=v.cateAxisId,x=g.filter(function(C){return rc(C.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,y=b!==void 0?Rn(Rn({},b),x[0].props):x[0].props,j=y.barSize,E=y[p];o[E]||(o[E]=[]);var A=or(j)?r:j;o[E].push({item:x[0],stackList:x.slice(1),barSize:or(A)?void 0:nf(A,s,0)})}}return o},pPe=function(t){var r=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=nf(r,a,0,!0),f,u=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,v=o.reduce(function(j,E){return j+E.barSize||0},0);v+=(c-1)*d,v>=a&&(v-=(c-1)*d,d=0),v>=a&&m>0&&(h=!0,m*=.9,v=c*m);var g=(a-v)/2>>0,p={offset:g-d,size:0};f=o.reduce(function(j,E){var A={item:E.item,position:{offset:p.offset+p.size+d,size:h?m:E.barSize}},C=[].concat(qL(j),[A]);return p=C[C.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(S){C.push({item:S,position:p})}),C},u)}else{var x=nf(s,a,0,!0);a-2*x-(c-1)*d<=0&&(d=0);var b=(a-2*x-(c-1)*d)/c;b>1&&(b>>=0);var y=l===+l?Math.min(b,l):b;f=o.reduce(function(j,E,A){var C=[].concat(qL(j),[{item:E.item,position:{offset:x+(b+d)*A+(b-y)/2,size:y}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(S){C.push({item:S,position:C[C.length-1].position})}),C},u)}return f},vPe=function(t,r,s,a){var i=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=MV({children:i,legendWidth:c});if(d){var f=a||{},u=f.width,h=f.height,m=d.align,v=d.verticalAlign,g=d.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&m!=="center"&&lt(t[m]))return Rn(Rn({},t),{},zh({},m,t[m]+(u||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&v!=="middle"&&lt(t[v]))return Rn(Rn({},t),{},zh({},v,t[v]+(h||0)))}return t},gPe=function(t,r,s){return or(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},BV=function(t,r,s,a,i){var o=r.props.children,l=Yi(o,Vx).filter(function(d){return gPe(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,f){var u=wa(f,s);if(or(u))return d;var h=Array.isArray(u)?[Bw(u),cd(u)]:[u,u],m=c.reduce(function(v,g){var p=wa(f,g,0),x=h[0]-Math.abs(Array.isArray(p)?p[0]:p),b=h[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(x,v[0]),Math.max(b,v[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},xPe=function(t,r,s,a,i){var o=r.map(function(l){return BV(t,l,s,i,a)}).filter(function(l){return!or(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},zV=function(t,r,s,a,i){var o=r.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&BV(t,c,d,a)||Hv(t,d,s,i)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,u=d.length;f<u;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},UV=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},VV=function(t,r,s,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===s&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(s),l},Jl=function(t,r,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||s)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?_o(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(u){var h=i?i.indexOf(u):u;return{coordinate:a(h)+d,value:u,offset:d}});return f.filter(function(u){return!Zm(u.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(u,h){return{coordinate:a(u)+d,value:u,index:h,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(u){return{coordinate:a(u)+d,value:u,offset:d}}):a.domain().map(function(u,h){return{coordinate:a(u)+d,value:i?i[u]:u,index:h,offset:d}})},RS=new WeakMap,_y=function(t,r){if(typeof r!="function")return t;RS.has(t)||RS.set(t,new WeakMap);var s=RS.get(t);if(s.has(r))return s.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,a),a},yPe=function(t,r,s){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Fg(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:P1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:qv(),realScaleType:"point"}:i==="category"?{scale:Fg(),realScaleType:"band"}:{scale:P1(),realScaleType:"linear"};if(rf(a)){var c="scale".concat(Ew(a));return{scale:(FL[c]||qv)(),realScaleType:FL[c]?c:"point"}}return sr(a)?{scale:a}:{scale:qv(),realScaleType:"point"}},GL=1e-4,bPe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var s=r.length,a=t.range(),i=Math.min(a[0],a[1])-GL,o=Math.max(a[0],a[1])+GL,l=t(r[0]),c=t(r[s-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[s-1]])}},jPe=function(t,r){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===r)return t[s].position;return null},wPe=function(t,r){if(!r||r.length!==2||!lt(r[0])||!lt(r[1]))return t;var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!lt(t[0])||t[0]<s)&&(i[0]=s),(!lt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},NPe=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0,l=0;l<r;++l){var c=Zm(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=i,t[l][s][1]=i+c,i=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},SPe=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0;o<r;++o){var l=Zm(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=i,t[o][s][1]=i+l,i=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},CPe={sign:NPe,expand:W0e,none:im,silhouette:q0e,wiggle:H0e,positive:SPe},APe=function(t,r,s){var a=r.map(function(l){return l.props.dataKey}),i=CPe[s],o=V0e().keys(a).value(function(l,c){return+wa(l,c,0)}).order(sA).offset(i);return o(t)},EPe=function(t,r,s,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(u,h){var m,v=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Rn(Rn({},h.type.defaultProps),h.props):h.props,g=v.stackId,p=v.hide;if(p)return u;var x=v[s],b=u[x]||{hasStack:!1,stackGroups:{}};if(fs(g)){var y=b.stackGroups[g]||{numericAxisId:s,cateAxisId:a,items:[]};y.items.push(h),b.hasStack=!0,b.stackGroups[g]=y}else b.stackGroups[ep("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[h]};return Rn(Rn({},u),{},zh({},x,b))},c),f={};return Object.keys(d).reduce(function(u,h){var m=d[h];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,p){var x=m.stackGroups[p];return Rn(Rn({},g),{},zh({},p,{numericAxisId:s,cateAxisId:a,items:x.items,stackedData:APe(t,x.items,i)}))},v)}return Rn(Rn({},u),{},zh({},h,m))},f)},PPe=function(t,r){var s=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=s||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var f=z4e(d,i,l);return t.domain([Bw(f),cd(f)]),{niceTicks:f}}if(i&&a==="number"){var u=t.domain(),h=U4e(u,i,l);return{niceTicks:h}}return null};function L1(e){var t=e.axis,r=e.ticks,s=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!or(a[t.dataKey])){var l=a1(r,"value",a[t.dataKey]);if(l)return l.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var c=wa(a,or(o)?t.dataKey:o);return or(c)?null:t.scale(c)}var KL=function(t){var r=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return s[l]?s[l].coordinate+a:null;var c=wa(o,r.dataKey,r.domain[l]);return or(c)?null:r.scale(c)-i/2+a},TPe=function(t){var r=t.numericAxis,s=r.scale.domain();if(r.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},_Pe=function(t,r){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?Rn(Rn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(fs(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},IPe=function(t){return t.reduce(function(r,s){return[Bw(s.concat([r[0]]).filter(lt)),cd(s.concat([r[1]]).filter(lt))]},[1/0,-1/0])},WV=function(t,r,s){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,f){var u=IPe(f.slice(r,s+1));return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},YL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,OA=function(t,r,s){if(sr(t))return t(r,s);if(!Array.isArray(t))return r;var a=[];if(lt(t[0]))a[0]=s?t[0]:Math.min(t[0],r[0]);else if(YL.test(t[0])){var i=+YL.exec(t[0])[1];a[0]=r[0]-i}else sr(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(lt(t[1]))a[1]=s?t[1]:Math.max(t[1],r[1]);else if(XL.test(t[1])){var o=+XL.exec(t[1])[1];a[1]=r[1]+o}else sr(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},R1=function(t,r,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&r&&r.length>=2){for(var i=aT(r,function(u){return u.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],f=i[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},QL=function(t,r,s){return!t||!t.length||mm(t,Ki(s,"type.defaultProps.domain"))?r:t},qV=function(t,r){var s=t.type.defaultProps?Rn(Rn({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,f=s.hide;return Rn(Rn({},ar(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:IT(t),value:wa(r,a),type:c,payload:r,chartType:d,hide:f})};function Gg(e){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gg(e)}function JL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ZL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JL(Object(r),!0).forEach(function(s){kPe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function kPe(e,t,r){return t=DPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DPe(e){var t=OPe(e,"string");return Gg(t)=="symbol"?t:t+""}function OPe(e,t){if(Gg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Gg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $1=Math.PI/180,LPe=function(t){return t*180/Math.PI},Ms=function(t,r,s,a){return{x:t+Math.cos(-$1*a)*s,y:r+Math.sin(-$1*a)*s}},RPe=function(t,r){var s=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-o,2))},$Pe=function(t,r){var s=t.x,a=t.y,i=r.cx,o=r.cy,l=RPe({x:s,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(s-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:LPe(d),angleInRadian:d}},FPe=function(t){var r=t.startAngle,s=t.endAngle,a=Math.floor(r/360),i=Math.floor(s/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:s-o*360}},MPe=function(t,r){var s=r.startAngle,a=r.endAngle,i=Math.floor(s/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},e6=function(t,r){var s=t.x,a=t.y,i=$Pe({x:s,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=FPe(r),u=f.startAngle,h=f.endAngle,m=l,v;if(u<=h){for(;m>h;)m-=360;for(;m<u;)m+=360;v=m>=u&&m<=h}else{for(;m>u;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=u}return v?ZL(ZL({},r),{},{radius:o,angle:MPe(m,r)}):null};function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}var BPe=["offset"];function zPe(e){return qPe(e)||WPe(e)||VPe(e)||UPe()}function UPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VPe(e,t){if(e){if(typeof e=="string")return LA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LA(e,t)}}function WPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qPe(e){if(Array.isArray(e))return LA(e)}function LA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function HPe(e,t){if(e==null)return{};var r=GPe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function GPe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function t6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(r),!0).forEach(function(s){KPe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function KPe(e,t,r){return t=YPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YPe(e){var t=XPe(e,"string");return Kg(t)=="symbol"?t:t+""}function XPe(e,t){if(Kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Kg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yg(){return Yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Yg.apply(this,arguments)}var QPe=function(t){var r=t.value,s=t.formatter,a=or(t.children)?r:t.children;return sr(s)?s(a):a},JPe=function(t,r){var s=_o(r-t),a=Math.min(Math.abs(r-t),360);return s*a},ZPe=function(t,r,s){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,f=c.cy,u=c.innerRadius,h=c.outerRadius,m=c.startAngle,v=c.endAngle,g=c.clockWise,p=(u+h)/2,x=JPe(m,v),b=x>=0?1:-1,y,j;a==="insideStart"?(y=m+b*o,j=g):a==="insideEnd"?(y=v-b*o,j=!g):a==="end"&&(y=v+b*o,j=g),j=x<=0?j:!j;var E=Ms(d,f,p,y),A=Ms(d,f,p,y+(j?1:-1)*359),C="M".concat(E.x,",").concat(E.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(j?0:1,`,
    `).concat(A.x,",").concat(A.y),S=or(t.id)?ep("recharts-radial-line-"):t.id;return ce.createElement("text",Yg({},s,{dominantBaseline:"central",className:xr("recharts-radial-bar-label",l)}),ce.createElement("defs",null,ce.createElement("path",{id:S,d:C})),ce.createElement("textPath",{xlinkHref:"#".concat(S)},r))},eTe=function(t){var r=t.viewBox,s=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,f=i.startAngle,u=i.endAngle,h=(f+u)/2;if(a==="outside"){var m=Ms(o,l,d+s,h),v=m.x,g=m.y;return{x:v,y:g,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var p=(c+d)/2,x=Ms(o,l,p,h),b=x.x,y=x.y;return{x:b,y,textAnchor:"middle",verticalAnchor:"middle"}},tTe=function(t){var r=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,f=o.height,u=f>=0?1:-1,h=u*a,m=u>0?"end":"start",v=u>0?"start":"end",g=d>=0?1:-1,p=g*a,x=g>0?"end":"start",b=g>0?"start":"end";if(i==="top"){var y={x:l+d/2,y:c-u*a,textAnchor:"middle",verticalAnchor:m};return os(os({},y),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var j={x:l+d/2,y:c+f+h,textAnchor:"middle",verticalAnchor:v};return os(os({},j),s?{height:Math.max(s.y+s.height-(c+f),0),width:d}:{})}if(i==="left"){var E={x:l-p,y:c+f/2,textAnchor:x,verticalAnchor:"middle"};return os(os({},E),s?{width:Math.max(E.x-s.x,0),height:f}:{})}if(i==="right"){var A={x:l+d+p,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return os(os({},A),s?{width:Math.max(s.x+s.width-A.x,0),height:f}:{})}var C=s?{width:d,height:f}:{};return i==="insideLeft"?os({x:l+p,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},C):i==="insideRight"?os({x:l+d-p,y:c+f/2,textAnchor:x,verticalAnchor:"middle"},C):i==="insideTop"?os({x:l+d/2,y:c+h,textAnchor:"middle",verticalAnchor:v},C):i==="insideBottom"?os({x:l+d/2,y:c+f-h,textAnchor:"middle",verticalAnchor:m},C):i==="insideTopLeft"?os({x:l+p,y:c+h,textAnchor:b,verticalAnchor:v},C):i==="insideTopRight"?os({x:l+d-p,y:c+h,textAnchor:x,verticalAnchor:v},C):i==="insideBottomLeft"?os({x:l+p,y:c+f-h,textAnchor:b,verticalAnchor:m},C):i==="insideBottomRight"?os({x:l+d-p,y:c+f-h,textAnchor:x,verticalAnchor:m},C):Ym(i)&&(lt(i.x)||ku(i.x))&&(lt(i.y)||ku(i.y))?os({x:l+nf(i.x,d),y:c+nf(i.y,f),textAnchor:"end",verticalAnchor:"end"},C):os({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},C)},rTe=function(t){return"cx"in t&&lt(t.cx)};function ra(e){var t=e.offset,r=t===void 0?5:t,s=HPe(e,BPe),a=os({offset:r},s),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,f=a.className,u=f===void 0?"":f,h=a.textBreakAll;if(!i||or(l)&&or(c)&&!w.isValidElement(d)&&!sr(d))return null;if(w.isValidElement(d))return w.cloneElement(d,a);var m;if(sr(d)){if(m=w.createElement(d,a),w.isValidElement(m))return m}else m=QPe(a);var v=rTe(i),g=ar(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ZPe(a,m,g);var p=v?eTe(a):tTe(a);return ce.createElement(j1,Yg({className:xr("recharts-label",u)},g,p,{breakAll:h}),m)}ra.displayName="Label";var HV=function(t){var r=t.cx,s=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,f=t.outerRadius,u=t.x,h=t.y,m=t.top,v=t.left,g=t.width,p=t.height,x=t.clockWise,b=t.labelViewBox;if(b)return b;if(lt(g)&&lt(p)){if(lt(u)&&lt(h))return{x:u,y:h,width:g,height:p};if(lt(m)&&lt(v))return{x:m,y:v,width:g,height:p}}return lt(u)&&lt(h)?{x:u,y:h,width:0,height:0}:lt(r)&&lt(s)?{cx:r,cy:s,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},nTe=function(t,r){return t?t===!0?ce.createElement(ra,{key:"label-implicit",viewBox:r}):fs(t)?ce.createElement(ra,{key:"label-implicit",viewBox:r,value:t}):w.isValidElement(t)?t.type===ra?w.cloneElement(t,{key:"label-implicit",viewBox:r}):ce.createElement(ra,{key:"label-implicit",content:t,viewBox:r}):sr(t)?ce.createElement(ra,{key:"label-implicit",content:t,viewBox:r}):Ym(t)?ce.createElement(ra,Yg({viewBox:r},t,{key:"label-implicit"})):null:null},sTe=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=HV(t),o=Yi(a,ra).map(function(c,d){return w.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!s)return o;var l=nTe(t.label,r||i);return[l].concat(zPe(o))};ra.parseViewBox=HV;ra.renderCallByParent=sTe;function aTe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var iTe=aTe;const oTe=kr(iTe);function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}var lTe=["valueAccessor"],cTe=["data","dataKey","clockWise","id","textBreakAll"];function dTe(e){return mTe(e)||hTe(e)||fTe(e)||uTe()}function uTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fTe(e,t){if(e){if(typeof e=="string")return RA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RA(e,t)}}function hTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mTe(e){if(Array.isArray(e))return RA(e)}function RA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},F1.apply(this,arguments)}function r6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function n6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r6(Object(r),!0).forEach(function(s){pTe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function pTe(e,t,r){return t=vTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vTe(e){var t=gTe(e,"string");return Xg(t)=="symbol"?t:t+""}function gTe(e,t){if(Xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Xg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s6(e,t){if(e==null)return{};var r=xTe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function xTe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var yTe=function(t){return Array.isArray(t.value)?oTe(t.value):t.value};function ac(e){var t=e.valueAccessor,r=t===void 0?yTe:t,s=s6(e,lTe),a=s.data,i=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=s6(s,cTe);return!a||!a.length?null:ce.createElement(sn,{className:"recharts-label-list"},a.map(function(f,u){var h=or(i)?r(f,u):wa(f&&f.payload,i),m=or(l)?{}:{id:"".concat(l,"-").concat(u)};return ce.createElement(ra,F1({},ar(f,!0),d,m,{parentViewBox:f.parentViewBox,value:h,textBreakAll:c,viewBox:ra.parseViewBox(or(o)?f:n6(n6({},f),{},{clockWise:o})),key:"label-".concat(u),index:u}))}))}ac.displayName="LabelList";function bTe(e,t){return e?e===!0?ce.createElement(ac,{key:"labelList-implicit",data:t}):ce.isValidElement(e)||sr(e)?ce.createElement(ac,{key:"labelList-implicit",data:t,content:e}):Ym(e)?ce.createElement(ac,F1({data:t},e,{key:"labelList-implicit"})):null:null}function jTe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=Yi(s,ac).map(function(o,l){return w.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=bTe(e.label,t);return[i].concat(dTe(a))}ac.renderCallByParent=jTe;function Qg(e){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}function $A(){return $A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$A.apply(this,arguments)}function a6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function i6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(r),!0).forEach(function(s){wTe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function wTe(e,t,r){return t=NTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NTe(e){var t=STe(e,"string");return Qg(t)=="symbol"?t:t+""}function STe(e,t){if(Qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Qg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CTe=function(t,r){var s=_o(r-t),a=Math.min(Math.abs(r-t),359.999);return s*a},Iy=function(t){var r=t.cx,s=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,f=c*(l?1:-1)+a,u=Math.asin(c/f)/$1,h=d?i:i+o*u,m=Ms(r,s,f,h),v=Ms(r,s,a,h),g=d?i-o*u:i,p=Ms(r,s,f*Math.cos(u*$1),g);return{center:m,circleTangency:v,lineTangency:p,theta:u}},GV=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=CTe(o,l),d=o+c,f=Ms(r,s,i,o),u=Ms(r,s,i,d),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(a>0){var m=Ms(r,s,a,o),v=Ms(r,s,a,d);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(s," Z");return h},ATe=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,f=t.endAngle,u=_o(f-d),h=Iy({cx:r,cy:s,radius:i,angle:d,sign:u,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,v=h.lineTangency,g=h.theta,p=Iy({cx:r,cy:s,radius:i,angle:f,sign:-u,cornerRadius:o,cornerIsExternal:c}),x=p.circleTangency,b=p.lineTangency,y=p.theta,j=c?Math.abs(d-f):Math.abs(d-f)-g-y;if(j<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):GV({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:f});var E="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var A=Iy({cx:r,cy:s,radius:a,angle:d,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=A.circleTangency,S=A.lineTangency,T=A.theta,O=Iy({cx:r,cy:s,radius:a,angle:f,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=O.circleTangency,N=O.lineTangency,D=O.theta,I=c?Math.abs(d-f):Math.abs(d-f)-T-D;if(I<0&&o===0)return"".concat(E,"L").concat(r,",").concat(s,"Z");E+="L".concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(u>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else E+="L".concat(r,",").concat(s,"Z");return E},ETe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},KV=function(t){var r=i6(i6({},ETe),t),s=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,f=r.startAngle,u=r.endAngle,h=r.className;if(o<i||f===u)return null;var m=xr("recharts-sector",h),v=o-i,g=nf(l,v,0,!0),p;return g>0&&Math.abs(f-u)<360?p=ATe({cx:s,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:u}):p=GV({cx:s,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:u}),ce.createElement("path",$A({},ar(r,!0),{className:m,d:p,role:"img"}))};function Jg(e){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(e)}function FA(){return FA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},FA.apply(this,arguments)}function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function l6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(s){PTe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function PTe(e,t,r){return t=TTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TTe(e){var t=_Te(e,"string");return Jg(t)=="symbol"?t:t+""}function _Te(e,t){if(Jg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Jg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c6={curveBasisClosed:k0e,curveBasisOpen:D0e,curveBasis:I0e,curveBumpX:g0e,curveBumpY:x0e,curveLinearClosed:O0e,curveLinear:Tw,curveMonotoneX:L0e,curveMonotoneY:R0e,curveNatural:$0e,curveStep:F0e,curveStepAfter:B0e,curveStepBefore:M0e},ky=function(t){return t.x===+t.x&&t.y===+t.y},mv=function(t){return t.x},pv=function(t){return t.y},ITe=function(t,r){if(sr(t))return t;var s="curve".concat(Ew(t));return(s==="curveMonotone"||s==="curveBump")&&r?c6["".concat(s).concat(r==="vertical"?"Y":"X")]:c6[s]||Tw},kTe=function(t){var r=t.type,s=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,f=ITe(s,l),u=d?i.filter(function(g){return ky(g)}):i,h;if(Array.isArray(o)){var m=d?o.filter(function(g){return ky(g)}):o,v=u.map(function(g,p){return l6(l6({},g),{},{base:m[p]})});return l==="vertical"?h=wy().y(pv).x1(mv).x0(function(g){return g.base.x}):h=wy().x(mv).y1(pv).y0(function(g){return g.base.y}),h.defined(ky).curve(f),h(v)}return l==="vertical"&&lt(o)?h=wy().y(pv).x1(mv).x0(o):lt(o)?h=wy().x(mv).y1(pv).y0(o):h=Kz().x(mv).y(pv),h.defined(ky).curve(f),h(u)},Uh=function(t){var r=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var o=s&&s.length?kTe(t):a;return w.createElement("path",FA({},ar(t,!1),i1(t),{className:xr("recharts-curve",r),d:o,ref:i}))},DTe=Object.getOwnPropertyNames,OTe=Object.getOwnPropertySymbols,LTe=Object.prototype.hasOwnProperty;function d6(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function Dy(e){return function(r,s,a){if(!r||!s||typeof r!="object"||typeof s!="object")return e(r,s,a);var i=a.cache,o=i.get(r),l=i.get(s);if(o&&l)return o===s&&l===r;i.set(r,s),i.set(s,r);var c=e(r,s,a);return i.delete(r),i.delete(s),c}}function u6(e){return DTe(e).concat(OTe(e))}var RTe=Object.hasOwn||function(e,t){return LTe.call(e,t)};function wf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var $Te="__v",FTe="__o",MTe="_owner",f6=Object.getOwnPropertyDescriptor,h6=Object.keys;function BTe(e,t,r){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function zTe(e,t){return wf(e.getTime(),t.getTime())}function UTe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function VTe(e,t){return e===t}function m6(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=t.entries(),f=!1,u=0;(l=d.next())&&!l.done;){if(a[u]){u++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,u,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){f=a[u]=!0;break}u++}if(!f)return!1;c++}return!0}var WTe=wf;function qTe(e,t,r){var s=h6(e),a=s.length;if(h6(t).length!==a)return!1;for(;a-- >0;)if(!YV(e,t,r,s[a]))return!1;return!0}function vv(e,t,r){var s=u6(e),a=s.length;if(u6(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=s[a],!YV(e,t,r,i)||(o=f6(e,i),l=f6(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function HTe(e,t){return wf(e.valueOf(),t.valueOf())}function GTe(e,t){return e.source===t.source&&e.flags===t.flags}function p6(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1}return!0}function KTe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function YTe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function YV(e,t,r,s){return(s===MTe||s===FTe||s===$Te)&&(e.$$typeof||t.$$typeof)?!0:RTe(t,s)&&r.equals(e[s],t[s],s,s,e,t,r)}var XTe="[object Arguments]",QTe="[object Boolean]",JTe="[object Date]",ZTe="[object Error]",e3e="[object Map]",t3e="[object Number]",r3e="[object Object]",n3e="[object RegExp]",s3e="[object Set]",a3e="[object String]",i3e="[object URL]",o3e=Array.isArray,v6=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,g6=Object.assign,l3e=Object.prototype.toString.call.bind(Object.prototype.toString);function c3e(e){var t=e.areArraysEqual,r=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,f=e.areSetsEqual,u=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(v,g,p){if(v===g)return!0;if(v==null||g==null)return!1;var x=typeof v;if(x!==typeof g)return!1;if(x!=="object")return x==="number"?o(v,g,p):x==="function"?a(v,g,p):!1;var b=v.constructor;if(b!==g.constructor)return!1;if(b===Object)return l(v,g,p);if(o3e(v))return t(v,g,p);if(v6!=null&&v6(v))return u(v,g,p);if(b===Date)return r(v,g,p);if(b===RegExp)return d(v,g,p);if(b===Map)return i(v,g,p);if(b===Set)return f(v,g,p);var y=l3e(v);return y===JTe?r(v,g,p):y===n3e?d(v,g,p):y===e3e?i(v,g,p):y===s3e?f(v,g,p):y===r3e?typeof v.then!="function"&&typeof g.then!="function"&&l(v,g,p):y===i3e?h(v,g,p):y===ZTe?s(v,g,p):y===XTe?l(v,g,p):y===QTe||y===t3e||y===a3e?c(v,g,p):!1}}function d3e(e){var t=e.circular,r=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?vv:BTe,areDatesEqual:zTe,areErrorsEqual:UTe,areFunctionsEqual:VTe,areMapsEqual:s?d6(m6,vv):m6,areNumbersEqual:WTe,areObjectsEqual:s?vv:qTe,arePrimitiveWrappersEqual:HTe,areRegExpsEqual:GTe,areSetsEqual:s?d6(p6,vv):p6,areTypedArraysEqual:s?vv:KTe,areUrlsEqual:YTe};if(r&&(a=g6({},a,r(a))),t){var i=Dy(a.areArraysEqual),o=Dy(a.areMapsEqual),l=Dy(a.areObjectsEqual),c=Dy(a.areSetsEqual);a=g6({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function u3e(e){return function(t,r,s,a,i,o,l){return e(t,r,l)}}function f3e(e){var t=e.circular,r=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,d){var f=s(),u=f.cache,h=u===void 0?t?new WeakMap:void 0:u,m=f.meta;return r(c,d,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,o)}}var h3e=Kd();Kd({strict:!0});Kd({circular:!0});Kd({circular:!0,strict:!0});Kd({createInternalComparator:function(){return wf}});Kd({strict:!0,createInternalComparator:function(){return wf}});Kd({circular:!0,createInternalComparator:function(){return wf}});Kd({circular:!0,createInternalComparator:function(){return wf},strict:!0});function Kd(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=d3e(e),c=c3e(l),d=s?s(c):u3e(c);return f3e({circular:r,comparator:c,createState:a,equals:d,strict:o})}function m3e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function x6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):m3e(a)};requestAnimationFrame(s)}function MA(e){"@babel/helpers - typeof";return MA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MA(e)}function p3e(e){return y3e(e)||x3e(e)||g3e(e)||v3e()}function v3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g3e(e,t){if(e){if(typeof e=="string")return y6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y6(e,t)}}function y6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function x3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y3e(e){if(Array.isArray(e))return e}function b3e(){var e={},t=function(){return null},r=!1,s=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=p3e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){x6(a.bind(null,d),c);return}a(c),x6(a.bind(null,d));return}MA(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Zg(e){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zg(e)}function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function j6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(s){XV(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function XV(e,t,r){return t=j3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j3e(e){var t=w3e(e,"string");return Zg(t)==="symbol"?t:String(t)}function w3e(e,t){if(Zg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Zg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N3e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},S3e=function(t){return t},C3e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Gv=function(t,r){return Object.keys(r).reduce(function(s,a){return j6(j6({},s),{},XV({},a,t(a,r[a])))},{})},w6=function(t,r,s){return t.map(function(a){return"".concat(C3e(a)," ").concat(r,"ms ").concat(s)}).join(",")};function A3e(e,t){return T3e(e)||P3e(e,t)||QV(e,t)||E3e()}function E3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function T3e(e){if(Array.isArray(e))return e}function _3e(e){return D3e(e)||k3e(e)||QV(e)||I3e()}function I3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QV(e,t){if(e){if(typeof e=="string")return BA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BA(e,t)}}function k3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D3e(e){if(Array.isArray(e))return BA(e)}function BA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var M1=1e-4,JV=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},ZV=function(t,r){return t.map(function(s,a){return s*Math.pow(r,a)}).reduce(function(s,a){return s+a})},N6=function(t,r){return function(s){var a=JV(t,r);return ZV(a,s)}},O3e=function(t,r){return function(s){var a=JV(t,r),i=[].concat(_3e(a.map(function(o,l){return o*l}).slice(1)),[0]);return ZV(i,s)}},S6=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),f=A3e(d,4);a=f[0],i=f[1],o=f[2],l=f[3]}}}var u=N6(a,o),h=N6(i,l),m=O3e(a,o),v=function(x){return x>1?1:x<0?0:x},g=function(x){for(var b=x>1?1:x,y=b,j=0;j<8;++j){var E=u(y)-b,A=m(y);if(Math.abs(E-b)<M1||A<M1)return h(y);y=v(y-E/A)}return h(y)};return g.isStepper=!1,g},L3e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,s=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(f,u,h){var m=-(f-u)*s,v=h*i,g=h+(m-v)*l/1e3,p=h*l/1e3+f;return Math.abs(p-u)<M1&&Math.abs(g)<M1?[u,0]:[p,g]};return c.isStepper=!0,c.dt=l,c},R3e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return S6(a);case"spring":return L3e();default:if(a.split("(")[0]==="cubic-bezier")return S6(a)}return typeof a=="function"?a:null};function ex(e){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ex(e)}function C6(e){return M3e(e)||F3e(e)||eW(e)||$3e()}function $3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function M3e(e){if(Array.isArray(e))return UA(e)}function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(r),!0).forEach(function(s){zA(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function zA(e,t,r){return t=B3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B3e(e){var t=z3e(e,"string");return ex(t)==="symbol"?t:String(t)}function z3e(e,t){if(ex(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(ex(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U3e(e,t){return q3e(e)||W3e(e,t)||eW(e,t)||V3e()}function V3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eW(e,t){if(e){if(typeof e=="string")return UA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UA(e,t)}}function UA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function W3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function q3e(e){if(Array.isArray(e))return e}var B1=function(t,r,s){return t+(r-t)*s},VA=function(t){var r=t.from,s=t.to;return r!==s},H3e=function e(t,r,s){var a=Gv(function(i,o){if(VA(o)){var l=t(o.from,o.to,o.velocity),c=U3e(l,2),d=c[0],f=c[1];return Os(Os({},o),{},{from:d,velocity:f})}return o},r);return s<1?Gv(function(i,o){return VA(o)?Os(Os({},o),{},{velocity:B1(o.velocity,a[i].velocity,s),from:B1(o.from,a[i].from,s)}):o},r):e(t,a,s-1)};const G3e=function(e,t,r,s,a){var i=N3e(e,t),o=i.reduce(function(p,x){return Os(Os({},p),{},zA({},x,[e[x],t[x]]))},{}),l=i.reduce(function(p,x){return Os(Os({},p),{},zA({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,d,f,u=function(){return null},h=function(){return Gv(function(x,b){return b.from},l)},m=function(){return!Object.values(l).filter(VA).length},v=function(x){d||(d=x);var b=x-d,y=b/r.dt;l=H3e(r,l,y),a(Os(Os(Os({},e),t),h())),d=x,m()||(c=requestAnimationFrame(u))},g=function(x){f||(f=x);var b=(x-f)/s,y=Gv(function(E,A){return B1.apply(void 0,C6(A).concat([r(b)]))},o);if(a(Os(Os(Os({},e),t),y)),b<1)c=requestAnimationFrame(u);else{var j=Gv(function(E,A){return B1.apply(void 0,C6(A).concat([r(1)]))},o);a(Os(Os(Os({},e),t),j))}};return u=r.isStepper?v:g,function(){return requestAnimationFrame(u),function(){cancelAnimationFrame(c)}}};function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}var K3e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Y3e(e,t){if(e==null)return{};var r=X3e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function X3e(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function $S(e){return e_e(e)||Z3e(e)||J3e(e)||Q3e()}function Q3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J3e(e,t){if(e){if(typeof e=="string")return WA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WA(e,t)}}function Z3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e_e(e){if(Array.isArray(e))return WA(e)}function WA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function E6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E6(Object(r),!0).forEach(function(s){Sv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Sv(e,t,r){return t=tW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,tW(s.key),s)}}function r_e(e,t,r){return t&&P6(e.prototype,t),r&&P6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tW(e){var t=n_e(e,"string");return vm(t)==="symbol"?t:String(t)}function n_e(e,t){if(vm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(vm(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qA(e,t)}function qA(e,t){return qA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},qA(e,t)}function a_e(e){var t=i_e();return function(){var s=z1(e),a;if(t){var i=z1(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return HA(this,a)}}function HA(e,t){if(t&&(vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GA(e)}function GA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z1(e){return z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z1(e)}var Vw=function(e){s_e(r,e);var t=a_e(r);function r(s,a){var i;t_e(this,r),i=t.call(this,s,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,u=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(GA(i)),i.changeStyle=i.changeStyle.bind(GA(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:f}),HA(i);if(u&&u.length)i.state={style:u[0].style};else if(d){if(typeof h=="function")return i.state={style:d},HA(i);i.state={style:c?Sv({},c,d):d}}else i.state={style:{}};return i}return r_e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,f=i.to,u=i.from,h=this.state.style;if(l){if(!o){var m={style:c?Sv({},c,f):f};this.state&&h&&(c&&h[c]!==f||!c&&h!==f)&&this.setState(m);return}if(!(h3e(a.to,f)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||d?u:a.to;if(this.state&&h){var p={style:c?Sv({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(p)}this.runAnimation(po(po({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,f=a.begin,u=a.onAnimationEnd,h=a.onAnimationStart,m=G3e(o,l,R3e(d),c,this.changeStyle),v=function(){i.stopJSAnimation=m()};this.manager.start([h,f,v,c,u])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],f=d.style,u=d.duration,h=u===void 0?0:u,m=function(g,p,x){if(x===0)return g;var b=p.duration,y=p.easing,j=y===void 0?"ease":y,E=p.style,A=p.properties,C=p.onAnimationEnd,S=x>0?o[x-1]:p,T=A||Object.keys(E);if(typeof j=="function"||j==="spring")return[].concat($S(g),[i.runJSAnimation.bind(i,{from:S.style,to:E,duration:b,easing:j}),b]);var O=w6(T,b,j),_=po(po(po({},S.style),E),{},{transition:O});return[].concat($S(g),[_,b,C]).filter(S3e)};return this.manager.start([c].concat($S(o.reduce(m,[f,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=b3e());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,f=a.onAnimationStart,u=a.onAnimationEnd,h=a.steps,m=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=l?Sv({},l,c):c,p=w6(Object.keys(g),o,d);v.start([f,i,po(po({},g),{},{transition:p}),o,u])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Y3e(a,K3e),d=w.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||d===0||o<=0)return i;var u=function(m){var v=m.props,g=v.style,p=g===void 0?{}:g,x=v.className,b=w.cloneElement(m,po(po({},c),{},{style:po(po({},p),f),className:x}));return b};return d===1?u(w.Children.only(i)):ce.createElement("div",null,w.Children.map(i,function(h){return u(h)}))}}]),r}(w.PureComponent);Vw.displayName="Animate";Vw.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Vw.propTypes={from:Tt.oneOfType([Tt.object,Tt.string]),to:Tt.oneOfType([Tt.object,Tt.string]),attributeName:Tt.string,duration:Tt.number,begin:Tt.number,easing:Tt.oneOfType([Tt.string,Tt.func]),steps:Tt.arrayOf(Tt.shape({duration:Tt.number.isRequired,style:Tt.object.isRequired,easing:Tt.oneOfType([Tt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Tt.func]),properties:Tt.arrayOf("string"),onAnimationEnd:Tt.func})),children:Tt.oneOfType([Tt.node,Tt.func]),isActive:Tt.bool,canBegin:Tt.bool,onAnimationEnd:Tt.func,shouldReAnimate:Tt.bool,onAnimationStart:Tt.func,onAnimationReStart:Tt.func};const af=Vw;function tx(e){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(e)}function U1(){return U1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},U1.apply(this,arguments)}function o_e(e,t){return u_e(e)||d_e(e,t)||c_e(e,t)||l_e()}function l_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c_e(e,t){if(e){if(typeof e=="string")return T6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T6(e,t)}}function T6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function d_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function u_e(e){if(Array.isArray(e))return e}function _6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function I6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_6(Object(r),!0).forEach(function(s){f_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function f_e(e,t,r){return t=h_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h_e(e){var t=m_e(e,"string");return tx(t)=="symbol"?t:t+""}function m_e(e,t){if(tx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(tx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k6=function(t,r,s,a,i){var o=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,f;if(o>0&&i instanceof Array){for(var u=[0,0,0,0],h=0,m=4;h<m;h++)u[h]=i[h]>o?o:i[h];f="M".concat(t,",").concat(r+l*u[0]),u[0]>0&&(f+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(d,",").concat(t+c*u[0],",").concat(r)),f+="L ".concat(t+s-c*u[1],",").concat(r),u[1]>0&&(f+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(r+l*u[1])),f+="L ".concat(t+s,",").concat(r+a-l*u[2]),u[2]>0&&(f+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(d,`,
        `).concat(t+s-c*u[2],",").concat(r+a)),f+="L ".concat(t+c*u[3],",").concat(r+a),u[3]>0&&(f+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+a-l*u[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);f="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+s-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s,",").concat(r+l*v,`
            L `).concat(t+s,",").concat(r+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s-c*v,",").concat(r+a,`
            L `).concat(t+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(r+a-l*v," Z")}else f="M ".concat(t,",").concat(r," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return f},p_e=function(t,r){if(!t||!r)return!1;var s=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),f=Math.max(i,i+l),u=Math.min(o,o+c),h=Math.max(o,o+c);return s>=d&&s<=f&&a>=u&&a<=h}return!1},v_e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kT=function(t){var r=I6(I6({},v_e),t),s=w.useRef(),a=w.useState(-1),i=o_e(a,2),o=i[0],l=i[1];w.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var j=s.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,d=r.y,f=r.width,u=r.height,h=r.radius,m=r.className,v=r.animationEasing,g=r.animationDuration,p=r.animationBegin,x=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||u!==+u||f===0||u===0)return null;var y=xr("recharts-rectangle",m);return b?ce.createElement(af,{canBegin:o>0,from:{width:f,height:u,x:c,y:d},to:{width:f,height:u,x:c,y:d},duration:g,animationEasing:v,isActive:b},function(j){var E=j.width,A=j.height,C=j.x,S=j.y;return ce.createElement(af,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,isActive:x,easing:v},ce.createElement("path",U1({},ar(r,!0),{className:y,d:k6(C,S,E,A,h),ref:s})))}):ce.createElement("path",U1({},ar(r,!0),{className:y,d:k6(c,d,f,u,h)}))};function KA(){return KA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},KA.apply(this,arguments)}var Ww=function(t){var r=t.cx,s=t.cy,a=t.r,i=t.className,o=xr("recharts-dot",i);return r===+r&&s===+s&&a===+a?w.createElement("circle",KA({},ar(t,!1),i1(t),{className:o,cx:r,cy:s,r:a})):null};function rx(e){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rx(e)}var g_e=["x","y","top","left","width","height","className"];function YA(){return YA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},YA.apply(this,arguments)}function D6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function x_e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D6(Object(r),!0).forEach(function(s){y_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function y_e(e,t,r){return t=b_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b_e(e){var t=j_e(e,"string");return rx(t)=="symbol"?t:t+""}function j_e(e,t){if(rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(rx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w_e(e,t){if(e==null)return{};var r=N_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function N_e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var S_e=function(t,r,s,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(s)},C_e=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,f=t.width,u=f===void 0?0:f,h=t.height,m=h===void 0?0:h,v=t.className,g=w_e(t,g_e),p=x_e({x:s,y:i,top:l,left:d,width:u,height:m},g);return!lt(s)||!lt(i)||!lt(u)||!lt(m)||!lt(l)||!lt(d)?null:ce.createElement("path",YA({},ar(p,!0),{className:xr("recharts-cross",v),d:S_e(s,i,u,m,l,d)}))},A_e=xU,E_e=A_e(Object.getPrototypeOf,Object),P_e=E_e,T_e=bc,__e=P_e,I_e=jc,k_e="[object Object]",D_e=Function.prototype,O_e=Object.prototype,rW=D_e.toString,L_e=O_e.hasOwnProperty,R_e=rW.call(Object);function $_e(e){if(!I_e(e)||T_e(e)!=k_e)return!1;var t=__e(e);if(t===null)return!0;var r=L_e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&rW.call(r)==R_e}var F_e=$_e;const M_e=kr(F_e);var B_e=bc,z_e=jc,U_e="[object Boolean]";function V_e(e){return e===!0||e===!1||z_e(e)&&B_e(e)==U_e}var W_e=V_e;const q_e=kr(W_e);function nx(e){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}function V1(){return V1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},V1.apply(this,arguments)}function H_e(e,t){return X_e(e)||Y_e(e,t)||K_e(e,t)||G_e()}function G_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K_e(e,t){if(e){if(typeof e=="string")return O6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O6(e,t)}}function O6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Y_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function X_e(e){if(Array.isArray(e))return e}function L6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function R6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L6(Object(r),!0).forEach(function(s){Q_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Q_e(e,t,r){return t=J_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J_e(e){var t=Z_e(e,"string");return nx(t)=="symbol"?t:t+""}function Z_e(e,t){if(nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(nx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $6=function(t,r,s,a,i){var o=s-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+s,",").concat(r),l+="L ".concat(t+s-o/2,",").concat(r+i),l+="L ".concat(t+s-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},eIe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tIe=function(t){var r=R6(R6({},eIe),t),s=w.useRef(),a=w.useState(-1),i=H_e(a,2),o=i[0],l=i[1];w.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var y=s.current.getTotalLength();y&&l(y)}catch{}},[]);var c=r.x,d=r.y,f=r.upperWidth,u=r.lowerWidth,h=r.height,m=r.className,v=r.animationEasing,g=r.animationDuration,p=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||u!==+u||h!==+h||f===0&&u===0||h===0)return null;var b=xr("recharts-trapezoid",m);return x?ce.createElement(af,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:f,lowerWidth:u,height:h,x:c,y:d},duration:g,animationEasing:v,isActive:x},function(y){var j=y.upperWidth,E=y.lowerWidth,A=y.height,C=y.x,S=y.y;return ce.createElement(af,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,easing:v},ce.createElement("path",V1({},ar(r,!0),{className:b,d:$6(C,S,j,E,A),ref:s})))}):ce.createElement("g",null,ce.createElement("path",V1({},ar(r,!0),{className:b,d:$6(c,d,f,u,h)})))},rIe=["option","shapeType","propTransformer","activeClassName","isActive"];function sx(e){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(e)}function nIe(e,t){if(e==null)return{};var r=sIe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function sIe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function F6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function W1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F6(Object(r),!0).forEach(function(s){aIe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function aIe(e,t,r){return t=iIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iIe(e){var t=oIe(e,"string");return sx(t)=="symbol"?t:t+""}function oIe(e,t){if(sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(sx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lIe(e,t){return W1(W1({},t),e)}function cIe(e,t){return e==="symbols"}function M6(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ce.createElement(kT,r);case"trapezoid":return ce.createElement(tIe,r);case"sector":return ce.createElement(KV,r);case"symbols":if(cIe(t))return ce.createElement(QP,r);break;default:return null}}function dIe(e){return w.isValidElement(e)?e.props:e}function uIe(e){var t=e.option,r=e.shapeType,s=e.propTransformer,a=s===void 0?lIe:s,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=nIe(e,rIe),d;if(w.isValidElement(t))d=w.cloneElement(t,W1(W1({},c),dIe(t)));else if(sr(t))d=t(c);else if(M_e(t)&&!q_e(t)){var f=a(t,c);d=ce.createElement(M6,{shapeType:r,elementProps:f})}else{var u=c;d=ce.createElement(M6,{shapeType:r,elementProps:u})}return l?ce.createElement(sn,{className:o},d):d}function qw(e,t){return t!=null&&"trapezoids"in e.props}function Hw(e,t){return t!=null&&"sectors"in e.props}function ax(e,t){return t!=null&&"points"in e.props}function fIe(e,t){var r,s,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function hIe(e,t){var r=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return r&&s}function mIe(e,t){var r=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return r&&s&&a}function pIe(e,t){var r;return qw(e,t)?r=fIe:Hw(e,t)?r=hIe:ax(e,t)&&(r=mIe),r}function vIe(e,t){var r;return qw(e,t)?r="trapezoids":Hw(e,t)?r="sectors":ax(e,t)&&(r="points"),r}function gIe(e,t){if(qw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Hw(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return ax(e,t)?t.payload:{}}function xIe(e){var t=e.activeTooltipItem,r=e.graphicalItem,s=e.itemData,a=vIe(r,t),i=gIe(r,t),o=s.filter(function(c,d){var f=mm(i,c),u=r.props[a].filter(function(v){var g=pIe(r,t);return g(v,t)}),h=r.props[a].indexOf(u[u.length-1]),m=d===h;return f&&m}),l=s.indexOf(o[o.length-1]);return l}var yIe=Math.ceil,bIe=Math.max;function jIe(e,t,r,s){for(var a=-1,i=bIe(yIe((t-e)/(r||1)),0),o=Array(i);i--;)o[s?i:++a]=e,e+=r;return o}var wIe=jIe,NIe=$U,B6=1/0,SIe=17976931348623157e292;function CIe(e){if(!e)return e===0?e:0;if(e=NIe(e),e===B6||e===-B6){var t=e<0?-1:1;return t*SIe}return e===e?e:0}var nW=CIe,AIe=wIe,EIe=Dw,FS=nW;function PIe(e){return function(t,r,s){return s&&typeof s!="number"&&EIe(t,r,s)&&(r=s=void 0),t=FS(t),r===void 0?(r=t,t=0):r=FS(r),s=s===void 0?t<r?1:-1:FS(s),AIe(t,r,s,e)}}var TIe=PIe,_Ie=TIe,IIe=_Ie(),kIe=IIe;const q1=kr(kIe);function ix(e){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ix(e)}function z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function U6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z6(Object(r),!0).forEach(function(s){sW(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function sW(e,t,r){return t=DIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DIe(e){var t=OIe(e,"string");return ix(t)=="symbol"?t:t+""}function OIe(e,t){if(ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(ix(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LIe=["Webkit","Moz","O","ms"],RIe=function(t,r){if(!t)return null;var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=LIe.reduce(function(i,o){return U6(U6({},i),{},sW({},o+s,r))},{});return a[t]=r,a};function gm(e){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},H1.apply(this,arguments)}function V6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function MS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V6(Object(r),!0).forEach(function(s){ii(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function $Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,iW(s.key),s)}}function FIe(e,t,r){return t&&W6(e.prototype,t),r&&W6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MIe(e,t,r){return t=G1(t),BIe(e,aW()?Reflect.construct(t,r||[],G1(e).constructor):t.apply(e,r))}function BIe(e,t){if(t&&(gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zIe(e)}function zIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aW=function(){return!!e})()}function G1(e){return G1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G1(e)}function UIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XA(e,t)}function XA(e,t){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},XA(e,t)}function ii(e,t,r){return t=iW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iW(e){var t=VIe(e,"string");return gm(t)=="symbol"?t:t+""}function VIe(e,t){if(gm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(gm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WIe=function(t){var r=t.data,s=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=qv().domain(q1(0,c)).range([i,i+o-l]),f=d.domain().map(function(u){return d(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:f}},q6=function(t){return t.changedTouches&&!!t.changedTouches.length},xm=function(e){function t(r){var s;return $Ie(this,t),s=MIe(this,t,[r]),ii(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),ii(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),ii(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),s.detachDragEndListener()}),ii(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),ii(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),ii(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),ii(s,"handleSlideDragStart",function(a){var i=q6(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return UIe(t,e),FIe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,u=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,u),v=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:v===f?f:v-v%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=wa(i[s],l,s);return sr(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,f=c.width,u=c.travellerWidth,h=c.startIndex,m=c.endIndex,v=c.onChange,g=s.pageX-i;g>0?g=Math.min(g,d+f-u-l,d+f-u-o):g<0&&(g=Math.max(g,d-o,d-l));var p=this.getIndex({startX:o+g,endX:l+g});(p.startIndex!==h||p.endIndex!==m)&&v&&v(p),this.setState({startX:o+g,endX:l+g,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=q6(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],f=this.props,u=f.x,h=f.width,m=f.travellerWidth,v=f.onChange,g=f.gap,p=f.data,x={startX:this.state.startX,endX:this.state.endX},b=s.pageX-i;b>0?b=Math.min(b,u+h-m-d):b<0&&(b=Math.max(b,u-d)),x[o]=d+b;var y=this.getIndex(x),j=y.startIndex,E=y.endIndex,A=function(){var S=p.length-1;return o==="startX"&&(l>c?j%g===0:E%g===0)||l<c&&E===S||o==="endX"&&(l>c?E%g===0:j%g===0)||l>c&&E===S};this.setState(ii(ii({},o,d+b),"brushMoveStartX",s.pageX),function(){v&&A()&&v(y)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[a],u=l.indexOf(f);if(u!==-1){var h=u+s;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=d||a==="endX"&&m<=c||this.setState(ii({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return ce.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.data,d=s.children,f=s.padding,u=w.Children.only(d);return u?ce.cloneElement(u,{x:a,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,u=c.height,h=c.traveller,m=c.ariaLabel,v=c.data,g=c.startIndex,p=c.endIndex,x=Math.max(s,this.props.x),b=MS(MS({},ar(this.props,!1)),{},{x,y:d,width:f,height:u}),y=m||"Min value: ".concat((i=v[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[p])===null||o===void 0?void 0:o.name);return ce.createElement(sn,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),l.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(s,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,f=Math.min(s,a)+d,u=Math.max(Math.abs(a-s)-d,0);return ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:u,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,f=this.state,u=f.startX,h=f.endX,m=5,v={pointerEvents:"none",fill:d};return ce.createElement(sn,{className:"recharts-brush-texts"},ce.createElement(j1,H1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,h)-m,y:o+l/2},v),this.getTextOfTick(a)),ce.createElement(j1,H1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,h)+c+m,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,o=s.children,l=s.x,c=s.y,d=s.width,f=s.height,u=s.alwaysShowText,h=this.state,m=h.startX,v=h.endX,g=h.isTextActive,p=h.isSlideMoving,x=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!lt(l)||!lt(c)||!lt(d)||!lt(f)||d<=0||f<=0)return null;var y=xr("recharts-brush",i),j=ce.Children.count(o)===1,E=RIe("userSelect","none");return ce.createElement(sn,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(g||p||x||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(i+l/2)-1;return ce.createElement(ce.Fragment,null,ce.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),ce.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),ce.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return ce.isValidElement(s)?i=ce.cloneElement(s,a):sr(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,f=s.startIndex,u=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return MS({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?WIe({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:u}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>a?l=c:o=c}return a>=s[l]?l:o}}])}(w.PureComponent);ii(xm,"displayName","Brush");ii(xm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var qIe=sT;function HIe(e,t){var r;return qIe(e,function(s,a,i){return r=t(s,a,i),!r}),!!r}var GIe=HIe,KIe=dU,YIe=qd,XIe=GIe,QIe=Qa,JIe=Dw;function ZIe(e,t,r){var s=QIe(e)?KIe:XIe;return r&&JIe(e,t,r)&&(t=void 0),s(e,YIe(t))}var eke=ZIe;const tke=kr(eke);var xl=function(t,r){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===r},H6=kU;function rke(e,t,r){t=="__proto__"&&H6?H6(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var nke=rke,ske=nke,ake=_U,ike=qd;function oke(e,t){var r={};return t=ike(t),ake(e,function(s,a,i){ske(r,a,t(s,a,i))}),r}var lke=oke;const cke=kr(lke);function dke(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!t(e[r],r,e))return!1;return!0}var uke=dke,fke=sT;function hke(e,t){var r=!0;return fke(e,function(s,a,i){return r=!!t(s,a,i),r}),r}var mke=hke,pke=uke,vke=mke,gke=qd,xke=Qa,yke=Dw;function bke(e,t,r){var s=xke(e)?pke:vke;return r&&yke(e,t,r)&&(t=void 0),s(e,gke(t))}var jke=bke;const oW=kr(jke);var wke=["x","y"];function ox(e){"@babel/helpers - typeof";return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ox(e)}function QA(){return QA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},QA.apply(this,arguments)}function G6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function gv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G6(Object(r),!0).forEach(function(s){Nke(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Nke(e,t,r){return t=Ske(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ske(e){var t=Cke(e,"string");return ox(t)=="symbol"?t:t+""}function Cke(e,t){if(ox(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(ox(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ake(e,t){if(e==null)return{};var r=Eke(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Eke(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Pke(e,t){var r=e.x,s=e.y,a=Ake(e,wke),i="".concat(r),o=parseInt(i,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||a.height),f=parseInt(d,10),u="".concat(t.width||a.width),h=parseInt(u,10);return gv(gv(gv(gv(gv({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function K6(e){return ce.createElement(uIe,QA({shapeType:"rectangle",propTransformer:Pke,activeClassName:"recharts-active-bar"},e))}var Tke=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=lt(s)||nxe(s);return i?t(s,a):(i||kd(!1),r)}},_ke=["value","background"],lW;function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function Ike(e,t){if(e==null)return{};var r=kke(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function kke(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function K1(){return K1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},K1.apply(this,arguments)}function Y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y6(Object(r),!0).forEach(function(s){dd(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Dke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,dW(s.key),s)}}function Oke(e,t,r){return t&&X6(e.prototype,t),r&&X6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lke(e,t,r){return t=Y1(t),Rke(e,cW()?Reflect.construct(t,r||[],Y1(e).constructor):t.apply(e,r))}function Rke(e,t){if(t&&(ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ke(e)}function $ke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cW=function(){return!!e})()}function Y1(e){return Y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y1(e)}function Fke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JA(e,t)}function JA(e,t){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},JA(e,t)}function dd(e,t,r){return t=dW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dW(e){var t=Mke(e,"string");return ym(t)=="symbol"?t:t+""}function Mke(e,t){if(ym(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(ym(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yd=function(e){function t(){var r;Dke(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=Lke(this,t,[].concat(a)),dd(r,"state",{isAnimationFinished:!1}),dd(r,"id",ep("recharts-bar-")),dd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),dd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Fke(t,e),Oke(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,f=ar(this.props,!1);return s&&s.map(function(u,h){var m=h===c,v=m?d:o,g=Zn(Zn(Zn({},f),u),{},{isActive:m,option:v,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ce.createElement(sn,K1({className:"recharts-bar-rectangle"},o1(a.props,u,h),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(h)}),ce.createElement(K6,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,f=a.animationEasing,u=a.animationId,h=this.state.prevData;return ce.createElement(af,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,g=i.map(function(p,x){var b=h&&h[x];if(b){var y=$s(b.x,p.x),j=$s(b.y,p.y),E=$s(b.width,p.width),A=$s(b.height,p.height);return Zn(Zn({},p),{},{x:y(v),y:j(v),width:E(v),height:A(v)})}if(o==="horizontal"){var C=$s(0,p.height),S=C(v);return Zn(Zn({},p),{},{y:p.y+p.height-S,height:S})}var T=$s(0,p.width),O=T(v);return Zn(Zn({},p),{},{width:O})});return ce.createElement(sn,null,s.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!mm(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=ar(this.props.background,!1);return i.map(function(d,f){d.value;var u=d.background,h=Ike(d,_ke);if(!u)return null;var m=Zn(Zn(Zn(Zn(Zn({},h),{},{fill:"#eee"},u),c),o1(s.props,d,f)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return ce.createElement(K6,K1({key:"background-bar-".concat(f),option:s.props.background,isActive:f===l},m))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,f=i.children,u=Yi(f,Vx);if(!u)return null;var h=d==="vertical"?o[0].height/2:o[0].width/2,m=function(p,x){var b=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:b,errorVal:wa(p,x)}},v={clipPath:s?"url(#clipPath-".concat(a,")"):null};return ce.createElement(sn,v,u.map(function(g){return ce.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,f=s.top,u=s.width,h=s.height,m=s.isAnimationActive,v=s.background,g=s.id;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,x=xr("recharts-bar",o),b=l&&l.allowDataOverflow,y=c&&c.allowDataOverflow,j=b||y,E=or(g)?this.id:g;return ce.createElement(sn,{className:x},b||y?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(E)},ce.createElement("rect",{x:b?d:d-u/2,y:y?f:f-h/2,width:b?u:u*2,height:y?h:h*2}))):null,ce.createElement(sn,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(E,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,E),(!m||p)&&ac.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(w.PureComponent);lW=Yd;dd(Yd,"displayName","Bar");dd(Yd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!vl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});dd(Yd,"getComposedData",function(e){var t=e.props,r=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,u=e.displayedData,h=e.offset,m=jPe(s,r);if(!m)return null;var v=t.layout,g=r.type.defaultProps,p=g!==void 0?Zn(Zn({},g),r.props):r.props,x=p.dataKey,b=p.children,y=p.minPointSize,j=v==="horizontal"?o:i,E=d?j.scale.domain():null,A=TPe({numericAxis:j}),C=Yi(b,MU),S=u.map(function(T,O){var _,N,D,I,R,M;d?_=wPe(d[f+O],E):(_=wa(T,x),Array.isArray(_)||(_=[A,_]));var $=Tke(y,lW.defaultProps.minPointSize)(_[1],O);if(v==="horizontal"){var B,U=[o.scale(_[0]),o.scale(_[1])],q=U[0],W=U[1];N=KL({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:T,index:O}),D=(B=W??q)!==null&&B!==void 0?B:void 0,I=m.size;var L=q-W;if(R=Number.isNaN(L)?0:L,M={x:N,y:o.y,width:I,height:o.height},Math.abs($)>0&&Math.abs(R)<Math.abs($)){var V=_o(R||$)*(Math.abs($)-Math.abs(R));D-=V,R+=V}}else{var G=[i.scale(_[0]),i.scale(_[1])],Z=G[0],ee=G[1];if(N=Z,D=KL({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:T,index:O}),I=ee-Z,R=m.size,M={x:i.x,y:D,width:i.width,height:R},Math.abs($)>0&&Math.abs(I)<Math.abs($)){var he=_o(I||$)*(Math.abs($)-Math.abs(I));I+=he}}return Zn(Zn(Zn({},T),{},{x:N,y:D,width:I,height:R,value:d?_:_[1],payload:T,background:M},C&&C[O]&&C[O].props),{},{tooltipPayload:[qV(r,T)],tooltipPosition:{x:N+I/2,y:D+R/2}})});return Zn({data:S,layout:v},h)});function lx(e){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lx(e)}function Bke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q6(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uW(s.key),s)}}function zke(e,t,r){return t&&Q6(e.prototype,t),r&&Q6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function J6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J6(Object(r),!0).forEach(function(s){Gw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J6(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Gw(e,t,r){return t=uW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uW(e){var t=Uke(e,"string");return lx(t)=="symbol"?t:t+""}function Uke(e,t){if(lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(lx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DT=function(t,r,s,a,i){var o=t.width,l=t.height,c=t.layout,d=t.children,f=Object.keys(r),u={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},h=!!li(d,Yd);return f.reduce(function(m,v){var g=r[v],p=g.orientation,x=g.domain,b=g.padding,y=b===void 0?{}:b,j=g.mirror,E=g.reversed,A="".concat(p).concat(j?"Mirror":""),C,S,T,O,_;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var N=x[1]-x[0],D=1/0,I=g.categoricalDomain.sort(ixe);if(I.forEach(function(G,Z){Z>0&&(D=Math.min((G||0)-(I[Z-1]||0),D))}),Number.isFinite(D)){var R=D/N,M=g.layout==="vertical"?s.height:s.width;if(g.padding==="gap"&&(C=R*M/2),g.padding==="no-gap"){var $=nf(t.barCategoryGap,R*M),B=R*M/2;C=B-$-(B-$)/M*$}}}a==="xAxis"?S=[s.left+(y.left||0)+(C||0),s.left+s.width-(y.right||0)-(C||0)]:a==="yAxis"?S=c==="horizontal"?[s.top+s.height-(y.bottom||0),s.top+(y.top||0)]:[s.top+(y.top||0)+(C||0),s.top+s.height-(y.bottom||0)-(C||0)]:S=g.range,E&&(S=[S[1],S[0]]);var U=yPe(g,i,h),q=U.scale,W=U.realScaleType;q.domain(x).range(S),bPe(q);var L=PPe(q,wo(wo({},g),{},{realScaleType:W}));a==="xAxis"?(_=p==="top"&&!j||p==="bottom"&&j,T=s.left,O=u[A]-_*g.height):a==="yAxis"&&(_=p==="left"&&!j||p==="right"&&j,T=u[A]-_*g.width,O=s.top);var V=wo(wo(wo({},g),L),{},{realScaleType:W,x:T,y:O,scale:q,width:a==="xAxis"?s.width:g.width,height:a==="yAxis"?s.height:g.height});return V.bandSize=R1(V,L),!g.hide&&a==="xAxis"?u[A]+=(_?-1:1)*V.height:g.hide||(u[A]+=(_?-1:1)*V.width),wo(wo({},m),{},Gw({},v,V))},{})},fW=function(t,r){var s=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(s,i),y:Math.min(a,o),width:Math.abs(i-s),height:Math.abs(o-a)}},Vke=function(t){var r=t.x1,s=t.y1,a=t.x2,i=t.y2;return fW({x:r,y:s},{x:a,y:i})},hW=function(){function e(t){Bke(this,e),this.scale=t}return zke(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Gw(hW,"EPS",1e-4);var OT=function(t){var r=Object.keys(t).reduce(function(s,a){return wo(wo({},s),{},Gw({},a,hW.create(t[a])))},{});return wo(wo({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return cke(a,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return oW(a,function(i,o){return r[o].isInRange(i)})}})};function Wke(e){return(e%180+180)%180}var qke=function(t){var r=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Wke(a),o=i*Math.PI/180,l=Math.atan(s/r),c=o>l&&o<Math.PI-l?s/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Hke=qd,Gke=Fx,Kke=Iw;function Yke(e){return function(t,r,s){var a=Object(t);if(!Gke(t)){var i=Hke(r);t=Kke(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,s);return o>-1?a[i?t[o]:o]:void 0}}var Xke=Yke,Qke=nW;function Jke(e){var t=Qke(e),r=t%1;return t===t?r?t-r:t:0}var Zke=Jke,eDe=SU,tDe=qd,rDe=Zke,nDe=Math.max;function sDe(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var a=r==null?0:rDe(r);return a<0&&(a=nDe(s+a,0)),eDe(e,tDe(t),a)}var aDe=sDe,iDe=Xke,oDe=aDe,lDe=iDe(oDe),cDe=lDe;const dDe=kr(cDe);var uDe=oge(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),LT=w.createContext(void 0),RT=w.createContext(void 0),mW=w.createContext(void 0),pW=w.createContext({}),vW=w.createContext(void 0),gW=w.createContext(0),xW=w.createContext(0),Z6=function(t){var r=t.state,s=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,f=uDe(i);return ce.createElement(LT.Provider,{value:s},ce.createElement(RT.Provider,{value:a},ce.createElement(pW.Provider,{value:i},ce.createElement(mW.Provider,{value:f},ce.createElement(vW.Provider,{value:o},ce.createElement(gW.Provider,{value:d},ce.createElement(xW.Provider,{value:c},l)))))))},fDe=function(){return w.useContext(vW)},yW=function(t){var r=w.useContext(LT);r==null&&kd(!1);var s=r[t];return s==null&&kd(!1),s},hDe=function(){var t=w.useContext(LT);return td(t)},mDe=function(){var t=w.useContext(RT),r=dDe(t,function(s){return oW(s.domain,Number.isFinite)});return r||td(t)},bW=function(t){var r=w.useContext(RT);r==null&&kd(!1);var s=r[t];return s==null&&kd(!1),s},pDe=function(){var t=w.useContext(mW);return t},vDe=function(){return w.useContext(pW)},$T=function(){return w.useContext(xW)},FT=function(){return w.useContext(gW)};function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function gDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,wW(s.key),s)}}function xDe(e,t,r){return t&&eR(e.prototype,t),r&&eR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yDe(e,t,r){return t=X1(t),bDe(e,jW()?Reflect.construct(t,r||[],X1(e).constructor):t.apply(e,r))}function bDe(e,t){if(t&&(bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jDe(e)}function jDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jW=function(){return!!e})()}function X1(e){return X1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X1(e)}function wDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZA(e,t)}function ZA(e,t){return ZA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},ZA(e,t)}function tR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function rR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tR(Object(r),!0).forEach(function(s){MT(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function MT(e,t,r){return t=wW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wW(e){var t=NDe(e,"string");return bm(t)=="symbol"?t:t+""}function NDe(e,t){if(bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(bm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SDe(e,t){return PDe(e)||EDe(e,t)||ADe(e,t)||CDe()}function CDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ADe(e,t){if(e){if(typeof e=="string")return nR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nR(e,t)}}function nR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function EDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function PDe(e){if(Array.isArray(e))return e}function eE(){return eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},eE.apply(this,arguments)}var TDe=function(t,r){var s;return ce.isValidElement(t)?s=ce.cloneElement(t,r):sr(t)?s=t(r):s=ce.createElement("line",eE({},r,{className:"recharts-reference-line-line"})),s},_De=function(t,r,s,a,i,o,l,c,d){var f=i.x,u=i.y,h=i.width,m=i.height;if(s){var v=d.y,g=t.y.apply(v,{position:o});if(xl(d,"discard")&&!t.y.isInRange(g))return null;var p=[{x:f+h,y:g},{x:f,y:g}];return c==="left"?p.reverse():p}if(r){var x=d.x,b=t.x.apply(x,{position:o});if(xl(d,"discard")&&!t.x.isInRange(b))return null;var y=[{x:b,y:u+m},{x:b,y:u}];return l==="top"?y.reverse():y}if(a){var j=d.segment,E=j.map(function(A){return t.apply(A,{position:o})});return xl(d,"discard")&&tke(E,function(A){return!t.isInRange(A)})?null:E}return null};function IDe(e){var t=e.x,r=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=fDe(),f=yW(a),u=bW(i),h=pDe();if(!d||!h)return null;nc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=OT({x:f.scale,y:u.scale}),v=fs(t),g=fs(r),p=s&&s.length===2,x=_De(m,v,g,p,h,e.position,f.orientation,u.orientation,e);if(!x)return null;var b=SDe(x,2),y=b[0],j=y.x,E=y.y,A=b[1],C=A.x,S=A.y,T=xl(e,"hidden")?"url(#".concat(d,")"):void 0,O=rR(rR({clipPath:T},ar(e,!0)),{},{x1:j,y1:E,x2:C,y2:S});return ce.createElement(sn,{className:xr("recharts-reference-line",l)},TDe(o,O),ra.renderCallByParent(e,Vke({x1:j,y1:E,x2:C,y2:S})))}var BT=function(e){function t(){return gDe(this,t),yDe(this,t,arguments)}return wDe(t,e),xDe(t,[{key:"render",value:function(){return ce.createElement(IDe,this.props)}}])}(ce.Component);MT(BT,"displayName","ReferenceLine");MT(BT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},tE.apply(this,arguments)}function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function sR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function aR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sR(Object(r),!0).forEach(function(s){Kw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function kDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,SW(s.key),s)}}function DDe(e,t,r){return t&&iR(e.prototype,t),r&&iR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ODe(e,t,r){return t=Q1(t),LDe(e,NW()?Reflect.construct(t,r||[],Q1(e).constructor):t.apply(e,r))}function LDe(e,t){if(t&&(jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RDe(e)}function RDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NW=function(){return!!e})()}function Q1(e){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q1(e)}function $De(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rE(e,t)}function rE(e,t){return rE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},rE(e,t)}function Kw(e,t,r){return t=SW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SW(e){var t=FDe(e,"string");return jm(t)=="symbol"?t:t+""}function FDe(e,t){if(jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(jm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MDe=function(t){var r=t.x,s=t.y,a=t.xAxis,i=t.yAxis,o=OT({x:a.scale,y:i.scale}),l=o.apply({x:r,y:s},{bandAware:!0});return xl(t,"discard")&&!o.isInRange(l)?null:l},Yw=function(e){function t(){return kDe(this,t),ODe(this,t,arguments)}return $De(t,e),DDe(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=fs(a),f=fs(i);if(nc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var u=MDe(this.props);if(!u)return null;var h=u.x,m=u.y,v=this.props,g=v.shape,p=v.className,x=xl(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=aR(aR({clipPath:x},ar(this.props,!0)),{},{cx:h,cy:m});return ce.createElement(sn,{className:xr("recharts-reference-dot",p)},t.renderDot(g,b),ra.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(ce.Component);Kw(Yw,"displayName","ReferenceDot");Kw(Yw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Kw(Yw,"renderDot",function(e,t){var r;return ce.isValidElement(e)?r=ce.cloneElement(e,t):sr(e)?r=e(t):r=ce.createElement(Ww,tE({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function nE(){return nE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},nE.apply(this,arguments)}function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function oR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function lR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oR(Object(r),!0).forEach(function(s){Xw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function BDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,AW(s.key),s)}}function zDe(e,t,r){return t&&cR(e.prototype,t),r&&cR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UDe(e,t,r){return t=J1(t),VDe(e,CW()?Reflect.construct(t,r||[],J1(e).constructor):t.apply(e,r))}function VDe(e,t){if(t&&(wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WDe(e)}function WDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CW=function(){return!!e})()}function J1(e){return J1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J1(e)}function qDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sE(e,t)}function sE(e,t){return sE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},sE(e,t)}function Xw(e,t,r){return t=AW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AW(e){var t=HDe(e,"string");return wm(t)=="symbol"?t:t+""}function HDe(e,t){if(wm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(wm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GDe=function(t,r,s,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,f=i.xAxis,u=i.yAxis;if(!f||!u)return null;var h=OT({x:f.scale,y:u.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:s?h.y.apply(c,{position:"start"}):h.y.rangeMin},v={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return xl(i,"discard")&&(!h.isInRange(m)||!h.isInRange(v))?null:fW(m,v)},Qw=function(e){function t(){return BDe(this,t),UDe(this,t,arguments)}return qDe(t,e),zDe(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,f=s.clipPathId;nc(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=fs(a),h=fs(i),m=fs(o),v=fs(l),g=this.props.shape;if(!u&&!h&&!m&&!v&&!g)return null;var p=GDe(u,h,m,v,this.props);if(!p&&!g)return null;var x=xl(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ce.createElement(sn,{className:xr("recharts-reference-area",c)},t.renderRect(g,lR(lR({clipPath:x},ar(this.props,!0)),p)),ra.renderCallByParent(this.props,p))}}])}(ce.Component);Xw(Qw,"displayName","ReferenceArea");Xw(Qw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Xw(Qw,"renderRect",function(e,t){var r;return ce.isValidElement(e)?r=ce.cloneElement(e,t):sr(e)?r=e(t):r=ce.createElement(kT,nE({},t,{className:"recharts-reference-area-rect"})),r});function EW(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)if(r===void 0||r(e[a])===!0)s.push(e[a]);else return;return s}function KDe(e,t,r){var s={width:e.width+t.width,height:e.height+t.height};return qke(s,r)}function YDe(e,t,r){var s=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:s?a:i,end:s?a+o:i+l}:{start:s?a+o:i+l,end:s?a:i}}function Z1(e,t,r,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function XDe(e,t){return EW(e,t+1)}function QDe(e,t,r,s,a){for(var i=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,f=o,u=function(){var v=s==null?void 0:s[c];if(v===void 0)return{v:EW(s,d)};var g=c,p,x=function(){return p===void 0&&(p=r(v,g)),p},b=v.coordinate,y=c===0||Z1(e,b,x,f,l);y||(c=0,f=o,d+=1),y&&(f=b+e*(x()/2+a),c+=d)},h;d<=i.length;)if(h=u(),h)return h.v;return[]}function cx(e){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cx(e)}function dR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(r),!0).forEach(function(s){JDe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function JDe(e,t,r){return t=ZDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZDe(e){var t=eOe(e,"string");return cx(t)=="symbol"?t:t+""}function eOe(e,t){if(cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(cx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tOe(e,t,r,s,a){for(var i=(s||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(h){var m=i[h],v,g=function(){return v===void 0&&(v=r(m,h)),v};if(h===o-1){var p=e*(m.coordinate+e*g()/2-c);i[h]=m=ea(ea({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate})}else i[h]=m=ea(ea({},m),{},{tickCoord:m.coordinate});var x=Z1(e,m.tickCoord,g,l,c);x&&(c=m.tickCoord-e*(g()/2+a),i[h]=ea(ea({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return i}function rOe(e,t,r,s,a,i){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var f=s[l-1],u=r(f,l-1),h=e*(f.coordinate+e*u/2-d);o[l-1]=f=ea(ea({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var m=Z1(e,f.tickCoord,function(){return u},c,d);m&&(d=f.tickCoord-e*(u/2+a),o[l-1]=ea(ea({},f),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(b){var y=o[b],j,E=function(){return j===void 0&&(j=r(y,b)),j};if(b===0){var A=e*(y.coordinate-e*E()/2-c);o[b]=y=ea(ea({},y),{},{tickCoord:A<0?y.coordinate-A*e:y.coordinate})}else o[b]=y=ea(ea({},y),{},{tickCoord:y.coordinate});var C=Z1(e,y.tickCoord,E,c,d);C&&(c=y.tickCoord+e*(E()/2+a),o[b]=ea(ea({},y),{},{isShow:!0}))},p=0;p<v;p++)g(p);return o}function zT(e,t,r){var s=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,f=e.unit,u=e.angle;if(!a||!a.length||!s)return[];if(lt(c)||vl.isSsr)return XDe(a,typeof c=="number"&&lt(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",v=f&&m==="width"?Wv(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(y,j){var E=sr(d)?d(y.value,j):y.value;return m==="width"?KDe(Wv(E,{fontSize:t,letterSpacing:r}),v,u):Wv(E,{fontSize:t,letterSpacing:r})[m]},p=a.length>=2?_o(a[1].coordinate-a[0].coordinate):1,x=YDe(i,p,m);return c==="equidistantPreserveStart"?QDe(p,x,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=rOe(p,x,g,a,o,c==="preserveStartEnd"):h=tOe(p,x,g,a,o),h.filter(function(b){return b.isShow}))}var nOe=["viewBox"],sOe=["viewBox"],aOe=["ticks"];function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nm(e)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ah.apply(this,arguments)}function uR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uR(Object(r),!0).forEach(function(s){UT(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function BS(e,t){if(e==null)return{};var r=iOe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function iOe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function oOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,TW(s.key),s)}}function lOe(e,t,r){return t&&fR(e.prototype,t),r&&fR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cOe(e,t,r){return t=ej(t),dOe(e,PW()?Reflect.construct(t,r||[],ej(e).constructor):t.apply(e,r))}function dOe(e,t){if(t&&(Nm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uOe(e)}function uOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PW=function(){return!!e})()}function ej(e){return ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ej(e)}function fOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aE(e,t)}function aE(e,t){return aE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},aE(e,t)}function UT(e,t,r){return t=TW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=hOe(e,"string");return Nm(t)=="symbol"?t:t+""}function hOe(e,t){if(Nm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Nm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var op=function(e){function t(r){var s;return oOe(this,t),s=cOe(this,t,[r]),s.state={fontSize:"",letterSpacing:""},s}return fOe(t,e),lOe(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,o=BS(s,nOe),l=this.props,c=l.viewBox,d=BS(l,sOe);return!Fh(i,c)||!Fh(o,d)||!Fh(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,f=a.tickSize,u=a.mirror,h=a.tickMargin,m,v,g,p,x,b,y=u?-1:1,j=s.tickSize||f,E=lt(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":m=v=s.coordinate,p=o+ +!u*c,g=p-y*j,b=g-y*h,x=E;break;case"left":g=p=s.coordinate,v=i+ +!u*l,m=v-y*j,x=m-y*h,b=E;break;case"right":g=p=s.coordinate,v=i+ +u*l,m=v+y*j,x=m+y*h,b=E;break;default:m=v=s.coordinate,p=o+ +u*c,g=p+y*j,b=g+y*h,x=E;break}return{line:{x1:m,y1:g,x2:v,y2:p},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,f=s.axisLine,u=is(is(is({},ar(this.props,!1)),ar(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);u=is(is({},u),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);u=is(is({},u),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return ce.createElement("line",Ah({},u,{className:xr("recharts-cartesian-axis-line",Ki(f,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,u=l.tickFormatter,h=l.unit,m=zT(is(is({},this.props),{},{ticks:s}),a,i),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),p=ar(this.props,!1),x=ar(f,!1),b=is(is({},p),{},{fill:"none"},ar(c,!1)),y=m.map(function(j,E){var A=o.getTickLineCoord(j),C=A.line,S=A.tick,T=is(is(is(is({textAnchor:v,verticalAnchor:g},p),{},{stroke:"none",fill:d},x),S),{},{index:E,payload:j,visibleTicksCount:m.length,tickFormatter:u});return ce.createElement(sn,Ah({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},o1(o.props,j,E)),c&&ce.createElement("line",Ah({},b,C,{className:xr("recharts-cartesian-axis-tick-line",Ki(c,"className"))})),f&&t.renderTickItem(f,T,"".concat(sr(u)?u(j.value,E):j.value).concat(h||"")))});return ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,f=a.hide;if(f)return null;var u=this.props,h=u.ticks,m=BS(u,aOe),v=h;return sr(c)&&(v=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:ce.createElement(sn,{className:xr("recharts-cartesian-axis",d),ref:function(p){s.layerReference=p}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),ra.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var o,l=xr(a.className,"recharts-cartesian-axis-tick-value");return ce.isValidElement(s)?o=ce.cloneElement(s,is(is({},a),{},{className:l})):sr(s)?o=s(is(is({},a),{},{className:l})):o=ce.createElement(j1,Ah({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(w.Component);UT(op,"displayName","CartesianAxis");UT(op,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var mOe=["x1","y1","x2","y2","key"],pOe=["offset"];function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function hR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hR(Object(r),!0).forEach(function(s){vOe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function vOe(e,t,r){return t=gOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gOe(e){var t=xOe(e,"string");return of(t)=="symbol"?t:t+""}function xOe(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(of(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lu(){return Lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Lu.apply(this,arguments)}function mR(e,t){if(e==null)return{};var r=yOe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function yOe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var bOe=function(t){var r=t.fill;if(!r||r==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return ce.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function _W(e,t){var r;if(ce.isValidElement(e))r=ce.cloneElement(e,t);else if(sr(e))r=e(t);else{var s=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=mR(t,mOe),d=ar(c,!1);d.offset;var f=mR(d,pOe);r=ce.createElement("line",Lu({},f,{x1:s,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function jOe(e){var t=e.x,r=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=na(na({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return _W(a,d)});return ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function wOe(e){var t=e.y,r=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=na(na({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return _W(a,d)});return ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function NOe(e){var t=e.horizontalFill,r=e.fillOpacity,s=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var f=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==f[0]&&f.unshift(0);var u=f.map(function(h,m){var v=!f[m+1],g=v?a+o-h:f[m+1]-h;if(g<=0)return null;var p=m%t.length;return ce.createElement("rect",{key:"react-".concat(m),y:h,x:s,height:g,width:i,stroke:"none",fill:t[p],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function SOe(e){var t=e.vertical,r=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!s||!s.length)return null;var f=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==f[0]&&f.unshift(0);var u=f.map(function(h,m){var v=!f[m+1],g=v?i+l-h:f[m+1]-h;if(g<=0)return null;var p=m%s.length;return ce.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:g,height:c,stroke:"none",fill:s[p],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var COe=function(t,r){var s=t.xAxis,a=t.width,i=t.height,o=t.offset;return VV(zT(na(na(na({},op.defaultProps),s),{},{ticks:Jl(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},AOe=function(t,r){var s=t.yAxis,a=t.width,i=t.height,o=t.offset;return VV(zT(na(na(na({},op.defaultProps),s),{},{ticks:Jl(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},nh={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function iE(e){var t,r,s,a,i,o,l=$T(),c=FT(),d=vDe(),f=na(na({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:nh.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:nh.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:nh.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:nh.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:nh.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:nh.verticalFill,x:lt(e.x)?e.x:d.left,y:lt(e.y)?e.y:d.top,width:lt(e.width)?e.width:d.width,height:lt(e.height)?e.height:d.height}),u=f.x,h=f.y,m=f.width,v=f.height,g=f.syncWithTicks,p=f.horizontalValues,x=f.verticalValues,b=hDe(),y=mDe();if(!lt(m)||m<=0||!lt(v)||v<=0||!lt(u)||u!==+u||!lt(h)||h!==+h)return null;var j=f.verticalCoordinatesGenerator||COe,E=f.horizontalCoordinatesGenerator||AOe,A=f.horizontalPoints,C=f.verticalPoints;if((!A||!A.length)&&sr(E)){var S=p&&p.length,T=E({yAxis:y?na(na({},y),{},{ticks:S?p:y.ticks}):void 0,width:l,height:c,offset:d},S?!0:g);nc(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(of(T),"]")),Array.isArray(T)&&(A=T)}if((!C||!C.length)&&sr(j)){var O=x&&x.length,_=j({xAxis:b?na(na({},b),{},{ticks:O?x:b.ticks}):void 0,width:l,height:c,offset:d},O?!0:g);nc(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(of(_),"]")),Array.isArray(_)&&(C=_)}return ce.createElement("g",{className:"recharts-cartesian-grid"},ce.createElement(bOe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ce.createElement(jOe,Lu({},f,{offset:d,horizontalPoints:A,xAxis:b,yAxis:y})),ce.createElement(wOe,Lu({},f,{offset:d,verticalPoints:C,xAxis:b,yAxis:y})),ce.createElement(NOe,Lu({},f,{horizontalPoints:A})),ce.createElement(SOe,Lu({},f,{verticalPoints:C})))}iE.displayName="CartesianGrid";var EOe=["type","layout","connectNulls","ref"],POe=["key"];function Sm(e){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sm(e)}function pR(e,t){if(e==null)return{};var r=TOe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function TOe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Kv.apply(this,arguments)}function vR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vR(Object(r),!0).forEach(function(s){No(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function sh(e){return DOe(e)||kOe(e)||IOe(e)||_Oe()}function _Oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IOe(e,t){if(e){if(typeof e=="string")return oE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oE(e,t)}}function kOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DOe(e){if(Array.isArray(e))return oE(e)}function oE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function OOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,kW(s.key),s)}}function LOe(e,t,r){return t&&gR(e.prototype,t),r&&gR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ROe(e,t,r){return t=tj(t),$Oe(e,IW()?Reflect.construct(t,r||[],tj(e).constructor):t.apply(e,r))}function $Oe(e,t){if(t&&(Sm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FOe(e)}function FOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IW=function(){return!!e})()}function tj(e){return tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tj(e)}function MOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lE(e,t)}function lE(e,t){return lE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},lE(e,t)}function No(e,t,r){return t=kW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kW(e){var t=BOe(e,"string");return Sm(t)=="symbol"?t:t+""}function BOe(e,t){if(Sm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Sm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wx=function(e){function t(){var r;OOe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=ROe(this,t,[].concat(a)),No(r,"state",{isAnimationFinished:!0,totalLength:0}),No(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),No(r,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(x,b){return x+b});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),u=o%d,h=l-o,m=[],v=0,g=0;v<c.length;g+=c[v],++v)if(g+c[v]>u){m=[].concat(sh(c.slice(0,v)),[u-g]);break}var p=m.length%2===0?[0,h]:[h];return[].concat(sh(t.repeat(c,f)),sh(m),p).map(function(x){return"".concat(x,"px")}).join(", ")}),No(r,"id",ep("recharts-line-")),No(r,"pathRef",function(o){r.mainCurve=o}),No(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),No(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return MOe(t,e),LOe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,f=i.children,u=Yi(f,Vx);if(!u)return null;var h=function(g,p){return{x:g.x,y:g.y,value:g.value,errorVal:wa(g.payload,p)}},m={clipPath:s?"url(#clipPath-".concat(a,")"):null};return ce.createElement(sn,m,u.map(function(v){return ce.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,u=ar(this.props,!1),h=ar(c,!0),m=d.map(function(g,p){var x=ai(ai(ai({key:"dot-".concat(p),r:3},u),h),{},{index:p,cx:g.x,cy:g.y,value:g.value,dataKey:f,payload:g.payload,points:d});return t.renderDotItem(c,x)}),v={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ce.createElement(sn,Kv({className:"recharts-line-dots",key:"dots"},v),m)}},{key:"renderCurveStatically",value:function(s,a,i,o){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var u=pR(l,EOe),h=ai(ai(ai({},ar(u,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:f});return ce.createElement(Uh,Kv({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,u=o.animationDuration,h=o.animationEasing,m=o.animationId,v=o.animateNewValues,g=o.width,p=o.height,x=this.state,b=x.prevPoints,y=x.totalLength;return ce.createElement(af,{begin:f,duration:u,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var E=j.t;if(b){var A=b.length/l.length,C=l.map(function(N,D){var I=Math.floor(D*A);if(b[I]){var R=b[I],M=$s(R.x,N.x),$=$s(R.y,N.y);return ai(ai({},N),{},{x:M(E),y:$(E)})}if(v){var B=$s(g*2,N.x),U=$s(p/2,N.y);return ai(ai({},N),{},{x:B(E),y:U(E)})}return ai(ai({},N),{},{x:N.x,y:N.y})});return i.renderCurveStatically(C,s,a)}var S=$s(0,y),T=S(E),O;if(c){var _="".concat(c).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});O=i.getStrokeDasharray(T,y,_)}else O=i.generateSimpleStrokeDasharray(y,T);return i.renderCurveStatically(l,s,a,{strokeDasharray:O})})}},{key:"renderCurve",value:function(s,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!d&&f>0||!mm(d,o))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.xAxis,f=a.yAxis,u=a.top,h=a.left,m=a.width,v=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,y=xr("recharts-line",c),j=d&&d.allowDataOverflow,E=f&&f.allowDataOverflow,A=j||E,C=or(p)?this.id:p,S=(s=ar(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},T=S.r,O=T===void 0?3:T,_=S.strokeWidth,N=_===void 0?2:_,D=Lz(o)?o:{},I=D.clipDot,R=I===void 0?!0:I,M=O*2+N;return ce.createElement(sn,{className:y},j||E?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(C)},ce.createElement("rect",{x:j?h:h-m/2,y:E?u:u-v/2,width:j?m:m*2,height:E?v:v*2})),!R&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(C)},ce.createElement("rect",{x:h-M/2,y:u-M/2,width:m+M,height:v+M}))):null,!b&&this.renderCurve(A,C),this.renderErrorBar(A,C),(b||o)&&this.renderDots(A,R,C),(!g||x)&&ac.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(sh(s),[0]):s,o=[],l=0;l<a;++l)o=[].concat(sh(o),sh(i));return o}},{key:"renderDotItem",value:function(s,a){var i;if(ce.isValidElement(s))i=ce.cloneElement(s,a);else if(sr(s))i=s(a);else{var o=a.key,l=pR(a,POe),c=xr("recharts-line-dot",typeof s!="boolean"?s.className:"");i=ce.createElement(Ww,Kv({key:o},l,{className:c}))}return i}}])}(w.PureComponent);No(Wx,"displayName","Line");No(Wx,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!vl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});No(Wx,"getComposedData",function(e){var t=e.props,r=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,f=t.layout,u=c.map(function(h,m){var v=wa(h,o);return f==="horizontal"?{x:L1({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:or(v)?null:s.scale(v),value:v,payload:h}:{x:or(v)?null:r.scale(v),y:L1({axis:s,ticks:i,bandSize:l,entry:h,index:m}),value:v,payload:h}});return ai({points:u,layout:f},d)});var zOe=["layout","type","stroke","connectNulls","isRange","ref"],UOe=["key"],DW;function Cm(e){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cm(e)}function OW(e,t){if(e==null)return{};var r=VOe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function VOe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Ru(){return Ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ru.apply(this,arguments)}function xR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(r),!0).forEach(function(s){dl(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function WOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,RW(s.key),s)}}function qOe(e,t,r){return t&&yR(e.prototype,t),r&&yR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function HOe(e,t,r){return t=rj(t),GOe(e,LW()?Reflect.construct(t,r||[],rj(e).constructor):t.apply(e,r))}function GOe(e,t){if(t&&(Cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KOe(e)}function KOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LW=function(){return!!e})()}function rj(e){return rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rj(e)}function YOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cE(e,t)}function cE(e,t){return cE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},cE(e,t)}function dl(e,t,r){return t=RW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RW(e){var t=XOe(e,"string");return Cm(t)=="symbol"?t:t+""}function XOe(e,t){if(Cm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Cm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nc=function(e){function t(){var r;WOe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=HOe(this,t,[].concat(a)),dl(r,"state",{isAnimationFinished:!0}),dl(r,"id",ep("recharts-area-")),dl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),sr(o)&&o()}),dl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),sr(o)&&o()}),r}return YOe(t,e),qOe(t,[{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,u=c.dataKey,h=ar(this.props,!1),m=ar(d,!0),v=f.map(function(p,x){var b=qc(qc(qc({key:"dot-".concat(x),r:3},h),m),{},{index:x,cx:p.x,cy:p.y,dataKey:u,value:p.value,payload:p.payload,points:f});return t.renderDotItem(d,b)}),g={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ce.createElement(sn,Ru({className:"recharts-area-dots"},g),v)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=s*Math.abs(c-d),u=cd(o.map(function(h){return h.y||0}));return lt(i)&&typeof i=="number"?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(cd(i.map(function(h){return h.y||0})),u)),lt(u)?ce.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(u+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=s*Math.abs(c-d),u=cd(o.map(function(h){return h.x||0}));return lt(i)&&typeof i=="number"?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(cd(i.map(function(h){return h.x||0})),u)),lt(u)?ce.createElement("rect",{x:0,y:c<d?c:c-f,width:u+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,u=l.connectNulls,h=l.isRange;l.ref;var m=OW(l,zOe);return ce.createElement(sn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ce.createElement(Uh,Ru({},ar(m,!0),{points:s,connectNulls:u,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&ce.createElement(Uh,Ru({},ar(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:u,fill:"none",points:s})),f!=="none"&&h&&ce.createElement(Uh,Ru({},ar(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:u,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,u=o.animationDuration,h=o.animationEasing,m=o.animationId,v=this.state,g=v.prevPoints,p=v.prevBaseLine;return ce.createElement(af,{begin:f,duration:u,isActive:d,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t;if(g){var y=g.length/l.length,j=l.map(function(S,T){var O=Math.floor(T*y);if(g[O]){var _=g[O],N=$s(_.x,S.x),D=$s(_.y,S.y);return qc(qc({},S),{},{x:N(b),y:D(b)})}return S}),E;if(lt(c)&&typeof c=="number"){var A=$s(p,c);E=A(b)}else if(or(c)||Zm(c)){var C=$s(p,0);E=C(b)}else E=c.map(function(S,T){var O=Math.floor(T*y);if(p[O]){var _=p[O],N=$s(_.x,S.x),D=$s(_.y,S.y);return qc(qc({},S),{},{x:N(b),y:D(b)})}return S});return i.renderAreaStatically(j,E,s,a)}return ce.createElement(sn,null,ce.createElement("defs",null,ce.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(b))),ce.createElement(sn,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,f=d.prevPoints,u=d.prevBaseLine,h=d.totalLength;return c&&o&&o.length&&(!f&&h>0||!mm(f,o)||!mm(u,l))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(o,l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.top,f=a.left,u=a.xAxis,h=a.yAxis,m=a.width,v=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,y=xr("recharts-area",c),j=u&&u.allowDataOverflow,E=h&&h.allowDataOverflow,A=j||E,C=or(p)?this.id:p,S=(s=ar(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},T=S.r,O=T===void 0?3:T,_=S.strokeWidth,N=_===void 0?2:_,D=Lz(o)?o:{},I=D.clipDot,R=I===void 0?!0:I,M=O*2+N;return ce.createElement(sn,{className:y},j||E?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(C)},ce.createElement("rect",{x:j?f:f-m/2,y:E?d:d-v/2,width:j?m:m*2,height:E?v:v*2})),!R&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(C)},ce.createElement("rect",{x:f-M/2,y:d-M/2,width:m+M,height:v+M}))):null,b?null:this.renderArea(A,C),(o||b)&&this.renderDots(A,R,C),(!g||x)&&ac.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(w.PureComponent);DW=Nc;dl(Nc,"displayName","Area");dl(Nc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!vl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});dl(Nc,"getBaseValue",function(e,t,r,s){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(lt(l)&&typeof l=="number")return l;var c=a==="horizontal"?s:r,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),u=Math.min(d[0],d[1]);return l==="dataMin"?u:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});dl(Nc,"getComposedData",function(e){var t=e.props,r=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,f=e.dataStartIndex,u=e.displayedData,h=e.offset,m=t.layout,v=d&&d.length,g=DW.getBaseValue(t,r,s,a),p=m==="horizontal",x=!1,b=u.map(function(j,E){var A;v?A=d[f+E]:(A=wa(j,c),Array.isArray(A)?x=!0:A=[g,A]);var C=A[1]==null||v&&wa(j,c)==null;return p?{x:L1({axis:s,ticks:i,bandSize:l,entry:j,index:E}),y:C?null:a.scale(A[1]),value:A,payload:j}:{x:C?null:s.scale(A[1]),y:L1({axis:a,ticks:o,bandSize:l,entry:j,index:E}),value:A,payload:j}}),y;return v||x?y=b.map(function(j){var E=Array.isArray(j.value)?j.value[0]:null;return p?{x:j.x,y:E!=null&&j.y!=null?a.scale(E):null}:{x:E!=null?s.scale(E):null,y:j.y}}):y=p?a.scale(g):s.scale(g),qc({points:b,baseLine:y,layout:m,isRange:x},h)});dl(Nc,"renderDotItem",function(e,t){var r;if(ce.isValidElement(e))r=ce.cloneElement(e,t);else if(sr(e))r=e(t);else{var s=xr("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=OW(t,UOe);r=ce.createElement(Ww,Ru({},i,{key:a,className:s}))}return r});function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function QOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,MW(s.key),s)}}function JOe(e,t,r){return t&&bR(e.prototype,t),r&&bR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZOe(e,t,r){return t=nj(t),eLe(e,$W()?Reflect.construct(t,r||[],nj(e).constructor):t.apply(e,r))}function eLe(e,t){if(t&&(Am(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tLe(e)}function tLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($W=function(){return!!e})()}function nj(e){return nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nj(e)}function rLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dE(e,t)}function dE(e,t){return dE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},dE(e,t)}function FW(e,t,r){return t=MW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MW(e){var t=nLe(e,"string");return Am(t)=="symbol"?t:t+""}function nLe(e,t){if(Am(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Am(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uE.apply(this,arguments)}function sLe(e){var t=e.xAxisId,r=$T(),s=FT(),a=yW(t);return a==null?null:w.createElement(op,uE({},a,{className:xr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return Jl(o,!0)}}))}var yl=function(e){function t(){return QOe(this,t),ZOe(this,t,arguments)}return rLe(t,e),JOe(t,[{key:"render",value:function(){return w.createElement(sLe,this.props)}}])}(w.Component);FW(yl,"displayName","XAxis");FW(yl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Em(e){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Em(e)}function aLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,UW(s.key),s)}}function iLe(e,t,r){return t&&jR(e.prototype,t),r&&jR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oLe(e,t,r){return t=sj(t),lLe(e,BW()?Reflect.construct(t,r||[],sj(e).constructor):t.apply(e,r))}function lLe(e,t){if(t&&(Em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cLe(e)}function cLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BW=function(){return!!e})()}function sj(e){return sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sj(e)}function dLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fE(e,t)}function fE(e,t){return fE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},fE(e,t)}function zW(e,t,r){return t=UW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UW(e){var t=uLe(e,"string");return Em(t)=="symbol"?t:t+""}function uLe(e,t){if(Em(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Em(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hE(){return hE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hE.apply(this,arguments)}var fLe=function(t){var r=t.yAxisId,s=$T(),a=FT(),i=bW(r);return i==null?null:w.createElement(op,hE({},i,{className:xr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return Jl(l,!0)}}))},bl=function(e){function t(){return aLe(this,t),oLe(this,t,arguments)}return dLe(t,e),iLe(t,[{key:"render",value:function(){return w.createElement(fLe,this.props)}}])}(w.Component);zW(bl,"displayName","YAxis");zW(bl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function wR(e){return vLe(e)||pLe(e)||mLe(e)||hLe()}function hLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mLe(e,t){if(e){if(typeof e=="string")return mE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mE(e,t)}}function pLe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vLe(e){if(Array.isArray(e))return mE(e)}function mE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var pE=function(t,r,s,a,i){var o=Yi(t,BT),l=Yi(t,Yw),c=[].concat(wR(o),wR(l)),d=Yi(t,Qw),f="".concat(a,"Id"),u=a[0],h=r;if(c.length&&(h=c.reduce(function(g,p){if(p.props[f]===s&&xl(p.props,"extendDomain")&&lt(p.props[u])){var x=p.props[u];return[Math.min(g[0],x),Math.max(g[1],x)]}return g},h)),d.length){var m="".concat(u,"1"),v="".concat(u,"2");h=d.reduce(function(g,p){if(p.props[f]===s&&xl(p.props,"extendDomain")&&lt(p.props[m])&&lt(p.props[v])){var x=p.props[m],b=p.props[v];return[Math.min(g[0],x,b),Math.max(g[1],x,b)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,p){return lt(p)?[Math.min(g[0],p),Math.max(g[1],p)]:g},h)),h},VW={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function i(c,d,f,u,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,u||c,h),v=r?r+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,u;if(this._eventsCount===0)return d;for(u in f=this._events)t.call(f,u)&&d.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=r?r+d:d,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,m=u.length,v=new Array(m);h<m;h++)v[h]=u[h].fn;return v},l.prototype.listenerCount=function(d){var f=r?r+d:d,u=this._events[f];return u?u.fn?1:u.length:0},l.prototype.emit=function(d,f,u,h,m,v){var g=r?r+d:d;if(!this._events[g])return!1;var p=this._events[g],x=arguments.length,b,y;if(p.fn){switch(p.once&&this.removeListener(d,p.fn,void 0,!0),x){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,f),!0;case 3:return p.fn.call(p.context,f,u),!0;case 4:return p.fn.call(p.context,f,u,h),!0;case 5:return p.fn.call(p.context,f,u,h,m),!0;case 6:return p.fn.call(p.context,f,u,h,m,v),!0}for(y=1,b=new Array(x-1);y<x;y++)b[y-1]=arguments[y];p.fn.apply(p.context,b)}else{var j=p.length,E;for(y=0;y<j;y++)switch(p[y].once&&this.removeListener(d,p[y].fn,void 0,!0),x){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,f);break;case 3:p[y].fn.call(p[y].context,f,u);break;case 4:p[y].fn.call(p[y].context,f,u,h);break;default:if(!b)for(E=1,b=new Array(x-1);E<x;E++)b[E-1]=arguments[E];p[y].fn.apply(p[y].context,b)}}return!0},l.prototype.on=function(d,f,u){return i(this,d,f,u,!1)},l.prototype.once=function(d,f,u){return i(this,d,f,u,!0)},l.prototype.removeListener=function(d,f,u,h){var m=r?r+d:d;if(!this._events[m])return this;if(!f)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===f&&(!h||v.once)&&(!u||v.context===u)&&o(this,m);else{for(var g=0,p=[],x=v.length;g<x;g++)(v[g].fn!==f||h&&!v[g].once||u&&v[g].context!==u)&&p.push(v[g]);p.length?this._events[m]=p.length===1?p[0]:p:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&o(this,f)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(VW);var gLe=VW.exports;const xLe=kr(gLe);var zS=new xLe,US="recharts.syncMouseEvents";function dx(e){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function yLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WW(s.key),s)}}function bLe(e,t,r){return t&&NR(e.prototype,t),r&&NR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VS(e,t,r){return t=WW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WW(e){var t=jLe(e,"string");return dx(t)=="symbol"?t:t+""}function jLe(e,t){if(dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(dx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wLe=function(){function e(){yLe(this,e),VS(this,"activeIndex",0),VS(this,"coordinateList",[]),VS(this,"layout","horizontal")}return bLe(e,[{key:"setDetails",value:function(r){var s,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,f=r.offset,u=f===void 0?null:f,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((s=window)===null||s===void 0?void 0:s.scrollY)||0,u=i+c+d,h=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:u,pageY:h})}}}])}();function NLe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&lt(s)&&lt(a))return!0}return!1}function SLe(e,t,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function qW(e){var t=e.cx,r=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,o=Ms(t,r,s,a),l=Ms(t,r,s,i);return{points:[o,l],cx:t,cy:r,radius:s,startAngle:a,endAngle:i}}function CLe(e,t,r){var s,a,i,o;if(e==="horizontal")s=t.x,i=s,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,s=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,f=t.outerRadius,u=t.angle,h=Ms(l,c,d,u),m=Ms(l,c,f,u);s=h.x,a=h.y,i=m.x,o=m.y}else return qW(t);return[{x:s,y:a},{x:i,y:o}]}function ux(e){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux(e)}function SR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Oy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SR(Object(r),!0).forEach(function(s){ALe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ALe(e,t,r){return t=ELe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ELe(e){var t=PLe(e,"string");return ux(t)=="symbol"?t:t+""}function PLe(e,t){if(ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(ux(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TLe(e){var t,r,s=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,u=e.layout,h=e.chartName,m=(t=s.props.cursor)!==null&&t!==void 0?t:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var v,g=Uh;if(h==="ScatterChart")v=o,g=C_e;else if(h==="BarChart")v=SLe(u,o,c,f),g=kT;else if(u==="radial"){var p=qW(o),x=p.cx,b=p.cy,y=p.radius,j=p.startAngle,E=p.endAngle;v={cx:x,cy:b,startAngle:j,endAngle:E,innerRadius:y,outerRadius:y},g=KV}else v={points:CLe(u,o,c)},g=Uh;var A=Oy(Oy(Oy(Oy({stroke:"#ccc",pointerEvents:"none"},c),v),ar(m,!1)),{},{payload:l,payloadIndex:d,className:xr("recharts-tooltip-cursor",m.className)});return w.isValidElement(m)?w.cloneElement(m,A):w.createElement(g,A)}var _Le=["item"],ILe=["children","className","width","height","style","compact","title","desc"];function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Eh.apply(this,arguments)}function CR(e,t){return OLe(e)||DLe(e,t)||GW(e,t)||kLe()}function kLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function OLe(e){if(Array.isArray(e))return e}function AR(e,t){if(e==null)return{};var r=LLe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function LLe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function RLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ER(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,KW(s.key),s)}}function $Le(e,t,r){return t&&ER(e.prototype,t),r&&ER(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function FLe(e,t,r){return t=aj(t),MLe(e,HW()?Reflect.construct(t,r||[],aj(e).constructor):t.apply(e,r))}function MLe(e,t){if(t&&(Pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BLe(e)}function BLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HW=function(){return!!e})()}function aj(e){return aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aj(e)}function zLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vE(e,t)}function vE(e,t){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},vE(e,t)}function Tm(e){return WLe(e)||VLe(e)||GW(e)||ULe()}function ULe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GW(e,t){if(e){if(typeof e=="string")return gE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gE(e,t)}}function VLe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WLe(e){if(Array.isArray(e))return gE(e)}function gE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function PR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PR(Object(r),!0).forEach(function(s){Bt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Bt(e,t,r){return t=KW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KW(e){var t=qLe(e,"string");return Pm(t)=="symbol"?t:t+""}function qLe(e,t){if(Pm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Pm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HLe={xAxis:["bottom","top"],yAxis:["left","right"]},GLe={width:"100%",height:"100%"},YW={x:0,y:0};function Ly(e){return e}var KLe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},YLe=function(t,r,s,a){var i=r.find(function(f){return f&&f.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return Ke(Ke(Ke({},a),Ms(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return Ke(Ke(Ke({},a),Ms(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return YW},Jw=function(t,r){var s=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Tm(l),Tm(d)):l},[]);return o.length>0?o:t&&t.length&&lt(a)&&lt(i)?t.slice(a,i+1):[]};function XW(e){return e==="number"?[0,"auto"]:void 0}var xE=function(t,r,s,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Jw(r,t);return s<0||!i||!i.length||s>=l.length?null:i.reduce(function(c,d){var f,u=(f=d.props.data)!==null&&f!==void 0?f:r;u&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=u===void 0?l:u;h=a1(m,o.dataKey,a)}else h=u&&u[s]||l[s];return h?[].concat(Tm(c),[qV(d,h)]):c},[])},TR=function(t,r,s,a){var i=a||{x:t.chartX,y:t.chartY},o=KLe(i,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,f=hPe(o,l,d,c);if(f>=0&&d){var u=d[f]&&d[f].value,h=xE(t,r,f,u),m=YLe(s,l,f,i);return{activeTooltipIndex:f,activeLabel:u,activePayload:h,activeCoordinate:m}}return null},XLe=function(t,r){var s=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,u=t.children,h=t.stackOffset,m=UV(f,i);return s.reduce(function(v,g){var p,x=g.type.defaultProps!==void 0?Ke(Ke({},g.type.defaultProps),g.props):g.props,b=x.type,y=x.dataKey,j=x.allowDataOverflow,E=x.allowDuplicatedCategory,A=x.scale,C=x.ticks,S=x.includeHidden,T=x[o];if(v[T])return v;var O=Jw(t.data,{graphicalItems:a.filter(function(L){var V,G=o in L.props?L.props[o]:(V=L.type.defaultProps)===null||V===void 0?void 0:V[o];return G===T}),dataStartIndex:c,dataEndIndex:d}),_=O.length,N,D,I;NLe(x.domain,j,b)&&(N=OA(x.domain,null,j),m&&(b==="number"||A!=="auto")&&(I=Hv(O,y,"category")));var R=XW(b);if(!N||N.length===0){var M,$=(M=x.domain)!==null&&M!==void 0?M:R;if(y){if(N=Hv(O,y,b),b==="category"&&m){var B=axe(N);E&&B?(D=N,N=q1(0,_)):E||(N=QL($,N,g).reduce(function(L,V){return L.indexOf(V)>=0?L:[].concat(Tm(L),[V])},[]))}else if(b==="category")E?N=N.filter(function(L){return L!==""&&!or(L)}):N=QL($,N,g).reduce(function(L,V){return L.indexOf(V)>=0||V===""||or(V)?L:[].concat(Tm(L),[V])},[]);else if(b==="number"){var U=xPe(O,a.filter(function(L){var V,G,Z=o in L.props?L.props[o]:(V=L.type.defaultProps)===null||V===void 0?void 0:V[o],ee="hide"in L.props?L.props.hide:(G=L.type.defaultProps)===null||G===void 0?void 0:G.hide;return Z===T&&(S||!ee)}),y,i,f);U&&(N=U)}m&&(b==="number"||A!=="auto")&&(I=Hv(O,y,"category"))}else m?N=q1(0,_):l&&l[T]&&l[T].hasStack&&b==="number"?N=h==="expand"?[0,1]:WV(l[T].stackGroups,c,d):N=zV(O,a.filter(function(L){var V=o in L.props?L.props[o]:L.type.defaultProps[o],G="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return V===T&&(S||!G)}),b,f,!0);if(b==="number")N=pE(u,N,T,i,C),$&&(N=OA($,N,j));else if(b==="category"&&$){var q=$,W=N.every(function(L){return q.indexOf(L)>=0});W&&(N=q)}}return Ke(Ke({},v),{},Bt({},T,Ke(Ke({},x),{},{axisType:i,domain:N,categoricalDomain:I,duplicateDomain:D,originalDomain:(p=x.domain)!==null&&p!==void 0?p:R,isCategorical:m,layout:f})))},{})},QLe=function(t,r){var s=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,u=t.children,h=Jw(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),m=h.length,v=UV(f,i),g=-1;return s.reduce(function(p,x){var b=x.type.defaultProps!==void 0?Ke(Ke({},x.type.defaultProps),x.props):x.props,y=b[o],j=XW("number");if(!p[y]){g++;var E;return v?E=q1(0,m):l&&l[y]&&l[y].hasStack?(E=WV(l[y].stackGroups,c,d),E=pE(u,E,y,i)):(E=OA(j,zV(h,s.filter(function(A){var C,S,T=o in A.props?A.props[o]:(C=A.type.defaultProps)===null||C===void 0?void 0:C[o],O="hide"in A.props?A.props.hide:(S=A.type.defaultProps)===null||S===void 0?void 0:S.hide;return T===y&&!O}),"number",f),a.defaultProps.allowDataOverflow),E=pE(u,E,y,i)),Ke(Ke({},p),{},Bt({},y,Ke(Ke({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ki(HLe,"".concat(i,".").concat(g%2),null),domain:E,originalDomain:j,isCategorical:v,layout:f})))}return p},{})},JLe=function(t,r){var s=r.axisType,a=s===void 0?"xAxis":s,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.children,u="".concat(a,"Id"),h=Yi(f,i),m={};return h&&h.length?m=XLe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=QLe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},ZLe=function(t){var r=td(t),s=Jl(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:aT(s,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:R1(r,s)}},_R=function(t){var r=t.children,s=t.defaultShowTooltip,a=li(r,xm),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},e6e=function(t){return!t||!t.length?!1:t.some(function(r){var s=rc(r&&r.type);return s&&s.indexOf("Bar")>=0})},IR=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},t6e=function(t,r){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,f=s.height,u=s.children,h=s.margin||{},m=li(u,xm),v=li(u,Mh),g=Object.keys(c).reduce(function(E,A){var C=c[A],S=C.orientation;return!C.mirror&&!C.hide?Ke(Ke({},E),{},Bt({},S,E[S]+C.width)):E},{left:h.left||0,right:h.right||0}),p=Object.keys(o).reduce(function(E,A){var C=o[A],S=C.orientation;return!C.mirror&&!C.hide?Ke(Ke({},E),{},Bt({},S,Ki(E,"".concat(S))+C.height)):E},{top:h.top||0,bottom:h.bottom||0}),x=Ke(Ke({},p),g),b=x.bottom;m&&(x.bottom+=m.props.height||xm.defaultProps.height),v&&r&&(x=vPe(x,a,s,r));var y=d-x.left-x.right,j=f-x.top-x.bottom;return Ke(Ke({brushBottom:b},x),{},{width:Math.max(y,0),height:Math.max(j,0)})},r6e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},VT=function(t){var r=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,f=t.formatAxisMap,u=t.defaultProps,h=function(x,b){var y=b.graphicalItems,j=b.stackGroups,E=b.offset,A=b.updateId,C=b.dataStartIndex,S=b.dataEndIndex,T=x.barSize,O=x.layout,_=x.barGap,N=x.barCategoryGap,D=x.maxBarSize,I=IR(O),R=I.numericAxisName,M=I.cateAxisName,$=e6e(y),B=[];return y.forEach(function(U,q){var W=Jw(x.data,{graphicalItems:[U],dataStartIndex:C,dataEndIndex:S}),L=U.type.defaultProps!==void 0?Ke(Ke({},U.type.defaultProps),U.props):U.props,V=L.dataKey,G=L.maxBarSize,Z=L["".concat(R,"Id")],ee=L["".concat(M,"Id")],he={},me=c.reduce(function(rt,nt){var vt=b["".concat(nt.axisType,"Map")],Me=L["".concat(nt.axisType,"Id")];vt&&vt[Me]||nt.axisType==="zAxis"||kd(!1);var Je=vt[Me];return Ke(Ke({},rt),{},Bt(Bt({},nt.axisType,Je),"".concat(nt.axisType,"Ticks"),Jl(Je)))},he),oe=me[M],we=me["".concat(M,"Ticks")],ve=j&&j[Z]&&j[Z].hasStack&&_Pe(U,j[Z].stackGroups),pe=rc(U.type).indexOf("Bar")>=0,De=R1(oe,we),xe=[],le=$&&mPe({barSize:T,stackGroups:j,totalSize:r6e(me,M)});if(pe){var re,Se,Ne=or(G)?D:G,ye=(re=(Se=R1(oe,we,!0))!==null&&Se!==void 0?Se:Ne)!==null&&re!==void 0?re:0;xe=pPe({barGap:_,barCategoryGap:N,bandSize:ye!==De?ye:De,sizeList:le[ee],maxBarSize:Ne}),ye!==De&&(xe=xe.map(function(rt){return Ke(Ke({},rt),{},{position:Ke(Ke({},rt.position),{},{offset:rt.position.offset-ye/2})})}))}var $e=U&&U.type&&U.type.getComposedData;$e&&B.push({props:Ke(Ke({},$e(Ke(Ke({},me),{},{displayedData:W,props:x,dataKey:V,item:U,bandSize:De,barPosition:xe,offset:E,stackedData:ve,layout:O,dataStartIndex:C,dataEndIndex:S}))),{},Bt(Bt(Bt({key:U.key||"item-".concat(q)},R,me[R]),M,me[M]),"animationId",A)),childIndex:gxe(U,x.children),item:U})}),B},m=function(x,b){var y=x.props,j=x.dataStartIndex,E=x.dataEndIndex,A=x.updateId;if(!zD({props:y}))return null;var C=y.children,S=y.layout,T=y.stackOffset,O=y.data,_=y.reverseStackOrder,N=IR(S),D=N.numericAxisName,I=N.cateAxisName,R=Yi(C,s),M=EPe(O,R,"".concat(D,"Id"),"".concat(I,"Id"),T,_),$=c.reduce(function(L,V){var G="".concat(V.axisType,"Map");return Ke(Ke({},L),{},Bt({},G,JLe(y,Ke(Ke({},V),{},{graphicalItems:R,stackGroups:V.axisType===D&&M,dataStartIndex:j,dataEndIndex:E}))))},{}),B=t6e(Ke(Ke({},$),{},{props:y,graphicalItems:R}),b==null?void 0:b.legendBBox);Object.keys($).forEach(function(L){$[L]=f(y,$[L],B,L.replace("Map",""),r)});var U=$["".concat(I,"Map")],q=ZLe(U),W=h(y,Ke(Ke({},$),{},{dataStartIndex:j,dataEndIndex:E,updateId:A,graphicalItems:R,stackGroups:M,offset:B}));return Ke(Ke({formattedGraphicalItems:W,graphicalItems:R,offset:B,stackGroups:M},q),$)},v=function(p){function x(b){var y,j,E;return RLe(this,x),E=FLe(this,x,[b]),Bt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Bt(E,"accessibilityManager",new wLe),Bt(E,"handleLegendBBoxUpdate",function(A){if(A){var C=E.state,S=C.dataStartIndex,T=C.dataEndIndex,O=C.updateId;E.setState(Ke({legendBBox:A},m({props:E.props,dataStartIndex:S,dataEndIndex:T,updateId:O},Ke(Ke({},E.state),{},{legendBBox:A}))))}}),Bt(E,"handleReceiveSyncEvent",function(A,C,S){if(E.props.syncId===A){if(S===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(C)}}),Bt(E,"handleBrushChange",function(A){var C=A.startIndex,S=A.endIndex;if(C!==E.state.dataStartIndex||S!==E.state.dataEndIndex){var T=E.state.updateId;E.setState(function(){return Ke({dataStartIndex:C,dataEndIndex:S},m({props:E.props,dataStartIndex:C,dataEndIndex:S,updateId:T},E.state))}),E.triggerSyncEvent({dataStartIndex:C,dataEndIndex:S})}}),Bt(E,"handleMouseEnter",function(A){var C=E.getMouseInfo(A);if(C){var S=Ke(Ke({},C),{},{isTooltipActive:!0});E.setState(S),E.triggerSyncEvent(S);var T=E.props.onMouseEnter;sr(T)&&T(S,A)}}),Bt(E,"triggeredAfterMouseMove",function(A){var C=E.getMouseInfo(A),S=C?Ke(Ke({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(S),E.triggerSyncEvent(S);var T=E.props.onMouseMove;sr(T)&&T(S,A)}),Bt(E,"handleItemMouseEnter",function(A){E.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),Bt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Bt(E,"handleMouseMove",function(A){A.persist(),E.throttleTriggeredAfterMouseMove(A)}),Bt(E,"handleMouseLeave",function(A){E.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};E.setState(C),E.triggerSyncEvent(C);var S=E.props.onMouseLeave;sr(S)&&S(C,A)}),Bt(E,"handleOuterEvent",function(A){var C=vxe(A),S=Ki(E.props,"".concat(C));if(C&&sr(S)){var T,O;/.*touch.*/i.test(C)?O=E.getMouseInfo(A.changedTouches[0]):O=E.getMouseInfo(A),S((T=O)!==null&&T!==void 0?T:{},A)}}),Bt(E,"handleClick",function(A){var C=E.getMouseInfo(A);if(C){var S=Ke(Ke({},C),{},{isTooltipActive:!0});E.setState(S),E.triggerSyncEvent(S);var T=E.props.onClick;sr(T)&&T(S,A)}}),Bt(E,"handleMouseDown",function(A){var C=E.props.onMouseDown;if(sr(C)){var S=E.getMouseInfo(A);C(S,A)}}),Bt(E,"handleMouseUp",function(A){var C=E.props.onMouseUp;if(sr(C)){var S=E.getMouseInfo(A);C(S,A)}}),Bt(E,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),Bt(E,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.handleMouseDown(A.changedTouches[0])}),Bt(E,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.handleMouseUp(A.changedTouches[0])}),Bt(E,"handleDoubleClick",function(A){var C=E.props.onDoubleClick;if(sr(C)){var S=E.getMouseInfo(A);C(S,A)}}),Bt(E,"handleContextMenu",function(A){var C=E.props.onContextMenu;if(sr(C)){var S=E.getMouseInfo(A);C(S,A)}}),Bt(E,"triggerSyncEvent",function(A){E.props.syncId!==void 0&&zS.emit(US,E.props.syncId,A,E.eventEmitterSymbol)}),Bt(E,"applySyncEvent",function(A){var C=E.props,S=C.layout,T=C.syncMethod,O=E.state.updateId,_=A.dataStartIndex,N=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)E.setState(Ke({dataStartIndex:_,dataEndIndex:N},m({props:E.props,dataStartIndex:_,dataEndIndex:N,updateId:O},E.state)));else if(A.activeTooltipIndex!==void 0){var D=A.chartX,I=A.chartY,R=A.activeTooltipIndex,M=E.state,$=M.offset,B=M.tooltipTicks;if(!$)return;if(typeof T=="function")R=T(B,A);else if(T==="value"){R=-1;for(var U=0;U<B.length;U++)if(B[U].value===A.activeLabel){R=U;break}}var q=Ke(Ke({},$),{},{x:$.left,y:$.top}),W=Math.min(D,q.x+q.width),L=Math.min(I,q.y+q.height),V=B[R]&&B[R].value,G=xE(E.state,E.props.data,R),Z=B[R]?{x:S==="horizontal"?B[R].coordinate:W,y:S==="horizontal"?L:B[R].coordinate}:YW;E.setState(Ke(Ke({},A),{},{activeLabel:V,activeCoordinate:Z,activePayload:G,activeTooltipIndex:R}))}else E.setState(A)}),Bt(E,"renderCursor",function(A){var C,S=E.state,T=S.isTooltipActive,O=S.activeCoordinate,_=S.activePayload,N=S.offset,D=S.activeTooltipIndex,I=S.tooltipAxisBandSize,R=E.getTooltipEventType(),M=(C=A.props.active)!==null&&C!==void 0?C:T,$=E.props.layout,B=A.key||"_recharts-cursor";return ce.createElement(TLe,{key:B,activeCoordinate:O,activePayload:_,activeTooltipIndex:D,chartName:r,element:A,isActive:M,layout:$,offset:N,tooltipAxisBandSize:I,tooltipEventType:R})}),Bt(E,"renderPolarAxis",function(A,C,S){var T=Ki(A,"type.axisType"),O=Ki(E.state,"".concat(T,"Map")),_=A.type.defaultProps,N=_!==void 0?Ke(Ke({},_),A.props):A.props,D=O&&O[N["".concat(T,"Id")]];return w.cloneElement(A,Ke(Ke({},D),{},{className:xr(T,D.className),key:A.key||"".concat(C,"-").concat(S),ticks:Jl(D,!0)}))}),Bt(E,"renderPolarGrid",function(A){var C=A.props,S=C.radialLines,T=C.polarAngles,O=C.polarRadius,_=E.state,N=_.radiusAxisMap,D=_.angleAxisMap,I=td(N),R=td(D),M=R.cx,$=R.cy,B=R.innerRadius,U=R.outerRadius;return w.cloneElement(A,{polarAngles:Array.isArray(T)?T:Jl(R,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(O)?O:Jl(I,!0).map(function(q){return q.coordinate}),cx:M,cy:$,innerRadius:B,outerRadius:U,key:A.key||"polar-grid",radialLines:S})}),Bt(E,"renderLegend",function(){var A=E.state.formattedGraphicalItems,C=E.props,S=C.children,T=C.width,O=C.height,_=E.props.margin||{},N=T-(_.left||0)-(_.right||0),D=MV({children:S,formattedGraphicalItems:A,legendWidth:N,legendContent:d});if(!D)return null;var I=D.item,R=AR(D,_Le);return w.cloneElement(I,Ke(Ke({},R),{},{chartWidth:T,chartHeight:O,margin:_,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Bt(E,"renderTooltip",function(){var A,C=E.props,S=C.children,T=C.accessibilityLayer,O=li(S,Fa);if(!O)return null;var _=E.state,N=_.isTooltipActive,D=_.activeCoordinate,I=_.activePayload,R=_.activeLabel,M=_.offset,$=(A=O.props.active)!==null&&A!==void 0?A:N;return w.cloneElement(O,{viewBox:Ke(Ke({},M),{},{x:M.left,y:M.top}),active:$,label:R,payload:$?I:[],coordinate:D,accessibilityLayer:T})}),Bt(E,"renderBrush",function(A){var C=E.props,S=C.margin,T=C.data,O=E.state,_=O.offset,N=O.dataStartIndex,D=O.dataEndIndex,I=O.updateId;return w.cloneElement(A,{key:A.key||"_recharts-brush",onChange:_y(E.handleBrushChange,A.props.onChange),data:T,x:lt(A.props.x)?A.props.x:_.left,y:lt(A.props.y)?A.props.y:_.top+_.height+_.brushBottom-(S.bottom||0),width:lt(A.props.width)?A.props.width:_.width,startIndex:N,endIndex:D,updateId:"brush-".concat(I)})}),Bt(E,"renderReferenceElement",function(A,C,S){if(!A)return null;var T=E,O=T.clipPathId,_=E.state,N=_.xAxisMap,D=_.yAxisMap,I=_.offset,R=A.type.defaultProps||{},M=A.props,$=M.xAxisId,B=$===void 0?R.xAxisId:$,U=M.yAxisId,q=U===void 0?R.yAxisId:U;return w.cloneElement(A,{key:A.key||"".concat(C,"-").concat(S),xAxis:N[B],yAxis:D[q],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:O})}),Bt(E,"renderActivePoints",function(A){var C=A.item,S=A.activePoint,T=A.basePoint,O=A.childIndex,_=A.isRange,N=[],D=C.props.key,I=C.item.type.defaultProps!==void 0?Ke(Ke({},C.item.type.defaultProps),C.item.props):C.item.props,R=I.activeDot,M=I.dataKey,$=Ke(Ke({index:O,dataKey:M,cx:S.x,cy:S.y,r:4,fill:IT(C.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},ar(R,!1)),i1(R));return N.push(x.renderActiveDot(R,$,"".concat(D,"-activePoint-").concat(O))),T?N.push(x.renderActiveDot(R,Ke(Ke({},$),{},{cx:T.x,cy:T.y}),"".concat(D,"-basePoint-").concat(O))):_&&N.push(null),N}),Bt(E,"renderGraphicChild",function(A,C,S){var T=E.filterFormatItem(A,C,S);if(!T)return null;var O=E.getTooltipEventType(),_=E.state,N=_.isTooltipActive,D=_.tooltipAxis,I=_.activeTooltipIndex,R=_.activeLabel,M=E.props.children,$=li(M,Fa),B=T.props,U=B.points,q=B.isRange,W=B.baseLine,L=T.item.type.defaultProps!==void 0?Ke(Ke({},T.item.type.defaultProps),T.item.props):T.item.props,V=L.activeDot,G=L.hide,Z=L.activeBar,ee=L.activeShape,he=!!(!G&&N&&$&&(V||Z||ee)),me={};O!=="axis"&&$&&$.props.trigger==="click"?me={onClick:_y(E.handleItemMouseEnter,A.props.onClick)}:O!=="axis"&&(me={onMouseLeave:_y(E.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:_y(E.handleItemMouseEnter,A.props.onMouseEnter)});var oe=w.cloneElement(A,Ke(Ke({},T.props),me));function we(nt){return typeof D.dataKey=="function"?D.dataKey(nt.payload):null}if(he)if(I>=0){var ve,pe;if(D.dataKey&&!D.allowDuplicatedCategory){var De=typeof D.dataKey=="function"?we:"payload.".concat(D.dataKey.toString());ve=a1(U,De,R),pe=q&&W&&a1(W,De,R)}else ve=U==null?void 0:U[I],pe=q&&W&&W[I];if(ee||Z){var xe=A.props.activeIndex!==void 0?A.props.activeIndex:I;return[w.cloneElement(A,Ke(Ke(Ke({},T.props),me),{},{activeIndex:xe})),null,null]}if(!or(ve))return[oe].concat(Tm(E.renderActivePoints({item:T,activePoint:ve,basePoint:pe,childIndex:I,isRange:q})))}else{var le,re=(le=E.getItemByXY(E.state.activeCoordinate))!==null&&le!==void 0?le:{graphicalItem:oe},Se=re.graphicalItem,Ne=Se.item,ye=Ne===void 0?A:Ne,$e=Se.childIndex,rt=Ke(Ke(Ke({},T.props),me),{},{activeIndex:$e});return[w.cloneElement(ye,rt),null,null]}return q?[oe,null,null]:[oe,null]}),Bt(E,"renderCustomized",function(A,C,S){return w.cloneElement(A,Ke(Ke({key:"recharts-customized-".concat(S)},E.props),E.state))}),Bt(E,"renderMap",{CartesianGrid:{handler:Ly,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:Ly},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:Ly},YAxis:{handler:Ly},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((y=b.id)!==null&&y!==void 0?y:ep("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=FU(E.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),E.state={},E}return zLe(x,p),$Le(x,[{key:"componentDidMount",value:function(){var y,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,j=y.children,E=y.data,A=y.height,C=y.layout,S=li(j,Fa);if(S){var T=S.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,_=xE(this.state,E,T,O),N=this.state.tooltipTicks[T].coordinate,D=(this.state.offset.top+A)/2,I=C==="horizontal",R=I?{x:N,y:D}:{y:N,x:D},M=this.state.formattedGraphicalItems.find(function(B){var U=B.item;return U.type.name==="Scatter"});M&&(R=Ke(Ke({},R),M.props.points[T].tooltipPosition),_=M.props.points[T].tooltipPayload);var $={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:O,activePayload:_,activeCoordinate:R};this.setState($),this.renderCursor(S),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var E,A;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(y){YC([li(y.children,Fa)],[li(this.props.children,Fa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=li(this.props.children,Fa);if(y&&typeof y.props.shared=="boolean"){var j=y.props.shared?"axis":"item";return l.indexOf(j)>=0?j:i}return i}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var j=this.container,E=j.getBoundingClientRect(),A=B5e(E),C={chartX:Math.round(y.pageX-A.left),chartY:Math.round(y.pageY-A.top)},S=E.width/j.offsetWidth||1,T=this.inRange(C.chartX,C.chartY,S);if(!T)return null;var O=this.state,_=O.xAxisMap,N=O.yAxisMap,D=this.getTooltipEventType(),I=TR(this.state,this.props.data,this.props.layout,T);if(D!=="axis"&&_&&N){var R=td(_).scale,M=td(N).scale,$=R&&R.invert?R.invert(C.chartX):null,B=M&&M.invert?M.invert(C.chartY):null;return Ke(Ke({},C),{},{xValue:$,yValue:B},I)}return I?Ke(Ke({},C),I):null}},{key:"inRange",value:function(y,j){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,C=y/E,S=j/E;if(A==="horizontal"||A==="vertical"){var T=this.state.offset,O=C>=T.left&&C<=T.left+T.width&&S>=T.top&&S<=T.top+T.height;return O?{x:C,y:S}:null}var _=this.state,N=_.angleAxisMap,D=_.radiusAxisMap;if(N&&D){var I=td(N);return e6({x:C,y:S},I)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,j=this.getTooltipEventType(),E=li(y,Fa),A={};E&&j==="axis"&&(E.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=i1(this.props,this.handleOuterEvent);return Ke(Ke({},C),A)}},{key:"addListener",value:function(){zS.on(US,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){zS.removeListener(US,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,j,E){for(var A=this.state.formattedGraphicalItems,C=0,S=A.length;C<S;C++){var T=A[C];if(T.item===y||T.props.key===y.key||j===rc(T.item.type)&&E===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,j=this.state.offset,E=j.left,A=j.top,C=j.height,S=j.width;return ce.createElement("defs",null,ce.createElement("clipPath",{id:y},ce.createElement("rect",{x:E,y:A,height:C,width:S})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(j,E){var A=CR(E,2),C=A[0],S=A[1];return Ke(Ke({},j),{},Bt({},C,S.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(j,E){var A=CR(E,2),C=A[0],S=A[1];return Ke(Ke({},j),{},Bt({},C,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[y])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(y){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[y])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(y){var j=this.state,E=j.formattedGraphicalItems,A=j.activeItem;if(E&&E.length)for(var C=0,S=E.length;C<S;C++){var T=E[C],O=T.props,_=T.item,N=_.type.defaultProps!==void 0?Ke(Ke({},_.type.defaultProps),_.props):_.props,D=rc(_.type);if(D==="Bar"){var I=(O.data||[]).find(function(B){return p_e(y,B)});if(I)return{graphicalItem:T,payload:I}}else if(D==="RadialBar"){var R=(O.data||[]).find(function(B){return e6(y,B)});if(R)return{graphicalItem:T,payload:R}}else if(qw(T,A)||Hw(T,A)||ax(T,A)){var M=xIe({graphicalItem:T,activeTooltipItem:A,itemData:N.data}),$=N.activeIndex===void 0?M:N.activeIndex;return{graphicalItem:Ke(Ke({},T),{},{childIndex:$}),payload:ax(T,A)?N.data[M]:T.props.data[M]}}}return null}},{key:"render",value:function(){var y=this;if(!zD(this))return null;var j=this.props,E=j.children,A=j.className,C=j.width,S=j.height,T=j.style,O=j.compact,_=j.title,N=j.desc,D=AR(j,ILe),I=ar(D,!1);if(O)return ce.createElement(Z6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement(QC,Eh({},I,{width:C,height:S,title:_,desc:N}),this.renderClipPath(),VD(E,this.renderMap)));if(this.props.accessibilityLayer){var R,M;I.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,I.role=(M=this.props.role)!==null&&M!==void 0?M:"application",I.onKeyDown=function(B){y.accessibilityManager.keyboardEvent(B)},I.onFocus=function(){y.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return ce.createElement(Z6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement("div",Eh({className:xr("recharts-wrapper",A),style:Ke({position:"relative",cursor:"default",width:C,height:S},T)},$,{ref:function(U){y.container=U}}),ce.createElement(QC,Eh({},I,{width:C,height:S,title:_,desc:N,style:GLe}),this.renderClipPath(),VD(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(w.Component);Bt(v,"displayName",r),Bt(v,"defaultProps",Ke({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Bt(v,"getDerivedStateFromProps",function(p,x){var b=p.dataKey,y=p.data,j=p.children,E=p.width,A=p.height,C=p.layout,S=p.stackOffset,T=p.margin,O=x.dataStartIndex,_=x.dataEndIndex;if(x.updateId===void 0){var N=_R(p);return Ke(Ke(Ke({},N),{},{updateId:0},m(Ke(Ke({props:p},N),{},{updateId:0}),x)),{},{prevDataKey:b,prevData:y,prevWidth:E,prevHeight:A,prevLayout:C,prevStackOffset:S,prevMargin:T,prevChildren:j})}if(b!==x.prevDataKey||y!==x.prevData||E!==x.prevWidth||A!==x.prevHeight||C!==x.prevLayout||S!==x.prevStackOffset||!Fh(T,x.prevMargin)){var D=_R(p),I={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},R=Ke(Ke({},TR(x,y,C)),{},{updateId:x.updateId+1}),M=Ke(Ke(Ke({},D),I),R);return Ke(Ke(Ke({},M),m(Ke({props:p},M),x)),{},{prevDataKey:b,prevData:y,prevWidth:E,prevHeight:A,prevLayout:C,prevStackOffset:S,prevMargin:T,prevChildren:j})}if(!YC(j,x.prevChildren)){var $,B,U,q,W=li(j,xm),L=W&&($=(B=W.props)===null||B===void 0?void 0:B.startIndex)!==null&&$!==void 0?$:O,V=W&&(U=(q=W.props)===null||q===void 0?void 0:q.endIndex)!==null&&U!==void 0?U:_,G=L!==O||V!==_,Z=!or(y),ee=Z&&!G?x.updateId:x.updateId+1;return Ke(Ke({updateId:ee},m(Ke(Ke({props:p},x),{},{updateId:ee,dataStartIndex:L,dataEndIndex:V}),x)),{},{prevChildren:j,dataStartIndex:L,dataEndIndex:V})}return null}),Bt(v,"renderActiveDot",function(p,x,b){var y;return w.isValidElement(p)?y=w.cloneElement(p,x):sr(p)?y=p(x):y=ce.createElement(Ww,x),ce.createElement(sn,{className:"recharts-active-dot",key:b},y)});var g=w.forwardRef(function(x,b){return ce.createElement(v,Eh({},x,{ref:b}))});return g.displayName=v.displayName,g},n6e=VT({chartName:"LineChart",GraphicalChild:Wx,axisComponents:[{axisType:"xAxis",AxisComp:yl},{axisType:"yAxis",AxisComp:bl}],formatAxisMap:DT}),QW=VT({chartName:"BarChart",GraphicalChild:Yd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:yl},{axisType:"yAxis",AxisComp:bl}],formatAxisMap:DT}),JW=VT({chartName:"AreaChart",GraphicalChild:Nc,axisComponents:[{axisType:"xAxis",AxisComp:yl},{axisType:"yAxis",AxisComp:bl}],formatAxisMap:DT});const kR={totalApiCalls:123456,activeUsers:85,storageUsedGB:12.5,emailsSent:5678,smsSent:3456,modulesEnabled:10,dailyApiCalls:[{date:"2024-06-20",calls:1200},{date:"2024-06-21",calls:1500},{date:"2024-06-22",calls:1300},{date:"2024-06-23",calls:1800},{date:"2024-06-24",calls:1600},{date:"2024-06-25",calls:2e3},{date:"2024-06-26",calls:1900}],moduleUsage:[{name:"CRM & Prospecting",usage:45e3},{name:"Inventory Management",usage:3e4},{name:"Quote Builder",usage:15e3},{name:"Service Operations",usage:1e4},{name:"Delivery Tracker",usage:5e3}]};function s6e(){const{toast:e}=_t(),[t,r]=w.useState(kR),[s,a]=w.useState("7d"),[i,o]=w.useState(!1),l=async()=>{o(!0);try{await new Promise(d=>setTimeout(d,1500)),r(kR),e({title:"Usage Stats Refreshed",description:"Latest usage data has been loaded."})}catch{e({title:"Error",description:"Failed to refresh usage stats.",variant:"destructive"})}finally{o(!1)}},c=()=>{e({title:"Export Initiated",description:"Usage data is being prepared for download."})};return n.jsx("div",{className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(es,{className:"h-5 w-5 mr-2 text-primary"}),"Platform Usage Statistics"]}),n.jsx(Be,{children:"Monitor key performance indicators and usage trends"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:l,disabled:i,children:[i?n.jsx(Jh,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(Jh,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:c,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsxs(fe,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:"Total API Calls"}),n.jsx(el,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.totalApiCalls.toLocaleString()}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:"Active Users"}),n.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.activeUsers}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently logged in"})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:"Storage Used"}),n.jsx(XM,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[t.storageUsedGB," GB"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total across all tenants"})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium",children:"Emails Sent"}),n.jsx(on,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.emailsSent.toLocaleString()}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Daily API Calls"}),n.jsx(Be,{children:"API call volume over time"})]}),n.jsx(fe,{className:"h-64",children:n.jsx(Vv,{width:"100%",height:"100%",children:n.jsxs(JW,{data:t.dailyApiCalls,children:[n.jsx(yl,{dataKey:"date",tick:{fontSize:10}}),n.jsx(bl,{tick:{fontSize:10}}),n.jsx(iE,{strokeDasharray:"3 3"}),n.jsx(Fa,{}),n.jsx(Nc,{type:"monotone",dataKey:"calls",stroke:"#8884d8",fill:"#8884d8"})]})})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Module Usage"}),n.jsx(Be,{children:"API calls by module"})]}),n.jsx(fe,{className:"h-64",children:n.jsx(Vv,{width:"100%",height:"100%",children:n.jsxs(QW,{data:t.moduleUsage,layout:"vertical",children:[n.jsx(yl,{type:"number",tick:{fontSize:10}}),n.jsx(bl,{type:"category",dataKey:"name",tick:{fontSize:10},width:120}),n.jsx(Fa,{}),n.jsx(Yd,{dataKey:"usage",fill:"#82ca9d"})]})})})]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Usage Trends"}),n.jsx(Be,{children:"Historical data and forecasts"})]}),n.jsxs(fe,{children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(ae,{htmlFor:"timeframe",children:"Timeframe:"}),n.jsxs(We,{value:s,onValueChange:a,children:[n.jsx(Ue,{className:"w-[120px]",children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"7d",children:"Last 7 Days"}),n.jsx(K,{value:"30d",children:"Last 30 Days"}),n.jsx(K,{value:"90d",children:"Last 90 Days"}),n.jsx(K,{value:"1y",children:"Last Year"})]})]})]}),n.jsx("div",{className:"h-64",children:n.jsx(Vv,{width:"100%",height:"100%",children:n.jsxs(n6e,{data:t.dailyApiCalls,margin:{top:5,right:30,left:20,bottom:5},children:[n.jsx(yl,{dataKey:"date",tick:{fontSize:10}}),n.jsx(bl,{tick:{fontSize:10}}),n.jsx(iE,{strokeDasharray:"3 3"}),n.jsx(Fa,{}),n.jsx(Wx,{type:"monotone",dataKey:"calls",stroke:"#8884d8",activeDot:{r:8}})]})})})]})]})]})]})})}const DR=[{id:"1",timestamp:new Date("2024-06-27T10:00:00Z"),actor:"admin@renterinsight.com",action:"tenant_created",target:"Demo RV Dealership",status:"success",details:"New tenant organization created",type:"tenant"},{id:"2",timestamp:new Date("2024-06-27T10:05:00Z"),actor:"admin@renterinsight.com",action:"api_token_generated",target:"Production API Key",status:"success",details:"New API token generated for production environment",type:"api_token"},{id:"3",timestamp:new Date("2024-06-27T10:10:00Z"),actor:"manager@demorv.com",action:"module_disabled",target:"Commission Engine",status:"success",details:"Module disabled by tenant manager",type:"module"},{id:"4",timestamp:new Date("2024-06-27T10:15:00Z"),actor:"system",action:"email_sent",target:"john.doe@example.com",status:"success",details:"Welcome email sent to new lead",type:"email"},{id:"5",timestamp:new Date("2024-06-27T10:20:00Z"),actor:"system",action:"sms_failed",target:"+15551234567",status:"failure",details:"SMS delivery failed due to invalid number",type:"sms"},{id:"6",timestamp:new Date("2024-06-27T10:25:00Z"),actor:"admin@renterinsight.com",action:"user_login",target:"admin@renterinsight.com",status:"success",details:"User logged in",type:"user"},{id:"7",timestamp:new Date("2024-06-27T10:30:00Z"),actor:"system",action:"database_backup",target:"daily_backup_20240627",status:"success",details:"Daily database backup completed",type:"database"},{id:"8",timestamp:new Date("2024-06-27T10:35:00Z"),actor:"admin@renterinsight.com",action:"settings_updated",target:"Tenant Settings",status:"success",details:"Tenant branding settings updated",type:"settings"}];function a6e(){const[e,t]=w.useState(DR),[r,s]=w.useState(""),[a,i]=w.useState("all"),[o,l]=w.useState("all"),c=v=>{switch(v){case"tenant_created":case"tenant_updated":case"tenant_deleted":return n.jsx(xg,{className:"h-4 w-4"});case"api_token_generated":case"api_token_revoked":return n.jsx(LX,{className:"h-4 w-4"});case"module_enabled":case"module_disabled":return n.jsx(bg,{className:"h-4 w-4"});case"email_sent":case"email_failed":return n.jsx(on,{className:"h-4 w-4"});case"sms_sent":case"sms_failed":return n.jsx(Pn,{className:"h-4 w-4"});case"user_login":case"user_logout":case"user_role_changed":return n.jsx(As,{className:"h-4 w-4"});case"database_backup":case"database_restore":return n.jsx(XM,{className:"h-4 w-4"});case"settings_updated":return n.jsx(bg,{className:"h-4 w-4"});case"permission_changed":return n.jsx(_j,{className:"h-4 w-4"});case"system_error":return n.jsx(Po,{className:"h-4 w-4"});case"system_event":return n.jsx(ur,{className:"h-4 w-4"});default:return n.jsx(Ns,{className:"h-4 w-4"})}},d=v=>{switch(v){case"success":return"bg-green-50 text-green-700 border-green-200";case"failure":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=v=>{switch(v){case"tenant":return"bg-blue-50 text-blue-700 border-blue-200";case"api_token":return"bg-purple-50 text-purple-700 border-purple-200";case"module":return"bg-orange-50 text-orange-700 border-orange-200";case"email":case"sms":return"bg-green-50 text-green-700 border-green-200";case"user":return"bg-indigo-50 text-indigo-700 border-indigo-200";case"database":return"bg-teal-50 text-teal-700 border-teal-200";case"settings":return"bg-pink-50 text-pink-700 border-pink-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=e.filter(v=>{const g=v.actor.toLowerCase().includes(r.toLowerCase())||v.target.toLowerCase().includes(r.toLowerCase())||v.details.toLowerCase().includes(r.toLowerCase()),p=a==="all"||v.type===a,x=o==="all"||v.status===o;return g&&p&&x}),h=()=>{t(DR),s(""),i("all"),l("all"),console.log("Refreshing audit logs...")},m=()=>{console.log("Exporting audit logs...")};return n.jsx("div",{className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(K_,{className:"h-5 w-5 mr-2 text-primary"}),"Audit Logs"]}),n.jsx(Be,{children:"View system audit logs and activity"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:h,children:[n.jsx(Jh,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:m,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsxs(fe,{children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(hs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{placeholder:"Search logs...",value:r,onChange:v=>s(v.target.value),className:"pl-10"})]}),n.jsxs(We,{value:a,onValueChange:i,children:[n.jsx(Ue,{className:"w-[180px]",children:n.jsx(qe,{placeholder:"Filter by Type"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Types"}),n.jsx(K,{value:"tenant",children:"Tenant"}),n.jsx(K,{value:"user",children:"User"}),n.jsx(K,{value:"api_token",children:"API Token"}),n.jsx(K,{value:"module",children:"Module"}),n.jsx(K,{value:"email",children:"Email"}),n.jsx(K,{value:"sms",children:"SMS"}),n.jsx(K,{value:"database",children:"Database"}),n.jsx(K,{value:"settings",children:"Settings"})]})]}),n.jsxs(We,{value:o,onValueChange:l,children:[n.jsx(Ue,{className:"w-[180px]",children:n.jsx(qe,{placeholder:"Filter by Status"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"all",children:"All Statuses"}),n.jsx(K,{value:"success",children:"Success"}),n.jsx(K,{value:"failure",children:"Failure"})]})]})]}),n.jsx("div",{className:"space-y-4",children:u.length>0?u.map(v=>{const g=c(v.action);return n.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[n.jsx("div",{className:Ge("flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",d(v.status).replace("text-","bg-").replace("border-","")),children:g}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-semibold",children:v.action.replace(/_/g," ").toUpperCase()}),n.jsx(Fe,{className:Ge("text-xs",d(v.status)),children:v.status.toUpperCase()}),n.jsx(Fe,{className:Ge("text-xs",f(v.type)),children:v.type.toUpperCase()})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:ft(v.timestamp)})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[n.jsx("span",{className:"font-medium",children:v.actor})," performed action on ",n.jsx("span",{className:"font-medium",children:v.target})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:v.details})]})]},v.id)}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(K_,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No audit logs found"}),n.jsx("p",{className:"text-sm",children:"Adjust your filters or refresh the logs"})]})})]})]})})}function i6e({onSave:e,onCancel:t}){const{toast:r}=_t(),[s,a]=w.useState(!1),[i,o]=w.useState({name:"",domain:"",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},isActive:!0}),l=async c=>{if(c.preventDefault(),!i.name||!i.domain){r({title:"Validation Error",description:"Tenant name and domain are required",variant:"destructive"});return}a(!0);try{await e(i),r({title:"Success",description:"Tenant created successfully"})}catch{r({title:"Error",description:"Failed to create tenant",variant:"destructive"})}finally{a(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(xg,{className:"h-5 w-5 mr-2 text-primary"}),"Add New Tenant"]}),n.jsx(Be,{children:"Create a new tenant organization"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:l,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Tenant Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Tenant Name *"}),n.jsx(Pe,{id:"name",value:i.name,onChange:c=>o(d=>({...d,name:c.target.value})),placeholder:"e.g., Sunshine RV Dealership"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"domain",children:"Domain *"}),n.jsx(Pe,{id:"domain",value:i.domain,onChange:c=>o(d=>({...d,domain:c.target.value})),placeholder:"e.g., sunshine.renterinsight.com"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used for tenant-specific access"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"timezone",children:"Timezone"}),n.jsxs(We,{value:i.settings.timezone,onValueChange:c=>o(d=>({...d,settings:{...d.settings,timezone:c}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"America/New_York",children:"Eastern Time (ET)"}),n.jsx(K,{value:"America/Chicago",children:"Central Time (CT)"}),n.jsx(K,{value:"America/Denver",children:"Mountain Time (MT)"}),n.jsx(K,{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"currency",children:"Currency"}),n.jsxs(We,{value:i.settings.currency,onValueChange:c=>o(d=>({...d,settings:{...d.settings,currency:c}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"USD",children:"US Dollar (USD)"}),n.jsx(K,{value:"CAD",children:"Canadian Dollar (CAD)"}),n.jsx(K,{value:"EUR",children:"Euro (EUR)"}),n.jsx(K,{value:"GBP",children:"British Pound (GBP)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dateFormat",children:"Date Format"}),n.jsxs(We,{value:i.settings.dateFormat,onValueChange:c=>o(d=>({...d,settings:{...d.settings,dateFormat:c}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"MM/dd/yyyy",children:"MM/DD/YYYY"}),n.jsx(K,{value:"dd/MM/yyyy",children:"DD/MM/YYYY"}),n.jsx(K,{value:"yyyy-MM-dd",children:"YYYY-MM-DD"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(i.settings.features).map(([c,d])=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:`feature-${c}`,checked:d,onCheckedChange:f=>o(u=>({...u,settings:{...u.settings,features:{...u.settings.features,[c]:!!f}}}))}),n.jsx(ae,{htmlFor:`feature-${c}`,className:"capitalize",children:c==="crm"?"CRM & Prospecting":c==="invoices"?"Invoice & Payments":c})]},c))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Branding"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"primaryColor",children:"Primary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"primaryColor",value:i.branding.primaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,primaryColor:c.target.value}})),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:i.branding.primaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,primaryColor:c.target.value}})),className:"shadow-sm"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"secondaryColor",children:"Secondary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"secondaryColor",value:i.branding.secondaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,secondaryColor:c.target.value}})),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:i.branding.secondaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,secondaryColor:c.target.value}})),className:"shadow-sm"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"fontFamily",children:"Font Family"}),n.jsxs(We,{value:i.branding.fontFamily,onValueChange:c=>o(d=>({...d,branding:{...d.branding,fontFamily:c}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"Inter",children:"Inter"}),n.jsx(K,{value:"Roboto",children:"Roboto"}),n.jsx(K,{value:"Open Sans",children:"Open Sans"}),n.jsx(K,{value:"Montserrat",children:"Montserrat"})]})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isActive",checked:i.isActive,onCheckedChange:c=>o(d=>({...d,isActive:!!c}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active tenant"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(J,{type:"button",variant:"outline",onClick:t,disabled:s,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Create Tenant"]})})]})]})})]})})}function o6e({tenantId:e,user:t,onSave:r,onCancel:s}){const{toast:a}=_t(),[i,o]=w.useState(!1),[l,c]=w.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",role:(t==null?void 0:t.role)||Ao.USER,isActive:(t==null?void 0:t.is_active)!==!1,sendInvite:!t}),d=async f=>{if(f.preventDefault(),!l.name||!l.email){a({title:"Validation Error",description:"Name and email are required",variant:"destructive"});return}o(!0);try{const u={id:t==null?void 0:t.id,...l,tenantId:e,createdAt:(t==null?void 0:t.created_at)||new Date};await r(u),a({title:"Success",description:`User ${t?"updated":"added"} successfully`})}catch{a({title:"Error",description:`Failed to ${t?"update":"add"} user`,variant:"destructive"})}finally{o(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-md",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(As,{className:"h-5 w-5 mr-2 text-primary"}),t?"Edit User":"Add User"]}),n.jsx(Be,{children:t?"Update user details":"Add a new user to this tenant"})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Full Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(As,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"name",value:l.name,onChange:f=>c(u=>({...u,name:f.target.value})),placeholder:"John Smith",className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"email",children:"Email Address *"}),n.jsxs("div",{className:"relative",children:[n.jsx(on,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"email",type:"email",value:l.email,onChange:f=>c(u=>({...u,email:f.target.value})),placeholder:"john.smith@example.com",className:"pl-10",disabled:!!t})]}),t&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed for existing users"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"role",children:"Role"}),n.jsxs("div",{className:"relative",children:[n.jsx(_j,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsxs(We,{value:l.role,onValueChange:f=>c(u=>({...u,role:f})),children:[n.jsx(Ue,{className:"pl-10",children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:Ao.ADMIN,children:"Admin"}),n.jsx(K,{value:Ao.MANAGER,children:"Manager"}),n.jsx(K,{value:Ao.SALES,children:"Sales"}),n.jsx(K,{value:Ao.SERVICE,children:"Service"}),n.jsx(K,{value:Ao.USER,children:"User"})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isActive",checked:l.isActive,onCheckedChange:f=>c(u=>({...u,isActive:!!f}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active user"})]}),!t&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"sendInvite",checked:l.sendInvite,onCheckedChange:f=>c(u=>({...u,sendInvite:!!f}))}),n.jsx(ae,{htmlFor:"sendInvite",children:"Send invitation email"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:s,disabled:i,children:"Cancel"}),n.jsx(J,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),t?"Update User":"Add User"]})})]})]})})]})})}const l6e=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Od(()=>Promise.resolve().then(()=>lp),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class WT extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class c6e extends WT{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class d6e extends WT{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class u6e extends WT{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yE;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yE||(yE={}));var f6e=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class h6e{constructor(t,{headers:r={},customFetch:s,region:a=yE.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=l6e(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return f6e(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(v=>{throw new c6e(v)}),u=f.headers.get("x-relay-error");if(u&&u==="true")throw new d6e(f);if(!f.ok)throw new u6e(f);let h=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield f.json():h==="application/octet-stream"?m=yield f.blob():h==="text/event-stream"?m=f:h==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null}}catch(a){return{data:null,error:a}}})}}var za={},qT={},Zw={},qx={},e2={},t2={},m6e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_m=m6e();const p6e=_m.fetch,ZW=_m.fetch.bind(_m),eq=_m.Headers,v6e=_m.Request,g6e=_m.Response,lp=Object.freeze(Object.defineProperty({__proto__:null,Headers:eq,Request:v6e,Response:g6e,default:ZW,fetch:p6e},Symbol.toStringTag,{value:"Module"})),x6e=JR(lp);var r2={};Object.defineProperty(r2,"__esModule",{value:!0});let y6e=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};r2.default=y6e;var tq=rs&&rs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t2,"__esModule",{value:!0});const b6e=tq(x6e),j6e=tq(r2);let w6e=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=b6e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,f=null,u=null,h=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=x:f=JSON.parse(x))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&p&&p.length>1&&(u=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,u=null,h=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(f=[],d=null,h=200,m="OK")}catch{i.status===404&&g===""?(h=204,m="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,h=200,m="OK"),d&&this.shouldThrowOnError)throw new j6e.default(d)}return{error:d,data:f,count:u,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};t2.default=w6e;var N6e=rs&&rs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e2,"__esModule",{value:!0});const S6e=N6e(t2);let C6e=class extends S6e.default{select(t){let r=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};e2.default=C6e;var A6e=rs&&rs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qx,"__esModule",{value:!0});const E6e=A6e(e2);let P6e=class extends E6e.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};qx.default=P6e;var T6e=rs&&rs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zw,"__esModule",{value:!0});const xv=T6e(qx);let _6e=class{constructor(t,{headers:r={},schema:s,fetch:a}){this.url=t,this.headers=r,this.schema=s,this.fetch=a}select(t,{head:r=!1,count:s}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new xv.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:s=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new xv.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new xv.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const s="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new xv.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new xv.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Zw.default=_6e;var n2={},s2={};Object.defineProperty(s2,"__esModule",{value:!0});s2.version=void 0;s2.version="0.0.0-automated";Object.defineProperty(n2,"__esModule",{value:!0});n2.DEFAULT_HEADERS=void 0;const I6e=s2;n2.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${I6e.version}`};var rq=rs&&rs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qT,"__esModule",{value:!0});const k6e=rq(Zw),D6e=rq(qx),O6e=n2;let L6e=class nq{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},O6e.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new k6e.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new nq(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;s||a?(o=s?"HEAD":"GET",Object.entries(r).filter(([f,u])=>u!==void 0).map(([f,u])=>[f,Array.isArray(u)?`{${u.join(",")}}`:`${u}`]).forEach(([f,u])=>{l.searchParams.append(f,u)})):(o="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new D6e.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};qT.default=L6e;var cp=rs&&rs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(za,"__esModule",{value:!0});za.PostgrestError=za.PostgrestBuilder=za.PostgrestTransformBuilder=za.PostgrestFilterBuilder=za.PostgrestQueryBuilder=za.PostgrestClient=void 0;const sq=cp(qT);za.PostgrestClient=sq.default;const aq=cp(Zw);za.PostgrestQueryBuilder=aq.default;const iq=cp(qx);za.PostgrestFilterBuilder=iq.default;const oq=cp(e2);za.PostgrestTransformBuilder=oq.default;const lq=cp(t2);za.PostgrestBuilder=lq.default;const cq=cp(r2);za.PostgrestError=cq.default;var R6e=za.default={PostgrestClient:sq.default,PostgrestQueryBuilder:aq.default,PostgrestFilterBuilder:iq.default,PostgrestTransformBuilder:oq.default,PostgrestBuilder:lq.default,PostgrestError:cq.default};const{PostgrestClient:$6e,PostgrestQueryBuilder:K$e,PostgrestFilterBuilder:Y$e,PostgrestTransformBuilder:X$e,PostgrestBuilder:Q$e,PostgrestError:J$e}=R6e;function F6e(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const M6e=F6e(),B6e="2.11.15",z6e=`realtime-js/${B6e}`,U6e="1.0.0",dq=1e4,V6e=1e3;var Yv;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Yv||(Yv={}));var Zs;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zs||(Zs={}));var So;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(So||(So={}));var bE;(function(e){e.websocket="websocket"})(bE||(bE={}));var wu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(wu||(wu={}));class W6e{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(t.slice(o,o+a));o=o+a;const c=s.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(s.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class uq{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var en;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(en||(en={}));const OR=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((i,o)=>(i[o]=q6e(o,e,t,a),i),{})},q6e=(e,t,r,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?fq(i,o):jE(o)},fq=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Y6e(t,r)}switch(e){case en.bool:return H6e(t);case en.float4:case en.float8:case en.int2:case en.int4:case en.int8:case en.numeric:case en.oid:return G6e(t);case en.json:case en.jsonb:return K6e(t);case en.timestamp:return X6e(t);case en.abstime:case en.date:case en.daterange:case en.int4range:case en.int8range:case en.money:case en.reltime:case en.text:case en.time:case en.timestamptz:case en.timetz:case en.tsrange:case en.tstzrange:return jE(t);default:return jE(t)}},jE=e=>e,H6e=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},G6e=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},K6e=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Y6e=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>fq(t,l))}return e},X6e=e=>typeof e=="string"?e.replace(" ","T"):e,hq=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class WS{constructor(t,r,s={},a=dq){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var LR;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(LR||(LR={}));class Xv{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xv.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Xv.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Xv.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,f)=>{o[d]||(c[d]=f)}),this.map(o,(d,f)=>{const u=i[d];if(u){const h=f.map(p=>p.presence_ref),m=u.map(p=>p.presence_ref),v=f.filter(p=>m.indexOf(p.presence_ref)<0),g=u.filter(p=>h.indexOf(p.presence_ref)<0);v.length>0&&(l[d]=v),g.length>0&&(c[d]=g)}else l[d]=f}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),f.length>0){const u=t[l].map(m=>m.presence_ref),h=f.filter(m=>u.indexOf(m.presence_ref)<0);t[l].unshift(...h)}s(l,f,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const f=c.map(u=>u.presence_ref);d=d.filter(u=>f.indexOf(u.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var RR;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(RR||(RR={}));var $R;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})($R||($R={}));var Wl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wl||(Wl={}));class HT{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Zs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new WS(this,So.join,this.params,this.timeout),this.rejoinTimer=new uq(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zs.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Zs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(So.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Xv(this),this.broadcastEndpointURL=hq(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Zs.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(f=>t==null?void 0:t(Wl.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Wl.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var u;if(this.socket.setAuth(),f===void 0){t==null||t(Wl.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,v=[];for(let g=0;g<m;g++){const p=h[g],{filter:{event:x,schema:b,table:y,filter:j}}=p,E=f&&f[g];if(E&&E.event===x&&E.schema===b&&E.table===y&&E.filter===j)v.push(Object.assign(Object.assign({},p),{id:E.id}));else{this.unsubscribe(),this.state=Zs.errored,t==null||t(Wl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Wl.SUBSCRIBED);return}}).receive("error",f=>{this.state=Zs.errored,t==null||t(Wl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Wl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this._on(t,r,s)}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zs.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(So.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new WS(this,So.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new WS(this,t,r,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:f}=So;if(s&&[l,c,d,f].indexOf(o)>=0&&s!==this._joinRef())return;let h=this._onMessage(o,r,s);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var v,g,p;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((p=(g=m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(m=>m.callback(h,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,g,p,x,b,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,E=(v=m.filter)===null||v===void 0?void 0:v.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const j=(b=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:g,table:p,commit_timestamp:x,type:b,errors:y}=v;h=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:x,eventType:b,new:{},old:{},errors:y}),this._getPayloadRecords(v))}m.callback(h,s)})}_isClosed(){return this.state===Zs.closed}_isJoined(){return this.state===Zs.joined}_isJoining(){return this.state===Zs.joining}_isLeaving(){return this.state===Zs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&HT.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(So.close,{},t)}_onError(t){this._on(So.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=OR(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=OR(t.columns,t.old_record)),r}}const FR=()=>{},Q6e=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class J6e{constructor(t,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dq,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=FR,this.ref=0,this.logger=FR,this.conn=null,this.sendBuffer=[],this.serializer=new W6e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Od(()=>Promise.resolve().then(()=>lp),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${bE.websocket}`,this.httpEndpoint=hq(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new uq(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=M6e),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:U6e}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Yv.connecting:return wu.Connecting;case Yv.open:return wu.Open;case Yv.closing:return wu.Closing;default:return wu.Closed}}isConnected(){return this.connectionState()===wu.Open}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new HT(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:z6e};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(So.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(V6e,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:s,event:a,payload:i,ref:o}=r;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(So.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([Q6e],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class GT extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function bs(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Z6e extends GT{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class wE extends GT{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var eRe=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const mq=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Od(()=>Promise.resolve().then(()=>lp),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},tRe=()=>eRe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Od(()=>Promise.resolve().then(()=>lp),void 0)).Response:Response}),NE=e=>{if(Array.isArray(e))return e.map(r=>NE(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=NE(s)}),t};var Nf=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const qS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rRe=(e,t,r)=>Nf(void 0,void 0,void 0,function*(){const s=yield tRe();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new Z6e(qS(a),e.status||500))}).catch(a=>{t(new wE(qS(a),a))}):t(new wE(qS(e),e))}),nRe=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),r))};function Hx(e,t,r,s,a,i){return Nf(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,nRe(t,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>rRe(c,l,s))})})}function ij(e,t,r,s){return Nf(this,void 0,void 0,function*(){return Hx(e,"GET",t,r,s)})}function Xc(e,t,r,s,a){return Nf(this,void 0,void 0,function*(){return Hx(e,"POST",t,s,a,r)})}function sRe(e,t,r,s,a){return Nf(this,void 0,void 0,function*(){return Hx(e,"PUT",t,s,a,r)})}function aRe(e,t,r,s){return Nf(this,void 0,void 0,function*(){return Hx(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function pq(e,t,r,s,a){return Nf(this,void 0,void 0,function*(){return Hx(e,"DELETE",t,s,a,r)})}var Ra=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const iRe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},MR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class oRe{constructor(t,r={},s,a){this.url=t,this.headers=r,this.bucketId=s,this.fetch=mq(a)}uploadOrUpdate(t,r,s,a){return Ra(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},MR),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),f=this._getFinalPath(d),u=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield u.json();return u.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(bs(i))return{data:null,error:i};throw i}})}upload(t,r,s){return Ra(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Ra(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:MR.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const u=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),h=yield u.json();return u.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(bs(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ra(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Xc(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new GT("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}update(t,r,s){return Ra(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Ra(this,void 0,void 0,function*(){try{return{data:yield Xc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(bs(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Ra(this,void 0,void 0,function*(){try{return{data:{path:(yield Xc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(bs(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Ra(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Xc(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(bs(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Ra(this,void 0,void 0,function*(){try{const a=yield Xc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(bs(a))return{data:null,error:a};throw a}})}download(t,r){return Ra(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ij(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(bs(l))return{data:null,error:l};throw l}})}info(t){return Ra(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield ij(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:NE(s),error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}exists(t){return Ra(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield aRe(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(bs(s)&&s instanceof wE){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return Ra(this,void 0,void 0,function*(){try{return{data:yield pq(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(bs(r))return{data:null,error:r};throw r}})}list(t,r,s){return Ra(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},iRe),r),{prefix:t||""});return{data:yield Xc(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(bs(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const lRe="2.7.1",cRe={"X-Client-Info":`storage-js/${lRe}`};var ah=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class dRe{constructor(t,r={},s){this.url=t,this.headers=Object.assign(Object.assign({},cRe),r),this.fetch=mq(s)}listBuckets(){return ah(this,void 0,void 0,function*(){try{return{data:yield ij(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(bs(t))return{data:null,error:t};throw t}})}getBucket(t){return ah(this,void 0,void 0,function*(){try{return{data:yield ij(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(bs(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ah(this,void 0,void 0,function*(){try{return{data:yield Xc(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return ah(this,void 0,void 0,function*(){try{return{data:yield sRe(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}emptyBucket(t){return ah(this,void 0,void 0,function*(){try{return{data:yield Xc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(bs(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ah(this,void 0,void 0,function*(){try{return{data:yield pq(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(bs(r))return{data:null,error:r};throw r}})}}class uRe extends dRe{constructor(t,r={},s){super(t,r,s)}from(t){return new oRe(this.url,this.headers,t,this.fetch)}}const fRe="2.50.2";let Cv="";typeof Deno<"u"?Cv="deno":typeof document<"u"?Cv="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cv="react-native":Cv="node";const hRe={"X-Client-Info":`supabase-js-${Cv}/${fRe}`},mRe={headers:hRe},pRe={schema:"public"},vRe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gRe={};var xRe=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const yRe=e=>{let t;return e?t=e:typeof fetch>"u"?t=ZW:t=fetch,(...r)=>t(...r)},bRe=()=>typeof Headers>"u"?eq:Headers,jRe=(e,t,r)=>{const s=yRe(r),a=bRe();return(i,o)=>xRe(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:d}))})};var wRe=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};function NRe(e){return e.endsWith("/")?e:e+"/"}function SRe(e,t){var r,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:f,global:u}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},f),o),global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>wRe(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const vq="2.70.0",fh=30*1e3,SE=3,HS=SE*fh,CRe="http://localhost:9999",ARe="supabase.auth.token",ERe={"X-Client-Info":`gotrue-js/${vq}`},CE="X-Supabase-Api-Version",gq={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PRe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,TRe=6e5;class KT extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function nr(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _Re extends KT{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function IRe(e){return nr(e)&&e.name==="AuthApiError"}class xq extends KT{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Xd extends KT{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class Hc extends Xd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kRe(e){return nr(e)&&e.name==="AuthSessionMissingError"}class Ry extends Xd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $y extends Xd{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fy extends Xd{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DRe(e){return nr(e)&&e.name==="AuthImplicitGrantRedirectError"}class BR extends Xd{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AE extends Xd{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function GS(e){return nr(e)&&e.name==="AuthRetryableFetchError"}class zR extends Xd{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Qv extends Xd{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),UR=` 	
\r=`.split(""),ORe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<UR.length;t+=1)e[UR[t].charCodeAt(0)]=-2;for(let t=0;t<oj.length;t+=1)e[oj[t].charCodeAt(0)]=t;return e})();function VR(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(oj[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(oj[s]),t.queuedBits-=6}}function yq(e,t,r){const s=ORe[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function WR(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{$Re(o,s,r)};for(let o=0;o<e.length;o+=1)yq(e.charCodeAt(o),a,i);return t.join("")}function LRe(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function RRe(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}LRe(s,t)}}function $Re(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function FRe(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)yq(e.charCodeAt(a),r,s);return new Uint8Array(t)}function MRe(e){const t=[];return RRe(e,r=>t.push(r)),new Uint8Array(t)}function BRe(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>VR(a,r,s)),VR(null,r,s),t.join("")}function zRe(e){return Math.round(Date.now()/1e3)+e}function URe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const vo=()=>typeof window<"u"&&typeof document<"u",uu={tested:!1,writable:!1},Jv=()=>{if(!vo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(uu.tested)return uu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),uu.tested=!0,uu.writable=!0}catch{uu.tested=!0,uu.writable=!1}return uu.writable};function VRe(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const bq=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Od(()=>Promise.resolve().then(()=>lp),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},WRe=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",jq=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},My=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},By=async(e,t)=>{await e.removeItem(t)};class a2{constructor(){this.promise=new a2.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}a2.promiseConstructor=Promise;function KS(e){const t=e.split(".");if(t.length!==3)throw new Qv("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!PRe.test(t[s]))throw new Qv("JWT not in base64url format");return{header:JSON.parse(WR(t[0])),payload:JSON.parse(WR(t[1])),signature:FRe(t[2]),raw:{header:t[0],payload:t[1]}}}async function qRe(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function HRe(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function GRe(e){return("0"+e.toString(16)).substr(-2)}function KRe(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,GRe).join("")}async function YRe(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function XRe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await YRe(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ih(e,t,r=!1){const s=KRe();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await jq(e,`${t}-code-verifier`,a);const i=await XRe(s);return[i,s===i?"plain":"s256"]}const QRe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JRe(e){const t=e.headers.get(CE);if(!t||!t.match(QRe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ZRe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function e$e(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const t$e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oh(e){if(!t$e.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var r$e=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};const yu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),n$e=[502,503,504];async function qR(e){var t;if(!WRe(e))throw new AE(yu(e),0);if(n$e.includes(e.status))throw new AE(yu(e),e.status);let r;try{r=await e.json()}catch(i){throw new xq(yu(i),i)}let s;const a=JRe(e);if(a&&a.getTime()>=gq["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new zR(yu(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Hc}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new zR(yu(r),e.status,r.weak_password.reasons);throw new _Re(yu(r),e.status||500,s)}const s$e=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function dr(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[CE]||(i[CE]=gq["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await a$e(e,t,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function a$e(e,t,r,s,a,i){const o=s$e(t,s,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new AE(yu(c),0)}if(l.ok||await qR(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await qR(c)}}function zl(e){var t;let r=null;c$e(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=zRe(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function HR(e){const t=zl(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function rd(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function i$e(e){return{data:e,error:null}}function o$e(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=r$e(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function l$e(e){return e}function c$e(e){return e.access_token&&e.refresh_token&&e.expires_in}const YS=["global","local","others"];var d$e=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class u$e{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=bq(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=YS[0]){if(YS.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${YS.join(", ")}`);try{return await dr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(nr(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await dr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:rd})}catch(s){if(nr(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=d$e(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await dr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:o$e,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await dr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:rd})}catch(r){if(nr(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},f=await dr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:l$e});if(f.error)throw f.error;const u=await f.json(),h=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(v.split(";")[1].split("=")[1]);d[`${p}Page`]=g}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(nr(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){oh(t);try{return await dr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:rd})}catch(r){if(nr(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){oh(t);try{return await dr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:rd})}catch(s){if(nr(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){oh(t);try{return await dr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:rd})}catch(s){if(nr(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){oh(t.userId);try{const{data:r,error:s}=await dr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _deleteFactor(t){oh(t.userId),oh(t.id);try{return{data:await dr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}}}const f$e={getItem:e=>Jv()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Jv()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Jv()&&globalThis.localStorage.removeItem(e)}};function GR(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function h$e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const lh={debug:!!(globalThis&&Jv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wq extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class m$e extends wq{}async function p$e(e,t,r){lh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),lh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){lh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{lh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw lh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new m$e(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lh.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}h$e();const v$e={url:CRe,storageKey:ARe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ERe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function KR(e,t,r){return await r()}class fx{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fx.nextInstanceID,fx.nextInstanceID+=1,this.instanceID>0&&vo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},v$e),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new u$e({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=bq(a.fetch),this.lock=a.lock||KR,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:vo()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=p$e:this.lock=KR,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Jv()?this.storage=f$e:(this.memoryStorage={},this.storage=GR(this.memoryStorage)):(this.memoryStorage={},this.storage=GR(this.memoryStorage)),vo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vq}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=VRe(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),vo()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),DRe(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nr(r)?{error:r}:{error:new xq("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const i=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:zl}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(nr(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,s,a;try{let i;if("email"in t){const{email:f,password:u,options:h}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await ih(this.storage,this.storageKey)),i=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},xform:zl})}else if("phone"in t){const{phone:f,password:u,options:h}=t;i=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:u,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zl})}else throw new $y("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(nr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await dr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:HR})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await dr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:HR})}else throw new $y("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ry}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(nr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,a,i,o,l,c,d,f,u,h,m;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:p,wallet:x,statement:b,options:y}=t;let j;if(vo())if(typeof x=="object")j=x;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))j=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const E=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const A=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),b?{statement:b}:null));let C;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")C=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)C=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)v=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(a=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((d=y==null?void 0:y.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((u=(f=y==null?void 0:y.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||u===void 0)&&u.length?["Resources",...y.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const A=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=A}}try{const{data:p,error:x}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:BRe(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:zl});if(x)throw x;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Ry}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:x})}catch(p){if(nr(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const r=await My(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:i,error:o}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:zl});if(await By(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ry}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(nr(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=t,l=await dr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:zl}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ry}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(nr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await ih(this.storage,this.storageKey));const{error:u}=await dr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:f}=await dr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new $y("You must provide either an email or phone number.")}catch(l){if(nr(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,s;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await dr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:zl});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(nr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,s,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ih(this.storage,this.storageKey)),await dr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:i$e})}catch(i){if(nr(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Hc;const{error:a}=await dr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(nr(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:o}=await dr(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await dr(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new $y("You must provide either an email or phone number and a type")}catch(r){if(nr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await My(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<HS:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,f)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:rd}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hc}:await dr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:rd})})}catch(r){if(nr(r))return kRe(r)&&(await this._removeSession(),await By(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Hc;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ih(this.storage,this.storageKey));const{data:d,error:f}=await dr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:rd});if(f)throw f;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(nr(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hc;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=KS(t.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(nr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Hc;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(nr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!vo())throw new Fy("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fy(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new BR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fy("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new BR("No code detected.");const{data:b,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new Fy("No session defined in URL");const f=Math.round(Date.now()/1e3),u=parseInt(l);let h=f+u;c&&(h=parseInt(c));const m=h-f;m*1e3<=fh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${u}s`);const v=h-u;f-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,f):f-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,f);const{data:g,error:p}=await this._getUser(i);if(p)throw p;const x={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:u,expires_at:h,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(s){if(nr(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await My(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{error:i};const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(IRe(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await By(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=URe(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await ih(this.storage,this.storageKey,!0));try{return await dr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(nr(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,f;const{data:u,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dr(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return vo()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(nr(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await dr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await HRe(async a=>(a>0&&await qRe(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await dr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:zl})),(a,i)=>{const o=200*Math.pow(2,a);return i&&GS(i)&&Date.now()+o-s<fh})}catch(s){if(this._debug(r,"error",s),nr(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),vo()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await My(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<HS;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${HS}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),GS(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Hc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new a2;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Hc;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),nr(i)){const o={session:null,error:i};return GS(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await jq(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await By(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&vo()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),fh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/fh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${fh}ms, refresh threshold is ${SE} ticks`),a<=SE&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof wq)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await ih(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await dr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await dr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await dr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(nr(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await dr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(nr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],a=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=KS(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(o=>o.kid===t);if(s||(s=this.jwks.keys.find(o=>o.kid===t),s&&this.jwks_cached_at+TRe>Date.now()))return s;const{data:a,error:i}=await dr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new Qv("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),s=a.keys.find(o=>o.kid===t),!s)throw new Qv("No matching signing key found in JWKS");return s}async getClaims(t,r={keys:[]}){try{let s=t;if(!s){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};s=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=KS(s);if(ZRe(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=e$e(a.alg),f=await this.fetchJwk(a.kid,r),u=await crypto.subtle.importKey("jwk",f,d,!0,["verify"]);if(!await crypto.subtle.verify(d,u,o,MRe(`${l}.${c}`)))throw new Qv("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(nr(s))return{data:null,error:s};throw s}}}fx.nextInstanceID=0;const g$e=fx;class x$e extends g$e{constructor(t){super(t)}}var y$e=globalThis&&globalThis.__awaiter||function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(s.next(f))}catch(u){o(u)}}function c(f){try{d(s.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):a(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class b$e{constructor(t,r,s){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=NRe(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:pRe,realtime:gRe,auth:Object.assign(Object.assign({},vRe),{storageKey:d}),global:mRe},u=SRe(s??{},f);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=jRe(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new $6e(new URL("rest/v1",c).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new h6e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new uRe(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return y$e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,f){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x$e({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),d),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,flowType:o,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new J6e(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j$e=(e,t,r)=>new b$e(e,t,r),w$e=()=>j$e("https://stlqdeipenmafvrmxwdb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN0bHFkZWlwZW5tYWZ2cm14d2RiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3OTg1NjMsImV4cCI6MjA2NjM3NDU2M30.t3RCXpwrefZoEgBsbVqcnx9rXJYfCjOTbUoaLzTaJ8k");function N$e({tenant:e,onSave:t,onClose:r}){var S;const{toast:s}=_t(),[a,i]=w.useState(!1),[o,l]=w.useState("general"),[c,d]=w.useState([]),[f,u]=w.useState(!1),[h,m]=w.useState(!1),[v,g]=w.useState(null),[p,x]=w.useState({...e,settings:{...e.settings,features:((S=e.settings)==null?void 0:S.features)||{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},branding:e.branding||{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"}}),b=async T=>{if(T.preventDefault(),!p.name||!p.domain){s({title:"Validation Error",description:"Tenant name and domain are required",variant:"destructive"});return}i(!0);try{await t(e.id,{...p,status:p.isActive?"active":"inactive"}),s({title:"Success",description:"Tenant updated successfully"})}catch{s({title:"Error",description:"Failed to update tenant",variant:"destructive"})}finally{i(!1)}},y=T=>{switch(T){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};w.useEffect(()=>{o==="users"&&j()},[o,e.id]);const j=async()=>{u(!0);try{const T=w$e(),{data:O,error:_}=await T.rpc("get_tenant_users",{tenant_id_param:e.id});if(_)throw _;d(O||[])}catch(T){console.error("Error fetching tenant users:",T),s({title:"Error",description:"Failed to load users for this tenant",variant:"destructive"})}finally{u(!1)}},E=async T=>{try{console.log(v?"Updating user:":"Adding user:",T),v?(d(O=>O.map(_=>_.id===T.id?{..._,...T}:_)),s({title:"User Updated",description:`${T.name} has been updated successfully.`})):(d(O=>[...O,T]),s({title:"User Added",description:`${T.name} has been added successfully.`})),m(!1),g(null)}catch{s({title:v?"Update Error":"Add Error",description:`Failed to ${v?"update":"add"} user`,variant:"destructive"})}},A=T=>{g(T),m(!0)},C=async(T,O)=>{if(window.confirm(`Are you sure you want to delete user ${O}?`))try{console.log("Deleting user:",T),d(_=>_.filter(N=>N.id!==T)),s({title:"User Deleted",description:`${O} has been deleted successfully.`})}catch{s({title:"Delete Error",description:"Failed to delete user",variant:"destructive"})}};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[h&&n.jsx(o6e,{tenantId:e.id,user:v,onSave:E,onCancel:()=>{m(!1),g(null)}}),n.jsxs(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(je,{className:"text-xl",children:e.name}),n.jsx(Fe,{className:Ge("ri-badge-status",y(e.status)),children:e.status.toUpperCase()})]}),n.jsx(Be,{children:e.domain})]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(qt,{className:"h-4 w-4"})})]})}),n.jsxs(fe,{children:[n.jsxs(Ar,{value:o,onValueChange:l,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-5",children:[n.jsx(Ze,{value:"general",children:"General"}),n.jsx(Ze,{value:"features",children:"Features"}),n.jsx(Ze,{value:"branding",children:"Branding"}),n.jsx(Ze,{value:"users",children:"Users"}),n.jsx(Ze,{value:"activity",children:"Activity"})]}),n.jsxs(tt,{value:"general",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"name",children:"Tenant Name *"}),n.jsx(Pe,{id:"name",value:p.name,onChange:T=>x(O=>({...O,name:T.target.value})),placeholder:"e.g., Sunshine RV Dealership"})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"domain",children:"Domain *"}),n.jsx(Pe,{id:"domain",value:p.domain,onChange:T=>x(O=>({...O,domain:T.target.value})),placeholder:"e.g., sunshine.renterinsight.com"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used for tenant-specific access"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"timezone",children:"Timezone"}),n.jsxs(We,{value:p.settings.timezone,onValueChange:T=>x(O=>({...O,settings:{...O.settings,timezone:T}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"America/New_York",children:"Eastern Time (ET)"}),n.jsx(K,{value:"America/Chicago",children:"Central Time (CT)"}),n.jsx(K,{value:"America/Denver",children:"Mountain Time (MT)"}),n.jsx(K,{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"currency",children:"Currency"}),n.jsxs(We,{value:p.settings.currency,onValueChange:T=>x(O=>({...O,settings:{...O.settings,currency:T}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"USD",children:"US Dollar (USD)"}),n.jsx(K,{value:"CAD",children:"Canadian Dollar (CAD)"}),n.jsx(K,{value:"EUR",children:"Euro (EUR)"}),n.jsx(K,{value:"GBP",children:"British Pound (GBP)"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"dateFormat",children:"Date Format"}),n.jsxs(We,{value:p.settings.dateFormat,onValueChange:T=>x(O=>({...O,settings:{...O.settings,dateFormat:T}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"MM/dd/yyyy",children:"MM/DD/YYYY"}),n.jsx(K,{value:"dd/MM/yyyy",children:"DD/MM/YYYY"}),n.jsx(K,{value:"yyyy-MM-dd",children:"YYYY-MM-DD"})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:"isActive",checked:p.isActive,onCheckedChange:T=>x(O=>({...O,isActive:!!T}))}),n.jsx(ae,{htmlFor:"isActive",children:"Active tenant"})]})]}),n.jsxs(tt,{value:"features",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(p.settings.features).map(([T,O])=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{id:`feature-${T}`,checked:O,onCheckedChange:_=>x(N=>({...N,settings:{...N.settings,features:{...N.settings.features,[T]:!!_}}}))}),n.jsx(ae,{htmlFor:`feature-${T}`,className:"capitalize",children:T==="crm"?"CRM & Prospecting":T==="invoices"?"Invoice & Payments":T})]},T))})]}),n.jsxs(tt,{value:"branding",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Branding"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"primaryColor",children:"Primary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"primaryColor",value:p.branding.primaryColor,onChange:T=>x(O=>({...O,branding:{...O.branding,primaryColor:T.target.value}})),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:p.branding.primaryColor,onChange:T=>x(O=>({...O,branding:{...O.branding,primaryColor:T.target.value}})),className:"shadow-sm"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"secondaryColor",children:"Secondary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Pe,{type:"color",id:"secondaryColor",value:p.branding.secondaryColor,onChange:T=>x(O=>({...O,branding:{...O.branding,secondaryColor:T.target.value}})),className:"w-16 h-10 shadow-sm"}),n.jsx(Pe,{value:p.branding.secondaryColor,onChange:T=>x(O=>({...O,branding:{...O.branding,secondaryColor:T.target.value}})),className:"shadow-sm"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"fontFamily",children:"Font Family"}),n.jsxs(We,{value:p.branding.fontFamily,onValueChange:T=>x(O=>({...O,branding:{...O.branding,fontFamily:T}})),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"Inter",children:"Inter"}),n.jsx(K,{value:"Roboto",children:"Roboto"}),n.jsx(K,{value:"Open Sans",children:"Open Sans"}),n.jsx(K,{value:"Montserrat",children:"Montserrat"})]})]})]})]}),n.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),n.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:p.branding.fontFamily},children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Text Preview"}),n.jsx("p",{children:"This is how your text will appear with the selected font."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Color Preview"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:p.branding.primaryColor},children:"Primary"}),n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:p.branding.secondaryColor},children:"Secondary"})]})]})]})]})]}),n.jsxs(tt,{value:"users",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Users"}),n.jsxs(J,{size:"sm",onClick:()=>m(!0),children:[n.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),f?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),n.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading users..."})]}):c.length>0?n.jsx("div",{className:"space-y-3",children:c.map(T=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:T.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:T.email})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Fe,{className:T.is_active?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:T.is_active?"ACTIVE":"INACTIVE"}),n.jsx(Fe,{variant:"outline",children:T.role.toUpperCase()}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>A(T),children:[n.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:()=>C(T.id,T.name),children:[n.jsx($n,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]},T.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Yn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No users found for this tenant"}),n.jsx("p",{className:"text-sm",children:"Add users to provide access to this tenant"})]})]}),n.jsxs(tt,{value:"activity",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Activity Log"}),n.jsxs(J,{variant:"outline",size:"sm",children:[n.jsx(el,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(el,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No activity recorded yet"}),n.jsx("p",{className:"text-sm",children:"Activity will be logged as users interact with the system"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(J,{variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(J,{onClick:b,disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})]})}const S$e=[{id:"1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",status:"active",users:5,createdAt:new Date("2024-01-01"),lastActivity:new Date("2024-01-20")},{id:"2",name:"Sunshine RV Center",domain:"sunshine.renterinsight.com",status:"active",users:12,createdAt:new Date("2023-12-15"),lastActivity:new Date("2024-01-19")}],ch={totalTenants:2,activeTenants:2,totalUsers:17,systemUptime:"99.9%",avgResponseTime:"120ms",errorRate:"0.1%"};function YR(){const{hasRole:e}=Fm(),{toast:t}=_t(),[r,s]=w.useState(S$e),[a,i]=w.useState(""),[o,l]=w.useState(null),[c,d]=w.useState(!1),[f,u]=w.useState(!1);if(!e(Ao.ADMIN))return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx(ue,{className:"w-full max-w-md shadow-sm",children:n.jsxs(be,{className:"text-center",children:[n.jsx(Po,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),n.jsx(je,{children:"Access Denied"}),n.jsx(Be,{children:"You don't have permission to access the Platform Admin area."})]})})});const h=b=>{switch(b){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},m=r.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())||b.domain.toLowerCase().includes(a.toLowerCase())),v=()=>{d(!0)},g=async b=>{try{const y={id:Math.random().toString(36).substring(2,9),...b,status:b.isActive?"active":"inactive",users:0,createdAt:new Date,lastActivity:new Date};s(j=>[...j,y]),d(!1),t({title:"Tenant Created",description:`${b.name} has been created successfully.`})}catch{t({title:"Error",description:"Failed to create tenant",variant:"destructive"})}},p=b=>{l(b),u(!0)},x=async(b,y)=>{try{const j=r.map(E=>E.id===b?{...E,...y}:E);s(j),u(!1),t({title:"Tenant Updated",description:`${y.name} has been updated successfully.`})}catch{t({title:"Error",description:"Failed to update tenant",variant:"destructive"})}};return n.jsxs("div",{className:"space-y-8",children:[c&&n.jsx(i6e,{onSave:g,onCancel:()=>d(!1)}),f&&o&&n.jsx(N$e,{tenant:o,onSave:x,onClose:()=>{u(!1),l(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Platform Admin"}),n.jsx("p",{className:"ri-page-description",children:"System administration and tenant management"})]}),n.jsxs(J,{className:"shadow-sm",onClick:v,children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Tenant"]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Tenants"}),n.jsx(xg,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:ch.totalTenants}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"All tenants"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Active Tenants"}),n.jsx(xg,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:ch.activeTenants}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(el,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Total Users"}),n.jsx(Yn,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:ch.totalUsers}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Yn,{className:"h-3 w-3 mr-1"}),"All users"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"System Uptime"}),n.jsx(el,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:ch.systemUptime}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(el,{className:"h-3 w-3 mr-1"}),"Excellent"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Avg Response"}),n.jsx(el,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:ch.avgResponseTime}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Fast response"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"Error Rate"}),n.jsx(el,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:ch.errorRate}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(el,{className:"h-3 w-3 mr-1"}),"Very low"]})]})]})]}),n.jsxs(Ar,{defaultValue:"health",className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"health",children:"System Health"}),n.jsx(Ze,{value:"usage",children:"Usage Stats"}),n.jsx(Ze,{value:"logs",children:"Audit Logs"})]}),n.jsx(tt,{value:"health",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"System Health"}),n.jsx(Be,{children:"Real-time system status and health metrics"})]}),n.jsx(fe,{children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Database: Healthy"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"API Services: Operational"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Payment Gateway: Connected"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Email Service: Active"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"File Storage: Available"})]}),n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Backup System: Running"})]})]})})]})}),n.jsx(tt,{value:"usage",children:n.jsx(s6e,{})}),n.jsx(tt,{value:"logs",children:n.jsx(a6e,{})})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(hs,{className:"ri-search-icon"}),n.jsx(Pe,{placeholder:"Search tenants...",value:a,onChange:b=>i(b.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(J,{variant:"outline",className:"shadow-sm",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Tenant Management"}),n.jsx(Be,{children:"Manage dealership tenants and their configurations"})]}),n.jsx(fe,{children:n.jsx("div",{className:"space-y-4",children:m.map(b=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:b.name}),n.jsx(Fe,{className:Ge("ri-badge-status",h(b.status)),children:b.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Domain:"}),n.jsx("span",{className:"ml-1",children:b.domain})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Users:"}),n.jsx("span",{className:"ml-1",children:b.users})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{className:"ml-1",children:b.createdAt.toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Last Activity:"}),n.jsx("span",{className:"ml-1",children:b.lastActivity.toLocaleDateString()})]})]})]})}),n.jsx("div",{className:"ri-action-buttons",children:n.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>p(b),children:[n.jsx(_j,{className:"h-3 w-3 mr-1"}),"Manage"]})})]},b.id))})})]})]})}function C$e(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(YR,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(YR,{})})]})}function A$e({onGenerate:e,onExportCSV:t,isGenerating:r,hasData:s}){const{toast:a}=_t(),[i,o]=w.useState({type:Gr.SALES,name:"Sales Report",dateRange:{startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},filters:{}}),l=d=>{if(d.preventDefault(),!i.name){a({title:"Validation Error",description:"Report name is required",variant:"destructive"});return}e(i)},c=d=>{let f="Custom Report";switch(d){case Gr.SALES:f="Sales Report";break;case Gr.INVENTORY:f="Inventory Report";break;case Gr.SERVICE:f="Service Report";break;case Gr.FINANCIAL:f="Financial Report";break}o(u=>({...u,type:d,name:f}))};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(es,{className:"h-5 w-5 mr-2 text-primary"}),"Generate Report"]}),n.jsx(Be,{children:"Configure and generate custom reports"})]}),n.jsx(fe,{children:n.jsxs("form",{onSubmit:l,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"reportType",children:"Report Type"}),n.jsxs(We,{value:i.type,onValueChange:d=>c(d),children:[n.jsx(Ue,{children:n.jsx(qe,{})}),n.jsxs(Ve,{children:[n.jsx(K,{value:Gr.SALES,children:"Sales Report"}),n.jsx(K,{value:Gr.INVENTORY,children:"Inventory Report"}),n.jsx(K,{value:Gr.SERVICE,children:"Service Report"}),n.jsx(K,{value:Gr.FINANCIAL,children:"Financial Report"}),n.jsx(K,{value:Gr.CUSTOM,children:"Custom Report"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"reportName",children:"Report Name"}),n.jsx(Pe,{id:"reportName",value:i.name,onChange:d=>o(f=>({...f,name:d.target.value})),placeholder:"Enter report name"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"startDate",children:"Start Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ur,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"startDate",type:"date",value:i.dateRange.startDate,onChange:d=>o(f=>({...f,dateRange:{...f.dateRange,startDate:d.target.value}})),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"endDate",children:"End Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ur,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{id:"endDate",type:"date",value:i.dateRange.endDate,onChange:d=>o(f=>({...f,dateRange:{...f.dateRange,endDate:d.target.value}})),className:"pl-10"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"salesRep",children:"Sales Rep"}),n.jsxs(We,{value:i.filters.salesRep||"",onValueChange:d=>o(f=>({...f,filters:{...f.filters,salesRep:d||void 0}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"All Sales Reps"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"All Sales Reps"}),n.jsx(K,{value:"rep-001",children:"John Smith"}),n.jsx(K,{value:"rep-002",children:"Sarah Johnson"}),n.jsx(K,{value:"rep-003",children:"Mike Davis"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"status",children:"Status"}),n.jsxs(We,{value:i.filters.status||"",onValueChange:d=>o(f=>({...f,filters:{...f.filters,status:d||void 0}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"All Statuses"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"All Statuses"}),n.jsx(K,{value:"active",children:"Active"}),n.jsx(K,{value:"completed",children:"Completed"}),n.jsx(K,{value:"cancelled",children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ae,{htmlFor:"location",children:"Location"}),n.jsxs(We,{value:i.filters.location||"",onValueChange:d=>o(f=>({...f,filters:{...f.filters,location:d||void 0}})),children:[n.jsx(Ue,{children:n.jsx(qe,{placeholder:"All Locations"})}),n.jsxs(Ve,{children:[n.jsx(K,{value:"",children:"All Locations"}),n.jsx(K,{value:"north",children:"North Region"}),n.jsx(K,{value:"south",children:"South Region"}),n.jsx(K,{value:"east",children:"East Region"}),n.jsx(K,{value:"west",children:"West Region"})]})]})]})]}),n.jsxs("div",{className:"flex justify-between pt-4",children:[n.jsxs(J,{type:"button",variant:"outline",children:[n.jsx(Ya,{className:"h-4 w-4 mr-2"}),"More Filters"]}),n.jsxs("div",{className:"flex space-x-2",children:[s&&n.jsxs(J,{type:"button",variant:"outline",onClick:t,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),n.jsx(J,{type:"submit",disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(es,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})]})})]})}const Nq=w.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:Ge("w-full caption-bottom text-sm",e),...t})}));Nq.displayName="Table";const Sq=w.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:Ge("[&_tr]:border-b",e),...t}));Sq.displayName="TableHeader";const Cq=w.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:Ge("[&_tr:last-child]:border-0",e),...t}));Cq.displayName="TableBody";const E$e=w.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:Ge("bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));E$e.displayName="TableFooter";const cb=w.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:Ge("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));cb.displayName="TableRow";const Aq=w.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:Ge("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Aq.displayName="TableHead";const EE=w.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:Ge("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));EE.displayName="TableCell";const P$e=w.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:Ge("mt-4 text-sm text-muted-foreground",e),...t}));P$e.displayName="TableCaption";function T$e({reportType:e,reportName:t,data:r,columns:s,onExportCSV:a}){const[i,o]=w.useState(""),[l,c]=w.useState(null),[d,f]=w.useState("asc"),[u,h]=w.useState(1),m=10,g=[...r.filter(j=>Object.values(j).some(E=>E&&E.toString().toLowerCase().includes(i.toLowerCase())))].sort((j,E)=>{if(!l)return 0;const A=j[l],C=E[l];if(A===void 0||C===void 0)return 0;if(typeof A=="number"&&typeof C=="number")return d==="asc"?A-C:C-A;if(A instanceof Date&&C instanceof Date)return d==="asc"?A.getTime()-C.getTime():C.getTime()-A.getTime();const S=A.toString().toLowerCase(),T=C.toString().toLowerCase();return d==="asc"?S.localeCompare(T):T.localeCompare(S)}),p=Math.ceil(g.length/m),x=g.slice((u-1)*m,u*m),b=j=>{l===j?f(d==="asc"?"desc":"asc"):(c(j),f("asc"))},y=(j,E)=>{if(j==null)return"-";switch(E){case"currency":return Ie(j);case"date":return ft(j);case"boolean":return j?"Yes":"No";default:return j.toString()}};return n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(je,{children:t}),n.jsxs(Be,{children:[r.length," records found"]})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:a,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),n.jsx(fe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs("div",{className:"relative flex-1",children:[n.jsx(hs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Pe,{placeholder:"Search results...",value:i,onChange:j=>{o(j.target.value),h(1)},className:"pl-10"})]})}),n.jsx("div",{className:"rounded-md border",children:n.jsxs(Nq,{children:[n.jsx(Sq,{children:n.jsx(cb,{children:s.map(j=>n.jsx(Aq,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>b(j.key),children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{children:j.label}),l===j.key&&(d==="asc"?n.jsx(rl,{className:"h-3 w-3"}):n.jsx(tl,{className:"h-3 w-3"}))]})},j.key))})}),n.jsx(Cq,{children:x.length>0?x.map((j,E)=>n.jsx(cb,{children:s.map(A=>n.jsx(EE,{children:y(j[A.key],A.type)},A.key))},E)):n.jsx(cb,{children:n.jsx(EE,{colSpan:s.length,className:"h-24 text-center",children:"No results found."})})})]})}),p>1&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(u-1)*m+1," to ",Math.min(u*m,g.length)," of ",g.length," results"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(J,{variant:"outline",size:"sm",onClick:()=>h(j=>Math.max(j-1,1)),disabled:u===1,children:"Previous"}),n.jsx(J,{variant:"outline",size:"sm",onClick:()=>h(j=>Math.min(j+1,p)),disabled:u===p,children:"Next"})]})]})]})})]})}function _$e(){const[e,t]=w.useState([]),[r,s]=w.useState([]),[a,i]=w.useState(!1),[o,l]=w.useState(null),{leads:c,salesReps:d}=Mo(),{vehicles:f}=Ud(),{tickets:u}=Q9(),{invoices:h,payments:m}=jz(),v=async j=>{i(!0),l(j);try{const E=new Date(j.dateRange.startDate),A=new Date(j.dateRange.endDate);let C=[],S=[];switch(j.type){case Gr.SALES:C=g(E,A,j.filters),S=[{key:"id",label:"ID"},{key:"customerName",label:"Customer"},{key:"date",label:"Date",type:"date"},{key:"product",label:"Product"},{key:"salesRep",label:"Sales Rep"},{key:"amount",label:"Amount",type:"currency"},{key:"status",label:"Status"}];break;case Gr.INVENTORY:C=p(j.filters),S=[{key:"id",label:"ID"},{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year",type:"number"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price",type:"currency"},{key:"cost",label:"Cost",type:"currency"},{key:"location",label:"Location"}];break;case Gr.SERVICE:C=x(E,A,j.filters),S=[{key:"id",label:"Ticket ID"},{key:"title",label:"Title"},{key:"customer",label:"Customer"},{key:"vehicle",label:"Vehicle"},{key:"status",label:"Status"},{key:"createdAt",label:"Created",type:"date"},{key:"completedAt",label:"Completed",type:"date"},{key:"partsTotal",label:"Parts Total",type:"currency"},{key:"laborTotal",label:"Labor Total",type:"currency"},{key:"total",label:"Total",type:"currency"}];break;case Gr.FINANCIAL:C=b(E,A,j.filters),S=[{key:"date",label:"Date",type:"date"},{key:"type",label:"Type"},{key:"reference",label:"Reference"},{key:"customer",label:"Customer"},{key:"description",label:"Description"},{key:"income",label:"Income",type:"currency"},{key:"expense",label:"Expense",type:"currency"},{key:"balance",label:"Balance",type:"currency"}];break;default:C=[],S=[]}t(C),s(S)}catch(E){console.error("Error generating report:",E)}finally{i(!1)}},g=(j,E,A)=>c.filter(S=>{const T=new Date(S.createdAt),O=T>=j&&T<=E,_=!A.salesRep||S.assignedTo===A.salesRep,N=!A.status||S.status===A.status;return O&&_&&N}).map(S=>{var O,_;const T=d.find(N=>N.id===S.assignedTo);return{id:S.id,customerName:`${S.firstName} ${S.lastName}`,date:S.createdAt,product:((O=S.customFields)==null?void 0:O.interests)||"N/A",salesRep:(T==null?void 0:T.name)||"Unassigned",amount:(_=S.customFields)!=null&&_.budget&&parseFloat(S.customFields.budget.replace(/[^0-9.]/g,""))||0,status:S.status}}),p=j=>f.filter(A=>{const C=!j.location||A.location.toLowerCase().includes(j.location.toLowerCase()),S=!j.status||A.status===j.status;return C&&S}).map(A=>({id:A.id,vin:A.vin,make:A.make,model:A.model,year:A.year,type:A.type,status:A.status,price:A.price,cost:A.cost,location:A.location})),x=(j,E,A)=>u.filter(S=>{const T=new Date(S.createdAt),O=T>=j&&T<=E,_=!A.status||S.status===A.status;return O&&_}).map(S=>{const T=S.parts.reduce((_,N)=>_+N.total,0),O=S.labor.reduce((_,N)=>_+N.total,0);return{id:S.id,title:S.title,customer:S.customerId,vehicle:S.vehicleId||"N/A",status:S.status,createdAt:S.createdAt,completedAt:S.completedDate,partsTotal:T,laborTotal:O,total:T+O}}),b=(j,E,A)=>{const C=[];return h.forEach(S=>{const T=new Date(S.createdAt);T>=j&&T<=E&&C.push({date:S.createdAt,type:"Invoice",reference:S.number,customer:S.customerId,description:`Invoice #${S.number}`,income:S.total,expense:0,balance:S.total})}),m.forEach(S=>{var O;const T=new Date(S.processedDate);T>=j&&T<=E&&C.push({date:S.processedDate,type:"Payment",reference:S.id,customer:((O=h.find(_=>_.id===S.invoiceId))==null?void 0:O.customerId)||"Unknown",description:`Payment for Invoice #${S.invoiceId}`,income:0,expense:S.amount,balance:-S.amount})}),C.sort((S,T)=>new Date(S.date).getTime()-new Date(T.date).getTime())};return{reportData:e,reportColumns:r,loading:a,currentReportConfig:o,generateReport:v,exportToCSV:()=>{if(!e.length||!r.length)return;const j=r.map(O=>O.label),E=e.map(O=>r.map(_=>{const N=O[_.key];switch(_.type){case"currency":return typeof N=="number"?N.toFixed(2):N;case"date":return N instanceof Date?N.toISOString().split("T")[0]:N;default:return N}})),A=tm.unparse({fields:j,data:E}),C=new Blob([A],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(C),T=document.createElement("a");T.href=S,T.setAttribute("download",`${(o==null?void 0:o.name)||"report"}.csv`),document.body.appendChild(T),T.click(),document.body.removeChild(T)}}}function I$e(){const{toast:e}=_t(),[t,r]=w.useState("30d"),[s,a]=w.useState(!1),[i,o]=w.useState("overview"),[l,c]=w.useState([{metric:"Total Leads",value:"2,651",change:"+4.75%",changePercent:"4.75%",category:"leads",trend:"up"},{metric:"Qualified Leads",value:"892",change:"+12.3%",changePercent:"12.3%",category:"leads",trend:"up"},{metric:"Conversion Rate",value:"24.5%",change:"-1.2%",changePercent:"1.2%",category:"leads",trend:"down"},{metric:"Avg Response Time",value:"3.2 hrs",change:"-0.8 hrs",changePercent:"20%",category:"leads",trend:"up"},{metric:"Total Revenue",value:"$1,245,890",change:"+8.3%",changePercent:"8.3%",category:"sales",trend:"up"},{metric:"Units Sold",value:"87",change:"+12.4%",changePercent:"12.4%",category:"sales",trend:"up"},{metric:"Avg Deal Size",value:"$14,320",change:"-2.1%",changePercent:"2.1%",category:"sales",trend:"down"},{metric:"Gross Profit Margin",value:"22.4%",change:"+1.5%",changePercent:"1.5%",category:"sales",trend:"up"}]),[d,f]=w.useState([{name:"Website",value:1245},{name:"Referral",value:654},{name:"Social Media",value:432},{name:"Trade Show",value:320}]),[u,h]=w.useState([{name:"Motorhomes",value:52e4},{name:"Travel Trailers",value:38e4},{name:"Fifth Wheels",value:245e3},{name:"Toy Haulers",value:1e5}]),m=async()=>{a(!0);try{await new Promise(p=>setTimeout(p,1500)),e({title:"Dashboard Refreshed",description:"Latest data has been loaded."})}catch{e({title:"Error",description:"Failed to refresh dashboard data.",variant:"destructive"})}finally{a(!1)}},v=()=>{e({title:"Export Started",description:"Your dashboard report is being prepared for download."}),setTimeout(()=>{e({title:"Export Complete",description:"Your dashboard report has been downloaded."})},2e3)},g=p=>{r(p),a(!0),setTimeout(()=>{a(!1)},1e3)};return n.jsx("div",{className:"space-y-6",children:n.jsxs(ue,{className:"shadow-sm",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(je,{className:"flex items-center",children:[n.jsx(es,{className:"h-5 w-5 mr-2 text-primary"}),"Dashboard Report"]}),n.jsx(Be,{children:"Key performance indicators and business metrics"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(We,{value:t,onValueChange:g,children:[n.jsxs(Ue,{className:"w-[150px]",children:[n.jsx(Ur,{className:"h-4 w-4 mr-2"}),n.jsx(qe,{})]}),n.jsxs(Ve,{children:[n.jsx(K,{value:"7d",children:"Last 7 Days"}),n.jsx(K,{value:"30d",children:"Last 30 Days"}),n.jsx(K,{value:"90d",children:"Last 90 Days"}),n.jsx(K,{value:"ytd",children:"Year to Date"}),n.jsx(K,{value:"1y",children:"Last Year"})]})]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:m,disabled:s,children:[s?n.jsx(Jh,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(Jh,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs(J,{variant:"outline",size:"sm",onClick:v,children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsx(fe,{children:n.jsxs(Ar,{value:i,onValueChange:o,className:"space-y-4",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"overview",children:"Overview"}),n.jsx(Ze,{value:"leads",children:"Leads & Marketing"}),n.jsx(Ze,{value:"sales",children:"Sales & Revenue"})]}),n.jsxs(tt,{value:"overview",className:"space-y-4",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="leads"||p.category==="sales").slice(0,4).map((p,x)=>n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?n.jsx(Lt,{className:"h-4 w-4 text-green-500"}):n.jsx(Lh,{className:"h-4 w-4 text-red-500"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-2xl font-bold",children:p.value}),n.jsxs("p",{className:Ge("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},x))}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Leads by Source"}),n.jsx(Be,{children:"Distribution of leads across different sources"})]}),n.jsx(fe,{className:"h-64",children:n.jsx(Vv,{width:"100%",height:"100%",children:n.jsxs(QW,{data:d,children:[n.jsx(yl,{dataKey:"name",tick:{fontSize:10}}),n.jsx(bl,{tickFormatter:p=>p.toLocaleString(),tick:{fontSize:10}}),n.jsx(Fa,{formatter:p=>p.toLocaleString()}),n.jsx(Yd,{dataKey:"value",fill:"#8884d8"})]})})})]}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Sales by Product Category"}),n.jsx(Be,{children:"Revenue generated by different product categories"})]}),n.jsx(fe,{className:"h-64",children:n.jsx(Vv,{width:"100%",height:"100%",children:n.jsxs(JW,{data:u,children:[n.jsx(yl,{dataKey:"name",tick:{fontSize:10}}),n.jsx(bl,{tickFormatter:p=>Ie(p),tick:{fontSize:10}}),n.jsx(Fa,{formatter:p=>Ie(p)}),n.jsx(Nc,{type:"monotone",dataKey:"value",stroke:"#82ca9d",fill:"#82ca9d"})]})})})]})]})]}),n.jsxs(tt,{value:"leads",className:"space-y-4",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="leads").map((p,x)=>n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?n.jsx(Lt,{className:"h-4 w-4 text-green-500"}):n.jsx(Lh,{className:"h-4 w-4 text-red-500"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-2xl font-bold",children:p.value}),n.jsxs("p",{className:Ge("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},x))}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Lead Conversion Funnel"}),n.jsx(Be,{children:"Visual representation of lead progression"})]}),n.jsx(fe,{children:n.jsx("div",{className:"h-64 flex items-center justify-center bg-muted/20 rounded-md",children:n.jsx("p",{className:"text-muted-foreground",children:"Funnel Chart Placeholder"})})})]})]}),n.jsxs(tt,{value:"sales",className:"space-y-4",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="sales").map((p,x)=>n.jsx(ue,{className:"shadow-sm",children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?n.jsx(Lt,{className:"h-4 w-4 text-green-500"}):n.jsx(Lh,{className:"h-4 w-4 text-red-500"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-2xl font-bold",children:p.value}),n.jsxs("p",{className:Ge("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},x))}),n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{children:"Revenue Trend"}),n.jsx(Be,{children:"Monthly revenue over the selected timeframe"})]}),n.jsx(fe,{children:n.jsx("div",{className:"h-64 flex items-center justify-center bg-muted/20 rounded-md",children:n.jsx("p",{className:"text-muted-foreground",children:"Revenue Trend Chart Placeholder"})})})]})]})]})})]})})}const k$e=[{id:"1",name:"Monthly Sales Report",type:Gr.SALES,module:"sales",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-20"),generatedBy:"admin"},{id:"2",name:"Inventory Valuation",type:Gr.INVENTORY,module:"inventory",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-19"),generatedBy:"manager"},{id:"3",name:"Service Revenue Analysis",type:Gr.SERVICE,module:"service",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-18"),generatedBy:"admin"}],XR=[{id:"sales-summary",name:"Sales Summary",description:"Overview of sales performance and metrics",type:Gr.SALES,icon:$t,color:"from-green-50 to-green-100/50"},{id:"inventory-report",name:"Inventory Report",description:"Current inventory levels and valuation",type:Gr.INVENTORY,icon:ia,color:"from-blue-50 to-blue-100/50"},{id:"customer-analysis",name:"Customer Analysis",description:"Customer demographics and behavior insights",type:Gr.CUSTOM,icon:Yn,color:"from-purple-50 to-purple-100/50"},{id:"financial-overview",name:"Financial Overview",description:"Revenue, expenses, and profitability analysis",type:Gr.FINANCIAL,icon:Lt,color:"from-orange-50 to-orange-100/50"}];function QR(){const[e,t]=w.useState(k$e),{reportData:r,reportColumns:s,loading:a,currentReportConfig:i,generateReport:o,exportToCSV:l}=_$e(),[c,d]=w.useState("dashboard"),f=m=>{switch(m){case Gr.SALES:return"bg-green-50 text-green-700 border-green-200";case Gr.INVENTORY:return"bg-blue-50 text-blue-700 border-blue-200";case Gr.SERVICE:return"bg-purple-50 text-purple-700 border-purple-200";case Gr.FINANCIAL:return"bg-orange-50 text-orange-700 border-orange-200";case Gr.CUSTOM:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=m=>{o(m)},h=()=>{l()};return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Reporting Suite"}),n.jsx("p",{className:"ri-page-description",children:"Generate insights and analytics for your dealership"})]}),n.jsxs(J,{className:"shadow-sm",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create Report"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-blue-900",children:"Total Reports"}),n.jsx(es,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"All reports"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-green-900",children:"This Month"}),n.jsx(es,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(m=>m.generatedAt.getMonth()===new Date().getMonth()).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Generated this month"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-purple-900",children:"Scheduled"}),n.jsx(es,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"5"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(es,{className:"h-3 w-3 mr-1"}),"Automated reports"]})]})]}),n.jsxs(ue,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(je,{className:"text-sm font-medium text-orange-900",children:"Templates"}),n.jsx(es,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(fe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:XR.length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(es,{className:"h-3 w-3 mr-1"}),"Available templates"]})]})]})]}),n.jsxs(Ar,{value:c,onValueChange:d,className:"space-y-6",children:[n.jsxs(jr,{className:"grid w-full grid-cols-3",children:[n.jsx(Ze,{value:"dashboard",children:"Dashboard"}),n.jsx(Ze,{value:"generator",children:"Report Generator"}),n.jsx(Ze,{value:"saved",children:"Saved Reports"})]}),n.jsx(tt,{value:"dashboard",children:n.jsx(I$e,{})}),n.jsxs(tt,{value:"generator",children:[n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Report Templates"}),n.jsx(Be,{children:"Quick start templates for common reports"})]}),n.jsx(fe,{children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:XR.map(m=>n.jsx(ue,{className:Ge("overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer border-0 bg-gradient-to-br",m.color),children:n.jsxs(fe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx(m.icon,{className:"h-8 w-8 text-primary"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:m.name}),n.jsx(Fe,{className:Ge("ri-badge-status mt-1",f(m.type)),children:m.type.toUpperCase()})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:m.description}),n.jsx(J,{size:"sm",className:"w-full shadow-sm",children:"Generate Report"})]})},m.id))})})]}),n.jsx(A$e,{onGenerate:u,onExportCSV:h,isGenerating:a,hasData:r.length>0}),r.length>0&&i&&n.jsx(T$e,{reportType:i.type,reportName:i.name,data:r,columns:s,onExportCSV:h})]}),n.jsx(tt,{value:"saved",children:e.length>0&&n.jsxs(ue,{className:"shadow-sm",children:[n.jsxs(be,{children:[n.jsx(je,{className:"text-xl",children:"Saved Reports"}),n.jsx(Be,{children:"Previously generated reports"})]}),n.jsx(fe,{children:n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"Select a report template above to generate a new report"})})})]})})]})]})}function D$e(){return n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(QR,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(QR,{})})]})}function O$e(){return n.jsx(kQ,{defaultTheme:"light",storageKey:"renter-insight-theme",children:n.jsx(PQ,{children:n.jsx(kY,{children:n.jsx(TQ,{children:n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs(Us,{children:[n.jsx(Vt,{path:"/login",element:n.jsx(Jne,{})}),n.jsx(Vt,{path:"/*",element:n.jsx(Zne,{children:n.jsx(IZ,{children:n.jsxs(Us,{children:[n.jsx(Vt,{path:"/",element:n.jsx(Qne,{})}),n.jsx(Vt,{path:"/crm/*",element:n.jsx(Sae,{})}),n.jsx(Vt,{path:"/inventory/*",element:n.jsx(Pie,{})}),n.jsx(Vt,{path:"/deals/*",element:n.jsx(Efe,{})}),n.jsx(Vt,{path:"/finance/*",element:n.jsx(Rie,{})}),n.jsx(Vt,{path:"/quotes/*",element:n.jsx(Iie,{})}),n.jsx(Vt,{path:"/agreements/*",element:n.jsx(Tfe,{})}),n.jsx(Vt,{path:"/service/*",element:n.jsx($he,{})}),n.jsx(Vt,{path:"/pdi/*",element:n.jsx(Zhe,{})}),n.jsx(Vt,{path:"/delivery/*",element:n.jsx(qhe,{})}),n.jsx(Vt,{path:"/commissions/*",element:n.jsx(ome,{})}),n.jsx(Vt,{path:"/portal/*",element:n.jsx(fme,{})}),n.jsx(Vt,{path:"/invoices/*",element:n.jsx(gme,{})}),n.jsx(Vt,{path:"/settings/*",element:n.jsx(Sme,{})}),n.jsx(Vt,{path:"/admin/*",element:n.jsx(C$e,{})}),n.jsx(Vt,{path:"/reports/*",element:n.jsx(D$e,{})})]})})})})]}),n.jsx(EQ,{})]})})})})})}XS.createRoot(document.getElementById("root")).render(n.jsx(O$e,{}));export{Bie as _,rs as c,kr as g};
